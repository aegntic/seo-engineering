(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();var wd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function _r(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function mce(r){if(Object.prototype.hasOwnProperty.call(r,"__esModule"))return r;var e=r.default;if(typeof e=="function"){var n=function i(){return this instanceof i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(r).forEach(function(i){var s=Object.getOwnPropertyDescriptor(r,i);Object.defineProperty(n,i,s.get?s:{enumerable:!0,get:function(){return r[i]}})}),n}var m2={exports:{}},q0={},g2={exports:{}},cr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var H5;function gce(){if(H5)return cr;H5=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),d=Symbol.iterator;function f(q){return q===null||typeof q!="object"?null:(q=d&&q[d]||q["@@iterator"],typeof q=="function"?q:null)}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,v={};function x(q,ue,be){this.props=q,this.context=ue,this.refs=v,this.updater=be||p}x.prototype.isReactComponent={},x.prototype.setState=function(q,ue){if(typeof q!="object"&&typeof q!="function"&&q!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,q,ue,"setState")},x.prototype.forceUpdate=function(q){this.updater.enqueueForceUpdate(this,q,"forceUpdate")};function _(){}_.prototype=x.prototype;function E(q,ue,be){this.props=q,this.context=ue,this.refs=v,this.updater=be||p}var S=E.prototype=new _;S.constructor=E,g(S,x.prototype),S.isPureReactComponent=!0;var T=Array.isArray,M=Object.prototype.hasOwnProperty,C={current:null},A={key:!0,ref:!0,__self:!0,__source:!0};function P(q,ue,be){var ee,le={},oe=null,fe=null;if(ue!=null)for(ee in ue.ref!==void 0&&(fe=ue.ref),ue.key!==void 0&&(oe=""+ue.key),ue)M.call(ue,ee)&&!A.hasOwnProperty(ee)&&(le[ee]=ue[ee]);var Se=arguments.length-2;if(Se===1)le.children=be;else if(1<Se){for(var we=Array(Se),Le=0;Le<Se;Le++)we[Le]=arguments[Le+2];le.children=we}if(q&&q.defaultProps)for(ee in Se=q.defaultProps,Se)le[ee]===void 0&&(le[ee]=Se[ee]);return{$$typeof:r,type:q,key:oe,ref:fe,props:le,_owner:C.current}}function R(q,ue){return{$$typeof:r,type:q.type,key:ue,ref:q.ref,props:q.props,_owner:q._owner}}function O(q){return typeof q=="object"&&q!==null&&q.$$typeof===r}function D(q){var ue={"=":"=0",":":"=2"};return"$"+q.replace(/[=:]/g,function(be){return ue[be]})}var F=/\/+/g;function U(q,ue){return typeof q=="object"&&q!==null&&q.key!=null?D(""+q.key):ue.toString(36)}function B(q,ue,be,ee,le){var oe=typeof q;(oe==="undefined"||oe==="boolean")&&(q=null);var fe=!1;if(q===null)fe=!0;else switch(oe){case"string":case"number":fe=!0;break;case"object":switch(q.$$typeof){case r:case e:fe=!0}}if(fe)return fe=q,le=le(fe),q=ee===""?"."+U(fe,0):ee,T(le)?(be="",q!=null&&(be=q.replace(F,"$&/")+"/"),B(le,ue,be,"",function(Le){return Le})):le!=null&&(O(le)&&(le=R(le,be+(!le.key||fe&&fe.key===le.key?"":(""+le.key).replace(F,"$&/")+"/")+q)),ue.push(le)),1;if(fe=0,ee=ee===""?".":ee+":",T(q))for(var Se=0;Se<q.length;Se++){oe=q[Se];var we=ee+U(oe,Se);fe+=B(oe,ue,be,we,le)}else if(we=f(q),typeof we=="function")for(q=we.call(q),Se=0;!(oe=q.next()).done;)oe=oe.value,we=ee+U(oe,Se++),fe+=B(oe,ue,be,we,le);else if(oe==="object")throw ue=String(q),Error("Objects are not valid as a React child (found: "+(ue==="[object Object]"?"object with keys {"+Object.keys(q).join(", ")+"}":ue)+"). If you meant to render a collection of children, use an array instead.");return fe}function W(q,ue,be){if(q==null)return q;var ee=[],le=0;return B(q,ee,"","",function(oe){return ue.call(be,oe,le++)}),ee}function j(q){if(q._status===-1){var ue=q._result;ue=ue(),ue.then(function(be){(q._status===0||q._status===-1)&&(q._status=1,q._result=be)},function(be){(q._status===0||q._status===-1)&&(q._status=2,q._result=be)}),q._status===-1&&(q._status=0,q._result=ue)}if(q._status===1)return q._result.default;throw q._result}var $={current:null},z={transition:null},Z={ReactCurrentDispatcher:$,ReactCurrentBatchConfig:z,ReactCurrentOwner:C};function se(){throw Error("act(...) is not supported in production builds of React.")}return cr.Children={map:W,forEach:function(q,ue,be){W(q,function(){ue.apply(this,arguments)},be)},count:function(q){var ue=0;return W(q,function(){ue++}),ue},toArray:function(q){return W(q,function(ue){return ue})||[]},only:function(q){if(!O(q))throw Error("React.Children.only expected to receive a single React element child.");return q}},cr.Component=x,cr.Fragment=n,cr.Profiler=s,cr.PureComponent=E,cr.StrictMode=i,cr.Suspense=c,cr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Z,cr.act=se,cr.cloneElement=function(q,ue,be){if(q==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+q+".");var ee=g({},q.props),le=q.key,oe=q.ref,fe=q._owner;if(ue!=null){if(ue.ref!==void 0&&(oe=ue.ref,fe=C.current),ue.key!==void 0&&(le=""+ue.key),q.type&&q.type.defaultProps)var Se=q.type.defaultProps;for(we in ue)M.call(ue,we)&&!A.hasOwnProperty(we)&&(ee[we]=ue[we]===void 0&&Se!==void 0?Se[we]:ue[we])}var we=arguments.length-2;if(we===1)ee.children=be;else if(1<we){Se=Array(we);for(var Le=0;Le<we;Le++)Se[Le]=arguments[Le+2];ee.children=Se}return{$$typeof:r,type:q.type,key:le,ref:oe,props:ee,_owner:fe}},cr.createContext=function(q){return q={$$typeof:o,_currentValue:q,_currentValue2:q,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},q.Provider={$$typeof:a,_context:q},q.Consumer=q},cr.createElement=P,cr.createFactory=function(q){var ue=P.bind(null,q);return ue.type=q,ue},cr.createRef=function(){return{current:null}},cr.forwardRef=function(q){return{$$typeof:l,render:q}},cr.isValidElement=O,cr.lazy=function(q){return{$$typeof:h,_payload:{_status:-1,_result:q},_init:j}},cr.memo=function(q,ue){return{$$typeof:u,type:q,compare:ue===void 0?null:ue}},cr.startTransition=function(q){var ue=z.transition;z.transition={};try{q()}finally{z.transition=ue}},cr.unstable_act=se,cr.useCallback=function(q,ue){return $.current.useCallback(q,ue)},cr.useContext=function(q){return $.current.useContext(q)},cr.useDebugValue=function(){},cr.useDeferredValue=function(q){return $.current.useDeferredValue(q)},cr.useEffect=function(q,ue){return $.current.useEffect(q,ue)},cr.useId=function(){return $.current.useId()},cr.useImperativeHandle=function(q,ue,be){return $.current.useImperativeHandle(q,ue,be)},cr.useInsertionEffect=function(q,ue){return $.current.useInsertionEffect(q,ue)},cr.useLayoutEffect=function(q,ue){return $.current.useLayoutEffect(q,ue)},cr.useMemo=function(q,ue){return $.current.useMemo(q,ue)},cr.useReducer=function(q,ue,be){return $.current.useReducer(q,ue,be)},cr.useRef=function(q){return $.current.useRef(q)},cr.useState=function(q){return $.current.useState(q)},cr.useSyncExternalStore=function(q,ue,be){return $.current.useSyncExternalStore(q,ue,be)},cr.useTransition=function(){return $.current.useTransition()},cr.version="18.3.1",cr}var W5;function lM(){return W5||(W5=1,g2.exports=gce()),g2.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var q5;function yce(){if(q5)return q0;q5=1;var r=lM(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function o(l,c,u){var h,d={},f=null,p=null;u!==void 0&&(f=""+u),c.key!==void 0&&(f=""+c.key),c.ref!==void 0&&(p=c.ref);for(h in c)i.call(c,h)&&!a.hasOwnProperty(h)&&(d[h]=c[h]);if(l&&l.defaultProps)for(h in c=l.defaultProps,c)d[h]===void 0&&(d[h]=c[h]);return{$$typeof:e,type:l,key:f,ref:p,props:d,_owner:s.current}}return q0.Fragment=n,q0.jsx=o,q0.jsxs=o,q0}var X5;function vce(){return X5||(X5=1,m2.exports=yce()),m2.exports}var b=vce(),X=lM();const ce=_r(X);var zw={},y2={exports:{}},$a={},v2={exports:{}},x2={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var K5;function xce(){return K5||(K5=1,function(r){function e(z,Z){var se=z.length;z.push(Z);e:for(;0<se;){var q=se-1>>>1,ue=z[q];if(0<s(ue,Z))z[q]=Z,z[se]=ue,se=q;else break e}}function n(z){return z.length===0?null:z[0]}function i(z){if(z.length===0)return null;var Z=z[0],se=z.pop();if(se!==Z){z[0]=se;e:for(var q=0,ue=z.length,be=ue>>>1;q<be;){var ee=2*(q+1)-1,le=z[ee],oe=ee+1,fe=z[oe];if(0>s(le,se))oe<ue&&0>s(fe,le)?(z[q]=fe,z[oe]=se,q=oe):(z[q]=le,z[ee]=se,q=ee);else if(oe<ue&&0>s(fe,se))z[q]=fe,z[oe]=se,q=oe;else break e}}return Z}function s(z,Z){var se=z.sortIndex-Z.sortIndex;return se!==0?se:z.id-Z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;r.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();r.unstable_now=function(){return o.now()-l}}var c=[],u=[],h=1,d=null,f=3,p=!1,g=!1,v=!1,x=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(z){for(var Z=n(u);Z!==null;){if(Z.callback===null)i(u);else if(Z.startTime<=z)i(u),Z.sortIndex=Z.expirationTime,e(c,Z);else break;Z=n(u)}}function T(z){if(v=!1,S(z),!g)if(n(c)!==null)g=!0,j(M);else{var Z=n(u);Z!==null&&$(T,Z.startTime-z)}}function M(z,Z){g=!1,v&&(v=!1,_(P),P=-1),p=!0;var se=f;try{for(S(Z),d=n(c);d!==null&&(!(d.expirationTime>Z)||z&&!D());){var q=d.callback;if(typeof q=="function"){d.callback=null,f=d.priorityLevel;var ue=q(d.expirationTime<=Z);Z=r.unstable_now(),typeof ue=="function"?d.callback=ue:d===n(c)&&i(c),S(Z)}else i(c);d=n(c)}if(d!==null)var be=!0;else{var ee=n(u);ee!==null&&$(T,ee.startTime-Z),be=!1}return be}finally{d=null,f=se,p=!1}}var C=!1,A=null,P=-1,R=5,O=-1;function D(){return!(r.unstable_now()-O<R)}function F(){if(A!==null){var z=r.unstable_now();O=z;var Z=!0;try{Z=A(!0,z)}finally{Z?U():(C=!1,A=null)}}else C=!1}var U;if(typeof E=="function")U=function(){E(F)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,W=B.port2;B.port1.onmessage=F,U=function(){W.postMessage(null)}}else U=function(){x(F,0)};function j(z){A=z,C||(C=!0,U())}function $(z,Z){P=x(function(){z(r.unstable_now())},Z)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(z){z.callback=null},r.unstable_continueExecution=function(){g||p||(g=!0,j(M))},r.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<z?Math.floor(1e3/z):5},r.unstable_getCurrentPriorityLevel=function(){return f},r.unstable_getFirstCallbackNode=function(){return n(c)},r.unstable_next=function(z){switch(f){case 1:case 2:case 3:var Z=3;break;default:Z=f}var se=f;f=Z;try{return z()}finally{f=se}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(z,Z){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var se=f;f=z;try{return Z()}finally{f=se}},r.unstable_scheduleCallback=function(z,Z,se){var q=r.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?q+se:q):se=q,z){case 1:var ue=-1;break;case 2:ue=250;break;case 5:ue=1073741823;break;case 4:ue=1e4;break;default:ue=5e3}return ue=se+ue,z={id:h++,callback:Z,priorityLevel:z,startTime:se,expirationTime:ue,sortIndex:-1},se>q?(z.sortIndex=se,e(u,z),n(c)===null&&z===n(u)&&(v?(_(P),P=-1):v=!0,$(T,se-q))):(z.sortIndex=ue,e(c,z),g||p||(g=!0,j(M))),z},r.unstable_shouldYield=D,r.unstable_wrapCallback=function(z){var Z=f;return function(){var se=f;f=Z;try{return z.apply(this,arguments)}finally{f=se}}}}(x2)),x2}var Y5;function bce(){return Y5||(Y5=1,v2.exports=xce()),v2.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Z5;function _ce(){if(Z5)return $a;Z5=1;var r=lM(),e=bce();function n(m){for(var y="https://reactjs.org/docs/error-decoder.html?invariant="+m,w=1;w<arguments.length;w++)y+="&args[]="+encodeURIComponent(arguments[w]);return"Minified React error #"+m+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,s={};function a(m,y){o(m,y),o(m+"Capture",y)}function o(m,y){for(s[m]=y,m=0;m<y.length;m++)i.add(y[m])}var l=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),c=Object.prototype.hasOwnProperty,u=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,h={},d={};function f(m){return c.call(d,m)?!0:c.call(h,m)?!1:u.test(m)?d[m]=!0:(h[m]=!0,!1)}function p(m,y,w,N){if(w!==null&&w.type===0)return!1;switch(typeof y){case"function":case"symbol":return!0;case"boolean":return N?!1:w!==null?!w.acceptsBooleans:(m=m.toLowerCase().slice(0,5),m!=="data-"&&m!=="aria-");default:return!1}}function g(m,y,w,N){if(y===null||typeof y>"u"||p(m,y,w,N))return!0;if(N)return!1;if(w!==null)switch(w.type){case 3:return!y;case 4:return y===!1;case 5:return isNaN(y);case 6:return isNaN(y)||1>y}return!1}function v(m,y,w,N,k,L,K){this.acceptsBooleans=y===2||y===3||y===4,this.attributeName=N,this.attributeNamespace=k,this.mustUseProperty=w,this.propertyName=m,this.type=y,this.sanitizeURL=L,this.removeEmptyString=K}var x={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(m){x[m]=new v(m,0,!1,m,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(m){var y=m[0];x[y]=new v(y,1,!1,m[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(m){x[m]=new v(m,2,!1,m.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(m){x[m]=new v(m,2,!1,m,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(m){x[m]=new v(m,3,!1,m.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(m){x[m]=new v(m,3,!0,m,null,!1,!1)}),["capture","download"].forEach(function(m){x[m]=new v(m,4,!1,m,null,!1,!1)}),["cols","rows","size","span"].forEach(function(m){x[m]=new v(m,6,!1,m,null,!1,!1)}),["rowSpan","start"].forEach(function(m){x[m]=new v(m,5,!1,m.toLowerCase(),null,!1,!1)});var _=/[\-:]([a-z])/g;function E(m){return m[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(m){var y=m.replace(_,E);x[y]=new v(y,1,!1,m,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(m){var y=m.replace(_,E);x[y]=new v(y,1,!1,m,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(m){var y=m.replace(_,E);x[y]=new v(y,1,!1,m,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(m){x[m]=new v(m,1,!1,m.toLowerCase(),null,!1,!1)}),x.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(m){x[m]=new v(m,1,!1,m.toLowerCase(),null,!0,!0)});function S(m,y,w,N){var k=x.hasOwnProperty(y)?x[y]:null;(k!==null?k.type!==0:N||!(2<y.length)||y[0]!=="o"&&y[0]!=="O"||y[1]!=="n"&&y[1]!=="N")&&(g(y,w,k,N)&&(w=null),N||k===null?f(y)&&(w===null?m.removeAttribute(y):m.setAttribute(y,""+w)):k.mustUseProperty?m[k.propertyName]=w===null?k.type===3?!1:"":w:(y=k.attributeName,N=k.attributeNamespace,w===null?m.removeAttribute(y):(k=k.type,w=k===3||k===4&&w===!0?"":""+w,N?m.setAttributeNS(N,y,w):m.setAttribute(y,w))))}var T=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,M=Symbol.for("react.element"),C=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),P=Symbol.for("react.strict_mode"),R=Symbol.for("react.profiler"),O=Symbol.for("react.provider"),D=Symbol.for("react.context"),F=Symbol.for("react.forward_ref"),U=Symbol.for("react.suspense"),B=Symbol.for("react.suspense_list"),W=Symbol.for("react.memo"),j=Symbol.for("react.lazy"),$=Symbol.for("react.offscreen"),z=Symbol.iterator;function Z(m){return m===null||typeof m!="object"?null:(m=z&&m[z]||m["@@iterator"],typeof m=="function"?m:null)}var se=Object.assign,q;function ue(m){if(q===void 0)try{throw Error()}catch(w){var y=w.stack.trim().match(/\n( *(at )?)/);q=y&&y[1]||""}return`
`+q+m}var be=!1;function ee(m,y){if(!m||be)return"";be=!0;var w=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(y)if(y=function(){throw Error()},Object.defineProperty(y.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(y,[])}catch(Be){var N=Be}Reflect.construct(m,[],y)}else{try{y.call()}catch(Be){N=Be}m.call(y.prototype)}else{try{throw Error()}catch(Be){N=Be}m()}}catch(Be){if(Be&&N&&typeof Be.stack=="string"){for(var k=Be.stack.split(`
`),L=N.stack.split(`
`),K=k.length-1,ge=L.length-1;1<=K&&0<=ge&&k[K]!==L[ge];)ge--;for(;1<=K&&0<=ge;K--,ge--)if(k[K]!==L[ge]){if(K!==1||ge!==1)do if(K--,ge--,0>ge||k[K]!==L[ge]){var _e=`
`+k[K].replace(" at new "," at ");return m.displayName&&_e.includes("<anonymous>")&&(_e=_e.replace("<anonymous>",m.displayName)),_e}while(1<=K&&0<=ge);break}}}finally{be=!1,Error.prepareStackTrace=w}return(m=m?m.displayName||m.name:"")?ue(m):""}function le(m){switch(m.tag){case 5:return ue(m.type);case 16:return ue("Lazy");case 13:return ue("Suspense");case 19:return ue("SuspenseList");case 0:case 2:case 15:return m=ee(m.type,!1),m;case 11:return m=ee(m.type.render,!1),m;case 1:return m=ee(m.type,!0),m;default:return""}}function oe(m){if(m==null)return null;if(typeof m=="function")return m.displayName||m.name||null;if(typeof m=="string")return m;switch(m){case A:return"Fragment";case C:return"Portal";case R:return"Profiler";case P:return"StrictMode";case U:return"Suspense";case B:return"SuspenseList"}if(typeof m=="object")switch(m.$$typeof){case D:return(m.displayName||"Context")+".Consumer";case O:return(m._context.displayName||"Context")+".Provider";case F:var y=m.render;return m=m.displayName,m||(m=y.displayName||y.name||"",m=m!==""?"ForwardRef("+m+")":"ForwardRef"),m;case W:return y=m.displayName||null,y!==null?y:oe(m.type)||"Memo";case j:y=m._payload,m=m._init;try{return oe(m(y))}catch{}}return null}function fe(m){var y=m.type;switch(m.tag){case 24:return"Cache";case 9:return(y.displayName||"Context")+".Consumer";case 10:return(y._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return m=y.render,m=m.displayName||m.name||"",y.displayName||(m!==""?"ForwardRef("+m+")":"ForwardRef");case 7:return"Fragment";case 5:return y;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return oe(y);case 8:return y===P?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof y=="function")return y.displayName||y.name||null;if(typeof y=="string")return y}return null}function Se(m){switch(typeof m){case"boolean":case"number":case"string":case"undefined":return m;case"object":return m;default:return""}}function we(m){var y=m.type;return(m=m.nodeName)&&m.toLowerCase()==="input"&&(y==="checkbox"||y==="radio")}function Le(m){var y=we(m)?"checked":"value",w=Object.getOwnPropertyDescriptor(m.constructor.prototype,y),N=""+m[y];if(!m.hasOwnProperty(y)&&typeof w<"u"&&typeof w.get=="function"&&typeof w.set=="function"){var k=w.get,L=w.set;return Object.defineProperty(m,y,{configurable:!0,get:function(){return k.call(this)},set:function(K){N=""+K,L.call(this,K)}}),Object.defineProperty(m,y,{enumerable:w.enumerable}),{getValue:function(){return N},setValue:function(K){N=""+K},stopTracking:function(){m._valueTracker=null,delete m[y]}}}}function et(m){m._valueTracker||(m._valueTracker=Le(m))}function Fe(m){if(!m)return!1;var y=m._valueTracker;if(!y)return!0;var w=y.getValue(),N="";return m&&(N=we(m)?m.checked?"true":"false":m.value),m=N,m!==w?(y.setValue(m),!0):!1}function Tt(m){if(m=m||(typeof document<"u"?document:void 0),typeof m>"u")return null;try{return m.activeElement||m.body}catch{return m.body}}function me(m,y){var w=y.checked;return se({},y,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:w??m._wrapperState.initialChecked})}function En(m,y){var w=y.defaultValue==null?"":y.defaultValue,N=y.checked!=null?y.checked:y.defaultChecked;w=Se(y.value!=null?y.value:w),m._wrapperState={initialChecked:N,initialValue:w,controlled:y.type==="checkbox"||y.type==="radio"?y.checked!=null:y.value!=null}}function Wt(m,y){y=y.checked,y!=null&&S(m,"checked",y,!1)}function Jt(m,y){Wt(m,y);var w=Se(y.value),N=y.type;if(w!=null)N==="number"?(w===0&&m.value===""||m.value!=w)&&(m.value=""+w):m.value!==""+w&&(m.value=""+w);else if(N==="submit"||N==="reset"){m.removeAttribute("value");return}y.hasOwnProperty("value")?Yn(m,y.type,w):y.hasOwnProperty("defaultValue")&&Yn(m,y.type,Se(y.defaultValue)),y.checked==null&&y.defaultChecked!=null&&(m.defaultChecked=!!y.defaultChecked)}function zt(m,y,w){if(y.hasOwnProperty("value")||y.hasOwnProperty("defaultValue")){var N=y.type;if(!(N!=="submit"&&N!=="reset"||y.value!==void 0&&y.value!==null))return;y=""+m._wrapperState.initialValue,w||y===m.value||(m.value=y),m.defaultValue=y}w=m.name,w!==""&&(m.name=""),m.defaultChecked=!!m._wrapperState.initialChecked,w!==""&&(m.name=w)}function Yn(m,y,w){(y!=="number"||Tt(m.ownerDocument)!==m)&&(w==null?m.defaultValue=""+m._wrapperState.initialValue:m.defaultValue!==""+w&&(m.defaultValue=""+w))}var Ft=Array.isArray;function he(m,y,w,N){if(m=m.options,y){y={};for(var k=0;k<w.length;k++)y["$"+w[k]]=!0;for(w=0;w<m.length;w++)k=y.hasOwnProperty("$"+m[w].value),m[w].selected!==k&&(m[w].selected=k),k&&N&&(m[w].defaultSelected=!0)}else{for(w=""+Se(w),y=null,k=0;k<m.length;k++){if(m[k].value===w){m[k].selected=!0,N&&(m[k].defaultSelected=!0);return}y!==null||m[k].disabled||(y=m[k])}y!==null&&(y.selected=!0)}}function Q(m,y){if(y.dangerouslySetInnerHTML!=null)throw Error(n(91));return se({},y,{value:void 0,defaultValue:void 0,children:""+m._wrapperState.initialValue})}function Re(m,y){var w=y.value;if(w==null){if(w=y.children,y=y.defaultValue,w!=null){if(y!=null)throw Error(n(92));if(Ft(w)){if(1<w.length)throw Error(n(93));w=w[0]}y=w}y==null&&(y=""),w=y}m._wrapperState={initialValue:Se(w)}}function Ze(m,y){var w=Se(y.value),N=Se(y.defaultValue);w!=null&&(w=""+w,w!==m.value&&(m.value=w),y.defaultValue==null&&m.defaultValue!==w&&(m.defaultValue=w)),N!=null&&(m.defaultValue=""+N)}function Je(m){var y=m.textContent;y===m._wrapperState.initialValue&&y!==""&&y!==null&&(m.value=y)}function Ke(m){switch(m){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Kt(m,y){return m==null||m==="http://www.w3.org/1999/xhtml"?Ke(y):m==="http://www.w3.org/2000/svg"&&y==="foreignObject"?"http://www.w3.org/1999/xhtml":m}var Et,Dt=function(m){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(y,w,N,k){MSApp.execUnsafeLocalFunction(function(){return m(y,w,N,k)})}:m}(function(m,y){if(m.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in m)m.innerHTML=y;else{for(Et=Et||document.createElement("div"),Et.innerHTML="<svg>"+y.valueOf().toString()+"</svg>",y=Et.firstChild;m.firstChild;)m.removeChild(m.firstChild);for(;y.firstChild;)m.appendChild(y.firstChild)}});function Vn(m,y){if(y){var w=m.firstChild;if(w&&w===m.lastChild&&w.nodeType===3){w.nodeValue=y;return}}m.textContent=y}var at={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},$t=["Webkit","ms","Moz","O"];Object.keys(at).forEach(function(m){$t.forEach(function(y){y=y+m.charAt(0).toUpperCase()+m.substring(1),at[y]=at[m]})});function fn(m,y,w){return y==null||typeof y=="boolean"||y===""?"":w||typeof y!="number"||y===0||at.hasOwnProperty(m)&&at[m]?(""+y).trim():y+"px"}function vn(m,y){m=m.style;for(var w in y)if(y.hasOwnProperty(w)){var N=w.indexOf("--")===0,k=fn(w,y[w],N);w==="float"&&(w="cssFloat"),N?m.setProperty(w,k):m[w]=k}}var Bt=se({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Hn(m,y){if(y){if(Bt[m]&&(y.children!=null||y.dangerouslySetInnerHTML!=null))throw Error(n(137,m));if(y.dangerouslySetInnerHTML!=null){if(y.children!=null)throw Error(n(60));if(typeof y.dangerouslySetInnerHTML!="object"||!("__html"in y.dangerouslySetInnerHTML))throw Error(n(61))}if(y.style!=null&&typeof y.style!="object")throw Error(n(62))}}function Nn(m,y){if(m.indexOf("-")===-1)return typeof y.is=="string";switch(m){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var hr=null;function Me(m){return m=m.target||m.srcElement||window,m.correspondingUseElement&&(m=m.correspondingUseElement),m.nodeType===3?m.parentNode:m}var Mt=null,Ue=null,Ye=null;function Pt(m){if(m=O0(m)){if(typeof Mt!="function")throw Error(n(280));var y=m.stateNode;y&&(y=nw(y),Mt(m.stateNode,m.type,y))}}function wt(m){Ue?Ye?Ye.push(m):Ye=[m]:Ue=m}function Pn(){if(Ue){var m=Ue,y=Ye;if(Ye=Ue=null,Pt(m),y)for(m=0;m<y.length;m++)Pt(y[m])}}function Rr(m,y){return m(y)}function vi(){}var Rn=!1;function ss(m,y,w){if(Rn)return m(y,w);Rn=!0;try{return Rr(m,y,w)}finally{Rn=!1,(Ue!==null||Ye!==null)&&(vi(),Pn())}}function as(m,y){var w=m.stateNode;if(w===null)return null;var N=nw(w);if(N===null)return null;w=N[y];e:switch(y){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(N=!N.disabled)||(m=m.type,N=!(m==="button"||m==="input"||m==="select"||m==="textarea")),m=!N;break e;default:m=!1}if(m)return null;if(w&&typeof w!="function")throw Error(n(231,y,typeof w));return w}var _l=!1;if(l)try{var oo={};Object.defineProperty(oo,"passive",{get:function(){_l=!0}}),window.addEventListener("test",oo,oo),window.removeEventListener("test",oo,oo)}catch{_l=!1}function lo(m,y,w,N,k,L,K,ge,_e){var Be=Array.prototype.slice.call(arguments,3);try{y.apply(w,Be)}catch(it){this.onError(it)}}var co=!1,Bo=null,jo=!1,Uo=null,su={onError:function(m){co=!0,Bo=m}};function fc(m,y,w,N,k,L,K,ge,_e){co=!1,Bo=null,lo.apply(su,arguments)}function Rh(m,y,w,N,k,L,K,ge,_e){if(fc.apply(this,arguments),co){if(co){var Be=Bo;co=!1,Bo=null}else throw Error(n(198));jo||(jo=!0,Uo=Be)}}function Ia(m){var y=m,w=m;if(m.alternate)for(;y.return;)y=y.return;else{m=y;do y=m,(y.flags&4098)!==0&&(w=y.return),m=y.return;while(m)}return y.tag===3?w:null}function au(m){if(m.tag===13){var y=m.memoizedState;if(y===null&&(m=m.alternate,m!==null&&(y=m.memoizedState)),y!==null)return y.dehydrated}return null}function ou(m){if(Ia(m)!==m)throw Error(n(188))}function lu(m){var y=m.alternate;if(!y){if(y=Ia(m),y===null)throw Error(n(188));return y!==m?null:m}for(var w=m,N=y;;){var k=w.return;if(k===null)break;var L=k.alternate;if(L===null){if(N=k.return,N!==null){w=N;continue}break}if(k.child===L.child){for(L=k.child;L;){if(L===w)return ou(k),m;if(L===N)return ou(k),y;L=L.sibling}throw Error(n(188))}if(w.return!==N.return)w=k,N=L;else{for(var K=!1,ge=k.child;ge;){if(ge===w){K=!0,w=k,N=L;break}if(ge===N){K=!0,N=k,w=L;break}ge=ge.sibling}if(!K){for(ge=L.child;ge;){if(ge===w){K=!0,w=L,N=k;break}if(ge===N){K=!0,N=L,w=k;break}ge=ge.sibling}if(!K)throw Error(n(189))}}if(w.alternate!==N)throw Error(n(190))}if(w.tag!==3)throw Error(n(188));return w.stateNode.current===w?m:y}function zo(m){return m=lu(m),m!==null?cu(m):null}function cu(m){if(m.tag===5||m.tag===6)return m;for(m=m.child;m!==null;){var y=cu(m);if(y!==null)return y;m=m.sibling}return null}var Oh=e.unstable_scheduleCallback,re=e.unstable_cancelCallback,Ee=e.unstable_shouldYield,Ie=e.unstable_requestPaint,Ne=e.unstable_now,Ae=e.unstable_getCurrentPriorityLevel,st=e.unstable_ImmediatePriority,At=e.unstable_UserBlockingPriority,kt=e.unstable_NormalPriority,jt=e.unstable_LowPriority,xn=e.unstable_IdlePriority,hn=null,Gt=null;function Un(m){if(Gt&&typeof Gt.onCommitFiberRoot=="function")try{Gt.onCommitFiberRoot(hn,m,void 0,(m.current.flags&128)===128)}catch{}}var Dn=Math.clz32?Math.clz32:rr,Ur=Math.log,Lr=Math.LN2;function rr(m){return m>>>=0,m===0?32:31-(Ur(m)/Lr|0)|0}var an=64,qr=4194304;function Zn(m){switch(m&-m){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return m&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return m&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return m}}function Ii(m,y){var w=m.pendingLanes;if(w===0)return 0;var N=0,k=m.suspendedLanes,L=m.pingedLanes,K=w&268435455;if(K!==0){var ge=K&~k;ge!==0?N=Zn(ge):(L&=K,L!==0&&(N=Zn(L)))}else K=w&~k,K!==0?N=Zn(K):L!==0&&(N=Zn(L));if(N===0)return 0;if(y!==0&&y!==N&&(y&k)===0&&(k=N&-N,L=y&-y,k>=L||k===16&&(L&4194240)!==0))return y;if((N&4)!==0&&(N|=w&16),y=m.entangledLanes,y!==0)for(m=m.entanglements,y&=N;0<y;)w=31-Dn(y),k=1<<w,N|=m[w],y&=~k;return N}function Mr(m,y){switch(m){case 1:case 2:case 4:return y+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return y+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Di(m,y){for(var w=m.suspendedLanes,N=m.pingedLanes,k=m.expirationTimes,L=m.pendingLanes;0<L;){var K=31-Dn(L),ge=1<<K,_e=k[K];_e===-1?((ge&w)===0||(ge&N)!==0)&&(k[K]=Mr(ge,y)):_e<=y&&(m.expiredLanes|=ge),L&=~ge}}function uo(m){return m=m.pendingLanes&-1073741825,m!==0?m:m&1073741824?1073741824:0}function wr(){var m=an;return an<<=1,(an&4194240)===0&&(an=64),m}function Li(m){for(var y=[],w=0;31>w;w++)y.push(m);return y}function ci(m,y,w){m.pendingLanes|=y,y!==536870912&&(m.suspendedLanes=0,m.pingedLanes=0),m=m.eventTimes,y=31-Dn(y),m[y]=w}function ui(m,y){var w=m.pendingLanes&~y;m.pendingLanes=y,m.suspendedLanes=0,m.pingedLanes=0,m.expiredLanes&=y,m.mutableReadLanes&=y,m.entangledLanes&=y,y=m.entanglements;var N=m.eventTimes;for(m=m.expirationTimes;0<w;){var k=31-Dn(w),L=1<<k;y[k]=0,N[k]=-1,m[k]=-1,w&=~L}}function Xr(m,y){var w=m.entangledLanes|=y;for(m=m.entanglements;w;){var N=31-Dn(w),k=1<<N;k&y|m[N]&y&&(m[N]|=y),w&=~k}}var ir=0;function ma(m){return m&=-m,1<m?4<m?(m&268435455)!==0?16:536870912:4:1}var gn,pc,H,V,ie,J=!1,ae=[],De=null,Ge=null,Nt=null,yt=new Map,Ct=new Map,Lt=[],tt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ht(m,y){switch(m){case"focusin":case"focusout":De=null;break;case"dragenter":case"dragleave":Ge=null;break;case"mouseover":case"mouseout":Nt=null;break;case"pointerover":case"pointerout":yt.delete(y.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ct.delete(y.pointerId)}}function It(m,y,w,N,k,L){return m===null||m.nativeEvent!==L?(m={blockedOn:y,domEventName:w,eventSystemFlags:N,nativeEvent:L,targetContainers:[k]},y!==null&&(y=O0(y),y!==null&&pc(y)),m):(m.eventSystemFlags|=N,y=m.targetContainers,k!==null&&y.indexOf(k)===-1&&y.push(k),m)}function un(m,y,w,N,k){switch(y){case"focusin":return De=It(De,m,y,w,N,k),!0;case"dragenter":return Ge=It(Ge,m,y,w,N,k),!0;case"mouseover":return Nt=It(Nt,m,y,w,N,k),!0;case"pointerover":var L=k.pointerId;return yt.set(L,It(yt.get(L)||null,m,y,w,N,k)),!0;case"gotpointercapture":return L=k.pointerId,Ct.set(L,It(Ct.get(L)||null,m,y,w,N,k)),!0}return!1}function sn(m){var y=ff(m.target);if(y!==null){var w=Ia(y);if(w!==null){if(y=w.tag,y===13){if(y=au(w),y!==null){m.blockedOn=y,ie(m.priority,function(){H(w)});return}}else if(y===3&&w.stateNode.current.memoizedState.isDehydrated){m.blockedOn=w.tag===3?w.stateNode.containerInfo:null;return}}}m.blockedOn=null}function Ar(m){if(m.blockedOn!==null)return!1;for(var y=m.targetContainers;0<y.length;){var w=af(m.domEventName,m.eventSystemFlags,y[0],m.nativeEvent);if(w===null){w=m.nativeEvent;var N=new w.constructor(w.type,w);hr=N,w.target.dispatchEvent(N),hr=null}else return y=O0(w),y!==null&&pc(y),m.blockedOn=w,!1;y.shift()}return!0}function gr(m,y,w){Ar(m)&&w.delete(y)}function or(){J=!1,De!==null&&Ar(De)&&(De=null),Ge!==null&&Ar(Ge)&&(Ge=null),Nt!==null&&Ar(Nt)&&(Nt=null),yt.forEach(gr),Ct.forEach(gr)}function Qn(m,y){m.blockedOn===y&&(m.blockedOn=null,J||(J=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,or)))}function Ls(m){function y(k){return Qn(k,m)}if(0<ae.length){Qn(ae[0],m);for(var w=1;w<ae.length;w++){var N=ae[w];N.blockedOn===m&&(N.blockedOn=null)}}for(De!==null&&Qn(De,m),Ge!==null&&Qn(Ge,m),Nt!==null&&Qn(Nt,m),yt.forEach(y),Ct.forEach(y),w=0;w<Lt.length;w++)N=Lt[w],N.blockedOn===m&&(N.blockedOn=null);for(;0<Lt.length&&(w=Lt[0],w.blockedOn===null);)sn(w),w.blockedOn===null&&Lt.shift()}var xi=T.ReactCurrentBatchConfig,Da=!0;function w0(m,y,w,N){var k=ir,L=xi.transition;xi.transition=null;try{ir=1,S0(m,y,w,N)}finally{ir=k,xi.transition=L}}function Wp(m,y,w,N){var k=ir,L=xi.transition;xi.transition=null;try{ir=4,S0(m,y,w,N)}finally{ir=k,xi.transition=L}}function S0(m,y,w,N){if(Da){var k=af(m,y,w,N);if(k===null)sC(m,y,N,qp,w),Ht(m,N);else if(un(k,m,y,w,N))N.stopPropagation();else if(Ht(m,N),y&4&&-1<tt.indexOf(m)){for(;k!==null;){var L=O0(k);if(L!==null&&gn(L),L=af(m,y,w,N),L===null&&sC(m,y,N,qp,w),L===k)break;k=L}k!==null&&N.stopPropagation()}else sC(m,y,N,null,w)}}var qp=null;function af(m,y,w,N){if(qp=null,m=Me(N),m=ff(m),m!==null)if(y=Ia(m),y===null)m=null;else if(w=y.tag,w===13){if(m=au(y),m!==null)return m;m=null}else if(w===3){if(y.stateNode.current.memoizedState.isDehydrated)return y.tag===3?y.stateNode.containerInfo:null;m=null}else y!==m&&(m=null);return qp=m,null}function I(m){switch(m){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ae()){case st:return 1;case At:return 4;case kt:case jt:return 16;case xn:return 536870912;default:return 16}default:return 16}}var G=null,Y=null,te=null;function ye(){if(te)return te;var m,y=Y,w=y.length,N,k="value"in G?G.value:G.textContent,L=k.length;for(m=0;m<w&&y[m]===k[m];m++);var K=w-m;for(N=1;N<=K&&y[w-N]===k[L-N];N++);return te=k.slice(m,1<N?1-N:void 0)}function de(m){var y=m.keyCode;return"charCode"in m?(m=m.charCode,m===0&&y===13&&(m=13)):m=y,m===10&&(m=13),32<=m||m===13?m:0}function ve(){return!0}function ze(){return!1}function je(m){function y(w,N,k,L,K){this._reactName=w,this._targetInst=k,this.type=N,this.nativeEvent=L,this.target=K,this.currentTarget=null;for(var ge in m)m.hasOwnProperty(ge)&&(w=m[ge],this[ge]=w?w(L):L[ge]);return this.isDefaultPrevented=(L.defaultPrevented!=null?L.defaultPrevented:L.returnValue===!1)?ve:ze,this.isPropagationStopped=ze,this}return se(y.prototype,{preventDefault:function(){this.defaultPrevented=!0;var w=this.nativeEvent;w&&(w.preventDefault?w.preventDefault():typeof w.returnValue!="unknown"&&(w.returnValue=!1),this.isDefaultPrevented=ve)},stopPropagation:function(){var w=this.nativeEvent;w&&(w.stopPropagation?w.stopPropagation():typeof w.cancelBubble!="unknown"&&(w.cancelBubble=!0),this.isPropagationStopped=ve)},persist:function(){},isPersistent:ve}),y}var We={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(m){return m.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ft=je(We),ot=se({},We,{view:0,detail:0}),pt=je(ot),Qe,ht,St,Rt=se({},ot,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:nn,button:0,buttons:0,relatedTarget:function(m){return m.relatedTarget===void 0?m.fromElement===m.srcElement?m.toElement:m.fromElement:m.relatedTarget},movementX:function(m){return"movementX"in m?m.movementX:(m!==St&&(St&&m.type==="mousemove"?(Qe=m.screenX-St.screenX,ht=m.screenY-St.screenY):ht=Qe=0,St=m),Qe)},movementY:function(m){return"movementY"in m?m.movementY:ht}}),en=je(Rt),Ln=se({},Rt,{dataTransfer:0}),tn=je(Ln),vt=se({},ot,{relatedTarget:0}),Sn=je(vt),Vt=se({},We,{animationName:0,elapsedTime:0,pseudoElement:0}),Tn=je(Vt),Jn=se({},We,{clipboardData:function(m){return"clipboardData"in m?m.clipboardData:window.clipboardData}}),yn=je(Jn),bn=se({},We,{data:0}),dr=je(bn),Mn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},fr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},lr={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Or(m){var y=this.nativeEvent;return y.getModifierState?y.getModifierState(m):(m=lr[m])?!!y[m]:!1}function nn(){return Or}var sr=se({},ot,{key:function(m){if(m.key){var y=Mn[m.key]||m.key;if(y!=="Unidentified")return y}return m.type==="keypress"?(m=de(m),m===13?"Enter":String.fromCharCode(m)):m.type==="keydown"||m.type==="keyup"?fr[m.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:nn,charCode:function(m){return m.type==="keypress"?de(m):0},keyCode:function(m){return m.type==="keydown"||m.type==="keyup"?m.keyCode:0},which:function(m){return m.type==="keypress"?de(m):m.type==="keydown"||m.type==="keyup"?m.keyCode:0}}),hi=je(sr),Fs=se({},Rt,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),pn=je(Fs),Kr=se({},ot,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:nn}),Mi=je(Kr),Bs=se({},We,{propertyName:0,elapsedTime:0,pseudoElement:0}),Wi=je(Bs),mc=se({},Rt,{deltaX:function(m){return"deltaX"in m?m.deltaX:"wheelDeltaX"in m?-m.wheelDeltaX:0},deltaY:function(m){return"deltaY"in m?m.deltaY:"wheelDeltaY"in m?-m.wheelDeltaY:"wheelDelta"in m?-m.wheelDelta:0},deltaZ:0,deltaMode:0}),wl=je(mc),W_=[9,13,27,32],of=l&&"CompositionEvent"in window,lf=null;l&&"documentMode"in document&&(lf=document.documentMode);var Xp=l&&"TextEvent"in window&&!lf,q_=l&&(!of||lf&&8<lf&&11>=lf),T0=" ",cf=!1;function uf(m,y){switch(m){case"keyup":return W_.indexOf(y.keyCode)!==-1;case"keydown":return y.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function E0(m){return m=m.detail,typeof m=="object"&&"data"in m?m.data:null}var uu=!1;function KA(m,y){switch(m){case"compositionend":return E0(y);case"keypress":return y.which!==32?null:(cf=!0,T0);case"textInput":return m=y.data,m===T0&&cf?null:m;default:return null}}function YA(m,y){if(uu)return m==="compositionend"||!of&&uf(m,y)?(m=ye(),te=Y=G=null,uu=!1,m):null;switch(m){case"paste":return null;case"keypress":if(!(y.ctrlKey||y.altKey||y.metaKey)||y.ctrlKey&&y.altKey){if(y.char&&1<y.char.length)return y.char;if(y.which)return String.fromCharCode(y.which)}return null;case"compositionend":return q_&&y.locale!=="ko"?null:y.data;default:return null}}var La={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kp(m){var y=m&&m.nodeName&&m.nodeName.toLowerCase();return y==="input"?!!La[m.type]:y==="textarea"}function X_(m,y,w,N){wt(N),y=J_(y,"onChange"),0<y.length&&(w=new ft("onChange","change",null,w,N),m.push({event:w,listeners:y}))}var gc=null,Yr=null;function K_(m){o4(m,0)}function Yp(m){var y=nm(m);if(Fe(y))return m}function ZA(m,y){if(m==="change")return y}var hf=!1;if(l){var df;if(l){var Zp="oninput"in document;if(!Zp){var Hz=document.createElement("div");Hz.setAttribute("oninput","return;"),Zp=typeof Hz.oninput=="function"}df=Zp}else df=!1;hf=df&&(!document.documentMode||9<document.documentMode)}function Wz(){gc&&(gc.detachEvent("onpropertychange",qz),Yr=gc=null)}function qz(m){if(m.propertyName==="value"&&Yp(Yr)){var y=[];X_(y,Yr,m,Me(m)),ss(K_,y)}}function yle(m,y,w){m==="focusin"?(Wz(),gc=y,Yr=w,gc.attachEvent("onpropertychange",qz)):m==="focusout"&&Wz()}function vle(m){if(m==="selectionchange"||m==="keyup"||m==="keydown")return Yp(Yr)}function xle(m,y){if(m==="click")return Yp(y)}function ble(m,y){if(m==="input"||m==="change")return Yp(y)}function _le(m,y){return m===y&&(m!==0||1/m===1/y)||m!==m&&y!==y}var Sl=typeof Object.is=="function"?Object.is:_le;function M0(m,y){if(Sl(m,y))return!0;if(typeof m!="object"||m===null||typeof y!="object"||y===null)return!1;var w=Object.keys(m),N=Object.keys(y);if(w.length!==N.length)return!1;for(N=0;N<w.length;N++){var k=w[N];if(!c.call(y,k)||!Sl(m[k],y[k]))return!1}return!0}function Xz(m){for(;m&&m.firstChild;)m=m.firstChild;return m}function Kz(m,y){var w=Xz(m);m=0;for(var N;w;){if(w.nodeType===3){if(N=m+w.textContent.length,m<=y&&N>=y)return{node:w,offset:y-m};m=N}e:{for(;w;){if(w.nextSibling){w=w.nextSibling;break e}w=w.parentNode}w=void 0}w=Xz(w)}}function Yz(m,y){return m&&y?m===y?!0:m&&m.nodeType===3?!1:y&&y.nodeType===3?Yz(m,y.parentNode):"contains"in m?m.contains(y):m.compareDocumentPosition?!!(m.compareDocumentPosition(y)&16):!1:!1}function Zz(){for(var m=window,y=Tt();y instanceof m.HTMLIFrameElement;){try{var w=typeof y.contentWindow.location.href=="string"}catch{w=!1}if(w)m=y.contentWindow;else break;y=Tt(m.document)}return y}function QA(m){var y=m&&m.nodeName&&m.nodeName.toLowerCase();return y&&(y==="input"&&(m.type==="text"||m.type==="search"||m.type==="tel"||m.type==="url"||m.type==="password")||y==="textarea"||m.contentEditable==="true")}function wle(m){var y=Zz(),w=m.focusedElem,N=m.selectionRange;if(y!==w&&w&&w.ownerDocument&&Yz(w.ownerDocument.documentElement,w)){if(N!==null&&QA(w)){if(y=N.start,m=N.end,m===void 0&&(m=y),"selectionStart"in w)w.selectionStart=y,w.selectionEnd=Math.min(m,w.value.length);else if(m=(y=w.ownerDocument||document)&&y.defaultView||window,m.getSelection){m=m.getSelection();var k=w.textContent.length,L=Math.min(N.start,k);N=N.end===void 0?L:Math.min(N.end,k),!m.extend&&L>N&&(k=N,N=L,L=k),k=Kz(w,L);var K=Kz(w,N);k&&K&&(m.rangeCount!==1||m.anchorNode!==k.node||m.anchorOffset!==k.offset||m.focusNode!==K.node||m.focusOffset!==K.offset)&&(y=y.createRange(),y.setStart(k.node,k.offset),m.removeAllRanges(),L>N?(m.addRange(y),m.extend(K.node,K.offset)):(y.setEnd(K.node,K.offset),m.addRange(y)))}}for(y=[],m=w;m=m.parentNode;)m.nodeType===1&&y.push({element:m,left:m.scrollLeft,top:m.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<y.length;w++)m=y[w],m.element.scrollLeft=m.left,m.element.scrollTop=m.top}}var Sle=l&&"documentMode"in document&&11>=document.documentMode,Qp=null,JA=null,A0=null,eC=!1;function Qz(m,y,w){var N=w.window===w?w.document:w.nodeType===9?w:w.ownerDocument;eC||Qp==null||Qp!==Tt(N)||(N=Qp,"selectionStart"in N&&QA(N)?N={start:N.selectionStart,end:N.selectionEnd}:(N=(N.ownerDocument&&N.ownerDocument.defaultView||window).getSelection(),N={anchorNode:N.anchorNode,anchorOffset:N.anchorOffset,focusNode:N.focusNode,focusOffset:N.focusOffset}),A0&&M0(A0,N)||(A0=N,N=J_(JA,"onSelect"),0<N.length&&(y=new ft("onSelect","select",null,y,w),m.push({event:y,listeners:N}),y.target=Qp)))}function Y_(m,y){var w={};return w[m.toLowerCase()]=y.toLowerCase(),w["Webkit"+m]="webkit"+y,w["Moz"+m]="moz"+y,w}var Jp={animationend:Y_("Animation","AnimationEnd"),animationiteration:Y_("Animation","AnimationIteration"),animationstart:Y_("Animation","AnimationStart"),transitionend:Y_("Transition","TransitionEnd")},tC={},Jz={};l&&(Jz=document.createElement("div").style,"AnimationEvent"in window||(delete Jp.animationend.animation,delete Jp.animationiteration.animation,delete Jp.animationstart.animation),"TransitionEvent"in window||delete Jp.transitionend.transition);function Z_(m){if(tC[m])return tC[m];if(!Jp[m])return m;var y=Jp[m],w;for(w in y)if(y.hasOwnProperty(w)&&w in Jz)return tC[m]=y[w];return m}var e4=Z_("animationend"),t4=Z_("animationiteration"),n4=Z_("animationstart"),r4=Z_("transitionend"),i4=new Map,s4="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function kh(m,y){i4.set(m,y),a(y,[m])}for(var nC=0;nC<s4.length;nC++){var rC=s4[nC],Tle=rC.toLowerCase(),Ele=rC[0].toUpperCase()+rC.slice(1);kh(Tle,"on"+Ele)}kh(e4,"onAnimationEnd"),kh(t4,"onAnimationIteration"),kh(n4,"onAnimationStart"),kh("dblclick","onDoubleClick"),kh("focusin","onFocus"),kh("focusout","onBlur"),kh(r4,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var C0="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mle=new Set("cancel close invalid load scroll toggle".split(" ").concat(C0));function a4(m,y,w){var N=m.type||"unknown-event";m.currentTarget=w,Rh(N,y,void 0,m),m.currentTarget=null}function o4(m,y){y=(y&4)!==0;for(var w=0;w<m.length;w++){var N=m[w],k=N.event;N=N.listeners;e:{var L=void 0;if(y)for(var K=N.length-1;0<=K;K--){var ge=N[K],_e=ge.instance,Be=ge.currentTarget;if(ge=ge.listener,_e!==L&&k.isPropagationStopped())break e;a4(k,ge,Be),L=_e}else for(K=0;K<N.length;K++){if(ge=N[K],_e=ge.instance,Be=ge.currentTarget,ge=ge.listener,_e!==L&&k.isPropagationStopped())break e;a4(k,ge,Be),L=_e}}}if(jo)throw m=Uo,jo=!1,Uo=null,m}function ti(m,y){var w=y[hC];w===void 0&&(w=y[hC]=new Set);var N=m+"__bubble";w.has(N)||(l4(y,m,2,!1),w.add(N))}function iC(m,y,w){var N=0;y&&(N|=4),l4(w,m,N,y)}var Q_="_reactListening"+Math.random().toString(36).slice(2);function N0(m){if(!m[Q_]){m[Q_]=!0,i.forEach(function(w){w!=="selectionchange"&&(Mle.has(w)||iC(w,!1,m),iC(w,!0,m))});var y=m.nodeType===9?m:m.ownerDocument;y===null||y[Q_]||(y[Q_]=!0,iC("selectionchange",!1,y))}}function l4(m,y,w,N){switch(I(y)){case 1:var k=w0;break;case 4:k=Wp;break;default:k=S0}w=k.bind(null,y,w,m),k=void 0,!_l||y!=="touchstart"&&y!=="touchmove"&&y!=="wheel"||(k=!0),N?k!==void 0?m.addEventListener(y,w,{capture:!0,passive:k}):m.addEventListener(y,w,!0):k!==void 0?m.addEventListener(y,w,{passive:k}):m.addEventListener(y,w,!1)}function sC(m,y,w,N,k){var L=N;if((y&1)===0&&(y&2)===0&&N!==null)e:for(;;){if(N===null)return;var K=N.tag;if(K===3||K===4){var ge=N.stateNode.containerInfo;if(ge===k||ge.nodeType===8&&ge.parentNode===k)break;if(K===4)for(K=N.return;K!==null;){var _e=K.tag;if((_e===3||_e===4)&&(_e=K.stateNode.containerInfo,_e===k||_e.nodeType===8&&_e.parentNode===k))return;K=K.return}for(;ge!==null;){if(K=ff(ge),K===null)return;if(_e=K.tag,_e===5||_e===6){N=L=K;continue e}ge=ge.parentNode}}N=N.return}ss(function(){var Be=L,it=Me(w),lt=[];e:{var nt=i4.get(m);if(nt!==void 0){var Ut=ft,Yt=m;switch(m){case"keypress":if(de(w)===0)break e;case"keydown":case"keyup":Ut=hi;break;case"focusin":Yt="focus",Ut=Sn;break;case"focusout":Yt="blur",Ut=Sn;break;case"beforeblur":case"afterblur":Ut=Sn;break;case"click":if(w.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ut=en;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ut=tn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ut=Mi;break;case e4:case t4:case n4:Ut=Tn;break;case r4:Ut=Wi;break;case"scroll":Ut=pt;break;case"wheel":Ut=wl;break;case"copy":case"cut":case"paste":Ut=yn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ut=pn}var rn=(y&4)!==0,Fi=!rn&&m==="scroll",Pe=rn?nt!==null?nt+"Capture":null:nt;rn=[];for(var Te=Be,ke;Te!==null;){ke=Te;var mt=ke.stateNode;if(ke.tag===5&&mt!==null&&(ke=mt,Pe!==null&&(mt=as(Te,Pe),mt!=null&&rn.push(P0(Te,mt,ke)))),Fi)break;Te=Te.return}0<rn.length&&(nt=new Ut(nt,Yt,null,w,it),lt.push({event:nt,listeners:rn}))}}if((y&7)===0){e:{if(nt=m==="mouseover"||m==="pointerover",Ut=m==="mouseout"||m==="pointerout",nt&&w!==hr&&(Yt=w.relatedTarget||w.fromElement)&&(ff(Yt)||Yt[hu]))break e;if((Ut||nt)&&(nt=it.window===it?it:(nt=it.ownerDocument)?nt.defaultView||nt.parentWindow:window,Ut?(Yt=w.relatedTarget||w.toElement,Ut=Be,Yt=Yt?ff(Yt):null,Yt!==null&&(Fi=Ia(Yt),Yt!==Fi||Yt.tag!==5&&Yt.tag!==6)&&(Yt=null)):(Ut=null,Yt=Be),Ut!==Yt)){if(rn=en,mt="onMouseLeave",Pe="onMouseEnter",Te="mouse",(m==="pointerout"||m==="pointerover")&&(rn=pn,mt="onPointerLeave",Pe="onPointerEnter",Te="pointer"),Fi=Ut==null?nt:nm(Ut),ke=Yt==null?nt:nm(Yt),nt=new rn(mt,Te+"leave",Ut,w,it),nt.target=Fi,nt.relatedTarget=ke,mt=null,ff(it)===Be&&(rn=new rn(Pe,Te+"enter",Yt,w,it),rn.target=ke,rn.relatedTarget=Fi,mt=rn),Fi=mt,Ut&&Yt)t:{for(rn=Ut,Pe=Yt,Te=0,ke=rn;ke;ke=em(ke))Te++;for(ke=0,mt=Pe;mt;mt=em(mt))ke++;for(;0<Te-ke;)rn=em(rn),Te--;for(;0<ke-Te;)Pe=em(Pe),ke--;for(;Te--;){if(rn===Pe||Pe!==null&&rn===Pe.alternate)break t;rn=em(rn),Pe=em(Pe)}rn=null}else rn=null;Ut!==null&&c4(lt,nt,Ut,rn,!1),Yt!==null&&Fi!==null&&c4(lt,Fi,Yt,rn,!0)}}e:{if(nt=Be?nm(Be):window,Ut=nt.nodeName&&nt.nodeName.toLowerCase(),Ut==="select"||Ut==="input"&&nt.type==="file")var on=ZA;else if(Kp(nt))if(hf)on=ble;else{on=vle;var _n=yle}else(Ut=nt.nodeName)&&Ut.toLowerCase()==="input"&&(nt.type==="checkbox"||nt.type==="radio")&&(on=xle);if(on&&(on=on(m,Be))){X_(lt,on,w,it);break e}_n&&_n(m,nt,Be),m==="focusout"&&(_n=nt._wrapperState)&&_n.controlled&&nt.type==="number"&&Yn(nt,"number",nt.value)}switch(_n=Be?nm(Be):window,m){case"focusin":(Kp(_n)||_n.contentEditable==="true")&&(Qp=_n,JA=Be,A0=null);break;case"focusout":A0=JA=Qp=null;break;case"mousedown":eC=!0;break;case"contextmenu":case"mouseup":case"dragend":eC=!1,Qz(lt,w,it);break;case"selectionchange":if(Sle)break;case"keydown":case"keyup":Qz(lt,w,it)}var wn;if(of)e:{switch(m){case"compositionstart":var On="onCompositionStart";break e;case"compositionend":On="onCompositionEnd";break e;case"compositionupdate":On="onCompositionUpdate";break e}On=void 0}else uu?uf(m,w)&&(On="onCompositionEnd"):m==="keydown"&&w.keyCode===229&&(On="onCompositionStart");On&&(q_&&w.locale!=="ko"&&(uu||On!=="onCompositionStart"?On==="onCompositionEnd"&&uu&&(wn=ye()):(G=it,Y="value"in G?G.value:G.textContent,uu=!0)),_n=J_(Be,On),0<_n.length&&(On=new dr(On,m,null,w,it),lt.push({event:On,listeners:_n}),wn?On.data=wn:(wn=E0(w),wn!==null&&(On.data=wn)))),(wn=Xp?KA(m,w):YA(m,w))&&(Be=J_(Be,"onBeforeInput"),0<Be.length&&(it=new dr("onBeforeInput","beforeinput",null,w,it),lt.push({event:it,listeners:Be}),it.data=wn))}o4(lt,y)})}function P0(m,y,w){return{instance:m,listener:y,currentTarget:w}}function J_(m,y){for(var w=y+"Capture",N=[];m!==null;){var k=m,L=k.stateNode;k.tag===5&&L!==null&&(k=L,L=as(m,w),L!=null&&N.unshift(P0(m,L,k)),L=as(m,y),L!=null&&N.push(P0(m,L,k))),m=m.return}return N}function em(m){if(m===null)return null;do m=m.return;while(m&&m.tag!==5);return m||null}function c4(m,y,w,N,k){for(var L=y._reactName,K=[];w!==null&&w!==N;){var ge=w,_e=ge.alternate,Be=ge.stateNode;if(_e!==null&&_e===N)break;ge.tag===5&&Be!==null&&(ge=Be,k?(_e=as(w,L),_e!=null&&K.unshift(P0(w,_e,ge))):k||(_e=as(w,L),_e!=null&&K.push(P0(w,_e,ge)))),w=w.return}K.length!==0&&m.push({event:y,listeners:K})}var Ale=/\r\n?/g,Cle=/\u0000|\uFFFD/g;function u4(m){return(typeof m=="string"?m:""+m).replace(Ale,`
`).replace(Cle,"")}function ew(m,y,w){if(y=u4(y),u4(m)!==y&&w)throw Error(n(425))}function tw(){}var aC=null,oC=null;function lC(m,y){return m==="textarea"||m==="noscript"||typeof y.children=="string"||typeof y.children=="number"||typeof y.dangerouslySetInnerHTML=="object"&&y.dangerouslySetInnerHTML!==null&&y.dangerouslySetInnerHTML.__html!=null}var cC=typeof setTimeout=="function"?setTimeout:void 0,Nle=typeof clearTimeout=="function"?clearTimeout:void 0,h4=typeof Promise=="function"?Promise:void 0,Ple=typeof queueMicrotask=="function"?queueMicrotask:typeof h4<"u"?function(m){return h4.resolve(null).then(m).catch(Rle)}:cC;function Rle(m){setTimeout(function(){throw m})}function uC(m,y){var w=y,N=0;do{var k=w.nextSibling;if(m.removeChild(w),k&&k.nodeType===8)if(w=k.data,w==="/$"){if(N===0){m.removeChild(k),Ls(y);return}N--}else w!=="$"&&w!=="$?"&&w!=="$!"||N++;w=k}while(w);Ls(y)}function Ih(m){for(;m!=null;m=m.nextSibling){var y=m.nodeType;if(y===1||y===3)break;if(y===8){if(y=m.data,y==="$"||y==="$!"||y==="$?")break;if(y==="/$")return null}}return m}function d4(m){m=m.previousSibling;for(var y=0;m;){if(m.nodeType===8){var w=m.data;if(w==="$"||w==="$!"||w==="$?"){if(y===0)return m;y--}else w==="/$"&&y++}m=m.previousSibling}return null}var tm=Math.random().toString(36).slice(2),yc="__reactFiber$"+tm,R0="__reactProps$"+tm,hu="__reactContainer$"+tm,hC="__reactEvents$"+tm,Ole="__reactListeners$"+tm,kle="__reactHandles$"+tm;function ff(m){var y=m[yc];if(y)return y;for(var w=m.parentNode;w;){if(y=w[hu]||w[yc]){if(w=y.alternate,y.child!==null||w!==null&&w.child!==null)for(m=d4(m);m!==null;){if(w=m[yc])return w;m=d4(m)}return y}m=w,w=m.parentNode}return null}function O0(m){return m=m[yc]||m[hu],!m||m.tag!==5&&m.tag!==6&&m.tag!==13&&m.tag!==3?null:m}function nm(m){if(m.tag===5||m.tag===6)return m.stateNode;throw Error(n(33))}function nw(m){return m[R0]||null}var dC=[],rm=-1;function Dh(m){return{current:m}}function ni(m){0>rm||(m.current=dC[rm],dC[rm]=null,rm--)}function Zr(m,y){rm++,dC[rm]=m.current,m.current=y}var Lh={},Xs=Dh(Lh),Fa=Dh(!1),pf=Lh;function im(m,y){var w=m.type.contextTypes;if(!w)return Lh;var N=m.stateNode;if(N&&N.__reactInternalMemoizedUnmaskedChildContext===y)return N.__reactInternalMemoizedMaskedChildContext;var k={},L;for(L in w)k[L]=y[L];return N&&(m=m.stateNode,m.__reactInternalMemoizedUnmaskedChildContext=y,m.__reactInternalMemoizedMaskedChildContext=k),k}function Ba(m){return m=m.childContextTypes,m!=null}function rw(){ni(Fa),ni(Xs)}function f4(m,y,w){if(Xs.current!==Lh)throw Error(n(168));Zr(Xs,y),Zr(Fa,w)}function p4(m,y,w){var N=m.stateNode;if(y=y.childContextTypes,typeof N.getChildContext!="function")return w;N=N.getChildContext();for(var k in N)if(!(k in y))throw Error(n(108,fe(m)||"Unknown",k));return se({},w,N)}function iw(m){return m=(m=m.stateNode)&&m.__reactInternalMemoizedMergedChildContext||Lh,pf=Xs.current,Zr(Xs,m),Zr(Fa,Fa.current),!0}function m4(m,y,w){var N=m.stateNode;if(!N)throw Error(n(169));w?(m=p4(m,y,pf),N.__reactInternalMemoizedMergedChildContext=m,ni(Fa),ni(Xs),Zr(Xs,m)):ni(Fa),Zr(Fa,w)}var du=null,sw=!1,fC=!1;function g4(m){du===null?du=[m]:du.push(m)}function Ile(m){sw=!0,g4(m)}function Fh(){if(!fC&&du!==null){fC=!0;var m=0,y=ir;try{var w=du;for(ir=1;m<w.length;m++){var N=w[m];do N=N(!0);while(N!==null)}du=null,sw=!1}catch(k){throw du!==null&&(du=du.slice(m+1)),Oh(st,Fh),k}finally{ir=y,fC=!1}}return null}var sm=[],am=0,aw=null,ow=0,$o=[],Go=0,mf=null,fu=1,pu="";function gf(m,y){sm[am++]=ow,sm[am++]=aw,aw=m,ow=y}function y4(m,y,w){$o[Go++]=fu,$o[Go++]=pu,$o[Go++]=mf,mf=m;var N=fu;m=pu;var k=32-Dn(N)-1;N&=~(1<<k),w+=1;var L=32-Dn(y)+k;if(30<L){var K=k-k%5;L=(N&(1<<K)-1).toString(32),N>>=K,k-=K,fu=1<<32-Dn(y)+k|w<<k|N,pu=L+m}else fu=1<<L|w<<k|N,pu=m}function pC(m){m.return!==null&&(gf(m,1),y4(m,1,0))}function mC(m){for(;m===aw;)aw=sm[--am],sm[am]=null,ow=sm[--am],sm[am]=null;for(;m===mf;)mf=$o[--Go],$o[Go]=null,pu=$o[--Go],$o[Go]=null,fu=$o[--Go],$o[Go]=null}var ho=null,fo=null,di=!1,Tl=null;function v4(m,y){var w=qo(5,null,null,0);w.elementType="DELETED",w.stateNode=y,w.return=m,y=m.deletions,y===null?(m.deletions=[w],m.flags|=16):y.push(w)}function x4(m,y){switch(m.tag){case 5:var w=m.type;return y=y.nodeType!==1||w.toLowerCase()!==y.nodeName.toLowerCase()?null:y,y!==null?(m.stateNode=y,ho=m,fo=Ih(y.firstChild),!0):!1;case 6:return y=m.pendingProps===""||y.nodeType!==3?null:y,y!==null?(m.stateNode=y,ho=m,fo=null,!0):!1;case 13:return y=y.nodeType!==8?null:y,y!==null?(w=mf!==null?{id:fu,overflow:pu}:null,m.memoizedState={dehydrated:y,treeContext:w,retryLane:1073741824},w=qo(18,null,null,0),w.stateNode=y,w.return=m,m.child=w,ho=m,fo=null,!0):!1;default:return!1}}function gC(m){return(m.mode&1)!==0&&(m.flags&128)===0}function yC(m){if(di){var y=fo;if(y){var w=y;if(!x4(m,y)){if(gC(m))throw Error(n(418));y=Ih(w.nextSibling);var N=ho;y&&x4(m,y)?v4(N,w):(m.flags=m.flags&-4097|2,di=!1,ho=m)}}else{if(gC(m))throw Error(n(418));m.flags=m.flags&-4097|2,di=!1,ho=m}}}function b4(m){for(m=m.return;m!==null&&m.tag!==5&&m.tag!==3&&m.tag!==13;)m=m.return;ho=m}function lw(m){if(m!==ho)return!1;if(!di)return b4(m),di=!0,!1;var y;if((y=m.tag!==3)&&!(y=m.tag!==5)&&(y=m.type,y=y!=="head"&&y!=="body"&&!lC(m.type,m.memoizedProps)),y&&(y=fo)){if(gC(m))throw _4(),Error(n(418));for(;y;)v4(m,y),y=Ih(y.nextSibling)}if(b4(m),m.tag===13){if(m=m.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(n(317));e:{for(m=m.nextSibling,y=0;m;){if(m.nodeType===8){var w=m.data;if(w==="/$"){if(y===0){fo=Ih(m.nextSibling);break e}y--}else w!=="$"&&w!=="$!"&&w!=="$?"||y++}m=m.nextSibling}fo=null}}else fo=ho?Ih(m.stateNode.nextSibling):null;return!0}function _4(){for(var m=fo;m;)m=Ih(m.nextSibling)}function om(){fo=ho=null,di=!1}function vC(m){Tl===null?Tl=[m]:Tl.push(m)}var Dle=T.ReactCurrentBatchConfig;function k0(m,y,w){if(m=w.ref,m!==null&&typeof m!="function"&&typeof m!="object"){if(w._owner){if(w=w._owner,w){if(w.tag!==1)throw Error(n(309));var N=w.stateNode}if(!N)throw Error(n(147,m));var k=N,L=""+m;return y!==null&&y.ref!==null&&typeof y.ref=="function"&&y.ref._stringRef===L?y.ref:(y=function(K){var ge=k.refs;K===null?delete ge[L]:ge[L]=K},y._stringRef=L,y)}if(typeof m!="string")throw Error(n(284));if(!w._owner)throw Error(n(290,m))}return m}function cw(m,y){throw m=Object.prototype.toString.call(y),Error(n(31,m==="[object Object]"?"object with keys {"+Object.keys(y).join(", ")+"}":m))}function w4(m){var y=m._init;return y(m._payload)}function S4(m){function y(Pe,Te){if(m){var ke=Pe.deletions;ke===null?(Pe.deletions=[Te],Pe.flags|=16):ke.push(Te)}}function w(Pe,Te){if(!m)return null;for(;Te!==null;)y(Pe,Te),Te=Te.sibling;return null}function N(Pe,Te){for(Pe=new Map;Te!==null;)Te.key!==null?Pe.set(Te.key,Te):Pe.set(Te.index,Te),Te=Te.sibling;return Pe}function k(Pe,Te){return Pe=Hh(Pe,Te),Pe.index=0,Pe.sibling=null,Pe}function L(Pe,Te,ke){return Pe.index=ke,m?(ke=Pe.alternate,ke!==null?(ke=ke.index,ke<Te?(Pe.flags|=2,Te):ke):(Pe.flags|=2,Te)):(Pe.flags|=1048576,Te)}function K(Pe){return m&&Pe.alternate===null&&(Pe.flags|=2),Pe}function ge(Pe,Te,ke,mt){return Te===null||Te.tag!==6?(Te=c2(ke,Pe.mode,mt),Te.return=Pe,Te):(Te=k(Te,ke),Te.return=Pe,Te)}function _e(Pe,Te,ke,mt){var on=ke.type;return on===A?it(Pe,Te,ke.props.children,mt,ke.key):Te!==null&&(Te.elementType===on||typeof on=="object"&&on!==null&&on.$$typeof===j&&w4(on)===Te.type)?(mt=k(Te,ke.props),mt.ref=k0(Pe,Te,ke),mt.return=Pe,mt):(mt=kw(ke.type,ke.key,ke.props,null,Pe.mode,mt),mt.ref=k0(Pe,Te,ke),mt.return=Pe,mt)}function Be(Pe,Te,ke,mt){return Te===null||Te.tag!==4||Te.stateNode.containerInfo!==ke.containerInfo||Te.stateNode.implementation!==ke.implementation?(Te=u2(ke,Pe.mode,mt),Te.return=Pe,Te):(Te=k(Te,ke.children||[]),Te.return=Pe,Te)}function it(Pe,Te,ke,mt,on){return Te===null||Te.tag!==7?(Te=Tf(ke,Pe.mode,mt,on),Te.return=Pe,Te):(Te=k(Te,ke),Te.return=Pe,Te)}function lt(Pe,Te,ke){if(typeof Te=="string"&&Te!==""||typeof Te=="number")return Te=c2(""+Te,Pe.mode,ke),Te.return=Pe,Te;if(typeof Te=="object"&&Te!==null){switch(Te.$$typeof){case M:return ke=kw(Te.type,Te.key,Te.props,null,Pe.mode,ke),ke.ref=k0(Pe,null,Te),ke.return=Pe,ke;case C:return Te=u2(Te,Pe.mode,ke),Te.return=Pe,Te;case j:var mt=Te._init;return lt(Pe,mt(Te._payload),ke)}if(Ft(Te)||Z(Te))return Te=Tf(Te,Pe.mode,ke,null),Te.return=Pe,Te;cw(Pe,Te)}return null}function nt(Pe,Te,ke,mt){var on=Te!==null?Te.key:null;if(typeof ke=="string"&&ke!==""||typeof ke=="number")return on!==null?null:ge(Pe,Te,""+ke,mt);if(typeof ke=="object"&&ke!==null){switch(ke.$$typeof){case M:return ke.key===on?_e(Pe,Te,ke,mt):null;case C:return ke.key===on?Be(Pe,Te,ke,mt):null;case j:return on=ke._init,nt(Pe,Te,on(ke._payload),mt)}if(Ft(ke)||Z(ke))return on!==null?null:it(Pe,Te,ke,mt,null);cw(Pe,ke)}return null}function Ut(Pe,Te,ke,mt,on){if(typeof mt=="string"&&mt!==""||typeof mt=="number")return Pe=Pe.get(ke)||null,ge(Te,Pe,""+mt,on);if(typeof mt=="object"&&mt!==null){switch(mt.$$typeof){case M:return Pe=Pe.get(mt.key===null?ke:mt.key)||null,_e(Te,Pe,mt,on);case C:return Pe=Pe.get(mt.key===null?ke:mt.key)||null,Be(Te,Pe,mt,on);case j:var _n=mt._init;return Ut(Pe,Te,ke,_n(mt._payload),on)}if(Ft(mt)||Z(mt))return Pe=Pe.get(ke)||null,it(Te,Pe,mt,on,null);cw(Te,mt)}return null}function Yt(Pe,Te,ke,mt){for(var on=null,_n=null,wn=Te,On=Te=0,Ss=null;wn!==null&&On<ke.length;On++){wn.index>On?(Ss=wn,wn=null):Ss=wn.sibling;var Sr=nt(Pe,wn,ke[On],mt);if(Sr===null){wn===null&&(wn=Ss);break}m&&wn&&Sr.alternate===null&&y(Pe,wn),Te=L(Sr,Te,On),_n===null?on=Sr:_n.sibling=Sr,_n=Sr,wn=Ss}if(On===ke.length)return w(Pe,wn),di&&gf(Pe,On),on;if(wn===null){for(;On<ke.length;On++)wn=lt(Pe,ke[On],mt),wn!==null&&(Te=L(wn,Te,On),_n===null?on=wn:_n.sibling=wn,_n=wn);return di&&gf(Pe,On),on}for(wn=N(Pe,wn);On<ke.length;On++)Ss=Ut(wn,Pe,On,ke[On],mt),Ss!==null&&(m&&Ss.alternate!==null&&wn.delete(Ss.key===null?On:Ss.key),Te=L(Ss,Te,On),_n===null?on=Ss:_n.sibling=Ss,_n=Ss);return m&&wn.forEach(function(Wh){return y(Pe,Wh)}),di&&gf(Pe,On),on}function rn(Pe,Te,ke,mt){var on=Z(ke);if(typeof on!="function")throw Error(n(150));if(ke=on.call(ke),ke==null)throw Error(n(151));for(var _n=on=null,wn=Te,On=Te=0,Ss=null,Sr=ke.next();wn!==null&&!Sr.done;On++,Sr=ke.next()){wn.index>On?(Ss=wn,wn=null):Ss=wn.sibling;var Wh=nt(Pe,wn,Sr.value,mt);if(Wh===null){wn===null&&(wn=Ss);break}m&&wn&&Wh.alternate===null&&y(Pe,wn),Te=L(Wh,Te,On),_n===null?on=Wh:_n.sibling=Wh,_n=Wh,wn=Ss}if(Sr.done)return w(Pe,wn),di&&gf(Pe,On),on;if(wn===null){for(;!Sr.done;On++,Sr=ke.next())Sr=lt(Pe,Sr.value,mt),Sr!==null&&(Te=L(Sr,Te,On),_n===null?on=Sr:_n.sibling=Sr,_n=Sr);return di&&gf(Pe,On),on}for(wn=N(Pe,wn);!Sr.done;On++,Sr=ke.next())Sr=Ut(wn,Pe,On,Sr.value,mt),Sr!==null&&(m&&Sr.alternate!==null&&wn.delete(Sr.key===null?On:Sr.key),Te=L(Sr,Te,On),_n===null?on=Sr:_n.sibling=Sr,_n=Sr);return m&&wn.forEach(function(pce){return y(Pe,pce)}),di&&gf(Pe,On),on}function Fi(Pe,Te,ke,mt){if(typeof ke=="object"&&ke!==null&&ke.type===A&&ke.key===null&&(ke=ke.props.children),typeof ke=="object"&&ke!==null){switch(ke.$$typeof){case M:e:{for(var on=ke.key,_n=Te;_n!==null;){if(_n.key===on){if(on=ke.type,on===A){if(_n.tag===7){w(Pe,_n.sibling),Te=k(_n,ke.props.children),Te.return=Pe,Pe=Te;break e}}else if(_n.elementType===on||typeof on=="object"&&on!==null&&on.$$typeof===j&&w4(on)===_n.type){w(Pe,_n.sibling),Te=k(_n,ke.props),Te.ref=k0(Pe,_n,ke),Te.return=Pe,Pe=Te;break e}w(Pe,_n);break}else y(Pe,_n);_n=_n.sibling}ke.type===A?(Te=Tf(ke.props.children,Pe.mode,mt,ke.key),Te.return=Pe,Pe=Te):(mt=kw(ke.type,ke.key,ke.props,null,Pe.mode,mt),mt.ref=k0(Pe,Te,ke),mt.return=Pe,Pe=mt)}return K(Pe);case C:e:{for(_n=ke.key;Te!==null;){if(Te.key===_n)if(Te.tag===4&&Te.stateNode.containerInfo===ke.containerInfo&&Te.stateNode.implementation===ke.implementation){w(Pe,Te.sibling),Te=k(Te,ke.children||[]),Te.return=Pe,Pe=Te;break e}else{w(Pe,Te);break}else y(Pe,Te);Te=Te.sibling}Te=u2(ke,Pe.mode,mt),Te.return=Pe,Pe=Te}return K(Pe);case j:return _n=ke._init,Fi(Pe,Te,_n(ke._payload),mt)}if(Ft(ke))return Yt(Pe,Te,ke,mt);if(Z(ke))return rn(Pe,Te,ke,mt);cw(Pe,ke)}return typeof ke=="string"&&ke!==""||typeof ke=="number"?(ke=""+ke,Te!==null&&Te.tag===6?(w(Pe,Te.sibling),Te=k(Te,ke),Te.return=Pe,Pe=Te):(w(Pe,Te),Te=c2(ke,Pe.mode,mt),Te.return=Pe,Pe=Te),K(Pe)):w(Pe,Te)}return Fi}var lm=S4(!0),T4=S4(!1),uw=Dh(null),hw=null,cm=null,xC=null;function bC(){xC=cm=hw=null}function _C(m){var y=uw.current;ni(uw),m._currentValue=y}function wC(m,y,w){for(;m!==null;){var N=m.alternate;if((m.childLanes&y)!==y?(m.childLanes|=y,N!==null&&(N.childLanes|=y)):N!==null&&(N.childLanes&y)!==y&&(N.childLanes|=y),m===w)break;m=m.return}}function um(m,y){hw=m,xC=cm=null,m=m.dependencies,m!==null&&m.firstContext!==null&&((m.lanes&y)!==0&&(ja=!0),m.firstContext=null)}function Vo(m){var y=m._currentValue;if(xC!==m)if(m={context:m,memoizedValue:y,next:null},cm===null){if(hw===null)throw Error(n(308));cm=m,hw.dependencies={lanes:0,firstContext:m}}else cm=cm.next=m;return y}var yf=null;function SC(m){yf===null?yf=[m]:yf.push(m)}function E4(m,y,w,N){var k=y.interleaved;return k===null?(w.next=w,SC(y)):(w.next=k.next,k.next=w),y.interleaved=w,mu(m,N)}function mu(m,y){m.lanes|=y;var w=m.alternate;for(w!==null&&(w.lanes|=y),w=m,m=m.return;m!==null;)m.childLanes|=y,w=m.alternate,w!==null&&(w.childLanes|=y),w=m,m=m.return;return w.tag===3?w.stateNode:null}var Bh=!1;function TC(m){m.updateQueue={baseState:m.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function M4(m,y){m=m.updateQueue,y.updateQueue===m&&(y.updateQueue={baseState:m.baseState,firstBaseUpdate:m.firstBaseUpdate,lastBaseUpdate:m.lastBaseUpdate,shared:m.shared,effects:m.effects})}function gu(m,y){return{eventTime:m,lane:y,tag:0,payload:null,callback:null,next:null}}function jh(m,y,w){var N=m.updateQueue;if(N===null)return null;if(N=N.shared,(vr&2)!==0){var k=N.pending;return k===null?y.next=y:(y.next=k.next,k.next=y),N.pending=y,mu(m,w)}return k=N.interleaved,k===null?(y.next=y,SC(N)):(y.next=k.next,k.next=y),N.interleaved=y,mu(m,w)}function dw(m,y,w){if(y=y.updateQueue,y!==null&&(y=y.shared,(w&4194240)!==0)){var N=y.lanes;N&=m.pendingLanes,w|=N,y.lanes=w,Xr(m,w)}}function A4(m,y){var w=m.updateQueue,N=m.alternate;if(N!==null&&(N=N.updateQueue,w===N)){var k=null,L=null;if(w=w.firstBaseUpdate,w!==null){do{var K={eventTime:w.eventTime,lane:w.lane,tag:w.tag,payload:w.payload,callback:w.callback,next:null};L===null?k=L=K:L=L.next=K,w=w.next}while(w!==null);L===null?k=L=y:L=L.next=y}else k=L=y;w={baseState:N.baseState,firstBaseUpdate:k,lastBaseUpdate:L,shared:N.shared,effects:N.effects},m.updateQueue=w;return}m=w.lastBaseUpdate,m===null?w.firstBaseUpdate=y:m.next=y,w.lastBaseUpdate=y}function fw(m,y,w,N){var k=m.updateQueue;Bh=!1;var L=k.firstBaseUpdate,K=k.lastBaseUpdate,ge=k.shared.pending;if(ge!==null){k.shared.pending=null;var _e=ge,Be=_e.next;_e.next=null,K===null?L=Be:K.next=Be,K=_e;var it=m.alternate;it!==null&&(it=it.updateQueue,ge=it.lastBaseUpdate,ge!==K&&(ge===null?it.firstBaseUpdate=Be:ge.next=Be,it.lastBaseUpdate=_e))}if(L!==null){var lt=k.baseState;K=0,it=Be=_e=null,ge=L;do{var nt=ge.lane,Ut=ge.eventTime;if((N&nt)===nt){it!==null&&(it=it.next={eventTime:Ut,lane:0,tag:ge.tag,payload:ge.payload,callback:ge.callback,next:null});e:{var Yt=m,rn=ge;switch(nt=y,Ut=w,rn.tag){case 1:if(Yt=rn.payload,typeof Yt=="function"){lt=Yt.call(Ut,lt,nt);break e}lt=Yt;break e;case 3:Yt.flags=Yt.flags&-65537|128;case 0:if(Yt=rn.payload,nt=typeof Yt=="function"?Yt.call(Ut,lt,nt):Yt,nt==null)break e;lt=se({},lt,nt);break e;case 2:Bh=!0}}ge.callback!==null&&ge.lane!==0&&(m.flags|=64,nt=k.effects,nt===null?k.effects=[ge]:nt.push(ge))}else Ut={eventTime:Ut,lane:nt,tag:ge.tag,payload:ge.payload,callback:ge.callback,next:null},it===null?(Be=it=Ut,_e=lt):it=it.next=Ut,K|=nt;if(ge=ge.next,ge===null){if(ge=k.shared.pending,ge===null)break;nt=ge,ge=nt.next,nt.next=null,k.lastBaseUpdate=nt,k.shared.pending=null}}while(!0);if(it===null&&(_e=lt),k.baseState=_e,k.firstBaseUpdate=Be,k.lastBaseUpdate=it,y=k.shared.interleaved,y!==null){k=y;do K|=k.lane,k=k.next;while(k!==y)}else L===null&&(k.shared.lanes=0);bf|=K,m.lanes=K,m.memoizedState=lt}}function C4(m,y,w){if(m=y.effects,y.effects=null,m!==null)for(y=0;y<m.length;y++){var N=m[y],k=N.callback;if(k!==null){if(N.callback=null,N=w,typeof k!="function")throw Error(n(191,k));k.call(N)}}}var I0={},vc=Dh(I0),D0=Dh(I0),L0=Dh(I0);function vf(m){if(m===I0)throw Error(n(174));return m}function EC(m,y){switch(Zr(L0,y),Zr(D0,m),Zr(vc,I0),m=y.nodeType,m){case 9:case 11:y=(y=y.documentElement)?y.namespaceURI:Kt(null,"");break;default:m=m===8?y.parentNode:y,y=m.namespaceURI||null,m=m.tagName,y=Kt(y,m)}ni(vc),Zr(vc,y)}function hm(){ni(vc),ni(D0),ni(L0)}function N4(m){vf(L0.current);var y=vf(vc.current),w=Kt(y,m.type);y!==w&&(Zr(D0,m),Zr(vc,w))}function MC(m){D0.current===m&&(ni(vc),ni(D0))}var bi=Dh(0);function pw(m){for(var y=m;y!==null;){if(y.tag===13){var w=y.memoizedState;if(w!==null&&(w=w.dehydrated,w===null||w.data==="$?"||w.data==="$!"))return y}else if(y.tag===19&&y.memoizedProps.revealOrder!==void 0){if((y.flags&128)!==0)return y}else if(y.child!==null){y.child.return=y,y=y.child;continue}if(y===m)break;for(;y.sibling===null;){if(y.return===null||y.return===m)return null;y=y.return}y.sibling.return=y.return,y=y.sibling}return null}var AC=[];function CC(){for(var m=0;m<AC.length;m++)AC[m]._workInProgressVersionPrimary=null;AC.length=0}var mw=T.ReactCurrentDispatcher,NC=T.ReactCurrentBatchConfig,xf=0,_i=null,os=null,_s=null,gw=!1,F0=!1,B0=0,Lle=0;function Ks(){throw Error(n(321))}function PC(m,y){if(y===null)return!1;for(var w=0;w<y.length&&w<m.length;w++)if(!Sl(m[w],y[w]))return!1;return!0}function RC(m,y,w,N,k,L){if(xf=L,_i=y,y.memoizedState=null,y.updateQueue=null,y.lanes=0,mw.current=m===null||m.memoizedState===null?Ule:zle,m=w(N,k),F0){L=0;do{if(F0=!1,B0=0,25<=L)throw Error(n(301));L+=1,_s=os=null,y.updateQueue=null,mw.current=$le,m=w(N,k)}while(F0)}if(mw.current=xw,y=os!==null&&os.next!==null,xf=0,_s=os=_i=null,gw=!1,y)throw Error(n(300));return m}function OC(){var m=B0!==0;return B0=0,m}function xc(){var m={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return _s===null?_i.memoizedState=_s=m:_s=_s.next=m,_s}function Ho(){if(os===null){var m=_i.alternate;m=m!==null?m.memoizedState:null}else m=os.next;var y=_s===null?_i.memoizedState:_s.next;if(y!==null)_s=y,os=m;else{if(m===null)throw Error(n(310));os=m,m={memoizedState:os.memoizedState,baseState:os.baseState,baseQueue:os.baseQueue,queue:os.queue,next:null},_s===null?_i.memoizedState=_s=m:_s=_s.next=m}return _s}function j0(m,y){return typeof y=="function"?y(m):y}function kC(m){var y=Ho(),w=y.queue;if(w===null)throw Error(n(311));w.lastRenderedReducer=m;var N=os,k=N.baseQueue,L=w.pending;if(L!==null){if(k!==null){var K=k.next;k.next=L.next,L.next=K}N.baseQueue=k=L,w.pending=null}if(k!==null){L=k.next,N=N.baseState;var ge=K=null,_e=null,Be=L;do{var it=Be.lane;if((xf&it)===it)_e!==null&&(_e=_e.next={lane:0,action:Be.action,hasEagerState:Be.hasEagerState,eagerState:Be.eagerState,next:null}),N=Be.hasEagerState?Be.eagerState:m(N,Be.action);else{var lt={lane:it,action:Be.action,hasEagerState:Be.hasEagerState,eagerState:Be.eagerState,next:null};_e===null?(ge=_e=lt,K=N):_e=_e.next=lt,_i.lanes|=it,bf|=it}Be=Be.next}while(Be!==null&&Be!==L);_e===null?K=N:_e.next=ge,Sl(N,y.memoizedState)||(ja=!0),y.memoizedState=N,y.baseState=K,y.baseQueue=_e,w.lastRenderedState=N}if(m=w.interleaved,m!==null){k=m;do L=k.lane,_i.lanes|=L,bf|=L,k=k.next;while(k!==m)}else k===null&&(w.lanes=0);return[y.memoizedState,w.dispatch]}function IC(m){var y=Ho(),w=y.queue;if(w===null)throw Error(n(311));w.lastRenderedReducer=m;var N=w.dispatch,k=w.pending,L=y.memoizedState;if(k!==null){w.pending=null;var K=k=k.next;do L=m(L,K.action),K=K.next;while(K!==k);Sl(L,y.memoizedState)||(ja=!0),y.memoizedState=L,y.baseQueue===null&&(y.baseState=L),w.lastRenderedState=L}return[L,N]}function P4(){}function R4(m,y){var w=_i,N=Ho(),k=y(),L=!Sl(N.memoizedState,k);if(L&&(N.memoizedState=k,ja=!0),N=N.queue,DC(I4.bind(null,w,N,m),[m]),N.getSnapshot!==y||L||_s!==null&&_s.memoizedState.tag&1){if(w.flags|=2048,U0(9,k4.bind(null,w,N,k,y),void 0,null),ws===null)throw Error(n(349));(xf&30)!==0||O4(w,y,k)}return k}function O4(m,y,w){m.flags|=16384,m={getSnapshot:y,value:w},y=_i.updateQueue,y===null?(y={lastEffect:null,stores:null},_i.updateQueue=y,y.stores=[m]):(w=y.stores,w===null?y.stores=[m]:w.push(m))}function k4(m,y,w,N){y.value=w,y.getSnapshot=N,D4(y)&&L4(m)}function I4(m,y,w){return w(function(){D4(y)&&L4(m)})}function D4(m){var y=m.getSnapshot;m=m.value;try{var w=y();return!Sl(m,w)}catch{return!0}}function L4(m){var y=mu(m,1);y!==null&&Cl(y,m,1,-1)}function F4(m){var y=xc();return typeof m=="function"&&(m=m()),y.memoizedState=y.baseState=m,m={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:j0,lastRenderedState:m},y.queue=m,m=m.dispatch=jle.bind(null,_i,m),[y.memoizedState,m]}function U0(m,y,w,N){return m={tag:m,create:y,destroy:w,deps:N,next:null},y=_i.updateQueue,y===null?(y={lastEffect:null,stores:null},_i.updateQueue=y,y.lastEffect=m.next=m):(w=y.lastEffect,w===null?y.lastEffect=m.next=m:(N=w.next,w.next=m,m.next=N,y.lastEffect=m)),m}function B4(){return Ho().memoizedState}function yw(m,y,w,N){var k=xc();_i.flags|=m,k.memoizedState=U0(1|y,w,void 0,N===void 0?null:N)}function vw(m,y,w,N){var k=Ho();N=N===void 0?null:N;var L=void 0;if(os!==null){var K=os.memoizedState;if(L=K.destroy,N!==null&&PC(N,K.deps)){k.memoizedState=U0(y,w,L,N);return}}_i.flags|=m,k.memoizedState=U0(1|y,w,L,N)}function j4(m,y){return yw(8390656,8,m,y)}function DC(m,y){return vw(2048,8,m,y)}function U4(m,y){return vw(4,2,m,y)}function z4(m,y){return vw(4,4,m,y)}function $4(m,y){if(typeof y=="function")return m=m(),y(m),function(){y(null)};if(y!=null)return m=m(),y.current=m,function(){y.current=null}}function G4(m,y,w){return w=w!=null?w.concat([m]):null,vw(4,4,$4.bind(null,y,m),w)}function LC(){}function V4(m,y){var w=Ho();y=y===void 0?null:y;var N=w.memoizedState;return N!==null&&y!==null&&PC(y,N[1])?N[0]:(w.memoizedState=[m,y],m)}function H4(m,y){var w=Ho();y=y===void 0?null:y;var N=w.memoizedState;return N!==null&&y!==null&&PC(y,N[1])?N[0]:(m=m(),w.memoizedState=[m,y],m)}function W4(m,y,w){return(xf&21)===0?(m.baseState&&(m.baseState=!1,ja=!0),m.memoizedState=w):(Sl(w,y)||(w=wr(),_i.lanes|=w,bf|=w,m.baseState=!0),y)}function Fle(m,y){var w=ir;ir=w!==0&&4>w?w:4,m(!0);var N=NC.transition;NC.transition={};try{m(!1),y()}finally{ir=w,NC.transition=N}}function q4(){return Ho().memoizedState}function Ble(m,y,w){var N=Gh(m);if(w={lane:N,action:w,hasEagerState:!1,eagerState:null,next:null},X4(m))K4(y,w);else if(w=E4(m,y,w,N),w!==null){var k=ya();Cl(w,m,N,k),Y4(w,y,N)}}function jle(m,y,w){var N=Gh(m),k={lane:N,action:w,hasEagerState:!1,eagerState:null,next:null};if(X4(m))K4(y,k);else{var L=m.alternate;if(m.lanes===0&&(L===null||L.lanes===0)&&(L=y.lastRenderedReducer,L!==null))try{var K=y.lastRenderedState,ge=L(K,w);if(k.hasEagerState=!0,k.eagerState=ge,Sl(ge,K)){var _e=y.interleaved;_e===null?(k.next=k,SC(y)):(k.next=_e.next,_e.next=k),y.interleaved=k;return}}catch{}finally{}w=E4(m,y,k,N),w!==null&&(k=ya(),Cl(w,m,N,k),Y4(w,y,N))}}function X4(m){var y=m.alternate;return m===_i||y!==null&&y===_i}function K4(m,y){F0=gw=!0;var w=m.pending;w===null?y.next=y:(y.next=w.next,w.next=y),m.pending=y}function Y4(m,y,w){if((w&4194240)!==0){var N=y.lanes;N&=m.pendingLanes,w|=N,y.lanes=w,Xr(m,w)}}var xw={readContext:Vo,useCallback:Ks,useContext:Ks,useEffect:Ks,useImperativeHandle:Ks,useInsertionEffect:Ks,useLayoutEffect:Ks,useMemo:Ks,useReducer:Ks,useRef:Ks,useState:Ks,useDebugValue:Ks,useDeferredValue:Ks,useTransition:Ks,useMutableSource:Ks,useSyncExternalStore:Ks,useId:Ks,unstable_isNewReconciler:!1},Ule={readContext:Vo,useCallback:function(m,y){return xc().memoizedState=[m,y===void 0?null:y],m},useContext:Vo,useEffect:j4,useImperativeHandle:function(m,y,w){return w=w!=null?w.concat([m]):null,yw(4194308,4,$4.bind(null,y,m),w)},useLayoutEffect:function(m,y){return yw(4194308,4,m,y)},useInsertionEffect:function(m,y){return yw(4,2,m,y)},useMemo:function(m,y){var w=xc();return y=y===void 0?null:y,m=m(),w.memoizedState=[m,y],m},useReducer:function(m,y,w){var N=xc();return y=w!==void 0?w(y):y,N.memoizedState=N.baseState=y,m={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:m,lastRenderedState:y},N.queue=m,m=m.dispatch=Ble.bind(null,_i,m),[N.memoizedState,m]},useRef:function(m){var y=xc();return m={current:m},y.memoizedState=m},useState:F4,useDebugValue:LC,useDeferredValue:function(m){return xc().memoizedState=m},useTransition:function(){var m=F4(!1),y=m[0];return m=Fle.bind(null,m[1]),xc().memoizedState=m,[y,m]},useMutableSource:function(){},useSyncExternalStore:function(m,y,w){var N=_i,k=xc();if(di){if(w===void 0)throw Error(n(407));w=w()}else{if(w=y(),ws===null)throw Error(n(349));(xf&30)!==0||O4(N,y,w)}k.memoizedState=w;var L={value:w,getSnapshot:y};return k.queue=L,j4(I4.bind(null,N,L,m),[m]),N.flags|=2048,U0(9,k4.bind(null,N,L,w,y),void 0,null),w},useId:function(){var m=xc(),y=ws.identifierPrefix;if(di){var w=pu,N=fu;w=(N&~(1<<32-Dn(N)-1)).toString(32)+w,y=":"+y+"R"+w,w=B0++,0<w&&(y+="H"+w.toString(32)),y+=":"}else w=Lle++,y=":"+y+"r"+w.toString(32)+":";return m.memoizedState=y},unstable_isNewReconciler:!1},zle={readContext:Vo,useCallback:V4,useContext:Vo,useEffect:DC,useImperativeHandle:G4,useInsertionEffect:U4,useLayoutEffect:z4,useMemo:H4,useReducer:kC,useRef:B4,useState:function(){return kC(j0)},useDebugValue:LC,useDeferredValue:function(m){var y=Ho();return W4(y,os.memoizedState,m)},useTransition:function(){var m=kC(j0)[0],y=Ho().memoizedState;return[m,y]},useMutableSource:P4,useSyncExternalStore:R4,useId:q4,unstable_isNewReconciler:!1},$le={readContext:Vo,useCallback:V4,useContext:Vo,useEffect:DC,useImperativeHandle:G4,useInsertionEffect:U4,useLayoutEffect:z4,useMemo:H4,useReducer:IC,useRef:B4,useState:function(){return IC(j0)},useDebugValue:LC,useDeferredValue:function(m){var y=Ho();return os===null?y.memoizedState=m:W4(y,os.memoizedState,m)},useTransition:function(){var m=IC(j0)[0],y=Ho().memoizedState;return[m,y]},useMutableSource:P4,useSyncExternalStore:R4,useId:q4,unstable_isNewReconciler:!1};function El(m,y){if(m&&m.defaultProps){y=se({},y),m=m.defaultProps;for(var w in m)y[w]===void 0&&(y[w]=m[w]);return y}return y}function FC(m,y,w,N){y=m.memoizedState,w=w(N,y),w=w==null?y:se({},y,w),m.memoizedState=w,m.lanes===0&&(m.updateQueue.baseState=w)}var bw={isMounted:function(m){return(m=m._reactInternals)?Ia(m)===m:!1},enqueueSetState:function(m,y,w){m=m._reactInternals;var N=ya(),k=Gh(m),L=gu(N,k);L.payload=y,w!=null&&(L.callback=w),y=jh(m,L,k),y!==null&&(Cl(y,m,k,N),dw(y,m,k))},enqueueReplaceState:function(m,y,w){m=m._reactInternals;var N=ya(),k=Gh(m),L=gu(N,k);L.tag=1,L.payload=y,w!=null&&(L.callback=w),y=jh(m,L,k),y!==null&&(Cl(y,m,k,N),dw(y,m,k))},enqueueForceUpdate:function(m,y){m=m._reactInternals;var w=ya(),N=Gh(m),k=gu(w,N);k.tag=2,y!=null&&(k.callback=y),y=jh(m,k,N),y!==null&&(Cl(y,m,N,w),dw(y,m,N))}};function Z4(m,y,w,N,k,L,K){return m=m.stateNode,typeof m.shouldComponentUpdate=="function"?m.shouldComponentUpdate(N,L,K):y.prototype&&y.prototype.isPureReactComponent?!M0(w,N)||!M0(k,L):!0}function Q4(m,y,w){var N=!1,k=Lh,L=y.contextType;return typeof L=="object"&&L!==null?L=Vo(L):(k=Ba(y)?pf:Xs.current,N=y.contextTypes,L=(N=N!=null)?im(m,k):Lh),y=new y(w,L),m.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=bw,m.stateNode=y,y._reactInternals=m,N&&(m=m.stateNode,m.__reactInternalMemoizedUnmaskedChildContext=k,m.__reactInternalMemoizedMaskedChildContext=L),y}function J4(m,y,w,N){m=y.state,typeof y.componentWillReceiveProps=="function"&&y.componentWillReceiveProps(w,N),typeof y.UNSAFE_componentWillReceiveProps=="function"&&y.UNSAFE_componentWillReceiveProps(w,N),y.state!==m&&bw.enqueueReplaceState(y,y.state,null)}function BC(m,y,w,N){var k=m.stateNode;k.props=w,k.state=m.memoizedState,k.refs={},TC(m);var L=y.contextType;typeof L=="object"&&L!==null?k.context=Vo(L):(L=Ba(y)?pf:Xs.current,k.context=im(m,L)),k.state=m.memoizedState,L=y.getDerivedStateFromProps,typeof L=="function"&&(FC(m,y,L,w),k.state=m.memoizedState),typeof y.getDerivedStateFromProps=="function"||typeof k.getSnapshotBeforeUpdate=="function"||typeof k.UNSAFE_componentWillMount!="function"&&typeof k.componentWillMount!="function"||(y=k.state,typeof k.componentWillMount=="function"&&k.componentWillMount(),typeof k.UNSAFE_componentWillMount=="function"&&k.UNSAFE_componentWillMount(),y!==k.state&&bw.enqueueReplaceState(k,k.state,null),fw(m,w,k,N),k.state=m.memoizedState),typeof k.componentDidMount=="function"&&(m.flags|=4194308)}function dm(m,y){try{var w="",N=y;do w+=le(N),N=N.return;while(N);var k=w}catch(L){k=`
Error generating stack: `+L.message+`
`+L.stack}return{value:m,source:y,stack:k,digest:null}}function jC(m,y,w){return{value:m,source:null,stack:w??null,digest:y??null}}function UC(m,y){try{console.error(y.value)}catch(w){setTimeout(function(){throw w})}}var Gle=typeof WeakMap=="function"?WeakMap:Map;function e5(m,y,w){w=gu(-1,w),w.tag=3,w.payload={element:null};var N=y.value;return w.callback=function(){Aw||(Aw=!0,t2=N),UC(m,y)},w}function t5(m,y,w){w=gu(-1,w),w.tag=3;var N=m.type.getDerivedStateFromError;if(typeof N=="function"){var k=y.value;w.payload=function(){return N(k)},w.callback=function(){UC(m,y)}}var L=m.stateNode;return L!==null&&typeof L.componentDidCatch=="function"&&(w.callback=function(){UC(m,y),typeof N!="function"&&(zh===null?zh=new Set([this]):zh.add(this));var K=y.stack;this.componentDidCatch(y.value,{componentStack:K!==null?K:""})}),w}function n5(m,y,w){var N=m.pingCache;if(N===null){N=m.pingCache=new Gle;var k=new Set;N.set(y,k)}else k=N.get(y),k===void 0&&(k=new Set,N.set(y,k));k.has(w)||(k.add(w),m=rce.bind(null,m,y,w),y.then(m,m))}function r5(m){do{var y;if((y=m.tag===13)&&(y=m.memoizedState,y=y!==null?y.dehydrated!==null:!0),y)return m;m=m.return}while(m!==null);return null}function i5(m,y,w,N,k){return(m.mode&1)===0?(m===y?m.flags|=65536:(m.flags|=128,w.flags|=131072,w.flags&=-52805,w.tag===1&&(w.alternate===null?w.tag=17:(y=gu(-1,1),y.tag=2,jh(w,y,1))),w.lanes|=1),m):(m.flags|=65536,m.lanes=k,m)}var Vle=T.ReactCurrentOwner,ja=!1;function ga(m,y,w,N){y.child=m===null?T4(y,null,w,N):lm(y,m.child,w,N)}function s5(m,y,w,N,k){w=w.render;var L=y.ref;return um(y,k),N=RC(m,y,w,N,L,k),w=OC(),m!==null&&!ja?(y.updateQueue=m.updateQueue,y.flags&=-2053,m.lanes&=~k,yu(m,y,k)):(di&&w&&pC(y),y.flags|=1,ga(m,y,N,k),y.child)}function a5(m,y,w,N,k){if(m===null){var L=w.type;return typeof L=="function"&&!l2(L)&&L.defaultProps===void 0&&w.compare===null&&w.defaultProps===void 0?(y.tag=15,y.type=L,o5(m,y,L,N,k)):(m=kw(w.type,null,N,y,y.mode,k),m.ref=y.ref,m.return=y,y.child=m)}if(L=m.child,(m.lanes&k)===0){var K=L.memoizedProps;if(w=w.compare,w=w!==null?w:M0,w(K,N)&&m.ref===y.ref)return yu(m,y,k)}return y.flags|=1,m=Hh(L,N),m.ref=y.ref,m.return=y,y.child=m}function o5(m,y,w,N,k){if(m!==null){var L=m.memoizedProps;if(M0(L,N)&&m.ref===y.ref)if(ja=!1,y.pendingProps=N=L,(m.lanes&k)!==0)(m.flags&131072)!==0&&(ja=!0);else return y.lanes=m.lanes,yu(m,y,k)}return zC(m,y,w,N,k)}function l5(m,y,w){var N=y.pendingProps,k=N.children,L=m!==null?m.memoizedState:null;if(N.mode==="hidden")if((y.mode&1)===0)y.memoizedState={baseLanes:0,cachePool:null,transitions:null},Zr(pm,po),po|=w;else{if((w&1073741824)===0)return m=L!==null?L.baseLanes|w:w,y.lanes=y.childLanes=1073741824,y.memoizedState={baseLanes:m,cachePool:null,transitions:null},y.updateQueue=null,Zr(pm,po),po|=m,null;y.memoizedState={baseLanes:0,cachePool:null,transitions:null},N=L!==null?L.baseLanes:w,Zr(pm,po),po|=N}else L!==null?(N=L.baseLanes|w,y.memoizedState=null):N=w,Zr(pm,po),po|=N;return ga(m,y,k,w),y.child}function c5(m,y){var w=y.ref;(m===null&&w!==null||m!==null&&m.ref!==w)&&(y.flags|=512,y.flags|=2097152)}function zC(m,y,w,N,k){var L=Ba(w)?pf:Xs.current;return L=im(y,L),um(y,k),w=RC(m,y,w,N,L,k),N=OC(),m!==null&&!ja?(y.updateQueue=m.updateQueue,y.flags&=-2053,m.lanes&=~k,yu(m,y,k)):(di&&N&&pC(y),y.flags|=1,ga(m,y,w,k),y.child)}function u5(m,y,w,N,k){if(Ba(w)){var L=!0;iw(y)}else L=!1;if(um(y,k),y.stateNode===null)ww(m,y),Q4(y,w,N),BC(y,w,N,k),N=!0;else if(m===null){var K=y.stateNode,ge=y.memoizedProps;K.props=ge;var _e=K.context,Be=w.contextType;typeof Be=="object"&&Be!==null?Be=Vo(Be):(Be=Ba(w)?pf:Xs.current,Be=im(y,Be));var it=w.getDerivedStateFromProps,lt=typeof it=="function"||typeof K.getSnapshotBeforeUpdate=="function";lt||typeof K.UNSAFE_componentWillReceiveProps!="function"&&typeof K.componentWillReceiveProps!="function"||(ge!==N||_e!==Be)&&J4(y,K,N,Be),Bh=!1;var nt=y.memoizedState;K.state=nt,fw(y,N,K,k),_e=y.memoizedState,ge!==N||nt!==_e||Fa.current||Bh?(typeof it=="function"&&(FC(y,w,it,N),_e=y.memoizedState),(ge=Bh||Z4(y,w,ge,N,nt,_e,Be))?(lt||typeof K.UNSAFE_componentWillMount!="function"&&typeof K.componentWillMount!="function"||(typeof K.componentWillMount=="function"&&K.componentWillMount(),typeof K.UNSAFE_componentWillMount=="function"&&K.UNSAFE_componentWillMount()),typeof K.componentDidMount=="function"&&(y.flags|=4194308)):(typeof K.componentDidMount=="function"&&(y.flags|=4194308),y.memoizedProps=N,y.memoizedState=_e),K.props=N,K.state=_e,K.context=Be,N=ge):(typeof K.componentDidMount=="function"&&(y.flags|=4194308),N=!1)}else{K=y.stateNode,M4(m,y),ge=y.memoizedProps,Be=y.type===y.elementType?ge:El(y.type,ge),K.props=Be,lt=y.pendingProps,nt=K.context,_e=w.contextType,typeof _e=="object"&&_e!==null?_e=Vo(_e):(_e=Ba(w)?pf:Xs.current,_e=im(y,_e));var Ut=w.getDerivedStateFromProps;(it=typeof Ut=="function"||typeof K.getSnapshotBeforeUpdate=="function")||typeof K.UNSAFE_componentWillReceiveProps!="function"&&typeof K.componentWillReceiveProps!="function"||(ge!==lt||nt!==_e)&&J4(y,K,N,_e),Bh=!1,nt=y.memoizedState,K.state=nt,fw(y,N,K,k);var Yt=y.memoizedState;ge!==lt||nt!==Yt||Fa.current||Bh?(typeof Ut=="function"&&(FC(y,w,Ut,N),Yt=y.memoizedState),(Be=Bh||Z4(y,w,Be,N,nt,Yt,_e)||!1)?(it||typeof K.UNSAFE_componentWillUpdate!="function"&&typeof K.componentWillUpdate!="function"||(typeof K.componentWillUpdate=="function"&&K.componentWillUpdate(N,Yt,_e),typeof K.UNSAFE_componentWillUpdate=="function"&&K.UNSAFE_componentWillUpdate(N,Yt,_e)),typeof K.componentDidUpdate=="function"&&(y.flags|=4),typeof K.getSnapshotBeforeUpdate=="function"&&(y.flags|=1024)):(typeof K.componentDidUpdate!="function"||ge===m.memoizedProps&&nt===m.memoizedState||(y.flags|=4),typeof K.getSnapshotBeforeUpdate!="function"||ge===m.memoizedProps&&nt===m.memoizedState||(y.flags|=1024),y.memoizedProps=N,y.memoizedState=Yt),K.props=N,K.state=Yt,K.context=_e,N=Be):(typeof K.componentDidUpdate!="function"||ge===m.memoizedProps&&nt===m.memoizedState||(y.flags|=4),typeof K.getSnapshotBeforeUpdate!="function"||ge===m.memoizedProps&&nt===m.memoizedState||(y.flags|=1024),N=!1)}return $C(m,y,w,N,L,k)}function $C(m,y,w,N,k,L){c5(m,y);var K=(y.flags&128)!==0;if(!N&&!K)return k&&m4(y,w,!1),yu(m,y,L);N=y.stateNode,Vle.current=y;var ge=K&&typeof w.getDerivedStateFromError!="function"?null:N.render();return y.flags|=1,m!==null&&K?(y.child=lm(y,m.child,null,L),y.child=lm(y,null,ge,L)):ga(m,y,ge,L),y.memoizedState=N.state,k&&m4(y,w,!0),y.child}function h5(m){var y=m.stateNode;y.pendingContext?f4(m,y.pendingContext,y.pendingContext!==y.context):y.context&&f4(m,y.context,!1),EC(m,y.containerInfo)}function d5(m,y,w,N,k){return om(),vC(k),y.flags|=256,ga(m,y,w,N),y.child}var GC={dehydrated:null,treeContext:null,retryLane:0};function VC(m){return{baseLanes:m,cachePool:null,transitions:null}}function f5(m,y,w){var N=y.pendingProps,k=bi.current,L=!1,K=(y.flags&128)!==0,ge;if((ge=K)||(ge=m!==null&&m.memoizedState===null?!1:(k&2)!==0),ge?(L=!0,y.flags&=-129):(m===null||m.memoizedState!==null)&&(k|=1),Zr(bi,k&1),m===null)return yC(y),m=y.memoizedState,m!==null&&(m=m.dehydrated,m!==null)?((y.mode&1)===0?y.lanes=1:m.data==="$!"?y.lanes=8:y.lanes=1073741824,null):(K=N.children,m=N.fallback,L?(N=y.mode,L=y.child,K={mode:"hidden",children:K},(N&1)===0&&L!==null?(L.childLanes=0,L.pendingProps=K):L=Iw(K,N,0,null),m=Tf(m,N,w,null),L.return=y,m.return=y,L.sibling=m,y.child=L,y.child.memoizedState=VC(w),y.memoizedState=GC,m):HC(y,K));if(k=m.memoizedState,k!==null&&(ge=k.dehydrated,ge!==null))return Hle(m,y,K,N,ge,k,w);if(L){L=N.fallback,K=y.mode,k=m.child,ge=k.sibling;var _e={mode:"hidden",children:N.children};return(K&1)===0&&y.child!==k?(N=y.child,N.childLanes=0,N.pendingProps=_e,y.deletions=null):(N=Hh(k,_e),N.subtreeFlags=k.subtreeFlags&14680064),ge!==null?L=Hh(ge,L):(L=Tf(L,K,w,null),L.flags|=2),L.return=y,N.return=y,N.sibling=L,y.child=N,N=L,L=y.child,K=m.child.memoizedState,K=K===null?VC(w):{baseLanes:K.baseLanes|w,cachePool:null,transitions:K.transitions},L.memoizedState=K,L.childLanes=m.childLanes&~w,y.memoizedState=GC,N}return L=m.child,m=L.sibling,N=Hh(L,{mode:"visible",children:N.children}),(y.mode&1)===0&&(N.lanes=w),N.return=y,N.sibling=null,m!==null&&(w=y.deletions,w===null?(y.deletions=[m],y.flags|=16):w.push(m)),y.child=N,y.memoizedState=null,N}function HC(m,y){return y=Iw({mode:"visible",children:y},m.mode,0,null),y.return=m,m.child=y}function _w(m,y,w,N){return N!==null&&vC(N),lm(y,m.child,null,w),m=HC(y,y.pendingProps.children),m.flags|=2,y.memoizedState=null,m}function Hle(m,y,w,N,k,L,K){if(w)return y.flags&256?(y.flags&=-257,N=jC(Error(n(422))),_w(m,y,K,N)):y.memoizedState!==null?(y.child=m.child,y.flags|=128,null):(L=N.fallback,k=y.mode,N=Iw({mode:"visible",children:N.children},k,0,null),L=Tf(L,k,K,null),L.flags|=2,N.return=y,L.return=y,N.sibling=L,y.child=N,(y.mode&1)!==0&&lm(y,m.child,null,K),y.child.memoizedState=VC(K),y.memoizedState=GC,L);if((y.mode&1)===0)return _w(m,y,K,null);if(k.data==="$!"){if(N=k.nextSibling&&k.nextSibling.dataset,N)var ge=N.dgst;return N=ge,L=Error(n(419)),N=jC(L,N,void 0),_w(m,y,K,N)}if(ge=(K&m.childLanes)!==0,ja||ge){if(N=ws,N!==null){switch(K&-K){case 4:k=2;break;case 16:k=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:k=32;break;case 536870912:k=268435456;break;default:k=0}k=(k&(N.suspendedLanes|K))!==0?0:k,k!==0&&k!==L.retryLane&&(L.retryLane=k,mu(m,k),Cl(N,m,k,-1))}return o2(),N=jC(Error(n(421))),_w(m,y,K,N)}return k.data==="$?"?(y.flags|=128,y.child=m.child,y=ice.bind(null,m),k._reactRetry=y,null):(m=L.treeContext,fo=Ih(k.nextSibling),ho=y,di=!0,Tl=null,m!==null&&($o[Go++]=fu,$o[Go++]=pu,$o[Go++]=mf,fu=m.id,pu=m.overflow,mf=y),y=HC(y,N.children),y.flags|=4096,y)}function p5(m,y,w){m.lanes|=y;var N=m.alternate;N!==null&&(N.lanes|=y),wC(m.return,y,w)}function WC(m,y,w,N,k){var L=m.memoizedState;L===null?m.memoizedState={isBackwards:y,rendering:null,renderingStartTime:0,last:N,tail:w,tailMode:k}:(L.isBackwards=y,L.rendering=null,L.renderingStartTime=0,L.last=N,L.tail=w,L.tailMode=k)}function m5(m,y,w){var N=y.pendingProps,k=N.revealOrder,L=N.tail;if(ga(m,y,N.children,w),N=bi.current,(N&2)!==0)N=N&1|2,y.flags|=128;else{if(m!==null&&(m.flags&128)!==0)e:for(m=y.child;m!==null;){if(m.tag===13)m.memoizedState!==null&&p5(m,w,y);else if(m.tag===19)p5(m,w,y);else if(m.child!==null){m.child.return=m,m=m.child;continue}if(m===y)break e;for(;m.sibling===null;){if(m.return===null||m.return===y)break e;m=m.return}m.sibling.return=m.return,m=m.sibling}N&=1}if(Zr(bi,N),(y.mode&1)===0)y.memoizedState=null;else switch(k){case"forwards":for(w=y.child,k=null;w!==null;)m=w.alternate,m!==null&&pw(m)===null&&(k=w),w=w.sibling;w=k,w===null?(k=y.child,y.child=null):(k=w.sibling,w.sibling=null),WC(y,!1,k,w,L);break;case"backwards":for(w=null,k=y.child,y.child=null;k!==null;){if(m=k.alternate,m!==null&&pw(m)===null){y.child=k;break}m=k.sibling,k.sibling=w,w=k,k=m}WC(y,!0,w,null,L);break;case"together":WC(y,!1,null,null,void 0);break;default:y.memoizedState=null}return y.child}function ww(m,y){(y.mode&1)===0&&m!==null&&(m.alternate=null,y.alternate=null,y.flags|=2)}function yu(m,y,w){if(m!==null&&(y.dependencies=m.dependencies),bf|=y.lanes,(w&y.childLanes)===0)return null;if(m!==null&&y.child!==m.child)throw Error(n(153));if(y.child!==null){for(m=y.child,w=Hh(m,m.pendingProps),y.child=w,w.return=y;m.sibling!==null;)m=m.sibling,w=w.sibling=Hh(m,m.pendingProps),w.return=y;w.sibling=null}return y.child}function Wle(m,y,w){switch(y.tag){case 3:h5(y),om();break;case 5:N4(y);break;case 1:Ba(y.type)&&iw(y);break;case 4:EC(y,y.stateNode.containerInfo);break;case 10:var N=y.type._context,k=y.memoizedProps.value;Zr(uw,N._currentValue),N._currentValue=k;break;case 13:if(N=y.memoizedState,N!==null)return N.dehydrated!==null?(Zr(bi,bi.current&1),y.flags|=128,null):(w&y.child.childLanes)!==0?f5(m,y,w):(Zr(bi,bi.current&1),m=yu(m,y,w),m!==null?m.sibling:null);Zr(bi,bi.current&1);break;case 19:if(N=(w&y.childLanes)!==0,(m.flags&128)!==0){if(N)return m5(m,y,w);y.flags|=128}if(k=y.memoizedState,k!==null&&(k.rendering=null,k.tail=null,k.lastEffect=null),Zr(bi,bi.current),N)break;return null;case 22:case 23:return y.lanes=0,l5(m,y,w)}return yu(m,y,w)}var g5,qC,y5,v5;g5=function(m,y){for(var w=y.child;w!==null;){if(w.tag===5||w.tag===6)m.appendChild(w.stateNode);else if(w.tag!==4&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===y)break;for(;w.sibling===null;){if(w.return===null||w.return===y)return;w=w.return}w.sibling.return=w.return,w=w.sibling}},qC=function(){},y5=function(m,y,w,N){var k=m.memoizedProps;if(k!==N){m=y.stateNode,vf(vc.current);var L=null;switch(w){case"input":k=me(m,k),N=me(m,N),L=[];break;case"select":k=se({},k,{value:void 0}),N=se({},N,{value:void 0}),L=[];break;case"textarea":k=Q(m,k),N=Q(m,N),L=[];break;default:typeof k.onClick!="function"&&typeof N.onClick=="function"&&(m.onclick=tw)}Hn(w,N);var K;w=null;for(Be in k)if(!N.hasOwnProperty(Be)&&k.hasOwnProperty(Be)&&k[Be]!=null)if(Be==="style"){var ge=k[Be];for(K in ge)ge.hasOwnProperty(K)&&(w||(w={}),w[K]="")}else Be!=="dangerouslySetInnerHTML"&&Be!=="children"&&Be!=="suppressContentEditableWarning"&&Be!=="suppressHydrationWarning"&&Be!=="autoFocus"&&(s.hasOwnProperty(Be)?L||(L=[]):(L=L||[]).push(Be,null));for(Be in N){var _e=N[Be];if(ge=k!=null?k[Be]:void 0,N.hasOwnProperty(Be)&&_e!==ge&&(_e!=null||ge!=null))if(Be==="style")if(ge){for(K in ge)!ge.hasOwnProperty(K)||_e&&_e.hasOwnProperty(K)||(w||(w={}),w[K]="");for(K in _e)_e.hasOwnProperty(K)&&ge[K]!==_e[K]&&(w||(w={}),w[K]=_e[K])}else w||(L||(L=[]),L.push(Be,w)),w=_e;else Be==="dangerouslySetInnerHTML"?(_e=_e?_e.__html:void 0,ge=ge?ge.__html:void 0,_e!=null&&ge!==_e&&(L=L||[]).push(Be,_e)):Be==="children"?typeof _e!="string"&&typeof _e!="number"||(L=L||[]).push(Be,""+_e):Be!=="suppressContentEditableWarning"&&Be!=="suppressHydrationWarning"&&(s.hasOwnProperty(Be)?(_e!=null&&Be==="onScroll"&&ti("scroll",m),L||ge===_e||(L=[])):(L=L||[]).push(Be,_e))}w&&(L=L||[]).push("style",w);var Be=L;(y.updateQueue=Be)&&(y.flags|=4)}},v5=function(m,y,w,N){w!==N&&(y.flags|=4)};function z0(m,y){if(!di)switch(m.tailMode){case"hidden":y=m.tail;for(var w=null;y!==null;)y.alternate!==null&&(w=y),y=y.sibling;w===null?m.tail=null:w.sibling=null;break;case"collapsed":w=m.tail;for(var N=null;w!==null;)w.alternate!==null&&(N=w),w=w.sibling;N===null?y||m.tail===null?m.tail=null:m.tail.sibling=null:N.sibling=null}}function Ys(m){var y=m.alternate!==null&&m.alternate.child===m.child,w=0,N=0;if(y)for(var k=m.child;k!==null;)w|=k.lanes|k.childLanes,N|=k.subtreeFlags&14680064,N|=k.flags&14680064,k.return=m,k=k.sibling;else for(k=m.child;k!==null;)w|=k.lanes|k.childLanes,N|=k.subtreeFlags,N|=k.flags,k.return=m,k=k.sibling;return m.subtreeFlags|=N,m.childLanes=w,y}function qle(m,y,w){var N=y.pendingProps;switch(mC(y),y.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ys(y),null;case 1:return Ba(y.type)&&rw(),Ys(y),null;case 3:return N=y.stateNode,hm(),ni(Fa),ni(Xs),CC(),N.pendingContext&&(N.context=N.pendingContext,N.pendingContext=null),(m===null||m.child===null)&&(lw(y)?y.flags|=4:m===null||m.memoizedState.isDehydrated&&(y.flags&256)===0||(y.flags|=1024,Tl!==null&&(i2(Tl),Tl=null))),qC(m,y),Ys(y),null;case 5:MC(y);var k=vf(L0.current);if(w=y.type,m!==null&&y.stateNode!=null)y5(m,y,w,N,k),m.ref!==y.ref&&(y.flags|=512,y.flags|=2097152);else{if(!N){if(y.stateNode===null)throw Error(n(166));return Ys(y),null}if(m=vf(vc.current),lw(y)){N=y.stateNode,w=y.type;var L=y.memoizedProps;switch(N[yc]=y,N[R0]=L,m=(y.mode&1)!==0,w){case"dialog":ti("cancel",N),ti("close",N);break;case"iframe":case"object":case"embed":ti("load",N);break;case"video":case"audio":for(k=0;k<C0.length;k++)ti(C0[k],N);break;case"source":ti("error",N);break;case"img":case"image":case"link":ti("error",N),ti("load",N);break;case"details":ti("toggle",N);break;case"input":En(N,L),ti("invalid",N);break;case"select":N._wrapperState={wasMultiple:!!L.multiple},ti("invalid",N);break;case"textarea":Re(N,L),ti("invalid",N)}Hn(w,L),k=null;for(var K in L)if(L.hasOwnProperty(K)){var ge=L[K];K==="children"?typeof ge=="string"?N.textContent!==ge&&(L.suppressHydrationWarning!==!0&&ew(N.textContent,ge,m),k=["children",ge]):typeof ge=="number"&&N.textContent!==""+ge&&(L.suppressHydrationWarning!==!0&&ew(N.textContent,ge,m),k=["children",""+ge]):s.hasOwnProperty(K)&&ge!=null&&K==="onScroll"&&ti("scroll",N)}switch(w){case"input":et(N),zt(N,L,!0);break;case"textarea":et(N),Je(N);break;case"select":case"option":break;default:typeof L.onClick=="function"&&(N.onclick=tw)}N=k,y.updateQueue=N,N!==null&&(y.flags|=4)}else{K=k.nodeType===9?k:k.ownerDocument,m==="http://www.w3.org/1999/xhtml"&&(m=Ke(w)),m==="http://www.w3.org/1999/xhtml"?w==="script"?(m=K.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild)):typeof N.is=="string"?m=K.createElement(w,{is:N.is}):(m=K.createElement(w),w==="select"&&(K=m,N.multiple?K.multiple=!0:N.size&&(K.size=N.size))):m=K.createElementNS(m,w),m[yc]=y,m[R0]=N,g5(m,y,!1,!1),y.stateNode=m;e:{switch(K=Nn(w,N),w){case"dialog":ti("cancel",m),ti("close",m),k=N;break;case"iframe":case"object":case"embed":ti("load",m),k=N;break;case"video":case"audio":for(k=0;k<C0.length;k++)ti(C0[k],m);k=N;break;case"source":ti("error",m),k=N;break;case"img":case"image":case"link":ti("error",m),ti("load",m),k=N;break;case"details":ti("toggle",m),k=N;break;case"input":En(m,N),k=me(m,N),ti("invalid",m);break;case"option":k=N;break;case"select":m._wrapperState={wasMultiple:!!N.multiple},k=se({},N,{value:void 0}),ti("invalid",m);break;case"textarea":Re(m,N),k=Q(m,N),ti("invalid",m);break;default:k=N}Hn(w,k),ge=k;for(L in ge)if(ge.hasOwnProperty(L)){var _e=ge[L];L==="style"?vn(m,_e):L==="dangerouslySetInnerHTML"?(_e=_e?_e.__html:void 0,_e!=null&&Dt(m,_e)):L==="children"?typeof _e=="string"?(w!=="textarea"||_e!=="")&&Vn(m,_e):typeof _e=="number"&&Vn(m,""+_e):L!=="suppressContentEditableWarning"&&L!=="suppressHydrationWarning"&&L!=="autoFocus"&&(s.hasOwnProperty(L)?_e!=null&&L==="onScroll"&&ti("scroll",m):_e!=null&&S(m,L,_e,K))}switch(w){case"input":et(m),zt(m,N,!1);break;case"textarea":et(m),Je(m);break;case"option":N.value!=null&&m.setAttribute("value",""+Se(N.value));break;case"select":m.multiple=!!N.multiple,L=N.value,L!=null?he(m,!!N.multiple,L,!1):N.defaultValue!=null&&he(m,!!N.multiple,N.defaultValue,!0);break;default:typeof k.onClick=="function"&&(m.onclick=tw)}switch(w){case"button":case"input":case"select":case"textarea":N=!!N.autoFocus;break e;case"img":N=!0;break e;default:N=!1}}N&&(y.flags|=4)}y.ref!==null&&(y.flags|=512,y.flags|=2097152)}return Ys(y),null;case 6:if(m&&y.stateNode!=null)v5(m,y,m.memoizedProps,N);else{if(typeof N!="string"&&y.stateNode===null)throw Error(n(166));if(w=vf(L0.current),vf(vc.current),lw(y)){if(N=y.stateNode,w=y.memoizedProps,N[yc]=y,(L=N.nodeValue!==w)&&(m=ho,m!==null))switch(m.tag){case 3:ew(N.nodeValue,w,(m.mode&1)!==0);break;case 5:m.memoizedProps.suppressHydrationWarning!==!0&&ew(N.nodeValue,w,(m.mode&1)!==0)}L&&(y.flags|=4)}else N=(w.nodeType===9?w:w.ownerDocument).createTextNode(N),N[yc]=y,y.stateNode=N}return Ys(y),null;case 13:if(ni(bi),N=y.memoizedState,m===null||m.memoizedState!==null&&m.memoizedState.dehydrated!==null){if(di&&fo!==null&&(y.mode&1)!==0&&(y.flags&128)===0)_4(),om(),y.flags|=98560,L=!1;else if(L=lw(y),N!==null&&N.dehydrated!==null){if(m===null){if(!L)throw Error(n(318));if(L=y.memoizedState,L=L!==null?L.dehydrated:null,!L)throw Error(n(317));L[yc]=y}else om(),(y.flags&128)===0&&(y.memoizedState=null),y.flags|=4;Ys(y),L=!1}else Tl!==null&&(i2(Tl),Tl=null),L=!0;if(!L)return y.flags&65536?y:null}return(y.flags&128)!==0?(y.lanes=w,y):(N=N!==null,N!==(m!==null&&m.memoizedState!==null)&&N&&(y.child.flags|=8192,(y.mode&1)!==0&&(m===null||(bi.current&1)!==0?ls===0&&(ls=3):o2())),y.updateQueue!==null&&(y.flags|=4),Ys(y),null);case 4:return hm(),qC(m,y),m===null&&N0(y.stateNode.containerInfo),Ys(y),null;case 10:return _C(y.type._context),Ys(y),null;case 17:return Ba(y.type)&&rw(),Ys(y),null;case 19:if(ni(bi),L=y.memoizedState,L===null)return Ys(y),null;if(N=(y.flags&128)!==0,K=L.rendering,K===null)if(N)z0(L,!1);else{if(ls!==0||m!==null&&(m.flags&128)!==0)for(m=y.child;m!==null;){if(K=pw(m),K!==null){for(y.flags|=128,z0(L,!1),N=K.updateQueue,N!==null&&(y.updateQueue=N,y.flags|=4),y.subtreeFlags=0,N=w,w=y.child;w!==null;)L=w,m=N,L.flags&=14680066,K=L.alternate,K===null?(L.childLanes=0,L.lanes=m,L.child=null,L.subtreeFlags=0,L.memoizedProps=null,L.memoizedState=null,L.updateQueue=null,L.dependencies=null,L.stateNode=null):(L.childLanes=K.childLanes,L.lanes=K.lanes,L.child=K.child,L.subtreeFlags=0,L.deletions=null,L.memoizedProps=K.memoizedProps,L.memoizedState=K.memoizedState,L.updateQueue=K.updateQueue,L.type=K.type,m=K.dependencies,L.dependencies=m===null?null:{lanes:m.lanes,firstContext:m.firstContext}),w=w.sibling;return Zr(bi,bi.current&1|2),y.child}m=m.sibling}L.tail!==null&&Ne()>mm&&(y.flags|=128,N=!0,z0(L,!1),y.lanes=4194304)}else{if(!N)if(m=pw(K),m!==null){if(y.flags|=128,N=!0,w=m.updateQueue,w!==null&&(y.updateQueue=w,y.flags|=4),z0(L,!0),L.tail===null&&L.tailMode==="hidden"&&!K.alternate&&!di)return Ys(y),null}else 2*Ne()-L.renderingStartTime>mm&&w!==1073741824&&(y.flags|=128,N=!0,z0(L,!1),y.lanes=4194304);L.isBackwards?(K.sibling=y.child,y.child=K):(w=L.last,w!==null?w.sibling=K:y.child=K,L.last=K)}return L.tail!==null?(y=L.tail,L.rendering=y,L.tail=y.sibling,L.renderingStartTime=Ne(),y.sibling=null,w=bi.current,Zr(bi,N?w&1|2:w&1),y):(Ys(y),null);case 22:case 23:return a2(),N=y.memoizedState!==null,m!==null&&m.memoizedState!==null!==N&&(y.flags|=8192),N&&(y.mode&1)!==0?(po&1073741824)!==0&&(Ys(y),y.subtreeFlags&6&&(y.flags|=8192)):Ys(y),null;case 24:return null;case 25:return null}throw Error(n(156,y.tag))}function Xle(m,y){switch(mC(y),y.tag){case 1:return Ba(y.type)&&rw(),m=y.flags,m&65536?(y.flags=m&-65537|128,y):null;case 3:return hm(),ni(Fa),ni(Xs),CC(),m=y.flags,(m&65536)!==0&&(m&128)===0?(y.flags=m&-65537|128,y):null;case 5:return MC(y),null;case 13:if(ni(bi),m=y.memoizedState,m!==null&&m.dehydrated!==null){if(y.alternate===null)throw Error(n(340));om()}return m=y.flags,m&65536?(y.flags=m&-65537|128,y):null;case 19:return ni(bi),null;case 4:return hm(),null;case 10:return _C(y.type._context),null;case 22:case 23:return a2(),null;case 24:return null;default:return null}}var Sw=!1,Zs=!1,Kle=typeof WeakSet=="function"?WeakSet:Set,qt=null;function fm(m,y){var w=m.ref;if(w!==null)if(typeof w=="function")try{w(null)}catch(N){Ai(m,y,N)}else w.current=null}function XC(m,y,w){try{w()}catch(N){Ai(m,y,N)}}var x5=!1;function Yle(m,y){if(aC=Da,m=Zz(),QA(m)){if("selectionStart"in m)var w={start:m.selectionStart,end:m.selectionEnd};else e:{w=(w=m.ownerDocument)&&w.defaultView||window;var N=w.getSelection&&w.getSelection();if(N&&N.rangeCount!==0){w=N.anchorNode;var k=N.anchorOffset,L=N.focusNode;N=N.focusOffset;try{w.nodeType,L.nodeType}catch{w=null;break e}var K=0,ge=-1,_e=-1,Be=0,it=0,lt=m,nt=null;t:for(;;){for(var Ut;lt!==w||k!==0&&lt.nodeType!==3||(ge=K+k),lt!==L||N!==0&&lt.nodeType!==3||(_e=K+N),lt.nodeType===3&&(K+=lt.nodeValue.length),(Ut=lt.firstChild)!==null;)nt=lt,lt=Ut;for(;;){if(lt===m)break t;if(nt===w&&++Be===k&&(ge=K),nt===L&&++it===N&&(_e=K),(Ut=lt.nextSibling)!==null)break;lt=nt,nt=lt.parentNode}lt=Ut}w=ge===-1||_e===-1?null:{start:ge,end:_e}}else w=null}w=w||{start:0,end:0}}else w=null;for(oC={focusedElem:m,selectionRange:w},Da=!1,qt=y;qt!==null;)if(y=qt,m=y.child,(y.subtreeFlags&1028)!==0&&m!==null)m.return=y,qt=m;else for(;qt!==null;){y=qt;try{var Yt=y.alternate;if((y.flags&1024)!==0)switch(y.tag){case 0:case 11:case 15:break;case 1:if(Yt!==null){var rn=Yt.memoizedProps,Fi=Yt.memoizedState,Pe=y.stateNode,Te=Pe.getSnapshotBeforeUpdate(y.elementType===y.type?rn:El(y.type,rn),Fi);Pe.__reactInternalSnapshotBeforeUpdate=Te}break;case 3:var ke=y.stateNode.containerInfo;ke.nodeType===1?ke.textContent="":ke.nodeType===9&&ke.documentElement&&ke.removeChild(ke.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(mt){Ai(y,y.return,mt)}if(m=y.sibling,m!==null){m.return=y.return,qt=m;break}qt=y.return}return Yt=x5,x5=!1,Yt}function $0(m,y,w){var N=y.updateQueue;if(N=N!==null?N.lastEffect:null,N!==null){var k=N=N.next;do{if((k.tag&m)===m){var L=k.destroy;k.destroy=void 0,L!==void 0&&XC(y,w,L)}k=k.next}while(k!==N)}}function Tw(m,y){if(y=y.updateQueue,y=y!==null?y.lastEffect:null,y!==null){var w=y=y.next;do{if((w.tag&m)===m){var N=w.create;w.destroy=N()}w=w.next}while(w!==y)}}function KC(m){var y=m.ref;if(y!==null){var w=m.stateNode;switch(m.tag){case 5:m=w;break;default:m=w}typeof y=="function"?y(m):y.current=m}}function b5(m){var y=m.alternate;y!==null&&(m.alternate=null,b5(y)),m.child=null,m.deletions=null,m.sibling=null,m.tag===5&&(y=m.stateNode,y!==null&&(delete y[yc],delete y[R0],delete y[hC],delete y[Ole],delete y[kle])),m.stateNode=null,m.return=null,m.dependencies=null,m.memoizedProps=null,m.memoizedState=null,m.pendingProps=null,m.stateNode=null,m.updateQueue=null}function _5(m){return m.tag===5||m.tag===3||m.tag===4}function w5(m){e:for(;;){for(;m.sibling===null;){if(m.return===null||_5(m.return))return null;m=m.return}for(m.sibling.return=m.return,m=m.sibling;m.tag!==5&&m.tag!==6&&m.tag!==18;){if(m.flags&2||m.child===null||m.tag===4)continue e;m.child.return=m,m=m.child}if(!(m.flags&2))return m.stateNode}}function YC(m,y,w){var N=m.tag;if(N===5||N===6)m=m.stateNode,y?w.nodeType===8?w.parentNode.insertBefore(m,y):w.insertBefore(m,y):(w.nodeType===8?(y=w.parentNode,y.insertBefore(m,w)):(y=w,y.appendChild(m)),w=w._reactRootContainer,w!=null||y.onclick!==null||(y.onclick=tw));else if(N!==4&&(m=m.child,m!==null))for(YC(m,y,w),m=m.sibling;m!==null;)YC(m,y,w),m=m.sibling}function ZC(m,y,w){var N=m.tag;if(N===5||N===6)m=m.stateNode,y?w.insertBefore(m,y):w.appendChild(m);else if(N!==4&&(m=m.child,m!==null))for(ZC(m,y,w),m=m.sibling;m!==null;)ZC(m,y,w),m=m.sibling}var js=null,Ml=!1;function Uh(m,y,w){for(w=w.child;w!==null;)S5(m,y,w),w=w.sibling}function S5(m,y,w){if(Gt&&typeof Gt.onCommitFiberUnmount=="function")try{Gt.onCommitFiberUnmount(hn,w)}catch{}switch(w.tag){case 5:Zs||fm(w,y);case 6:var N=js,k=Ml;js=null,Uh(m,y,w),js=N,Ml=k,js!==null&&(Ml?(m=js,w=w.stateNode,m.nodeType===8?m.parentNode.removeChild(w):m.removeChild(w)):js.removeChild(w.stateNode));break;case 18:js!==null&&(Ml?(m=js,w=w.stateNode,m.nodeType===8?uC(m.parentNode,w):m.nodeType===1&&uC(m,w),Ls(m)):uC(js,w.stateNode));break;case 4:N=js,k=Ml,js=w.stateNode.containerInfo,Ml=!0,Uh(m,y,w),js=N,Ml=k;break;case 0:case 11:case 14:case 15:if(!Zs&&(N=w.updateQueue,N!==null&&(N=N.lastEffect,N!==null))){k=N=N.next;do{var L=k,K=L.destroy;L=L.tag,K!==void 0&&((L&2)!==0||(L&4)!==0)&&XC(w,y,K),k=k.next}while(k!==N)}Uh(m,y,w);break;case 1:if(!Zs&&(fm(w,y),N=w.stateNode,typeof N.componentWillUnmount=="function"))try{N.props=w.memoizedProps,N.state=w.memoizedState,N.componentWillUnmount()}catch(ge){Ai(w,y,ge)}Uh(m,y,w);break;case 21:Uh(m,y,w);break;case 22:w.mode&1?(Zs=(N=Zs)||w.memoizedState!==null,Uh(m,y,w),Zs=N):Uh(m,y,w);break;default:Uh(m,y,w)}}function T5(m){var y=m.updateQueue;if(y!==null){m.updateQueue=null;var w=m.stateNode;w===null&&(w=m.stateNode=new Kle),y.forEach(function(N){var k=sce.bind(null,m,N);w.has(N)||(w.add(N),N.then(k,k))})}}function Al(m,y){var w=y.deletions;if(w!==null)for(var N=0;N<w.length;N++){var k=w[N];try{var L=m,K=y,ge=K;e:for(;ge!==null;){switch(ge.tag){case 5:js=ge.stateNode,Ml=!1;break e;case 3:js=ge.stateNode.containerInfo,Ml=!0;break e;case 4:js=ge.stateNode.containerInfo,Ml=!0;break e}ge=ge.return}if(js===null)throw Error(n(160));S5(L,K,k),js=null,Ml=!1;var _e=k.alternate;_e!==null&&(_e.return=null),k.return=null}catch(Be){Ai(k,y,Be)}}if(y.subtreeFlags&12854)for(y=y.child;y!==null;)E5(y,m),y=y.sibling}function E5(m,y){var w=m.alternate,N=m.flags;switch(m.tag){case 0:case 11:case 14:case 15:if(Al(y,m),bc(m),N&4){try{$0(3,m,m.return),Tw(3,m)}catch(rn){Ai(m,m.return,rn)}try{$0(5,m,m.return)}catch(rn){Ai(m,m.return,rn)}}break;case 1:Al(y,m),bc(m),N&512&&w!==null&&fm(w,w.return);break;case 5:if(Al(y,m),bc(m),N&512&&w!==null&&fm(w,w.return),m.flags&32){var k=m.stateNode;try{Vn(k,"")}catch(rn){Ai(m,m.return,rn)}}if(N&4&&(k=m.stateNode,k!=null)){var L=m.memoizedProps,K=w!==null?w.memoizedProps:L,ge=m.type,_e=m.updateQueue;if(m.updateQueue=null,_e!==null)try{ge==="input"&&L.type==="radio"&&L.name!=null&&Wt(k,L),Nn(ge,K);var Be=Nn(ge,L);for(K=0;K<_e.length;K+=2){var it=_e[K],lt=_e[K+1];it==="style"?vn(k,lt):it==="dangerouslySetInnerHTML"?Dt(k,lt):it==="children"?Vn(k,lt):S(k,it,lt,Be)}switch(ge){case"input":Jt(k,L);break;case"textarea":Ze(k,L);break;case"select":var nt=k._wrapperState.wasMultiple;k._wrapperState.wasMultiple=!!L.multiple;var Ut=L.value;Ut!=null?he(k,!!L.multiple,Ut,!1):nt!==!!L.multiple&&(L.defaultValue!=null?he(k,!!L.multiple,L.defaultValue,!0):he(k,!!L.multiple,L.multiple?[]:"",!1))}k[R0]=L}catch(rn){Ai(m,m.return,rn)}}break;case 6:if(Al(y,m),bc(m),N&4){if(m.stateNode===null)throw Error(n(162));k=m.stateNode,L=m.memoizedProps;try{k.nodeValue=L}catch(rn){Ai(m,m.return,rn)}}break;case 3:if(Al(y,m),bc(m),N&4&&w!==null&&w.memoizedState.isDehydrated)try{Ls(y.containerInfo)}catch(rn){Ai(m,m.return,rn)}break;case 4:Al(y,m),bc(m);break;case 13:Al(y,m),bc(m),k=m.child,k.flags&8192&&(L=k.memoizedState!==null,k.stateNode.isHidden=L,!L||k.alternate!==null&&k.alternate.memoizedState!==null||(e2=Ne())),N&4&&T5(m);break;case 22:if(it=w!==null&&w.memoizedState!==null,m.mode&1?(Zs=(Be=Zs)||it,Al(y,m),Zs=Be):Al(y,m),bc(m),N&8192){if(Be=m.memoizedState!==null,(m.stateNode.isHidden=Be)&&!it&&(m.mode&1)!==0)for(qt=m,it=m.child;it!==null;){for(lt=qt=it;qt!==null;){switch(nt=qt,Ut=nt.child,nt.tag){case 0:case 11:case 14:case 15:$0(4,nt,nt.return);break;case 1:fm(nt,nt.return);var Yt=nt.stateNode;if(typeof Yt.componentWillUnmount=="function"){N=nt,w=nt.return;try{y=N,Yt.props=y.memoizedProps,Yt.state=y.memoizedState,Yt.componentWillUnmount()}catch(rn){Ai(N,w,rn)}}break;case 5:fm(nt,nt.return);break;case 22:if(nt.memoizedState!==null){C5(lt);continue}}Ut!==null?(Ut.return=nt,qt=Ut):C5(lt)}it=it.sibling}e:for(it=null,lt=m;;){if(lt.tag===5){if(it===null){it=lt;try{k=lt.stateNode,Be?(L=k.style,typeof L.setProperty=="function"?L.setProperty("display","none","important"):L.display="none"):(ge=lt.stateNode,_e=lt.memoizedProps.style,K=_e!=null&&_e.hasOwnProperty("display")?_e.display:null,ge.style.display=fn("display",K))}catch(rn){Ai(m,m.return,rn)}}}else if(lt.tag===6){if(it===null)try{lt.stateNode.nodeValue=Be?"":lt.memoizedProps}catch(rn){Ai(m,m.return,rn)}}else if((lt.tag!==22&&lt.tag!==23||lt.memoizedState===null||lt===m)&&lt.child!==null){lt.child.return=lt,lt=lt.child;continue}if(lt===m)break e;for(;lt.sibling===null;){if(lt.return===null||lt.return===m)break e;it===lt&&(it=null),lt=lt.return}it===lt&&(it=null),lt.sibling.return=lt.return,lt=lt.sibling}}break;case 19:Al(y,m),bc(m),N&4&&T5(m);break;case 21:break;default:Al(y,m),bc(m)}}function bc(m){var y=m.flags;if(y&2){try{e:{for(var w=m.return;w!==null;){if(_5(w)){var N=w;break e}w=w.return}throw Error(n(160))}switch(N.tag){case 5:var k=N.stateNode;N.flags&32&&(Vn(k,""),N.flags&=-33);var L=w5(m);ZC(m,L,k);break;case 3:case 4:var K=N.stateNode.containerInfo,ge=w5(m);YC(m,ge,K);break;default:throw Error(n(161))}}catch(_e){Ai(m,m.return,_e)}m.flags&=-3}y&4096&&(m.flags&=-4097)}function Zle(m,y,w){qt=m,M5(m)}function M5(m,y,w){for(var N=(m.mode&1)!==0;qt!==null;){var k=qt,L=k.child;if(k.tag===22&&N){var K=k.memoizedState!==null||Sw;if(!K){var ge=k.alternate,_e=ge!==null&&ge.memoizedState!==null||Zs;ge=Sw;var Be=Zs;if(Sw=K,(Zs=_e)&&!Be)for(qt=k;qt!==null;)K=qt,_e=K.child,K.tag===22&&K.memoizedState!==null?N5(k):_e!==null?(_e.return=K,qt=_e):N5(k);for(;L!==null;)qt=L,M5(L),L=L.sibling;qt=k,Sw=ge,Zs=Be}A5(m)}else(k.subtreeFlags&8772)!==0&&L!==null?(L.return=k,qt=L):A5(m)}}function A5(m){for(;qt!==null;){var y=qt;if((y.flags&8772)!==0){var w=y.alternate;try{if((y.flags&8772)!==0)switch(y.tag){case 0:case 11:case 15:Zs||Tw(5,y);break;case 1:var N=y.stateNode;if(y.flags&4&&!Zs)if(w===null)N.componentDidMount();else{var k=y.elementType===y.type?w.memoizedProps:El(y.type,w.memoizedProps);N.componentDidUpdate(k,w.memoizedState,N.__reactInternalSnapshotBeforeUpdate)}var L=y.updateQueue;L!==null&&C4(y,L,N);break;case 3:var K=y.updateQueue;if(K!==null){if(w=null,y.child!==null)switch(y.child.tag){case 5:w=y.child.stateNode;break;case 1:w=y.child.stateNode}C4(y,K,w)}break;case 5:var ge=y.stateNode;if(w===null&&y.flags&4){w=ge;var _e=y.memoizedProps;switch(y.type){case"button":case"input":case"select":case"textarea":_e.autoFocus&&w.focus();break;case"img":_e.src&&(w.src=_e.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(y.memoizedState===null){var Be=y.alternate;if(Be!==null){var it=Be.memoizedState;if(it!==null){var lt=it.dehydrated;lt!==null&&Ls(lt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}Zs||y.flags&512&&KC(y)}catch(nt){Ai(y,y.return,nt)}}if(y===m){qt=null;break}if(w=y.sibling,w!==null){w.return=y.return,qt=w;break}qt=y.return}}function C5(m){for(;qt!==null;){var y=qt;if(y===m){qt=null;break}var w=y.sibling;if(w!==null){w.return=y.return,qt=w;break}qt=y.return}}function N5(m){for(;qt!==null;){var y=qt;try{switch(y.tag){case 0:case 11:case 15:var w=y.return;try{Tw(4,y)}catch(_e){Ai(y,w,_e)}break;case 1:var N=y.stateNode;if(typeof N.componentDidMount=="function"){var k=y.return;try{N.componentDidMount()}catch(_e){Ai(y,k,_e)}}var L=y.return;try{KC(y)}catch(_e){Ai(y,L,_e)}break;case 5:var K=y.return;try{KC(y)}catch(_e){Ai(y,K,_e)}}}catch(_e){Ai(y,y.return,_e)}if(y===m){qt=null;break}var ge=y.sibling;if(ge!==null){ge.return=y.return,qt=ge;break}qt=y.return}}var Qle=Math.ceil,Ew=T.ReactCurrentDispatcher,QC=T.ReactCurrentOwner,Wo=T.ReactCurrentBatchConfig,vr=0,ws=null,qi=null,Us=0,po=0,pm=Dh(0),ls=0,G0=null,bf=0,Mw=0,JC=0,V0=null,Ua=null,e2=0,mm=1/0,vu=null,Aw=!1,t2=null,zh=null,Cw=!1,$h=null,Nw=0,H0=0,n2=null,Pw=-1,Rw=0;function ya(){return(vr&6)!==0?Ne():Pw!==-1?Pw:Pw=Ne()}function Gh(m){return(m.mode&1)===0?1:(vr&2)!==0&&Us!==0?Us&-Us:Dle.transition!==null?(Rw===0&&(Rw=wr()),Rw):(m=ir,m!==0||(m=window.event,m=m===void 0?16:I(m.type)),m)}function Cl(m,y,w,N){if(50<H0)throw H0=0,n2=null,Error(n(185));ci(m,w,N),((vr&2)===0||m!==ws)&&(m===ws&&((vr&2)===0&&(Mw|=w),ls===4&&Vh(m,Us)),za(m,N),w===1&&vr===0&&(y.mode&1)===0&&(mm=Ne()+500,sw&&Fh()))}function za(m,y){var w=m.callbackNode;Di(m,y);var N=Ii(m,m===ws?Us:0);if(N===0)w!==null&&re(w),m.callbackNode=null,m.callbackPriority=0;else if(y=N&-N,m.callbackPriority!==y){if(w!=null&&re(w),y===1)m.tag===0?Ile(R5.bind(null,m)):g4(R5.bind(null,m)),Ple(function(){(vr&6)===0&&Fh()}),w=null;else{switch(ma(N)){case 1:w=st;break;case 4:w=At;break;case 16:w=kt;break;case 536870912:w=xn;break;default:w=kt}w=j5(w,P5.bind(null,m))}m.callbackPriority=y,m.callbackNode=w}}function P5(m,y){if(Pw=-1,Rw=0,(vr&6)!==0)throw Error(n(327));var w=m.callbackNode;if(gm()&&m.callbackNode!==w)return null;var N=Ii(m,m===ws?Us:0);if(N===0)return null;if((N&30)!==0||(N&m.expiredLanes)!==0||y)y=Ow(m,N);else{y=N;var k=vr;vr|=2;var L=k5();(ws!==m||Us!==y)&&(vu=null,mm=Ne()+500,wf(m,y));do try{tce();break}catch(ge){O5(m,ge)}while(!0);bC(),Ew.current=L,vr=k,qi!==null?y=0:(ws=null,Us=0,y=ls)}if(y!==0){if(y===2&&(k=uo(m),k!==0&&(N=k,y=r2(m,k))),y===1)throw w=G0,wf(m,0),Vh(m,N),za(m,Ne()),w;if(y===6)Vh(m,N);else{if(k=m.current.alternate,(N&30)===0&&!Jle(k)&&(y=Ow(m,N),y===2&&(L=uo(m),L!==0&&(N=L,y=r2(m,L))),y===1))throw w=G0,wf(m,0),Vh(m,N),za(m,Ne()),w;switch(m.finishedWork=k,m.finishedLanes=N,y){case 0:case 1:throw Error(n(345));case 2:Sf(m,Ua,vu);break;case 3:if(Vh(m,N),(N&130023424)===N&&(y=e2+500-Ne(),10<y)){if(Ii(m,0)!==0)break;if(k=m.suspendedLanes,(k&N)!==N){ya(),m.pingedLanes|=m.suspendedLanes&k;break}m.timeoutHandle=cC(Sf.bind(null,m,Ua,vu),y);break}Sf(m,Ua,vu);break;case 4:if(Vh(m,N),(N&4194240)===N)break;for(y=m.eventTimes,k=-1;0<N;){var K=31-Dn(N);L=1<<K,K=y[K],K>k&&(k=K),N&=~L}if(N=k,N=Ne()-N,N=(120>N?120:480>N?480:1080>N?1080:1920>N?1920:3e3>N?3e3:4320>N?4320:1960*Qle(N/1960))-N,10<N){m.timeoutHandle=cC(Sf.bind(null,m,Ua,vu),N);break}Sf(m,Ua,vu);break;case 5:Sf(m,Ua,vu);break;default:throw Error(n(329))}}}return za(m,Ne()),m.callbackNode===w?P5.bind(null,m):null}function r2(m,y){var w=V0;return m.current.memoizedState.isDehydrated&&(wf(m,y).flags|=256),m=Ow(m,y),m!==2&&(y=Ua,Ua=w,y!==null&&i2(y)),m}function i2(m){Ua===null?Ua=m:Ua.push.apply(Ua,m)}function Jle(m){for(var y=m;;){if(y.flags&16384){var w=y.updateQueue;if(w!==null&&(w=w.stores,w!==null))for(var N=0;N<w.length;N++){var k=w[N],L=k.getSnapshot;k=k.value;try{if(!Sl(L(),k))return!1}catch{return!1}}}if(w=y.child,y.subtreeFlags&16384&&w!==null)w.return=y,y=w;else{if(y===m)break;for(;y.sibling===null;){if(y.return===null||y.return===m)return!0;y=y.return}y.sibling.return=y.return,y=y.sibling}}return!0}function Vh(m,y){for(y&=~JC,y&=~Mw,m.suspendedLanes|=y,m.pingedLanes&=~y,m=m.expirationTimes;0<y;){var w=31-Dn(y),N=1<<w;m[w]=-1,y&=~N}}function R5(m){if((vr&6)!==0)throw Error(n(327));gm();var y=Ii(m,0);if((y&1)===0)return za(m,Ne()),null;var w=Ow(m,y);if(m.tag!==0&&w===2){var N=uo(m);N!==0&&(y=N,w=r2(m,N))}if(w===1)throw w=G0,wf(m,0),Vh(m,y),za(m,Ne()),w;if(w===6)throw Error(n(345));return m.finishedWork=m.current.alternate,m.finishedLanes=y,Sf(m,Ua,vu),za(m,Ne()),null}function s2(m,y){var w=vr;vr|=1;try{return m(y)}finally{vr=w,vr===0&&(mm=Ne()+500,sw&&Fh())}}function _f(m){$h!==null&&$h.tag===0&&(vr&6)===0&&gm();var y=vr;vr|=1;var w=Wo.transition,N=ir;try{if(Wo.transition=null,ir=1,m)return m()}finally{ir=N,Wo.transition=w,vr=y,(vr&6)===0&&Fh()}}function a2(){po=pm.current,ni(pm)}function wf(m,y){m.finishedWork=null,m.finishedLanes=0;var w=m.timeoutHandle;if(w!==-1&&(m.timeoutHandle=-1,Nle(w)),qi!==null)for(w=qi.return;w!==null;){var N=w;switch(mC(N),N.tag){case 1:N=N.type.childContextTypes,N!=null&&rw();break;case 3:hm(),ni(Fa),ni(Xs),CC();break;case 5:MC(N);break;case 4:hm();break;case 13:ni(bi);break;case 19:ni(bi);break;case 10:_C(N.type._context);break;case 22:case 23:a2()}w=w.return}if(ws=m,qi=m=Hh(m.current,null),Us=po=y,ls=0,G0=null,JC=Mw=bf=0,Ua=V0=null,yf!==null){for(y=0;y<yf.length;y++)if(w=yf[y],N=w.interleaved,N!==null){w.interleaved=null;var k=N.next,L=w.pending;if(L!==null){var K=L.next;L.next=k,N.next=K}w.pending=N}yf=null}return m}function O5(m,y){do{var w=qi;try{if(bC(),mw.current=xw,gw){for(var N=_i.memoizedState;N!==null;){var k=N.queue;k!==null&&(k.pending=null),N=N.next}gw=!1}if(xf=0,_s=os=_i=null,F0=!1,B0=0,QC.current=null,w===null||w.return===null){ls=1,G0=y,qi=null;break}e:{var L=m,K=w.return,ge=w,_e=y;if(y=Us,ge.flags|=32768,_e!==null&&typeof _e=="object"&&typeof _e.then=="function"){var Be=_e,it=ge,lt=it.tag;if((it.mode&1)===0&&(lt===0||lt===11||lt===15)){var nt=it.alternate;nt?(it.updateQueue=nt.updateQueue,it.memoizedState=nt.memoizedState,it.lanes=nt.lanes):(it.updateQueue=null,it.memoizedState=null)}var Ut=r5(K);if(Ut!==null){Ut.flags&=-257,i5(Ut,K,ge,L,y),Ut.mode&1&&n5(L,Be,y),y=Ut,_e=Be;var Yt=y.updateQueue;if(Yt===null){var rn=new Set;rn.add(_e),y.updateQueue=rn}else Yt.add(_e);break e}else{if((y&1)===0){n5(L,Be,y),o2();break e}_e=Error(n(426))}}else if(di&&ge.mode&1){var Fi=r5(K);if(Fi!==null){(Fi.flags&65536)===0&&(Fi.flags|=256),i5(Fi,K,ge,L,y),vC(dm(_e,ge));break e}}L=_e=dm(_e,ge),ls!==4&&(ls=2),V0===null?V0=[L]:V0.push(L),L=K;do{switch(L.tag){case 3:L.flags|=65536,y&=-y,L.lanes|=y;var Pe=e5(L,_e,y);A4(L,Pe);break e;case 1:ge=_e;var Te=L.type,ke=L.stateNode;if((L.flags&128)===0&&(typeof Te.getDerivedStateFromError=="function"||ke!==null&&typeof ke.componentDidCatch=="function"&&(zh===null||!zh.has(ke)))){L.flags|=65536,y&=-y,L.lanes|=y;var mt=t5(L,ge,y);A4(L,mt);break e}}L=L.return}while(L!==null)}D5(w)}catch(on){y=on,qi===w&&w!==null&&(qi=w=w.return);continue}break}while(!0)}function k5(){var m=Ew.current;return Ew.current=xw,m===null?xw:m}function o2(){(ls===0||ls===3||ls===2)&&(ls=4),ws===null||(bf&268435455)===0&&(Mw&268435455)===0||Vh(ws,Us)}function Ow(m,y){var w=vr;vr|=2;var N=k5();(ws!==m||Us!==y)&&(vu=null,wf(m,y));do try{ece();break}catch(k){O5(m,k)}while(!0);if(bC(),vr=w,Ew.current=N,qi!==null)throw Error(n(261));return ws=null,Us=0,ls}function ece(){for(;qi!==null;)I5(qi)}function tce(){for(;qi!==null&&!Ee();)I5(qi)}function I5(m){var y=B5(m.alternate,m,po);m.memoizedProps=m.pendingProps,y===null?D5(m):qi=y,QC.current=null}function D5(m){var y=m;do{var w=y.alternate;if(m=y.return,(y.flags&32768)===0){if(w=qle(w,y,po),w!==null){qi=w;return}}else{if(w=Xle(w,y),w!==null){w.flags&=32767,qi=w;return}if(m!==null)m.flags|=32768,m.subtreeFlags=0,m.deletions=null;else{ls=6,qi=null;return}}if(y=y.sibling,y!==null){qi=y;return}qi=y=m}while(y!==null);ls===0&&(ls=5)}function Sf(m,y,w){var N=ir,k=Wo.transition;try{Wo.transition=null,ir=1,nce(m,y,w,N)}finally{Wo.transition=k,ir=N}return null}function nce(m,y,w,N){do gm();while($h!==null);if((vr&6)!==0)throw Error(n(327));w=m.finishedWork;var k=m.finishedLanes;if(w===null)return null;if(m.finishedWork=null,m.finishedLanes=0,w===m.current)throw Error(n(177));m.callbackNode=null,m.callbackPriority=0;var L=w.lanes|w.childLanes;if(ui(m,L),m===ws&&(qi=ws=null,Us=0),(w.subtreeFlags&2064)===0&&(w.flags&2064)===0||Cw||(Cw=!0,j5(kt,function(){return gm(),null})),L=(w.flags&15990)!==0,(w.subtreeFlags&15990)!==0||L){L=Wo.transition,Wo.transition=null;var K=ir;ir=1;var ge=vr;vr|=4,QC.current=null,Yle(m,w),E5(w,m),wle(oC),Da=!!aC,oC=aC=null,m.current=w,Zle(w),Ie(),vr=ge,ir=K,Wo.transition=L}else m.current=w;if(Cw&&(Cw=!1,$h=m,Nw=k),L=m.pendingLanes,L===0&&(zh=null),Un(w.stateNode),za(m,Ne()),y!==null)for(N=m.onRecoverableError,w=0;w<y.length;w++)k=y[w],N(k.value,{componentStack:k.stack,digest:k.digest});if(Aw)throw Aw=!1,m=t2,t2=null,m;return(Nw&1)!==0&&m.tag!==0&&gm(),L=m.pendingLanes,(L&1)!==0?m===n2?H0++:(H0=0,n2=m):H0=0,Fh(),null}function gm(){if($h!==null){var m=ma(Nw),y=Wo.transition,w=ir;try{if(Wo.transition=null,ir=16>m?16:m,$h===null)var N=!1;else{if(m=$h,$h=null,Nw=0,(vr&6)!==0)throw Error(n(331));var k=vr;for(vr|=4,qt=m.current;qt!==null;){var L=qt,K=L.child;if((qt.flags&16)!==0){var ge=L.deletions;if(ge!==null){for(var _e=0;_e<ge.length;_e++){var Be=ge[_e];for(qt=Be;qt!==null;){var it=qt;switch(it.tag){case 0:case 11:case 15:$0(8,it,L)}var lt=it.child;if(lt!==null)lt.return=it,qt=lt;else for(;qt!==null;){it=qt;var nt=it.sibling,Ut=it.return;if(b5(it),it===Be){qt=null;break}if(nt!==null){nt.return=Ut,qt=nt;break}qt=Ut}}}var Yt=L.alternate;if(Yt!==null){var rn=Yt.child;if(rn!==null){Yt.child=null;do{var Fi=rn.sibling;rn.sibling=null,rn=Fi}while(rn!==null)}}qt=L}}if((L.subtreeFlags&2064)!==0&&K!==null)K.return=L,qt=K;else e:for(;qt!==null;){if(L=qt,(L.flags&2048)!==0)switch(L.tag){case 0:case 11:case 15:$0(9,L,L.return)}var Pe=L.sibling;if(Pe!==null){Pe.return=L.return,qt=Pe;break e}qt=L.return}}var Te=m.current;for(qt=Te;qt!==null;){K=qt;var ke=K.child;if((K.subtreeFlags&2064)!==0&&ke!==null)ke.return=K,qt=ke;else e:for(K=Te;qt!==null;){if(ge=qt,(ge.flags&2048)!==0)try{switch(ge.tag){case 0:case 11:case 15:Tw(9,ge)}}catch(on){Ai(ge,ge.return,on)}if(ge===K){qt=null;break e}var mt=ge.sibling;if(mt!==null){mt.return=ge.return,qt=mt;break e}qt=ge.return}}if(vr=k,Fh(),Gt&&typeof Gt.onPostCommitFiberRoot=="function")try{Gt.onPostCommitFiberRoot(hn,m)}catch{}N=!0}return N}finally{ir=w,Wo.transition=y}}return!1}function L5(m,y,w){y=dm(w,y),y=e5(m,y,1),m=jh(m,y,1),y=ya(),m!==null&&(ci(m,1,y),za(m,y))}function Ai(m,y,w){if(m.tag===3)L5(m,m,w);else for(;y!==null;){if(y.tag===3){L5(y,m,w);break}else if(y.tag===1){var N=y.stateNode;if(typeof y.type.getDerivedStateFromError=="function"||typeof N.componentDidCatch=="function"&&(zh===null||!zh.has(N))){m=dm(w,m),m=t5(y,m,1),y=jh(y,m,1),m=ya(),y!==null&&(ci(y,1,m),za(y,m));break}}y=y.return}}function rce(m,y,w){var N=m.pingCache;N!==null&&N.delete(y),y=ya(),m.pingedLanes|=m.suspendedLanes&w,ws===m&&(Us&w)===w&&(ls===4||ls===3&&(Us&130023424)===Us&&500>Ne()-e2?wf(m,0):JC|=w),za(m,y)}function F5(m,y){y===0&&((m.mode&1)===0?y=1:(y=qr,qr<<=1,(qr&130023424)===0&&(qr=4194304)));var w=ya();m=mu(m,y),m!==null&&(ci(m,y,w),za(m,w))}function ice(m){var y=m.memoizedState,w=0;y!==null&&(w=y.retryLane),F5(m,w)}function sce(m,y){var w=0;switch(m.tag){case 13:var N=m.stateNode,k=m.memoizedState;k!==null&&(w=k.retryLane);break;case 19:N=m.stateNode;break;default:throw Error(n(314))}N!==null&&N.delete(y),F5(m,w)}var B5;B5=function(m,y,w){if(m!==null)if(m.memoizedProps!==y.pendingProps||Fa.current)ja=!0;else{if((m.lanes&w)===0&&(y.flags&128)===0)return ja=!1,Wle(m,y,w);ja=(m.flags&131072)!==0}else ja=!1,di&&(y.flags&1048576)!==0&&y4(y,ow,y.index);switch(y.lanes=0,y.tag){case 2:var N=y.type;ww(m,y),m=y.pendingProps;var k=im(y,Xs.current);um(y,w),k=RC(null,y,N,m,k,w);var L=OC();return y.flags|=1,typeof k=="object"&&k!==null&&typeof k.render=="function"&&k.$$typeof===void 0?(y.tag=1,y.memoizedState=null,y.updateQueue=null,Ba(N)?(L=!0,iw(y)):L=!1,y.memoizedState=k.state!==null&&k.state!==void 0?k.state:null,TC(y),k.updater=bw,y.stateNode=k,k._reactInternals=y,BC(y,N,m,w),y=$C(null,y,N,!0,L,w)):(y.tag=0,di&&L&&pC(y),ga(null,y,k,w),y=y.child),y;case 16:N=y.elementType;e:{switch(ww(m,y),m=y.pendingProps,k=N._init,N=k(N._payload),y.type=N,k=y.tag=oce(N),m=El(N,m),k){case 0:y=zC(null,y,N,m,w);break e;case 1:y=u5(null,y,N,m,w);break e;case 11:y=s5(null,y,N,m,w);break e;case 14:y=a5(null,y,N,El(N.type,m),w);break e}throw Error(n(306,N,""))}return y;case 0:return N=y.type,k=y.pendingProps,k=y.elementType===N?k:El(N,k),zC(m,y,N,k,w);case 1:return N=y.type,k=y.pendingProps,k=y.elementType===N?k:El(N,k),u5(m,y,N,k,w);case 3:e:{if(h5(y),m===null)throw Error(n(387));N=y.pendingProps,L=y.memoizedState,k=L.element,M4(m,y),fw(y,N,null,w);var K=y.memoizedState;if(N=K.element,L.isDehydrated)if(L={element:N,isDehydrated:!1,cache:K.cache,pendingSuspenseBoundaries:K.pendingSuspenseBoundaries,transitions:K.transitions},y.updateQueue.baseState=L,y.memoizedState=L,y.flags&256){k=dm(Error(n(423)),y),y=d5(m,y,N,w,k);break e}else if(N!==k){k=dm(Error(n(424)),y),y=d5(m,y,N,w,k);break e}else for(fo=Ih(y.stateNode.containerInfo.firstChild),ho=y,di=!0,Tl=null,w=T4(y,null,N,w),y.child=w;w;)w.flags=w.flags&-3|4096,w=w.sibling;else{if(om(),N===k){y=yu(m,y,w);break e}ga(m,y,N,w)}y=y.child}return y;case 5:return N4(y),m===null&&yC(y),N=y.type,k=y.pendingProps,L=m!==null?m.memoizedProps:null,K=k.children,lC(N,k)?K=null:L!==null&&lC(N,L)&&(y.flags|=32),c5(m,y),ga(m,y,K,w),y.child;case 6:return m===null&&yC(y),null;case 13:return f5(m,y,w);case 4:return EC(y,y.stateNode.containerInfo),N=y.pendingProps,m===null?y.child=lm(y,null,N,w):ga(m,y,N,w),y.child;case 11:return N=y.type,k=y.pendingProps,k=y.elementType===N?k:El(N,k),s5(m,y,N,k,w);case 7:return ga(m,y,y.pendingProps,w),y.child;case 8:return ga(m,y,y.pendingProps.children,w),y.child;case 12:return ga(m,y,y.pendingProps.children,w),y.child;case 10:e:{if(N=y.type._context,k=y.pendingProps,L=y.memoizedProps,K=k.value,Zr(uw,N._currentValue),N._currentValue=K,L!==null)if(Sl(L.value,K)){if(L.children===k.children&&!Fa.current){y=yu(m,y,w);break e}}else for(L=y.child,L!==null&&(L.return=y);L!==null;){var ge=L.dependencies;if(ge!==null){K=L.child;for(var _e=ge.firstContext;_e!==null;){if(_e.context===N){if(L.tag===1){_e=gu(-1,w&-w),_e.tag=2;var Be=L.updateQueue;if(Be!==null){Be=Be.shared;var it=Be.pending;it===null?_e.next=_e:(_e.next=it.next,it.next=_e),Be.pending=_e}}L.lanes|=w,_e=L.alternate,_e!==null&&(_e.lanes|=w),wC(L.return,w,y),ge.lanes|=w;break}_e=_e.next}}else if(L.tag===10)K=L.type===y.type?null:L.child;else if(L.tag===18){if(K=L.return,K===null)throw Error(n(341));K.lanes|=w,ge=K.alternate,ge!==null&&(ge.lanes|=w),wC(K,w,y),K=L.sibling}else K=L.child;if(K!==null)K.return=L;else for(K=L;K!==null;){if(K===y){K=null;break}if(L=K.sibling,L!==null){L.return=K.return,K=L;break}K=K.return}L=K}ga(m,y,k.children,w),y=y.child}return y;case 9:return k=y.type,N=y.pendingProps.children,um(y,w),k=Vo(k),N=N(k),y.flags|=1,ga(m,y,N,w),y.child;case 14:return N=y.type,k=El(N,y.pendingProps),k=El(N.type,k),a5(m,y,N,k,w);case 15:return o5(m,y,y.type,y.pendingProps,w);case 17:return N=y.type,k=y.pendingProps,k=y.elementType===N?k:El(N,k),ww(m,y),y.tag=1,Ba(N)?(m=!0,iw(y)):m=!1,um(y,w),Q4(y,N,k),BC(y,N,k,w),$C(null,y,N,!0,m,w);case 19:return m5(m,y,w);case 22:return l5(m,y,w)}throw Error(n(156,y.tag))};function j5(m,y){return Oh(m,y)}function ace(m,y,w,N){this.tag=m,this.key=w,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=y,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=N,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function qo(m,y,w,N){return new ace(m,y,w,N)}function l2(m){return m=m.prototype,!(!m||!m.isReactComponent)}function oce(m){if(typeof m=="function")return l2(m)?1:0;if(m!=null){if(m=m.$$typeof,m===F)return 11;if(m===W)return 14}return 2}function Hh(m,y){var w=m.alternate;return w===null?(w=qo(m.tag,y,m.key,m.mode),w.elementType=m.elementType,w.type=m.type,w.stateNode=m.stateNode,w.alternate=m,m.alternate=w):(w.pendingProps=y,w.type=m.type,w.flags=0,w.subtreeFlags=0,w.deletions=null),w.flags=m.flags&14680064,w.childLanes=m.childLanes,w.lanes=m.lanes,w.child=m.child,w.memoizedProps=m.memoizedProps,w.memoizedState=m.memoizedState,w.updateQueue=m.updateQueue,y=m.dependencies,w.dependencies=y===null?null:{lanes:y.lanes,firstContext:y.firstContext},w.sibling=m.sibling,w.index=m.index,w.ref=m.ref,w}function kw(m,y,w,N,k,L){var K=2;if(N=m,typeof m=="function")l2(m)&&(K=1);else if(typeof m=="string")K=5;else e:switch(m){case A:return Tf(w.children,k,L,y);case P:K=8,k|=8;break;case R:return m=qo(12,w,y,k|2),m.elementType=R,m.lanes=L,m;case U:return m=qo(13,w,y,k),m.elementType=U,m.lanes=L,m;case B:return m=qo(19,w,y,k),m.elementType=B,m.lanes=L,m;case $:return Iw(w,k,L,y);default:if(typeof m=="object"&&m!==null)switch(m.$$typeof){case O:K=10;break e;case D:K=9;break e;case F:K=11;break e;case W:K=14;break e;case j:K=16,N=null;break e}throw Error(n(130,m==null?m:typeof m,""))}return y=qo(K,w,y,k),y.elementType=m,y.type=N,y.lanes=L,y}function Tf(m,y,w,N){return m=qo(7,m,N,y),m.lanes=w,m}function Iw(m,y,w,N){return m=qo(22,m,N,y),m.elementType=$,m.lanes=w,m.stateNode={isHidden:!1},m}function c2(m,y,w){return m=qo(6,m,null,y),m.lanes=w,m}function u2(m,y,w){return y=qo(4,m.children!==null?m.children:[],m.key,y),y.lanes=w,y.stateNode={containerInfo:m.containerInfo,pendingChildren:null,implementation:m.implementation},y}function lce(m,y,w,N,k){this.tag=y,this.containerInfo=m,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Li(0),this.expirationTimes=Li(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Li(0),this.identifierPrefix=N,this.onRecoverableError=k,this.mutableSourceEagerHydrationData=null}function h2(m,y,w,N,k,L,K,ge,_e){return m=new lce(m,y,w,ge,_e),y===1?(y=1,L===!0&&(y|=8)):y=0,L=qo(3,null,null,y),m.current=L,L.stateNode=m,L.memoizedState={element:N,isDehydrated:w,cache:null,transitions:null,pendingSuspenseBoundaries:null},TC(L),m}function cce(m,y,w){var N=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:C,key:N==null?null:""+N,children:m,containerInfo:y,implementation:w}}function U5(m){if(!m)return Lh;m=m._reactInternals;e:{if(Ia(m)!==m||m.tag!==1)throw Error(n(170));var y=m;do{switch(y.tag){case 3:y=y.stateNode.context;break e;case 1:if(Ba(y.type)){y=y.stateNode.__reactInternalMemoizedMergedChildContext;break e}}y=y.return}while(y!==null);throw Error(n(171))}if(m.tag===1){var w=m.type;if(Ba(w))return p4(m,w,y)}return y}function z5(m,y,w,N,k,L,K,ge,_e){return m=h2(w,N,!0,m,k,L,K,ge,_e),m.context=U5(null),w=m.current,N=ya(),k=Gh(w),L=gu(N,k),L.callback=y??null,jh(w,L,k),m.current.lanes=k,ci(m,k,N),za(m,N),m}function Dw(m,y,w,N){var k=y.current,L=ya(),K=Gh(k);return w=U5(w),y.context===null?y.context=w:y.pendingContext=w,y=gu(L,K),y.payload={element:m},N=N===void 0?null:N,N!==null&&(y.callback=N),m=jh(k,y,K),m!==null&&(Cl(m,k,K,L),dw(m,k,K)),K}function Lw(m){if(m=m.current,!m.child)return null;switch(m.child.tag){case 5:return m.child.stateNode;default:return m.child.stateNode}}function $5(m,y){if(m=m.memoizedState,m!==null&&m.dehydrated!==null){var w=m.retryLane;m.retryLane=w!==0&&w<y?w:y}}function d2(m,y){$5(m,y),(m=m.alternate)&&$5(m,y)}function uce(){return null}var G5=typeof reportError=="function"?reportError:function(m){console.error(m)};function f2(m){this._internalRoot=m}Fw.prototype.render=f2.prototype.render=function(m){var y=this._internalRoot;if(y===null)throw Error(n(409));Dw(m,y,null,null)},Fw.prototype.unmount=f2.prototype.unmount=function(){var m=this._internalRoot;if(m!==null){this._internalRoot=null;var y=m.containerInfo;_f(function(){Dw(null,m,null,null)}),y[hu]=null}};function Fw(m){this._internalRoot=m}Fw.prototype.unstable_scheduleHydration=function(m){if(m){var y=V();m={blockedOn:null,target:m,priority:y};for(var w=0;w<Lt.length&&y!==0&&y<Lt[w].priority;w++);Lt.splice(w,0,m),w===0&&sn(m)}};function p2(m){return!(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)}function Bw(m){return!(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11&&(m.nodeType!==8||m.nodeValue!==" react-mount-point-unstable "))}function V5(){}function hce(m,y,w,N,k){if(k){if(typeof N=="function"){var L=N;N=function(){var Be=Lw(K);L.call(Be)}}var K=z5(y,N,m,0,null,!1,!1,"",V5);return m._reactRootContainer=K,m[hu]=K.current,N0(m.nodeType===8?m.parentNode:m),_f(),K}for(;k=m.lastChild;)m.removeChild(k);if(typeof N=="function"){var ge=N;N=function(){var Be=Lw(_e);ge.call(Be)}}var _e=h2(m,0,!1,null,null,!1,!1,"",V5);return m._reactRootContainer=_e,m[hu]=_e.current,N0(m.nodeType===8?m.parentNode:m),_f(function(){Dw(y,_e,w,N)}),_e}function jw(m,y,w,N,k){var L=w._reactRootContainer;if(L){var K=L;if(typeof k=="function"){var ge=k;k=function(){var _e=Lw(K);ge.call(_e)}}Dw(y,K,m,k)}else K=hce(w,y,m,k,N);return Lw(K)}gn=function(m){switch(m.tag){case 3:var y=m.stateNode;if(y.current.memoizedState.isDehydrated){var w=Zn(y.pendingLanes);w!==0&&(Xr(y,w|1),za(y,Ne()),(vr&6)===0&&(mm=Ne()+500,Fh()))}break;case 13:_f(function(){var N=mu(m,1);if(N!==null){var k=ya();Cl(N,m,1,k)}}),d2(m,1)}},pc=function(m){if(m.tag===13){var y=mu(m,134217728);if(y!==null){var w=ya();Cl(y,m,134217728,w)}d2(m,134217728)}},H=function(m){if(m.tag===13){var y=Gh(m),w=mu(m,y);if(w!==null){var N=ya();Cl(w,m,y,N)}d2(m,y)}},V=function(){return ir},ie=function(m,y){var w=ir;try{return ir=m,y()}finally{ir=w}},Mt=function(m,y,w){switch(y){case"input":if(Jt(m,w),y=w.name,w.type==="radio"&&y!=null){for(w=m;w.parentNode;)w=w.parentNode;for(w=w.querySelectorAll("input[name="+JSON.stringify(""+y)+'][type="radio"]'),y=0;y<w.length;y++){var N=w[y];if(N!==m&&N.form===m.form){var k=nw(N);if(!k)throw Error(n(90));Fe(N),Jt(N,k)}}}break;case"textarea":Ze(m,w);break;case"select":y=w.value,y!=null&&he(m,!!w.multiple,y,!1)}},Rr=s2,vi=_f;var dce={usingClientEntryPoint:!1,Events:[O0,nm,nw,wt,Pn,s2]},W0={findFiberByHostInstance:ff,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},fce={bundleType:W0.bundleType,version:W0.version,rendererPackageName:W0.rendererPackageName,rendererConfig:W0.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:T.ReactCurrentDispatcher,findHostInstanceByFiber:function(m){return m=zo(m),m===null?null:m.stateNode},findFiberByHostInstance:W0.findFiberByHostInstance||uce,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Uw=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Uw.isDisabled&&Uw.supportsFiber)try{hn=Uw.inject(fce),Gt=Uw}catch{}}return $a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=dce,$a.createPortal=function(m,y){var w=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p2(y))throw Error(n(200));return cce(m,y,null,w)},$a.createRoot=function(m,y){if(!p2(m))throw Error(n(299));var w=!1,N="",k=G5;return y!=null&&(y.unstable_strictMode===!0&&(w=!0),y.identifierPrefix!==void 0&&(N=y.identifierPrefix),y.onRecoverableError!==void 0&&(k=y.onRecoverableError)),y=h2(m,1,!1,null,null,w,!1,N,k),m[hu]=y.current,N0(m.nodeType===8?m.parentNode:m),new f2(y)},$a.findDOMNode=function(m){if(m==null)return null;if(m.nodeType===1)return m;var y=m._reactInternals;if(y===void 0)throw typeof m.render=="function"?Error(n(188)):(m=Object.keys(m).join(","),Error(n(268,m)));return m=zo(y),m=m===null?null:m.stateNode,m},$a.flushSync=function(m){return _f(m)},$a.hydrate=function(m,y,w){if(!Bw(y))throw Error(n(200));return jw(null,m,y,!0,w)},$a.hydrateRoot=function(m,y,w){if(!p2(m))throw Error(n(405));var N=w!=null&&w.hydratedSources||null,k=!1,L="",K=G5;if(w!=null&&(w.unstable_strictMode===!0&&(k=!0),w.identifierPrefix!==void 0&&(L=w.identifierPrefix),w.onRecoverableError!==void 0&&(K=w.onRecoverableError)),y=z5(y,null,m,1,w??null,k,!1,L,K),m[hu]=y.current,N0(m),N)for(m=0;m<N.length;m++)w=N[m],k=w._getVersion,k=k(w._source),y.mutableSourceEagerHydrationData==null?y.mutableSourceEagerHydrationData=[w,k]:y.mutableSourceEagerHydrationData.push(w,k);return new Fw(y)},$a.render=function(m,y,w){if(!Bw(y))throw Error(n(200));return jw(null,m,y,!1,w)},$a.unmountComponentAtNode=function(m){if(!Bw(m))throw Error(n(40));return m._reactRootContainer?(_f(function(){jw(null,null,m,!1,function(){m._reactRootContainer=null,m[hu]=null})}),!0):!1},$a.unstable_batchedUpdates=s2,$a.unstable_renderSubtreeIntoContainer=function(m,y,w,N){if(!Bw(w))throw Error(n(200));if(m==null||m._reactInternals===void 0)throw Error(n(38));return jw(m,y,w,!1,N)},$a.version="18.3.1-next-f1338f8080-20240426",$a}var Q5;function wce(){if(Q5)return y2.exports;Q5=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),y2.exports=_ce(),y2.exports}var J5;function Sce(){if(J5)return zw;J5=1;var r=wce();return zw.createRoot=r.createRoot,zw.hydrateRoot=r.hydrateRoot,zw}var Tce=Sce();const Ece=_r(Tce);var X0={},e$;function Mce(){if(e$)return X0;e$=1,Object.defineProperty(X0,"__esModule",{value:!0}),X0.parse=o,X0.serialize=u;const r=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,n=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,i=/^[\u0020-\u003A\u003D-\u007E]*$/,s=Object.prototype.toString,a=(()=>{const f=function(){};return f.prototype=Object.create(null),f})();function o(f,p){const g=new a,v=f.length;if(v<2)return g;const x=(p==null?void 0:p.decode)||h;let _=0;do{const E=f.indexOf("=",_);if(E===-1)break;const S=f.indexOf(";",_),T=S===-1?v:S;if(E>T){_=f.lastIndexOf(";",E-1)+1;continue}const M=l(f,_,E),C=c(f,E,M),A=f.slice(M,C);if(g[A]===void 0){let P=l(f,E+1,T),R=c(f,T,P);const O=x(f.slice(P,R));g[A]=O}_=T+1}while(_<v);return g}function l(f,p,g){do{const v=f.charCodeAt(p);if(v!==32&&v!==9)return p}while(++p<g);return g}function c(f,p,g){for(;p>g;){const v=f.charCodeAt(--p);if(v!==32&&v!==9)return p+1}return g}function u(f,p,g){const v=(g==null?void 0:g.encode)||encodeURIComponent;if(!r.test(f))throw new TypeError(`argument name is invalid: ${f}`);const x=v(p);if(!e.test(x))throw new TypeError(`argument val is invalid: ${p}`);let _=f+"="+x;if(!g)return _;if(g.maxAge!==void 0){if(!Number.isInteger(g.maxAge))throw new TypeError(`option maxAge is invalid: ${g.maxAge}`);_+="; Max-Age="+g.maxAge}if(g.domain){if(!n.test(g.domain))throw new TypeError(`option domain is invalid: ${g.domain}`);_+="; Domain="+g.domain}if(g.path){if(!i.test(g.path))throw new TypeError(`option path is invalid: ${g.path}`);_+="; Path="+g.path}if(g.expires){if(!d(g.expires)||!Number.isFinite(g.expires.valueOf()))throw new TypeError(`option expires is invalid: ${g.expires}`);_+="; Expires="+g.expires.toUTCString()}if(g.httpOnly&&(_+="; HttpOnly"),g.secure&&(_+="; Secure"),g.partitioned&&(_+="; Partitioned"),g.priority)switch(typeof g.priority=="string"?g.priority.toLowerCase():void 0){case"low":_+="; Priority=Low";break;case"medium":_+="; Priority=Medium";break;case"high":_+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${g.priority}`)}if(g.sameSite)switch(typeof g.sameSite=="string"?g.sameSite.toLowerCase():g.sameSite){case!0:case"strict":_+="; SameSite=Strict";break;case"lax":_+="; SameSite=Lax";break;case"none":_+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${g.sameSite}`)}return _}function h(f){if(f.indexOf("%")===-1)return f;try{return decodeURIComponent(f)}catch{return f}}function d(f){return s.call(f)==="[object Date]"}return X0}Mce();/**
 * react-router v7.4.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var t$="popstate";function Ace(r={}){function e(i,s){let{pathname:a,search:o,hash:l}=i.location;return LL("",{pathname:a,search:o,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(i,s){return typeof s=="string"?s:jx(s)}return Nce(e,n,null,r)}function Ei(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function Vc(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Cce(){return Math.random().toString(36).substring(2,10)}function n$(r,e){return{usr:r.state,key:r.key,idx:e}}function LL(r,e,n=null,i){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof e=="string"?Zy(e):e,state:n,key:e&&e.key||i||Cce()}}function jx({pathname:r="/",search:e="",hash:n=""}){return e&&e!=="?"&&(r+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(r+=n.charAt(0)==="#"?n:"#"+n),r}function Zy(r){let e={};if(r){let n=r.indexOf("#");n>=0&&(e.hash=r.substring(n),r=r.substring(0,n));let i=r.indexOf("?");i>=0&&(e.search=r.substring(i),r=r.substring(0,i)),r&&(e.pathname=r)}return e}function Nce(r,e,n,i={}){let{window:s=document.defaultView,v5Compat:a=!1}=i,o=s.history,l="POP",c=null,u=h();u==null&&(u=0,o.replaceState({...o.state,idx:u},""));function h(){return(o.state||{idx:null}).idx}function d(){l="POP";let x=h(),_=x==null?null:x-u;u=x,c&&c({action:l,location:v.location,delta:_})}function f(x,_){l="PUSH";let E=LL(v.location,x,_);u=h()+1;let S=n$(E,u),T=v.createHref(E);try{o.pushState(S,"",T)}catch(M){if(M instanceof DOMException&&M.name==="DataCloneError")throw M;s.location.assign(T)}a&&c&&c({action:l,location:v.location,delta:1})}function p(x,_){l="REPLACE";let E=LL(v.location,x,_);u=h();let S=n$(E,u),T=v.createHref(E);o.replaceState(S,"",T),a&&c&&c({action:l,location:v.location,delta:0})}function g(x){let _=s.location.origin!=="null"?s.location.origin:s.location.href,E=typeof x=="string"?x:jx(x);return E=E.replace(/ $/,"%20"),Ei(_,`No window.location.(origin|href) available to create URL for href: ${E}`),new URL(E,_)}let v={get action(){return l},get location(){return r(s,o)},listen(x){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(t$,d),c=x,()=>{s.removeEventListener(t$,d),c=null}},createHref(x){return e(s,x)},createURL:g,encodeLocation(x){let _=g(x);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:f,replace:p,go(x){return o.go(x)}};return v}function _Q(r,e,n="/"){return Pce(r,e,n,!1)}function Pce(r,e,n,i){let s=typeof e=="string"?Zy(e):e,a=fh(s.pathname||"/",n);if(a==null)return null;let o=wQ(r);Rce(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let u=$ce(a);l=Uce(o[c],u,i)}return l}function wQ(r,e=[],n=[],i=""){let s=(a,o,l)=>{let c={relativePath:l===void 0?a.path||"":l,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};c.relativePath.startsWith("/")&&(Ei(c.relativePath.startsWith(i),`Absolute route path "${c.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),c.relativePath=c.relativePath.slice(i.length));let u=nh([i,c.relativePath]),h=n.concat(c);a.children&&a.children.length>0&&(Ei(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${u}".`),wQ(a.children,e,h,u)),!(a.path==null&&!a.index)&&e.push({path:u,score:Bce(u,a.index),routesMeta:h})};return r.forEach((a,o)=>{var l;if(a.path===""||!((l=a.path)!=null&&l.includes("?")))s(a,o);else for(let c of SQ(a.path))s(a,o,c)}),e}function SQ(r){let e=r.split("/");if(e.length===0)return[];let[n,...i]=e,s=n.endsWith("?"),a=n.replace(/\?$/,"");if(i.length===0)return s?[a,""]:[a];let o=SQ(i.join("/")),l=[];return l.push(...o.map(c=>c===""?a:[a,c].join("/"))),s&&l.push(...o),l.map(c=>r.startsWith("/")&&c===""?"/":c)}function Rce(r){r.sort((e,n)=>e.score!==n.score?n.score-e.score:jce(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}var Oce=/^:[\w-]+$/,kce=3,Ice=2,Dce=1,Lce=10,Fce=-2,r$=r=>r==="*";function Bce(r,e){let n=r.split("/"),i=n.length;return n.some(r$)&&(i+=Fce),e&&(i+=Ice),n.filter(s=>!r$(s)).reduce((s,a)=>s+(Oce.test(a)?kce:a===""?Dce:Lce),i)}function jce(r,e){return r.length===e.length&&r.slice(0,-1).every((i,s)=>i===e[s])?r[r.length-1]-e[e.length-1]:0}function Uce(r,e,n=!1){let{routesMeta:i}=r,s={},a="/",o=[];for(let l=0;l<i.length;++l){let c=i[l],u=l===i.length-1,h=a==="/"?e:e.slice(a.length)||"/",d=TT({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},h),f=c.route;if(!d&&u&&n&&!i[i.length-1].route.index&&(d=TT({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},h)),!d)return null;Object.assign(s,d.params),o.push({params:s,pathname:nh([a,d.pathname]),pathnameBase:Wce(nh([a,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(a=nh([a,d.pathnameBase]))}return o}function TT(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[n,i]=zce(r.path,r.caseSensitive,r.end),s=e.match(n);if(!s)return null;let a=s[0],o=a.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:i.reduce((u,{paramName:h,isOptional:d},f)=>{if(h==="*"){let g=l[f]||"";o=a.slice(0,a.length-g.length).replace(/(.)\/+$/,"$1")}const p=l[f];return d&&!p?u[h]=void 0:u[h]=(p||"").replace(/%2F/g,"/"),u},{}),pathname:a,pathnameBase:o,pattern:r}}function zce(r,e=!1,n=!0){Vc(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let i=[],s="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(i.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(i.push({paramName:"*"}),s+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":r!==""&&r!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),i]}function $ce(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Vc(!1,`The URL path "${r}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),r}}function fh(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=r.charAt(n);return i&&i!=="/"?null:r.slice(n)||"/"}function Gce(r,e="/"){let{pathname:n,search:i="",hash:s=""}=typeof r=="string"?Zy(r):r;return{pathname:n?n.startsWith("/")?n:Vce(n,e):e,search:qce(i),hash:Xce(s)}}function Vce(r,e){let n=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function b2(r,e,n,i){return`Cannot include a '${r}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Hce(r){return r.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function TQ(r){let e=Hce(r);return e.map((n,i)=>i===e.length-1?n.pathname:n.pathnameBase)}function EQ(r,e,n,i=!1){let s;typeof r=="string"?s=Zy(r):(s={...r},Ei(!s.pathname||!s.pathname.includes("?"),b2("?","pathname","search",s)),Ei(!s.pathname||!s.pathname.includes("#"),b2("#","pathname","hash",s)),Ei(!s.search||!s.search.includes("#"),b2("#","search","hash",s)));let a=r===""||s.pathname==="",o=a?"/":s.pathname,l;if(o==null)l=n;else{let d=e.length-1;if(!i&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),d-=1;s.pathname=f.join("/")}l=d>=0?e[d]:"/"}let c=Gce(s,l),u=o&&o!=="/"&&o.endsWith("/"),h=(a||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(u||h)&&(c.pathname+="/"),c}var nh=r=>r.join("/").replace(/\/\/+/g,"/"),Wce=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),qce=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,Xce=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function Kce(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}var MQ=["POST","PUT","PATCH","DELETE"];new Set(MQ);var Yce=["GET",...MQ];new Set(Yce);var Qy=X.createContext(null);Qy.displayName="DataRouter";var cM=X.createContext(null);cM.displayName="DataRouterState";var AQ=X.createContext({isTransitioning:!1});AQ.displayName="ViewTransition";var Zce=X.createContext(new Map);Zce.displayName="Fetchers";var Qce=X.createContext(null);Qce.displayName="Await";var eu=X.createContext(null);eu.displayName="Navigation";var d_=X.createContext(null);d_.displayName="Location";var cc=X.createContext({outlet:null,matches:[],isDataRoute:!1});cc.displayName="Route";var BB=X.createContext(null);BB.displayName="RouteError";function Jce(r,{relative:e}={}){Ei(f_(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:i}=X.useContext(eu),{hash:s,pathname:a,search:o}=p_(r,{relative:e}),l=a;return n!=="/"&&(l=a==="/"?n:nh([n,a])),i.createHref({pathname:l,search:o,hash:s})}function f_(){return X.useContext(d_)!=null}function $d(){return Ei(f_(),"useLocation() may be used only in the context of a <Router> component."),X.useContext(d_).location}var CQ="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function NQ(r){X.useContext(eu).static||X.useLayoutEffect(r)}function PQ(){let{isDataRoute:r}=X.useContext(cc);return r?pue():eue()}function eue(){Ei(f_(),"useNavigate() may be used only in the context of a <Router> component.");let r=X.useContext(Qy),{basename:e,navigator:n}=X.useContext(eu),{matches:i}=X.useContext(cc),{pathname:s}=$d(),a=JSON.stringify(TQ(i)),o=X.useRef(!1);return NQ(()=>{o.current=!0}),X.useCallback((c,u={})=>{if(Vc(o.current,CQ),!o.current)return;if(typeof c=="number"){n.go(c);return}let h=EQ(c,JSON.parse(a),s,u.relative==="path");r==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:nh([e,h.pathname])),(u.replace?n.replace:n.push)(h,u.state,u)},[e,n,a,s,r])}var tue=X.createContext(null);function nue(r){let e=X.useContext(cc).outlet;return e&&X.createElement(tue.Provider,{value:r},e)}function RQ(){let{matches:r}=X.useContext(cc),e=r[r.length-1];return e?e.params:{}}function p_(r,{relative:e}={}){let{matches:n}=X.useContext(cc),{pathname:i}=$d(),s=JSON.stringify(TQ(n));return X.useMemo(()=>EQ(r,JSON.parse(s),i,e==="path"),[r,s,i,e])}function rue(r,e){return OQ(r,e)}function OQ(r,e,n,i){var E;Ei(f_(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s,static:a}=X.useContext(eu),{matches:o}=X.useContext(cc),l=o[o.length-1],c=l?l.params:{},u=l?l.pathname:"/",h=l?l.pathnameBase:"/",d=l&&l.route;{let S=d&&d.path||"";kQ(u,!d||S.endsWith("*")||S.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${S}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${S}"> to <Route path="${S==="/"?"*":`${S}/*`}">.`)}let f=$d(),p;if(e){let S=typeof e=="string"?Zy(e):e;Ei(h==="/"||((E=S.pathname)==null?void 0:E.startsWith(h)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${h}" but pathname "${S.pathname}" was given in the \`location\` prop.`),p=S}else p=f;let g=p.pathname||"/",v=g;if(h!=="/"){let S=h.replace(/^\//,"").split("/");v="/"+g.replace(/^\//,"").split("/").slice(S.length).join("/")}let x=!a&&n&&n.matches&&n.matches.length>0?n.matches:_Q(r,{pathname:v});Vc(d||x!=null,`No routes matched location "${p.pathname}${p.search}${p.hash}" `),Vc(x==null||x[x.length-1].route.element!==void 0||x[x.length-1].route.Component!==void 0||x[x.length-1].route.lazy!==void 0,`Matched leaf route at location "${p.pathname}${p.search}${p.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let _=lue(x&&x.map(S=>Object.assign({},S,{params:Object.assign({},c,S.params),pathname:nh([h,s.encodeLocation?s.encodeLocation(S.pathname).pathname:S.pathname]),pathnameBase:S.pathnameBase==="/"?h:nh([h,s.encodeLocation?s.encodeLocation(S.pathnameBase).pathname:S.pathnameBase])})),o,n,i);return e&&_?X.createElement(d_.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...p},navigationType:"POP"}},_):_}function iue(){let r=fue(),e=Kce(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),n=r instanceof Error?r.stack:null,i="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:i},a={padding:"2px 4px",backgroundColor:i},o=null;return console.error("Error handled by React Router default ErrorBoundary:",r),o=X.createElement(X.Fragment,null,X.createElement("p",null,"💿 Hey developer 👋"),X.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",X.createElement("code",{style:a},"ErrorBoundary")," or"," ",X.createElement("code",{style:a},"errorElement")," prop on your route.")),X.createElement(X.Fragment,null,X.createElement("h2",null,"Unexpected Application Error!"),X.createElement("h3",{style:{fontStyle:"italic"}},e),n?X.createElement("pre",{style:s},n):null,o)}var sue=X.createElement(iue,null),aue=class extends X.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,e){return e.location!==r.location||e.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:e.error,location:e.location,revalidation:r.revalidation||e.revalidation}}componentDidCatch(r,e){console.error("React Router caught the following error during render",r,e)}render(){return this.state.error!==void 0?X.createElement(cc.Provider,{value:this.props.routeContext},X.createElement(BB.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function oue({routeContext:r,match:e,children:n}){let i=X.useContext(Qy);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),X.createElement(cc.Provider,{value:r},n)}function lue(r,e=[],n=null,i=null){if(r==null){if(!n)return null;if(n.errors)r=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)r=n.matches;else return null}let s=r,a=n==null?void 0:n.errors;if(a!=null){let c=s.findIndex(u=>u.route.id&&(a==null?void 0:a[u.route.id])!==void 0);Ei(c>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),s=s.slice(0,Math.min(s.length,c+1))}let o=!1,l=-1;if(n)for(let c=0;c<s.length;c++){let u=s[c];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(l=c),u.route.id){let{loaderData:h,errors:d}=n,f=u.route.loader&&!h.hasOwnProperty(u.route.id)&&(!d||d[u.route.id]===void 0);if(u.route.lazy||f){o=!0,l>=0?s=s.slice(0,l+1):s=[s[0]];break}}}return s.reduceRight((c,u,h)=>{let d,f=!1,p=null,g=null;n&&(d=a&&u.route.id?a[u.route.id]:void 0,p=u.route.errorElement||sue,o&&(l<0&&h===0?(kQ("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),f=!0,g=null):l===h&&(f=!0,g=u.route.hydrateFallbackElement||null)));let v=e.concat(s.slice(0,h+1)),x=()=>{let _;return d?_=p:f?_=g:u.route.Component?_=X.createElement(u.route.Component,null):u.route.element?_=u.route.element:_=c,X.createElement(oue,{match:u,routeContext:{outlet:c,matches:v,isDataRoute:n!=null},children:_})};return n&&(u.route.ErrorBoundary||u.route.errorElement||h===0)?X.createElement(aue,{location:n.location,revalidation:n.revalidation,component:p,error:d,children:x(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):x()},null)}function jB(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function cue(r){let e=X.useContext(Qy);return Ei(e,jB(r)),e}function uue(r){let e=X.useContext(cM);return Ei(e,jB(r)),e}function hue(r){let e=X.useContext(cc);return Ei(e,jB(r)),e}function UB(r){let e=hue(r),n=e.matches[e.matches.length-1];return Ei(n.route.id,`${r} can only be used on routes that contain a unique "id"`),n.route.id}function due(){return UB("useRouteId")}function fue(){var i;let r=X.useContext(BB),e=uue("useRouteError"),n=UB("useRouteError");return r!==void 0?r:(i=e.errors)==null?void 0:i[n]}function pue(){let{router:r}=cue("useNavigate"),e=UB("useNavigate"),n=X.useRef(!1);return NQ(()=>{n.current=!0}),X.useCallback(async(s,a={})=>{Vc(n.current,CQ),n.current&&(typeof s=="number"?r.navigate(s):await r.navigate(s,{fromRouteId:e,...a}))},[r,e])}var i$={};function kQ(r,e,n){!e&&!i$[r]&&(i$[r]=!0,Vc(!1,n))}X.memo(mue);function mue({routes:r,future:e,state:n}){return OQ(r,void 0,n,e)}function IQ(r){return nue(r.context)}function zr(r){Ei(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function gue({basename:r="/",children:e=null,location:n,navigationType:i="POP",navigator:s,static:a=!1}){Ei(!f_(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=r.replace(/^\/*/,"/"),l=X.useMemo(()=>({basename:o,navigator:s,static:a,future:{}}),[o,s,a]);typeof n=="string"&&(n=Zy(n));let{pathname:c="/",search:u="",hash:h="",state:d=null,key:f="default"}=n,p=X.useMemo(()=>{let g=fh(c,o);return g==null?null:{location:{pathname:g,search:u,hash:h,state:d,key:f},navigationType:i}},[o,c,u,h,d,f,i]);return Vc(p!=null,`<Router basename="${o}"> is not able to match the URL "${c}${u}${h}" because it does not start with the basename, so the <Router> won't render anything.`),p==null?null:X.createElement(eu.Provider,{value:l},X.createElement(d_.Provider,{children:e,value:p}))}function yue({children:r,location:e}){return rue(FL(r),e)}function FL(r,e=[]){let n=[];return X.Children.forEach(r,(i,s)=>{if(!X.isValidElement(i))return;let a=[...e,s];if(i.type===X.Fragment){n.push.apply(n,FL(i.props.children,a));return}Ei(i.type===zr,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ei(!i.props.index||!i.props.children,"An index route cannot have child routes.");let o={id:i.props.id||a.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(o.children=FL(i.props.children,a)),n.push(o)}),n}var QS="get",JS="application/x-www-form-urlencoded";function uM(r){return r!=null&&typeof r.tagName=="string"}function vue(r){return uM(r)&&r.tagName.toLowerCase()==="button"}function xue(r){return uM(r)&&r.tagName.toLowerCase()==="form"}function bue(r){return uM(r)&&r.tagName.toLowerCase()==="input"}function _ue(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function wue(r,e){return r.button===0&&(!e||e==="_self")&&!_ue(r)}var $w=null;function Sue(){if($w===null)try{new FormData(document.createElement("form"),0),$w=!1}catch{$w=!0}return $w}var Tue=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function _2(r){return r!=null&&!Tue.has(r)?(Vc(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${JS}"`),null):r}function Eue(r,e){let n,i,s,a,o;if(xue(r)){let l=r.getAttribute("action");i=l?fh(l,e):null,n=r.getAttribute("method")||QS,s=_2(r.getAttribute("enctype"))||JS,a=new FormData(r)}else if(vue(r)||bue(r)&&(r.type==="submit"||r.type==="image")){let l=r.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=r.getAttribute("formaction")||l.getAttribute("action");if(i=c?fh(c,e):null,n=r.getAttribute("formmethod")||l.getAttribute("method")||QS,s=_2(r.getAttribute("formenctype"))||_2(l.getAttribute("enctype"))||JS,a=new FormData(l,r),!Sue()){let{name:u,type:h,value:d}=r;if(h==="image"){let f=u?`${u}.`:"";a.append(`${f}x`,"0"),a.append(`${f}y`,"0")}else u&&a.append(u,d)}}else{if(uM(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=QS,i=null,s=JS,o=r}return a&&s==="text/plain"&&(o=a,a=void 0),{action:i,method:n.toLowerCase(),encType:s,formData:a,body:o}}function zB(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}async function Mue(r,e){if(r.id in e)return e[r.id];try{let n=await import(r.module);return e[r.id]=n,n}catch(n){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Aue(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function Cue(r,e,n){let i=await Promise.all(r.map(async s=>{let a=e.routes[s.route.id];if(a){let o=await Mue(a,n);return o.links?o.links():[]}return[]}));return Oue(i.flat(1).filter(Aue).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function s$(r,e,n,i,s,a){let o=(c,u)=>n[u]?c.route.id!==n[u].route.id:!0,l=(c,u)=>{var h;return n[u].pathname!==c.pathname||((h=n[u].route.path)==null?void 0:h.endsWith("*"))&&n[u].params["*"]!==c.params["*"]};return a==="assets"?e.filter((c,u)=>o(c,u)||l(c,u)):a==="data"?e.filter((c,u)=>{var d;let h=i.routes[c.route.id];if(!h||!h.hasLoader)return!1;if(o(c,u)||l(c,u))return!0;if(c.route.shouldRevalidate){let f=c.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((d=n[0])==null?void 0:d.params)||{},nextUrl:new URL(r,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof f=="boolean")return f}return!0}):[]}function Nue(r,e,{includeHydrateFallback:n}={}){return Pue(r.map(i=>{let s=e.routes[i.route.id];if(!s)return[];let a=[s.module];return s.clientActionModule&&(a=a.concat(s.clientActionModule)),s.clientLoaderModule&&(a=a.concat(s.clientLoaderModule)),n&&s.hydrateFallbackModule&&(a=a.concat(s.hydrateFallbackModule)),s.imports&&(a=a.concat(s.imports)),a}).flat(1))}function Pue(r){return[...new Set(r)]}function Rue(r){let e={},n=Object.keys(r).sort();for(let i of n)e[i]=r[i];return e}function Oue(r,e){let n=new Set;return new Set(e),r.reduce((i,s)=>{let a=JSON.stringify(Rue(s));return n.has(a)||(n.add(a),i.push({key:a,link:s})),i},[])}function kue(r,e){let n=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return n.pathname==="/"?n.pathname="_root.data":e&&fh(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.data`:n.pathname=`${n.pathname.replace(/\/$/,"")}.data`,n}function DQ(){let r=X.useContext(Qy);return zB(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function Iue(){let r=X.useContext(cM);return zB(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var $B=X.createContext(void 0);$B.displayName="FrameworkContext";function LQ(){let r=X.useContext($B);return zB(r,"You must render this element inside a <HydratedRouter> element"),r}function Due(r,e){let n=X.useContext($B),[i,s]=X.useState(!1),[a,o]=X.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:u,onMouseLeave:h,onTouchStart:d}=e,f=X.useRef(null);X.useEffect(()=>{if(r==="render"&&o(!0),r==="viewport"){let v=_=>{_.forEach(E=>{o(E.isIntersecting)})},x=new IntersectionObserver(v,{threshold:.5});return f.current&&x.observe(f.current),()=>{x.disconnect()}}},[r]),X.useEffect(()=>{if(i){let v=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(v)}}},[i]);let p=()=>{s(!0)},g=()=>{s(!1),o(!1)};return n?r!=="intent"?[a,f,{}]:[a,f,{onFocus:K0(l,p),onBlur:K0(c,g),onMouseEnter:K0(u,p),onMouseLeave:K0(h,g),onTouchStart:K0(d,p)}]:[!1,f,{}]}function K0(r,e){return n=>{r&&r(n),n.defaultPrevented||e(n)}}function Lue({page:r,...e}){let{router:n}=DQ(),i=X.useMemo(()=>_Q(n.routes,r,n.basename),[n.routes,r,n.basename]);return i?X.createElement(Bue,{page:r,matches:i,...e}):null}function Fue(r){let{manifest:e,routeModules:n}=LQ(),[i,s]=X.useState([]);return X.useEffect(()=>{let a=!1;return Cue(r,e,n).then(o=>{a||s(o)}),()=>{a=!0}},[r,e,n]),i}function Bue({page:r,matches:e,...n}){let i=$d(),{manifest:s,routeModules:a}=LQ(),{basename:o}=DQ(),{loaderData:l,matches:c}=Iue(),u=X.useMemo(()=>s$(r,e,c,s,i,"data"),[r,e,c,s,i]),h=X.useMemo(()=>s$(r,e,c,s,i,"assets"),[r,e,c,s,i]),d=X.useMemo(()=>{if(r===i.pathname+i.search+i.hash)return[];let g=new Set,v=!1;if(e.forEach(_=>{var S;let E=s.routes[_.route.id];!E||!E.hasLoader||(!u.some(T=>T.route.id===_.route.id)&&_.route.id in l&&((S=a[_.route.id])!=null&&S.shouldRevalidate)||E.hasClientLoader?v=!0:g.add(_.route.id))}),g.size===0)return[];let x=kue(r,o);return v&&g.size>0&&x.searchParams.set("_routes",e.filter(_=>g.has(_.route.id)).map(_=>_.route.id).join(",")),[x.pathname+x.search]},[o,l,i,s,u,e,r,a]),f=X.useMemo(()=>Nue(h,s),[h,s]),p=Fue(h);return X.createElement(X.Fragment,null,d.map(g=>X.createElement("link",{key:g,rel:"prefetch",as:"fetch",href:g,...n})),f.map(g=>X.createElement("link",{key:g,rel:"modulepreload",href:g,...n})),p.map(({key:g,link:v})=>X.createElement("link",{key:g,...v})))}function jue(...r){return e=>{r.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var FQ=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{FQ&&(window.__reactRouterVersion="7.4.1")}catch{}function Uue({basename:r,children:e,window:n}){let i=X.useRef();i.current==null&&(i.current=Ace({window:n,v5Compat:!0}));let s=i.current,[a,o]=X.useState({action:s.action,location:s.location}),l=X.useCallback(c=>{X.startTransition(()=>o(c))},[o]);return X.useLayoutEffect(()=>s.listen(l),[s,l]),X.createElement(gue,{basename:r,children:e,location:a.location,navigationType:a.action,navigator:s})}var BQ=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,yr=X.forwardRef(function({onClick:e,discover:n="render",prefetch:i="none",relative:s,reloadDocument:a,replace:o,state:l,target:c,to:u,preventScrollReset:h,viewTransition:d,...f},p){let{basename:g}=X.useContext(eu),v=typeof u=="string"&&BQ.test(u),x,_=!1;if(typeof u=="string"&&v&&(x=u,FQ))try{let R=new URL(window.location.href),O=u.startsWith("//")?new URL(R.protocol+u):new URL(u),D=fh(O.pathname,g);O.origin===R.origin&&D!=null?u=D+O.search+O.hash:_=!0}catch{Vc(!1,`<Link to="${u}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let E=Jce(u,{relative:s}),[S,T,M]=Due(i,f),C=Vue(u,{replace:o,state:l,target:c,preventScrollReset:h,relative:s,viewTransition:d});function A(R){e&&e(R),R.defaultPrevented||C(R)}let P=X.createElement("a",{...f,...M,href:x||E,onClick:_||a?e:A,ref:jue(p,T),target:c,"data-discover":!v&&n==="render"?"true":void 0});return S&&!v?X.createElement(X.Fragment,null,P,X.createElement(Lue,{page:E})):P});yr.displayName="Link";var zue=X.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:i="",end:s=!1,style:a,to:o,viewTransition:l,children:c,...u},h){let d=p_(o,{relative:u.relative}),f=$d(),p=X.useContext(cM),{navigator:g,basename:v}=X.useContext(eu),x=p!=null&&Kue(d)&&l===!0,_=g.encodeLocation?g.encodeLocation(d).pathname:d.pathname,E=f.pathname,S=p&&p.navigation&&p.navigation.location?p.navigation.location.pathname:null;n||(E=E.toLowerCase(),S=S?S.toLowerCase():null,_=_.toLowerCase()),S&&v&&(S=fh(S,v)||S);const T=_!=="/"&&_.endsWith("/")?_.length-1:_.length;let M=E===_||!s&&E.startsWith(_)&&E.charAt(T)==="/",C=S!=null&&(S===_||!s&&S.startsWith(_)&&S.charAt(_.length)==="/"),A={isActive:M,isPending:C,isTransitioning:x},P=M?e:void 0,R;typeof i=="function"?R=i(A):R=[i,M?"active":null,C?"pending":null,x?"transitioning":null].filter(Boolean).join(" ");let O=typeof a=="function"?a(A):a;return X.createElement(yr,{...u,"aria-current":P,className:R,ref:h,style:O,to:o,viewTransition:l},typeof c=="function"?c(A):c)});zue.displayName="NavLink";var $ue=X.forwardRef(({discover:r="render",fetcherKey:e,navigate:n,reloadDocument:i,replace:s,state:a,method:o=QS,action:l,onSubmit:c,relative:u,preventScrollReset:h,viewTransition:d,...f},p)=>{let g=que(),v=Xue(l,{relative:u}),x=o.toLowerCase()==="get"?"get":"post",_=typeof l=="string"&&BQ.test(l),E=S=>{if(c&&c(S),S.defaultPrevented)return;S.preventDefault();let T=S.nativeEvent.submitter,M=(T==null?void 0:T.getAttribute("formmethod"))||o;g(T||S.currentTarget,{fetcherKey:e,method:M,navigate:n,replace:s,state:a,relative:u,preventScrollReset:h,viewTransition:d})};return X.createElement("form",{ref:p,method:x,action:v,onSubmit:i?c:E,...f,"data-discover":!_&&r==="render"?"true":void 0})});$ue.displayName="Form";function Gue(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function jQ(r){let e=X.useContext(Qy);return Ei(e,Gue(r)),e}function Vue(r,{target:e,replace:n,state:i,preventScrollReset:s,relative:a,viewTransition:o}={}){let l=PQ(),c=$d(),u=p_(r,{relative:a});return X.useCallback(h=>{if(wue(h,e)){h.preventDefault();let d=n!==void 0?n:jx(c)===jx(u);l(r,{replace:d,state:i,preventScrollReset:s,relative:a,viewTransition:o})}},[c,l,u,n,i,e,r,s,a,o])}var Hue=0,Wue=()=>`__${String(++Hue)}__`;function que(){let{router:r}=jQ("useSubmit"),{basename:e}=X.useContext(eu),n=due();return X.useCallback(async(i,s={})=>{let{action:a,method:o,encType:l,formData:c,body:u}=Eue(i,e);if(s.navigate===!1){let h=s.fetcherKey||Wue();await r.fetch(h,n,s.action||a,{preventScrollReset:s.preventScrollReset,formData:c,body:u,formMethod:s.method||o,formEncType:s.encType||l,flushSync:s.flushSync})}else await r.navigate(s.action||a,{preventScrollReset:s.preventScrollReset,formData:c,body:u,formMethod:s.method||o,formEncType:s.encType||l,replace:s.replace,state:s.state,fromRouteId:n,flushSync:s.flushSync,viewTransition:s.viewTransition})},[r,e,n])}function Xue(r,{relative:e}={}){let{basename:n}=X.useContext(eu),i=X.useContext(cc);Ei(i,"useFormAction must be used inside a RouteContext");let[s]=i.matches.slice(-1),a={...p_(r||".",{relative:e})},o=$d();if(r==null){a.search=o.search;let l=new URLSearchParams(a.search),c=l.getAll("index");if(c.some(h=>h==="")){l.delete("index"),c.filter(d=>d).forEach(d=>l.append("index",d));let h=l.toString();a.search=h?`?${h}`:""}}return(!r||r===".")&&s.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(a.pathname=a.pathname==="/"?n:nh([n,a.pathname])),jx(a)}function Kue(r,e={}){let n=X.useContext(AQ);Ei(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=jQ("useViewTransitionState"),s=p_(r,{relative:e.relative});if(!n.isTransitioning)return!1;let a=fh(n.currentLocation.pathname,i)||n.currentLocation.pathname,o=fh(n.nextLocation.pathname,i)||n.nextLocation.pathname;return TT(s.pathname,o)!=null||TT(s.pathname,a)!=null}new TextEncoder;const UQ=X.createContext(),hM=()=>X.useContext(UQ),Yue=({children:r})=>{const[e,n]=X.useState(null),[i,s]=X.useState(localStorage.getItem("token")),[a,o]=X.useState(!0);X.useEffect(()=>{(async()=>{if(!i){o(!1);return}try{const p=await fetch("/api/auth/verify",{method:"GET",headers:{Authorization:`Bearer ${i}`}});if(p.ok){const g=await p.json();n(g.user)}else u()}catch(p){console.error("Error verifying token:",p),u()}finally{o(!1)}})()},[i]);const l=async(f,p)=>{try{const g=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:f,password:p})}),v=await g.json();if(!g.ok)throw new Error(v.message||"Login failed");return localStorage.setItem("token",v.token),s(v.token),n(v.user),v.user}catch(g){throw g}},c=async f=>{try{const p=await fetch("/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(f)}),g=await p.json();if(!p.ok)throw new Error(g.message||"Registration failed");return g}catch(p){throw p}},u=()=>{localStorage.removeItem("token"),s(null),n(null)},d={currentUser:e,token:i,loading:a,login:l,register:c,logout:u,getUserProfile:async()=>{try{if(!i)throw new Error("No authentication token");const f=await fetch("/api/auth/profile",{method:"GET",headers:{Authorization:`Bearer ${i}`}}),p=await f.json();if(!f.ok)throw new Error(p.message||"Failed to get user profile");return n(p.user),p.user}catch(f){throw f}}};return b.jsx(UQ.Provider,{value:d,children:!a&&r})};var zQ="basil",Zue=function(e){return e===3?"v3":e},$Q="https://js.stripe.com",Que="".concat($Q,"/").concat(zQ,"/stripe.js"),Jue=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,ehe=/^https:\/\/js\.stripe\.com\/(v3|[a-z]+)\/stripe\.js(\?.*)?$/;var the=function(e){return Jue.test(e)||ehe.test(e)},nhe=function(){for(var e=document.querySelectorAll('script[src^="'.concat($Q,'"]')),n=0;n<e.length;n++){var i=e[n];if(the(i.src))return i}return null},a$=function(e){var n="",i=document.createElement("script");i.src="".concat(Que).concat(n);var s=document.head||document.body;if(!s)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return s.appendChild(i),i},rhe=function(e,n){!e||!e._registerWrapper||e._registerWrapper({name:"stripe-js",version:"7.0.0",startTime:n})},Y0=null,Gw=null,Vw=null,ihe=function(e){return function(n){e(new Error("Failed to load Stripe.js",{cause:n}))}},she=function(e,n){return function(){window.Stripe?e(window.Stripe):n(new Error("Stripe.js not available"))}},ahe=function(e){return Y0!==null?Y0:(Y0=new Promise(function(n,i){if(typeof window>"u"||typeof document>"u"){n(null);return}if(window.Stripe){n(window.Stripe);return}try{var s=nhe();if(!(s&&e)){if(!s)s=a$(e);else if(s&&Vw!==null&&Gw!==null){var a;s.removeEventListener("load",Vw),s.removeEventListener("error",Gw),(a=s.parentNode)===null||a===void 0||a.removeChild(s),s=a$(e)}}Vw=she(n,i),Gw=ihe(i),s.addEventListener("load",Vw),s.addEventListener("error",Gw)}catch(o){i(o);return}}),Y0.catch(function(n){return Y0=null,Promise.reject(n)}))},ohe=function(e,n,i){if(e===null)return null;var s=n[0],a=s.match(/^pk_test/),o=Zue(e.version),l=zQ;a&&o!==l&&console.warn("Stripe.js@".concat(o," was loaded on the page, but @stripe/stripe-js@").concat("7.0.0"," expected Stripe.js@").concat(l,". This may result in unexpected behavior. For more information, see https://docs.stripe.com/sdks/stripejs-versioning"));var c=e.apply(void 0,n);return rhe(c,i),c},Z0,GQ=!1,VQ=function(){return Z0||(Z0=ahe(null).catch(function(e){return Z0=null,Promise.reject(e)}),Z0)};Promise.resolve().then(function(){return VQ()}).catch(function(r){GQ||console.warn(r)});var HQ=function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];GQ=!0;var s=Date.now();return VQ().then(function(a){return ohe(a,n,s)})},w2={exports:{}},S2,o$;function lhe(){if(o$)return S2;o$=1;var r="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return S2=r,S2}var T2,l$;function che(){if(l$)return T2;l$=1;var r=lhe();function e(){}function n(){}return n.resetWarningCache=e,T2=function(){function i(o,l,c,u,h,d){if(d!==r){var f=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw f.name="Invariant Violation",f}}i.isRequired=i;function s(){return i}var a={array:i,bigint:i,bool:i,func:i,number:i,object:i,string:i,symbol:i,any:i,arrayOf:s,element:i,elementType:i,instanceOf:s,node:i,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:n,resetWarningCache:e};return a.PropTypes=a,a},T2}var c$;function uhe(){return c$||(c$=1,w2.exports=che()()),w2.exports}var hhe=uhe();const ne=_r(hhe);function u$(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable})),n.push.apply(n,i)}return n}function h$(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?u$(Object(n),!0).forEach(function(i){WQ(r,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):u$(Object(n)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(n,i))})}return r}function eT(r){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?eT=function(e){return typeof e}:eT=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},eT(r)}function WQ(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function dhe(r,e){if(r==null)return{};var n={},i=Object.keys(r),s,a;for(a=0;a<i.length;a++)s=i[a],!(e.indexOf(s)>=0)&&(n[s]=r[s]);return n}function fhe(r,e){if(r==null)return{};var n=dhe(r,e),i,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);for(s=0;s<a.length;s++)i=a[s],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(r,i)&&(n[i]=r[i])}return n}function qQ(r,e){return phe(r)||mhe(r,e)||ghe(r,e)||yhe()}function phe(r){if(Array.isArray(r))return r}function mhe(r,e){var n=r&&(typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"]);if(n!=null){var i=[],s=!0,a=!1,o,l;try{for(n=n.call(r);!(s=(o=n.next()).done)&&(i.push(o.value),!(e&&i.length===e));s=!0);}catch(c){a=!0,l=c}finally{try{!s&&n.return!=null&&n.return()}finally{if(a)throw l}}return i}}function ghe(r,e){if(r){if(typeof r=="string")return d$(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d$(r,e)}}function d$(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=r[n];return i}function yhe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var mo=function(e,n,i){var s=!!i,a=ce.useRef(i);ce.useEffect(function(){a.current=i},[i]),ce.useEffect(function(){if(!s||!e)return function(){};var o=function(){a.current&&a.current.apply(a,arguments)};return e.on(n,o),function(){e.off(n,o)}},[s,n,e,a])},BL=function(e){var n=ce.useRef(e);return ce.useEffect(function(){n.current=e},[e]),n.current},Yg=function(e){return e!==null&&eT(e)==="object"},vhe=function(e){return Yg(e)&&typeof e.then=="function"},xhe=function(e){return Yg(e)&&typeof e.elements=="function"&&typeof e.createToken=="function"&&typeof e.createPaymentMethod=="function"&&typeof e.confirmCardPayment=="function"},f$="[object Object]",bhe=function r(e,n){if(!Yg(e)||!Yg(n))return e===n;var i=Array.isArray(e),s=Array.isArray(n);if(i!==s)return!1;var a=Object.prototype.toString.call(e)===f$,o=Object.prototype.toString.call(n)===f$;if(a!==o)return!1;if(!a&&!i)return e===n;var l=Object.keys(e),c=Object.keys(n);if(l.length!==c.length)return!1;for(var u={},h=0;h<l.length;h+=1)u[l[h]]=!0;for(var d=0;d<c.length;d+=1)u[c[d]]=!0;var f=Object.keys(u);if(f.length!==l.length)return!1;var p=e,g=n,v=function(_){return r(p[_],g[_])};return f.every(v)},XQ=function(e,n,i){return Yg(e)?Object.keys(e).reduce(function(s,a){var o=!Yg(n)||!bhe(e[a],n[a]);return i.includes(a)?(o&&console.warn("Unsupported prop change: options.".concat(a," is not a mutable property.")),s):o?h$(h$({},s||{}),{},WQ({},a,e[a])):s},null):null},KQ="Invalid prop `stripe` supplied to `Elements`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",p$=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:KQ;if(e===null||xhe(e))return e;throw new Error(n)},_he=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:KQ;if(vhe(e))return{tag:"async",stripePromise:Promise.resolve(e).then(function(s){return p$(s,n)})};var i=p$(e,n);return i===null?{tag:"empty"}:{tag:"sync",stripe:i}},whe=function(e){!e||!e._registerWrapper||!e.registerAppInfo||(e._registerWrapper({name:"react-stripe-js",version:"3.6.0"}),e.registerAppInfo({name:"react-stripe-js",version:"3.6.0",url:"https://stripe.com/docs/stripe-js/react"}))},dM=ce.createContext(null);dM.displayName="ElementsContext";var YQ=function(e,n){if(!e)throw new Error("Could not find Elements context; You need to wrap the part of your app that ".concat(n," in an <Elements> provider."));return e},GB=function(e){var n=e.stripe,i=e.options,s=e.children,a=ce.useMemo(function(){return _he(n)},[n]),o=ce.useState(function(){return{stripe:a.tag==="sync"?a.stripe:null,elements:a.tag==="sync"?a.stripe.elements(i):null}}),l=qQ(o,2),c=l[0],u=l[1];ce.useEffect(function(){var f=!0,p=function(v){u(function(x){return x.stripe?x:{stripe:v,elements:v.elements(i)}})};return a.tag==="async"&&!c.stripe?a.stripePromise.then(function(g){g&&f&&p(g)}):a.tag==="sync"&&!c.stripe&&p(a.stripe),function(){f=!1}},[a,c,i]);var h=BL(n);ce.useEffect(function(){h!==null&&h!==n&&console.warn("Unsupported prop change on Elements: You cannot change the `stripe` prop after setting it.")},[h,n]);var d=BL(i);return ce.useEffect(function(){if(c.elements){var f=XQ(i,d,["clientSecret","fonts"]);f&&c.elements.update(f)}},[i,d,c.elements]),ce.useEffect(function(){whe(c.stripe)},[c.stripe]),ce.createElement(dM.Provider,{value:c},s)};GB.propTypes={stripe:ne.any,options:ne.object};var She=function(e){var n=ce.useContext(dM);return YQ(n,e)},The=function(){var e=She("calls useElements()"),n=e.elements;return n};ne.func.isRequired;var ZQ=ce.createContext(null);ZQ.displayName="CheckoutSdkContext";var Ehe=function(e,n){if(!e)throw new Error("Could not find CheckoutProvider context; You need to wrap the part of your app that ".concat(n," in an <CheckoutProvider> provider."));return e},Mhe=ce.createContext(null);Mhe.displayName="CheckoutContext";ne.any,ne.shape({fetchClientSecret:ne.func.isRequired,elementsOptions:ne.object}).isRequired;var jL=function(e){var n=ce.useContext(ZQ),i=ce.useContext(dM);if(n&&i)throw new Error("You cannot wrap the part of your app that ".concat(e," in both <CheckoutProvider> and <Elements> providers."));return n?Ehe(n,e):YQ(i,e)},Ahe=["mode"],Che=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},ns=function(e,n){var i="".concat(Che(e),"Element"),s=function(c){var u=c.id,h=c.className,d=c.options,f=d===void 0?{}:d,p=c.onBlur,g=c.onFocus,v=c.onReady,x=c.onChange,_=c.onEscape,E=c.onClick,S=c.onLoadError,T=c.onLoaderStart,M=c.onNetworksChange,C=c.onConfirm,A=c.onCancel,P=c.onShippingAddressChange,R=c.onShippingRateChange,O=jL("mounts <".concat(i,">")),D="elements"in O?O.elements:null,F="checkoutSdk"in O?O.checkoutSdk:null,U=ce.useState(null),B=qQ(U,2),W=B[0],j=B[1],$=ce.useRef(null),z=ce.useRef(null);mo(W,"blur",p),mo(W,"focus",g),mo(W,"escape",_),mo(W,"click",E),mo(W,"loaderror",S),mo(W,"loaderstart",T),mo(W,"networkschange",M),mo(W,"confirm",C),mo(W,"cancel",A),mo(W,"shippingaddresschange",P),mo(W,"shippingratechange",R),mo(W,"change",x);var Z;v&&(e==="expressCheckout"?Z=v:Z=function(){v(W)}),mo(W,"ready",Z),ce.useLayoutEffect(function(){if($.current===null&&z.current!==null&&(D||F)){var q=null;if(F)switch(e){case"payment":q=F.createPaymentElement(f);break;case"address":if("mode"in f){var ue=f.mode,be=fhe(f,Ahe);if(ue==="shipping")q=F.createShippingAddressElement(be);else if(ue==="billing")q=F.createBillingAddressElement(be);else throw new Error("Invalid options.mode. mode must be 'billing' or 'shipping'.")}else throw new Error("You must supply options.mode. mode must be 'billing' or 'shipping'.");break;case"expressCheckout":q=F.createExpressCheckoutElement(f);break;case"currencySelector":q=F.createCurrencySelectorElement();break;default:throw new Error("Invalid Element type ".concat(i,". You must use either the <PaymentElement />, <AddressElement options={{mode: 'shipping'}} />, <AddressElement options={{mode: 'billing'}} />, or <ExpressCheckoutElement />."))}else D&&(q=D.create(e,f));$.current=q,j(q),q&&q.mount(z.current)}},[D,F,f]);var se=BL(f);return ce.useEffect(function(){if($.current){var q=XQ(f,se,["paymentRequest"]);q&&"update"in $.current&&$.current.update(q)}},[f,se]),ce.useLayoutEffect(function(){return function(){if($.current&&typeof $.current.destroy=="function")try{$.current.destroy(),$.current=null}catch{}}},[]),ce.createElement("div",{id:u,className:h,ref:z})},a=function(c){jL("mounts <".concat(i,">"));var u=c.id,h=c.className;return ce.createElement("div",{id:u,className:h})},o=n?a:s;return o.propTypes={id:ne.string,className:ne.string,onChange:ne.func,onBlur:ne.func,onFocus:ne.func,onReady:ne.func,onEscape:ne.func,onClick:ne.func,onLoadError:ne.func,onLoaderStart:ne.func,onNetworksChange:ne.func,onConfirm:ne.func,onCancel:ne.func,onShippingAddressChange:ne.func,onShippingRateChange:ne.func,options:ne.object},o.displayName=i,o.__elementType=e,o},rs=typeof window>"u",Nhe=ce.createContext(null);Nhe.displayName="EmbeddedCheckoutProviderContext";var Phe=function(){var e=jL("calls useStripe()"),n=e.stripe;return n};ns("auBankAccount",rs);var m$=ns("card",rs);ns("cardNumber",rs);ns("cardExpiry",rs);ns("cardCvc",rs);ns("fpxBank",rs);ns("iban",rs);ns("idealBank",rs);ns("p24Bank",rs);ns("epsBank",rs);ns("payment",rs);ns("expressCheckout",rs);ns("currencySelector",rs);ns("paymentRequestButton",rs);ns("linkAuthentication",rs);ns("address",rs);ns("shippingAddress",rs);ns("paymentMethodMessaging",rs);ns("affirmMessage",rs);ns("afterpayClearpayMessage",rs);const Rhe=HQ(void 0),QQ=X.createContext(),Ohe=()=>X.useContext(QQ),khe=({children:r})=>{const{currentUser:e,token:n}=hM(),[i,s]=X.useState(!0),[a,o]=X.useState(null),[l,c]=X.useState([]),[u,h]=X.useState([]),[d,f]=X.useState({basic:{monthly:49,yearly:490,features:["Up to 5 websites","Basic SEO audits","Manual implementation","Email support"]},professional:{monthly:99,yearly:990,features:["Up to 15 websites","Advanced SEO audits","Semi-automated implementation","Priority email support","Weekly reports"]},enterprise:{monthly:199,yearly:1990,features:["Unlimited websites","Comprehensive SEO audits","Fully automated implementation","Dedicated support manager","Custom reporting","API access"]}});X.useEffect(()=>{(async()=>{if(!e||!n){s(!1);return}try{s(!0);const T=await fetch(`/api/payments/subscription/${e._id}`,{headers:{Authorization:`Bearer ${n}`}});if(T.ok){const M=await T.json();o(M)}else o(null)}catch(T){console.error("Error fetching subscription data:",T)}finally{s(!1)}})()},[e,n]);const p=async()=>{try{const S=await fetch("/api/payments/create-customer",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n}`},body:JSON.stringify({userId:e._id})});if(!S.ok)throw new Error("Failed to create customer");return(await S.json()).customerId}catch(S){throw console.error("Error creating customer:",S),S}},E={loading:i,subscription:a,prices:d,createSubscription:async(S,T,M)=>{try{let C=e.stripeCustomerId;C||(C=(await p()).customerId);const A=await fetch("/api/payments/create-subscription",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n}`},body:JSON.stringify({customerId:C,paymentMethodId:S,priceId:T,planType:M})});if(!A.ok)throw new Error("Failed to create subscription");return await A.json()}catch(C){throw console.error("Error creating subscription:",C),C}},cancelSubscription:async S=>{try{if(!(await fetch(`/api/payments/subscription/${S}`,{method:"DELETE",headers:{Authorization:`Bearer ${n}`}})).ok)throw new Error("Failed to cancel subscription");return a&&o({...a,cancelAtPeriodEnd:!0}),!0}catch(T){throw console.error("Error canceling subscription:",T),T}},updateSubscription:async(S,T,M)=>{try{if(!(await fetch(`/api/payments/subscription/${S}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n}`},body:JSON.stringify({newPriceId:T,planType:M})})).ok)throw new Error("Failed to update subscription");return a&&o({...a,plan:M}),!0}catch(C){throw console.error("Error updating subscription:",C),C}},createPaymentIntent:async(S,T="usd")=>{try{let M=e.stripeCustomerId;M||(M=(await p()).customerId);const C=await fetch("/api/payments/create-payment-intent",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n}`},body:JSON.stringify({amount:S,currency:T,customerId:M})});if(!C.ok)throw new Error("Failed to create payment intent");return(await C.json()).clientSecret}catch(M){throw console.error("Error creating payment intent:",M),M}}};return b.jsx(QQ.Provider,{value:E,children:b.jsx(GB,{stripe:Rhe,children:r})})},Ihe=()=>{const r=[{title:"Automatic Issue Detection",description:"Our AI-powered crawler identifies technical SEO issues across your entire website automatically.",image:"/features/issue-detection.svg",color:"bg-primary-100"},{title:"Intelligent Fix Prioritization",description:"We analyze and prioritize issues based on impact, difficulty to fix, and potential SEO benefits.",image:"/features/prioritization.svg",color:"bg-green-100"},{title:"One-Click Implementation",description:"Approve recommended fixes and our system implements them automatically with version control.",image:"/features/implementation.svg",color:"bg-orange-100"},{title:"Comprehensive Reporting",description:"Track your progress with detailed reports showing improvements and remaining issues.",image:"/features/reporting.svg",color:"bg-blue-100"}];return b.jsx("section",{className:"bg-white py-20",children:b.jsxs("div",{className:"container-custom",children:[b.jsxs("div",{className:"text-center mb-16",children:[b.jsx("span",{className:"bg-primary-100 text-primary-800 text-xs font-semibold px-3 py-1 rounded-full uppercase tracking-wide",children:"Features"}),b.jsx("h2",{className:"text-3xl md:text-4xl font-display font-bold text-gray-900 mt-4 mb-6",children:"Technical SEO on Autopilot"}),b.jsx("p",{className:"text-lg text-gray-600 max-w-3xl mx-auto",children:"Our platform handles the entire technical SEO process from discovery to implementation, freeing you to focus on strategy and content."})]}),b.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-12",children:r.map((e,n)=>b.jsxs("div",{className:"flex flex-col md:flex-row items-start gap-6",children:[b.jsx("div",{className:`w-12 h-12 ${e.color} rounded-xl flex items-center justify-center flex-shrink-0`,children:b.jsx("img",{src:e.image,alt:e.title,className:"w-6 h-6"})}),b.jsxs("div",{children:[b.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-3",children:e.title}),b.jsx("p",{className:"text-gray-600",children:e.description})]})]},n))}),b.jsx("div",{className:"mt-20 bg-gray-50 rounded-2xl overflow-hidden",children:b.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2",children:[b.jsxs("div",{className:"p-8 md:p-12 flex flex-col justify-center",children:[b.jsx("h3",{className:"text-2xl font-display font-bold text-gray-900 mb-4",children:"See how it works"}),b.jsx("p",{className:"text-gray-600 mb-6",children:"Watch our quick demo to see how SEO.engineering transforms technical SEO from a manual, time-consuming process into an automated workflow."}),b.jsxs("a",{href:"#watch-demo",className:"inline-flex items-center text-primary-600 font-medium",children:["Watch the demo",b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 ml-2",viewBox:"0 0 20 20",fill:"currentColor",children:b.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z",clipRule:"evenodd"})})]})]}),b.jsx("div",{className:"bg-gray-200 h-64 md:h-auto",children:b.jsx("div",{className:"w-full h-full flex items-center justify-center",children:b.jsx("div",{className:"w-16 h-16 bg-primary-600 rounded-full flex items-center justify-center cursor-pointer",children:b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-white",viewBox:"0 0 20 20",fill:"currentColor",children:b.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z",clipRule:"evenodd"})})})})})]})})]})})},Dhe=()=>{const r=[{quote:"SEO.engineering has transformed how we handle technical SEO for our clients. What used to take weeks now happens in hours, with better results.",author:"Sarah Johnson",role:"SEO Director",company:"Digital Growth Agency",avatar:"/testimonials/avatar1.jpg"},{quote:"I was skeptical at first, but SEO.engineering identified and fixed issues our team had missed for months. Our organic traffic is up 43% since implementing it.",author:"Michael Chen",role:"Marketing Manager",company:"TechStart Solutions",avatar:"/testimonials/avatar2.jpg"},{quote:"The automated fixes have been a game-changer for us. No more back-and-forth with developers - just approve and it's done. Incredible time savings.",author:"Alex Rodriguez",role:"Owner",company:"Rodriguez Web Consultancy",avatar:"/testimonials/avatar3.jpg"}];return b.jsx("section",{className:"bg-gray-50 py-20",children:b.jsxs("div",{className:"container-custom",children:[b.jsxs("div",{className:"text-center mb-16",children:[b.jsx("span",{className:"bg-primary-100 text-primary-800 text-xs font-semibold px-3 py-1 rounded-full uppercase tracking-wide",children:"Testimonials"}),b.jsx("h2",{className:"text-3xl md:text-4xl font-display font-bold text-gray-900 mt-4 mb-6",children:"Trusted by Agencies & Marketing Teams"}),b.jsx("p",{className:"text-lg text-gray-600 max-w-3xl mx-auto",children:"Hear from our customers who have transformed their technical SEO workflows with our automated platform."})]}),b.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:r.map((e,n)=>b.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-sm border border-gray-100 flex flex-col",children:[b.jsx("div",{className:"mb-6",children:[...Array(5)].map((i,s)=>b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-yellow-400 inline-block",viewBox:"0 0 20 20",fill:"currentColor",children:b.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})},s))}),b.jsxs("p",{className:"text-gray-600 italic mb-6 flex-grow",children:['"',e.quote,'"']}),b.jsxs("div",{className:"flex items-center",children:[b.jsx("div",{className:"w-12 h-12 rounded-full bg-gray-200 overflow-hidden flex-shrink-0",children:b.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-500",children:e.author.charAt(0)})}),b.jsxs("div",{className:"ml-4",children:[b.jsx("h4",{className:"font-semibold text-gray-900",children:e.author}),b.jsxs("p",{className:"text-sm text-gray-500",children:[e.role,", ",e.company]})]})]})]},n))}),b.jsx("div",{className:"mt-16 text-center",children:b.jsxs("div",{className:"inline-flex items-center pb-1 border-b-2 border-primary-500",children:[b.jsx("span",{className:"text-primary-600 font-medium mr-2",children:"Read more customer stories"}),b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-primary-600",viewBox:"0 0 20 20",fill:"currentColor",children:b.jsx("path",{fillRule:"evenodd",d:"M10.293 5.293a1 1 0 011.414 0l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414-1.414L12.586 11H5a1 1 0 110-2h7.586l-2.293-2.293a1 1 0 010-1.414z",clipRule:"evenodd"})})]})})]})})},Lhe=()=>{const[r,e]=X.useState(!0),n=[{name:"Starter",description:"Perfect for small businesses and individual sites",monthlyPrice:49,annualPrice:39,features:["Up to 5,000 pages scanned","Weekly automated scans","Basic technical SEO checks","10 automatic fixes per month","Email reports","Basic dashboard access"],cta:"Start free trial",highlight:!1},{name:"Professional",description:"Ideal for growing businesses and agencies",monthlyPrice:149,annualPrice:119,features:["Up to 25,000 pages scanned","Daily automated scans","Advanced technical SEO checks","Unlimited automatic fixes","PDF & email reports","API access","Performance monitoring","Multi-site management"],cta:"Start free trial",highlight:!0},{name:"Enterprise",description:"For large sites and agency partnerships",monthlyPrice:499,annualPrice:399,features:["Unlimited pages scanned","Custom scan frequency","All technical SEO checks","Unlimited automatic fixes","White-label reports","Priority API access","Custom integrations","Dedicated support","Agency partner dashboard"],cta:"Contact sales",highlight:!1}];return b.jsx("section",{className:"bg-white py-20",children:b.jsxs("div",{className:"container-custom",children:[b.jsxs("div",{className:"text-center mb-16",children:[b.jsx("span",{className:"bg-primary-100 text-primary-800 text-xs font-semibold px-3 py-1 rounded-full uppercase tracking-wide",children:"Pricing"}),b.jsx("h2",{className:"text-3xl md:text-4xl font-display font-bold text-gray-900 mt-4 mb-6",children:"Simple, Transparent Pricing"}),b.jsx("p",{className:"text-lg text-gray-600 max-w-3xl mx-auto",children:"Choose the plan that fits your needs. All plans include a 14-day free trial."}),b.jsxs("div",{className:"flex items-center justify-center mt-8",children:[b.jsxs("button",{className:`px-4 py-2 rounded-l-lg font-medium ${r?"bg-primary-100 text-primary-800":"bg-gray-100 text-gray-500"}`,onClick:()=>e(!0),children:["Annual",b.jsx("span",{className:"ml-2 bg-green-100 text-green-800 text-xs px-2 py-1 rounded-full",children:"Save 20%"})]}),b.jsx("button",{className:`px-4 py-2 rounded-r-lg font-medium ${r?"bg-gray-100 text-gray-500":"bg-primary-100 text-primary-800"}`,onClick:()=>e(!1),children:"Monthly"})]})]}),b.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:n.map((i,s)=>b.jsxs("div",{className:`rounded-xl overflow-hidden ${i.highlight?"border-2 border-primary-500 shadow-lg":"border border-gray-200 shadow-sm"}`,children:[i.highlight&&b.jsx("div",{className:"bg-primary-500 text-white text-center py-2 font-medium",children:"Most Popular"}),b.jsxs("div",{className:"p-8",children:[b.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:i.name}),b.jsx("p",{className:"text-gray-600 mb-6",children:i.description}),b.jsxs("div",{className:"mb-6",children:[b.jsxs("span",{className:"text-4xl font-bold text-gray-900",children:["$",r?i.annualPrice:i.monthlyPrice]}),b.jsx("span",{className:"text-gray-500 ml-2",children:"/ month"}),r&&b.jsxs("div",{className:"text-green-600 text-sm font-medium mt-1",children:["Billed annually ($",i.annualPrice*12,"/year)"]})]}),b.jsx("ul",{className:"mb-8 space-y-4",children:i.features.map((a,o)=>b.jsxs("li",{className:"flex items-start",children:[b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-green-500 mr-2 mt-0.5",viewBox:"0 0 20 20",fill:"currentColor",children:b.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),b.jsx("span",{className:"text-gray-600",children:a})]},o))}),b.jsx(yr,{to:i.cta==="Contact sales"?"/contact":"/signup",className:`w-full block text-center py-3 px-4 rounded-lg font-medium transition-colors ${i.highlight?"bg-primary-600 text-white hover:bg-primary-700":"bg-white border border-primary-600 text-primary-600 hover:bg-primary-50"}`,children:i.cta})]})]},s))}),b.jsx("div",{className:"mt-16 p-8 bg-gray-50 rounded-xl max-w-4xl mx-auto",children:b.jsxs("div",{className:"flex flex-col md:flex-row items-center",children:[b.jsx("div",{className:"mb-6 md:mb-0 md:mr-8 flex-shrink-0",children:b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12 text-primary-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})})}),b.jsxs("div",{children:[b.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Need a custom plan?"}),b.jsx("p",{className:"text-gray-600 mb-4",children:"We offer custom solutions for agencies and enterprise clients with specific requirements. Contact our sales team to discuss your needs."}),b.jsxs(yr,{to:"/contact",className:"inline-flex items-center text-primary-600 font-medium hover:text-primary-700",children:["Contact sales",b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 ml-2",viewBox:"0 0 20 20",fill:"currentColor",children:b.jsx("path",{fillRule:"evenodd",d:"M10.293 5.293a1 1 0 011.414 0l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414-1.414L12.586 11H5a1 1 0 110-2h7.586l-2.293-2.293a1 1 0 010-1.414z",clipRule:"evenodd"})})]})]})]})})]})})},Fhe=()=>b.jsxs("div",{className:"transition-colors duration-200",children:[b.jsx("section",{className:"bg-gradient-to-b from-white to-primary-50 dark:from-black dark:to-gray-900 transition-colors duration-200",children:b.jsxs("div",{className:"container-custom section py-20",children:[b.jsxs("div",{className:"max-w-3xl mx-auto text-center",children:[b.jsx("span",{className:"bg-primary-100 text-primary-800 dark:bg-primary-900 dark:text-primary-200 text-xs font-semibold px-3 py-1 rounded-full uppercase tracking-wide transition-colors duration-200",children:"The Future of Technical SEO"}),b.jsx("h1",{className:"text-4xl md:text-5xl font-display font-bold tracking-tight text-gray-900 dark:text-white mt-6 mb-6 transition-colors duration-200",children:"Automate Your Technical SEO Workflows"}),b.jsx("p",{className:"text-xl text-gray-600 dark:text-gray-300 mb-8 transition-colors duration-200",children:"Deliver fully automated technical SEO audits, fixes, and performance optimization through our innovative AI-powered platform."}),b.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[b.jsx(yr,{to:"/signup",className:"btn-primary",children:"Start Free Trial"}),b.jsx("a",{href:"#demo",className:"btn-secondary dark:bg-gray-800 dark:text-primary-300 dark:hover:bg-gray-700 transition-colors duration-200",children:"Watch Demo"})]})]}),b.jsx("div",{className:"mt-16 max-w-5xl mx-auto",children:b.jsx("div",{className:"bg-white dark:bg-gray-900 p-4 rounded-xl shadow-lg transition-colors duration-200",children:b.jsx("img",{src:"/images/dashboard-preview.jpg",alt:"SEO.engineering Dashboard Preview",className:"rounded-lg w-full"})})})]})}),b.jsx("section",{className:"bg-gray-50 dark:bg-gray-950 py-6 transition-colors duration-200",children:b.jsx("div",{className:"container-custom",children:b.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-center md:justify-between",children:[b.jsxs("div",{className:"flex items-center mb-4 md:mb-0",children:[b.jsx("span",{className:"text-lg font-medium text-gray-700 dark:text-gray-200 mr-2 transition-colors duration-200",children:"A product by"}),b.jsx("a",{href:"https://aegntic.ai",target:"_blank",rel:"noopener noreferrer",className:"font-bold text-xl text-primary-600 dark:text-primary-400 hover:underline transition-colors duration-200",children:"aegntic.ai"})]}),b.jsx("div",{children:b.jsxs("a",{href:"https://aegntic.ai/about",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center text-sm text-gray-600 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 transition-colors duration-200",children:["Learn more about our AI-powered tools",b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 ml-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14 5l7 7m0 0l-7 7m7-7H3"})})]})})]})})}),b.jsx("section",{className:"bg-white dark:bg-black py-12 border-b border-gray-100 dark:border-gray-800 transition-colors duration-200",children:b.jsx("div",{className:"container-custom",children:b.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-8",children:[b.jsxs("div",{className:"text-center",children:[b.jsx("div",{className:"text-3xl font-bold text-primary-600 dark:text-primary-400 mb-2 transition-colors duration-200",children:"94%"}),b.jsx("p",{className:"text-gray-600 dark:text-gray-300 transition-colors duration-200",children:"Time Saved vs Manual SEO"})]}),b.jsxs("div",{className:"text-center",children:[b.jsx("div",{className:"text-3xl font-bold text-primary-600 dark:text-primary-400 mb-2 transition-colors duration-200",children:"3.2x"}),b.jsx("p",{className:"text-gray-600 dark:text-gray-300 transition-colors duration-200",children:"Average Traffic Increase"})]}),b.jsxs("div",{className:"text-center",children:[b.jsx("div",{className:"text-3xl font-bold text-primary-600 dark:text-primary-400 mb-2 transition-colors duration-200",children:"10,000+"}),b.jsx("p",{className:"text-gray-600 dark:text-gray-300 transition-colors duration-200",children:"Issues Fixed Automatically"})]}),b.jsxs("div",{className:"text-center",children:[b.jsx("div",{className:"text-3xl font-bold text-primary-600 dark:text-primary-400 mb-2 transition-colors duration-200",children:"24/7"}),b.jsx("p",{className:"text-gray-600 dark:text-gray-300 transition-colors duration-200",children:"Continuous Monitoring"})]})]})})}),b.jsx(Ihe,{}),b.jsx("section",{className:"section bg-gray-50 dark:bg-gray-950 py-20 transition-colors duration-200",children:b.jsxs("div",{className:"container-custom",children:[b.jsxs("div",{className:"text-center mb-16",children:[b.jsx("span",{className:"bg-primary-100 text-primary-800 dark:bg-primary-900 dark:text-primary-200 text-xs font-semibold px-3 py-1 rounded-full uppercase tracking-wide transition-colors duration-200",children:"Process"}),b.jsx("h2",{className:"text-3xl md:text-4xl font-display font-bold text-gray-900 dark:text-white mt-4 mb-6 transition-colors duration-200",children:"How It Works"}),b.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-300 max-w-3xl mx-auto transition-colors duration-200",children:"Our streamlined process makes technical SEO improvements effortless"})]}),b.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:[b.jsxs("div",{className:"relative",children:[b.jsx("div",{className:"absolute top-0 left-0 -mt-2 ml-4 w-8 h-8 bg-primary-500 text-white rounded-full flex items-center justify-center font-bold",children:"1"}),b.jsxs("div",{className:"bg-white dark:bg-gray-900 p-6 pt-10 rounded-lg shadow-sm border border-gray-100 dark:border-gray-800 h-full transition-colors duration-200",children:[b.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2 transition-colors duration-200",children:"Connect Site"}),b.jsx("p",{className:"text-gray-600 dark:text-gray-300 transition-colors duration-200",children:"Simply connect your website through our secure dashboard with just a few clicks."})]})]}),b.jsxs("div",{className:"relative",children:[b.jsx("div",{className:"absolute top-0 left-0 -mt-2 ml-4 w-8 h-8 bg-primary-500 text-white rounded-full flex items-center justify-center font-bold",children:"2"}),b.jsxs("div",{className:"bg-white dark:bg-gray-900 p-6 pt-10 rounded-lg shadow-sm border border-gray-100 dark:border-gray-800 h-full transition-colors duration-200",children:[b.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2 transition-colors duration-200",children:"Automated Audit"}),b.jsx("p",{className:"text-gray-600 dark:text-gray-300 transition-colors duration-200",children:"Our system performs a comprehensive scan of your site to identify all technical issues."})]})]}),b.jsxs("div",{className:"relative",children:[b.jsx("div",{className:"absolute top-0 left-0 -mt-2 ml-4 w-8 h-8 bg-primary-500 text-white rounded-full flex items-center justify-center font-bold",children:"3"}),b.jsxs("div",{className:"bg-white dark:bg-gray-900 p-6 pt-10 rounded-lg shadow-sm border border-gray-100 dark:border-gray-800 h-full transition-colors duration-200",children:[b.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2 transition-colors duration-200",children:"Implement Fixes"}),b.jsx("p",{className:"text-gray-600 dark:text-gray-300 transition-colors duration-200",children:"Approve recommended fixes and our system automatically implements them with version control."})]})]}),b.jsxs("div",{className:"relative",children:[b.jsx("div",{className:"absolute top-0 left-0 -mt-2 ml-4 w-8 h-8 bg-primary-500 text-white rounded-full flex items-center justify-center font-bold",children:"4"}),b.jsxs("div",{className:"bg-white dark:bg-gray-900 p-6 pt-10 rounded-lg shadow-sm border border-gray-100 dark:border-gray-800 h-full transition-colors duration-200",children:[b.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2 transition-colors duration-200",children:"Monitor Results"}),b.jsx("p",{className:"text-gray-600 dark:text-gray-300 transition-colors duration-200",children:"Track performance improvements and ROI through your personalized dashboard."})]})]})]})]})}),b.jsx(Dhe,{}),b.jsx(Lhe,{}),b.jsx("section",{className:"section bg-primary-700 dark:bg-primary-800 py-20 transition-colors duration-200",children:b.jsxs("div",{className:"container-custom text-center",children:[b.jsx("h2",{className:"text-3xl md:text-4xl font-display font-bold text-white mb-6",children:"Ready to transform your technical SEO?"}),b.jsx("p",{className:"text-xl text-primary-100 mb-8 max-w-3xl mx-auto",children:"Join hundreds of companies already using SEO.engineering to improve their search performance."}),b.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[b.jsx(yr,{to:"/signup",className:"inline-flex items-center justify-center px-6 py-3 border border-transparent text-base font-medium rounded-md text-primary-700 dark:text-primary-900 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-primary-700 focus:ring-white transition duration-150 ease-in-out",children:"Start Your Free Trial"}),b.jsx(yr,{to:"/contact",className:"inline-flex items-center justify-center px-6 py-3 border border-white text-base font-medium rounded-md text-white hover:bg-primary-600 dark:hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-primary-700 focus:ring-white transition duration-150 ease-in-out",children:"Contact Sales"})]})]})})]}),Bhe=()=>{const[r,e]=X.useState(!0),n=[{name:"Starter",monthlyPrice:99,annualPrice:79,features:["Up to 500 pages scanned","5 technical SEO checks","Weekly scans","Basic reporting","Email support"],cta:"Start Free Trial"},{name:"Professional",monthlyPrice:249,annualPrice:199,popular:!0,features:["Up to 5,000 pages scanned","15 technical SEO checks","Daily scans","Advanced reporting","Automated fixes","Priority support"],cta:"Start Free Trial"},{name:"Enterprise",monthlyPrice:499,annualPrice:399,features:["Unlimited pages scanned","25+ technical SEO checks","Hourly scans","Custom reporting","Automated fixes","White-label options","Dedicated account manager"],cta:"Contact Sales"}];return b.jsx("div",{className:"bg-gray-50",children:b.jsxs("div",{className:"container-custom section",children:[b.jsxs("div",{className:"text-center max-w-3xl mx-auto mb-16",children:[b.jsx("h1",{className:"text-4xl font-display font-bold text-gray-900 mb-4",children:"Simple, Transparent Pricing"}),b.jsx("p",{className:"text-xl text-gray-600 mb-8",children:"Choose the plan that's right for your business. All plans include a 14-day free trial."}),b.jsxs("div",{className:"flex items-center justify-center",children:[b.jsx("span",{className:`text-sm ${r?"text-gray-500":"text-gray-900 font-medium"}`,children:"Monthly"}),b.jsxs("button",{type:"button",className:"relative inline-flex mx-4 h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent bg-primary-500 transition-colors duration-200 ease-in-out focus:outline-none",onClick:()=>e(!r),children:[b.jsx("span",{className:"sr-only",children:"Toggle pricing"}),b.jsx("span",{className:`pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out ${r?"translate-x-5":"translate-x-0"}`})]}),b.jsxs("span",{className:`text-sm ${r?"text-gray-900 font-medium":"text-gray-500"}`,children:["Annual ",b.jsx("span",{className:"text-primary-600",children:"(20% off)"})]})]})]}),b.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:n.map((i,s)=>b.jsxs("div",{className:`bg-white rounded-lg shadow-sm border ${i.popular?"border-primary-500":"border-gray-200"} overflow-hidden`,children:[i.popular&&b.jsx("div",{className:"bg-primary-500 text-white text-center py-2 text-sm font-medium",children:"Most Popular"}),b.jsxs("div",{className:"p-6",children:[b.jsx("h2",{className:"text-2xl font-display font-bold text-gray-900",children:i.name}),b.jsxs("div",{className:"mt-4 flex items-baseline",children:[b.jsxs("span",{className:"text-4xl font-display font-bold text-gray-900",children:["$",r?i.annualPrice:i.monthlyPrice]}),b.jsx("span",{className:"text-xl text-gray-500 ml-1",children:"/mo"})]}),r&&b.jsx("p",{className:"text-sm text-primary-600 mt-1",children:"Billed annually"}),b.jsx("ul",{className:"mt-6 space-y-4",children:i.features.map((a,o)=>b.jsxs("li",{className:"flex items-start",children:[b.jsx("svg",{className:"h-5 w-5 text-primary-500 mt-0.5 flex-shrink-0",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:b.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),b.jsx("span",{className:"text-gray-600 ml-2",children:a})]},o))}),b.jsx("div",{className:"mt-8",children:b.jsx(yr,{to:i.name==="Enterprise"?"/contact":"/signup",className:`block w-full text-center py-3 px-4 rounded-md font-medium ${i.popular?"bg-primary-600 text-white hover:bg-primary-700":"bg-primary-100 text-primary-700 hover:bg-primary-200"}`,children:i.cta})})]})]},s))}),b.jsxs("div",{className:"mt-20",children:[b.jsx("h2",{className:"text-3xl font-display font-bold text-gray-900 text-center mb-12",children:"Frequently Asked Questions"}),b.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[b.jsxs("div",{children:[b.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Can I change plans later?"}),b.jsx("p",{className:"text-gray-600",children:"Yes, you can upgrade or downgrade your plan at any time. Changes take effect at the start of your next billing cycle."})]}),b.jsxs("div",{children:[b.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"What's included in the free trial?"}),b.jsx("p",{className:"text-gray-600",children:"The 14-day free trial includes all features of the plan you select, with no credit card required."})]}),b.jsxs("div",{children:[b.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Do you offer refunds?"}),b.jsx("p",{className:"text-gray-600",children:"We offer a 30-day money-back guarantee if you're not satisfied with our service."})]}),b.jsxs("div",{children:[b.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"What if I need more pages?"}),b.jsx("p",{className:"text-gray-600",children:"You can add additional page packs to any plan. Contact our sales team for custom pricing."})]})]})]})]})})},jhe=()=>b.jsx("div",{className:"container-custom section min-h-[70vh] flex items-center justify-center",children:b.jsxs("div",{className:"text-center",children:[b.jsx("h1",{className:"text-6xl font-display font-bold text-gray-900 mb-4",children:"404"}),b.jsx("h2",{className:"text-3xl font-display font-medium text-gray-700 mb-6",children:"Page Not Found"}),b.jsx("p",{className:"text-xl text-gray-600 mb-8 max-w-md mx-auto",children:"The page you're looking for doesn't exist or has been moved."}),b.jsx(yr,{to:"/",className:"btn-primary",children:"Back to Home"})]})}),Uhe=()=>{const[r,e]=X.useState(!1);return b.jsxs("nav",{className:"bg-white dark:bg-black shadow-sm border-b border-gray-200 dark:border-gray-800 transition-colors duration-200",children:[b.jsx("div",{className:"container-custom",children:b.jsxs("div",{className:"flex justify-between h-16",children:[b.jsxs("div",{className:"flex",children:[b.jsx("div",{className:"flex-shrink-0 flex items-center",children:b.jsxs(yr,{to:"/",className:"flex items-center",children:[b.jsx("img",{src:"/images/SEOengineering_LOGO.png",alt:"SEO.engineering Logo",className:"h-10 w-auto mr-2"}),b.jsx("span",{className:"text-xl font-display font-bold text-primary-600 dark:text-primary-400",children:"SEO.engineering"})]})}),b.jsxs("div",{className:"hidden sm:ml-6 sm:flex sm:space-x-8",children:[b.jsx(yr,{to:"/",className:"border-primary-500 text-gray-900 dark:text-white inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium transition-colors duration-200",children:"Home"}),b.jsx(yr,{to:"/pricing",className:"border-transparent text-gray-500 dark:text-gray-300 hover:border-gray-300 hover:text-gray-700 dark:hover:text-white inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium transition-colors duration-200",children:"Pricing"}),b.jsx("a",{href:"#features",className:"border-transparent text-gray-500 dark:text-gray-300 hover:border-gray-300 hover:text-gray-700 dark:hover:text-white inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium transition-colors duration-200",children:"Features"}),b.jsx("a",{href:"https://aegntic.ai",target:"_blank",rel:"noopener noreferrer",className:"border-transparent text-gray-500 dark:text-gray-300 hover:border-gray-300 hover:text-gray-700 dark:hover:text-white inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium transition-colors duration-200",children:"About aegntic.ai"})]})]}),b.jsxs("div",{className:"hidden sm:ml-6 sm:flex sm:items-center",children:[b.jsx(yr,{to:"/login",className:"text-gray-500 dark:text-gray-300 hover:text-gray-700 dark:hover:text-white px-3 py-2 rounded-md text-sm font-medium transition-colors duration-200",children:"Log in"}),b.jsx(yr,{to:"/signup",className:"btn-primary",children:"Get Started"})]}),b.jsx("div",{className:"-mr-2 flex items-center sm:hidden",children:b.jsxs("button",{type:"button",className:"inline-flex items-center justify-center p-2 rounded-md text-gray-400 dark:text-gray-200 hover:text-gray-500 hover:bg-gray-100 dark:hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-primary-500 transition-colors duration-200",onClick:()=>e(!r),children:[b.jsx("span",{className:"sr-only",children:"Open main menu"}),r?b.jsx("svg",{className:"block h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})}):b.jsx("svg",{className:"block h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16M4 18h16"})})]})})]})}),b.jsxs("div",{className:`${r?"block":"hidden"} sm:hidden`,children:[b.jsxs("div",{className:"pt-2 pb-3 space-y-1",children:[b.jsx(yr,{to:"/",className:"bg-primary-50 dark:bg-gray-900 border-primary-500 text-primary-700 dark:text-primary-300 block pl-3 pr-4 py-2 border-l-4 text-base font-medium transition-colors duration-200",children:"Home"}),b.jsx(yr,{to:"/pricing",className:"border-transparent text-gray-500 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-900 hover:border-gray-300 hover:text-gray-700 dark:hover:text-white block pl-3 pr-4 py-2 border-l-4 text-base font-medium transition-colors duration-200",children:"Pricing"}),b.jsx("a",{href:"#features",className:"border-transparent text-gray-500 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-900 hover:border-gray-300 hover:text-gray-700 dark:hover:text-white block pl-3 pr-4 py-2 border-l-4 text-base font-medium transition-colors duration-200",children:"Features"}),b.jsx("a",{href:"https://aegntic.ai",target:"_blank",rel:"noopener noreferrer",className:"border-transparent text-gray-500 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-900 hover:border-gray-300 hover:text-gray-700 dark:hover:text-white block pl-3 pr-4 py-2 border-l-4 text-base font-medium transition-colors duration-200",children:"About aegntic.ai"})]}),b.jsx("div",{className:"pt-4 pb-3 border-t border-gray-200 dark:border-gray-800",children:b.jsxs("div",{className:"space-y-1",children:[b.jsx(yr,{to:"/login",className:"border-transparent text-gray-500 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-900 hover:border-gray-300 hover:text-gray-700 dark:hover:text-white block pl-3 pr-4 py-2 border-l-4 text-base font-medium transition-colors duration-200",children:"Log in"}),b.jsx(yr,{to:"/signup",className:"border-transparent text-primary-600 dark:text-primary-400 hover:bg-gray-50 dark:hover:bg-gray-900 hover:border-gray-300 block pl-3 pr-4 py-2 border-l-4 text-base font-medium transition-colors duration-200",children:"Get Started"})]})})]})]})},VB=X.createContext(),zhe=({children:r})=>{const e=()=>{const a=localStorage.getItem("theme");return a||"dark"},[n,i]=X.useState(e);X.useEffect(()=>{const a=window.document.documentElement;a.classList.remove("light","dark"),a.classList.add(n),localStorage.setItem("theme",n)},[n]);const s=()=>{i(n==="light"?"dark":"light")};return b.jsx(VB.Provider,{value:{theme:n,toggleTheme:s},children:r})},$he=()=>{const{theme:r,toggleTheme:e}=X.useContext(VB);return b.jsxs("button",{onClick:e,className:"p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-800 transition-colors focus:outline-none focus:ring-2 focus:ring-primary-500","aria-label":r==="dark"?"Switch to light mode":"Switch to dark mode",children:[r==="dark"?b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-yellow-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}):b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-primary-800",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})}),b.jsx("span",{className:"ml-2 text-gray-700 dark:text-gray-300",children:r==="dark"?"Light Mode":"Dark Mode"})]})},Ghe=()=>b.jsx("footer",{className:"bg-white dark:bg-black border-t border-gray-200 dark:border-gray-800 transition-colors duration-200",children:b.jsxs("div",{className:"container-custom py-12",children:[b.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[b.jsxs("div",{className:"md:col-span-2",children:[b.jsxs(yr,{to:"/",className:"flex items-center",children:[b.jsx("img",{src:"/images/SEOengineering_LOGO.png",alt:"SEO.engineering Logo",className:"h-8 w-auto mr-2"}),b.jsx("span",{className:"text-2xl font-display font-bold text-primary-600 dark:text-primary-400 transition-colors duration-200",children:"SEO.engineering"})]}),b.jsx("p",{className:"mt-4 text-base text-gray-500 dark:text-gray-400 transition-colors duration-200",children:"The future of technical SEO automation. Deliver enterprise-grade results at scale with our AI-powered platform."}),b.jsx("div",{className:"mt-4",children:b.jsxs("a",{href:"https://aegntic.ai",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center text-primary-600 dark:text-primary-400 hover:underline",children:[b.jsx("span",{children:"A product by aegntic.ai"}),b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 ml-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})]})})]}),b.jsxs("div",{children:[b.jsx("h3",{className:"text-sm font-semibold text-gray-400 dark:text-gray-300 tracking-wider uppercase transition-colors duration-200",children:"Product"}),b.jsxs("ul",{className:"mt-4 space-y-4",children:[b.jsx("li",{children:b.jsx("a",{href:"#features",className:"text-base text-gray-500 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white transition-colors duration-200",children:"Features"})}),b.jsx("li",{children:b.jsx(yr,{to:"/pricing",className:"text-base text-gray-500 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white transition-colors duration-200",children:"Pricing"})}),b.jsx("li",{children:b.jsx("a",{href:"#roadmap",className:"text-base text-gray-500 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white transition-colors duration-200",children:"Roadmap"})})]})]}),b.jsxs("div",{children:[b.jsx("h3",{className:"text-sm font-semibold text-gray-400 dark:text-gray-300 tracking-wider uppercase transition-colors duration-200",children:"Company"}),b.jsxs("ul",{className:"mt-4 space-y-4",children:[b.jsx("li",{children:b.jsx("a",{href:"https://aegntic.ai/about",target:"_blank",rel:"noopener noreferrer",className:"text-base text-gray-500 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white transition-colors duration-200",children:"About aegntic.ai"})}),b.jsx("li",{children:b.jsx("a",{href:"#contact",className:"text-base text-gray-500 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white transition-colors duration-200",children:"Contact"})}),b.jsx("li",{children:b.jsx("a",{href:"#privacy",className:"text-base text-gray-500 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white transition-colors duration-200",children:"Privacy"})}),b.jsx("li",{children:b.jsx("a",{href:"#terms",className:"text-base text-gray-500 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white transition-colors duration-200",children:"Terms"})})]})]})]}),b.jsx("div",{className:"mt-12 border-t border-gray-200 dark:border-gray-800 pt-8 transition-colors duration-200",children:b.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center",children:[b.jsx("div",{className:"mb-4 md:mb-0",children:b.jsx($he,{})}),b.jsxs("p",{className:"text-base text-gray-400 dark:text-gray-500 transition-colors duration-200",children:["© ",new Date().getFullYear()," SEO.engineering by ",b.jsx("a",{href:"https://aegntic.ai",className:"text-primary-600 dark:text-primary-400 hover:underline",children:"aegntic.ai"}),". All rights reserved."]})]})})]})}),Vhe=()=>{const{theme:r}=X.useContext(VB);return b.jsxs("div",{className:"flex flex-col min-h-screen bg-white dark:bg-black transition-colors duration-200",children:[b.jsx(Uhe,{}),b.jsx("main",{className:"flex-grow",children:b.jsx(IQ,{})}),b.jsx(Ghe,{})]})},_h=({children:r,userData:e,pageTitle:n,moduleName:i="client"})=>{const s=$d();PQ();const[a,o]=X.useState(!1),c=i==="agency"?[{name:"Dashboard",path:"/agency/dashboard"},{name:"Clients",path:"/agency/clients"},{name:"Bulk Reports",path:"/agency/reports/bulk"},{name:"Settings",path:"/agency/settings"}]:[{name:"Overview",path:"/dashboard"},{name:"Sites",path:"/dashboard/sites"},{name:"Analytics",path:"/dashboard/analytics"},{name:"Content Optimization",path:"/dashboard/content-optimization"},{name:"Reports",path:"/dashboard/reports"},{name:"Settings",path:"/dashboard/settings"}],u=()=>{o(!a)},h=()=>i==="agency"?"SEO.engineering Agency":"SEO.engineering",d=()=>n||(i==="agency"?"Agency Portal":"Dashboard");return b.jsxs("div",{className:"min-h-screen bg-gray-50",children:[b.jsxs("nav",{className:`${i==="agency"?"bg-blue-600":"bg-white"} shadow-sm`,children:[b.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:b.jsxs("div",{className:"flex justify-between h-16",children:[b.jsxs("div",{className:"flex",children:[b.jsx("div",{className:"flex-shrink-0 flex items-center",children:b.jsx(yr,{to:i==="agency"?"/agency/dashboard":"/dashboard",className:`text-xl font-bold ${i==="agency"?"text-white":"text-indigo-600"}`,children:h()})}),b.jsx("div",{className:"hidden sm:ml-6 sm:flex sm:space-x-8",children:c.map(f=>b.jsx(yr,{to:f.path,className:`${s.pathname===f.path||f.path!=="/dashboard"&&f.path!=="/agency/dashboard"&&s.pathname.startsWith(f.path)?i==="agency"?"border-white text-white":"border-indigo-500 text-gray-900":i==="agency"?"border-transparent text-blue-100 hover:border-blue-200 hover:text-white":"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700"} inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium`,children:f.name},f.name))})]}),b.jsx("div",{className:"hidden sm:ml-6 sm:flex sm:items-center",children:b.jsx("div",{className:"ml-3 relative",children:b.jsxs("div",{children:[b.jsx("span",{className:`text-sm font-medium ${i==="agency"?"text-white":"text-gray-700"} mr-2`,children:(e==null?void 0:e.name)||"Admin User"}),b.jsxs("button",{className:"flex text-sm rounded-full focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800 focus:ring-white",children:[b.jsx("span",{className:"sr-only",children:"Open user menu"}),b.jsx("div",{className:`h-8 w-8 rounded-full ${i==="agency"?"bg-blue-200 text-blue-600":"bg-indigo-200 text-indigo-600"} flex items-center justify-center font-semibold`,children:((e==null?void 0:e.name)||"A").charAt(0)})]})]})})}),b.jsx("div",{className:"-mr-2 flex items-center sm:hidden",children:b.jsxs("button",{onClick:u,className:`inline-flex items-center justify-center p-2 rounded-md ${i==="agency"?"text-blue-100 hover:text-white hover:bg-blue-700":"text-gray-400 hover:text-gray-500 hover:bg-gray-100"} focus:outline-none focus:ring-2 focus:ring-inset focus:ring-indigo-500`,children:[b.jsx("span",{className:"sr-only",children:"Open main menu"}),b.jsx("svg",{className:"block h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16M4 18h16"})})]})})]})}),a&&b.jsxs("div",{className:"sm:hidden",children:[b.jsx("div",{className:`pt-2 pb-3 space-y-1 ${i==="agency"?"bg-blue-600":"bg-white"}`,children:c.map(f=>b.jsx(yr,{to:f.path,className:`${s.pathname===f.path?i==="agency"?"bg-blue-700 border-white text-white":"bg-indigo-50 border-indigo-500 text-indigo-700":i==="agency"?"border-transparent text-blue-100 hover:bg-blue-700 hover:border-blue-200 hover:text-white":"border-transparent text-gray-600 hover:bg-gray-50 hover:border-gray-300 hover:text-gray-800"} block pl-3 pr-4 py-2 border-l-4 text-base font-medium`,children:f.name},f.name))}),b.jsxs("div",{className:`pt-4 pb-3 border-t ${i==="agency"?"border-blue-400 bg-blue-600":"border-gray-200 bg-white"}`,children:[b.jsxs("div",{className:"flex items-center px-4",children:[b.jsx("div",{className:"flex-shrink-0",children:b.jsx("div",{className:`h-10 w-10 rounded-full ${i==="agency"?"bg-blue-200 text-blue-600":"bg-indigo-200 text-indigo-600"} flex items-center justify-center font-semibold`,children:((e==null?void 0:e.name)||"A").charAt(0)})}),b.jsxs("div",{className:"ml-3",children:[b.jsx("div",{className:`text-base font-medium ${i==="agency"?"text-white":"text-gray-800"}`,children:(e==null?void 0:e.name)||"Admin User"}),b.jsx("div",{className:`text-sm font-medium ${i==="agency"?"text-blue-100":"text-gray-500"}`,children:(e==null?void 0:e.email)||"admin@example.com"})]})]}),b.jsx("div",{className:"mt-3 space-y-1",children:b.jsx("a",{href:"#",className:`block px-4 py-2 text-base font-medium ${i==="agency"?"text-blue-100 hover:text-white hover:bg-blue-700":"text-gray-500 hover:text-gray-800 hover:bg-gray-100"}`,onClick:f=>{f.preventDefault(),console.log("Logging out")},children:"Sign out"})})]})]})]}),b.jsx("header",{className:"bg-white shadow",children:b.jsx("div",{className:"max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8",children:b.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:d()})})}),b.jsx("div",{className:"py-6",children:b.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:r})})]})},Hhe=()=>{const[r,e]=X.useState({name:"Test User",email:"test@example.com",sites:[{id:1,url:"https://example.com",lastScan:"2025-03-30",score:87},{id:2,url:"https://demo-site.com",lastScan:"2025-03-29",score:62}]});return b.jsx(_h,{userData:r,children:b.jsx(IQ,{})})},Whe=({sites:r=[]})=>b.jsxs("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:[b.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:b.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"Your Sites"})}),b.jsx("div",{className:"overflow-x-auto",children:b.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[b.jsx("thead",{className:"bg-gray-50",children:b.jsxs("tr",{children:[b.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Website"}),b.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Last Scan"}),b.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"SEO Score"}),b.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),b.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.length>0?r.map(e=>b.jsxs("tr",{children:[b.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:b.jsx("div",{className:"text-sm font-medium text-gray-900",children:e.url})}),b.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:b.jsx("div",{className:"text-sm text-gray-500",children:e.lastScan})}),b.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:b.jsx("div",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${e.score>=80?"bg-green-100 text-green-800":e.score>=60?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:e.score})}),b.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[b.jsx(yr,{to:`/dashboard/sites/${e.id}`,className:"text-indigo-600 hover:text-indigo-900 mr-4",children:"View"}),b.jsx("button",{className:"text-indigo-600 hover:text-indigo-900",children:"Scan"})]})]},e.id)):b.jsx("tr",{children:b.jsx("td",{colSpan:"4",className:"px-6 py-4 text-center text-sm text-gray-500",children:"No sites found. Add your first site to get started."})})})]})}),b.jsx("div",{className:"px-6 py-4 bg-gray-50",children:b.jsxs("button",{className:"w-full inline-flex justify-center items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[b.jsx("svg",{className:"-ml-1 mr-2 h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:b.jsx("path",{fillRule:"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z",clipRule:"evenodd"})}),"Add New Site"]})})]}),qhe=()=>b.jsxs("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:[b.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:b.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"Quick Actions"})}),b.jsxs("div",{className:"p-6 space-y-4",children:[b.jsxs("button",{className:"w-full flex items-center justify-between px-4 py-3 bg-indigo-50 text-indigo-700 rounded-md hover:bg-indigo-100 transition-colors",children:[b.jsxs("span",{className:"flex items-center",children:[b.jsx("svg",{className:"h-5 w-5 mr-3",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),"Run New Scan"]}),b.jsx("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:b.jsx("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})})]}),b.jsxs("button",{className:"w-full flex items-center justify-between px-4 py-3 bg-green-50 text-green-700 rounded-md hover:bg-green-100 transition-colors",children:[b.jsxs("span",{className:"flex items-center",children:[b.jsx("svg",{className:"h-5 w-5 mr-3",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Apply Fixes"]}),b.jsx("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:b.jsx("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})})]}),b.jsxs("button",{className:"w-full flex items-center justify-between px-4 py-3 bg-blue-50 text-blue-700 rounded-md hover:bg-blue-100 transition-colors",children:[b.jsxs("span",{className:"flex items-center",children:[b.jsx("svg",{className:"h-5 w-5 mr-3",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Generate Report"]}),b.jsx("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:b.jsx("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})})]})]})]}),Xhe=({sites:r=[]})=>{const e=[{id:1,siteUrl:"example.com",date:"2025-03-30",issuesFixed:12,scoreImprovement:8},{id:2,siteUrl:"demo-site.com",date:"2025-03-29",issuesFixed:5,scoreImprovement:3}];return b.jsxs("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:[b.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:b.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"Recent Results"})}),b.jsx("div",{className:"p-6",children:e.length>0?b.jsx("div",{className:"space-y-4",children:e.map(n=>b.jsxs("div",{className:"border border-gray-200 rounded-md p-4",children:[b.jsxs("div",{className:"flex items-center justify-between mb-2",children:[b.jsx("h3",{className:"text-sm font-medium text-gray-700",children:n.siteUrl}),b.jsx("span",{className:"text-xs text-gray-500",children:n.date})]}),b.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[b.jsxs("div",{className:"text-center",children:[b.jsx("div",{className:"text-xl font-bold text-green-600",children:n.issuesFixed}),b.jsx("div",{className:"text-xs text-gray-500",children:"Issues Fixed"})]}),b.jsxs("div",{className:"text-center",children:[b.jsxs("div",{className:"text-xl font-bold text-indigo-600",children:["+",n.scoreImprovement]}),b.jsx("div",{className:"text-xs text-gray-500",children:"Score Improvement"})]})]}),b.jsx("button",{className:"mt-3 w-full inline-flex justify-center items-center px-4 py-2 border border-gray-300 shadow-sm text-xs font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"View Details"})]},n.id))}):b.jsxs("div",{className:"text-center py-6",children:[b.jsx("p",{className:"text-gray-500 text-sm",children:"No recent scans found."}),b.jsx("p",{className:"text-gray-500 text-sm",children:"Run your first scan to see results here."})]})})]})},Khe=({sites:r=[]})=>{const e={averageScore:74.5,totalIssues:28,criticalIssues:5,fixedIssues:17,percentChange:12.8};return b.jsxs("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:[b.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:b.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"Performance Metrics"})}),b.jsxs("div",{className:"p-6",children:[b.jsxs("div",{className:"mb-6 text-center",children:[b.jsx("span",{className:"text-3xl font-bold text-indigo-600",children:e.averageScore}),b.jsx("span",{className:"text-sm text-gray-500 ml-2",children:"Average SEO Score"})]}),b.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[b.jsxs("div",{className:"border border-gray-200 rounded-md p-3 text-center",children:[b.jsx("span",{className:"block text-xl font-semibold text-gray-800",children:e.totalIssues}),b.jsx("span",{className:"text-sm text-gray-500",children:"Total Issues"})]}),b.jsxs("div",{className:"border border-gray-200 rounded-md p-3 text-center",children:[b.jsx("span",{className:"block text-xl font-semibold text-red-600",children:e.criticalIssues}),b.jsx("span",{className:"text-sm text-gray-500",children:"Critical Issues"})]}),b.jsxs("div",{className:"border border-gray-200 rounded-md p-3 text-center",children:[b.jsx("span",{className:"block text-xl font-semibold text-green-600",children:e.fixedIssues}),b.jsx("span",{className:"text-sm text-gray-500",children:"Issues Fixed"})]}),b.jsxs("div",{className:"border border-gray-200 rounded-md p-3 text-center",children:[b.jsxs("span",{className:"block text-xl font-semibold text-indigo-600",children:["+",e.percentChange,"%"]}),b.jsx("span",{className:"text-sm text-gray-500",children:"Improvement"})]})]}),b.jsx("button",{className:"mt-6 w-full inline-flex justify-center items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"View Full Analytics"})]})]})},Yhe=({userData:r})=>b.jsxs("div",{className:"container mx-auto px-4 py-6",children:[b.jsx("h1",{className:"text-2xl font-bold mb-8",children:"Dashboard Overview"}),b.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8",children:[b.jsx("div",{className:"lg:col-span-2",children:b.jsx(Whe,{sites:(r==null?void 0:r.sites)||[]})}),b.jsx("div",{children:b.jsx(qhe,{})})]}),b.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[b.jsx(Xhe,{sites:(r==null?void 0:r.sites)||[]}),b.jsx(Khe,{sites:(r==null?void 0:r.sites)||[]})]})]}),Zhe=({site:r})=>b.jsx("div",{className:"bg-white shadow rounded-lg p-6 mb-6",children:b.jsxs("div",{className:"flex items-center justify-between",children:[b.jsxs("div",{children:[b.jsx(yr,{to:"/dashboard",className:"text-indigo-600 text-sm hover:text-indigo-900 mb-2 inline-block",children:"← Back to Dashboard"}),b.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:r.url}),b.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Last scan: ",r.lastScan]})]}),b.jsxs("div",{className:"flex space-x-3",children:[b.jsx("button",{className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Run New Scan"}),b.jsx("button",{className:"inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md shadow-sm text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Export Report"})]})]})}),Qhe=({issues:r=[]})=>{const[e,n]=X.useState("all"),i=e==="all"?r:r.filter(a=>a.severity===e),s=a=>{switch(a){case"high":return"bg-red-100 text-red-800";case"medium":return"bg-yellow-100 text-yellow-800";case"low":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}};return b.jsxs("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:[b.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:b.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"Technical SEO Issues"})}),b.jsx("div",{className:"px-6 py-4 bg-gray-50 border-b border-gray-200",children:b.jsxs("div",{className:"flex space-x-2",children:[b.jsx("button",{onClick:()=>n("all"),className:`px-3 py-1 rounded-md text-sm font-medium ${e==="all"?"bg-indigo-100 text-indigo-800":"bg-white text-gray-600 hover:bg-gray-100"}`,children:"All Issues"}),b.jsx("button",{onClick:()=>n("high"),className:`px-3 py-1 rounded-md text-sm font-medium ${e==="high"?"bg-red-100 text-red-800":"bg-white text-gray-600 hover:bg-gray-100"}`,children:"Critical"}),b.jsx("button",{onClick:()=>n("medium"),className:`px-3 py-1 rounded-md text-sm font-medium ${e==="medium"?"bg-yellow-100 text-yellow-800":"bg-white text-gray-600 hover:bg-gray-100"}`,children:"Medium"}),b.jsx("button",{onClick:()=>n("low"),className:`px-3 py-1 rounded-md text-sm font-medium ${e==="low"?"bg-green-100 text-green-800":"bg-white text-gray-600 hover:bg-gray-100"}`,children:"Low"})]})}),b.jsx("div",{className:"divide-y divide-gray-200",children:i.length>0?i.map(a=>b.jsx("div",{className:"p-6",children:b.jsxs("div",{className:"flex items-start",children:[b.jsxs("div",{className:"flex-shrink-0",children:[a.severity==="high"&&b.jsx("svg",{className:"h-6 w-6 text-red-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),a.severity==="medium"&&b.jsx("svg",{className:"h-6 w-6 text-yellow-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),a.severity==="low"&&b.jsx("svg",{className:"h-6 w-6 text-green-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})]}),b.jsxs("div",{className:"ml-3 flex-1",children:[b.jsxs("div",{className:"flex items-center justify-between",children:[b.jsx("h3",{className:"text-sm font-medium text-gray-900",children:a.type}),b.jsx("span",{className:`${s(a.severity)} px-2.5 py-0.5 rounded-full text-xs font-medium`,children:a.severity})]}),b.jsx("div",{className:"mt-1 text-sm text-gray-600",children:b.jsx("p",{children:a.description})}),b.jsxs("div",{className:"mt-4 flex justify-end space-x-3",children:[b.jsx("button",{className:"inline-flex items-center px-3 py-1.5 border border-transparent text-xs font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Fix Automatically"}),b.jsx("button",{className:"inline-flex items-center px-3 py-1.5 border border-gray-300 text-xs font-medium rounded-md shadow-sm text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"View Details"})]})]})]})},a.id)):b.jsx("div",{className:"p-6 text-center",children:b.jsx("p",{className:"text-gray-500 text-sm",children:"No issues found with this filter."})})})]})},Jhe=({score:r})=>{const e=l=>l>=80?"text-green-600":l>=60?"text-yellow-600":"text-red-600",n=l=>l>=80?"Excellent":l>=60?"Good":l>=40?"Fair":"Poor",s=2*Math.PI*70,a=s,o=s-r/100*s;return b.jsxs("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:[b.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:b.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"SEO Score"})}),b.jsxs("div",{className:"p-6 flex flex-col items-center",children:[b.jsxs("div",{className:"relative inline-flex justify-center items-center w-48 h-48 mb-4",children:[b.jsx("svg",{className:"absolute",width:"160",height:"160",viewBox:"0 0 160 160",children:b.jsx("circle",{cx:"80",cy:"80",r:70,fill:"none",stroke:"#e5e7eb",strokeWidth:"12"})}),b.jsx("svg",{className:"absolute",width:"160",height:"160",viewBox:"0 0 160 160",children:b.jsx("circle",{cx:"80",cy:"80",r:70,fill:"none",stroke:r>=80?"#10B981":r>=60?"#FBBF24":"#EF4444",strokeWidth:"12",strokeDasharray:a,strokeDashoffset:o,strokeLinecap:"round",transform:"rotate(-90 80 80)"})}),b.jsxs("div",{className:"text-center",children:[b.jsx("span",{className:`text-4xl font-bold ${e(r)}`,children:r}),b.jsx("span",{className:"block text-sm text-gray-500",children:n(r)})]})]}),b.jsx("div",{className:"text-sm text-gray-600 text-center mb-6",children:b.jsxs("p",{children:["Your site is performing better than ",Math.round(r),"% of websites in our database."]})}),b.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5 mb-4",children:b.jsx("div",{className:`h-2.5 rounded-full ${r>=80?"bg-green-600":r>=60?"bg-yellow-500":"bg-red-600"}`,style:{width:`${r}%`}})}),b.jsxs("div",{className:"grid grid-cols-3 w-full text-xs text-gray-500",children:[b.jsx("div",{className:"text-left",children:"Poor"}),b.jsx("div",{className:"text-center",children:"Good"}),b.jsx("div",{className:"text-right",children:"Excellent"})]})]})]})},ede=({history:r=[]})=>b.jsx("div",{className:"flow-root",children:b.jsx("ul",{className:"-mb-8",children:r.map((e,n)=>b.jsx("li",{children:b.jsxs("div",{className:"relative pb-8",children:[n!==r.length-1?b.jsx("span",{className:"absolute top-4 left-4 -ml-px h-full w-0.5 bg-gray-200","aria-hidden":"true"}):null,b.jsxs("div",{className:"relative flex space-x-3",children:[b.jsx("div",{children:b.jsx("span",{className:"h-8 w-8 rounded-full bg-indigo-100 flex items-center justify-center ring-8 ring-white",children:b.jsx("svg",{className:"h-5 w-5 text-indigo-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})})}),b.jsxs("div",{className:"min-w-0 flex-1 pt-1.5 flex justify-between space-x-4",children:[b.jsxs("div",{children:[b.jsx("p",{className:"text-sm text-gray-900",children:e.action}),e.impact&&b.jsx("p",{className:"text-sm text-green-600 font-medium",children:e.impact})]}),b.jsx("div",{className:"text-right text-sm whitespace-nowrap text-gray-500",children:e.date})]})]})]})},e.id))})});function tde(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var i,s,a,o,l=[],c=!0,u=!1;try{if(a=(n=n.call(r)).next,e===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(i=a.call(n)).done)&&(l.push(i.value),l.length!==e);c=!0);}catch(h){u=!0,s=h}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function nde(r,e,n){return e=ude(e),e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function g$(r,e){return sde(r)||tde(r,e)||JQ(r,e)||lde()}function rde(r){return ide(r)||ade(r)||JQ(r)||ode()}function ide(r){if(Array.isArray(r))return UL(r)}function sde(r){if(Array.isArray(r))return r}function ade(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function JQ(r,e){if(r){if(typeof r=="string")return UL(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return UL(r,e)}}function UL(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=r[n];return i}function ode(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lde(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cde(r,e){if(typeof r!="object"||r===null)return r;var n=r[Symbol.toPrimitive];if(n!==void 0){var i=n.call(r,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function ude(r){var e=cde(r,"string");return typeof e=="symbol"?e:String(e)}var hde=function(e,n){var i=new Set(n);return Object.assign.apply(Object,[{}].concat(rde(Object.entries(e).filter(function(s){var a=g$(s,1),o=a[0];return!i.has(o)}).map(function(s){var a=g$(s,2),o=a[0],l=a[1];return nde({},o,l)}))))};function zL(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,i=Array(e);n<e;n++)i[n]=r[n];return i}function dde(r){if(Array.isArray(r))return r}function fde(r){if(Array.isArray(r))return zL(r)}function pde(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function mde(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var i,s,a,o,l=[],c=!0,u=!1;try{if(a=(n=n.call(r)).next,e!==0)for(;!(c=(i=a.call(n)).done)&&(l.push(i.value),l.length!==e);c=!0);}catch(h){u=!0,s=h}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function gde(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yde(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vde(r,e){return dde(r)||mde(r,e)||eJ(r,e)||gde()}function y$(r){return fde(r)||pde(r)||eJ(r)||yde()}function eJ(r,e){if(r){if(typeof r=="string")return zL(r,e);var n={}.toString.call(r).slice(8,-1);return n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set"?Array.from(r):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?zL(r,e):void 0}}function fM(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.wrapperElementType,i=n===void 0?"div":n,s=e.nodeMapper,a=s===void 0?function(h){return h}:s,o=e.methodNames,l=o===void 0?[]:o,c=e.initPropNames,u=c===void 0?[]:c;return X.forwardRef(function(h,d){var f=X.useRef(),p=X.useMemo(function(){var x=Object.fromEntries(u.filter(function(_){return h.hasOwnProperty(_)}).map(function(_){return[_,h[_]]}));return r(x)},[]);v$(function(){p(a(f.current))},X.useLayoutEffect),v$(function(){return p._destructor instanceof Function?p._destructor:void 0});var g=X.useCallback(function(x){for(var _=arguments.length,E=new Array(_>1?_-1:0),S=1;S<_;S++)E[S-1]=arguments[S];return p[x]instanceof Function?p[x].apply(p,E):void 0},[p]),v=X.useRef({});return Object.keys(hde(h,[].concat(y$(l),y$(u)))).filter(function(x){return v.current[x]!==h[x]}).forEach(function(x){return g(x,h[x])}),v.current=h,X.useImperativeHandle(d,function(){return Object.fromEntries(l.map(function(x){return[x,function(){for(var _=arguments.length,E=new Array(_),S=0;S<_;S++)E[S]=arguments[S];return g.apply(void 0,[x].concat(E))}]}))},[g]),ce.createElement(i,{ref:f})})}function v$(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:X.useEffect,n=X.useRef(),i=X.useRef(!1),s=X.useRef(!1),a=X.useState(0),o=vde(a,2);o[0];var l=o[1];i.current&&(s.current=!0),e(function(){return i.current||(n.current=r(),i.current=!0),l(function(c){return c+1}),function(){s.current&&n.current&&n.current()}},[])}var x$={},b$={},E2,_$;function xde(){if(_$)return E2;_$=1;const r=.1;return E2=AFRAME.registerComponent("checkpoint-controls",{schema:{enabled:{default:!0},mode:{default:"teleport",oneOf:["teleport","animate"]},animateSpeed:{default:3}},init:function(){this.active=!0,this.checkpoint=null,this.isNavMeshConstrained=!1,this.offset=new THREE.Vector3,this.position=new THREE.Vector3,this.targetPosition=new THREE.Vector3},play:function(){this.active=!0},pause:function(){this.active=!1},setCheckpoint:function(e){const n=this.el;if(this.active&&this.checkpoint!==e){if(this.checkpoint&&n.emit("navigation-end",{checkpoint:this.checkpoint}),this.checkpoint=e,this.sync(),this.position.distanceTo(this.targetPosition)<r){this.checkpoint=null;return}n.emit("navigation-start",{checkpoint:e}),this.data.mode==="teleport"&&(this.el.setAttribute("position",this.targetPosition),this.checkpoint=null,n.emit("navigation-end",{checkpoint:e}),n.components["movement-controls"].updateNavLocation())}},isVelocityActive:function(){return!!(this.active&&this.checkpoint)},getVelocity:function(){if(!this.active)return;const e=this.data,n=this.offset,i=this.position,s=this.targetPosition,a=this.checkpoint;return this.sync(),i.distanceTo(s)<r?(this.checkpoint=null,this.el.emit("navigation-end",{checkpoint:a}),n.set(0,0,0)):(n.setLength(e.animateSpeed),n)},sync:function(){const e=this.offset,n=this.position,i=this.targetPosition;n.copy(this.el.getAttribute("position")),this.checkpoint.object3D.getWorldPosition(i),i.add(this.checkpoint.components.checkpoint.getOffset()),e.copy(i).sub(n)}}),E2}var M2,w$;function bde(){return w$||(w$=1,M2=Object.assign(function(){},{FACE_1:0,FACE_2:1,FACE_3:2,FACE_4:3,L_SHOULDER_1:4,R_SHOULDER_1:5,L_SHOULDER_2:6,R_SHOULDER_2:7,SELECT:8,START:9,DPAD_UP:12,DPAD_DOWN:13,DPAD_LEFT:14,DPAD_RIGHT:15,VENDOR:16})),M2}var A2,S$;function _de(){if(S$)return A2;S$=1;function r(e,n,i){this.type=e,this.index=n,this.pressed=i.pressed,this.value=i.value}return A2=r,A2}var C2,T$;function wde(){if(T$)return C2;T$=1;const r=bde(),e=_de(),n=.2,i={LEFT:"left",RIGHT:"right"},s={MOVEMENT:1,ROTATION:2};return C2=AFRAME.registerComponent("gamepad-controls",{GamepadButton:r,schema:{enabled:{default:!0},rotationSensitivity:{default:2}},init:function(){const a=this.el.sceneEl;this.system=a.systems["tracked-controls"]||a.systems["tracked-controls-webxr"]||{controllers:[]},this.prevTime=window.performance.now(),this.buttons={};const o=this.el.object3D.rotation;this.pitch=new THREE.Object3D,this.pitch.rotation.x=o.x,this.yaw=new THREE.Object3D,this.yaw.position.y=10,this.yaw.rotation.y=o.y,this.yaw.add(this.pitch),this._lookVector=new THREE.Vector2,this._moveVector=new THREE.Vector2,this._dpadVector=new THREE.Vector2,a.addBehavior(this)},update:function(){this.tick()},tick:function(a,o){this.updateButtonState(),this.updateRotation(o)},remove:function(){},isVelocityActive:function(){if(!this.data.enabled||!this.isConnected())return!1;const a=this._dpadVector,o=this._moveVector;this.getDpad(a),this.getJoystick(s.MOVEMENT,o);const l=a.x||o.x,c=a.y||o.y;return Math.abs(l)>n||Math.abs(c)>n},getVelocityDelta:function(){const a=this._dpadVector,o=this._moveVector;this.getDpad(a),this.getJoystick(s.MOVEMENT,o);const l=a.x||o.x,c=a.y||o.y,u=new THREE.Vector3;return Math.abs(l)>n&&(u.x+=l),Math.abs(c)>n&&(u.z+=c),u},isRotationActive:function(){if(!this.data.enabled||!this.isConnected())return!1;const a=this._lookVector;return this.getJoystick(s.ROTATION,a),Math.abs(a.x)>n||Math.abs(a.y)>n},updateRotation:function(a){if(!this.isRotationActive())return;const o=this.data,l=this.yaw,c=this.pitch;l.rotation.y=this.el.object3D.rotation.y,c.rotation.x=this.el.object3D.rotation.x;const u=this._lookVector;this.getJoystick(s.ROTATION,u),Math.abs(u.x)<=n&&(u.x=0),Math.abs(u.y)<=n&&(u.y=0),u.multiplyScalar(o.rotationSensitivity*a/1e3),l.rotation.y-=u.x,c.rotation.x-=u.y,c.rotation.x=Math.max(-Math.PI/2,Math.min(Math.PI/2,c.rotation.x)),this.el.object3D.rotation.set(c.rotation.x,l.rotation.y,0)},updateButtonState:function(){const a=this.getGamepad(i.RIGHT);if(this.data.enabled&&a)for(var o=0;o<a.buttons.length;o++)a.buttons[o].pressed&&!this.buttons[o]?this.emit(new e("gamepadbuttondown",o,a.buttons[o])):!a.buttons[o].pressed&&this.buttons[o]&&this.emit(new e("gamepadbuttonup",o,a.buttons[o])),this.buttons[o]=a.buttons[o].pressed;else for(const l in this.buttons)this.buttons[l]=!1},emit:function(a){this.el.emit(a.type,a),this.el.emit(a.type+":"+a.index,new e(a.type,a.index,a))},getGamepad:function(){const a=[],o=[];return function(l){const c=this.el.sceneEl.components["proxy-controls"],u=c&&c.isConnected()&&c.getGamepad(0);if(u)return u;a.length=0;for(let d=0;d<this.system.controllers.length;d++){const f=this.system.controllers[d],p=f?f.gamepad:null;if(a.push(p),p&&f.handedness===l)return p}const h=navigator.getGamepads?navigator.getGamepads():o;for(let d=0;d<h.length;d++){const f=h[d];if(f&&f.hand===l)return f}return a[0]||h[0]}}(),getButton:function(a){return this.getGamepad(i.RIGHT).buttons[a]},getAxis:function(a){return this.getGamepad(a>1?i.RIGHT:i.LEFT).axes[a]},getJoystick:function(a,o){const l=this.getGamepad(a===s.MOVEMENT?i.LEFT:i.RIGHT);if(!l)return o.set(0,0);if(l.mapping==="xr-standard")switch(a){case s.MOVEMENT:return o.set(l.axes[2],l.axes[3]);case s.ROTATION:return o.set(l.axes[2],0)}else switch(a){case s.MOVEMENT:return o.set(l.axes[0],l.axes[1]);case s.ROTATION:return o.set(l.axes[2],l.axes[3])}throw new Error('Unexpected joystick index "%d".',a)},getDpad:function(a){const o=this.getGamepad(i.LEFT);return!o||!o.buttons[r.DPAD_RIGHT]?a.set(0,0):a.set((o.buttons[r.DPAD_RIGHT].pressed?1:0)+(o.buttons[r.DPAD_LEFT].pressed?-1:0),(o.buttons[r.DPAD_UP].pressed?-1:0)+(o.buttons[r.DPAD_DOWN].pressed?1:0))},isConnected:function(){const a=this.getGamepad(i.LEFT);return!!(a&&a.connected)},getID:function(){return this.getGamepad(i.LEFT).id}}),C2}var E$={},M$;function Sde(){return M$||(M$=1,function(r){var e="KeyboardEvent"in r;e||(r.KeyboardEvent=function(){throw TypeError("Illegal constructor")}),"DOM_KEY_LOCATION_STANDARD"in r.KeyboardEvent||(r.KeyboardEvent.DOM_KEY_LOCATION_STANDARD=0),"DOM_KEY_LOCATION_LEFT"in r.KeyboardEvent||(r.KeyboardEvent.DOM_KEY_LOCATION_LEFT=1),"DOM_KEY_LOCATION_RIGHT"in r.KeyboardEvent||(r.KeyboardEvent.DOM_KEY_LOCATION_RIGHT=2),"DOM_KEY_LOCATION_NUMPAD"in r.KeyboardEvent||(r.KeyboardEvent.DOM_KEY_LOCATION_NUMPAD=3);var n=window.KeyboardEvent.DOM_KEY_LOCATION_STANDARD,i=window.KeyboardEvent.DOM_KEY_LOCATION_LEFT,s=window.KeyboardEvent.DOM_KEY_LOCATION_RIGHT,a=window.KeyboardEvent.DOM_KEY_LOCATION_NUMPAD;function o(M,C){return String(M).indexOf(C)!==-1}var l=function(){return o(navigator.platform,"Win")?"win":o(navigator.platform,"Mac")?"mac":o(navigator.platform,"CrOS")?"cros":o(navigator.platform,"Linux")?"linux":o(navigator.userAgent,"iPad")||o(navigator.platform,"iPod")||o(navigator.platform,"iPhone")?"ios":""}(),c=function(){return o(navigator.userAgent,"Chrome/")?"chrome":o(navigator.vendor,"Apple")?"safari":o(navigator.userAgent,"MSIE")?"ie":o(navigator.userAgent,"Gecko/")?"moz":o(navigator.userAgent,"Opera/")?"opera":""}(),u=c+"-"+l;function h(M,C,A){(u===C||c===C||l===C)&&Object.keys(A).forEach(function(P){M[P]=A[P]})}function d(M,C){var A={};return Object.keys(M).forEach(function(P){var R=M[P];C in R&&(A[R[C]]=R)}),A}var f={3:{code:"Cancel"},6:{code:"Help"},8:{code:"Backspace"},9:{code:"Tab"},12:{code:"Clear"},13:{code:"Enter"},16:{code:"Shift"},17:{code:"Control"},18:{code:"Alt"},19:{code:"Pause"},20:{code:"CapsLock"},21:{code:"KanaMode"},22:{code:"HangulMode"},23:{code:"JunjaMode"},24:{code:"FinalMode"},25:{code:"KanjiMode"},27:{code:"Escape"},28:{code:"Convert"},29:{code:"NonConvert"},30:{code:"Accept"},31:{code:"ModeChange"},32:{code:"Space"},33:{code:"PageUp"},34:{code:"PageDown"},35:{code:"End"},36:{code:"Home"},37:{code:"ArrowLeft"},38:{code:"ArrowUp"},39:{code:"ArrowRight"},40:{code:"ArrowDown"},41:{code:"Select"},42:{code:"Print"},43:{code:"Execute"},44:{code:"PrintScreen"},45:{code:"Insert"},46:{code:"Delete"},47:{code:"Help"},48:{code:"Digit0",keyCap:"0"},49:{code:"Digit1",keyCap:"1"},50:{code:"Digit2",keyCap:"2"},51:{code:"Digit3",keyCap:"3"},52:{code:"Digit4",keyCap:"4"},53:{code:"Digit5",keyCap:"5"},54:{code:"Digit6",keyCap:"6"},55:{code:"Digit7",keyCap:"7"},56:{code:"Digit8",keyCap:"8"},57:{code:"Digit9",keyCap:"9"},65:{code:"KeyA",keyCap:"a"},66:{code:"KeyB",keyCap:"b"},67:{code:"KeyC",keyCap:"c"},68:{code:"KeyD",keyCap:"d"},69:{code:"KeyE",keyCap:"e"},70:{code:"KeyF",keyCap:"f"},71:{code:"KeyG",keyCap:"g"},72:{code:"KeyH",keyCap:"h"},73:{code:"KeyI",keyCap:"i"},74:{code:"KeyJ",keyCap:"j"},75:{code:"KeyK",keyCap:"k"},76:{code:"KeyL",keyCap:"l"},77:{code:"KeyM",keyCap:"m"},78:{code:"KeyN",keyCap:"n"},79:{code:"KeyO",keyCap:"o"},80:{code:"KeyP",keyCap:"p"},81:{code:"KeyQ",keyCap:"q"},82:{code:"KeyR",keyCap:"r"},83:{code:"KeyS",keyCap:"s"},84:{code:"KeyT",keyCap:"t"},85:{code:"KeyU",keyCap:"u"},86:{code:"KeyV",keyCap:"v"},87:{code:"KeyW",keyCap:"w"},88:{code:"KeyX",keyCap:"x"},89:{code:"KeyY",keyCap:"y"},90:{code:"KeyZ",keyCap:"z"},91:{code:"OSLeft",location:i},92:{code:"OSRight",location:s},93:{code:"ContextMenu"},95:{code:"Standby"},96:{code:"Numpad0",keyCap:"0",location:a},97:{code:"Numpad1",keyCap:"1",location:a},98:{code:"Numpad2",keyCap:"2",location:a},99:{code:"Numpad3",keyCap:"3",location:a},100:{code:"Numpad4",keyCap:"4",location:a},101:{code:"Numpad5",keyCap:"5",location:a},102:{code:"Numpad6",keyCap:"6",location:a},103:{code:"Numpad7",keyCap:"7",location:a},104:{code:"Numpad8",keyCap:"8",location:a},105:{code:"Numpad9",keyCap:"9",location:a},106:{code:"NumpadMultiply",keyCap:"*",location:a},107:{code:"NumpadAdd",keyCap:"+",location:a},108:{code:"NumpadComma",keyCap:",",location:a},109:{code:"NumpadSubtract",keyCap:"-",location:a},110:{code:"NumpadDecimal",keyCap:".",location:a},111:{code:"NumpadDivide",keyCap:"/",location:a},112:{code:"F1"},113:{code:"F2"},114:{code:"F3"},115:{code:"F4"},116:{code:"F5"},117:{code:"F6"},118:{code:"F7"},119:{code:"F8"},120:{code:"F9"},121:{code:"F10"},122:{code:"F11"},123:{code:"F12"},124:{code:"F13"},125:{code:"F14"},126:{code:"F15"},127:{code:"F16"},128:{code:"F17"},129:{code:"F18"},130:{code:"F19"},131:{code:"F20"},132:{code:"F21"},133:{code:"F22"},134:{code:"F23"},135:{code:"F24"},144:{code:"NumLock",location:a},145:{code:"ScrollLock"},160:{code:"ShiftLeft",location:i},161:{code:"ShiftRight",location:s},162:{code:"ControlLeft",location:i},163:{code:"ControlRight",location:s},164:{code:"AltLeft",location:i},165:{code:"AltRight",location:s},166:{code:"BrowserBack"},167:{code:"BrowserForward"},168:{code:"BrowserRefresh"},169:{code:"BrowserStop"},170:{code:"BrowserSearch"},171:{code:"BrowserFavorites"},172:{code:"BrowserHome"},173:{code:"VolumeMute"},174:{code:"VolumeDown"},175:{code:"VolumeUp"},176:{code:"MediaTrackNext"},177:{code:"MediaTrackPrevious"},178:{code:"MediaStop"},179:{code:"MediaPlayPause"},180:{code:"LaunchMail"},181:{code:"MediaSelect"},182:{code:"LaunchApp1"},183:{code:"LaunchApp2"},186:{code:"Semicolon",keyCap:";"},187:{code:"Equal",keyCap:"="},188:{code:"Comma",keyCap:","},189:{code:"Minus",keyCap:"-"},190:{code:"Period",keyCap:"."},191:{code:"Slash",keyCap:"/"},192:{code:"Backquote",keyCap:"`"},219:{code:"BracketLeft",keyCap:"["},220:{code:"Backslash",keyCap:"\\"},221:{code:"BracketRight",keyCap:"]"},222:{code:"Quote",keyCap:"'"},226:{code:"IntlBackslash",keyCap:"\\"},229:{code:"Process"},246:{code:"Attn"},247:{code:"CrSel"},248:{code:"ExSel"},249:{code:"EraseEof"},250:{code:"Play"},251:{code:"ZoomToggle"},254:{code:"Clear"}};h(f,"moz",{59:{code:"Semicolon",keyCap:";"},61:{code:"Equal",keyCap:"="},107:{code:"Equal",keyCap:"="},109:{code:"Minus",keyCap:"-"},187:{code:"NumpadAdd",keyCap:"+",location:a},189:{code:"NumpadSubtract",keyCap:"-",location:a}}),h(f,"moz-mac",{12:{code:"NumLock",location:a},173:{code:"Minus",keyCap:"-"}}),h(f,"moz-win",{173:{code:"Minus",keyCap:"-"}}),h(f,"chrome-mac",{93:{code:"OSRight",location:s}}),h(f,"safari",{3:{code:"Enter"},25:{code:"Tab"}}),h(f,"ios",{10:{code:"Enter",location:n}}),h(f,"safari-mac",{91:{code:"OSLeft",location:i},93:{code:"OSRight",location:s},229:{code:"KeyQ",keyCap:"Q"}});var p={};l==="cros"&&(p["U+00A0"]={code:"ShiftLeft",location:i},p["U+00A1"]={code:"ShiftRight",location:s},p["U+00A2"]={code:"ControlLeft",location:i},p["U+00A3"]={code:"ControlRight",location:s},p["U+00A4"]={code:"AltLeft",location:i},p["U+00A5"]={code:"AltRight",location:s}),u==="chrome-mac"&&(p["U+0010"]={code:"ContextMenu"}),u==="safari-mac"&&(p["U+0010"]={code:"ContextMenu"}),l==="ios"&&(p["U+0010"]={code:"Function"},p["U+001C"]={code:"ArrowLeft"},p["U+001D"]={code:"ArrowRight"},p["U+001E"]={code:"ArrowUp"},p["U+001F"]={code:"ArrowDown"},p["U+0001"]={code:"Home"},p["U+0004"]={code:"End"},p["U+000B"]={code:"PageUp"},p["U+000C"]={code:"PageDown"});var g=[];g[i]={16:{code:"ShiftLeft",location:i},17:{code:"ControlLeft",location:i},18:{code:"AltLeft",location:i}},g[s]={16:{code:"ShiftRight",location:s},17:{code:"ControlRight",location:s},18:{code:"AltRight",location:s}},g[a]={13:{code:"NumpadEnter",location:a}},h(g[a],"moz",{109:{code:"NumpadSubtract",location:a},107:{code:"NumpadAdd",location:a}}),h(g[i],"moz-mac",{224:{code:"OSLeft",location:i}}),h(g[s],"moz-mac",{224:{code:"OSRight",location:s}}),h(g[s],"moz-win",{91:{code:"OSRight",location:s}}),h(g[s],"mac",{93:{code:"OSRight",location:s}}),h(g[a],"chrome-mac",{12:{code:"NumLock",location:a}}),h(g[a],"safari-mac",{12:{code:"NumLock",location:a},187:{code:"NumpadAdd",location:a},189:{code:"NumpadSubtract",location:a},190:{code:"NumpadDecimal",location:a},191:{code:"NumpadDivide",location:a}});var v={ShiftLeft:{key:"Shift"},ShiftRight:{key:"Shift"},ControlLeft:{key:"Control"},ControlRight:{key:"Control"},AltLeft:{key:"Alt"},AltRight:{key:"Alt"},OSLeft:{key:"OS"},OSRight:{key:"OS"},NumpadEnter:{key:"Enter"},Space:{key:" "},Digit0:{key:"0",shiftKey:")"},Digit1:{key:"1",shiftKey:"!"},Digit2:{key:"2",shiftKey:"@"},Digit3:{key:"3",shiftKey:"#"},Digit4:{key:"4",shiftKey:"$"},Digit5:{key:"5",shiftKey:"%"},Digit6:{key:"6",shiftKey:"^"},Digit7:{key:"7",shiftKey:"&"},Digit8:{key:"8",shiftKey:"*"},Digit9:{key:"9",shiftKey:"("},KeyA:{key:"a",shiftKey:"A"},KeyB:{key:"b",shiftKey:"B"},KeyC:{key:"c",shiftKey:"C"},KeyD:{key:"d",shiftKey:"D"},KeyE:{key:"e",shiftKey:"E"},KeyF:{key:"f",shiftKey:"F"},KeyG:{key:"g",shiftKey:"G"},KeyH:{key:"h",shiftKey:"H"},KeyI:{key:"i",shiftKey:"I"},KeyJ:{key:"j",shiftKey:"J"},KeyK:{key:"k",shiftKey:"K"},KeyL:{key:"l",shiftKey:"L"},KeyM:{key:"m",shiftKey:"M"},KeyN:{key:"n",shiftKey:"N"},KeyO:{key:"o",shiftKey:"O"},KeyP:{key:"p",shiftKey:"P"},KeyQ:{key:"q",shiftKey:"Q"},KeyR:{key:"r",shiftKey:"R"},KeyS:{key:"s",shiftKey:"S"},KeyT:{key:"t",shiftKey:"T"},KeyU:{key:"u",shiftKey:"U"},KeyV:{key:"v",shiftKey:"V"},KeyW:{key:"w",shiftKey:"W"},KeyX:{key:"x",shiftKey:"X"},KeyY:{key:"y",shiftKey:"Y"},KeyZ:{key:"z",shiftKey:"Z"},Numpad0:{key:"0"},Numpad1:{key:"1"},Numpad2:{key:"2"},Numpad3:{key:"3"},Numpad4:{key:"4"},Numpad5:{key:"5"},Numpad6:{key:"6"},Numpad7:{key:"7"},Numpad8:{key:"8"},Numpad9:{key:"9"},NumpadMultiply:{key:"*"},NumpadAdd:{key:"+"},NumpadComma:{key:","},NumpadSubtract:{key:"-"},NumpadDecimal:{key:"."},NumpadDivide:{key:"/"},Semicolon:{key:";",shiftKey:":"},Equal:{key:"=",shiftKey:"+"},Comma:{key:",",shiftKey:"<"},Minus:{key:"-",shiftKey:"_"},Period:{key:".",shiftKey:">"},Slash:{key:"/",shiftKey:"?"},Backquote:{key:"`",shiftKey:"~"},BracketLeft:{key:"[",shiftKey:"{"},Backslash:{key:"\\",shiftKey:"|"},BracketRight:{key:"]",shiftKey:"}"},Quote:{key:"'",shiftKey:'"'},IntlBackslash:{key:"\\",shiftKey:"|"}};h(v,"mac",{OSLeft:{key:"Meta"},OSRight:{key:"Meta"}});var x={Esc:"Escape",Nonconvert:"NonConvert",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Menu:"ContextMenu",MediaNextTrack:"MediaTrackNext",MediaPreviousTrack:"MediaTrackPrevious",SelectMedia:"MediaSelect",HalfWidth:"Hankaku",FullWidth:"Zenkaku",RomanCharacters:"Romaji",Crsel:"CrSel",Exsel:"ExSel",Zoom:"ZoomToggle"},_=d(f,"code");try{var E=e&&"location"in new KeyboardEvent("")}catch{}function S(M){var C="keyCode"in M?M.keyCode:"which"in M?M.which:0,A=function(){if(E||"keyLocation"in M){var R=E?M.location:M.keyLocation;if(R&&C in g[R])return g[R][C]}return"keyIdentifier"in M&&M.keyIdentifier in p?p[M.keyIdentifier]:C in f?f[C]:null}();if(!A)return null;var P=function(){var R=v[A.code];return R?M.shiftKey&&"shiftKey"in R?R.shiftKey:R.key:A.code}();return{code:A.code,key:P,location:A.location,keyCap:A.keyCap}}function T(M,C){if(M=String(M),!_.hasOwnProperty(M))return"Undefined";if(C&&String(C).toLowerCase()!=="en-us")throw Error("Unsupported locale");var A=_[M];return A.keyCap||A.code||"Undefined"}"KeyboardEvent"in r&&"defineProperty"in Object&&function(){function M(A,P,R){P in A||Object.defineProperty(A,P,R)}if(M(KeyboardEvent.prototype,"code",{get:function(){var A=S(this);return A?A.code:""}}),"key"in KeyboardEvent.prototype){var C=Object.getOwnPropertyDescriptor(KeyboardEvent.prototype,"key");Object.defineProperty(KeyboardEvent.prototype,"key",{get:function(){var A=C.get.call(this);return x.hasOwnProperty(A)?x[A]:A}})}M(KeyboardEvent.prototype,"key",{get:function(){var A=S(this);return A&&"key"in A?A.key:"Unidentified"}}),M(KeyboardEvent.prototype,"location",{get:function(){var A=S(this);return A&&"location"in A?A.location:n}}),M(KeyboardEvent.prototype,"locale",{get:function(){return""}})}(),"queryKeyCap"in r.KeyboardEvent||(r.KeyboardEvent.queryKeyCap=T),r.identifyKey=function(M){if(!("code"in M)){var C=S(M);M.code=C?C.code:"",M.key=C&&"key"in C?C.key:"Unidentified",M.location="location"in M?M.location:"keyLocation"in M?M.keyLocation:C&&"location"in C?C.location:n,M.locale=""}}}(window)),E$}var N2,A$;function Tde(){if(A$)return N2;A$=1,Sde();const r="__keyboard-controls-proxy",e=window.KeyboardEvent;return N2=AFRAME.registerComponent("keyboard-controls",{schema:{enabled:{default:!0},debug:{default:!1}},init:function(){this.dVelocity=new THREE.Vector3,this.localKeys={},this.listeners={keydown:this.onKeyDown.bind(this),keyup:this.onKeyUp.bind(this),blur:this.onBlur.bind(this),onContextMenu:this.onContextMenu.bind(this)}},isVelocityActive:function(){return this.data.enabled&&!!Object.keys(this.getKeys()).length},getVelocityDelta:function(){const n=this.data,i=this.getKeys();return this.dVelocity.set(0,0,0),n.enabled&&((i.KeyW||i.ArrowUp)&&(this.dVelocity.z-=1),(i.KeyA||i.ArrowLeft)&&(this.dVelocity.x-=1),(i.KeyS||i.ArrowDown)&&(this.dVelocity.z+=1),(i.KeyD||i.ArrowRight)&&(this.dVelocity.x+=1),i.ShiftLeft&&(this.dVelocity=this.dVelocity.multiplyScalar(2))),this.dVelocity.clone()},play:function(){this.attachEventListeners()},pause:function(){this.removeEventListeners()},attachEventListeners:function(){window.addEventListener("contextmenu",this.listeners.onContextMenu,!1),window.addEventListener("keydown",this.listeners.keydown,!1),window.addEventListener("keyup",this.listeners.keyup,!1),window.addEventListener("blur",this.listeners.blur,!1)},onContextMenu:function(){for(const n in this.localKeys)this.localKeys.hasOwnProperty(n)&&delete this.localKeys[n]},removeEventListeners:function(){window.removeEventListener("keydown",this.listeners.keydown),window.removeEventListener("keyup",this.listeners.keyup),window.removeEventListener("blur",this.listeners.blur)},onKeyDown:function(n){AFRAME.utils.shouldCaptureKeyEvent(n)&&(this.localKeys[n.code]=!0,this.emit(n))},onKeyUp:function(n){AFRAME.utils.shouldCaptureKeyEvent(n)&&(delete this.localKeys[n.code],this.emit(n))},onBlur:function(){for(const n in this.localKeys)this.localKeys.hasOwnProperty(n)&&delete this.localKeys[n]},emit:function(n){r in n&&this.el.emit(n.type,n),this.el.emit(n.type+":"+n.code,new e(n.type,n)),this.data.debug&&console.log(n.type+":"+n.code)},isPressed:function(n){return n in this.getKeys()},getKeys:function(){return this.isProxied()?this.el.sceneEl.components["proxy-controls"].getKeyboard():this.localKeys},isProxied:function(){const n=this.el.sceneEl.components["proxy-controls"];return n&&n.isConnected()}}),N2}var P2,C$;function Ede(){return C$||(C$=1,P2=AFRAME.registerComponent("touch-controls",{schema:{enabled:{default:!0},reverseEnabled:{default:!0}},init:function(){this.dVelocity=new THREE.Vector3,this.bindMethods(),this.direction=0},play:function(){this.addEventListeners()},pause:function(){this.removeEventListeners(),this.dVelocity.set(0,0,0)},remove:function(){this.pause()},addEventListeners:function(){const r=this.el.sceneEl,e=r.canvas;if(!e){r.addEventListener("render-target-loaded",this.addEventListeners.bind(this));return}e.addEventListener("touchstart",this.onTouchStart,{passive:!0}),e.addEventListener("touchend",this.onTouchEnd,{passive:!0});const n=r.getAttribute("vr-mode-ui");n&&n.cardboardModeEnabled&&r.addEventListener("enter-vr",this.onEnterVR)},removeEventListeners:function(){const r=this.el.sceneEl&&this.el.sceneEl.canvas;r&&(r.removeEventListener("touchstart",this.onTouchStart),r.removeEventListener("touchend",this.onTouchEnd),this.el.sceneEl.removeEventListener("enter-vr",this.onEnterVR))},isVelocityActive:function(){return this.data.enabled&&!!this.direction},getVelocityDelta:function(){return this.dVelocity.z=this.direction,this.dVelocity.clone()},bindMethods:function(){this.onTouchStart=this.onTouchStart.bind(this),this.onTouchEnd=this.onTouchEnd.bind(this),this.onEnterVR=this.onEnterVR.bind(this)},onTouchStart:function(r){this.direction=-1,this.data.reverseEnabled&&r.touches&&r.touches.length===2&&(this.direction=1),r.preventDefault()},onTouchEnd:function(r){this.direction=0,r.preventDefault()},onEnterVR:function(){const r=this.el.sceneEl.xrSession;r&&(r.addEventListener("selectstart",this.onTouchStart),r.addEventListener("selectend",this.onTouchEnd))}})),P2}var R2,N$;function Mde(){if(N$)return R2;N$=1;const r="-controls",e=.2,n=1e-5,i="moved";return R2=AFRAME.registerComponent("movement-controls",{dependencies:["rotation"],schema:{enabled:{default:!0},controls:{default:["gamepad","trackpad","keyboard","touch"]},speed:{default:.3,min:0},fly:{default:!1},constrainToNavMesh:{default:!1},camera:{default:"[movement-controls] [camera]",type:"selector"}},init:function(){const s=this.el;this.data.camera||(this.data.camera=s.querySelector("[camera]")),this.velocityCtrl=null,this.velocity=new THREE.Vector3,this.heading=new THREE.Quaternion,this.eventDetail={},this.navGroup=null,this.navNode=null,s.sceneEl.hasLoaded?this.injectControls():s.sceneEl.addEventListener("loaded",this.injectControls.bind(this))},update:function(s){const a=this.el,o=this.data,l=a.sceneEl.systems.nav;if(a.sceneEl.hasLoaded&&this.injectControls(),l&&o.constrainToNavMesh!==s.constrainToNavMesh&&(o.constrainToNavMesh?l.addAgent(this):l.removeAgent(this)),o.enabled!==s.enabled)for(let c=0;c<o.controls.length;c++){const u=o.controls[c]+r;this.el.setAttribute(u,{enabled:this.data.enabled})}},injectControls:function(){const s=this.data;for(let a=0;a<s.controls.length;a++){const o=s.controls[a]+r;this.el.setAttribute(o,{enabled:this.data.enabled})}},updateNavLocation:function(){this.navGroup=null,this.navNode=null},tick:function(){const s=new THREE.Vector3,a=new THREE.Vector3,o=new THREE.Vector3;return function(l,c){if(!c)return;const u=this.el,h=this.data;if(!h.enabled)return;this.updateVelocityCtrl();const d=this.velocityCtrl,f=this.velocity;if(d)if(c/1e3>e?f.set(0,0,0):this.updateVelocity(c),h.constrainToNavMesh&&d.isNavMeshConstrained!==!1){if(f.lengthSq()<n)return;s.copy(u.object3D.position),a.copy(f).multiplyScalar(c/1e3).add(s);const p=u.sceneEl.systems.nav;this.navGroup=this.navGroup===null?p.getGroup(s):this.navGroup,this.navNode=this.navNode||p.getNode(s,this.navGroup),this.navNode=p.clampStep(s,a,this.navGroup,this.navNode,o),u.object3D.position.copy(o)}else u.hasAttribute("velocity")?u.setAttribute("velocity",f):(u.object3D.position.x+=f.x*c/1e3,u.object3D.position.y+=f.y*c/1e3,u.object3D.position.z+=f.z*c/1e3)}}(),updateVelocityCtrl:function(){const s=this.data;if(s.enabled){for(let a=0,o=s.controls.length;a<o;a++){const l=this.el.components[s.controls[a]+r];if(l&&l.isVelocityActive()){this.velocityCtrl=l;return}}this.velocityCtrl=null}},updateVelocity:function(){const s=new THREE.Vector2,a=new THREE.Quaternion;return function(o){let l;const c=this.el,u=this.velocityCtrl,h=this.velocity,d=this.data;if(u)if(u.getVelocityDelta)l=u.getVelocityDelta(o);else if(u.getVelocity){h.copy(u.getVelocity());return}else if(u.getPositionDelta){h.copy(u.getPositionDelta(o).multiplyScalar(1e3/o));return}else throw new Error("Incompatible movement controls: ",u);if(c.hasAttribute("velocity")&&!d.constrainToNavMesh&&h.copy(this.el.getAttribute("velocity")),l&&d.enabled){const f=d.camera;a.copy(f.object3D.quaternion),a.premultiply(c.object3D.quaternion),l.applyQuaternion(a);const p=l.length();d.fly?(h.copy(l),h.multiplyScalar(this.data.speed*16.66667)):(s.set(l.x,l.z),s.setLength(p*this.data.speed*16.66667),h.x=s.x,h.y=0,h.z=s.y),(h.x!==0||h.y!==0||h.z!==0)&&(this.eventDetail.velocity=h,this.el.emit(i,this.eventDetail))}}}()}),R2}var O2,P$;function Ade(){return P$||(P$=1,O2=AFRAME.registerComponent("trackpad-controls",{schema:{enabled:{default:!0},enableNegX:{default:!0},enablePosX:{default:!0},enableNegZ:{default:!0},enablePosZ:{default:!0},mode:{default:"touch",oneOf:["swipe","touch","press"]}},init:function(){this.dVelocity=new THREE.Vector3,this.zVel=0,this.xVel=0,this.bindMethods()},play:function(){this.addEventListeners()},pause:function(){this.removeEventListeners(),this.dVelocity.set(0,0,0)},remove:function(){this.pause()},addEventListeners:function(){const r=this.data,e=this.el.sceneEl;switch(e.addEventListener("axismove",this.onAxisMove),r.mode){case"swipe":case"touch":e.addEventListener("trackpadtouchstart",this.onTouchStart),e.addEventListener("trackpadtouchend",this.onTouchEnd);break;case"press":e.addEventListener("trackpaddown",this.onTouchStart),e.addEventListener("trackpadup",this.onTouchEnd);break}},removeEventListeners:function(){const r=this.el.sceneEl;r.removeEventListener("axismove",this.onAxisMove),r.removeEventListener("trackpadtouchstart",this.onTouchStart),r.removeEventListener("trackpadtouchend",this.onTouchEnd),r.removeEventListener("trackpaddown",this.onTouchStart),r.removeEventListener("trackpadup",this.onTouchEnd)},isVelocityActive:function(){return this.data.enabled&&this.isMoving},getVelocityDelta:function(){return this.dVelocity.z=this.isMoving?-this.zVel:1,this.dVelocity.x=this.isMoving?this.xVel:1,this.dVelocity.clone()},bindMethods:function(){this.onTouchStart=this.onTouchStart.bind(this),this.onTouchEnd=this.onTouchEnd.bind(this),this.onAxisMove=this.onAxisMove.bind(this)},onTouchStart:function(r){switch(this.data.mode){case"swipe":this.canRecordAxis=!0,this.startingAxisData=[];break;case"touch":this.isMoving=!0;break;case"press":this.isMoving=!0;break}r.preventDefault()},onTouchEnd:function(r){this.data.mode=="swipe"&&(this.startingAxisData=[]),this.isMoving=!1,r.preventDefault()},onAxisMove:function(r){switch(this.data.mode){case"swipe":return this.handleSwipeAxis(r);case"touch":case"press":return this.handleTouchAxis(r)}},handleSwipeAxis:function(r){const e=this.data,n=r.detail.axis;if(this.startingAxisData.length===0&&this.canRecordAxis&&(this.canRecordAxis=!1,this.startingAxisData[0]=n[0],this.startingAxisData[1]=n[1]),this.startingAxisData.length>0){let i=0,s=0;e.enableNegX&&n[0]<this.startingAxisData[0]&&(i=-1),e.enablePosX&&n[0]>this.startingAxisData[0]&&(i=1),e.enablePosZ&&n[1]>this.startingAxisData[1]&&(s=-1),e.enableNegZ&&n[1]<this.startingAxisData[1]&&(s=1);const a=Math.abs(this.startingAxisData[1]-n[1]);Math.abs(this.startingAxisData[0]-n[0])>a?(this.zVel=0,this.xVel=i,this.isMoving=!0):(this.xVel=0,this.zVel=s,this.isMoving=!0)}},handleTouchAxis:function(r){const e=this.data,n=r.detail.axis;let i=0,s=0;e.enableNegX&&n[0]<0&&(i=-1),e.enablePosX&&n[0]>0&&(i=1),e.enablePosZ&&n[1]>0&&(s=-1),e.enableNegZ&&n[1]<0&&(s=1),Math.abs(n[0])>Math.abs(n[1])?(this.zVel=0,this.xVel=i):(this.xVel=0,this.zVel=s)}})),O2}const tT=(r,e)=>{const n=e.x-r.x,i=e.y-r.y;return Math.sqrt(n*n+i*i)},Cde=(r,e)=>{const n=e.x-r.x,i=e.y-r.y;return Pde(Math.atan2(i,n))},Nde=(r,e,n)=>{const i={x:0,y:0};return n=$L(n),i.x=r.x-e*Math.cos(n),i.y=r.y-e*Math.sin(n),i},$L=r=>r*(Math.PI/180),Pde=r=>r*(180/Math.PI),Rde=r=>isNaN(r.buttons)?r.pressure!==0:r.buttons!==0,k2=new Map,R$=r=>{k2.has(r)&&clearTimeout(k2.get(r)),k2.set(r,setTimeout(r,100))},ET=(r,e,n)=>{const i=e.split(/[ ,]+/g);let s;for(let a=0;a<i.length;a+=1)s=i[a],r.addEventListener?r.addEventListener(s,n,!1):r.attachEvent&&r.attachEvent(s,n)},O$=(r,e,n)=>{const i=e.split(/[ ,]+/g);let s;for(let a=0;a<i.length;a+=1)s=i[a],r.removeEventListener?r.removeEventListener(s,n):r.detachEvent&&r.detachEvent(s,n)},tJ=r=>(r.preventDefault(),r.type.match(/^touch/)?r.changedTouches:r),k$=()=>{const r=window.pageXOffset!==void 0?window.pageXOffset:(document.documentElement||document.body.parentNode||document.body).scrollLeft,e=window.pageYOffset!==void 0?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop;return{x:r,y:e}},I$=(r,e)=>{e.top||e.right||e.bottom||e.left?(r.style.top=e.top,r.style.right=e.right,r.style.bottom=e.bottom,r.style.left=e.left):(r.style.left=e.x+"px",r.style.top=e.y+"px")},HB=(r,e,n)=>{const i=nJ(r);for(let s in i)if(i.hasOwnProperty(s))if(typeof e=="string")i[s]=e+" "+n;else{let a="";for(let o=0,l=e.length;o<l;o+=1)a+=e[o]+" "+n+", ";i[s]=a.slice(0,-2)}return i},Ode=(r,e)=>{const n=nJ(r);for(let i in n)n.hasOwnProperty(i)&&(n[i]=e);return n},nJ=r=>{const e={};return e[r]="",["webkit","Moz","o"].forEach(function(i){e[i+r.charAt(0).toUpperCase()+r.slice(1)]=""}),e},I2=(r,e)=>{for(let n in e)e.hasOwnProperty(n)&&(r[n]=e[n]);return r},kde=(r,e)=>{const n={};for(let i in r)r.hasOwnProperty(i)&&e.hasOwnProperty(i)?n[i]=e[i]:r.hasOwnProperty(i)&&(n[i]=r[i]);return n},GL=(r,e)=>{if(r.length)for(let n=0,i=r.length;n<i;n+=1)e(r[n]);else e(r)},Ide=(r,e,n)=>({x:Math.min(Math.max(r.x,e.x-n),e.x+n),y:Math.min(Math.max(r.y,e.y-n),e.y+n)});var Dde="ontouchstart"in window,Lde=!!window.PointerEvent,Fde=!!window.MSPointerEvent,Q0={touch:{start:"touchstart",move:"touchmove",end:"touchend, touchcancel"},mouse:{start:"mousedown",move:"mousemove",end:"mouseup"},pointer:{start:"pointerdown",move:"pointermove",end:"pointerup, pointercancel"},MSPointer:{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}},xg,Ux={};Lde?xg=Q0.pointer:Fde?xg=Q0.MSPointer:Dde?(xg=Q0.touch,Ux=Q0.mouse):xg=Q0.mouse;function wh(){}wh.prototype.on=function(r,e){var n=this,i=r.split(/[ ,]+/g),s;n._handlers_=n._handlers_||{};for(var a=0;a<i.length;a+=1)s=i[a],n._handlers_[s]=n._handlers_[s]||[],n._handlers_[s].push(e);return n};wh.prototype.off=function(r,e){var n=this;return n._handlers_=n._handlers_||{},r===void 0?n._handlers_={}:e===void 0?n._handlers_[r]=null:n._handlers_[r]&&n._handlers_[r].indexOf(e)>=0&&n._handlers_[r].splice(n._handlers_[r].indexOf(e),1),n};wh.prototype.trigger=function(r,e){var n=this,i=r.split(/[ ,]+/g),s;n._handlers_=n._handlers_||{};for(var a=0;a<i.length;a+=1)s=i[a],n._handlers_[s]&&n._handlers_[s].length&&n._handlers_[s].forEach(function(o){o.call(n,{type:s,target:n},e)})};wh.prototype.config=function(r){var e=this;e.options=e.defaults||{},r&&(e.options=kde(e.options,r))};wh.prototype.bindEvt=function(r,e){var n=this;return n._domHandlers_=n._domHandlers_||{},n._domHandlers_[e]=function(){typeof n["on"+e]=="function"?n["on"+e].apply(n,arguments):console.warn('[WARNING] : Missing "on'+e+'" handler.')},ET(r,xg[e],n._domHandlers_[e]),Ux[e]&&ET(r,Ux[e],n._domHandlers_[e]),n};wh.prototype.unbindEvt=function(r,e){var n=this;return n._domHandlers_=n._domHandlers_||{},O$(r,xg[e],n._domHandlers_[e]),Ux[e]&&O$(r,Ux[e],n._domHandlers_[e]),delete n._domHandlers_[e],this};function gs(r,e){return this.identifier=e.identifier,this.position=e.position,this.frontPosition=e.frontPosition,this.collection=r,this.defaults={size:100,threshold:.1,color:"white",fadeTime:250,dataOnly:!1,restJoystick:!0,restOpacity:.5,mode:"dynamic",zone:document.body,lockX:!1,lockY:!1,shape:"circle"},this.config(e),this.options.mode==="dynamic"&&(this.options.restOpacity=0),this.id=gs.id,gs.id+=1,this.buildEl().stylize(),this.instance={el:this.ui.el,on:this.on.bind(this),off:this.off.bind(this),show:this.show.bind(this),hide:this.hide.bind(this),add:this.addToDom.bind(this),remove:this.removeFromDom.bind(this),destroy:this.destroy.bind(this),setPosition:this.setPosition.bind(this),resetDirection:this.resetDirection.bind(this),computeDirection:this.computeDirection.bind(this),trigger:this.trigger.bind(this),position:this.position,frontPosition:this.frontPosition,ui:this.ui,identifier:this.identifier,id:this.id,options:this.options},this.instance}gs.prototype=new wh;gs.constructor=gs;gs.id=0;gs.prototype.buildEl=function(r){return this.ui={},this.options.dataOnly?this:(this.ui.el=document.createElement("div"),this.ui.back=document.createElement("div"),this.ui.front=document.createElement("div"),this.ui.el.className="nipple collection_"+this.collection.id,this.ui.back.className="back",this.ui.front.className="front",this.ui.el.setAttribute("id","nipple_"+this.collection.id+"_"+this.id),this.ui.el.appendChild(this.ui.back),this.ui.el.appendChild(this.ui.front),this)};gs.prototype.stylize=function(){if(this.options.dataOnly)return this;var r=this.options.fadeTime+"ms",e=Ode("borderRadius","50%"),n=HB("transition","opacity",r),i={};return i.el={position:"absolute",opacity:this.options.restOpacity,display:"block",zIndex:999},i.back={position:"absolute",display:"block",width:this.options.size+"px",height:this.options.size+"px",left:0,marginLeft:-this.options.size/2+"px",marginTop:-this.options.size/2+"px",background:this.options.color,opacity:".5"},i.front={width:this.options.size/2+"px",height:this.options.size/2+"px",position:"absolute",display:"block",left:0,marginLeft:-this.options.size/4+"px",marginTop:-this.options.size/4+"px",background:this.options.color,opacity:".5",transform:"translate(0px, 0px)"},I2(i.el,n),this.options.shape==="circle"&&I2(i.back,e),I2(i.front,e),this.applyStyles(i),this};gs.prototype.applyStyles=function(r){for(var e in this.ui)if(this.ui.hasOwnProperty(e))for(var n in r[e])this.ui[e].style[n]=r[e][n];return this};gs.prototype.addToDom=function(){return this.options.dataOnly||document.body.contains(this.ui.el)?this:(this.options.zone.appendChild(this.ui.el),this)};gs.prototype.removeFromDom=function(){return this.options.dataOnly||!document.body.contains(this.ui.el)?this:(this.options.zone.removeChild(this.ui.el),this)};gs.prototype.destroy=function(){clearTimeout(this.removeTimeout),clearTimeout(this.showTimeout),clearTimeout(this.restTimeout),this.trigger("destroyed",this.instance),this.removeFromDom(),this.off()};gs.prototype.show=function(r){var e=this;return e.options.dataOnly||(clearTimeout(e.removeTimeout),clearTimeout(e.showTimeout),clearTimeout(e.restTimeout),e.addToDom(),e.restCallback(),setTimeout(function(){e.ui.el.style.opacity=1},0),e.showTimeout=setTimeout(function(){e.trigger("shown",e.instance),typeof r=="function"&&r.call(this)},e.options.fadeTime)),e};gs.prototype.hide=function(r){var e=this;if(e.options.dataOnly)return e;if(e.ui.el.style.opacity=e.options.restOpacity,clearTimeout(e.removeTimeout),clearTimeout(e.showTimeout),clearTimeout(e.restTimeout),e.removeTimeout=setTimeout(function(){var n=e.options.mode==="dynamic"?"none":"block";e.ui.el.style.display=n,typeof r=="function"&&r.call(e),e.trigger("hidden",e.instance)},e.options.fadeTime),e.options.restJoystick){const n=e.options.restJoystick,i={};i.x=n===!0||n.x!==!1?0:e.instance.frontPosition.x,i.y=n===!0||n.y!==!1?0:e.instance.frontPosition.y,e.setPosition(r,i)}return e};gs.prototype.setPosition=function(r,e){var n=this;n.frontPosition={x:e.x,y:e.y};var i=n.options.fadeTime+"ms",s={};s.front=HB("transition",["transform"],i);var a={front:{}};a.front={transform:"translate("+n.frontPosition.x+"px,"+n.frontPosition.y+"px)"},n.applyStyles(s),n.applyStyles(a),n.restTimeout=setTimeout(function(){typeof r=="function"&&r.call(n),n.restCallback()},n.options.fadeTime)};gs.prototype.restCallback=function(){var r=this,e={};e.front=HB("transition","none",""),r.applyStyles(e),r.trigger("rested",r.instance)};gs.prototype.resetDirection=function(){this.direction={x:!1,y:!1,angle:!1}};gs.prototype.computeDirection=function(r){var e=r.angle.radian,n=Math.PI/4,i=Math.PI/2,s,a,o;if(e>n&&e<n*3&&!r.lockX?s="up":e>-n&&e<=n&&!r.lockY?s="left":e>-n*3&&e<=-n&&!r.lockX?s="down":r.lockY||(s="right"),r.lockY||(e>-i&&e<i?a="left":a="right"),r.lockX||(e>0?o="up":o="down"),r.force>this.options.threshold){var l={},c;for(c in this.direction)this.direction.hasOwnProperty(c)&&(l[c]=this.direction[c]);var u={};this.direction={x:a,y:o,angle:s},r.direction=this.direction;for(c in l)l[c]===this.direction[c]&&(u[c]=!0);if(u.x&&u.y&&u.angle)return r;(!u.x||!u.y)&&this.trigger("plain",r),u.x||this.trigger("plain:"+a,r),u.y||this.trigger("plain:"+o,r),u.angle||this.trigger("dir dir:"+s,r)}else this.resetDirection();return r};function Vi(r,e){var n=this;n.nipples=[],n.idles=[],n.actives=[],n.ids=[],n.pressureIntervals={},n.manager=r,n.id=Vi.id,Vi.id+=1,n.defaults={zone:document.body,multitouch:!1,maxNumberOfNipples:10,mode:"dynamic",position:{top:0,left:0},catchDistance:200,size:100,threshold:.1,color:"white",fadeTime:250,dataOnly:!1,restJoystick:!0,restOpacity:.5,lockX:!1,lockY:!1,shape:"circle",dynamicPage:!1,follow:!1},n.config(e),(n.options.mode==="static"||n.options.mode==="semi")&&(n.options.multitouch=!1),n.options.multitouch||(n.options.maxNumberOfNipples=1);const i=getComputedStyle(n.options.zone.parentElement);return i&&i.display==="flex"&&(n.parentIsFlex=!0),n.updateBox(),n.prepareNipples(),n.bindings(),n.begin(),n.nipples}Vi.prototype=new wh;Vi.constructor=Vi;Vi.id=0;Vi.prototype.prepareNipples=function(){var r=this,e=r.nipples;e.on=r.on.bind(r),e.off=r.off.bind(r),e.options=r.options,e.destroy=r.destroy.bind(r),e.ids=r.ids,e.id=r.id,e.processOnMove=r.processOnMove.bind(r),e.processOnEnd=r.processOnEnd.bind(r),e.get=function(n){if(n===void 0)return e[0];for(var i=0,s=e.length;i<s;i+=1)if(e[i].identifier===n)return e[i];return!1}};Vi.prototype.bindings=function(){var r=this;r.bindEvt(r.options.zone,"start"),r.options.zone.style.touchAction="none",r.options.zone.style.msTouchAction="none"};Vi.prototype.begin=function(){var r=this,e=r.options;if(e.mode==="static"){var n=r.createNipple(e.position,r.manager.getIdentifier());n.add(),r.idles.push(n)}};Vi.prototype.createNipple=function(r,e){var n=this,i=n.manager.scroll,s={},a=n.options,o={x:n.parentIsFlex?i.x:i.x+n.box.left,y:n.parentIsFlex?i.y:i.y+n.box.top};if(r.x&&r.y)s={x:r.x-o.x,y:r.y-o.y};else if(r.top||r.right||r.bottom||r.left){var l=document.createElement("DIV");l.style.display="hidden",l.style.top=r.top,l.style.right=r.right,l.style.bottom=r.bottom,l.style.left=r.left,l.style.position="absolute",a.zone.appendChild(l);var c=l.getBoundingClientRect();a.zone.removeChild(l),s=r,r={x:c.left+i.x,y:c.top+i.y}}var u=new gs(n,{color:a.color,size:a.size,threshold:a.threshold,fadeTime:a.fadeTime,dataOnly:a.dataOnly,restJoystick:a.restJoystick,restOpacity:a.restOpacity,mode:a.mode,identifier:e,position:r,zone:a.zone,frontPosition:{x:0,y:0},shape:a.shape});return a.dataOnly||(I$(u.ui.el,s),I$(u.ui.front,u.frontPosition)),n.nipples.push(u),n.trigger("added "+u.identifier+":added",u),n.manager.trigger("added "+u.identifier+":added",u),n.bindNipple(u),u};Vi.prototype.updateBox=function(){var r=this;r.box=r.options.zone.getBoundingClientRect()};Vi.prototype.bindNipple=function(r){var e=this,n,i=function(s,a){n=s.type+" "+a.id+":"+s.type,e.trigger(n,a)};r.on("destroyed",e.onDestroyed.bind(e)),r.on("shown hidden rested dir plain",i),r.on("dir:up dir:right dir:down dir:left",i),r.on("plain:up plain:right plain:down plain:left",i)};Vi.prototype.pressureFn=function(r,e,n){var i=this,s=0;clearInterval(i.pressureIntervals[n]),i.pressureIntervals[n]=setInterval((function(){var a=r.force||r.pressure||r.webkitForce||0;a!==s&&(e.trigger("pressure",a),i.trigger("pressure "+e.identifier+":pressure",a),s=a)}).bind(i),100)};Vi.prototype.onstart=function(r){var e=this,n=e.options,i=r;r=tJ(r),e.updateBox();var s=function(a){e.actives.length<n.maxNumberOfNipples?e.processOnStart(a):i.type.match(/^touch/)&&(Object.keys(e.manager.ids).forEach(function(o){if(Object.values(i.touches).findIndex(function(c){return c.identifier===o})<0){var l=[r[0]];l.identifier=o,e.processOnEnd(l)}}),e.actives.length<n.maxNumberOfNipples&&e.processOnStart(a))};return GL(r,s),e.manager.bindDocument(),!1};Vi.prototype.processOnStart=function(r){var e=this,n=e.options,i,s=e.manager.getIdentifier(r),a=r.force||r.pressure||r.webkitForce||0,o={x:r.pageX,y:r.pageY},l=e.getOrCreate(s,o);l.identifier!==s&&e.manager.removeIdentifier(l.identifier),l.identifier=s;var c=function(h){h.trigger("start",h),e.trigger("start "+h.id+":start",h),h.show(),a>0&&e.pressureFn(r,h,h.identifier),e.processOnMove(r)};if((i=e.idles.indexOf(l))>=0&&e.idles.splice(i,1),e.actives.push(l),e.ids.push(l.identifier),n.mode!=="semi")c(l);else{var u=tT(o,l.position);if(u<=n.catchDistance)c(l);else{l.destroy(),e.processOnStart(r);return}}return l};Vi.prototype.getOrCreate=function(r,e){var n=this,i=n.options,s;return/(semi|static)/.test(i.mode)?(s=n.idles[0],s?(n.idles.splice(0,1),s):i.mode==="semi"?n.createNipple(e,r):(console.warn("Coudln't find the needed nipple."),!1)):(s=n.createNipple(e,r),s)};Vi.prototype.processOnMove=function(r){var e=this,n=e.options,i=e.manager.getIdentifier(r),s=e.nipples.get(i),a=e.manager.scroll;if(!Rde(r)){this.processOnEnd(r);return}if(!s){console.error("Found zombie joystick with ID "+i),e.manager.removeIdentifier(i);return}if(n.dynamicPage){var o=s.el.getBoundingClientRect();s.position={x:a.x+o.left,y:a.y+o.top}}s.identifier=i;var l=s.options.size/2,c={x:r.pageX,y:r.pageY};n.lockX&&(c.y=s.position.y),n.lockY&&(c.x=s.position.x);var u=tT(c,s.position),h=Cde(c,s.position),d=$L(h),f=u/l,p={distance:u,position:c},g,v;if(s.options.shape==="circle"?(g=Math.min(u,l),v=Nde(s.position,g,h)):(v=Ide(c,s.position,l),g=tT(v,s.position)),n.follow){if(u>l){let S=c.x-v.x,T=c.y-v.y;s.position.x+=S,s.position.y+=T,s.el.style.top=s.position.y-(e.box.top+a.y)+"px",s.el.style.left=s.position.x-(e.box.left+a.x)+"px",u=tT(c,s.position)}}else c=v,u=g;var x=c.x-s.position.x,_=c.y-s.position.y;s.frontPosition={x,y:_},n.dataOnly||(s.ui.front.style.transform="translate("+x+"px,"+_+"px)");var E={identifier:s.identifier,position:c,force:f,pressure:r.force||r.pressure||r.webkitForce||0,distance:u,angle:{radian:d,degree:h},vector:{x:x/l,y:-_/l},raw:p,instance:s,lockX:n.lockX,lockY:n.lockY};E=s.computeDirection(E),E.angle={radian:$L(180-h),degree:180-h},s.trigger("move",E),e.trigger("move "+s.id+":move",E)};Vi.prototype.processOnEnd=function(r){var e=this,n=e.options,i=e.manager.getIdentifier(r),s=e.nipples.get(i),a=e.manager.removeIdentifier(s.identifier);s&&(n.dataOnly||s.hide(function(){n.mode==="dynamic"&&(s.trigger("removed",s),e.trigger("removed "+s.id+":removed",s),e.manager.trigger("removed "+s.id+":removed",s),s.destroy())}),clearInterval(e.pressureIntervals[s.identifier]),s.resetDirection(),s.trigger("end",s),e.trigger("end "+s.id+":end",s),e.ids.indexOf(s.identifier)>=0&&e.ids.splice(e.ids.indexOf(s.identifier),1),e.actives.indexOf(s)>=0&&e.actives.splice(e.actives.indexOf(s),1),/(semi|static)/.test(n.mode)?e.idles.push(s):e.nipples.indexOf(s)>=0&&e.nipples.splice(e.nipples.indexOf(s),1),e.manager.unbindDocument(),/(semi|static)/.test(n.mode)&&(e.manager.ids[a.id]=a.identifier))};Vi.prototype.onDestroyed=function(r,e){var n=this;n.nipples.indexOf(e)>=0&&n.nipples.splice(n.nipples.indexOf(e),1),n.actives.indexOf(e)>=0&&n.actives.splice(n.actives.indexOf(e),1),n.idles.indexOf(e)>=0&&n.idles.splice(n.idles.indexOf(e),1),n.ids.indexOf(e.identifier)>=0&&n.ids.splice(n.ids.indexOf(e.identifier),1),n.manager.removeIdentifier(e.identifier),n.manager.unbindDocument()};Vi.prototype.destroy=function(){var r=this;r.unbindEvt(r.options.zone,"start"),r.nipples.forEach(function(n){n.destroy()});for(var e in r.pressureIntervals)r.pressureIntervals.hasOwnProperty(e)&&clearInterval(r.pressureIntervals[e]);r.trigger("destroyed",r.nipples),r.manager.unbindDocument(),r.off()};function ks(r){var e=this;e.ids={},e.index=0,e.collections=[],e.scroll=k$(),e.config(r),e.prepareCollections();var n=function(){var s;e.collections.forEach(function(a){a.forEach(function(o){s=o.el.getBoundingClientRect(),o.position={x:e.scroll.x+s.left,y:e.scroll.y+s.top}})})};ET(window,"resize",function(){R$(n)});var i=function(){e.scroll=k$()};return ET(window,"scroll",function(){R$(i)}),e.collections}ks.prototype=new wh;ks.constructor=ks;ks.prototype.prepareCollections=function(){var r=this;r.collections.create=r.create.bind(r),r.collections.on=r.on.bind(r),r.collections.off=r.off.bind(r),r.collections.destroy=r.destroy.bind(r),r.collections.get=function(e){var n;return r.collections.every(function(i){return n=i.get(e),!n}),n}};ks.prototype.create=function(r){return this.createCollection(r)};ks.prototype.createCollection=function(r){var e=this,n=new Vi(e,r);return e.bindCollection(n),e.collections.push(n),n};ks.prototype.bindCollection=function(r){var e=this,n,i=function(s,a){n=s.type+" "+a.id+":"+s.type,e.trigger(n,a)};r.on("destroyed",e.onDestroyed.bind(e)),r.on("shown hidden rested dir plain",i),r.on("dir:up dir:right dir:down dir:left",i),r.on("plain:up plain:right plain:down plain:left",i)};ks.prototype.bindDocument=function(){var r=this;r.binded||(r.bindEvt(document,"move").bindEvt(document,"end"),r.binded=!0)};ks.prototype.unbindDocument=function(r){var e=this;(!Object.keys(e.ids).length||r===!0)&&(e.unbindEvt(document,"move").unbindEvt(document,"end"),e.binded=!1)};ks.prototype.getIdentifier=function(r){var e;return r?(e=r.identifier===void 0?r.pointerId:r.identifier,e===void 0&&(e=this.latest||0)):e=this.index,this.ids[e]===void 0&&(this.ids[e]=this.index,this.index+=1),this.latest=e,this.ids[e]};ks.prototype.removeIdentifier=function(r){var e={};for(var n in this.ids)if(this.ids[n]===r){e.id=n,e.identifier=this.ids[n],delete this.ids[n];break}return e};ks.prototype.onmove=function(r){var e=this;return e.onAny("move",r),!1};ks.prototype.onend=function(r){var e=this;return e.onAny("end",r),!1};ks.prototype.oncancel=function(r){var e=this;return e.onAny("end",r),!1};ks.prototype.onAny=function(r,e){var n=this,i,s="processOn"+r.charAt(0).toUpperCase()+r.slice(1);e=tJ(e);var a=function(l,c,u){u.ids.indexOf(c)>=0&&(u[s](l),l._found_=!0)},o=function(l){i=n.getIdentifier(l),GL(n.collections,a.bind(null,l,i)),l._found_||n.removeIdentifier(i)};return GL(e,o),!1};ks.prototype.destroy=function(){var r=this;r.unbindDocument(!0),r.ids={},r.index=0,r.collections.forEach(function(e){e.destroy()}),r.off()};ks.prototype.onDestroyed=function(r,e){var n=this;if(n.collections.indexOf(e)<0)return!1;n.collections.splice(n.collections.indexOf(e),1)};const D$=new ks,L$={create:function(r){return D$.create(r)},factory:D$};AFRAME.registerComponent("nipple-controls",{schema:{enabled:{default:!0},mode:{default:"dynamic",oneOf:["static","semi","dynamic"]},rotationSensitivity:{default:1},moveJoystickEnabled:{default:!0},lookJoystickEnabled:{default:!0},sideMargin:{default:"30px"},bottomMargin:{default:"70px"},moveJoystickPosition:{default:"left",oneOf:["left","right"]},lookJoystickPosition:{default:"right",oneOf:["left","right"]}},init(){this.dVelocity=new THREE.Vector3,this.lookVector=new THREE.Vector2;const r=this.el.querySelector("[look-controls]").components["look-controls"];this.pitchObject=r.pitchObject,this.yawObject=r.yawObject,this.rigRotation=this.el.object3D.rotation,this.moveData=void 0,this.lookData=void 0,this.moving=!1,this.rotating=!1},update(r){(this.data.moveJoystickPosition!==r.moveJoystickPosition||this.data.sideMargin!==r.sideMargin||this.data.bottomMargin!==r.bottomMargin||this.data.mode!==r.mode)&&this.removeMoveJoystick(),(this.data.lookJoystickPosition!==r.lookJoystickPosition||this.data.sideMargin!==r.sideMargin||this.data.bottomMargin!==r.bottomMargin||this.data.mode!==r.mode)&&this.removeLookJoystick(),this.data.enabled&&this.data.moveJoystickEnabled?this.createMoveJoystick():this.removeMoveJoystick(),this.data.enabled&&this.data.lookJoystickEnabled?this.createLookJoystick():this.removeLookJoystick()},pause(){this.moving=!1,this.rotating=!1},remove(){this.removeMoveJoystick(),this.removeLookJoystick()},isVelocityActive(){return this.data.enabled&&this.moving},getVelocityDelta(){if(this.dVelocity.set(0,0,0),this.isVelocityActive()){const r=this.moveData.force<1?this.moveData.force:1,e=this.moveData.angle.radian,n=Math.cos(e)*r,i=-Math.sin(e)*r;this.dVelocity.set(n,0,i)}return this.dVelocity},isRotationActive(){return this.data.enabled&&this.rotating},updateRotation(r){if(!this.isRotationActive())return;const e=this.lookData.force<1?this.lookData.force:1,n=this.lookData.angle.radian,i=this.lookVector;i.x=Math.cos(n)*e,i.y=Math.sin(n)*e,i.multiplyScalar(this.data.rotationSensitivity*r/1e3),this.yawObject.rotation.y-=i.x;let s=this.pitchObject.rotation.x+i.y;s=Math.max(-Math.PI/2,Math.min(Math.PI/2,s)),this.pitchObject.rotation.x=s},tick:function(r,e){this.updateRotation(e)},initLeftZone(){const r=document.createElement("div");r.setAttribute("id","joystickLeftZone"),r.setAttribute("style",`position:absolute;${this.data.moveJoystickPosition}:${this.data.sideMargin};bottom:${this.data.bottomMargin};z-index:1`),document.body.appendChild(r),this.leftZone=r},initRightZone(){const r=document.createElement("div");r.setAttribute("id","joystickRightZone"),r.setAttribute("style",`position:absolute;${this.data.lookJoystickPosition}:${this.data.sideMargin};bottom:${this.data.bottomMargin};z-index:1`),document.body.appendChild(r),this.rightZone=r},createMoveJoystick(){if(this.moveJoystick)return;this.initLeftZone();const r={mode:this.data.mode,zone:this.leftZone,color:"white",fadeTime:0};this.leftZone.style.width="100px",this.data.mode==="static"?(this.leftZone.style.height="100px",r.position={left:"50%",bottom:"50%"}):this.leftZone.style.height="400px",this.moveJoystick=L$.create(r),this.moveJoystick.on("move",(e,n)=>{this.moveData=n,this.moving=!0}),this.moveJoystick.on("end",(e,n)=>{this.moving=!1})},createLookJoystick(){if(this.lookJoystick)return;this.initRightZone();const r={mode:this.data.mode,zone:this.rightZone,color:"white",fadeTime:0};this.rightZone.style.width="100px",this.data.mode==="static"?(this.rightZone.style.height="100px",r.position={left:"50%",bottom:"50%"}):this.rightZone.style.height="400px",this.lookJoystick=L$.create(r),this.lookJoystick.on("move",(e,n)=>{this.lookData=n,this.rotating=!0}),this.lookJoystick.on("end",(e,n)=>{this.rotating=!1})},removeMoveJoystick(){this.moveJoystick&&(this.moveJoystick.destroy(),this.moveJoystick=void 0),this.moveData=void 0,this.leftZone&&this.leftZone.parentNode&&(this.leftZone.remove(),this.leftZone=void 0)},removeLookJoystick(){this.lookJoystick&&(this.lookJoystick.destroy(),this.lookJoystick=void 0),this.lookData=void 0,this.rightZone&&this.rightZone.parentNode&&(this.rightZone.remove(),this.rightZone=void 0)}});var F$;function Bde(){return F$||(F$=1,xde(),wde(),Tde(),Ede(),Mde(),Ade()),b$}var B$={},D2,j$;function jde(){if(j$)return D2;j$=1;const r={once:THREE.LoopOnce,repeat:THREE.LoopRepeat,pingpong:THREE.LoopPingPong};D2=AFRAME.registerComponent("animation-mixer",{schema:{clip:{default:"*"},useRegExp:{default:!1},duration:{default:0},clampWhenFinished:{default:!1,type:"boolean"},crossFadeDuration:{default:0},loop:{default:"repeat",oneOf:Object.keys(r)},repetitions:{default:1/0,min:0},timeScale:{default:1},startAt:{default:0}},init:function(){this.model=null,this.mixer=null,this.activeActions=[];const i=this.el.getObject3D("mesh");i?this.load(i):this.el.addEventListener("model-loaded",s=>{this.load(s.detail.model)})},load:function(i){const s=this.el;this.model=i,this.mixer=new THREE.AnimationMixer(i),this.mixer.addEventListener("loop",a=>{s.emit("animation-loop",{action:a.action,loopDelta:a.loopDelta})}),this.mixer.addEventListener("finished",a=>{s.emit("animation-finished",{action:a.action,direction:a.direction})}),this.data.clip&&this.update({})},remove:function(){this.mixer&&this.mixer.stopAllAction()},update:function(i){if(!i)return;const s=this.data,a=AFRAME.utils.diff(s,i);if("clip"in a){this.stopAction(),s.clip&&this.playAction();return}this.activeActions.forEach(o=>{"duration"in a&&s.duration&&o.setDuration(s.duration),"clampWhenFinished"in a&&(o.clampWhenFinished=s.clampWhenFinished),("loop"in a||"repetitions"in a)&&o.setLoop(r[s.loop],s.repetitions),"timeScale"in a&&o.setEffectiveTimeScale(s.timeScale)})},stopAction:function(){const i=this.data;for(let s=0;s<this.activeActions.length;s++)i.crossFadeDuration?this.activeActions[s].fadeOut(i.crossFadeDuration):this.activeActions[s].stop();this.activeActions.length=0},playAction:function(){if(!this.mixer)return;const i=this.model,s=this.data,a=i.animations||(i.geometry||{}).animations||[];if(!a.length)return;const o=s.useRegExp?s.clip:e(s.clip);for(let l,c=0;l=a[c];c++)if(l.name.match(o)){const u=this.mixer.clipAction(l,i);u.enabled=!0,u.clampWhenFinished=s.clampWhenFinished,s.duration&&u.setDuration(s.duration),s.timeScale!==1&&u.setEffectiveTimeScale(s.timeScale),u.startAt(this.mixer.time-s.startAt/1e3),u.setLoop(r[s.loop],s.repetitions).fadeIn(s.crossFadeDuration).play(),this.activeActions.push(u)}},tick:function(i,s){this.mixer&&!isNaN(s)&&this.mixer.update(s/1e3)}});function e(i){return new RegExp("^"+i.split(/\*+/).map(n).join(".*")+"$")}function n(i){return i.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&")}return D2}/**
 * @license
 * Copyright 2010-2024 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const rJ="164",MT=0,Ude=1,zde=2,U$=1,z$=100,$$=204,G$=205,V$=3,WB=0,H$="attached",$de="detached",iJ=300,Gde=303,Sd=1e3,Cc=1001,W$=1002,AT=1003,nT=1006,qB=1008,Vde=1009,Hde=1014,sJ=1015,Wde=1020,aJ=1023,L2=1026,q$=1027,CT=2300,NT=2301,F2=2302,X$=2400,K$=2401,Y$=2402,qde=2500,oJ=0,lJ="",Ta="srgb",XB="srgb-linear",Xde="display-p3",cJ="display-p3-linear",VL="linear",Z$="srgb",Q$="rec709",J$="p3",ym=7680,e6=519,Kde=515,t6=35044,rp=2e3,HL=2001;let pM=class{addEventListener(e,n){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(n)===-1&&i[e].push(n)}hasEventListener(e,n){if(this._listeners===void 0)return!1;const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(n)!==-1}removeEventListener(e,n){if(this._listeners===void 0)return;const s=this._listeners[e];if(s!==void 0){const a=s.indexOf(n);a!==-1&&s.splice(a,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const i=this._listeners[e.type];if(i!==void 0){e.target=this;const s=i.slice(0);for(let a=0,o=s.length;a<o;a++)s[a].call(this,e);e.target=null}}};const Qs=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let n6=1234567;const hx=Math.PI/180,zx=180/Math.PI;function Gd(){const r=Math.random()*4294967295|0,e=Math.random()*4294967295|0,n=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(Qs[r&255]+Qs[r>>8&255]+Qs[r>>16&255]+Qs[r>>24&255]+"-"+Qs[e&255]+Qs[e>>8&255]+"-"+Qs[e>>16&15|64]+Qs[e>>24&255]+"-"+Qs[n&63|128]+Qs[n>>8&255]+"-"+Qs[n>>16&255]+Qs[n>>24&255]+Qs[i&255]+Qs[i>>8&255]+Qs[i>>16&255]+Qs[i>>24&255]).toLowerCase()}function Gs(r,e,n){return Math.max(e,Math.min(n,r))}function KB(r,e){return(r%e+e)%e}function Yde(r,e,n,i,s){return i+(r-e)*(s-i)/(n-e)}function Zde(r,e,n){return r!==e?(n-r)/(e-r):0}function dx(r,e,n){return(1-n)*r+n*e}function Qde(r,e,n,i){return dx(r,e,1-Math.exp(-n*i))}function Jde(r,e=1){return e-Math.abs(KB(r,e*2)-e)}function efe(r,e,n){return r<=e?0:r>=n?1:(r=(r-e)/(n-e),r*r*(3-2*r))}function tfe(r,e,n){return r<=e?0:r>=n?1:(r=(r-e)/(n-e),r*r*r*(r*(r*6-15)+10))}function nfe(r,e){return r+Math.floor(Math.random()*(e-r+1))}function rfe(r,e){return r+Math.random()*(e-r)}function ife(r){return r*(.5-Math.random())}function sfe(r){r!==void 0&&(n6=r);let e=n6+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function afe(r){return r*hx}function ofe(r){return r*zx}function lfe(r){return(r&r-1)===0&&r!==0}function cfe(r){return Math.pow(2,Math.ceil(Math.log(r)/Math.LN2))}function ufe(r){return Math.pow(2,Math.floor(Math.log(r)/Math.LN2))}function hfe(r,e,n,i,s){const a=Math.cos,o=Math.sin,l=a(n/2),c=o(n/2),u=a((e+i)/2),h=o((e+i)/2),d=a((e-i)/2),f=o((e-i)/2),p=a((i-e)/2),g=o((i-e)/2);switch(s){case"XYX":r.set(l*h,c*d,c*f,l*u);break;case"YZY":r.set(c*f,l*h,c*d,l*u);break;case"ZXZ":r.set(c*d,c*f,l*h,l*u);break;case"XZX":r.set(l*h,c*g,c*p,l*u);break;case"YXY":r.set(c*p,l*h,c*g,l*u);break;case"ZYZ":r.set(c*g,c*p,l*h,l*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+s)}}function yg(r,e){switch(e.constructor){case Float32Array:return r;case Uint32Array:return r/4294967295;case Uint16Array:return r/65535;case Uint8Array:return r/255;case Int32Array:return Math.max(r/2147483647,-1);case Int16Array:return Math.max(r/32767,-1);case Int8Array:return Math.max(r/127,-1);default:throw new Error("Invalid component type.")}}function ba(r,e){switch(e.constructor){case Float32Array:return r;case Uint32Array:return Math.round(r*4294967295);case Uint16Array:return Math.round(r*65535);case Uint8Array:return Math.round(r*255);case Int32Array:return Math.round(r*2147483647);case Int16Array:return Math.round(r*32767);case Int8Array:return Math.round(r*127);default:throw new Error("Invalid component type.")}}const Zi={DEG2RAD:hx,RAD2DEG:zx,generateUUID:Gd,clamp:Gs,euclideanModulo:KB,mapLinear:Yde,inverseLerp:Zde,lerp:dx,damp:Qde,pingpong:Jde,smoothstep:efe,smootherstep:tfe,randInt:nfe,randFloat:rfe,randFloatSpread:ife,seededRandom:sfe,degToRad:afe,radToDeg:ofe,isPowerOfTwo:lfe,ceilPowerOfTwo:cfe,floorPowerOfTwo:ufe,setQuaternionFromProperEuler:hfe,normalize:ba,denormalize:yg};let ki=class uJ{constructor(e=0,n=0){uJ.prototype.isVector2=!0,this.x=e,this.y=n}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,n){return this.x=e,this.y=n,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const n=this.x,i=this.y,s=e.elements;return this.x=s[0]*n+s[3]*i+s[6],this.y=s[1]*n+s[4]*i+s[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this}clampLength(e,n){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(n,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const i=this.dot(e)/n;return Math.acos(Gs(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,i=this.y-e.y;return n*n+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this}lerpVectors(e,n,i){return this.x=e.x+(n.x-e.x)*i,this.y=e.y+(n.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this}rotateAround(e,n){const i=Math.cos(n),s=Math.sin(n),a=this.x-e.x,o=this.y-e.y;return this.x=a*i-o*s+e.x,this.y=a*s+o*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}},Vd=class hJ{constructor(e,n,i,s,a,o,l,c,u){hJ.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,n,i,s,a,o,l,c,u)}set(e,n,i,s,a,o,l,c,u){const h=this.elements;return h[0]=e,h[1]=s,h[2]=l,h[3]=n,h[4]=a,h[5]=c,h[6]=i,h[7]=o,h[8]=u,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const n=this.elements,i=e.elements;return n[0]=i[0],n[1]=i[1],n[2]=i[2],n[3]=i[3],n[4]=i[4],n[5]=i[5],n[6]=i[6],n[7]=i[7],n[8]=i[8],this}extractBasis(e,n,i){return e.setFromMatrix3Column(this,0),n.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const n=e.elements;return this.set(n[0],n[4],n[8],n[1],n[5],n[9],n[2],n[6],n[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const i=e.elements,s=n.elements,a=this.elements,o=i[0],l=i[3],c=i[6],u=i[1],h=i[4],d=i[7],f=i[2],p=i[5],g=i[8],v=s[0],x=s[3],_=s[6],E=s[1],S=s[4],T=s[7],M=s[2],C=s[5],A=s[8];return a[0]=o*v+l*E+c*M,a[3]=o*x+l*S+c*C,a[6]=o*_+l*T+c*A,a[1]=u*v+h*E+d*M,a[4]=u*x+h*S+d*C,a[7]=u*_+h*T+d*A,a[2]=f*v+p*E+g*M,a[5]=f*x+p*S+g*C,a[8]=f*_+p*T+g*A,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=e,n[4]*=e,n[7]*=e,n[2]*=e,n[5]*=e,n[8]*=e,this}determinant(){const e=this.elements,n=e[0],i=e[1],s=e[2],a=e[3],o=e[4],l=e[5],c=e[6],u=e[7],h=e[8];return n*o*h-n*l*u-i*a*h+i*l*c+s*a*u-s*o*c}invert(){const e=this.elements,n=e[0],i=e[1],s=e[2],a=e[3],o=e[4],l=e[5],c=e[6],u=e[7],h=e[8],d=h*o-l*u,f=l*c-h*a,p=u*a-o*c,g=n*d+i*f+s*p;if(g===0)return this.set(0,0,0,0,0,0,0,0,0);const v=1/g;return e[0]=d*v,e[1]=(s*u-h*i)*v,e[2]=(l*i-s*o)*v,e[3]=f*v,e[4]=(h*n-s*c)*v,e[5]=(s*a-l*n)*v,e[6]=p*v,e[7]=(i*c-u*n)*v,e[8]=(o*n-i*a)*v,this}transpose(){let e;const n=this.elements;return e=n[1],n[1]=n[3],n[3]=e,e=n[2],n[2]=n[6],n[6]=e,e=n[5],n[5]=n[7],n[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const n=this.elements;return e[0]=n[0],e[1]=n[3],e[2]=n[6],e[3]=n[1],e[4]=n[4],e[5]=n[7],e[6]=n[2],e[7]=n[5],e[8]=n[8],this}setUvTransform(e,n,i,s,a,o,l){const c=Math.cos(a),u=Math.sin(a);return this.set(i*c,i*u,-i*(c*o+u*l)+o+e,-s*u,s*c,-s*(-u*o+c*l)+l+n,0,0,1),this}scale(e,n){return this.premultiply(B2.makeScale(e,n)),this}rotate(e){return this.premultiply(B2.makeRotation(-e)),this}translate(e,n){return this.premultiply(B2.makeTranslation(e,n)),this}makeTranslation(e,n){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,n,0,0,1),this}makeRotation(e){const n=Math.cos(e),i=Math.sin(e);return this.set(n,-i,0,i,n,0,0,0,1),this}makeScale(e,n){return this.set(e,0,0,0,n,0,0,0,1),this}equals(e){const n=this.elements,i=e.elements;for(let s=0;s<9;s++)if(n[s]!==i[s])return!1;return!0}fromArray(e,n=0){for(let i=0;i<9;i++)this.elements[i]=e[i+n];return this}toArray(e=[],n=0){const i=this.elements;return e[n]=i[0],e[n+1]=i[1],e[n+2]=i[2],e[n+3]=i[3],e[n+4]=i[4],e[n+5]=i[5],e[n+6]=i[6],e[n+7]=i[7],e[n+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}};const B2=new Vd;function dfe(r){for(let e=r.length-1;e>=0;--e)if(r[e]>=65535)return!0;return!1}function WL(r){return document.createElementNS("http://www.w3.org/1999/xhtml",r)}const r6={};function ffe(r){r in r6||(r6[r]=!0,console.warn(r))}const i6=new Vd().set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),s6=new Vd().set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),Hw={[XB]:{transfer:VL,primaries:Q$,toReference:r=>r,fromReference:r=>r},[Ta]:{transfer:Z$,primaries:Q$,toReference:r=>r.convertSRGBToLinear(),fromReference:r=>r.convertLinearToSRGB()},[cJ]:{transfer:VL,primaries:J$,toReference:r=>r.applyMatrix3(s6),fromReference:r=>r.applyMatrix3(i6)},[Xde]:{transfer:Z$,primaries:J$,toReference:r=>r.convertSRGBToLinear().applyMatrix3(s6),fromReference:r=>r.applyMatrix3(i6).convertLinearToSRGB()}},pfe=new Set([XB,cJ]),Nl={enabled:!0,_workingColorSpace:XB,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(r){if(!pfe.has(r))throw new Error(`Unsupported working color space, "${r}".`);this._workingColorSpace=r},convert:function(r,e,n){if(this.enabled===!1||e===n||!e||!n)return r;const i=Hw[e].toReference,s=Hw[n].fromReference;return s(i(r))},fromWorkingColorSpace:function(r,e){return this.convert(r,this._workingColorSpace,e)},toWorkingColorSpace:function(r,e){return this.convert(r,e,this._workingColorSpace)},getPrimaries:function(r){return Hw[r].primaries},getTransfer:function(r){return r===lJ?VL:Hw[r].transfer}};function Ig(r){return r<.04045?r*.0773993808:Math.pow(r*.9478672986+.0521327014,2.4)}function j2(r){return r<.0031308?r*12.92:1.055*Math.pow(r,.41666)-.055}let vm,mfe=class{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let n;if(e instanceof HTMLCanvasElement)n=e;else{vm===void 0&&(vm=WL("canvas")),vm.width=e.width,vm.height=e.height;const i=vm.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),n=vm}return n.width>2048||n.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),n.toDataURL("image/jpeg",.6)):n.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const n=WL("canvas");n.width=e.width,n.height=e.height;const i=n.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const s=i.getImageData(0,0,e.width,e.height),a=s.data;for(let o=0;o<a.length;o++)a[o]=Ig(a[o]/255)*255;return i.putImageData(s,0,0),n}else if(e.data){const n=e.data.slice(0);for(let i=0;i<n.length;i++)n instanceof Uint8Array||n instanceof Uint8ClampedArray?n[i]=Math.floor(Ig(n[i]/255)*255):n[i]=Ig(n[i]);return{data:n,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}},gfe=0,yfe=class{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:gfe++}),this.uuid=Gd(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},s=this.data;if(s!==null){let a;if(Array.isArray(s)){a=[];for(let o=0,l=s.length;o<l;o++)s[o].isDataTexture?a.push(U2(s[o].image)):a.push(U2(s[o]))}else a=U2(s);i.url=a}return n||(e.images[this.uuid]=i),i}};function U2(r){return typeof HTMLImageElement<"u"&&r instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&r instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&r instanceof ImageBitmap?mfe.getDataURL(r):r.data?{data:Array.from(r.data),width:r.width,height:r.height,type:r.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let vfe=0,rh=class rT extends pM{constructor(e=rT.DEFAULT_IMAGE,n=rT.DEFAULT_MAPPING,i=Cc,s=Cc,a=nT,o=qB,l=aJ,c=Vde,u=rT.DEFAULT_ANISOTROPY,h=lJ){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:vfe++}),this.uuid=Gd(),this.name="",this.source=new yfe(e),this.mipmaps=[],this.mapping=n,this.channel=0,this.wrapS=i,this.wrapT=s,this.magFilter=a,this.minFilter=o,this.anisotropy=u,this.format=l,this.internalFormat=null,this.type=c,this.offset=new ki(0,0),this.repeat=new ki(1,1),this.center=new ki(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Vd,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=h,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),n||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==iJ)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Sd:e.x=e.x-Math.floor(e.x);break;case Cc:e.x=e.x<0?0:1;break;case W$:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Sd:e.y=e.y-Math.floor(e.y);break;case Cc:e.y=e.y<0?0:1;break;case W$:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}};rh.DEFAULT_IMAGE=null;rh.DEFAULT_MAPPING=iJ;rh.DEFAULT_ANISOTROPY=1;let Ha=class dJ{constructor(e=0,n=0,i=0,s=1){dJ.prototype.isVector4=!0,this.x=e,this.y=n,this.z=i,this.w=s}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,n,i,s){return this.x=e,this.y=n,this.z=i,this.w=s,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;case 3:this.w=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this.w=e.w+n.w,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this.w+=e.w*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this.w=e.w-n.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const n=this.x,i=this.y,s=this.z,a=this.w,o=e.elements;return this.x=o[0]*n+o[4]*i+o[8]*s+o[12]*a,this.y=o[1]*n+o[5]*i+o[9]*s+o[13]*a,this.z=o[2]*n+o[6]*i+o[10]*s+o[14]*a,this.w=o[3]*n+o[7]*i+o[11]*s+o[15]*a,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const n=Math.sqrt(1-e.w*e.w);return n<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/n,this.y=e.y/n,this.z=e.z/n),this}setAxisAngleFromRotationMatrix(e){let n,i,s,a;const c=e.elements,u=c[0],h=c[4],d=c[8],f=c[1],p=c[5],g=c[9],v=c[2],x=c[6],_=c[10];if(Math.abs(h-f)<.01&&Math.abs(d-v)<.01&&Math.abs(g-x)<.01){if(Math.abs(h+f)<.1&&Math.abs(d+v)<.1&&Math.abs(g+x)<.1&&Math.abs(u+p+_-3)<.1)return this.set(1,0,0,0),this;n=Math.PI;const S=(u+1)/2,T=(p+1)/2,M=(_+1)/2,C=(h+f)/4,A=(d+v)/4,P=(g+x)/4;return S>T&&S>M?S<.01?(i=0,s=.707106781,a=.707106781):(i=Math.sqrt(S),s=C/i,a=A/i):T>M?T<.01?(i=.707106781,s=0,a=.707106781):(s=Math.sqrt(T),i=C/s,a=P/s):M<.01?(i=.707106781,s=.707106781,a=0):(a=Math.sqrt(M),i=A/a,s=P/a),this.set(i,s,a,n),this}let E=Math.sqrt((x-g)*(x-g)+(d-v)*(d-v)+(f-h)*(f-h));return Math.abs(E)<.001&&(E=1),this.x=(x-g)/E,this.y=(d-v)/E,this.z=(f-h)/E,this.w=Math.acos((u+p+_-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this.z=Math.max(e.z,Math.min(n.z,this.z)),this.w=Math.max(e.w,Math.min(n.w,this.w)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this.z=Math.max(e,Math.min(n,this.z)),this.w=Math.max(e,Math.min(n,this.w)),this}clampLength(e,n){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(n,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this.w+=(e.w-this.w)*n,this}lerpVectors(e,n,i){return this.x=e.x+(n.x-e.x)*i,this.y=e.y+(n.y-e.y)*i,this.z=e.z+(n.z-e.z)*i,this.w=e.w+(n.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this.w=e[n+3],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e[n+3]=this.w,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this.w=e.getW(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}},Sa=class{constructor(e=0,n=0,i=0,s=1){this.isQuaternion=!0,this._x=e,this._y=n,this._z=i,this._w=s}static slerpFlat(e,n,i,s,a,o,l){let c=i[s+0],u=i[s+1],h=i[s+2],d=i[s+3];const f=a[o+0],p=a[o+1],g=a[o+2],v=a[o+3];if(l===0){e[n+0]=c,e[n+1]=u,e[n+2]=h,e[n+3]=d;return}if(l===1){e[n+0]=f,e[n+1]=p,e[n+2]=g,e[n+3]=v;return}if(d!==v||c!==f||u!==p||h!==g){let x=1-l;const _=c*f+u*p+h*g+d*v,E=_>=0?1:-1,S=1-_*_;if(S>Number.EPSILON){const M=Math.sqrt(S),C=Math.atan2(M,_*E);x=Math.sin(x*C)/M,l=Math.sin(l*C)/M}const T=l*E;if(c=c*x+f*T,u=u*x+p*T,h=h*x+g*T,d=d*x+v*T,x===1-l){const M=1/Math.sqrt(c*c+u*u+h*h+d*d);c*=M,u*=M,h*=M,d*=M}}e[n]=c,e[n+1]=u,e[n+2]=h,e[n+3]=d}static multiplyQuaternionsFlat(e,n,i,s,a,o){const l=i[s],c=i[s+1],u=i[s+2],h=i[s+3],d=a[o],f=a[o+1],p=a[o+2],g=a[o+3];return e[n]=l*g+h*d+c*p-u*f,e[n+1]=c*g+h*f+u*d-l*p,e[n+2]=u*g+h*p+l*f-c*d,e[n+3]=h*g-l*d-c*f-u*p,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,n,i,s){return this._x=e,this._y=n,this._z=i,this._w=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,n=!0){const i=e._x,s=e._y,a=e._z,o=e._order,l=Math.cos,c=Math.sin,u=l(i/2),h=l(s/2),d=l(a/2),f=c(i/2),p=c(s/2),g=c(a/2);switch(o){case"XYZ":this._x=f*h*d+u*p*g,this._y=u*p*d-f*h*g,this._z=u*h*g+f*p*d,this._w=u*h*d-f*p*g;break;case"YXZ":this._x=f*h*d+u*p*g,this._y=u*p*d-f*h*g,this._z=u*h*g-f*p*d,this._w=u*h*d+f*p*g;break;case"ZXY":this._x=f*h*d-u*p*g,this._y=u*p*d+f*h*g,this._z=u*h*g+f*p*d,this._w=u*h*d-f*p*g;break;case"ZYX":this._x=f*h*d-u*p*g,this._y=u*p*d+f*h*g,this._z=u*h*g-f*p*d,this._w=u*h*d+f*p*g;break;case"YZX":this._x=f*h*d+u*p*g,this._y=u*p*d+f*h*g,this._z=u*h*g-f*p*d,this._w=u*h*d-f*p*g;break;case"XZY":this._x=f*h*d-u*p*g,this._y=u*p*d-f*h*g,this._z=u*h*g+f*p*d,this._w=u*h*d+f*p*g;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return n===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,n){const i=n/2,s=Math.sin(i);return this._x=e.x*s,this._y=e.y*s,this._z=e.z*s,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const n=e.elements,i=n[0],s=n[4],a=n[8],o=n[1],l=n[5],c=n[9],u=n[2],h=n[6],d=n[10],f=i+l+d;if(f>0){const p=.5/Math.sqrt(f+1);this._w=.25/p,this._x=(h-c)*p,this._y=(a-u)*p,this._z=(o-s)*p}else if(i>l&&i>d){const p=2*Math.sqrt(1+i-l-d);this._w=(h-c)/p,this._x=.25*p,this._y=(s+o)/p,this._z=(a+u)/p}else if(l>d){const p=2*Math.sqrt(1+l-i-d);this._w=(a-u)/p,this._x=(s+o)/p,this._y=.25*p,this._z=(c+h)/p}else{const p=2*Math.sqrt(1+d-i-l);this._w=(o-s)/p,this._x=(a+u)/p,this._y=(c+h)/p,this._z=.25*p}return this._onChangeCallback(),this}setFromUnitVectors(e,n){let i=e.dot(n)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*n.z-e.z*n.y,this._y=e.z*n.x-e.x*n.z,this._z=e.x*n.y-e.y*n.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Gs(this.dot(e),-1,1)))}rotateTowards(e,n){const i=this.angleTo(e);if(i===0)return this;const s=Math.min(1,n/i);return this.slerp(e,s),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,n){const i=e._x,s=e._y,a=e._z,o=e._w,l=n._x,c=n._y,u=n._z,h=n._w;return this._x=i*h+o*l+s*u-a*c,this._y=s*h+o*c+a*l-i*u,this._z=a*h+o*u+i*c-s*l,this._w=o*h-i*l-s*c-a*u,this._onChangeCallback(),this}slerp(e,n){if(n===0)return this;if(n===1)return this.copy(e);const i=this._x,s=this._y,a=this._z,o=this._w;let l=o*e._w+i*e._x+s*e._y+a*e._z;if(l<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,l=-l):this.copy(e),l>=1)return this._w=o,this._x=i,this._y=s,this._z=a,this;const c=1-l*l;if(c<=Number.EPSILON){const p=1-n;return this._w=p*o+n*this._w,this._x=p*i+n*this._x,this._y=p*s+n*this._y,this._z=p*a+n*this._z,this.normalize(),this}const u=Math.sqrt(c),h=Math.atan2(u,l),d=Math.sin((1-n)*h)/u,f=Math.sin(n*h)/u;return this._w=o*d+this._w*f,this._x=i*d+this._x*f,this._y=s*d+this._y*f,this._z=a*d+this._z*f,this._onChangeCallback(),this}slerpQuaternions(e,n,i){return this.copy(e).slerp(n,i)}random(){const e=2*Math.PI*Math.random(),n=2*Math.PI*Math.random(),i=Math.random(),s=Math.sqrt(1-i),a=Math.sqrt(i);return this.set(s*Math.sin(e),s*Math.cos(e),a*Math.sin(n),a*Math.cos(n))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,n=0){return this._x=e[n],this._y=e[n+1],this._z=e[n+2],this._w=e[n+3],this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._w,e}fromBufferAttribute(e,n){return this._x=e.getX(n),this._y=e.getY(n),this._z=e.getZ(n),this._w=e.getW(n),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}},Oe=class fJ{constructor(e=0,n=0,i=0){fJ.prototype.isVector3=!0,this.x=e,this.y=n,this.z=i}set(e,n,i){return i===void 0&&(i=this.z),this.x=e,this.y=n,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,n){return this.x=e.x*n.x,this.y=e.y*n.y,this.z=e.z*n.z,this}applyEuler(e){return this.applyQuaternion(a6.setFromEuler(e))}applyAxisAngle(e,n){return this.applyQuaternion(a6.setFromAxisAngle(e,n))}applyMatrix3(e){const n=this.x,i=this.y,s=this.z,a=e.elements;return this.x=a[0]*n+a[3]*i+a[6]*s,this.y=a[1]*n+a[4]*i+a[7]*s,this.z=a[2]*n+a[5]*i+a[8]*s,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const n=this.x,i=this.y,s=this.z,a=e.elements,o=1/(a[3]*n+a[7]*i+a[11]*s+a[15]);return this.x=(a[0]*n+a[4]*i+a[8]*s+a[12])*o,this.y=(a[1]*n+a[5]*i+a[9]*s+a[13])*o,this.z=(a[2]*n+a[6]*i+a[10]*s+a[14])*o,this}applyQuaternion(e){const n=this.x,i=this.y,s=this.z,a=e.x,o=e.y,l=e.z,c=e.w,u=2*(o*s-l*i),h=2*(l*n-a*s),d=2*(a*i-o*n);return this.x=n+c*u+o*d-l*h,this.y=i+c*h+l*u-a*d,this.z=s+c*d+a*h-o*u,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const n=this.x,i=this.y,s=this.z,a=e.elements;return this.x=a[0]*n+a[4]*i+a[8]*s,this.y=a[1]*n+a[5]*i+a[9]*s,this.z=a[2]*n+a[6]*i+a[10]*s,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this.z=Math.max(e.z,Math.min(n.z,this.z)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this.z=Math.max(e,Math.min(n,this.z)),this}clampLength(e,n){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(n,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this}lerpVectors(e,n,i){return this.x=e.x+(n.x-e.x)*i,this.y=e.y+(n.y-e.y)*i,this.z=e.z+(n.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,n){const i=e.x,s=e.y,a=e.z,o=n.x,l=n.y,c=n.z;return this.x=s*c-a*l,this.y=a*o-i*c,this.z=i*l-s*o,this}projectOnVector(e){const n=e.lengthSq();if(n===0)return this.set(0,0,0);const i=e.dot(this)/n;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return z2.copy(this).projectOnVector(e),this.sub(z2)}reflect(e){return this.sub(z2.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const i=this.dot(e)/n;return Math.acos(Gs(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,i=this.y-e.y,s=this.z-e.z;return n*n+i*i+s*s}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,n,i){const s=Math.sin(n)*e;return this.x=s*Math.sin(i),this.y=Math.cos(n)*e,this.z=s*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,n,i){return this.x=e*Math.sin(n),this.y=i,this.z=e*Math.cos(n),this}setFromMatrixPosition(e){const n=e.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this}setFromMatrixScale(e){const n=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),s=this.setFromMatrixColumn(e,2).length();return this.x=n,this.y=i,this.z=s,this}setFromMatrixColumn(e,n){return this.fromArray(e.elements,n*4)}setFromMatrix3Column(e,n){return this.fromArray(e.elements,n*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,n=Math.random()*2-1,i=Math.sqrt(1-n*n);return this.x=i*Math.cos(e),this.y=n,this.z=i*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}};const z2=new Oe,a6=new Sa;let Jy=class{constructor(e=new Oe(1/0,1/0,1/0),n=new Oe(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromArray(e){this.makeEmpty();for(let n=0,i=e.length;n<i;n+=3)this.expandByPoint(Pl.fromArray(e,n));return this}setFromBufferAttribute(e){this.makeEmpty();for(let n=0,i=e.count;n<i;n++)this.expandByPoint(Pl.fromBufferAttribute(e,n));return this}setFromPoints(e){this.makeEmpty();for(let n=0,i=e.length;n<i;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const i=Pl.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,n=!1){return this.makeEmpty(),this.expandByObject(e,n)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,n=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(i!==void 0){const a=i.getAttribute("position");if(n===!0&&a!==void 0&&e.isInstancedMesh!==!0)for(let o=0,l=a.count;o<l;o++)e.isMesh===!0?e.getVertexPosition(o,Pl):Pl.fromBufferAttribute(a,o),Pl.applyMatrix4(e.matrixWorld),this.expandByPoint(Pl);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),Ww.copy(e.boundingBox)):(i.boundingBox===null&&i.computeBoundingBox(),Ww.copy(i.boundingBox)),Ww.applyMatrix4(e.matrixWorld),this.union(Ww)}const s=e.children;for(let a=0,o=s.length;a<o;a++)this.expandByObject(s[a],n);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Pl),Pl.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let n,i;return e.normal.x>0?(n=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(n=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(n+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(n+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(n+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(n+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),n<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(J0),qw.subVectors(this.max,J0),xm.subVectors(e.a,J0),bm.subVectors(e.b,J0),_m.subVectors(e.c,J0),qh.subVectors(bm,xm),Xh.subVectors(_m,bm),Ef.subVectors(xm,_m);let n=[0,-qh.z,qh.y,0,-Xh.z,Xh.y,0,-Ef.z,Ef.y,qh.z,0,-qh.x,Xh.z,0,-Xh.x,Ef.z,0,-Ef.x,-qh.y,qh.x,0,-Xh.y,Xh.x,0,-Ef.y,Ef.x,0];return!$2(n,xm,bm,_m,qw)||(n=[1,0,0,0,1,0,0,0,1],!$2(n,xm,bm,_m,qw))?!1:(Xw.crossVectors(qh,Xh),n=[Xw.x,Xw.y,Xw.z],$2(n,xm,bm,_m,qw))}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Pl).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Pl).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(xu[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),xu[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),xu[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),xu[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),xu[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),xu[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),xu[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),xu[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(xu),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}};const xu=[new Oe,new Oe,new Oe,new Oe,new Oe,new Oe,new Oe,new Oe],Pl=new Oe,Ww=new Jy,xm=new Oe,bm=new Oe,_m=new Oe,qh=new Oe,Xh=new Oe,Ef=new Oe,J0=new Oe,qw=new Oe,Xw=new Oe,Mf=new Oe;function $2(r,e,n,i,s){for(let a=0,o=r.length-3;a<=o;a+=3){Mf.fromArray(r,a);const l=s.x*Math.abs(Mf.x)+s.y*Math.abs(Mf.y)+s.z*Math.abs(Mf.z),c=e.dot(Mf),u=n.dot(Mf),h=i.dot(Mf);if(Math.max(-Math.max(c,u,h),Math.min(c,u,h))>l)return!1}return!0}const xfe=new Jy,ev=new Oe,G2=new Oe;let e0=class{constructor(e=new Oe,n=-1){this.isSphere=!0,this.center=e,this.radius=n}set(e,n){return this.center.copy(e),this.radius=n,this}setFromPoints(e,n){const i=this.center;n!==void 0?i.copy(n):xfe.setFromPoints(e).getCenter(i);let s=0;for(let a=0,o=e.length;a<o;a++)s=Math.max(s,i.distanceToSquared(e[a]));return this.radius=Math.sqrt(s),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const n=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=n*n}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,n){const i=this.center.distanceToSquared(e);return n.copy(e),i>this.radius*this.radius&&(n.sub(this.center).normalize(),n.multiplyScalar(this.radius).add(this.center)),n}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;ev.subVectors(e,this.center);const n=ev.lengthSq();if(n>this.radius*this.radius){const i=Math.sqrt(n),s=(i-this.radius)*.5;this.center.addScaledVector(ev,s/i),this.radius+=s}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(G2.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(ev.copy(e.center).add(G2)),this.expandByPoint(ev.copy(e.center).sub(G2))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}};const bu=new Oe,V2=new Oe,Kw=new Oe,Kh=new Oe,H2=new Oe,Yw=new Oe,W2=new Oe;let YB=class{constructor(e=new Oe,n=new Oe(0,0,-1)){this.origin=e,this.direction=n}set(e,n){return this.origin.copy(e),this.direction.copy(n),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,n){return n.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,bu)),this}closestPointToPoint(e,n){n.subVectors(e,this.origin);const i=n.dot(this.direction);return i<0?n.copy(this.origin):n.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const n=bu.subVectors(e,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(e):(bu.copy(this.origin).addScaledVector(this.direction,n),bu.distanceToSquared(e))}distanceSqToSegment(e,n,i,s){V2.copy(e).add(n).multiplyScalar(.5),Kw.copy(n).sub(e).normalize(),Kh.copy(this.origin).sub(V2);const a=e.distanceTo(n)*.5,o=-this.direction.dot(Kw),l=Kh.dot(this.direction),c=-Kh.dot(Kw),u=Kh.lengthSq(),h=Math.abs(1-o*o);let d,f,p,g;if(h>0)if(d=o*c-l,f=o*l-c,g=a*h,d>=0)if(f>=-g)if(f<=g){const v=1/h;d*=v,f*=v,p=d*(d+o*f+2*l)+f*(o*d+f+2*c)+u}else f=a,d=Math.max(0,-(o*f+l)),p=-d*d+f*(f+2*c)+u;else f=-a,d=Math.max(0,-(o*f+l)),p=-d*d+f*(f+2*c)+u;else f<=-g?(d=Math.max(0,-(-o*a+l)),f=d>0?-a:Math.min(Math.max(-a,-c),a),p=-d*d+f*(f+2*c)+u):f<=g?(d=0,f=Math.min(Math.max(-a,-c),a),p=f*(f+2*c)+u):(d=Math.max(0,-(o*a+l)),f=d>0?a:Math.min(Math.max(-a,-c),a),p=-d*d+f*(f+2*c)+u);else f=o>0?-a:a,d=Math.max(0,-(o*f+l)),p=-d*d+f*(f+2*c)+u;return i&&i.copy(this.origin).addScaledVector(this.direction,d),s&&s.copy(V2).addScaledVector(Kw,f),p}intersectSphere(e,n){bu.subVectors(e.center,this.origin);const i=bu.dot(this.direction),s=bu.dot(bu)-i*i,a=e.radius*e.radius;if(s>a)return null;const o=Math.sqrt(a-s),l=i-o,c=i+o;return c<0?null:l<0?this.at(c,n):this.at(l,n)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const n=e.normal.dot(this.direction);if(n===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/n;return i>=0?i:null}intersectPlane(e,n){const i=this.distanceToPlane(e);return i===null?null:this.at(i,n)}intersectsPlane(e){const n=e.distanceToPoint(this.origin);return n===0||e.normal.dot(this.direction)*n<0}intersectBox(e,n){let i,s,a,o,l,c;const u=1/this.direction.x,h=1/this.direction.y,d=1/this.direction.z,f=this.origin;return u>=0?(i=(e.min.x-f.x)*u,s=(e.max.x-f.x)*u):(i=(e.max.x-f.x)*u,s=(e.min.x-f.x)*u),h>=0?(a=(e.min.y-f.y)*h,o=(e.max.y-f.y)*h):(a=(e.max.y-f.y)*h,o=(e.min.y-f.y)*h),i>o||a>s||((a>i||isNaN(i))&&(i=a),(o<s||isNaN(s))&&(s=o),d>=0?(l=(e.min.z-f.z)*d,c=(e.max.z-f.z)*d):(l=(e.max.z-f.z)*d,c=(e.min.z-f.z)*d),i>c||l>s)||((l>i||i!==i)&&(i=l),(c<s||s!==s)&&(s=c),s<0)?null:this.at(i>=0?i:s,n)}intersectsBox(e){return this.intersectBox(e,bu)!==null}intersectTriangle(e,n,i,s,a){H2.subVectors(n,e),Yw.subVectors(i,e),W2.crossVectors(H2,Yw);let o=this.direction.dot(W2),l;if(o>0){if(s)return null;l=1}else if(o<0)l=-1,o=-o;else return null;Kh.subVectors(this.origin,e);const c=l*this.direction.dot(Yw.crossVectors(Kh,Yw));if(c<0)return null;const u=l*this.direction.dot(H2.cross(Kh));if(u<0||c+u>o)return null;const h=-l*Kh.dot(W2);return h<0?null:this.at(h/o,a)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}},mn=class qL{constructor(e,n,i,s,a,o,l,c,u,h,d,f,p,g,v,x){qL.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,n,i,s,a,o,l,c,u,h,d,f,p,g,v,x)}set(e,n,i,s,a,o,l,c,u,h,d,f,p,g,v,x){const _=this.elements;return _[0]=e,_[4]=n,_[8]=i,_[12]=s,_[1]=a,_[5]=o,_[9]=l,_[13]=c,_[2]=u,_[6]=h,_[10]=d,_[14]=f,_[3]=p,_[7]=g,_[11]=v,_[15]=x,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new qL().fromArray(this.elements)}copy(e){const n=this.elements,i=e.elements;return n[0]=i[0],n[1]=i[1],n[2]=i[2],n[3]=i[3],n[4]=i[4],n[5]=i[5],n[6]=i[6],n[7]=i[7],n[8]=i[8],n[9]=i[9],n[10]=i[10],n[11]=i[11],n[12]=i[12],n[13]=i[13],n[14]=i[14],n[15]=i[15],this}copyPosition(e){const n=this.elements,i=e.elements;return n[12]=i[12],n[13]=i[13],n[14]=i[14],this}setFromMatrix3(e){const n=e.elements;return this.set(n[0],n[3],n[6],0,n[1],n[4],n[7],0,n[2],n[5],n[8],0,0,0,0,1),this}extractBasis(e,n,i){return e.setFromMatrixColumn(this,0),n.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,n,i){return this.set(e.x,n.x,i.x,0,e.y,n.y,i.y,0,e.z,n.z,i.z,0,0,0,0,1),this}extractRotation(e){const n=this.elements,i=e.elements,s=1/wm.setFromMatrixColumn(e,0).length(),a=1/wm.setFromMatrixColumn(e,1).length(),o=1/wm.setFromMatrixColumn(e,2).length();return n[0]=i[0]*s,n[1]=i[1]*s,n[2]=i[2]*s,n[3]=0,n[4]=i[4]*a,n[5]=i[5]*a,n[6]=i[6]*a,n[7]=0,n[8]=i[8]*o,n[9]=i[9]*o,n[10]=i[10]*o,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromEuler(e){const n=this.elements,i=e.x,s=e.y,a=e.z,o=Math.cos(i),l=Math.sin(i),c=Math.cos(s),u=Math.sin(s),h=Math.cos(a),d=Math.sin(a);if(e.order==="XYZ"){const f=o*h,p=o*d,g=l*h,v=l*d;n[0]=c*h,n[4]=-c*d,n[8]=u,n[1]=p+g*u,n[5]=f-v*u,n[9]=-l*c,n[2]=v-f*u,n[6]=g+p*u,n[10]=o*c}else if(e.order==="YXZ"){const f=c*h,p=c*d,g=u*h,v=u*d;n[0]=f+v*l,n[4]=g*l-p,n[8]=o*u,n[1]=o*d,n[5]=o*h,n[9]=-l,n[2]=p*l-g,n[6]=v+f*l,n[10]=o*c}else if(e.order==="ZXY"){const f=c*h,p=c*d,g=u*h,v=u*d;n[0]=f-v*l,n[4]=-o*d,n[8]=g+p*l,n[1]=p+g*l,n[5]=o*h,n[9]=v-f*l,n[2]=-o*u,n[6]=l,n[10]=o*c}else if(e.order==="ZYX"){const f=o*h,p=o*d,g=l*h,v=l*d;n[0]=c*h,n[4]=g*u-p,n[8]=f*u+v,n[1]=c*d,n[5]=v*u+f,n[9]=p*u-g,n[2]=-u,n[6]=l*c,n[10]=o*c}else if(e.order==="YZX"){const f=o*c,p=o*u,g=l*c,v=l*u;n[0]=c*h,n[4]=v-f*d,n[8]=g*d+p,n[1]=d,n[5]=o*h,n[9]=-l*h,n[2]=-u*h,n[6]=p*d+g,n[10]=f-v*d}else if(e.order==="XZY"){const f=o*c,p=o*u,g=l*c,v=l*u;n[0]=c*h,n[4]=-d,n[8]=u*h,n[1]=f*d+v,n[5]=o*h,n[9]=p*d-g,n[2]=g*d-p,n[6]=l*h,n[10]=v*d+f}return n[3]=0,n[7]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromQuaternion(e){return this.compose(bfe,e,_fe)}lookAt(e,n,i){const s=this.elements;return go.subVectors(e,n),go.lengthSq()===0&&(go.z=1),go.normalize(),Yh.crossVectors(i,go),Yh.lengthSq()===0&&(Math.abs(i.z)===1?go.x+=1e-4:go.z+=1e-4,go.normalize(),Yh.crossVectors(i,go)),Yh.normalize(),Zw.crossVectors(go,Yh),s[0]=Yh.x,s[4]=Zw.x,s[8]=go.x,s[1]=Yh.y,s[5]=Zw.y,s[9]=go.y,s[2]=Yh.z,s[6]=Zw.z,s[10]=go.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const i=e.elements,s=n.elements,a=this.elements,o=i[0],l=i[4],c=i[8],u=i[12],h=i[1],d=i[5],f=i[9],p=i[13],g=i[2],v=i[6],x=i[10],_=i[14],E=i[3],S=i[7],T=i[11],M=i[15],C=s[0],A=s[4],P=s[8],R=s[12],O=s[1],D=s[5],F=s[9],U=s[13],B=s[2],W=s[6],j=s[10],$=s[14],z=s[3],Z=s[7],se=s[11],q=s[15];return a[0]=o*C+l*O+c*B+u*z,a[4]=o*A+l*D+c*W+u*Z,a[8]=o*P+l*F+c*j+u*se,a[12]=o*R+l*U+c*$+u*q,a[1]=h*C+d*O+f*B+p*z,a[5]=h*A+d*D+f*W+p*Z,a[9]=h*P+d*F+f*j+p*se,a[13]=h*R+d*U+f*$+p*q,a[2]=g*C+v*O+x*B+_*z,a[6]=g*A+v*D+x*W+_*Z,a[10]=g*P+v*F+x*j+_*se,a[14]=g*R+v*U+x*$+_*q,a[3]=E*C+S*O+T*B+M*z,a[7]=E*A+S*D+T*W+M*Z,a[11]=E*P+S*F+T*j+M*se,a[15]=E*R+S*U+T*$+M*q,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[4]*=e,n[8]*=e,n[12]*=e,n[1]*=e,n[5]*=e,n[9]*=e,n[13]*=e,n[2]*=e,n[6]*=e,n[10]*=e,n[14]*=e,n[3]*=e,n[7]*=e,n[11]*=e,n[15]*=e,this}determinant(){const e=this.elements,n=e[0],i=e[4],s=e[8],a=e[12],o=e[1],l=e[5],c=e[9],u=e[13],h=e[2],d=e[6],f=e[10],p=e[14],g=e[3],v=e[7],x=e[11],_=e[15];return g*(+a*c*d-s*u*d-a*l*f+i*u*f+s*l*p-i*c*p)+v*(+n*c*p-n*u*f+a*o*f-s*o*p+s*u*h-a*c*h)+x*(+n*u*d-n*l*p-a*o*d+i*o*p+a*l*h-i*u*h)+_*(-s*l*h-n*c*d+n*l*f+s*o*d-i*o*f+i*c*h)}transpose(){const e=this.elements;let n;return n=e[1],e[1]=e[4],e[4]=n,n=e[2],e[2]=e[8],e[8]=n,n=e[6],e[6]=e[9],e[9]=n,n=e[3],e[3]=e[12],e[12]=n,n=e[7],e[7]=e[13],e[13]=n,n=e[11],e[11]=e[14],e[14]=n,this}setPosition(e,n,i){const s=this.elements;return e.isVector3?(s[12]=e.x,s[13]=e.y,s[14]=e.z):(s[12]=e,s[13]=n,s[14]=i),this}invert(){const e=this.elements,n=e[0],i=e[1],s=e[2],a=e[3],o=e[4],l=e[5],c=e[6],u=e[7],h=e[8],d=e[9],f=e[10],p=e[11],g=e[12],v=e[13],x=e[14],_=e[15],E=d*x*u-v*f*u+v*c*p-l*x*p-d*c*_+l*f*_,S=g*f*u-h*x*u-g*c*p+o*x*p+h*c*_-o*f*_,T=h*v*u-g*d*u+g*l*p-o*v*p-h*l*_+o*d*_,M=g*d*c-h*v*c-g*l*f+o*v*f+h*l*x-o*d*x,C=n*E+i*S+s*T+a*M;if(C===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const A=1/C;return e[0]=E*A,e[1]=(v*f*a-d*x*a-v*s*p+i*x*p+d*s*_-i*f*_)*A,e[2]=(l*x*a-v*c*a+v*s*u-i*x*u-l*s*_+i*c*_)*A,e[3]=(d*c*a-l*f*a-d*s*u+i*f*u+l*s*p-i*c*p)*A,e[4]=S*A,e[5]=(h*x*a-g*f*a+g*s*p-n*x*p-h*s*_+n*f*_)*A,e[6]=(g*c*a-o*x*a-g*s*u+n*x*u+o*s*_-n*c*_)*A,e[7]=(o*f*a-h*c*a+h*s*u-n*f*u-o*s*p+n*c*p)*A,e[8]=T*A,e[9]=(g*d*a-h*v*a-g*i*p+n*v*p+h*i*_-n*d*_)*A,e[10]=(o*v*a-g*l*a+g*i*u-n*v*u-o*i*_+n*l*_)*A,e[11]=(h*l*a-o*d*a-h*i*u+n*d*u+o*i*p-n*l*p)*A,e[12]=M*A,e[13]=(h*v*s-g*d*s+g*i*f-n*v*f-h*i*x+n*d*x)*A,e[14]=(g*l*s-o*v*s-g*i*c+n*v*c+o*i*x-n*l*x)*A,e[15]=(o*d*s-h*l*s+h*i*c-n*d*c-o*i*f+n*l*f)*A,this}scale(e){const n=this.elements,i=e.x,s=e.y,a=e.z;return n[0]*=i,n[4]*=s,n[8]*=a,n[1]*=i,n[5]*=s,n[9]*=a,n[2]*=i,n[6]*=s,n[10]*=a,n[3]*=i,n[7]*=s,n[11]*=a,this}getMaxScaleOnAxis(){const e=this.elements,n=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],s=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(n,i,s))}makeTranslation(e,n,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,n,0,0,1,i,0,0,0,1),this}makeRotationX(e){const n=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,n,-i,0,0,i,n,0,0,0,0,1),this}makeRotationY(e){const n=Math.cos(e),i=Math.sin(e);return this.set(n,0,i,0,0,1,0,0,-i,0,n,0,0,0,0,1),this}makeRotationZ(e){const n=Math.cos(e),i=Math.sin(e);return this.set(n,-i,0,0,i,n,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,n){const i=Math.cos(n),s=Math.sin(n),a=1-i,o=e.x,l=e.y,c=e.z,u=a*o,h=a*l;return this.set(u*o+i,u*l-s*c,u*c+s*l,0,u*l+s*c,h*l+i,h*c-s*o,0,u*c-s*l,h*c+s*o,a*c*c+i,0,0,0,0,1),this}makeScale(e,n,i){return this.set(e,0,0,0,0,n,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,n,i,s,a,o){return this.set(1,i,a,0,e,1,o,0,n,s,1,0,0,0,0,1),this}compose(e,n,i){const s=this.elements,a=n._x,o=n._y,l=n._z,c=n._w,u=a+a,h=o+o,d=l+l,f=a*u,p=a*h,g=a*d,v=o*h,x=o*d,_=l*d,E=c*u,S=c*h,T=c*d,M=i.x,C=i.y,A=i.z;return s[0]=(1-(v+_))*M,s[1]=(p+T)*M,s[2]=(g-S)*M,s[3]=0,s[4]=(p-T)*C,s[5]=(1-(f+_))*C,s[6]=(x+E)*C,s[7]=0,s[8]=(g+S)*A,s[9]=(x-E)*A,s[10]=(1-(f+v))*A,s[11]=0,s[12]=e.x,s[13]=e.y,s[14]=e.z,s[15]=1,this}decompose(e,n,i){const s=this.elements;let a=wm.set(s[0],s[1],s[2]).length();const o=wm.set(s[4],s[5],s[6]).length(),l=wm.set(s[8],s[9],s[10]).length();this.determinant()<0&&(a=-a),e.x=s[12],e.y=s[13],e.z=s[14],Rl.copy(this);const u=1/a,h=1/o,d=1/l;return Rl.elements[0]*=u,Rl.elements[1]*=u,Rl.elements[2]*=u,Rl.elements[4]*=h,Rl.elements[5]*=h,Rl.elements[6]*=h,Rl.elements[8]*=d,Rl.elements[9]*=d,Rl.elements[10]*=d,n.setFromRotationMatrix(Rl),i.x=a,i.y=o,i.z=l,this}makePerspective(e,n,i,s,a,o,l=rp){const c=this.elements,u=2*a/(n-e),h=2*a/(i-s),d=(n+e)/(n-e),f=(i+s)/(i-s);let p,g;if(l===rp)p=-(o+a)/(o-a),g=-2*o*a/(o-a);else if(l===HL)p=-o/(o-a),g=-o*a/(o-a);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+l);return c[0]=u,c[4]=0,c[8]=d,c[12]=0,c[1]=0,c[5]=h,c[9]=f,c[13]=0,c[2]=0,c[6]=0,c[10]=p,c[14]=g,c[3]=0,c[7]=0,c[11]=-1,c[15]=0,this}makeOrthographic(e,n,i,s,a,o,l=rp){const c=this.elements,u=1/(n-e),h=1/(i-s),d=1/(o-a),f=(n+e)*u,p=(i+s)*h;let g,v;if(l===rp)g=(o+a)*d,v=-2*d;else if(l===HL)g=a*d,v=-1*d;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+l);return c[0]=2*u,c[4]=0,c[8]=0,c[12]=-f,c[1]=0,c[5]=2*h,c[9]=0,c[13]=-p,c[2]=0,c[6]=0,c[10]=v,c[14]=-g,c[3]=0,c[7]=0,c[11]=0,c[15]=1,this}equals(e){const n=this.elements,i=e.elements;for(let s=0;s<16;s++)if(n[s]!==i[s])return!1;return!0}fromArray(e,n=0){for(let i=0;i<16;i++)this.elements[i]=e[i+n];return this}toArray(e=[],n=0){const i=this.elements;return e[n]=i[0],e[n+1]=i[1],e[n+2]=i[2],e[n+3]=i[3],e[n+4]=i[4],e[n+5]=i[5],e[n+6]=i[6],e[n+7]=i[7],e[n+8]=i[8],e[n+9]=i[9],e[n+10]=i[10],e[n+11]=i[11],e[n+12]=i[12],e[n+13]=i[13],e[n+14]=i[14],e[n+15]=i[15],e}};const wm=new Oe,Rl=new mn,bfe=new Oe(0,0,0),_fe=new Oe(1,1,1),Yh=new Oe,Zw=new Oe,go=new Oe,o6=new mn,l6=new Sa;let Vs=class pJ{constructor(e=0,n=0,i=0,s=pJ.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=n,this._z=i,this._order=s}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,n,i,s=this._order){return this._x=e,this._y=n,this._z=i,this._order=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,n=this._order,i=!0){const s=e.elements,a=s[0],o=s[4],l=s[8],c=s[1],u=s[5],h=s[9],d=s[2],f=s[6],p=s[10];switch(n){case"XYZ":this._y=Math.asin(Gs(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-h,p),this._z=Math.atan2(-o,a)):(this._x=Math.atan2(f,u),this._z=0);break;case"YXZ":this._x=Math.asin(-Gs(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(l,p),this._z=Math.atan2(c,u)):(this._y=Math.atan2(-d,a),this._z=0);break;case"ZXY":this._x=Math.asin(Gs(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(-d,p),this._z=Math.atan2(-o,u)):(this._y=0,this._z=Math.atan2(c,a));break;case"ZYX":this._y=Math.asin(-Gs(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(f,p),this._z=Math.atan2(c,a)):(this._x=0,this._z=Math.atan2(-o,u));break;case"YZX":this._z=Math.asin(Gs(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-h,u),this._y=Math.atan2(-d,a)):(this._x=0,this._y=Math.atan2(l,p));break;case"XZY":this._z=Math.asin(-Gs(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(f,u),this._y=Math.atan2(l,a)):(this._x=Math.atan2(-h,p),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+n)}return this._order=n,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,n,i){return o6.makeRotationFromQuaternion(e),this.setFromRotationMatrix(o6,n,i)}setFromVector3(e,n=this._order){return this.set(e.x,e.y,e.z,n)}reorder(e){return l6.setFromEuler(this),this.setFromQuaternion(l6,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}};Vs.DEFAULT_ORDER="XYZ";let wfe=class{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}},Sfe=0;const c6=new Oe,Sm=new Sa,_u=new mn,Qw=new Oe,tv=new Oe,Tfe=new Oe,Efe=new Sa,u6=new Oe(1,0,0),h6=new Oe(0,1,0),d6=new Oe(0,0,1),f6={type:"added"},Mfe={type:"removed"},Tm={type:"childadded",child:null},q2={type:"childremoved",child:null};let Os=class iT extends pM{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Sfe++}),this.uuid=Gd(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=iT.DEFAULT_UP.clone();const e=new Oe,n=new Vs,i=new Sa,s=new Oe(1,1,1);function a(){i.setFromEuler(n,!1)}function o(){n.setFromQuaternion(i,void 0,!1)}n._onChange(a),i._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:n},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:s},modelViewMatrix:{value:new mn},normalMatrix:{value:new Vd}}),this.matrix=new mn,this.matrixWorld=new mn,this.matrixAutoUpdate=iT.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=iT.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new wfe,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,n){this.quaternion.setFromAxisAngle(e,n)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,n){return Sm.setFromAxisAngle(e,n),this.quaternion.multiply(Sm),this}rotateOnWorldAxis(e,n){return Sm.setFromAxisAngle(e,n),this.quaternion.premultiply(Sm),this}rotateX(e){return this.rotateOnAxis(u6,e)}rotateY(e){return this.rotateOnAxis(h6,e)}rotateZ(e){return this.rotateOnAxis(d6,e)}translateOnAxis(e,n){return c6.copy(e).applyQuaternion(this.quaternion),this.position.add(c6.multiplyScalar(n)),this}translateX(e){return this.translateOnAxis(u6,e)}translateY(e){return this.translateOnAxis(h6,e)}translateZ(e){return this.translateOnAxis(d6,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(_u.copy(this.matrixWorld).invert())}lookAt(e,n,i){e.isVector3?Qw.copy(e):Qw.set(e,n,i);const s=this.parent;this.updateWorldMatrix(!0,!1),tv.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?_u.lookAt(tv,Qw,this.up):_u.lookAt(Qw,tv,this.up),this.quaternion.setFromRotationMatrix(_u),s&&(_u.extractRotation(s.matrixWorld),Sm.setFromRotationMatrix(_u),this.quaternion.premultiply(Sm.invert()))}add(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.add(arguments[n]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(f6),Tm.child=e,this.dispatchEvent(Tm),Tm.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const n=this.children.indexOf(e);return n!==-1&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent(Mfe),q2.child=e,this.dispatchEvent(q2),q2.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),_u.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),_u.multiply(e.parent.matrixWorld)),e.applyMatrix4(_u),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(f6),Tm.child=e,this.dispatchEvent(Tm),Tm.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,n){if(this[e]===n)return this;for(let i=0,s=this.children.length;i<s;i++){const o=this.children[i].getObjectByProperty(e,n);if(o!==void 0)return o}}getObjectsByProperty(e,n,i=[]){this[e]===n&&i.push(this);const s=this.children;for(let a=0,o=s.length;a<o;a++)s[a].getObjectsByProperty(e,n,i);return i}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(tv,e,Tfe),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(tv,Efe,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const n=this.matrixWorld.elements;return e.set(n[8],n[9],n[10]).normalize()}raycast(){}traverse(e){e(this);const n=this.children;for(let i=0,s=n.length;i<s;i++)n[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const n=this.children;for(let i=0,s=n.length;i<s;i++)n[i].traverseVisible(e)}traverseAncestors(e){const n=this.parent;n!==null&&(e(n),n.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const n=this.children;for(let i=0,s=n.length;i<s;i++){const a=n[i];(a.matrixWorldAutoUpdate===!0||e===!0)&&a.updateMatrixWorld(e)}}updateWorldMatrix(e,n){const i=this.parent;if(e===!0&&i!==null&&i.matrixWorldAutoUpdate===!0&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),n===!0){const s=this.children;for(let a=0,o=s.length;a<o;a++){const l=s[a];l.matrixWorldAutoUpdate===!0&&l.updateWorldMatrix(!1,!0)}}}toJSON(e){const n=e===void 0||typeof e=="string",i={};n&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const s={};s.uuid=this.uuid,s.type=this.type,this.name!==""&&(s.name=this.name),this.castShadow===!0&&(s.castShadow=!0),this.receiveShadow===!0&&(s.receiveShadow=!0),this.visible===!1&&(s.visible=!1),this.frustumCulled===!1&&(s.frustumCulled=!1),this.renderOrder!==0&&(s.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(s.userData=this.userData),s.layers=this.layers.mask,s.matrix=this.matrix.toArray(),s.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(s.matrixAutoUpdate=!1),this.isInstancedMesh&&(s.type="InstancedMesh",s.count=this.count,s.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(s.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(s.type="BatchedMesh",s.perObjectFrustumCulled=this.perObjectFrustumCulled,s.sortObjects=this.sortObjects,s.drawRanges=this._drawRanges,s.reservedRanges=this._reservedRanges,s.visibility=this._visibility,s.active=this._active,s.bounds=this._bounds.map(l=>({boxInitialized:l.boxInitialized,boxMin:l.box.min.toArray(),boxMax:l.box.max.toArray(),sphereInitialized:l.sphereInitialized,sphereRadius:l.sphere.radius,sphereCenter:l.sphere.center.toArray()})),s.maxGeometryCount=this._maxGeometryCount,s.maxVertexCount=this._maxVertexCount,s.maxIndexCount=this._maxIndexCount,s.geometryInitialized=this._geometryInitialized,s.geometryCount=this._geometryCount,s.matricesTexture=this._matricesTexture.toJSON(e),this.boundingSphere!==null&&(s.boundingSphere={center:s.boundingSphere.center.toArray(),radius:s.boundingSphere.radius}),this.boundingBox!==null&&(s.boundingBox={min:s.boundingBox.min.toArray(),max:s.boundingBox.max.toArray()}));function a(l,c){return l[c.uuid]===void 0&&(l[c.uuid]=c.toJSON(e)),c.uuid}if(this.isScene)this.background&&(this.background.isColor?s.background=this.background.toJSON():this.background.isTexture&&(s.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(s.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){s.geometry=a(e.geometries,this.geometry);const l=this.geometry.parameters;if(l!==void 0&&l.shapes!==void 0){const c=l.shapes;if(Array.isArray(c))for(let u=0,h=c.length;u<h;u++){const d=c[u];a(e.shapes,d)}else a(e.shapes,c)}}if(this.isSkinnedMesh&&(s.bindMode=this.bindMode,s.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(a(e.skeletons,this.skeleton),s.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const l=[];for(let c=0,u=this.material.length;c<u;c++)l.push(a(e.materials,this.material[c]));s.material=l}else s.material=a(e.materials,this.material);if(this.children.length>0){s.children=[];for(let l=0;l<this.children.length;l++)s.children.push(this.children[l].toJSON(e).object)}if(this.animations.length>0){s.animations=[];for(let l=0;l<this.animations.length;l++){const c=this.animations[l];s.animations.push(a(e.animations,c))}}if(n){const l=o(e.geometries),c=o(e.materials),u=o(e.textures),h=o(e.images),d=o(e.shapes),f=o(e.skeletons),p=o(e.animations),g=o(e.nodes);l.length>0&&(i.geometries=l),c.length>0&&(i.materials=c),u.length>0&&(i.textures=u),h.length>0&&(i.images=h),d.length>0&&(i.shapes=d),f.length>0&&(i.skeletons=f),p.length>0&&(i.animations=p),g.length>0&&(i.nodes=g)}return i.object=s,i;function o(l){const c=[];for(const u in l){const h=l[u];delete h.metadata,c.push(h)}return c}}clone(e){return new this.constructor().copy(this,e)}copy(e,n=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),n===!0)for(let i=0;i<e.children.length;i++){const s=e.children[i];this.add(s.clone())}return this}};Os.DEFAULT_UP=new Oe(0,1,0);Os.DEFAULT_MATRIX_AUTO_UPDATE=!0;Os.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Ol=new Oe,wu=new Oe,X2=new Oe,Su=new Oe,Em=new Oe,Mm=new Oe,p6=new Oe,K2=new Oe,Y2=new Oe,Z2=new Oe;let Jw=class vg{constructor(e=new Oe,n=new Oe,i=new Oe){this.a=e,this.b=n,this.c=i}static getNormal(e,n,i,s){s.subVectors(i,n),Ol.subVectors(e,n),s.cross(Ol);const a=s.lengthSq();return a>0?s.multiplyScalar(1/Math.sqrt(a)):s.set(0,0,0)}static getBarycoord(e,n,i,s,a){Ol.subVectors(s,n),wu.subVectors(i,n),X2.subVectors(e,n);const o=Ol.dot(Ol),l=Ol.dot(wu),c=Ol.dot(X2),u=wu.dot(wu),h=wu.dot(X2),d=o*u-l*l;if(d===0)return a.set(0,0,0),null;const f=1/d,p=(u*c-l*h)*f,g=(o*h-l*c)*f;return a.set(1-p-g,g,p)}static containsPoint(e,n,i,s){return this.getBarycoord(e,n,i,s,Su)===null?!1:Su.x>=0&&Su.y>=0&&Su.x+Su.y<=1}static getInterpolation(e,n,i,s,a,o,l,c){return this.getBarycoord(e,n,i,s,Su)===null?(c.x=0,c.y=0,"z"in c&&(c.z=0),"w"in c&&(c.w=0),null):(c.setScalar(0),c.addScaledVector(a,Su.x),c.addScaledVector(o,Su.y),c.addScaledVector(l,Su.z),c)}static isFrontFacing(e,n,i,s){return Ol.subVectors(i,n),wu.subVectors(e,n),Ol.cross(wu).dot(s)<0}set(e,n,i){return this.a.copy(e),this.b.copy(n),this.c.copy(i),this}setFromPointsAndIndices(e,n,i,s){return this.a.copy(e[n]),this.b.copy(e[i]),this.c.copy(e[s]),this}setFromAttributeAndIndices(e,n,i,s){return this.a.fromBufferAttribute(e,n),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,s),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Ol.subVectors(this.c,this.b),wu.subVectors(this.a,this.b),Ol.cross(wu).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return vg.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,n){return vg.getBarycoord(e,this.a,this.b,this.c,n)}getInterpolation(e,n,i,s,a){return vg.getInterpolation(e,this.a,this.b,this.c,n,i,s,a)}containsPoint(e){return vg.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return vg.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,n){const i=this.a,s=this.b,a=this.c;let o,l;Em.subVectors(s,i),Mm.subVectors(a,i),K2.subVectors(e,i);const c=Em.dot(K2),u=Mm.dot(K2);if(c<=0&&u<=0)return n.copy(i);Y2.subVectors(e,s);const h=Em.dot(Y2),d=Mm.dot(Y2);if(h>=0&&d<=h)return n.copy(s);const f=c*d-h*u;if(f<=0&&c>=0&&h<=0)return o=c/(c-h),n.copy(i).addScaledVector(Em,o);Z2.subVectors(e,a);const p=Em.dot(Z2),g=Mm.dot(Z2);if(g>=0&&p<=g)return n.copy(a);const v=p*u-c*g;if(v<=0&&u>=0&&g<=0)return l=u/(u-g),n.copy(i).addScaledVector(Mm,l);const x=h*g-p*d;if(x<=0&&d-h>=0&&p-g>=0)return p6.subVectors(a,s),l=(d-h)/(d-h+(p-g)),n.copy(s).addScaledVector(p6,l);const _=1/(x+v+f);return o=v*_,l=f*_,n.copy(i).addScaledVector(Em,o).addScaledVector(Mm,l)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}};const mJ={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Zh={h:0,s:0,l:0},e1={h:0,s:0,l:0};function Q2(r,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?r+(e-r)*6*n:n<1/2?e:n<2/3?r+(e-r)*6*(2/3-n):r}let Ni=class{constructor(e,n,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,n,i)}set(e,n,i){if(n===void 0&&i===void 0){const s=e;s&&s.isColor?this.copy(s):typeof s=="number"?this.setHex(s):typeof s=="string"&&this.setStyle(s)}else this.setRGB(e,n,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,n=Ta){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Nl.toWorkingColorSpace(this,n),this}setRGB(e,n,i,s=Nl.workingColorSpace){return this.r=e,this.g=n,this.b=i,Nl.toWorkingColorSpace(this,s),this}setHSL(e,n,i,s=Nl.workingColorSpace){if(e=KB(e,1),n=Gs(n,0,1),i=Gs(i,0,1),n===0)this.r=this.g=this.b=i;else{const a=i<=.5?i*(1+n):i+n-i*n,o=2*i-a;this.r=Q2(o,a,e+1/3),this.g=Q2(o,a,e),this.b=Q2(o,a,e-1/3)}return Nl.toWorkingColorSpace(this,s),this}setStyle(e,n=Ta){function i(a){a!==void 0&&parseFloat(a)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let s;if(s=/^(\w+)\(([^\)]*)\)/.exec(e)){let a;const o=s[1],l=s[2];switch(o){case"rgb":case"rgba":if(a=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return i(a[4]),this.setRGB(Math.min(255,parseInt(a[1],10))/255,Math.min(255,parseInt(a[2],10))/255,Math.min(255,parseInt(a[3],10))/255,n);if(a=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return i(a[4]),this.setRGB(Math.min(100,parseInt(a[1],10))/100,Math.min(100,parseInt(a[2],10))/100,Math.min(100,parseInt(a[3],10))/100,n);break;case"hsl":case"hsla":if(a=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return i(a[4]),this.setHSL(parseFloat(a[1])/360,parseFloat(a[2])/100,parseFloat(a[3])/100,n);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(s=/^\#([A-Fa-f\d]+)$/.exec(e)){const a=s[1],o=a.length;if(o===3)return this.setRGB(parseInt(a.charAt(0),16)/15,parseInt(a.charAt(1),16)/15,parseInt(a.charAt(2),16)/15,n);if(o===6)return this.setHex(parseInt(a,16),n);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,n);return this}setColorName(e,n=Ta){const i=mJ[e.toLowerCase()];return i!==void 0?this.setHex(i,n):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Ig(e.r),this.g=Ig(e.g),this.b=Ig(e.b),this}copyLinearToSRGB(e){return this.r=j2(e.r),this.g=j2(e.g),this.b=j2(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Ta){return Nl.fromWorkingColorSpace(Js.copy(this),e),Math.round(Gs(Js.r*255,0,255))*65536+Math.round(Gs(Js.g*255,0,255))*256+Math.round(Gs(Js.b*255,0,255))}getHexString(e=Ta){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,n=Nl.workingColorSpace){Nl.fromWorkingColorSpace(Js.copy(this),n);const i=Js.r,s=Js.g,a=Js.b,o=Math.max(i,s,a),l=Math.min(i,s,a);let c,u;const h=(l+o)/2;if(l===o)c=0,u=0;else{const d=o-l;switch(u=h<=.5?d/(o+l):d/(2-o-l),o){case i:c=(s-a)/d+(s<a?6:0);break;case s:c=(a-i)/d+2;break;case a:c=(i-s)/d+4;break}c/=6}return e.h=c,e.s=u,e.l=h,e}getRGB(e,n=Nl.workingColorSpace){return Nl.fromWorkingColorSpace(Js.copy(this),n),e.r=Js.r,e.g=Js.g,e.b=Js.b,e}getStyle(e=Ta){Nl.fromWorkingColorSpace(Js.copy(this),e);const n=Js.r,i=Js.g,s=Js.b;return e!==Ta?`color(${e} ${n.toFixed(3)} ${i.toFixed(3)} ${s.toFixed(3)})`:`rgb(${Math.round(n*255)},${Math.round(i*255)},${Math.round(s*255)})`}offsetHSL(e,n,i){return this.getHSL(Zh),this.setHSL(Zh.h+e,Zh.s+n,Zh.l+i)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,n){return this.r=e.r+n.r,this.g=e.g+n.g,this.b=e.b+n.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,n){return this.r+=(e.r-this.r)*n,this.g+=(e.g-this.g)*n,this.b+=(e.b-this.b)*n,this}lerpColors(e,n,i){return this.r=e.r+(n.r-e.r)*i,this.g=e.g+(n.g-e.g)*i,this.b=e.b+(n.b-e.b)*i,this}lerpHSL(e,n){this.getHSL(Zh),e.getHSL(e1);const i=dx(Zh.h,e1.h,n),s=dx(Zh.s,e1.s,n),a=dx(Zh.l,e1.l,n);return this.setHSL(i,s,a),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const n=this.r,i=this.g,s=this.b,a=e.elements;return this.r=a[0]*n+a[3]*i+a[6]*s,this.g=a[1]*n+a[4]*i+a[7]*s,this.b=a[2]*n+a[5]*i+a[8]*s,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,n=0){return this.r=e[n],this.g=e[n+1],this.b=e[n+2],this}toArray(e=[],n=0){return e[n]=this.r,e[n+1]=this.g,e[n+2]=this.b,e}fromBufferAttribute(e,n){return this.r=e.getX(n),this.g=e.getY(n),this.b=e.getZ(n),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}};const Js=new Ni;Ni.NAMES=mJ;let Afe=0,mM=class extends pM{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:Afe++}),this.uuid=Gd(),this.name="",this.type="Material",this.blending=U$,this.side=MT,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=$$,this.blendDst=G$,this.blendEquation=z$,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Ni(0,0,0),this.blendAlpha=0,this.depthFunc=V$,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=e6,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=ym,this.stencilZFail=ym,this.stencilZPass=ym,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const n in e){const i=e[n];if(i===void 0){console.warn(`THREE.Material: parameter '${n}' has value of undefined.`);continue}const s=this[n];if(s===void 0){console.warn(`THREE.Material: '${n}' is not a property of THREE.${this.type}.`);continue}s&&s.isColor?s.set(i):s&&s.isVector3&&i&&i.isVector3?s.copy(i):this[n]=i}}toJSON(e){const n=e===void 0||typeof e=="string";n&&(e={textures:{},images:{}});const i={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(i.dispersion=this.dispersion),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapRotation!==void 0&&(i.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==U$&&(i.blending=this.blending),this.side!==MT&&(i.side=this.side),this.vertexColors===!0&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=!0),this.blendSrc!==$$&&(i.blendSrc=this.blendSrc),this.blendDst!==G$&&(i.blendDst=this.blendDst),this.blendEquation!==z$&&(i.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(i.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(i.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(i.blendAlpha=this.blendAlpha),this.depthFunc!==V$&&(i.depthFunc=this.depthFunc),this.depthTest===!1&&(i.depthTest=this.depthTest),this.depthWrite===!1&&(i.depthWrite=this.depthWrite),this.colorWrite===!1&&(i.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(i.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==e6&&(i.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(i.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==ym&&(i.stencilFail=this.stencilFail),this.stencilZFail!==ym&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==ym&&(i.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(i.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaHash===!0&&(i.alphaHash=!0),this.alphaToCoverage===!0&&(i.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=!0),this.forceSinglePass===!0&&(i.forceSinglePass=!0),this.wireframe===!0&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=!0),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function s(a){const o=[];for(const l in a){const c=a[l];delete c.metadata,o.push(c)}return o}if(n){const a=s(e.textures),o=s(e.images);a.length>0&&(i.textures=a),o.length>0&&(i.images=o)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const n=e.clippingPlanes;let i=null;if(n!==null){const s=n.length;i=new Array(s);for(let a=0;a!==s;++a)i[a]=n[a].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}},XL=class extends mM{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Ni(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Vs,this.combine=WB,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}};const Xi=new Oe,t1=new ki;let Dg=class{constructor(e,n,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=n,this.count=e!==void 0?e.length/n:0,this.normalized=i,this.usage=t6,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.gpuType=sJ,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return ffe("THREE.BufferAttribute: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,n){this.updateRanges.push({start:e,count:n})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,n,i){e*=this.itemSize,i*=n.itemSize;for(let s=0,a=this.itemSize;s<a;s++)this.array[e+s]=n.array[i+s];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let n=0,i=this.count;n<i;n++)t1.fromBufferAttribute(this,n),t1.applyMatrix3(e),this.setXY(n,t1.x,t1.y);else if(this.itemSize===3)for(let n=0,i=this.count;n<i;n++)Xi.fromBufferAttribute(this,n),Xi.applyMatrix3(e),this.setXYZ(n,Xi.x,Xi.y,Xi.z);return this}applyMatrix4(e){for(let n=0,i=this.count;n<i;n++)Xi.fromBufferAttribute(this,n),Xi.applyMatrix4(e),this.setXYZ(n,Xi.x,Xi.y,Xi.z);return this}applyNormalMatrix(e){for(let n=0,i=this.count;n<i;n++)Xi.fromBufferAttribute(this,n),Xi.applyNormalMatrix(e),this.setXYZ(n,Xi.x,Xi.y,Xi.z);return this}transformDirection(e){for(let n=0,i=this.count;n<i;n++)Xi.fromBufferAttribute(this,n),Xi.transformDirection(e),this.setXYZ(n,Xi.x,Xi.y,Xi.z);return this}set(e,n=0){return this.array.set(e,n),this}getComponent(e,n){let i=this.array[e*this.itemSize+n];return this.normalized&&(i=yg(i,this.array)),i}setComponent(e,n,i){return this.normalized&&(i=ba(i,this.array)),this.array[e*this.itemSize+n]=i,this}getX(e){let n=this.array[e*this.itemSize];return this.normalized&&(n=yg(n,this.array)),n}setX(e,n){return this.normalized&&(n=ba(n,this.array)),this.array[e*this.itemSize]=n,this}getY(e){let n=this.array[e*this.itemSize+1];return this.normalized&&(n=yg(n,this.array)),n}setY(e,n){return this.normalized&&(n=ba(n,this.array)),this.array[e*this.itemSize+1]=n,this}getZ(e){let n=this.array[e*this.itemSize+2];return this.normalized&&(n=yg(n,this.array)),n}setZ(e,n){return this.normalized&&(n=ba(n,this.array)),this.array[e*this.itemSize+2]=n,this}getW(e){let n=this.array[e*this.itemSize+3];return this.normalized&&(n=yg(n,this.array)),n}setW(e,n){return this.normalized&&(n=ba(n,this.array)),this.array[e*this.itemSize+3]=n,this}setXY(e,n,i){return e*=this.itemSize,this.normalized&&(n=ba(n,this.array),i=ba(i,this.array)),this.array[e+0]=n,this.array[e+1]=i,this}setXYZ(e,n,i,s){return e*=this.itemSize,this.normalized&&(n=ba(n,this.array),i=ba(i,this.array),s=ba(s,this.array)),this.array[e+0]=n,this.array[e+1]=i,this.array[e+2]=s,this}setXYZW(e,n,i,s,a){return e*=this.itemSize,this.normalized&&(n=ba(n,this.array),i=ba(i,this.array),s=ba(s,this.array),a=ba(a,this.array)),this.array[e+0]=n,this.array[e+1]=i,this.array[e+2]=s,this.array[e+3]=a,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==t6&&(e.usage=this.usage),e}},gJ=class extends Dg{constructor(e,n,i){super(new Uint16Array(e),n,i)}},Cfe=class extends Dg{constructor(e,n,i){super(new Uint32Array(e),n,i)}},oa=class extends Dg{constructor(e,n,i){super(new Float32Array(e),n,i)}},Nfe=0;const Xo=new mn,J2=new Os,Am=new Oe,yo=new Jy,nv=new Jy,Ts=new Oe;let Lg=class yJ extends pM{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Nfe++}),this.uuid=Gd(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(dfe(e)?Cfe:gJ)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,n){return this.attributes[e]=n,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,n,i=0){this.groups.push({start:e,count:n,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,n){this.drawRange.start=e,this.drawRange.count=n}applyMatrix4(e){const n=this.attributes.position;n!==void 0&&(n.applyMatrix4(e),n.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const a=new Vd().getNormalMatrix(e);i.applyNormalMatrix(a),i.needsUpdate=!0}const s=this.attributes.tangent;return s!==void 0&&(s.transformDirection(e),s.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Xo.makeRotationFromQuaternion(e),this.applyMatrix4(Xo),this}rotateX(e){return Xo.makeRotationX(e),this.applyMatrix4(Xo),this}rotateY(e){return Xo.makeRotationY(e),this.applyMatrix4(Xo),this}rotateZ(e){return Xo.makeRotationZ(e),this.applyMatrix4(Xo),this}translate(e,n,i){return Xo.makeTranslation(e,n,i),this.applyMatrix4(Xo),this}scale(e,n,i){return Xo.makeScale(e,n,i),this.applyMatrix4(Xo),this}lookAt(e){return J2.lookAt(e),J2.updateMatrix(),this.applyMatrix4(J2.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Am).negate(),this.translate(Am.x,Am.y,Am.z),this}setFromPoints(e){const n=[];for(let i=0,s=e.length;i<s;i++){const a=e[i];n.push(a.x,a.y,a.z||0)}return this.setAttribute("position",new oa(n,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Jy);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new Oe(-1/0,-1/0,-1/0),new Oe(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),n)for(let i=0,s=n.length;i<s;i++){const a=n[i];yo.setFromBufferAttribute(a),this.morphTargetsRelative?(Ts.addVectors(this.boundingBox.min,yo.min),this.boundingBox.expandByPoint(Ts),Ts.addVectors(this.boundingBox.max,yo.max),this.boundingBox.expandByPoint(Ts)):(this.boundingBox.expandByPoint(yo.min),this.boundingBox.expandByPoint(yo.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new e0);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new Oe,1/0);return}if(e){const i=this.boundingSphere.center;if(yo.setFromBufferAttribute(e),n)for(let a=0,o=n.length;a<o;a++){const l=n[a];nv.setFromBufferAttribute(l),this.morphTargetsRelative?(Ts.addVectors(yo.min,nv.min),yo.expandByPoint(Ts),Ts.addVectors(yo.max,nv.max),yo.expandByPoint(Ts)):(yo.expandByPoint(nv.min),yo.expandByPoint(nv.max))}yo.getCenter(i);let s=0;for(let a=0,o=e.count;a<o;a++)Ts.fromBufferAttribute(e,a),s=Math.max(s,i.distanceToSquared(Ts));if(n)for(let a=0,o=n.length;a<o;a++){const l=n[a],c=this.morphTargetsRelative;for(let u=0,h=l.count;u<h;u++)Ts.fromBufferAttribute(l,u),c&&(Am.fromBufferAttribute(e,u),Ts.add(Am)),s=Math.max(s,i.distanceToSquared(Ts))}this.boundingSphere.radius=Math.sqrt(s),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,n=this.attributes;if(e===null||n.position===void 0||n.normal===void 0||n.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=n.position,s=n.normal,a=n.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Dg(new Float32Array(4*i.count),4));const o=this.getAttribute("tangent"),l=[],c=[];for(let P=0;P<i.count;P++)l[P]=new Oe,c[P]=new Oe;const u=new Oe,h=new Oe,d=new Oe,f=new ki,p=new ki,g=new ki,v=new Oe,x=new Oe;function _(P,R,O){u.fromBufferAttribute(i,P),h.fromBufferAttribute(i,R),d.fromBufferAttribute(i,O),f.fromBufferAttribute(a,P),p.fromBufferAttribute(a,R),g.fromBufferAttribute(a,O),h.sub(u),d.sub(u),p.sub(f),g.sub(f);const D=1/(p.x*g.y-g.x*p.y);isFinite(D)&&(v.copy(h).multiplyScalar(g.y).addScaledVector(d,-p.y).multiplyScalar(D),x.copy(d).multiplyScalar(p.x).addScaledVector(h,-g.x).multiplyScalar(D),l[P].add(v),l[R].add(v),l[O].add(v),c[P].add(x),c[R].add(x),c[O].add(x))}let E=this.groups;E.length===0&&(E=[{start:0,count:e.count}]);for(let P=0,R=E.length;P<R;++P){const O=E[P],D=O.start,F=O.count;for(let U=D,B=D+F;U<B;U+=3)_(e.getX(U+0),e.getX(U+1),e.getX(U+2))}const S=new Oe,T=new Oe,M=new Oe,C=new Oe;function A(P){M.fromBufferAttribute(s,P),C.copy(M);const R=l[P];S.copy(R),S.sub(M.multiplyScalar(M.dot(R))).normalize(),T.crossVectors(C,R);const D=T.dot(c[P])<0?-1:1;o.setXYZW(P,S.x,S.y,S.z,D)}for(let P=0,R=E.length;P<R;++P){const O=E[P],D=O.start,F=O.count;for(let U=D,B=D+F;U<B;U+=3)A(e.getX(U+0)),A(e.getX(U+1)),A(e.getX(U+2))}}computeVertexNormals(){const e=this.index,n=this.getAttribute("position");if(n!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new Dg(new Float32Array(n.count*3),3),this.setAttribute("normal",i);else for(let f=0,p=i.count;f<p;f++)i.setXYZ(f,0,0,0);const s=new Oe,a=new Oe,o=new Oe,l=new Oe,c=new Oe,u=new Oe,h=new Oe,d=new Oe;if(e)for(let f=0,p=e.count;f<p;f+=3){const g=e.getX(f+0),v=e.getX(f+1),x=e.getX(f+2);s.fromBufferAttribute(n,g),a.fromBufferAttribute(n,v),o.fromBufferAttribute(n,x),h.subVectors(o,a),d.subVectors(s,a),h.cross(d),l.fromBufferAttribute(i,g),c.fromBufferAttribute(i,v),u.fromBufferAttribute(i,x),l.add(h),c.add(h),u.add(h),i.setXYZ(g,l.x,l.y,l.z),i.setXYZ(v,c.x,c.y,c.z),i.setXYZ(x,u.x,u.y,u.z)}else for(let f=0,p=n.count;f<p;f+=3)s.fromBufferAttribute(n,f+0),a.fromBufferAttribute(n,f+1),o.fromBufferAttribute(n,f+2),h.subVectors(o,a),d.subVectors(s,a),h.cross(d),i.setXYZ(f+0,h.x,h.y,h.z),i.setXYZ(f+1,h.x,h.y,h.z),i.setXYZ(f+2,h.x,h.y,h.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let n=0,i=e.count;n<i;n++)Ts.fromBufferAttribute(e,n),Ts.normalize(),e.setXYZ(n,Ts.x,Ts.y,Ts.z)}toNonIndexed(){function e(l,c){const u=l.array,h=l.itemSize,d=l.normalized,f=new u.constructor(c.length*h);let p=0,g=0;for(let v=0,x=c.length;v<x;v++){l.isInterleavedBufferAttribute?p=c[v]*l.data.stride+l.offset:p=c[v]*h;for(let _=0;_<h;_++)f[g++]=u[p++]}return new Dg(f,h,d)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const n=new yJ,i=this.index.array,s=this.attributes;for(const l in s){const c=s[l],u=e(c,i);n.setAttribute(l,u)}const a=this.morphAttributes;for(const l in a){const c=[],u=a[l];for(let h=0,d=u.length;h<d;h++){const f=u[h],p=e(f,i);c.push(p)}n.morphAttributes[l]=c}n.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let l=0,c=o.length;l<c;l++){const u=o[l];n.addGroup(u.start,u.count,u.materialIndex)}return n}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const c=this.parameters;for(const u in c)c[u]!==void 0&&(e[u]=c[u]);return e}e.data={attributes:{}};const n=this.index;n!==null&&(e.data.index={type:n.array.constructor.name,array:Array.prototype.slice.call(n.array)});const i=this.attributes;for(const c in i){const u=i[c];e.data.attributes[c]=u.toJSON(e.data)}const s={};let a=!1;for(const c in this.morphAttributes){const u=this.morphAttributes[c],h=[];for(let d=0,f=u.length;d<f;d++){const p=u[d];h.push(p.toJSON(e.data))}h.length>0&&(s[c]=h,a=!0)}a&&(e.data.morphAttributes=s,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const l=this.boundingSphere;return l!==null&&(e.data.boundingSphere={center:l.center.toArray(),radius:l.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const n={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone(n));const s=e.attributes;for(const u in s){const h=s[u];this.setAttribute(u,h.clone(n))}const a=e.morphAttributes;for(const u in a){const h=[],d=a[u];for(let f=0,p=d.length;f<p;f++)h.push(d[f].clone(n));this.morphAttributes[u]=h}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let u=0,h=o.length;u<h;u++){const d=o[u];this.addGroup(d.start,d.count,d.materialIndex)}const l=e.boundingBox;l!==null&&(this.boundingBox=l.clone());const c=e.boundingSphere;return c!==null&&(this.boundingSphere=c.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}};const m6=new mn,Af=new YB,n1=new e0,g6=new Oe,Cm=new Oe,Nm=new Oe,Pm=new Oe,eN=new Oe,r1=new Oe,i1=new ki,s1=new ki,a1=new ki,y6=new Oe,v6=new Oe,x6=new Oe,o1=new Oe,l1=new Oe;let ZB=class extends Os{constructor(e=new Lg,n=new XL){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const n=this.geometry.morphAttributes,i=Object.keys(n);if(i.length>0){const s=n[i[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,o=s.length;a<o;a++){const l=s[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=a}}}}getVertexPosition(e,n){const i=this.geometry,s=i.attributes.position,a=i.morphAttributes.position,o=i.morphTargetsRelative;n.fromBufferAttribute(s,e);const l=this.morphTargetInfluences;if(a&&l){r1.set(0,0,0);for(let c=0,u=a.length;c<u;c++){const h=l[c],d=a[c];h!==0&&(eN.fromBufferAttribute(d,e),o?r1.addScaledVector(eN,h):r1.addScaledVector(eN.sub(n),h))}n.add(r1)}return n}raycast(e,n){const i=this.geometry,s=this.material,a=this.matrixWorld;s!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),n1.copy(i.boundingSphere),n1.applyMatrix4(a),Af.copy(e.ray).recast(e.near),!(n1.containsPoint(Af.origin)===!1&&(Af.intersectSphere(n1,g6)===null||Af.origin.distanceToSquared(g6)>(e.far-e.near)**2))&&(m6.copy(a).invert(),Af.copy(e.ray).applyMatrix4(m6),!(i.boundingBox!==null&&Af.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(e,n,Af)))}_computeIntersections(e,n,i){let s;const a=this.geometry,o=this.material,l=a.index,c=a.attributes.position,u=a.attributes.uv,h=a.attributes.uv1,d=a.attributes.normal,f=a.groups,p=a.drawRange;if(l!==null)if(Array.isArray(o))for(let g=0,v=f.length;g<v;g++){const x=f[g],_=o[x.materialIndex],E=Math.max(x.start,p.start),S=Math.min(l.count,Math.min(x.start+x.count,p.start+p.count));for(let T=E,M=S;T<M;T+=3){const C=l.getX(T),A=l.getX(T+1),P=l.getX(T+2);s=c1(this,_,e,i,u,h,d,C,A,P),s&&(s.faceIndex=Math.floor(T/3),s.face.materialIndex=x.materialIndex,n.push(s))}}else{const g=Math.max(0,p.start),v=Math.min(l.count,p.start+p.count);for(let x=g,_=v;x<_;x+=3){const E=l.getX(x),S=l.getX(x+1),T=l.getX(x+2);s=c1(this,o,e,i,u,h,d,E,S,T),s&&(s.faceIndex=Math.floor(x/3),n.push(s))}}else if(c!==void 0)if(Array.isArray(o))for(let g=0,v=f.length;g<v;g++){const x=f[g],_=o[x.materialIndex],E=Math.max(x.start,p.start),S=Math.min(c.count,Math.min(x.start+x.count,p.start+p.count));for(let T=E,M=S;T<M;T+=3){const C=T,A=T+1,P=T+2;s=c1(this,_,e,i,u,h,d,C,A,P),s&&(s.faceIndex=Math.floor(T/3),s.face.materialIndex=x.materialIndex,n.push(s))}}else{const g=Math.max(0,p.start),v=Math.min(c.count,p.start+p.count);for(let x=g,_=v;x<_;x+=3){const E=x,S=x+1,T=x+2;s=c1(this,o,e,i,u,h,d,E,S,T),s&&(s.faceIndex=Math.floor(x/3),n.push(s))}}}};function Pfe(r,e,n,i,s,a,o,l){let c;if(e.side===Ude?c=i.intersectTriangle(o,a,s,!0,l):c=i.intersectTriangle(s,a,o,e.side===MT,l),c===null)return null;l1.copy(l),l1.applyMatrix4(r.matrixWorld);const u=n.ray.origin.distanceTo(l1);return u<n.near||u>n.far?null:{distance:u,point:l1.clone(),object:r}}function c1(r,e,n,i,s,a,o,l,c,u){r.getVertexPosition(l,Cm),r.getVertexPosition(c,Nm),r.getVertexPosition(u,Pm);const h=Pfe(r,e,n,i,Cm,Nm,Pm,o1);if(h){s&&(i1.fromBufferAttribute(s,l),s1.fromBufferAttribute(s,c),a1.fromBufferAttribute(s,u),h.uv=Jw.getInterpolation(o1,Cm,Nm,Pm,i1,s1,a1,new ki)),a&&(i1.fromBufferAttribute(a,l),s1.fromBufferAttribute(a,c),a1.fromBufferAttribute(a,u),h.uv1=Jw.getInterpolation(o1,Cm,Nm,Pm,i1,s1,a1,new ki)),o&&(y6.fromBufferAttribute(o,l),v6.fromBufferAttribute(o,c),x6.fromBufferAttribute(o,u),h.normal=Jw.getInterpolation(o1,Cm,Nm,Pm,y6,v6,x6,new Oe),h.normal.dot(i.direction)>0&&h.normal.multiplyScalar(-1));const d={a:l,b:c,c:u,normal:new Oe,materialIndex:0};Jw.getNormal(Cm,Nm,Pm,d.normal),h.face=d}return h}let vJ=class extends Os{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new mn,this.projectionMatrix=new mn,this.projectionMatrixInverse=new mn,this.coordinateSystem=rp}copy(e,n){return super.copy(e,n),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,n){super.updateWorldMatrix(e,n),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}};const Qh=new Oe,b6=new ki,_6=new ki;let $x=class extends vJ{constructor(e=50,n=1,i=.1,s=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=s,this.focus=10,this.aspect=n,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const n=.5*this.getFilmHeight()/e;this.fov=zx*2*Math.atan(n),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(hx*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return zx*2*Math.atan(Math.tan(hx*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,n,i){Qh.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(Qh.x,Qh.y).multiplyScalar(-e/Qh.z),Qh.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(Qh.x,Qh.y).multiplyScalar(-e/Qh.z)}getViewSize(e,n){return this.getViewBounds(e,b6,_6),n.subVectors(_6,b6)}setViewOffset(e,n,i,s,a,o){this.aspect=e/n,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=i,this.view.offsetY=s,this.view.width=a,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let n=e*Math.tan(hx*.5*this.fov)/this.zoom,i=2*n,s=this.aspect*i,a=-.5*s;const o=this.view;if(this.view!==null&&this.view.enabled){const c=o.fullWidth,u=o.fullHeight;a+=o.offsetX*s/c,n-=o.offsetY*i/u,s*=o.width/c,i*=o.height/u}const l=this.filmOffset;l!==0&&(a+=e*l/this.getFilmWidth()),this.projectionMatrix.makePerspective(a,a+s,n,n-i,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.fov=this.fov,n.object.zoom=this.zoom,n.object.near=this.near,n.object.far=this.far,n.object.focus=this.focus,n.object.aspect=this.aspect,this.view!==null&&(n.object.view=Object.assign({},this.view)),n.object.filmGauge=this.filmGauge,n.object.filmOffset=this.filmOffset,n}};const tN=new Oe,Rfe=new Oe,Ofe=new Vd;let Rm=class{constructor(e=new Oe(1,0,0),n=0){this.isPlane=!0,this.normal=e,this.constant=n}set(e,n){return this.normal.copy(e),this.constant=n,this}setComponents(e,n,i,s){return this.normal.set(e,n,i),this.constant=s,this}setFromNormalAndCoplanarPoint(e,n){return this.normal.copy(e),this.constant=-n.dot(this.normal),this}setFromCoplanarPoints(e,n,i){const s=tN.subVectors(i,n).cross(Rfe.subVectors(e,n)).normalize();return this.setFromNormalAndCoplanarPoint(s,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,n){return n.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,n){const i=e.delta(tN),s=this.normal.dot(i);if(s===0)return this.distanceToPoint(e.start)===0?n.copy(e.start):null;const a=-(e.start.dot(this.normal)+this.constant)/s;return a<0||a>1?null:n.copy(e.start).addScaledVector(i,a)}intersectsLine(e){const n=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return n<0&&i>0||i<0&&n>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,n){const i=n||Ofe.getNormalMatrix(e),s=this.coplanarPoint(tN).applyMatrix4(e),a=this.normal.applyMatrix3(i).normalize();return this.constant=-s.dot(a),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}};const Cf=new e0,u1=new Oe;let kfe=class{constructor(e=new Rm,n=new Rm,i=new Rm,s=new Rm,a=new Rm,o=new Rm){this.planes=[e,n,i,s,a,o]}set(e,n,i,s,a,o){const l=this.planes;return l[0].copy(e),l[1].copy(n),l[2].copy(i),l[3].copy(s),l[4].copy(a),l[5].copy(o),this}copy(e){const n=this.planes;for(let i=0;i<6;i++)n[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,n=rp){const i=this.planes,s=e.elements,a=s[0],o=s[1],l=s[2],c=s[3],u=s[4],h=s[5],d=s[6],f=s[7],p=s[8],g=s[9],v=s[10],x=s[11],_=s[12],E=s[13],S=s[14],T=s[15];if(i[0].setComponents(c-a,f-u,x-p,T-_).normalize(),i[1].setComponents(c+a,f+u,x+p,T+_).normalize(),i[2].setComponents(c+o,f+h,x+g,T+E).normalize(),i[3].setComponents(c-o,f-h,x-g,T-E).normalize(),i[4].setComponents(c-l,f-d,x-v,T-S).normalize(),n===rp)i[5].setComponents(c+l,f+d,x+v,T+S).normalize();else if(n===HL)i[5].setComponents(l,d,v,S).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+n);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Cf.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const n=e.geometry;n.boundingSphere===null&&n.computeBoundingSphere(),Cf.copy(n.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Cf)}intersectsSprite(e){return Cf.center.set(0,0,0),Cf.radius=.7071067811865476,Cf.applyMatrix4(e.matrixWorld),this.intersectsSphere(Cf)}intersectsSphere(e){const n=this.planes,i=e.center,s=-e.radius;for(let a=0;a<6;a++)if(n[a].distanceToPoint(i)<s)return!1;return!0}intersectsBox(e){const n=this.planes;for(let i=0;i<6;i++){const s=n[i];if(u1.x=s.normal.x>0?e.max.x:e.min.x,u1.y=s.normal.y>0?e.max.y:e.min.y,u1.z=s.normal.z>0?e.max.z:e.min.z,s.distanceToPoint(u1)<0)return!1}return!0}containsPoint(e){const n=this.planes;for(let i=0;i<6;i++)if(n[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}},QB=class extends vJ{constructor(e=-1,n=1,i=1,s=-1,a=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=n,this.top=i,this.bottom=s,this.near=a,this.far=o,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,n,i,s,a,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=i,this.view.offsetY=s,this.view.width=a,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),n=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,s=(this.top+this.bottom)/2;let a=i-e,o=i+e,l=s+n,c=s-n;if(this.view!==null&&this.view.enabled){const u=(this.right-this.left)/this.view.fullWidth/this.zoom,h=(this.top-this.bottom)/this.view.fullHeight/this.zoom;a+=u*this.view.offsetX,o=a+u*this.view.width,l-=h*this.view.offsetY,c=l-h*this.view.height}this.projectionMatrix.makeOrthographic(a,o,l,c,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.zoom=this.zoom,n.object.left=this.left,n.object.right=this.right,n.object.top=this.top,n.object.bottom=this.bottom,n.object.near=this.near,n.object.far=this.far,this.view!==null&&(n.object.view=Object.assign({},this.view)),n}},Ife=class extends rh{constructor(e,n,i,s,a,o,l,c,u,h){if(h=h!==void 0?h:L2,h!==L2&&h!==q$)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i===void 0&&h===L2&&(i=Hde),i===void 0&&h===q$&&(i=Wde),super(null,s,a,o,l,c,h,i,u),this.isDepthTexture=!0,this.image={width:e,height:n},this.magFilter=l!==void 0?l:AT,this.minFilter=c!==void 0?c:AT,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const n=super.toJSON(e);return this.compareFunction!==null&&(n.compareFunction=this.compareFunction),n}};const Dfe=new Ife(1,1);Dfe.compareFunction=Kde;let PT=class extends Os{constructor(){super(),this.isGroup=!0,this.type="Group"}},Lfe=class extends Os{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Vs,this.environmentIntensity=1,this.environmentRotation=new Vs,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,n){return super.copy(e,n),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const n=super.toJSON(e);return this.fog!==null&&(n.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(n.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(n.object.backgroundIntensity=this.backgroundIntensity),n.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(n.object.environmentIntensity=this.environmentIntensity),n.object.environmentRotation=this.environmentRotation.toArray(),n}};const w6=new Oe,S6=new Ha,T6=new Ha,Ffe=new Oe,E6=new mn,h1=new Oe,nN=new e0,M6=new mn,rN=new YB;class xJ extends ZB{constructor(e,n){super(e,n),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=H$,this.bindMatrix=new mn,this.bindMatrixInverse=new mn,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new Jy),this.boundingBox.makeEmpty();const n=e.getAttribute("position");for(let i=0;i<n.count;i++)this.getVertexPosition(i,h1),this.boundingBox.expandByPoint(h1)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new e0),this.boundingSphere.makeEmpty();const n=e.getAttribute("position");for(let i=0;i<n.count;i++)this.getVertexPosition(i,h1),this.boundingSphere.expandByPoint(h1)}copy(e,n){return super.copy(e,n),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,n){const i=this.material,s=this.matrixWorld;i!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),nN.copy(this.boundingSphere),nN.applyMatrix4(s),e.ray.intersectsSphere(nN)!==!1&&(M6.copy(s).invert(),rN.copy(e.ray).applyMatrix4(M6),!(this.boundingBox!==null&&rN.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,n,rN)))}getVertexPosition(e,n){return super.getVertexPosition(e,n),this.applyBoneTransform(e,n),n}bind(e,n){this.skeleton=e,n===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),n=this.matrixWorld),this.bindMatrix.copy(n),this.bindMatrixInverse.copy(n).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Ha,n=this.geometry.attributes.skinWeight;for(let i=0,s=n.count;i<s;i++){e.fromBufferAttribute(n,i);const a=1/e.manhattanLength();a!==1/0?e.multiplyScalar(a):e.set(1,0,0,0),n.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===H$?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===$de?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,n){const i=this.skeleton,s=this.geometry;S6.fromBufferAttribute(s.attributes.skinIndex,e),T6.fromBufferAttribute(s.attributes.skinWeight,e),w6.copy(n).applyMatrix4(this.bindMatrix),n.set(0,0,0);for(let a=0;a<4;a++){const o=T6.getComponent(a);if(o!==0){const l=S6.getComponent(a);E6.multiplyMatrices(i.bones[l].matrixWorld,i.boneInverses[l]),n.addScaledVector(Ffe.copy(w6).applyMatrix4(E6),o)}}return n.applyMatrix4(this.bindMatrixInverse)}}class RT extends Os{constructor(){super(),this.isBone=!0,this.type="Bone"}}let bJ=class extends rh{constructor(e=null,n=1,i=1,s,a,o,l,c,u=AT,h=AT,d,f){super(null,o,l,c,u,h,s,a,d,f),this.isDataTexture=!0,this.image={data:e,width:n,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}};const A6=new mn,Bfe=new mn;class gM{constructor(e=[],n=[]){this.uuid=Gd(),this.bones=e.slice(0),this.boneInverses=n,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,n=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),n.length===0)this.calculateInverses();else if(e.length!==n.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,s=this.bones.length;i<s;i++)this.boneInverses.push(new mn)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,n=this.bones.length;e<n;e++){const i=new mn;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,n=this.bones.length;e<n;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,n=this.bones.length;e<n;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,n=this.boneInverses,i=this.boneMatrices,s=this.boneTexture;for(let a=0,o=e.length;a<o;a++){const l=e[a]?e[a].matrixWorld:Bfe;A6.multiplyMatrices(l,n[a]),A6.toArray(i,a*16)}s!==null&&(s.needsUpdate=!0)}clone(){return new gM(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const n=new Float32Array(e*e*4);n.set(this.boneMatrices);const i=new bJ(n,e,e,aJ,sJ);return i.needsUpdate=!0,this.boneMatrices=n,this.boneTexture=i,this}getBoneByName(e){for(let n=0,i=this.bones.length;n<i;n++){const s=this.bones[n];if(s.name===e)return s}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,n){this.uuid=e.uuid;for(let i=0,s=e.bones.length;i<s;i++){const a=e.bones[i];let o=n[a];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",a),o=new RT),this.bones.push(o),this.boneInverses.push(new mn().fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const n=this.bones,i=this.boneInverses;for(let s=0,a=n.length;s<a;s++){const o=n[s];e.bones.push(o.uuid);const l=i[s];e.boneInverses.push(l.toArray())}return e}}let OT=class extends mM{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Ni(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}};const kT=new Oe,IT=new Oe,C6=new mn,rv=new YB,d1=new e0,iN=new Oe,N6=new Oe;let JB=class extends Os{constructor(e=new Lg,n=new OT){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const n=e.attributes.position,i=[0];for(let s=1,a=n.count;s<a;s++)kT.fromBufferAttribute(n,s-1),IT.fromBufferAttribute(n,s),i[s]=i[s-1],i[s]+=kT.distanceTo(IT);e.setAttribute("lineDistance",new oa(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,n){const i=this.geometry,s=this.matrixWorld,a=e.params.Line.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),d1.copy(i.boundingSphere),d1.applyMatrix4(s),d1.radius+=a,e.ray.intersectsSphere(d1)===!1)return;C6.copy(s).invert(),rv.copy(e.ray).applyMatrix4(C6);const l=a/((this.scale.x+this.scale.y+this.scale.z)/3),c=l*l,u=this.isLineSegments?2:1,h=i.index,f=i.attributes.position;if(h!==null){const p=Math.max(0,o.start),g=Math.min(h.count,o.start+o.count);for(let v=p,x=g-1;v<x;v+=u){const _=h.getX(v),E=h.getX(v+1),S=f1(this,e,rv,c,_,E);S&&n.push(S)}if(this.isLineLoop){const v=h.getX(g-1),x=h.getX(p),_=f1(this,e,rv,c,v,x);_&&n.push(_)}}else{const p=Math.max(0,o.start),g=Math.min(f.count,o.start+o.count);for(let v=p,x=g-1;v<x;v+=u){const _=f1(this,e,rv,c,v,v+1);_&&n.push(_)}if(this.isLineLoop){const v=f1(this,e,rv,c,g-1,p);v&&n.push(v)}}}updateMorphTargets(){const n=this.geometry.morphAttributes,i=Object.keys(n);if(i.length>0){const s=n[i[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,o=s.length;a<o;a++){const l=s[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=a}}}}};function f1(r,e,n,i,s,a){const o=r.geometry.attributes.position;if(kT.fromBufferAttribute(o,s),IT.fromBufferAttribute(o,a),n.distanceSqToSegment(kT,IT,iN,N6)>i)return;iN.applyMatrix4(r.matrixWorld);const c=e.ray.origin.distanceTo(iN);if(!(c<e.near||c>e.far))return{distance:c,point:N6.clone().applyMatrix4(r.matrixWorld),index:s,face:null,faceIndex:null,object:r}}const P6=new Oe,R6=new Oe;class jfe extends JB{constructor(e,n){super(e,n),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const n=e.attributes.position,i=[];for(let s=0,a=n.count;s<a;s+=2)P6.fromBufferAttribute(n,s),R6.fromBufferAttribute(n,s+1),i[s]=s===0?0:i[s-1],i[s+1]=i[s]+P6.distanceTo(R6);e.setAttribute("lineDistance",new oa(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}let Ufe=class{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,n){const i=this.getUtoTmapping(e);return this.getPoint(i,n)}getPoints(e=5){const n=[];for(let i=0;i<=e;i++)n.push(this.getPoint(i/e));return n}getSpacedPoints(e=5){const n=[];for(let i=0;i<=e;i++)n.push(this.getPointAt(i/e));return n}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const n=[];let i,s=this.getPoint(0),a=0;n.push(0);for(let o=1;o<=e;o++)i=this.getPoint(o/e),a+=i.distanceTo(s),n.push(a),s=i;return this.cacheArcLengths=n,n}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,n){const i=this.getLengths();let s=0;const a=i.length;let o;n?o=n:o=e*i[a-1];let l=0,c=a-1,u;for(;l<=c;)if(s=Math.floor(l+(c-l)/2),u=i[s]-o,u<0)l=s+1;else if(u>0)c=s-1;else{c=s;break}if(s=c,i[s]===o)return s/(a-1);const h=i[s],f=i[s+1]-h,p=(o-h)/f;return(s+p)/(a-1)}getTangent(e,n){let s=e-1e-4,a=e+1e-4;s<0&&(s=0),a>1&&(a=1);const o=this.getPoint(s),l=this.getPoint(a),c=n||(o.isVector2?new ki:new Oe);return c.copy(l).sub(o).normalize(),c}getTangentAt(e,n){const i=this.getUtoTmapping(e);return this.getTangent(i,n)}computeFrenetFrames(e,n){const i=new Oe,s=[],a=[],o=[],l=new Oe,c=new mn;for(let p=0;p<=e;p++){const g=p/e;s[p]=this.getTangentAt(g,new Oe)}a[0]=new Oe,o[0]=new Oe;let u=Number.MAX_VALUE;const h=Math.abs(s[0].x),d=Math.abs(s[0].y),f=Math.abs(s[0].z);h<=u&&(u=h,i.set(1,0,0)),d<=u&&(u=d,i.set(0,1,0)),f<=u&&i.set(0,0,1),l.crossVectors(s[0],i).normalize(),a[0].crossVectors(s[0],l),o[0].crossVectors(s[0],a[0]);for(let p=1;p<=e;p++){if(a[p]=a[p-1].clone(),o[p]=o[p-1].clone(),l.crossVectors(s[p-1],s[p]),l.length()>Number.EPSILON){l.normalize();const g=Math.acos(Gs(s[p-1].dot(s[p]),-1,1));a[p].applyMatrix4(c.makeRotationAxis(l,g))}o[p].crossVectors(s[p],a[p])}if(n===!0){let p=Math.acos(Gs(a[0].dot(a[e]),-1,1));p/=e,s[0].dot(l.crossVectors(a[0],a[e]))>0&&(p=-p);for(let g=1;g<=e;g++)a[g].applyMatrix4(c.makeRotationAxis(s[g],p*g)),o[g].crossVectors(s[g],a[g])}return{tangents:s,normals:a,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}};const zfe={triangulate:function(r,e,n=2){const i=e&&e.length,s=i?e[0]*n:r.length;let a=_J(r,0,s,n,!0);const o=[];if(!a||a.next===a.prev)return o;let l,c,u,h,d,f,p;if(i&&(a=Wfe(r,e,a,n)),r.length>80*n){l=u=r[0],c=h=r[1];for(let g=n;g<s;g+=n)d=r[g],f=r[g+1],d<l&&(l=d),f<c&&(c=f),d>u&&(u=d),f>h&&(h=f);p=Math.max(u-l,h-c),p=p!==0?32767/p:0}return Gx(a,o,n,l,c,p,0),o}};function _J(r,e,n,i,s){let a,o;if(s===rpe(r,e,n,i)>0)for(a=e;a<n;a+=i)o=O6(a,r[a],r[a+1],o);else for(a=n-i;a>=e;a-=i)o=O6(a,r[a],r[a+1],o);return o&&yM(o,o.next)&&(Hx(o),o=o.next),o}function vp(r,e){if(!r)return r;e||(e=r);let n=r,i;do if(i=!1,!n.steiner&&(yM(n,n.next)||Ti(n.prev,n,n.next)===0)){if(Hx(n),n=e=n.prev,n===n.next)break;i=!0}else n=n.next;while(i||n!==e);return e}function Gx(r,e,n,i,s,a,o){if(!r)return;!o&&a&&Zfe(r,i,s,a);let l=r,c,u;for(;r.prev!==r.next;){if(c=r.prev,u=r.next,a?Gfe(r,i,s,a):$fe(r)){e.push(c.i/n|0),e.push(r.i/n|0),e.push(u.i/n|0),Hx(r),r=u.next,l=u.next;continue}if(r=u,r===l){o?o===1?(r=Vfe(vp(r),e,n),Gx(r,e,n,i,s,a,2)):o===2&&Hfe(r,e,n,i,s,a):Gx(vp(r),e,n,i,s,a,1);break}}}function $fe(r){const e=r.prev,n=r,i=r.next;if(Ti(e,n,i)>=0)return!1;const s=e.x,a=n.x,o=i.x,l=e.y,c=n.y,u=i.y,h=s<a?s<o?s:o:a<o?a:o,d=l<c?l<u?l:u:c<u?c:u,f=s>a?s>o?s:o:a>o?a:o,p=l>c?l>u?l:u:c>u?c:u;let g=i.next;for(;g!==e;){if(g.x>=h&&g.x<=f&&g.y>=d&&g.y<=p&&bg(s,l,a,c,o,u,g.x,g.y)&&Ti(g.prev,g,g.next)>=0)return!1;g=g.next}return!0}function Gfe(r,e,n,i){const s=r.prev,a=r,o=r.next;if(Ti(s,a,o)>=0)return!1;const l=s.x,c=a.x,u=o.x,h=s.y,d=a.y,f=o.y,p=l<c?l<u?l:u:c<u?c:u,g=h<d?h<f?h:f:d<f?d:f,v=l>c?l>u?l:u:c>u?c:u,x=h>d?h>f?h:f:d>f?d:f,_=KL(p,g,e,n,i),E=KL(v,x,e,n,i);let S=r.prevZ,T=r.nextZ;for(;S&&S.z>=_&&T&&T.z<=E;){if(S.x>=p&&S.x<=v&&S.y>=g&&S.y<=x&&S!==s&&S!==o&&bg(l,h,c,d,u,f,S.x,S.y)&&Ti(S.prev,S,S.next)>=0||(S=S.prevZ,T.x>=p&&T.x<=v&&T.y>=g&&T.y<=x&&T!==s&&T!==o&&bg(l,h,c,d,u,f,T.x,T.y)&&Ti(T.prev,T,T.next)>=0))return!1;T=T.nextZ}for(;S&&S.z>=_;){if(S.x>=p&&S.x<=v&&S.y>=g&&S.y<=x&&S!==s&&S!==o&&bg(l,h,c,d,u,f,S.x,S.y)&&Ti(S.prev,S,S.next)>=0)return!1;S=S.prevZ}for(;T&&T.z<=E;){if(T.x>=p&&T.x<=v&&T.y>=g&&T.y<=x&&T!==s&&T!==o&&bg(l,h,c,d,u,f,T.x,T.y)&&Ti(T.prev,T,T.next)>=0)return!1;T=T.nextZ}return!0}function Vfe(r,e,n){let i=r;do{const s=i.prev,a=i.next.next;!yM(s,a)&&wJ(s,i,i.next,a)&&Vx(s,a)&&Vx(a,s)&&(e.push(s.i/n|0),e.push(i.i/n|0),e.push(a.i/n|0),Hx(i),Hx(i.next),i=r=a),i=i.next}while(i!==r);return vp(i)}function Hfe(r,e,n,i,s,a){let o=r;do{let l=o.next.next;for(;l!==o.prev;){if(o.i!==l.i&&epe(o,l)){let c=SJ(o,l);o=vp(o,o.next),c=vp(c,c.next),Gx(o,e,n,i,s,a,0),Gx(c,e,n,i,s,a,0);return}l=l.next}o=o.next}while(o!==r)}function Wfe(r,e,n,i){const s=[];let a,o,l,c,u;for(a=0,o=e.length;a<o;a++)l=e[a]*i,c=a<o-1?e[a+1]*i:r.length,u=_J(r,l,c,i,!1),u===u.next&&(u.steiner=!0),s.push(Jfe(u));for(s.sort(qfe),a=0;a<s.length;a++)n=Xfe(s[a],n);return n}function qfe(r,e){return r.x-e.x}function Xfe(r,e){const n=Kfe(r,e);if(!n)return e;const i=SJ(n,r);return vp(i,i.next),vp(n,n.next)}function Kfe(r,e){let n=e,i=-1/0,s;const a=r.x,o=r.y;do{if(o<=n.y&&o>=n.next.y&&n.next.y!==n.y){const f=n.x+(o-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(f<=a&&f>i&&(i=f,s=n.x<n.next.x?n:n.next,f===a))return s}n=n.next}while(n!==e);if(!s)return null;const l=s,c=s.x,u=s.y;let h=1/0,d;n=s;do a>=n.x&&n.x>=c&&a!==n.x&&bg(o<u?a:i,o,c,u,o<u?i:a,o,n.x,n.y)&&(d=Math.abs(o-n.y)/(a-n.x),Vx(n,r)&&(d<h||d===h&&(n.x>s.x||n.x===s.x&&Yfe(s,n)))&&(s=n,h=d)),n=n.next;while(n!==l);return s}function Yfe(r,e){return Ti(r.prev,r,e.prev)<0&&Ti(e.next,r,r.next)<0}function Zfe(r,e,n,i){let s=r;do s.z===0&&(s.z=KL(s.x,s.y,e,n,i)),s.prevZ=s.prev,s.nextZ=s.next,s=s.next;while(s!==r);s.prevZ.nextZ=null,s.prevZ=null,Qfe(s)}function Qfe(r){let e,n,i,s,a,o,l,c,u=1;do{for(n=r,r=null,a=null,o=0;n;){for(o++,i=n,l=0,e=0;e<u&&(l++,i=i.nextZ,!!i);e++);for(c=u;l>0||c>0&&i;)l!==0&&(c===0||!i||n.z<=i.z)?(s=n,n=n.nextZ,l--):(s=i,i=i.nextZ,c--),a?a.nextZ=s:r=s,s.prevZ=a,a=s;n=i}a.nextZ=null,u*=2}while(o>1);return r}function KL(r,e,n,i,s){return r=(r-n)*s|0,e=(e-i)*s|0,r=(r|r<<8)&16711935,r=(r|r<<4)&252645135,r=(r|r<<2)&858993459,r=(r|r<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,r|e<<1}function Jfe(r){let e=r,n=r;do(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next;while(e!==r);return n}function bg(r,e,n,i,s,a,o,l){return(s-o)*(e-l)>=(r-o)*(a-l)&&(r-o)*(i-l)>=(n-o)*(e-l)&&(n-o)*(a-l)>=(s-o)*(i-l)}function epe(r,e){return r.next.i!==e.i&&r.prev.i!==e.i&&!tpe(r,e)&&(Vx(r,e)&&Vx(e,r)&&npe(r,e)&&(Ti(r.prev,r,e.prev)||Ti(r,e.prev,e))||yM(r,e)&&Ti(r.prev,r,r.next)>0&&Ti(e.prev,e,e.next)>0)}function Ti(r,e,n){return(e.y-r.y)*(n.x-e.x)-(e.x-r.x)*(n.y-e.y)}function yM(r,e){return r.x===e.x&&r.y===e.y}function wJ(r,e,n,i){const s=m1(Ti(r,e,n)),a=m1(Ti(r,e,i)),o=m1(Ti(n,i,r)),l=m1(Ti(n,i,e));return!!(s!==a&&o!==l||s===0&&p1(r,n,e)||a===0&&p1(r,i,e)||o===0&&p1(n,r,i)||l===0&&p1(n,e,i))}function p1(r,e,n){return e.x<=Math.max(r.x,n.x)&&e.x>=Math.min(r.x,n.x)&&e.y<=Math.max(r.y,n.y)&&e.y>=Math.min(r.y,n.y)}function m1(r){return r>0?1:r<0?-1:0}function tpe(r,e){let n=r;do{if(n.i!==r.i&&n.next.i!==r.i&&n.i!==e.i&&n.next.i!==e.i&&wJ(n,n.next,r,e))return!0;n=n.next}while(n!==r);return!1}function Vx(r,e){return Ti(r.prev,r,r.next)<0?Ti(r,e,r.next)>=0&&Ti(r,r.prev,e)>=0:Ti(r,e,r.prev)<0||Ti(r,r.next,e)<0}function npe(r,e){let n=r,i=!1;const s=(r.x+e.x)/2,a=(r.y+e.y)/2;do n.y>a!=n.next.y>a&&n.next.y!==n.y&&s<(n.next.x-n.x)*(a-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next;while(n!==r);return i}function SJ(r,e){const n=new YL(r.i,r.x,r.y),i=new YL(e.i,e.x,e.y),s=r.next,a=e.prev;return r.next=e,e.prev=r,n.next=s,s.prev=n,i.next=n,n.prev=i,a.next=i,i.prev=a,i}function O6(r,e,n,i){const s=new YL(r,e,n);return i?(s.next=i.next,s.prev=i,i.next.prev=s,i.next=s):(s.prev=s,s.next=s),s}function Hx(r){r.next.prev=r.prev,r.prev.next=r.next,r.prevZ&&(r.prevZ.nextZ=r.nextZ),r.nextZ&&(r.nextZ.prevZ=r.prevZ)}function YL(r,e,n){this.i=r,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function rpe(r,e,n,i){let s=0;for(let a=e,o=n-i;a<n;a+=i)s+=(r[o]-r[a])*(r[a+1]+r[o+1]),o=a;return s}class ej{static area(e){const n=e.length;let i=0;for(let s=n-1,a=0;a<n;s=a++)i+=e[s].x*e[a].y-e[a].x*e[s].y;return i*.5}static isClockWise(e){return ej.area(e)<0}static triangulateShape(e,n){const i=[],s=[],a=[];k6(e),I6(i,e);let o=e.length;n.forEach(k6);for(let c=0;c<n.length;c++)s.push(o),o+=n[c].length,I6(i,n[c]);const l=zfe.triangulate(i,s);for(let c=0;c<l.length;c+=3)a.push(l.slice(c,c+3));return a}}function k6(r){const e=r.length;e>2&&r[e-1].equals(r[0])&&r.pop()}function I6(r,e){for(let n=0;n<e.length;n++)r.push(e[n].x),r.push(e[n].y)}let fx=class extends mM{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Ni(16777215),this.specular=new Ni(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ni(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=oJ,this.normalScale=new ki(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Vs,this.combine=WB,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}},TJ=class extends mM{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Ni(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ni(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=oJ,this.normalScale=new ki(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Vs,this.combine=WB,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}};function g1(r,e,n){return!r||!n&&r.constructor===e?r:typeof e.BYTES_PER_ELEMENT=="number"?new e(r):Array.prototype.slice.call(r)}function ipe(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}function spe(r){function e(s,a){return r[s]-r[a]}const n=r.length,i=new Array(n);for(let s=0;s!==n;++s)i[s]=s;return i.sort(e),i}function D6(r,e,n){const i=r.length,s=new r.constructor(i);for(let a=0,o=0;o!==i;++a){const l=n[a]*e;for(let c=0;c!==e;++c)s[o++]=r[l+c]}return s}function EJ(r,e,n,i){let s=1,a=r[0];for(;a!==void 0&&a[i]===void 0;)a=r[s++];if(a===void 0)return;let o=a[i];if(o!==void 0)if(Array.isArray(o))do o=a[i],o!==void 0&&(e.push(a.time),n.push.apply(n,o)),a=r[s++];while(a!==void 0);else if(o.toArray!==void 0)do o=a[i],o!==void 0&&(e.push(a.time),o.toArray(n,n.length)),a=r[s++];while(a!==void 0);else do o=a[i],o!==void 0&&(e.push(a.time),n.push(o)),a=r[s++];while(a!==void 0)}class vM{constructor(e,n,i,s){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=s!==void 0?s:new n.constructor(i),this.sampleValues=n,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const n=this.parameterPositions;let i=this._cachedIndex,s=n[i],a=n[i-1];e:{t:{let o;n:{r:if(!(e<s)){for(let l=i+2;;){if(s===void 0){if(e<a)break r;return i=n.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===l)break;if(a=s,s=n[++i],e<s)break t}o=n.length;break n}if(!(e>=a)){const l=n[1];e<l&&(i=2,a=l);for(let c=i-2;;){if(a===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===c)break;if(s=a,a=n[--i-1],e>=a)break t}o=i,i=0;break n}break e}for(;i<o;){const l=i+o>>>1;e<n[l]?o=l:i=l+1}if(s=n[i],a=n[i-1],a===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(s===void 0)return i=n.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,a,s)}return this.interpolate_(i,a,e,s)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const n=this.resultBuffer,i=this.sampleValues,s=this.valueSize,a=e*s;for(let o=0;o!==s;++o)n[o]=i[a+o];return n}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class ape extends vM{constructor(e,n,i,s){super(e,n,i,s),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:X$,endingEnd:X$}}intervalChanged_(e,n,i){const s=this.parameterPositions;let a=e-2,o=e+1,l=s[a],c=s[o];if(l===void 0)switch(this.getSettings_().endingStart){case K$:a=e,l=2*n-i;break;case Y$:a=s.length-2,l=n+s[a]-s[a+1];break;default:a=e,l=i}if(c===void 0)switch(this.getSettings_().endingEnd){case K$:o=e,c=2*i-n;break;case Y$:o=1,c=i+s[1]-s[0];break;default:o=e-1,c=n}const u=(i-n)*.5,h=this.valueSize;this._weightPrev=u/(n-l),this._weightNext=u/(c-i),this._offsetPrev=a*h,this._offsetNext=o*h}interpolate_(e,n,i,s){const a=this.resultBuffer,o=this.sampleValues,l=this.valueSize,c=e*l,u=c-l,h=this._offsetPrev,d=this._offsetNext,f=this._weightPrev,p=this._weightNext,g=(i-n)/(s-n),v=g*g,x=v*g,_=-f*x+2*f*v-f*g,E=(1+f)*x+(-1.5-2*f)*v+(-.5+f)*g+1,S=(-1-p)*x+(1.5+p)*v+.5*g,T=p*x-p*v;for(let M=0;M!==l;++M)a[M]=_*o[h+M]+E*o[u+M]+S*o[c+M]+T*o[d+M];return a}}class ope extends vM{constructor(e,n,i,s){super(e,n,i,s)}interpolate_(e,n,i,s){const a=this.resultBuffer,o=this.sampleValues,l=this.valueSize,c=e*l,u=c-l,h=(i-n)/(s-n),d=1-h;for(let f=0;f!==l;++f)a[f]=o[u+f]*d+o[c+f]*h;return a}}class lpe extends vM{constructor(e,n,i,s){super(e,n,i,s)}interpolate_(e){return this.copySampleValue_(e-1)}}class tu{constructor(e,n,i,s){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(n===void 0||n.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=g1(n,this.TimeBufferType),this.values=g1(i,this.ValueBufferType),this.setInterpolation(s||this.DefaultInterpolation)}static toJSON(e){const n=e.constructor;let i;if(n.toJSON!==this.toJSON)i=n.toJSON(e);else{i={name:e.name,times:g1(e.times,Array),values:g1(e.values,Array)};const s=e.getInterpolation();s!==e.DefaultInterpolation&&(i.interpolation=s)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new lpe(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new ope(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new ape(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let n;switch(e){case CT:n=this.InterpolantFactoryMethodDiscrete;break;case NT:n=this.InterpolantFactoryMethodLinear;break;case F2:n=this.InterpolantFactoryMethodSmooth;break}if(n===void 0){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=n,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return CT;case this.InterpolantFactoryMethodLinear:return NT;case this.InterpolantFactoryMethodSmooth:return F2}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const n=this.times;for(let i=0,s=n.length;i!==s;++i)n[i]+=e}return this}scale(e){if(e!==1){const n=this.times;for(let i=0,s=n.length;i!==s;++i)n[i]*=e}return this}trim(e,n){const i=this.times,s=i.length;let a=0,o=s-1;for(;a!==s&&i[a]<e;)++a;for(;o!==-1&&i[o]>n;)--o;if(++o,a!==0||o!==s){a>=o&&(o=Math.max(o,1),a=o-1);const l=this.getValueSize();this.times=i.slice(a,o),this.values=this.values.slice(a*l,o*l)}return this}validate(){let e=!0;const n=this.getValueSize();n-Math.floor(n)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,s=this.values,a=i.length;a===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let l=0;l!==a;l++){const c=i[l];if(typeof c=="number"&&isNaN(c)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,l,c),e=!1;break}if(o!==null&&o>c){console.error("THREE.KeyframeTrack: Out of order keys.",this,l,c,o),e=!1;break}o=c}if(s!==void 0&&ipe(s))for(let l=0,c=s.length;l!==c;++l){const u=s[l];if(isNaN(u)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,l,u),e=!1;break}}return e}optimize(){const e=this.times.slice(),n=this.values.slice(),i=this.getValueSize(),s=this.getInterpolation()===F2,a=e.length-1;let o=1;for(let l=1;l<a;++l){let c=!1;const u=e[l],h=e[l+1];if(u!==h&&(l!==1||u!==e[0]))if(s)c=!0;else{const d=l*i,f=d-i,p=d+i;for(let g=0;g!==i;++g){const v=n[d+g];if(v!==n[f+g]||v!==n[p+g]){c=!0;break}}}if(c){if(l!==o){e[o]=e[l];const d=l*i,f=o*i;for(let p=0;p!==i;++p)n[f+p]=n[d+p]}++o}}if(a>0){e[o]=e[a];for(let l=a*i,c=o*i,u=0;u!==i;++u)n[c+u]=n[l+u];++o}return o!==e.length?(this.times=e.slice(0,o),this.values=n.slice(0,o*i)):(this.times=e,this.values=n),this}clone(){const e=this.times.slice(),n=this.values.slice(),i=this.constructor,s=new i(this.name,e,n);return s.createInterpolant=this.createInterpolant,s}}tu.prototype.TimeBufferType=Float32Array;tu.prototype.ValueBufferType=Float32Array;tu.prototype.DefaultInterpolation=NT;class t0 extends tu{}t0.prototype.ValueTypeName="bool";t0.prototype.ValueBufferType=Array;t0.prototype.DefaultInterpolation=CT;t0.prototype.InterpolantFactoryMethodLinear=void 0;t0.prototype.InterpolantFactoryMethodSmooth=void 0;class MJ extends tu{}MJ.prototype.ValueTypeName="color";class Wx extends tu{}Wx.prototype.ValueTypeName="number";class cpe extends vM{constructor(e,n,i,s){super(e,n,i,s)}interpolate_(e,n,i,s){const a=this.resultBuffer,o=this.sampleValues,l=this.valueSize,c=(i-n)/(s-n);let u=e*l;for(let h=u+l;u!==h;u+=4)Sa.slerpFlat(a,0,o,u-l,o,u,c);return a}}class Id extends tu{InterpolantFactoryMethodLinear(e){return new cpe(this.times,this.values,this.getValueSize(),e)}}Id.prototype.ValueTypeName="quaternion";Id.prototype.DefaultInterpolation=NT;Id.prototype.InterpolantFactoryMethodSmooth=void 0;class n0 extends tu{}n0.prototype.ValueTypeName="string";n0.prototype.ValueBufferType=Array;n0.prototype.DefaultInterpolation=CT;n0.prototype.InterpolantFactoryMethodLinear=void 0;n0.prototype.InterpolantFactoryMethodSmooth=void 0;class xp extends tu{}xp.prototype.ValueTypeName="vector";class ZL{constructor(e="",n=-1,i=[],s=qde){this.name=e,this.tracks=i,this.duration=n,this.blendMode=s,this.uuid=Gd(),this.duration<0&&this.resetDuration()}static parse(e){const n=[],i=e.tracks,s=1/(e.fps||1);for(let o=0,l=i.length;o!==l;++o)n.push(hpe(i[o]).scale(s));const a=new this(e.name,e.duration,n,e.blendMode);return a.uuid=e.uuid,a}static toJSON(e){const n=[],i=e.tracks,s={name:e.name,duration:e.duration,tracks:n,uuid:e.uuid,blendMode:e.blendMode};for(let a=0,o=i.length;a!==o;++a)n.push(tu.toJSON(i[a]));return s}static CreateFromMorphTargetSequence(e,n,i,s){const a=n.length,o=[];for(let l=0;l<a;l++){let c=[],u=[];c.push((l+a-1)%a,l,(l+1)%a),u.push(0,1,0);const h=spe(c);c=D6(c,1,h),u=D6(u,1,h),!s&&c[0]===0&&(c.push(a),u.push(u[0])),o.push(new Wx(".morphTargetInfluences["+n[l].name+"]",c,u).scale(1/i))}return new this(e,-1,o)}static findByName(e,n){let i=e;if(!Array.isArray(e)){const s=e;i=s.geometry&&s.geometry.animations||s.animations}for(let s=0;s<i.length;s++)if(i[s].name===n)return i[s];return null}static CreateClipsFromMorphTargetSequences(e,n,i){const s={},a=/^([\w-]*?)([\d]+)$/;for(let l=0,c=e.length;l<c;l++){const u=e[l],h=u.name.match(a);if(h&&h.length>1){const d=h[1];let f=s[d];f||(s[d]=f=[]),f.push(u)}}const o=[];for(const l in s)o.push(this.CreateFromMorphTargetSequence(l,s[l],n,i));return o}static parseAnimation(e,n){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(d,f,p,g,v){if(p.length!==0){const x=[],_=[];EJ(p,x,_,g),x.length!==0&&v.push(new d(f,x,_))}},s=[],a=e.name||"default",o=e.fps||30,l=e.blendMode;let c=e.length||-1;const u=e.hierarchy||[];for(let d=0;d<u.length;d++){const f=u[d].keys;if(!(!f||f.length===0))if(f[0].morphTargets){const p={};let g;for(g=0;g<f.length;g++)if(f[g].morphTargets)for(let v=0;v<f[g].morphTargets.length;v++)p[f[g].morphTargets[v]]=-1;for(const v in p){const x=[],_=[];for(let E=0;E!==f[g].morphTargets.length;++E){const S=f[g];x.push(S.time),_.push(S.morphTarget===v?1:0)}s.push(new Wx(".morphTargetInfluence["+v+"]",x,_))}c=p.length*o}else{const p=".bones["+n[d].name+"]";i(xp,p+".position",f,"pos",s),i(Id,p+".quaternion",f,"rot",s),i(xp,p+".scale",f,"scl",s)}}return s.length===0?null:new this(a,c,s,l)}resetDuration(){const e=this.tracks;let n=0;for(let i=0,s=e.length;i!==s;++i){const a=this.tracks[i];n=Math.max(n,a.times[a.times.length-1])}return this.duration=n,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let n=0;n<this.tracks.length;n++)e=e&&this.tracks[n].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let n=0;n<this.tracks.length;n++)e.push(this.tracks[n].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function upe(r){switch(r.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Wx;case"vector":case"vector2":case"vector3":case"vector4":return xp;case"color":return MJ;case"quaternion":return Id;case"bool":case"boolean":return t0;case"string":return n0}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+r)}function hpe(r){if(r.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=upe(r.type);if(r.times===void 0){const n=[],i=[];EJ(r.keys,n,i,"value"),r.times=n,r.values=i}return e.parse!==void 0?e.parse(r):new e(r.name,r.times,r.values,r.interpolation)}const DT={enabled:!1,files:{},add:function(r,e){this.enabled!==!1&&(this.files[r]=e)},get:function(r){if(this.enabled!==!1)return this.files[r]},remove:function(r){delete this.files[r]},clear:function(){this.files={}}};let dpe=class{constructor(e,n,i){const s=this;let a=!1,o=0,l=0,c;const u=[];this.onStart=void 0,this.onLoad=e,this.onProgress=n,this.onError=i,this.itemStart=function(h){l++,a===!1&&s.onStart!==void 0&&s.onStart(h,o,l),a=!0},this.itemEnd=function(h){o++,s.onProgress!==void 0&&s.onProgress(h,o,l),o===l&&(a=!1,s.onLoad!==void 0&&s.onLoad())},this.itemError=function(h){s.onError!==void 0&&s.onError(h)},this.resolveURL=function(h){return c?c(h):h},this.setURLModifier=function(h){return c=h,this},this.addHandler=function(h,d){return u.push(h,d),this},this.removeHandler=function(h){const d=u.indexOf(h);return d!==-1&&u.splice(d,2),this},this.getHandler=function(h){for(let d=0,f=u.length;d<f;d+=2){const p=u[d],g=u[d+1];if(p.global&&(p.lastIndex=0),p.test(h))return g}return null}}};const fpe=new dpe;let Hc=class{constructor(e){this.manager=e!==void 0?e:fpe,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,n){const i=this;return new Promise(function(s,a){i.load(e,s,n,a)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}};Hc.DEFAULT_MATERIAL_NAME="__DEFAULT";const Tu={};class ppe extends Error{constructor(e,n){super(e),this.response=n}}class tj extends Hc{constructor(e){super(e)}load(e,n,i,s){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const a=DT.get(e);if(a!==void 0)return this.manager.itemStart(e),setTimeout(()=>{n&&n(a),this.manager.itemEnd(e)},0),a;if(Tu[e]!==void 0){Tu[e].push({onLoad:n,onProgress:i,onError:s});return}Tu[e]=[],Tu[e].push({onLoad:n,onProgress:i,onError:s});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),l=this.mimeType,c=this.responseType;fetch(o).then(u=>{if(u.status===200||u.status===0){if(u.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||u.body===void 0||u.body.getReader===void 0)return u;const h=Tu[e],d=u.body.getReader(),f=u.headers.get("X-File-Size")||u.headers.get("Content-Length"),p=f?parseInt(f):0,g=p!==0;let v=0;const x=new ReadableStream({start(_){E();function E(){d.read().then(({done:S,value:T})=>{if(S)_.close();else{v+=T.byteLength;const M=new ProgressEvent("progress",{lengthComputable:g,loaded:v,total:p});for(let C=0,A=h.length;C<A;C++){const P=h[C];P.onProgress&&P.onProgress(M)}_.enqueue(T),E()}})}}});return new Response(x)}else throw new ppe(`fetch for "${u.url}" responded with ${u.status}: ${u.statusText}`,u)}).then(u=>{switch(c){case"arraybuffer":return u.arrayBuffer();case"blob":return u.blob();case"document":return u.text().then(h=>new DOMParser().parseFromString(h,l));case"json":return u.json();default:if(l===void 0)return u.text();{const d=/charset="?([^;"\s]*)"?/i.exec(l),f=d&&d[1]?d[1].toLowerCase():void 0,p=new TextDecoder(f);return u.arrayBuffer().then(g=>p.decode(g))}}}).then(u=>{DT.add(e,u);const h=Tu[e];delete Tu[e];for(let d=0,f=h.length;d<f;d++){const p=h[d];p.onLoad&&p.onLoad(u)}}).catch(u=>{const h=Tu[e];if(h===void 0)throw this.manager.itemError(e),u;delete Tu[e];for(let d=0,f=h.length;d<f;d++){const p=h[d];p.onError&&p.onError(u)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}let mpe=class extends Hc{constructor(e){super(e)}load(e,n,i,s){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const a=this,o=DT.get(e);if(o!==void 0)return a.manager.itemStart(e),setTimeout(function(){n&&n(o),a.manager.itemEnd(e)},0),o;const l=WL("img");function c(){h(),DT.add(e,this),n&&n(this),a.manager.itemEnd(e)}function u(d){h(),s&&s(d),a.manager.itemError(e),a.manager.itemEnd(e)}function h(){l.removeEventListener("load",c,!1),l.removeEventListener("error",u,!1)}return l.addEventListener("load",c,!1),l.addEventListener("error",u,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(l.crossOrigin=this.crossOrigin),a.manager.itemStart(e),l.src=e,l}};class gpe extends Hc{constructor(e){super(e)}load(e,n,i,s){const a=this,o=new bJ,l=new tj(this.manager);return l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setPath(this.path),l.setWithCredentials(a.withCredentials),l.load(e,function(c){let u;try{u=a.parse(c)}catch(h){if(s!==void 0)s(h);else{console.error(h);return}}u.image!==void 0?o.image=u.image:u.data!==void 0&&(o.image.width=u.width,o.image.height=u.height,o.image.data=u.data),o.wrapS=u.wrapS!==void 0?u.wrapS:Cc,o.wrapT=u.wrapT!==void 0?u.wrapT:Cc,o.magFilter=u.magFilter!==void 0?u.magFilter:nT,o.minFilter=u.minFilter!==void 0?u.minFilter:nT,o.anisotropy=u.anisotropy!==void 0?u.anisotropy:1,u.colorSpace!==void 0&&(o.colorSpace=u.colorSpace),u.flipY!==void 0&&(o.flipY=u.flipY),u.format!==void 0&&(o.format=u.format),u.type!==void 0&&(o.type=u.type),u.mipmaps!==void 0&&(o.mipmaps=u.mipmaps,o.minFilter=qB),u.mipmapCount===1&&(o.minFilter=nT),u.generateMipmaps!==void 0&&(o.generateMipmaps=u.generateMipmaps),o.needsUpdate=!0,n&&n(o,u)},i,s),o}}let AJ=class extends Hc{constructor(e){super(e)}load(e,n,i,s){const a=new rh,o=new mpe(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(l){a.image=l,a.needsUpdate=!0,n!==void 0&&n(a)},i,s),a}},xM=class extends Os{constructor(e,n=1){super(),this.isLight=!0,this.type="Light",this.color=new Ni(e),this.intensity=n}dispose(){}copy(e,n){return super.copy(e,n),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const n=super.toJSON(e);return n.object.color=this.color.getHex(),n.object.intensity=this.intensity,this.groundColor!==void 0&&(n.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(n.object.distance=this.distance),this.angle!==void 0&&(n.object.angle=this.angle),this.decay!==void 0&&(n.object.decay=this.decay),this.penumbra!==void 0&&(n.object.penumbra=this.penumbra),this.shadow!==void 0&&(n.object.shadow=this.shadow.toJSON()),n}};const sN=new mn,L6=new Oe,F6=new Oe;let nj=class{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new ki(512,512),this.map=null,this.mapPass=null,this.matrix=new mn,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new kfe,this._frameExtents=new ki(1,1),this._viewportCount=1,this._viewports=[new Ha(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const n=this.camera,i=this.matrix;L6.setFromMatrixPosition(e.matrixWorld),n.position.copy(L6),F6.setFromMatrixPosition(e.target.matrixWorld),n.lookAt(F6),n.updateMatrixWorld(),sN.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(sN),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(sN)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}},ype=class extends nj{constructor(){super(new $x(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const n=this.camera,i=zx*2*e.angle*this.focus,s=this.mapSize.width/this.mapSize.height,a=e.distance||n.far;(i!==n.fov||s!==n.aspect||a!==n.far)&&(n.fov=i,n.aspect=s,n.far=a,n.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}},CJ=class extends xM{constructor(e,n,i=0,s=Math.PI/3,a=0,o=2){super(e,n),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Os.DEFAULT_UP),this.updateMatrix(),this.target=new Os,this.distance=i,this.angle=s,this.penumbra=a,this.decay=o,this.map=null,this.shadow=new ype}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,n){return super.copy(e,n),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}};const B6=new mn,iv=new Oe,aN=new Oe;let vpe=class extends nj{constructor(){super(new $x(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new ki(4,2),this._viewportCount=6,this._viewports=[new Ha(2,1,1,1),new Ha(0,1,1,1),new Ha(3,1,1,1),new Ha(1,1,1,1),new Ha(3,0,1,1),new Ha(1,0,1,1)],this._cubeDirections=[new Oe(1,0,0),new Oe(-1,0,0),new Oe(0,0,1),new Oe(0,0,-1),new Oe(0,1,0),new Oe(0,-1,0)],this._cubeUps=[new Oe(0,1,0),new Oe(0,1,0),new Oe(0,1,0),new Oe(0,1,0),new Oe(0,0,1),new Oe(0,0,-1)]}updateMatrices(e,n=0){const i=this.camera,s=this.matrix,a=e.distance||i.far;a!==i.far&&(i.far=a,i.updateProjectionMatrix()),iv.setFromMatrixPosition(e.matrixWorld),i.position.copy(iv),aN.copy(i.position),aN.add(this._cubeDirections[n]),i.up.copy(this._cubeUps[n]),i.lookAt(aN),i.updateMatrixWorld(),s.makeTranslation(-iv.x,-iv.y,-iv.z),B6.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(B6)}},QL=class extends xM{constructor(e,n,i=0,s=2){super(e,n),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=s,this.shadow=new vpe}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,n){return super.copy(e,n),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}},xpe=class extends nj{constructor(){super(new QB(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}},NJ=class extends xM{constructor(e,n){super(e,n),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Os.DEFAULT_UP),this.updateMatrix(),this.target=new Os,this.shadow=new xpe}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}},PJ=class extends xM{constructor(e,n){super(e,n),this.isAmbientLight=!0,this.type="AmbientLight"}};class RJ{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let n="";for(let i=0,s=e.length;i<s;i++)n+=String.fromCharCode(e[i]);try{return decodeURIComponent(escape(n))}catch{return n}}static extractUrlBase(e){const n=e.lastIndexOf("/");return n===-1?"./":e.slice(0,n+1)}static resolveURL(e,n){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(n)&&/^\//.test(e)&&(n=n.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:n+e)}}const rj="\\[\\]\\.:\\/",bpe=new RegExp("["+rj+"]","g"),ij="[^"+rj+"]",_pe="[^"+rj.replace("\\.","")+"]",wpe=/((?:WC+[\/:])*)/.source.replace("WC",ij),Spe=/(WCOD+)?/.source.replace("WCOD",_pe),Tpe=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",ij),Epe=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",ij),Mpe=new RegExp("^"+wpe+Spe+Tpe+Epe+"$"),Ape=["material","materials","bones","map"];class Cpe{constructor(e,n,i){const s=i||Tr.parseTrackName(n);this._targetGroup=e,this._bindings=e.subscribe_(n,s)}getValue(e,n){this.bind();const i=this._targetGroup.nCachedObjects_,s=this._bindings[i];s!==void 0&&s.getValue(e,n)}setValue(e,n){const i=this._bindings;for(let s=this._targetGroup.nCachedObjects_,a=i.length;s!==a;++s)i[s].setValue(e,n)}bind(){const e=this._bindings;for(let n=this._targetGroup.nCachedObjects_,i=e.length;n!==i;++n)e[n].bind()}unbind(){const e=this._bindings;for(let n=this._targetGroup.nCachedObjects_,i=e.length;n!==i;++n)e[n].unbind()}}class Tr{constructor(e,n,i){this.path=n,this.parsedPath=i||Tr.parseTrackName(n),this.node=Tr.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,n,i){return e&&e.isAnimationObjectGroup?new Tr.Composite(e,n,i):new Tr(e,n,i)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(bpe,"")}static parseTrackName(e){const n=Mpe.exec(e);if(n===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const i={nodeName:n[2],objectName:n[3],objectIndex:n[4],propertyName:n[5],propertyIndex:n[6]},s=i.nodeName&&i.nodeName.lastIndexOf(".");if(s!==void 0&&s!==-1){const a=i.nodeName.substring(s+1);Ape.indexOf(a)!==-1&&(i.nodeName=i.nodeName.substring(0,s),i.objectName=a)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}static findNode(e,n){if(n===void 0||n===""||n==="."||n===-1||n===e.name||n===e.uuid)return e;if(e.skeleton){const i=e.skeleton.getBoneByName(n);if(i!==void 0)return i}if(e.children){const i=function(a){for(let o=0;o<a.length;o++){const l=a[o];if(l.name===n||l.uuid===n)return l;const c=i(l.children);if(c)return c}return null},s=i(e.children);if(s)return s}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,n){e[n]=this.targetObject[this.propertyName]}_getValue_array(e,n){const i=this.resolvedProperty;for(let s=0,a=i.length;s!==a;++s)e[n++]=i[s]}_getValue_arrayElement(e,n){e[n]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,n){this.resolvedProperty.toArray(e,n)}_setValue_direct(e,n){this.targetObject[this.propertyName]=e[n]}_setValue_direct_setNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,n){const i=this.resolvedProperty;for(let s=0,a=i.length;s!==a;++s)i[s]=e[n++]}_setValue_array_setNeedsUpdate(e,n){const i=this.resolvedProperty;for(let s=0,a=i.length;s!==a;++s)i[s]=e[n++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,n){const i=this.resolvedProperty;for(let s=0,a=i.length;s!==a;++s)i[s]=e[n++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,n){this.resolvedProperty[this.propertyIndex]=e[n]}_setValue_arrayElement_setNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,n){this.resolvedProperty.fromArray(e,n)}_setValue_fromArray_setNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,n){this.bind(),this.getValue(e,n)}_setValue_unbound(e,n){this.bind(),this.setValue(e,n)}bind(){let e=this.node;const n=this.parsedPath,i=n.objectName,s=n.propertyName;let a=n.propertyIndex;if(e||(e=Tr.findNode(this.rootNode,n.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(i){let u=n.objectIndex;switch(i){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let h=0;h<e.length;h++)if(e[h].name===u){u=h;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[i]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[i]}if(u!==void 0){if(e[u]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[u]}}const o=e[s];if(o===void 0){const u=n.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+u+"."+s+" but it wasn't found.",e);return}let l=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?l=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(l=this.Versioning.MatrixWorldNeedsUpdate);let c=this.BindingType.Direct;if(a!==void 0){if(s==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[a]!==void 0&&(a=e.morphTargetDictionary[a])}c=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=a}else o.fromArray!==void 0&&o.toArray!==void 0?(c=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(c=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=s;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][l]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Tr.Composite=Cpe;Tr.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Tr.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Tr.prototype.GetterByBindingType=[Tr.prototype._getValue_direct,Tr.prototype._getValue_array,Tr.prototype._getValue_arrayElement,Tr.prototype._getValue_toArray];Tr.prototype.SetterByBindingTypeAndVersioning=[[Tr.prototype._setValue_direct,Tr.prototype._setValue_direct_setNeedsUpdate,Tr.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Tr.prototype._setValue_array,Tr.prototype._setValue_array_setNeedsUpdate,Tr.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Tr.prototype._setValue_arrayElement,Tr.prototype._setValue_arrayElement_setNeedsUpdate,Tr.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Tr.prototype._setValue_fromArray,Tr.prototype._setValue_fromArray_setNeedsUpdate,Tr.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:rJ}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=rJ);class j6 extends gpe{constructor(e){super(e)}parse(e){function n(j){switch(j.image_type){case f:case v:if(j.colormap_length>256||j.colormap_size!==24||j.colormap_type!==1)throw new Error("THREE.TGALoader: Invalid type colormap data for indexed type.");break;case p:case g:case x:case _:if(j.colormap_type)throw new Error("THREE.TGALoader: Invalid type colormap data for colormap type.");break;case d:throw new Error("THREE.TGALoader: No data.");default:throw new Error("THREE.TGALoader: Invalid type "+j.image_type)}if(j.width<=0||j.height<=0)throw new Error("THREE.TGALoader: Invalid image size.");if(j.pixel_size!==8&&j.pixel_size!==16&&j.pixel_size!==24&&j.pixel_size!==32)throw new Error("THREE.TGALoader: Invalid pixel size "+j.pixel_size)}function i(j,$,z,Z,se){let q,ue;const be=z.pixel_size>>3,ee=z.width*z.height*be;if($&&(ue=se.subarray(Z,Z+=z.colormap_length*(z.colormap_size>>3))),j){q=new Uint8Array(ee);let le,oe,fe,Se=0;const we=new Uint8Array(be);for(;Se<ee;)if(le=se[Z++],oe=(le&127)+1,le&128){for(fe=0;fe<be;++fe)we[fe]=se[Z++];for(fe=0;fe<oe;++fe)q.set(we,Se+fe*be);Se+=be*oe}else{for(oe*=be,fe=0;fe<oe;++fe)q[Se+fe]=se[Z++];Se+=oe}}else q=se.subarray(Z,Z+=$?z.width*z.height:ee);return{pixel_data:q,palettes:ue}}function s(j,$,z,Z,se,q,ue,be,ee){const le=ee;let oe,fe=0,Se,we;const Le=O.width;for(we=$;we!==Z;we+=z)for(Se=se;Se!==ue;Se+=q,fe++)oe=be[fe],j[(Se+Le*we)*4+3]=255,j[(Se+Le*we)*4+2]=le[oe*3+0],j[(Se+Le*we)*4+1]=le[oe*3+1],j[(Se+Le*we)*4+0]=le[oe*3+2];return j}function a(j,$,z,Z,se,q,ue,be){let ee,le=0,oe,fe;const Se=O.width;for(fe=$;fe!==Z;fe+=z)for(oe=se;oe!==ue;oe+=q,le+=2)ee=be[le+0]+(be[le+1]<<8),j[(oe+Se*fe)*4+0]=(ee&31744)>>7,j[(oe+Se*fe)*4+1]=(ee&992)>>2,j[(oe+Se*fe)*4+2]=(ee&31)<<3,j[(oe+Se*fe)*4+3]=ee&32768?0:255;return j}function o(j,$,z,Z,se,q,ue,be){let ee=0,le,oe;const fe=O.width;for(oe=$;oe!==Z;oe+=z)for(le=se;le!==ue;le+=q,ee+=3)j[(le+fe*oe)*4+3]=255,j[(le+fe*oe)*4+2]=be[ee+0],j[(le+fe*oe)*4+1]=be[ee+1],j[(le+fe*oe)*4+0]=be[ee+2];return j}function l(j,$,z,Z,se,q,ue,be){let ee=0,le,oe;const fe=O.width;for(oe=$;oe!==Z;oe+=z)for(le=se;le!==ue;le+=q,ee+=4)j[(le+fe*oe)*4+2]=be[ee+0],j[(le+fe*oe)*4+1]=be[ee+1],j[(le+fe*oe)*4+0]=be[ee+2],j[(le+fe*oe)*4+3]=be[ee+3];return j}function c(j,$,z,Z,se,q,ue,be){let ee,le=0,oe,fe;const Se=O.width;for(fe=$;fe!==Z;fe+=z)for(oe=se;oe!==ue;oe+=q,le++)ee=be[le],j[(oe+Se*fe)*4+0]=ee,j[(oe+Se*fe)*4+1]=ee,j[(oe+Se*fe)*4+2]=ee,j[(oe+Se*fe)*4+3]=255;return j}function u(j,$,z,Z,se,q,ue,be){let ee=0,le,oe;const fe=O.width;for(oe=$;oe!==Z;oe+=z)for(le=se;le!==ue;le+=q,ee+=2)j[(le+fe*oe)*4+0]=be[ee+0],j[(le+fe*oe)*4+1]=be[ee+0],j[(le+fe*oe)*4+2]=be[ee+0],j[(le+fe*oe)*4+3]=be[ee+1];return j}function h(j,$,z,Z,se){let q,ue,be,ee,le,oe;switch((O.flags&E)>>S){default:case C:q=0,be=1,le=$,ue=0,ee=1,oe=z;break;case T:q=0,be=1,le=$,ue=z-1,ee=-1,oe=-1;break;case A:q=$-1,be=-1,le=-1,ue=0,ee=1,oe=z;break;case M:q=$-1,be=-1,le=-1,ue=z-1,ee=-1,oe=-1;break}if(U)switch(O.pixel_size){case 8:c(j,ue,ee,oe,q,be,le,Z);break;case 16:u(j,ue,ee,oe,q,be,le,Z);break;default:throw new Error("THREE.TGALoader: Format not supported.")}else switch(O.pixel_size){case 8:s(j,ue,ee,oe,q,be,le,Z,se);break;case 16:a(j,ue,ee,oe,q,be,le,Z);break;case 24:o(j,ue,ee,oe,q,be,le,Z);break;case 32:l(j,ue,ee,oe,q,be,le,Z);break;default:throw new Error("THREE.TGALoader: Format not supported.")}return j}const d=0,f=1,p=2,g=3,v=9,x=10,_=11,E=48,S=4,T=0,M=1,C=2,A=3;if(e.length<19)throw new Error("THREE.TGALoader: Not enough data to contain header.");let P=0;const R=new Uint8Array(e),O={id_length:R[P++],colormap_type:R[P++],image_type:R[P++],colormap_index:R[P++]|R[P++]<<8,colormap_length:R[P++]|R[P++]<<8,colormap_size:R[P++],origin:[R[P++]|R[P++]<<8,R[P++]|R[P++]<<8],width:R[P++]|R[P++]<<8,height:R[P++]|R[P++]<<8,pixel_size:R[P++],flags:R[P++]};if(n(O),O.id_length+P>e.length)throw new Error("THREE.TGALoader: No data.");P+=O.id_length;let D=!1,F=!1,U=!1;switch(O.image_type){case v:D=!0,F=!0;break;case f:F=!0;break;case x:D=!0;break;case p:break;case _:D=!0,U=!0;break;case g:U=!0;break}const B=new Uint8Array(O.width*O.height*4),W=i(D,F,O,P,R);return h(B,O.width,O.height,W.pixel_data,W.palettes),{data:B,width:O.width,height:O.height,flipY:!0,generateMipmaps:!0,minFilter:qB}}}class Npe extends Hc{load(e,n,i,s){const a=this,o=a.path===""?RJ.extractUrlBase(e):a.path,l=new tj(a.manager);l.setPath(a.path),l.setRequestHeader(a.requestHeader),l.setWithCredentials(a.withCredentials),l.load(e,function(c){try{n(a.parse(c,o))}catch(u){s?s(u):console.error(u),a.manager.itemError(e)}},i,s)}parse(e,n){function i(H,V){const ie=[],J=H.childNodes;for(let ae=0,De=J.length;ae<De;ae++){const Ge=J[ae];Ge.nodeName===V&&ie.push(Ge)}return ie}function s(H){if(H.length===0)return[];const V=H.trim().split(/\s+/),ie=new Array(V.length);for(let J=0,ae=V.length;J<ae;J++)ie[J]=V[J];return ie}function a(H){if(H.length===0)return[];const V=H.trim().split(/\s+/),ie=new Array(V.length);for(let J=0,ae=V.length;J<ae;J++)ie[J]=parseFloat(V[J]);return ie}function o(H){if(H.length===0)return[];const V=H.trim().split(/\s+/),ie=new Array(V.length);for(let J=0,ae=V.length;J<ae;J++)ie[J]=parseInt(V[J]);return ie}function l(H){return H.substring(1)}function c(){return"three_default_"+ma++}function u(H){return Object.keys(H).length===0}function h(H){return{unit:d(i(H,"unit")[0]),upAxis:f(i(H,"up_axis")[0])}}function d(H){return H!==void 0&&H.hasAttribute("meter")===!0?parseFloat(H.getAttribute("meter")):1}function f(H){return H!==void 0?H.textContent:"Y_UP"}function p(H,V,ie,J){const ae=i(H,V)[0];if(ae!==void 0){const De=i(ae,ie);for(let Ge=0;Ge<De.length;Ge++)J(De[Ge])}}function g(H,V){for(const ie in H){const J=H[ie];J.build=V(H[ie])}}function v(H,V){return H.build!==void 0||(H.build=V(H)),H.build}function x(H){const V={sources:{},samplers:{},channels:{}};let ie=!1;for(let J=0,ae=H.childNodes.length;J<ae;J++){const De=H.childNodes[J];if(De.nodeType!==1)continue;let Ge;switch(De.nodeName){case"source":Ge=De.getAttribute("id"),V.sources[Ge]=Ue(De);break;case"sampler":Ge=De.getAttribute("id"),V.samplers[Ge]=_(De);break;case"channel":Ge=De.getAttribute("target"),V.channels[Ge]=E(De);break;case"animation":x(De),ie=!0;break;default:console.log(De)}}ie===!1&&(gn.animations[H.getAttribute("id")||Zi.generateUUID()]=V)}function _(H){const V={inputs:{}};for(let ie=0,J=H.childNodes.length;ie<J;ie++){const ae=H.childNodes[ie];if(ae.nodeType===1)switch(ae.nodeName){case"input":const De=l(ae.getAttribute("source")),Ge=ae.getAttribute("semantic");V.inputs[Ge]=De;break}}return V}function E(H){const V={};let J=H.getAttribute("target").split("/");const ae=J.shift();let De=J.shift();const Ge=De.indexOf("(")!==-1,Nt=De.indexOf(".")!==-1;if(Nt)J=De.split("."),De=J.shift(),V.member=J.shift();else if(Ge){const yt=De.split("(");De=yt.shift();for(let Ct=0;Ct<yt.length;Ct++)yt[Ct]=parseInt(yt[Ct].replace(/\)/,""));V.indices=yt}return V.id=ae,V.sid=De,V.arraySyntax=Ge,V.memberSyntax=Nt,V.sampler=l(H.getAttribute("source")),V}function S(H){const V=[],ie=H.channels,J=H.samplers,ae=H.sources;for(const De in ie)if(ie.hasOwnProperty(De)){const Ge=ie[De],Nt=J[Ge.sampler],yt=Nt.inputs.INPUT,Ct=Nt.inputs.OUTPUT,Lt=ae[yt],tt=ae[Ct],Ht=M(Ge,Lt,tt);O(Ht,V)}return V}function T(H){return v(gn.animations[H],S)}function M(H,V,ie){const J=gn.nodes[H.id],ae=Un(J.id),De=J.transforms[H.sid],Ge=J.matrix.clone().transpose();let Nt,yt,Ct,Lt,tt,Ht;const It={};switch(De){case"matrix":for(Ct=0,Lt=V.array.length;Ct<Lt;Ct++)if(Nt=V.array[Ct],yt=Ct*ie.stride,It[Nt]===void 0&&(It[Nt]={}),H.arraySyntax===!0){const Ar=ie.array[yt],gr=H.indices[0]+4*H.indices[1];It[Nt][gr]=Ar}else for(tt=0,Ht=ie.stride;tt<Ht;tt++)It[Nt][tt]=ie.array[yt+tt];break;case"translate":console.warn('THREE.ColladaLoader: Animation transform type "%s" not yet implemented.',De);break;case"rotate":console.warn('THREE.ColladaLoader: Animation transform type "%s" not yet implemented.',De);break;case"scale":console.warn('THREE.ColladaLoader: Animation transform type "%s" not yet implemented.',De);break}const un=C(It,Ge);return{name:ae.uuid,keyframes:un}}function C(H,V){const ie=[];for(const ae in H)ie.push({time:parseFloat(ae),value:H[ae]});ie.sort(J);for(let ae=0;ae<16;ae++)D(ie,ae,V.elements[ae]);return ie;function J(ae,De){return ae.time-De.time}}const A=new Oe,P=new Oe,R=new Sa;function O(H,V){const ie=H.keyframes,J=H.name,ae=[],De=[],Ge=[],Nt=[];for(let yt=0,Ct=ie.length;yt<Ct;yt++){const Lt=ie[yt],tt=Lt.time,Ht=Lt.value;Ee.fromArray(Ht).transpose(),Ee.decompose(A,R,P),ae.push(tt),De.push(A.x,A.y,A.z),Ge.push(R.x,R.y,R.z,R.w),Nt.push(P.x,P.y,P.z)}return De.length>0&&V.push(new xp(J+".position",ae,De)),Ge.length>0&&V.push(new Id(J+".quaternion",ae,Ge)),Nt.length>0&&V.push(new xp(J+".scale",ae,Nt)),V}function D(H,V,ie){let J,ae=!0,De,Ge;for(De=0,Ge=H.length;De<Ge;De++)J=H[De],J.value[V]===void 0?J.value[V]=null:ae=!1;if(ae===!0)for(De=0,Ge=H.length;De<Ge;De++)J=H[De],J.value[V]=ie;else F(H,V)}function F(H,V){let ie,J;for(let ae=0,De=H.length;ae<De;ae++){const Ge=H[ae];if(Ge.value[V]===null){if(ie=U(H,ae,V),J=B(H,ae,V),ie===null){Ge.value[V]=J.value[V];continue}if(J===null){Ge.value[V]=ie.value[V];continue}W(Ge,ie,J,V)}}}function U(H,V,ie){for(;V>=0;){const J=H[V];if(J.value[ie]!==null)return J;V--}return null}function B(H,V,ie){for(;V<H.length;){const J=H[V];if(J.value[ie]!==null)return J;V++}return null}function W(H,V,ie,J){if(ie.time-V.time===0){H.value[J]=V.value[J];return}H.value[J]=(H.time-V.time)*(ie.value[J]-V.value[J])/(ie.time-V.time)+V.value[J]}function j(H){const V={name:H.getAttribute("id")||"default",start:parseFloat(H.getAttribute("start")||0),end:parseFloat(H.getAttribute("end")||0),animations:[]};for(let ie=0,J=H.childNodes.length;ie<J;ie++){const ae=H.childNodes[ie];if(ae.nodeType===1)switch(ae.nodeName){case"instance_animation":V.animations.push(l(ae.getAttribute("url")));break}}gn.clips[H.getAttribute("id")]=V}function $(H){const V=[],ie=H.name,J=H.end-H.start||-1,ae=H.animations;for(let De=0,Ge=ae.length;De<Ge;De++){const Nt=T(ae[De]);for(let yt=0,Ct=Nt.length;yt<Ct;yt++)V.push(Nt[yt])}return new ZL(ie,J,V)}function z(H){return v(gn.clips[H],$)}function Z(H){const V={};for(let ie=0,J=H.childNodes.length;ie<J;ie++){const ae=H.childNodes[ie];if(ae.nodeType===1)switch(ae.nodeName){case"skin":V.id=l(ae.getAttribute("source")),V.skin=se(ae);break;case"morph":V.id=l(ae.getAttribute("source")),console.warn("THREE.ColladaLoader: Morph target animation not supported yet.");break}}gn.controllers[H.getAttribute("id")]=V}function se(H){const V={sources:{}};for(let ie=0,J=H.childNodes.length;ie<J;ie++){const ae=H.childNodes[ie];if(ae.nodeType===1)switch(ae.nodeName){case"bind_shape_matrix":V.bindShapeMatrix=a(ae.textContent);break;case"source":const De=ae.getAttribute("id");V.sources[De]=Ue(ae);break;case"joints":V.joints=q(ae);break;case"vertex_weights":V.vertexWeights=ue(ae);break}}return V}function q(H){const V={inputs:{}};for(let ie=0,J=H.childNodes.length;ie<J;ie++){const ae=H.childNodes[ie];if(ae.nodeType===1)switch(ae.nodeName){case"input":const De=ae.getAttribute("semantic"),Ge=l(ae.getAttribute("source"));V.inputs[De]=Ge;break}}return V}function ue(H){const V={inputs:{}};for(let ie=0,J=H.childNodes.length;ie<J;ie++){const ae=H.childNodes[ie];if(ae.nodeType===1)switch(ae.nodeName){case"input":const De=ae.getAttribute("semantic"),Ge=l(ae.getAttribute("source")),Nt=parseInt(ae.getAttribute("offset"));V.inputs[De]={id:Ge,offset:Nt};break;case"vcount":V.vcount=o(ae.textContent);break;case"v":V.v=o(ae.textContent);break}}return V}function be(H){const V={id:H.id},ie=gn.geometries[V.id];return H.skin!==void 0&&(V.skin=ee(H.skin),ie.sources.skinIndices=V.skin.indices,ie.sources.skinWeights=V.skin.weights),V}function ee(H){const ie={joints:[],indices:{array:[],stride:4},weights:{array:[],stride:4}},J=H.sources,ae=H.vertexWeights,De=ae.vcount,Ge=ae.v,Nt=ae.inputs.JOINT.offset,yt=ae.inputs.WEIGHT.offset,Ct=H.sources[H.joints.inputs.JOINT],Lt=H.sources[H.joints.inputs.INV_BIND_MATRIX],tt=J[ae.inputs.WEIGHT.id].array;let Ht=0,It,un,sn;for(It=0,sn=De.length;It<sn;It++){const gr=De[It],or=[];for(un=0;un<gr;un++){const Qn=Ge[Ht+Nt],Ls=Ge[Ht+yt],xi=tt[Ls];or.push({index:Qn,weight:xi}),Ht+=2}for(or.sort(Ar),un=0;un<4;un++){const Qn=or[un];Qn!==void 0?(ie.indices.array.push(Qn.index),ie.weights.array.push(Qn.weight)):(ie.indices.array.push(0),ie.weights.array.push(0))}}for(H.bindShapeMatrix?ie.bindMatrix=new mn().fromArray(H.bindShapeMatrix).transpose():ie.bindMatrix=new mn().identity(),It=0,sn=Ct.array.length;It<sn;It++){const gr=Ct.array[It],or=new mn().fromArray(Lt.array,It*Lt.stride).transpose();ie.joints.push({name:gr,boneInverse:or})}return ie;function Ar(gr,or){return or.weight-gr.weight}}function le(H){return v(gn.controllers[H],be)}function oe(H){const V={init_from:i(H,"init_from")[0].textContent};gn.images[H.getAttribute("id")]=V}function fe(H){return H.build!==void 0?H.build:H.init_from}function Se(H){const V=gn.images[H];return V!==void 0?v(V,fe):(console.warn("THREE.ColladaLoader: Couldn't find image with ID:",H),null)}function we(H){const V={};for(let ie=0,J=H.childNodes.length;ie<J;ie++){const ae=H.childNodes[ie];if(ae.nodeType===1)switch(ae.nodeName){case"profile_COMMON":V.profile=Le(ae);break}}gn.effects[H.getAttribute("id")]=V}function Le(H){const V={surfaces:{},samplers:{}};for(let ie=0,J=H.childNodes.length;ie<J;ie++){const ae=H.childNodes[ie];if(ae.nodeType===1)switch(ae.nodeName){case"newparam":et(ae,V);break;case"technique":V.technique=me(ae);break;case"extra":V.extra=Ft(ae);break}}return V}function et(H,V){const ie=H.getAttribute("sid");for(let J=0,ae=H.childNodes.length;J<ae;J++){const De=H.childNodes[J];if(De.nodeType===1)switch(De.nodeName){case"surface":V.surfaces[ie]=Fe(De);break;case"sampler2D":V.samplers[ie]=Tt(De);break}}}function Fe(H){const V={};for(let ie=0,J=H.childNodes.length;ie<J;ie++){const ae=H.childNodes[ie];if(ae.nodeType===1)switch(ae.nodeName){case"init_from":V.init_from=ae.textContent;break}}return V}function Tt(H){const V={};for(let ie=0,J=H.childNodes.length;ie<J;ie++){const ae=H.childNodes[ie];if(ae.nodeType===1)switch(ae.nodeName){case"source":V.source=ae.textContent;break}}return V}function me(H){const V={};for(let ie=0,J=H.childNodes.length;ie<J;ie++){const ae=H.childNodes[ie];if(ae.nodeType===1)switch(ae.nodeName){case"constant":case"lambert":case"blinn":case"phong":V.type=ae.nodeName,V.parameters=En(ae);break;case"extra":V.extra=Ft(ae);break}}return V}function En(H){const V={};for(let ie=0,J=H.childNodes.length;ie<J;ie++){const ae=H.childNodes[ie];if(ae.nodeType===1)switch(ae.nodeName){case"emission":case"diffuse":case"specular":case"bump":case"ambient":case"shininess":case"transparency":V[ae.nodeName]=Wt(ae);break;case"transparent":V[ae.nodeName]={opaque:ae.hasAttribute("opaque")?ae.getAttribute("opaque"):"A_ONE",data:Wt(ae)};break}}return V}function Wt(H){const V={};for(let ie=0,J=H.childNodes.length;ie<J;ie++){const ae=H.childNodes[ie];if(ae.nodeType===1)switch(ae.nodeName){case"color":V[ae.nodeName]=a(ae.textContent);break;case"float":V[ae.nodeName]=parseFloat(ae.textContent);break;case"texture":V[ae.nodeName]={id:ae.getAttribute("texture"),extra:Jt(ae)};break}}return V}function Jt(H){const V={technique:{}};for(let ie=0,J=H.childNodes.length;ie<J;ie++){const ae=H.childNodes[ie];if(ae.nodeType===1)switch(ae.nodeName){case"extra":zt(ae,V);break}}return V}function zt(H,V){for(let ie=0,J=H.childNodes.length;ie<J;ie++){const ae=H.childNodes[ie];if(ae.nodeType===1)switch(ae.nodeName){case"technique":Yn(ae,V);break}}}function Yn(H,V){for(let ie=0,J=H.childNodes.length;ie<J;ie++){const ae=H.childNodes[ie];if(ae.nodeType===1)switch(ae.nodeName){case"repeatU":case"repeatV":case"offsetU":case"offsetV":V.technique[ae.nodeName]=parseFloat(ae.textContent);break;case"wrapU":case"wrapV":ae.textContent.toUpperCase()==="TRUE"?V.technique[ae.nodeName]=1:ae.textContent.toUpperCase()==="FALSE"?V.technique[ae.nodeName]=0:V.technique[ae.nodeName]=parseInt(ae.textContent);break;case"bump":V[ae.nodeName]=Q(ae);break}}}function Ft(H){const V={};for(let ie=0,J=H.childNodes.length;ie<J;ie++){const ae=H.childNodes[ie];if(ae.nodeType===1)switch(ae.nodeName){case"technique":V.technique=he(ae);break}}return V}function he(H){const V={};for(let ie=0,J=H.childNodes.length;ie<J;ie++){const ae=H.childNodes[ie];if(ae.nodeType===1)switch(ae.nodeName){case"double_sided":V[ae.nodeName]=parseInt(ae.textContent);break;case"bump":V[ae.nodeName]=Q(ae);break}}return V}function Q(H){const V={};for(let ie=0,J=H.childNodes.length;ie<J;ie++){const ae=H.childNodes[ie];if(ae.nodeType===1)switch(ae.nodeName){case"texture":V[ae.nodeName]={id:ae.getAttribute("texture"),texcoord:ae.getAttribute("texcoord"),extra:Jt(ae)};break}}return V}function Re(H){return H}function Ze(H){return v(gn.effects[H],Re)}function Je(H){const V={name:H.getAttribute("name")};for(let ie=0,J=H.childNodes.length;ie<J;ie++){const ae=H.childNodes[ie];if(ae.nodeType===1)switch(ae.nodeName){case"instance_effect":V.url=l(ae.getAttribute("url"));break}}gn.materials[H.getAttribute("id")]=V}function Ke(H){let V,ie=H.slice((H.lastIndexOf(".")-1>>>0)+2);switch(ie=ie.toLowerCase(),ie){case"tga":V=ci;break;default:V=Li}return V}function Kt(H){const V=Ze(H.url),ie=V.profile.technique;let J;switch(ie.type){case"phong":case"blinn":J=new fx;break;case"lambert":J=new TJ;break;default:J=new XL;break}J.name=H.name||"";function ae(yt,Ct=null){const Lt=V.profile.samplers[yt.id];let tt=null;if(Lt!==void 0){const Ht=V.profile.surfaces[Lt.source];tt=Se(Ht.init_from)}else console.warn("THREE.ColladaLoader: Undefined sampler. Access image directly (see #12530)."),tt=Se(yt.id);if(tt!==null){const Ht=Ke(tt);if(Ht!==void 0){const It=Ht.load(tt),un=yt.extra;if(un!==void 0&&un.technique!==void 0&&u(un.technique)===!1){const sn=un.technique;It.wrapS=sn.wrapU?Sd:Cc,It.wrapT=sn.wrapV?Sd:Cc,It.offset.set(sn.offsetU||0,sn.offsetV||0),It.repeat.set(sn.repeatU||1,sn.repeatV||1)}else It.wrapS=Sd,It.wrapT=Sd;return Ct!==null&&(It.colorSpace=Ct),It}else return console.warn("THREE.ColladaLoader: Loader for texture %s not found.",tt),null}else return console.warn("THREE.ColladaLoader: Couldn't create texture with ID:",yt.id),null}const De=ie.parameters;for(const yt in De){const Ct=De[yt];switch(yt){case"diffuse":Ct.color&&J.color.fromArray(Ct.color),Ct.texture&&(J.map=ae(Ct.texture,Ta));break;case"specular":Ct.color&&J.specular&&J.specular.fromArray(Ct.color),Ct.texture&&(J.specularMap=ae(Ct.texture));break;case"bump":Ct.texture&&(J.normalMap=ae(Ct.texture));break;case"ambient":Ct.texture&&(J.lightMap=ae(Ct.texture,Ta));break;case"shininess":Ct.float&&J.shininess&&(J.shininess=Ct.float);break;case"emission":Ct.color&&J.emissive&&J.emissive.fromArray(Ct.color),Ct.texture&&(J.emissiveMap=ae(Ct.texture,Ta));break}}J.color.convertSRGBToLinear(),J.specular&&J.specular.convertSRGBToLinear(),J.emissive&&J.emissive.convertSRGBToLinear();let Ge=De.transparent,Nt=De.transparency;if(Nt===void 0&&Ge&&(Nt={float:1}),Ge===void 0&&Nt&&(Ge={opaque:"A_ONE",data:{color:[1,1,1,1]}}),Ge&&Nt)if(Ge.data.texture)J.transparent=!0;else{const yt=Ge.data.color;switch(Ge.opaque){case"A_ONE":J.opacity=yt[3]*Nt.float;break;case"RGB_ZERO":J.opacity=1-yt[0]*Nt.float;break;case"A_ZERO":J.opacity=1-yt[3]*Nt.float;break;case"RGB_ONE":J.opacity=yt[0]*Nt.float;break;default:console.warn('THREE.ColladaLoader: Invalid opaque type "%s" of transparent tag.',Ge.opaque)}J.opacity<1&&(J.transparent=!0)}if(ie.extra!==void 0&&ie.extra.technique!==void 0){const yt=ie.extra.technique;for(const Ct in yt){const Lt=yt[Ct];switch(Ct){case"double_sided":J.side=Lt===1?zde:MT;break;case"bump":J.normalMap=ae(Lt.texture),J.normalScale=new ki(1,1);break}}}return J}function Et(H){return v(gn.materials[H],Kt)}function Dt(H){const V={name:H.getAttribute("name")};for(let ie=0,J=H.childNodes.length;ie<J;ie++){const ae=H.childNodes[ie];if(ae.nodeType===1)switch(ae.nodeName){case"optics":V.optics=Vn(ae);break}}gn.cameras[H.getAttribute("id")]=V}function Vn(H){for(let V=0;V<H.childNodes.length;V++){const ie=H.childNodes[V];switch(ie.nodeName){case"technique_common":return at(ie)}}return{}}function at(H){const V={};for(let ie=0;ie<H.childNodes.length;ie++){const J=H.childNodes[ie];switch(J.nodeName){case"perspective":case"orthographic":V.technique=J.nodeName,V.parameters=$t(J);break}}return V}function $t(H){const V={};for(let ie=0;ie<H.childNodes.length;ie++){const J=H.childNodes[ie];switch(J.nodeName){case"xfov":case"yfov":case"xmag":case"ymag":case"znear":case"zfar":case"aspect_ratio":V[J.nodeName]=parseFloat(J.textContent);break}}return V}function fn(H){let V;switch(H.optics.technique){case"perspective":V=new $x(H.optics.parameters.yfov,H.optics.parameters.aspect_ratio,H.optics.parameters.znear,H.optics.parameters.zfar);break;case"orthographic":let ie=H.optics.parameters.ymag,J=H.optics.parameters.xmag;const ae=H.optics.parameters.aspect_ratio;J=J===void 0?ie*ae:J,ie=ie===void 0?J/ae:ie,J*=.5,ie*=.5,V=new QB(-J,J,ie,-ie,H.optics.parameters.znear,H.optics.parameters.zfar);break;default:V=new $x;break}return V.name=H.name||"",V}function vn(H){const V=gn.cameras[H];return V!==void 0?v(V,fn):(console.warn("THREE.ColladaLoader: Couldn't find camera with ID:",H),null)}function Bt(H){let V={};for(let ie=0,J=H.childNodes.length;ie<J;ie++){const ae=H.childNodes[ie];if(ae.nodeType===1)switch(ae.nodeName){case"technique_common":V=Hn(ae);break}}gn.lights[H.getAttribute("id")]=V}function Hn(H){const V={};for(let ie=0,J=H.childNodes.length;ie<J;ie++){const ae=H.childNodes[ie];if(ae.nodeType===1)switch(ae.nodeName){case"directional":case"point":case"spot":case"ambient":V.technique=ae.nodeName,V.parameters=Nn(ae)}}return V}function Nn(H){const V={};for(let ie=0,J=H.childNodes.length;ie<J;ie++){const ae=H.childNodes[ie];if(ae.nodeType===1)switch(ae.nodeName){case"color":const De=a(ae.textContent);V.color=new Ni().fromArray(De).convertSRGBToLinear();break;case"falloff_angle":V.falloffAngle=parseFloat(ae.textContent);break;case"quadratic_attenuation":const Ge=parseFloat(ae.textContent);V.distance=Ge?Math.sqrt(1/Ge):0;break}}return V}function hr(H){let V;switch(H.technique){case"directional":V=new NJ;break;case"point":V=new QL;break;case"spot":V=new CJ;break;case"ambient":V=new PJ;break}return H.parameters.color&&V.color.copy(H.parameters.color),H.parameters.distance&&(V.distance=H.parameters.distance),V}function Me(H){const V=gn.lights[H];return V!==void 0?v(V,hr):(console.warn("THREE.ColladaLoader: Couldn't find light with ID:",H),null)}function Mt(H){const V={name:H.getAttribute("name"),sources:{},vertices:{},primitives:[]},ie=i(H,"mesh")[0];if(ie!==void 0){for(let J=0;J<ie.childNodes.length;J++){const ae=ie.childNodes[J];if(ae.nodeType!==1)continue;const De=ae.getAttribute("id");switch(ae.nodeName){case"source":V.sources[De]=Ue(ae);break;case"vertices":V.vertices=Ye(ae);break;case"polygons":console.warn("THREE.ColladaLoader: Unsupported primitive type: ",ae.nodeName);break;case"lines":case"linestrips":case"polylist":case"triangles":V.primitives.push(Pt(ae));break;default:console.log(ae)}}gn.geometries[H.getAttribute("id")]=V}}function Ue(H){const V={array:[],stride:3};for(let ie=0;ie<H.childNodes.length;ie++){const J=H.childNodes[ie];if(J.nodeType===1)switch(J.nodeName){case"float_array":V.array=a(J.textContent);break;case"Name_array":V.array=s(J.textContent);break;case"technique_common":const ae=i(J,"accessor")[0];ae!==void 0&&(V.stride=parseInt(ae.getAttribute("stride")));break}}return V}function Ye(H){const V={};for(let ie=0;ie<H.childNodes.length;ie++){const J=H.childNodes[ie];J.nodeType===1&&(V[J.getAttribute("semantic")]=l(J.getAttribute("source")))}return V}function Pt(H){const V={type:H.nodeName,material:H.getAttribute("material"),count:parseInt(H.getAttribute("count")),inputs:{},stride:0,hasUV:!1};for(let ie=0,J=H.childNodes.length;ie<J;ie++){const ae=H.childNodes[ie];if(ae.nodeType===1)switch(ae.nodeName){case"input":const De=l(ae.getAttribute("source")),Ge=ae.getAttribute("semantic"),Nt=parseInt(ae.getAttribute("offset")),yt=parseInt(ae.getAttribute("set")),Ct=yt>0?Ge+yt:Ge;V.inputs[Ct]={id:De,offset:Nt},V.stride=Math.max(V.stride,Nt+1),Ge==="TEXCOORD"&&(V.hasUV=!0);break;case"vcount":V.vcount=o(ae.textContent);break;case"p":V.p=o(ae.textContent);break}}return V}function wt(H){const V={};for(let ie=0;ie<H.length;ie++){const J=H[ie];V[J.type]===void 0&&(V[J.type]=[]),V[J.type].push(J)}return V}function Pn(H){let V=0;for(let ie=0,J=H.length;ie<J;ie++)H[ie].hasUV===!0&&V++;V>0&&V<H.length&&(H.uvsNeedsFix=!0)}function Rr(H){const V={},ie=H.sources,J=H.vertices,ae=H.primitives;if(ae.length===0)return{};const De=wt(ae);for(const Ge in De){const Nt=De[Ge];Pn(Nt),V[Ge]=vi(Nt,ie,J)}return V}function vi(H,V,ie){const J={},ae={array:[],stride:0},De={array:[],stride:0},Ge={array:[],stride:0},Nt={array:[],stride:0},yt={array:[],stride:0},Ct={array:[],stride:4},Lt={array:[],stride:4},tt=new Lg,Ht=[];let It=0;for(let un=0;un<H.length;un++){const sn=H[un],Ar=sn.inputs;let gr=0;switch(sn.type){case"lines":case"linestrips":gr=sn.count*2;break;case"triangles":gr=sn.count*3;break;case"polylist":for(let or=0;or<sn.count;or++){const Qn=sn.vcount[or];switch(Qn){case 3:gr+=3;break;case 4:gr+=6;break;default:gr+=(Qn-2)*3;break}}break;default:console.warn("THREE.ColladaLoader: Unknow primitive type:",sn.type)}tt.addGroup(It,gr,un),It+=gr,sn.material&&Ht.push(sn.material);for(const or in Ar){const Qn=Ar[or];switch(or){case"VERTEX":for(const Ls in ie){const xi=ie[Ls];switch(Ls){case"POSITION":const Da=ae.array.length;if(Rn(sn,V[xi],Qn.offset,ae.array),ae.stride=V[xi].stride,V.skinWeights&&V.skinIndices&&(Rn(sn,V.skinIndices,Qn.offset,Ct.array),Rn(sn,V.skinWeights,Qn.offset,Lt.array)),sn.hasUV===!1&&H.uvsNeedsFix===!0){const w0=(ae.array.length-Da)/ae.stride;for(let Wp=0;Wp<w0;Wp++)Ge.array.push(0,0)}break;case"NORMAL":Rn(sn,V[xi],Qn.offset,De.array),De.stride=V[xi].stride;break;case"COLOR":Rn(sn,V[xi],Qn.offset,yt.array),yt.stride=V[xi].stride;break;case"TEXCOORD":Rn(sn,V[xi],Qn.offset,Ge.array),Ge.stride=V[xi].stride;break;case"TEXCOORD1":Rn(sn,V[xi],Qn.offset,Nt.array),Ge.stride=V[xi].stride;break;default:console.warn('THREE.ColladaLoader: Semantic "%s" not handled in geometry build process.',Ls)}}break;case"NORMAL":Rn(sn,V[Qn.id],Qn.offset,De.array),De.stride=V[Qn.id].stride;break;case"COLOR":Rn(sn,V[Qn.id],Qn.offset,yt.array,!0),yt.stride=V[Qn.id].stride;break;case"TEXCOORD":Rn(sn,V[Qn.id],Qn.offset,Ge.array),Ge.stride=V[Qn.id].stride;break;case"TEXCOORD1":Rn(sn,V[Qn.id],Qn.offset,Nt.array),Nt.stride=V[Qn.id].stride;break}}}return ae.array.length>0&&tt.setAttribute("position",new oa(ae.array,ae.stride)),De.array.length>0&&tt.setAttribute("normal",new oa(De.array,De.stride)),yt.array.length>0&&tt.setAttribute("color",new oa(yt.array,yt.stride)),Ge.array.length>0&&tt.setAttribute("uv",new oa(Ge.array,Ge.stride)),Nt.array.length>0&&tt.setAttribute("uv1",new oa(Nt.array,Nt.stride)),Ct.array.length>0&&tt.setAttribute("skinIndex",new oa(Ct.array,Ct.stride)),Lt.array.length>0&&tt.setAttribute("skinWeight",new oa(Lt.array,Lt.stride)),J.data=tt,J.type=H[0].type,J.materialKeys=Ht,J}function Rn(H,V,ie,J,ae=!1){const De=H.p,Ge=H.stride,Nt=H.vcount;function yt(tt){let Ht=De[tt+ie]*Lt;const It=Ht+Lt;for(;Ht<It;Ht++)J.push(Ct[Ht]);if(ae){const un=J.length-Lt-1;ui.setRGB(J[un+0],J[un+1],J[un+2]).convertSRGBToLinear(),J[un+0]=ui.r,J[un+1]=ui.g,J[un+2]=ui.b}}const Ct=V.array,Lt=V.stride;if(H.vcount!==void 0){let tt=0;for(let Ht=0,It=Nt.length;Ht<It;Ht++){const un=Nt[Ht];if(un===4){const sn=tt+Ge*0,Ar=tt+Ge*1,gr=tt+Ge*2,or=tt+Ge*3;yt(sn),yt(Ar),yt(or),yt(Ar),yt(gr),yt(or)}else if(un===3){const sn=tt+Ge*0,Ar=tt+Ge*1,gr=tt+Ge*2;yt(sn),yt(Ar),yt(gr)}else if(un>4)for(let sn=1,Ar=un-2;sn<=Ar;sn++){const gr=tt+Ge*0,or=tt+Ge*sn,Qn=tt+Ge*(sn+1);yt(gr),yt(or),yt(Qn)}tt+=Ge*un}}else for(let tt=0,Ht=De.length;tt<Ht;tt+=Ge)yt(tt)}function ss(H){return v(gn.geometries[H],Rr)}function as(H){const V={name:H.getAttribute("name")||"",joints:{},links:[]};for(let ie=0;ie<H.childNodes.length;ie++){const J=H.childNodes[ie];if(J.nodeType===1)switch(J.nodeName){case"technique_common":lo(J,V);break}}gn.kinematicsModels[H.getAttribute("id")]=V}function _l(H){return H.build!==void 0?H.build:H}function oo(H){return v(gn.kinematicsModels[H],_l)}function lo(H,V){for(let ie=0;ie<H.childNodes.length;ie++){const J=H.childNodes[ie];if(J.nodeType===1)switch(J.nodeName){case"joint":V.joints[J.getAttribute("sid")]=co(J);break;case"link":V.links.push(jo(J));break}}}function co(H){let V;for(let ie=0;ie<H.childNodes.length;ie++){const J=H.childNodes[ie];if(J.nodeType===1)switch(J.nodeName){case"prismatic":case"revolute":V=Bo(J);break}}return V}function Bo(H){const V={sid:H.getAttribute("sid"),name:H.getAttribute("name")||"",axis:new Oe,limits:{min:0,max:0},type:H.nodeName,static:!1,zeroPosition:0,middlePosition:0};for(let ie=0;ie<H.childNodes.length;ie++){const J=H.childNodes[ie];if(J.nodeType===1)switch(J.nodeName){case"axis":const ae=a(J.textContent);V.axis.fromArray(ae);break;case"limits":const De=J.getElementsByTagName("max")[0],Ge=J.getElementsByTagName("min")[0];V.limits.max=parseFloat(De.textContent),V.limits.min=parseFloat(Ge.textContent);break}}return V.limits.min>=V.limits.max&&(V.static=!0),V.middlePosition=(V.limits.min+V.limits.max)/2,V}function jo(H){const V={sid:H.getAttribute("sid"),name:H.getAttribute("name")||"",attachments:[],transforms:[]};for(let ie=0;ie<H.childNodes.length;ie++){const J=H.childNodes[ie];if(J.nodeType===1)switch(J.nodeName){case"attachment_full":V.attachments.push(Uo(J));break;case"matrix":case"translate":case"rotate":V.transforms.push(su(J));break}}return V}function Uo(H){const V={joint:H.getAttribute("joint").split("/").pop(),transforms:[],links:[]};for(let ie=0;ie<H.childNodes.length;ie++){const J=H.childNodes[ie];if(J.nodeType===1)switch(J.nodeName){case"link":V.links.push(jo(J));break;case"matrix":case"translate":case"rotate":V.transforms.push(su(J));break}}return V}function su(H){const V={type:H.nodeName},ie=a(H.textContent);switch(V.type){case"matrix":V.obj=new mn,V.obj.fromArray(ie).transpose();break;case"translate":V.obj=new Oe,V.obj.fromArray(ie);break;case"rotate":V.obj=new Oe,V.obj.fromArray(ie),V.angle=Zi.degToRad(ie[3]);break}return V}function fc(H){const V={name:H.getAttribute("name")||"",rigidBodies:{}};for(let ie=0;ie<H.childNodes.length;ie++){const J=H.childNodes[ie];if(J.nodeType===1)switch(J.nodeName){case"rigid_body":V.rigidBodies[J.getAttribute("name")]={},Rh(J,V.rigidBodies[J.getAttribute("name")]);break}}gn.physicsModels[H.getAttribute("id")]=V}function Rh(H,V){for(let ie=0;ie<H.childNodes.length;ie++){const J=H.childNodes[ie];if(J.nodeType===1)switch(J.nodeName){case"technique_common":Ia(J,V);break}}}function Ia(H,V){for(let ie=0;ie<H.childNodes.length;ie++){const J=H.childNodes[ie];if(J.nodeType===1)switch(J.nodeName){case"inertia":V.inertia=a(J.textContent);break;case"mass":V.mass=a(J.textContent)[0];break}}}function au(H){const V={bindJointAxis:[]};for(let ie=0;ie<H.childNodes.length;ie++){const J=H.childNodes[ie];if(J.nodeType===1)switch(J.nodeName){case"bind_joint_axis":V.bindJointAxis.push(ou(J));break}}gn.kinematicsScenes[l(H.getAttribute("url"))]=V}function ou(H){const V={target:H.getAttribute("target").split("/").pop()};for(let ie=0;ie<H.childNodes.length;ie++){const J=H.childNodes[ie];if(J.nodeType===1)switch(J.nodeName){case"axis":const ae=J.getElementsByTagName("param")[0];V.axis=ae.textContent;const De=V.axis.split("inst_").pop().split("axis")[0];V.jointIndex=De.substring(0,De.length-1);break}}return V}function lu(H){return H.build!==void 0?H.build:H}function zo(H){return v(gn.kinematicsScenes[H],lu)}function cu(){const H=Object.keys(gn.kinematicsModels)[0],V=Object.keys(gn.kinematicsScenes)[0],ie=Object.keys(gn.visualScenes)[0];if(H===void 0||V===void 0)return;const J=oo(H),ae=zo(V),De=rr(ie),Ge=ae.bindJointAxis,Nt={};for(let Lt=0,tt=Ge.length;Lt<tt;Lt++){const Ht=Ge[Lt],It=Mr.querySelector('[sid="'+Ht.target+'"]');if(It){const un=It.parentElement;yt(Ht.jointIndex,un)}}function yt(Lt,tt){const Ht=tt.getAttribute("name"),It=J.joints[Lt];De.traverse(function(un){un.name===Ht&&(Nt[Lt]={object:un,transforms:Oh(tt),joint:It,position:It.zeroPosition})})}const Ct=new mn;ir={joints:J&&J.joints,getJointValue:function(Lt){const tt=Nt[Lt];if(tt)return tt.position;console.warn("THREE.ColladaLoader: Joint "+Lt+" doesn't exist.")},setJointValue:function(Lt,tt){const Ht=Nt[Lt];if(Ht){const It=Ht.joint;if(tt>It.limits.max||tt<It.limits.min)console.warn("THREE.ColladaLoader: Joint "+Lt+" value "+tt+" outside of limits (min: "+It.limits.min+", max: "+It.limits.max+").");else if(It.static)console.warn("THREE.ColladaLoader: Joint "+Lt+" is static.");else{const un=Ht.object,sn=It.axis,Ar=Ht.transforms;Ee.identity();for(let gr=0;gr<Ar.length;gr++){const or=Ar[gr];if(or.sid&&or.sid.indexOf(Lt)!==-1)switch(It.type){case"revolute":Ee.multiply(Ct.makeRotationAxis(sn,Zi.degToRad(tt)));break;case"prismatic":Ee.multiply(Ct.makeTranslation(sn.x*tt,sn.y*tt,sn.z*tt));break;default:console.warn("THREE.ColladaLoader: Unknown joint type: "+It.type);break}else switch(or.type){case"matrix":Ee.multiply(or.obj);break;case"translate":Ee.multiply(Ct.makeTranslation(or.obj.x,or.obj.y,or.obj.z));break;case"scale":Ee.scale(or.obj);break;case"rotate":Ee.multiply(Ct.makeRotationAxis(or.obj,or.angle));break}}un.matrix.copy(Ee),un.matrix.decompose(un.position,un.quaternion,un.scale),Nt[Lt].position=tt}}else console.log("THREE.ColladaLoader: "+Lt+" does not exist.")}}}function Oh(H){const V=[],ie=Mr.querySelector('[id="'+H.id+'"]');for(let J=0;J<ie.childNodes.length;J++){const ae=ie.childNodes[J];if(ae.nodeType!==1)continue;let De,Ge;switch(ae.nodeName){case"matrix":De=a(ae.textContent);const Nt=new mn().fromArray(De).transpose();V.push({sid:ae.getAttribute("sid"),type:ae.nodeName,obj:Nt});break;case"translate":case"scale":De=a(ae.textContent),Ge=new Oe().fromArray(De),V.push({sid:ae.getAttribute("sid"),type:ae.nodeName,obj:Ge});break;case"rotate":De=a(ae.textContent),Ge=new Oe().fromArray(De);const yt=Zi.degToRad(De[3]);V.push({sid:ae.getAttribute("sid"),type:ae.nodeName,obj:Ge,angle:yt});break}}return V}function re(H){const V=H.getElementsByTagName("node");for(let ie=0;ie<V.length;ie++){const J=V[ie];J.hasAttribute("id")===!1&&J.setAttribute("id",c())}}const Ee=new mn,Ie=new Oe;function Ne(H){const V={name:H.getAttribute("name")||"",type:H.getAttribute("type"),id:H.getAttribute("id"),sid:H.getAttribute("sid"),matrix:new mn,nodes:[],instanceCameras:[],instanceControllers:[],instanceLights:[],instanceGeometries:[],instanceNodes:[],transforms:{}};for(let ie=0;ie<H.childNodes.length;ie++){const J=H.childNodes[ie];if(J.nodeType!==1)continue;let ae;switch(J.nodeName){case"node":V.nodes.push(J.getAttribute("id")),Ne(J);break;case"instance_camera":V.instanceCameras.push(l(J.getAttribute("url")));break;case"instance_controller":V.instanceControllers.push(Ae(J));break;case"instance_light":V.instanceLights.push(l(J.getAttribute("url")));break;case"instance_geometry":V.instanceGeometries.push(Ae(J));break;case"instance_node":V.instanceNodes.push(l(J.getAttribute("url")));break;case"matrix":ae=a(J.textContent),V.matrix.multiply(Ee.fromArray(ae).transpose()),V.transforms[J.getAttribute("sid")]=J.nodeName;break;case"translate":ae=a(J.textContent),Ie.fromArray(ae),V.matrix.multiply(Ee.makeTranslation(Ie.x,Ie.y,Ie.z)),V.transforms[J.getAttribute("sid")]=J.nodeName;break;case"rotate":ae=a(J.textContent);const De=Zi.degToRad(ae[3]);V.matrix.multiply(Ee.makeRotationAxis(Ie.fromArray(ae),De)),V.transforms[J.getAttribute("sid")]=J.nodeName;break;case"scale":ae=a(J.textContent),V.matrix.scale(Ie.fromArray(ae)),V.transforms[J.getAttribute("sid")]=J.nodeName;break;case"extra":break;default:console.log(J)}}return Gt(V.id)?console.warn("THREE.ColladaLoader: There is already a node with ID %s. Exclude current node from further processing.",V.id):gn.nodes[V.id]=V,V}function Ae(H){const V={id:l(H.getAttribute("url")),materials:{},skeletons:[]};for(let ie=0;ie<H.childNodes.length;ie++){const J=H.childNodes[ie];switch(J.nodeName){case"bind_material":const ae=J.getElementsByTagName("instance_material");for(let De=0;De<ae.length;De++){const Ge=ae[De],Nt=Ge.getAttribute("symbol"),yt=Ge.getAttribute("target");V.materials[Nt]=l(yt)}break;case"skeleton":V.skeletons.push(l(J.textContent));break}}return V}function st(H,V){const ie=[],J=[];let ae,De,Ge;for(ae=0;ae<H.length;ae++){const Ct=H[ae];let Lt;if(Gt(Ct))Lt=Un(Ct),At(Lt,V,ie);else if(Lr(Ct)){const Ht=gn.visualScenes[Ct].children;for(let It=0;It<Ht.length;It++){const un=Ht[It];if(un.type==="JOINT"){const sn=Un(un.id);At(sn,V,ie)}}}else console.error("THREE.ColladaLoader: Unable to find root bone of skeleton with ID:",Ct)}for(ae=0;ae<V.length;ae++)for(De=0;De<ie.length;De++)if(Ge=ie[De],Ge.bone.name===V[ae].name){J[ae]=Ge,Ge.processed=!0;break}for(ae=0;ae<ie.length;ae++)Ge=ie[ae],Ge.processed===!1&&(J.push(Ge),Ge.processed=!0);const Nt=[],yt=[];for(ae=0;ae<J.length;ae++)Ge=J[ae],Nt.push(Ge.bone),yt.push(Ge.boneInverse);return new gM(Nt,yt)}function At(H,V,ie){H.traverse(function(J){if(J.isBone===!0){let ae;for(let De=0;De<V.length;De++){const Ge=V[De];if(Ge.name===J.name){ae=Ge.boneInverse;break}}ae===void 0&&(ae=new mn),ie.push({bone:J,boneInverse:ae,processed:!1})}})}function kt(H){const V=[],ie=H.matrix,J=H.nodes,ae=H.type,De=H.instanceCameras,Ge=H.instanceControllers,Nt=H.instanceLights,yt=H.instanceGeometries,Ct=H.instanceNodes;for(let tt=0,Ht=J.length;tt<Ht;tt++)V.push(Un(J[tt]));for(let tt=0,Ht=De.length;tt<Ht;tt++){const It=vn(De[tt]);It!==null&&V.push(It.clone())}for(let tt=0,Ht=Ge.length;tt<Ht;tt++){const It=Ge[tt],un=le(It.id),sn=ss(un.id),Ar=hn(sn,It.materials),gr=It.skeletons,or=un.skin.joints,Qn=st(gr,or);for(let Ls=0,xi=Ar.length;Ls<xi;Ls++){const Da=Ar[Ls];Da.isSkinnedMesh&&(Da.bind(Qn,un.skin.bindMatrix),Da.normalizeSkinWeights()),V.push(Da)}}for(let tt=0,Ht=Nt.length;tt<Ht;tt++){const It=Me(Nt[tt]);It!==null&&V.push(It.clone())}for(let tt=0,Ht=yt.length;tt<Ht;tt++){const It=yt[tt],un=ss(It.id),sn=hn(un,It.materials);for(let Ar=0,gr=sn.length;Ar<gr;Ar++)V.push(sn[Ar])}for(let tt=0,Ht=Ct.length;tt<Ht;tt++)V.push(Un(Ct[tt]).clone());let Lt;if(J.length===0&&V.length===1)Lt=V[0];else{Lt=ae==="JOINT"?new RT:new PT;for(let tt=0;tt<V.length;tt++)Lt.add(V[tt])}return Lt.name=ae==="JOINT"?H.sid:H.name,Lt.matrix.copy(ie),Lt.matrix.decompose(Lt.position,Lt.quaternion,Lt.scale),Lt}const jt=new XL({name:Hc.DEFAULT_MATERIAL_NAME,color:16711935});function xn(H,V){const ie=[];for(let J=0,ae=H.length;J<ae;J++){const De=V[H[J]];De===void 0?(console.warn("THREE.ColladaLoader: Material with key %s not found. Apply fallback material.",H[J]),ie.push(jt)):ie.push(Et(De))}return ie}function hn(H,V){const ie=[];for(const J in H){const ae=H[J],De=xn(ae.materialKeys,V);if(De.length===0&&(J==="lines"||J==="linestrips"?De.push(new OT):De.push(new fx)),J==="lines"||J==="linestrips")for(let Ct=0,Lt=De.length;Ct<Lt;Ct++){const tt=De[Ct];if(tt.isMeshPhongMaterial===!0||tt.isMeshLambertMaterial===!0){const Ht=new OT;Ht.color.copy(tt.color),Ht.opacity=tt.opacity,Ht.transparent=tt.transparent,De[Ct]=Ht}}const Ge=ae.data.attributes.skinIndex!==void 0,Nt=De.length===1?De[0]:De;let yt;switch(J){case"lines":yt=new jfe(ae.data,Nt);break;case"linestrips":yt=new JB(ae.data,Nt);break;case"triangles":case"polylist":Ge?yt=new xJ(ae.data,Nt):yt=new ZB(ae.data,Nt);break}ie.push(yt)}return ie}function Gt(H){return gn.nodes[H]!==void 0}function Un(H){return v(gn.nodes[H],kt)}function Dn(H){const V={name:H.getAttribute("name"),children:[]};re(H);const ie=i(H,"node");for(let J=0;J<ie.length;J++)V.children.push(Ne(ie[J]));gn.visualScenes[H.getAttribute("id")]=V}function Ur(H){const V=new PT;V.name=H.name;const ie=H.children;for(let J=0;J<ie.length;J++){const ae=ie[J];V.add(Un(ae.id))}return V}function Lr(H){return gn.visualScenes[H]!==void 0}function rr(H){return v(gn.visualScenes[H],Ur)}function an(H){const V=i(H,"instance_visual_scene")[0];return rr(l(V.getAttribute("url")))}function qr(){const H=gn.clips;if(u(H)===!0){if(u(gn.animations)===!1){const V=[];for(const ie in gn.animations){const J=T(ie);for(let ae=0,De=J.length;ae<De;ae++)V.push(J[ae])}Xr.push(new ZL("default",-1,V))}}else for(const V in H)Xr.push(z(V))}function Zn(H){let V="";const ie=[H];for(;ie.length;){const J=ie.shift();J.nodeType===Node.TEXT_NODE?V+=J.textContent:(V+=`
`,ie.push.apply(ie,J.childNodes))}return V.trim()}if(e.length===0)return{scene:new Lfe};const Ii=new DOMParser().parseFromString(e,"application/xml"),Mr=i(Ii,"COLLADA")[0],Di=Ii.getElementsByTagName("parsererror")[0];if(Di!==void 0){const H=i(Di,"div")[0];let V;return H?V=H.textContent:V=Zn(Di),console.error(`THREE.ColladaLoader: Failed to parse collada file.
`,V),null}const uo=Mr.getAttribute("version");console.debug("THREE.ColladaLoader: File version",uo);const wr=h(i(Mr,"asset")[0]),Li=new AJ(this.manager);Li.setPath(this.resourcePath||n).setCrossOrigin(this.crossOrigin);let ci;j6&&(ci=new j6(this.manager),ci.setPath(this.resourcePath||n));const ui=new Ni,Xr=[];let ir={},ma=0;const gn={animations:{},clips:{},controllers:{},images:{},effects:{},materials:{},cameras:{},lights:{},geometries:{},nodes:{},visualScenes:{},kinematicsModels:{},physicsModels:{},kinematicsScenes:{}};p(Mr,"library_animations","animation",x),p(Mr,"library_animation_clips","animation_clip",j),p(Mr,"library_controllers","controller",Z),p(Mr,"library_images","image",oe),p(Mr,"library_effects","effect",we),p(Mr,"library_materials","material",Je),p(Mr,"library_cameras","camera",Dt),p(Mr,"library_lights","light",Bt),p(Mr,"library_geometries","geometry",Mt),p(Mr,"library_nodes","node",Ne),p(Mr,"library_visual_scenes","visual_scene",Dn),p(Mr,"library_kinematics_models","kinematics_model",as),p(Mr,"library_physics_models","physics_model",fc),p(Mr,"scene","instance_kinematics_scene",au),g(gn.animations,S),g(gn.clips,$),g(gn.controllers,be),g(gn.images,fe),g(gn.effects,Re),g(gn.materials,Kt),g(gn.cameras,fn),g(gn.lights,hr),g(gn.geometries,Rr),g(gn.visualScenes,Ur),qr(),cu();const pc=an(i(Mr,"scene")[0]);return pc.animations=Xr,wr.upAxis==="Z_UP"&&(console.warn("THREE.ColladaLoader: You are loading an asset with a Z-UP coordinate system. The loader just rotates the asset to transform it into Y-UP. The vertex data are not converted, see #24289."),pc.rotation.set(-Math.PI/2,0,0)),pc.scale.multiplyScalar(wr.unit),{get animations(){return console.warn("THREE.ColladaLoader: Please access animations over scene.animations now."),Xr},kinematics:ir,library:gn,scene:pc}}}THREE.ColladaLoader=Npe;AFRAME.registerComponent("collada-model-legacy",{schema:{type:"asset"},init:function(){this.model=null,this.loader=new THREE.ColladaLoader},update:function(){var r=this,e=this.el,n=this.data,i=this.el.sceneEl.systems.renderer;n&&(this.remove(),this.loader.load(n,function(s){r.model=s.scene,r.model.traverse(function(a){if(a.isMesh){var o=a.material;o.color&&i.applyColorCorrection(o.color),o.map&&i.applyColorCorrection(o.map),o.emissive&&i.applyColorCorrection(o.emissive),o.emissiveMap&&i.applyColorCorrection(o.emissiveMap)}}),e.setObject3D("mesh",r.model),e.emit("model-loaded",{format:"collada",model:r.model})}))},remove:function(){this.model&&this.el.removeObject3D("mesh")}});/*!
fflate - fast JavaScript compression/decompression
<https://101arrowz.github.io/fflate>
Licensed under MIT. https://github.com/101arrowz/fflate/blob/master/LICENSE
version 0.8.2
*/var il=Uint8Array,_g=Uint16Array,Ppe=Int32Array,OJ=new il([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),kJ=new il([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Rpe=new il([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),IJ=function(r,e){for(var n=new _g(31),i=0;i<31;++i)n[i]=e+=1<<r[i-1];for(var s=new Ppe(n[30]),i=1;i<30;++i)for(var a=n[i];a<n[i+1];++a)s[a]=a-n[i]<<5|i;return{b:n,r:s}},DJ=IJ(OJ,2),LJ=DJ.b,Ope=DJ.r;LJ[28]=258,Ope[258]=28;var kpe=IJ(kJ,0),Ipe=kpe.b,JL=new _g(32768);for(var oi=0;oi<32768;++oi){var Jh=(oi&43690)>>1|(oi&21845)<<1;Jh=(Jh&52428)>>2|(Jh&13107)<<2,Jh=(Jh&61680)>>4|(Jh&3855)<<4,JL[oi]=((Jh&65280)>>8|(Jh&255)<<8)>>1}var px=function(r,e,n){for(var i=r.length,s=0,a=new _g(e);s<i;++s)r[s]&&++a[r[s]-1];var o=new _g(e);for(s=1;s<e;++s)o[s]=o[s-1]+a[s-1]<<1;var l;if(n){l=new _g(1<<e);var c=15-e;for(s=0;s<i;++s)if(r[s])for(var u=s<<4|r[s],h=e-r[s],d=o[r[s]-1]++<<h,f=d|(1<<h)-1;d<=f;++d)l[JL[d]>>c]=u}else for(l=new _g(i),s=0;s<i;++s)r[s]&&(l[s]=JL[o[r[s]-1]++]>>15-r[s]);return l},m_=new il(288);for(var oi=0;oi<144;++oi)m_[oi]=8;for(var oi=144;oi<256;++oi)m_[oi]=9;for(var oi=256;oi<280;++oi)m_[oi]=7;for(var oi=280;oi<288;++oi)m_[oi]=8;var FJ=new il(32);for(var oi=0;oi<32;++oi)FJ[oi]=5;var Dpe=px(m_,9,1),Lpe=px(FJ,5,1),oN=function(r){for(var e=r[0],n=1;n<r.length;++n)r[n]>e&&(e=r[n]);return e},kl=function(r,e,n){var i=e/8|0;return(r[i]|r[i+1]<<8)>>(e&7)&n},lN=function(r,e){var n=e/8|0;return(r[n]|r[n+1]<<8|r[n+2]<<16)>>(e&7)},Fpe=function(r){return(r+7)/8|0},Bpe=function(r,e,n){return(n==null||n>r.length)&&(n=r.length),new il(r.subarray(e,n))},jpe=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Wl=function(r,e,n){var i=new Error(e||jpe[r]);if(i.code=r,Error.captureStackTrace&&Error.captureStackTrace(i,Wl),!n)throw i;return i},Upe=function(r,e,n,i){var s=r.length,a=0;if(!s||e.f&&!e.l)return n||new il(0);var o=!n,l=o||e.i!=2,c=e.i;o&&(n=new il(s*3));var u=function(et){var Fe=n.length;if(et>Fe){var Tt=new il(Math.max(Fe*2,et));Tt.set(n),n=Tt}},h=e.f||0,d=e.p||0,f=e.b||0,p=e.l,g=e.d,v=e.m,x=e.n,_=s*8;do{if(!p){h=kl(r,d,1);var E=kl(r,d+1,3);if(d+=3,E)if(E==1)p=Dpe,g=Lpe,v=9,x=5;else if(E==2){var C=kl(r,d,31)+257,A=kl(r,d+10,15)+4,P=C+kl(r,d+5,31)+1;d+=14;for(var R=new il(P),O=new il(19),D=0;D<A;++D)O[Rpe[D]]=kl(r,d+D*3,7);d+=A*3;for(var F=oN(O),U=(1<<F)-1,B=px(O,F,1),D=0;D<P;){var W=B[kl(r,d,U)];d+=W&15;var S=W>>4;if(S<16)R[D++]=S;else{var j=0,$=0;for(S==16?($=3+kl(r,d,3),d+=2,j=R[D-1]):S==17?($=3+kl(r,d,7),d+=3):S==18&&($=11+kl(r,d,127),d+=7);$--;)R[D++]=j}}var z=R.subarray(0,C),Z=R.subarray(C);v=oN(z),x=oN(Z),p=px(z,v,1),g=px(Z,x,1)}else Wl(1);else{var S=Fpe(d)+4,T=r[S-4]|r[S-3]<<8,M=S+T;if(M>s){c&&Wl(0);break}l&&u(f+T),n.set(r.subarray(S,M),f),e.b=f+=T,e.p=d=M*8,e.f=h;continue}if(d>_){c&&Wl(0);break}}l&&u(f+131072);for(var se=(1<<v)-1,q=(1<<x)-1,ue=d;;ue=d){var j=p[lN(r,d)&se],be=j>>4;if(d+=j&15,d>_){c&&Wl(0);break}if(j||Wl(2),be<256)n[f++]=be;else if(be==256){ue=d,p=null;break}else{var ee=be-254;if(be>264){var D=be-257,le=OJ[D];ee=kl(r,d,(1<<le)-1)+LJ[D],d+=le}var oe=g[lN(r,d)&q],fe=oe>>4;oe||Wl(3),d+=oe&15;var Z=Ipe[fe];if(fe>3){var le=kJ[fe];Z+=lN(r,d)&(1<<le)-1,d+=le}if(d>_){c&&Wl(0);break}l&&u(f+131072);var Se=f+ee;if(f<Z){var we=a-Z,Le=Math.min(Z,Se);for(we+f<0&&Wl(3);f<Le;++f)n[f]=i[we+f]}for(;f<Se;++f)n[f]=n[f-Z]}}e.l=p,e.p=ue,e.b=f,e.f=h,p&&(h=1,e.m=v,e.d=g,e.n=x)}while(!h);return f!=n.length&&o?Bpe(n,0,f):n.subarray(0,f)},zpe=new il(0),$pe=function(r,e){return((r[0]&15)!=8||r[0]>>4>7||(r[0]<<8|r[1])%31)&&Wl(6,"invalid zlib data"),(r[1]>>5&1)==1&&Wl(6,"invalid zlib data: "+(r[1]&32?"need":"unexpected")+" dictionary"),(r[1]>>3&4)+2};function Gpe(r,e){return Upe(r.subarray($pe(r),-4),{i:2},e,e)}var Vpe=typeof TextDecoder<"u"&&new TextDecoder,Hpe=0;try{Vpe.decode(zpe,{stream:!0}),Hpe=1}catch{}function BJ(r,e,n){const i=n.length-r-1;if(e>=n[i])return i-1;if(e<=n[r])return r;let s=r,a=i,o=Math.floor((s+a)/2);for(;e<n[o]||e>=n[o+1];)e<n[o]?a=o:s=o,o=Math.floor((s+a)/2);return o}function Wpe(r,e,n,i){const s=[],a=[],o=[];s[0]=1;for(let l=1;l<=n;++l){a[l]=e-i[r+1-l],o[l]=i[r+l]-e;let c=0;for(let u=0;u<l;++u){const h=o[u+1],d=a[l-u],f=s[u]/(h+d);s[u]=c+h*f,c=d*f}s[l]=c}return s}function qpe(r,e,n,i){const s=BJ(r,i,e),a=Wpe(s,i,r,e),o=new Ha(0,0,0,0);for(let l=0;l<=r;++l){const c=n[s-r+l],u=a[l],h=c.w*u;o.x+=c.x*h,o.y+=c.y*h,o.z+=c.z*h,o.w+=c.w*u}return o}function Xpe(r,e,n,i,s){const a=[];for(let d=0;d<=n;++d)a[d]=0;const o=[];for(let d=0;d<=i;++d)o[d]=a.slice(0);const l=[];for(let d=0;d<=n;++d)l[d]=a.slice(0);l[0][0]=1;const c=a.slice(0),u=a.slice(0);for(let d=1;d<=n;++d){c[d]=e-s[r+1-d],u[d]=s[r+d]-e;let f=0;for(let p=0;p<d;++p){const g=u[p+1],v=c[d-p];l[d][p]=g+v;const x=l[p][d-1]/l[d][p];l[p][d]=f+g*x,f=v*x}l[d][d]=f}for(let d=0;d<=n;++d)o[0][d]=l[d][n];for(let d=0;d<=n;++d){let f=0,p=1;const g=[];for(let v=0;v<=n;++v)g[v]=a.slice(0);g[0][0]=1;for(let v=1;v<=i;++v){let x=0;const _=d-v,E=n-v;d>=v&&(g[p][0]=g[f][0]/l[E+1][_],x=g[p][0]*l[_][E]);const S=_>=-1?1:-_,T=d-1<=E?v-1:n-d;for(let C=S;C<=T;++C)g[p][C]=(g[f][C]-g[f][C-1])/l[E+1][_+C],x+=g[p][C]*l[_+C][E];d<=E&&(g[p][v]=-g[f][v-1]/l[E+1][d],x+=g[p][v]*l[d][E]),o[v][d]=x;const M=f;f=p,p=M}}let h=n;for(let d=1;d<=i;++d){for(let f=0;f<=n;++f)o[d][f]*=h;h*=n-d}return o}function Kpe(r,e,n,i,s){const a=s<r?s:r,o=[],l=BJ(r,i,e),c=Xpe(l,i,r,a,e),u=[];for(let h=0;h<n.length;++h){const d=n[h].clone(),f=d.w;d.x*=f,d.y*=f,d.z*=f,u[h]=d}for(let h=0;h<=a;++h){const d=u[l-r].clone().multiplyScalar(c[h][0]);for(let f=1;f<=r;++f)d.add(u[l-r+f].clone().multiplyScalar(c[h][f]));o[h]=d}for(let h=a+1;h<=s+1;++h)o[h]=new Ha(0,0,0);return o}function Ype(r,e){let n=1;for(let s=2;s<=r;++s)n*=s;let i=1;for(let s=2;s<=e;++s)i*=s;for(let s=2;s<=r-e;++s)i*=s;return n/i}function Zpe(r){const e=r.length,n=[],i=[];for(let a=0;a<e;++a){const o=r[a];n[a]=new Oe(o.x,o.y,o.z),i[a]=o.w}const s=[];for(let a=0;a<e;++a){const o=n[a].clone();for(let l=1;l<=a;++l)o.sub(s[a-l].clone().multiplyScalar(Ype(a,l)*i[l]));s[a]=o.divideScalar(i[0])}return s}function Qpe(r,e,n,i,s){const a=Kpe(r,e,n,i,s);return Zpe(a)}class Jpe extends Ufe{constructor(e,n,i,s,a){super(),this.degree=e,this.knots=n,this.controlPoints=[],this.startKnot=s||0,this.endKnot=a||this.knots.length-1;for(let o=0;o<i.length;++o){const l=i[o];this.controlPoints[o]=new Ha(l.x,l.y,l.z,l.w)}}getPoint(e,n=new Oe){const i=n,s=this.knots[this.startKnot]+e*(this.knots[this.endKnot]-this.knots[this.startKnot]),a=qpe(this.degree,this.knots,this.controlPoints,s);return a.w!==1&&a.divideScalar(a.w),i.set(a.x,a.y,a.z)}getTangent(e,n=new Oe){const i=n,s=this.knots[0]+e*(this.knots[this.knots.length-1]-this.knots[0]),a=Qpe(this.degree,this.knots,this.controlPoints,s,1);return i.copy(a[1]).normalize(),i}}let ar,Bi,_a;class eme extends Hc{constructor(e){super(e)}load(e,n,i,s){const a=this,o=a.path===""?RJ.extractUrlBase(e):a.path,l=new tj(this.manager);l.setPath(a.path),l.setResponseType("arraybuffer"),l.setRequestHeader(a.requestHeader),l.setWithCredentials(a.withCredentials),l.load(e,function(c){try{n(a.parse(c,o))}catch(u){s?s(u):console.error(u),a.manager.itemError(e)}},i,s)}parse(e,n){if(ame(e))ar=new sme().parse(e);else{const s=$J(e);if(!ome(s))throw new Error("THREE.FBXLoader: Unknown format.");if(z6(s)<7e3)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+z6(s));ar=new ime().parse(s)}const i=new AJ(this.manager).setPath(this.resourcePath||n).setCrossOrigin(this.crossOrigin);return new tme(i,this.manager).parse(ar)}}class tme{constructor(e,n){this.textureLoader=e,this.manager=n}parse(){Bi=this.parseConnections();const e=this.parseImages(),n=this.parseTextures(e),i=this.parseMaterials(n),s=this.parseDeformers(),a=new nme().parse(s);return this.parseScene(s,a,i),_a}parseConnections(){const e=new Map;return"Connections"in ar&&ar.Connections.connections.forEach(function(i){const s=i[0],a=i[1],o=i[2];e.has(s)||e.set(s,{parents:[],children:[]});const l={ID:a,relationship:o};e.get(s).parents.push(l),e.has(a)||e.set(a,{parents:[],children:[]});const c={ID:s,relationship:o};e.get(a).children.push(c)}),e}parseImages(){const e={},n={};if("Video"in ar.Objects){const i=ar.Objects.Video;for(const s in i){const a=i[s],o=parseInt(s);if(e[o]=a.RelativeFilename||a.Filename,"Content"in a){const l=a.Content instanceof ArrayBuffer&&a.Content.byteLength>0,c=typeof a.Content=="string"&&a.Content!=="";if(l||c){const u=this.parseImage(i[s]);n[a.RelativeFilename||a.Filename]=u}}}}for(const i in e){const s=e[i];n[s]!==void 0?e[i]=n[s]:e[i]=e[i].split("\\").pop()}return e}parseImage(e){const n=e.Content,i=e.RelativeFilename||e.Filename,s=i.slice(i.lastIndexOf(".")+1).toLowerCase();let a;switch(s){case"bmp":a="image/bmp";break;case"jpg":case"jpeg":a="image/jpeg";break;case"png":a="image/png";break;case"tif":a="image/tiff";break;case"tga":this.manager.getHandler(".tga")===null&&console.warn("FBXLoader: TGA loader not found, skipping ",i),a="image/tga";break;default:console.warn('FBXLoader: Image type "'+s+'" is not supported.');return}if(typeof n=="string")return"data:"+a+";base64,"+n;{const o=new Uint8Array(n);return window.URL.createObjectURL(new Blob([o],{type:a}))}}parseTextures(e){const n=new Map;if("Texture"in ar.Objects){const i=ar.Objects.Texture;for(const s in i){const a=this.parseTexture(i[s],e);n.set(parseInt(s),a)}}return n}parseTexture(e,n){const i=this.loadTexture(e,n);i.ID=e.id,i.name=e.attrName;const s=e.WrapModeU,a=e.WrapModeV,o=s!==void 0?s.value:0,l=a!==void 0?a.value:0;if(i.wrapS=o===0?Sd:Cc,i.wrapT=l===0?Sd:Cc,"Scaling"in e){const c=e.Scaling.value;i.repeat.x=c[0],i.repeat.y=c[1]}if("Translation"in e){const c=e.Translation.value;i.offset.x=c[0],i.offset.y=c[1]}return i}loadTexture(e,n){let i;const s=this.textureLoader.path,a=Bi.get(e.id).children;a!==void 0&&a.length>0&&n[a[0].ID]!==void 0&&(i=n[a[0].ID],(i.indexOf("blob:")===0||i.indexOf("data:")===0)&&this.textureLoader.setPath(void 0));let o;const l=e.FileName.slice(-3).toLowerCase();if(l==="tga"){const c=this.manager.getHandler(".tga");c===null?(console.warn("FBXLoader: TGA loader not found, creating placeholder texture for",e.RelativeFilename),o=new rh):(c.setPath(this.textureLoader.path),o=c.load(i))}else if(l==="dds"){const c=this.manager.getHandler(".dds");c===null?(console.warn("FBXLoader: DDS loader not found, creating placeholder texture for",e.RelativeFilename),o=new rh):(c.setPath(this.textureLoader.path),o=c.load(i))}else l==="psd"?(console.warn("FBXLoader: PSD textures are not supported, creating placeholder texture for",e.RelativeFilename),o=new rh):o=this.textureLoader.load(i);return this.textureLoader.setPath(s),o}parseMaterials(e){const n=new Map;if("Material"in ar.Objects){const i=ar.Objects.Material;for(const s in i){const a=this.parseMaterial(i[s],e);a!==null&&n.set(parseInt(s),a)}}return n}parseMaterial(e,n){const i=e.id,s=e.attrName;let a=e.ShadingModel;if(typeof a=="object"&&(a=a.value),!Bi.has(i))return null;const o=this.parseParameters(e,n,i);let l;switch(a.toLowerCase()){case"phong":l=new fx;break;case"lambert":l=new TJ;break;default:console.warn('THREE.FBXLoader: unknown material type "%s". Defaulting to MeshPhongMaterial.',a),l=new fx;break}return l.setValues(o),l.name=s,l}parseParameters(e,n,i){const s={};e.BumpFactor&&(s.bumpScale=e.BumpFactor.value),e.Diffuse?s.color=new Ni().fromArray(e.Diffuse.value).convertSRGBToLinear():e.DiffuseColor&&(e.DiffuseColor.type==="Color"||e.DiffuseColor.type==="ColorRGB")&&(s.color=new Ni().fromArray(e.DiffuseColor.value).convertSRGBToLinear()),e.DisplacementFactor&&(s.displacementScale=e.DisplacementFactor.value),e.Emissive?s.emissive=new Ni().fromArray(e.Emissive.value).convertSRGBToLinear():e.EmissiveColor&&(e.EmissiveColor.type==="Color"||e.EmissiveColor.type==="ColorRGB")&&(s.emissive=new Ni().fromArray(e.EmissiveColor.value).convertSRGBToLinear()),e.EmissiveFactor&&(s.emissiveIntensity=parseFloat(e.EmissiveFactor.value)),e.Opacity&&(s.opacity=parseFloat(e.Opacity.value)),s.opacity<1&&(s.transparent=!0),e.ReflectionFactor&&(s.reflectivity=e.ReflectionFactor.value),e.Shininess&&(s.shininess=e.Shininess.value),e.Specular?s.specular=new Ni().fromArray(e.Specular.value).convertSRGBToLinear():e.SpecularColor&&e.SpecularColor.type==="Color"&&(s.specular=new Ni().fromArray(e.SpecularColor.value).convertSRGBToLinear());const a=this;return Bi.get(i).children.forEach(function(o){const l=o.relationship;switch(l){case"Bump":s.bumpMap=a.getTexture(n,o.ID);break;case"Maya|TEX_ao_map":s.aoMap=a.getTexture(n,o.ID);break;case"DiffuseColor":case"Maya|TEX_color_map":s.map=a.getTexture(n,o.ID),s.map!==void 0&&(s.map.colorSpace=Ta);break;case"DisplacementColor":s.displacementMap=a.getTexture(n,o.ID);break;case"EmissiveColor":s.emissiveMap=a.getTexture(n,o.ID),s.emissiveMap!==void 0&&(s.emissiveMap.colorSpace=Ta);break;case"NormalMap":case"Maya|TEX_normal_map":s.normalMap=a.getTexture(n,o.ID);break;case"ReflectionColor":s.envMap=a.getTexture(n,o.ID),s.envMap!==void 0&&(s.envMap.mapping=Gde,s.envMap.colorSpace=Ta);break;case"SpecularColor":s.specularMap=a.getTexture(n,o.ID),s.specularMap!==void 0&&(s.specularMap.colorSpace=Ta);break;case"TransparentColor":case"TransparencyFactor":s.alphaMap=a.getTexture(n,o.ID),s.transparent=!0;break;case"AmbientColor":case"ShininessExponent":case"SpecularFactor":case"VectorDisplacementColor":default:console.warn("THREE.FBXLoader: %s map is not supported in three.js, skipping texture.",l);break}}),s}getTexture(e,n){return"LayeredTexture"in ar.Objects&&n in ar.Objects.LayeredTexture&&(console.warn("THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer."),n=Bi.get(n).children[0].ID),e.get(n)}parseDeformers(){const e={},n={};if("Deformer"in ar.Objects){const i=ar.Objects.Deformer;for(const s in i){const a=i[s],o=Bi.get(parseInt(s));if(a.attrType==="Skin"){const l=this.parseSkeleton(o,i);l.ID=s,o.parents.length>1&&console.warn("THREE.FBXLoader: skeleton attached to more than one geometry is not supported."),l.geometryID=o.parents[0].ID,e[s]=l}else if(a.attrType==="BlendShape"){const l={id:s};l.rawTargets=this.parseMorphTargets(o,i),l.id=s,o.parents.length>1&&console.warn("THREE.FBXLoader: morph target attached to more than one geometry is not supported."),n[s]=l}}}return{skeletons:e,morphTargets:n}}parseSkeleton(e,n){const i=[];return e.children.forEach(function(s){const a=n[s.ID];if(a.attrType!=="Cluster")return;const o={ID:s.ID,indices:[],weights:[],transformLink:new mn().fromArray(a.TransformLink.a)};"Indexes"in a&&(o.indices=a.Indexes.a,o.weights=a.Weights.a),i.push(o)}),{rawBones:i,bones:[]}}parseMorphTargets(e,n){const i=[];for(let s=0;s<e.children.length;s++){const a=e.children[s],o=n[a.ID],l={name:o.attrName,initialWeight:o.DeformPercent,id:o.id,fullWeights:o.FullWeights.a};if(o.attrType!=="BlendShapeChannel")return;l.geoID=Bi.get(parseInt(a.ID)).children.filter(function(c){return c.relationship===void 0})[0].ID,i.push(l)}return i}parseScene(e,n,i){_a=new PT;const s=this.parseModels(e.skeletons,n,i),a=ar.Objects.Model,o=this;s.forEach(function(c){const u=a[c.ID];o.setLookAtProperties(c,u),Bi.get(c.ID).parents.forEach(function(d){const f=s.get(d.ID);f!==void 0&&f.add(c)}),c.parent===null&&_a.add(c)}),this.bindSkeleton(e.skeletons,n,s),this.addGlobalSceneSettings(),_a.traverse(function(c){if(c.userData.transformData){c.parent&&(c.userData.transformData.parentMatrix=c.parent.matrix,c.userData.transformData.parentMatrixWorld=c.parent.matrixWorld);const u=UJ(c.userData.transformData);c.applyMatrix4(u),c.updateWorldMatrix()}});const l=new rme().parse();_a.children.length===1&&_a.children[0].isGroup&&(_a.children[0].animations=l,_a=_a.children[0]),_a.animations=l}parseModels(e,n,i){const s=new Map,a=ar.Objects.Model;for(const o in a){const l=parseInt(o),c=a[o],u=Bi.get(l);let h=this.buildSkeleton(u,e,l,c.attrName);if(!h){switch(c.attrType){case"Camera":h=this.createCamera(u);break;case"Light":h=this.createLight(u);break;case"Mesh":h=this.createMesh(u,n,i);break;case"NurbsCurve":h=this.createCurve(u,n);break;case"LimbNode":case"Root":h=new RT;break;case"Null":default:h=new PT;break}h.name=c.attrName?Tr.sanitizeNodeName(c.attrName):"",h.userData.originalName=c.attrName,h.ID=l}this.getTransformData(h,c),s.set(l,h)}return s}buildSkeleton(e,n,i,s){let a=null;return e.parents.forEach(function(o){for(const l in n){const c=n[l];c.rawBones.forEach(function(u,h){if(u.ID===o.ID){const d=a;a=new RT,a.matrixWorld.copy(u.transformLink),a.name=s?Tr.sanitizeNodeName(s):"",a.userData.originalName=s,a.ID=i,c.bones[h]=a,d!==null&&a.add(d)}})}}),a}createCamera(e){let n,i;if(e.children.forEach(function(s){const a=ar.Objects.NodeAttribute[s.ID];a!==void 0&&(i=a)}),i===void 0)n=new Os;else{let s=0;i.CameraProjectionType!==void 0&&i.CameraProjectionType.value===1&&(s=1);let a=1;i.NearPlane!==void 0&&(a=i.NearPlane.value/1e3);let o=1e3;i.FarPlane!==void 0&&(o=i.FarPlane.value/1e3);let l=window.innerWidth,c=window.innerHeight;i.AspectWidth!==void 0&&i.AspectHeight!==void 0&&(l=i.AspectWidth.value,c=i.AspectHeight.value);const u=l/c;let h=45;i.FieldOfView!==void 0&&(h=i.FieldOfView.value);const d=i.FocalLength?i.FocalLength.value:null;switch(s){case 0:n=new $x(h,u,a,o),d!==null&&n.setFocalLength(d);break;case 1:n=new QB(-l/2,l/2,c/2,-c/2,a,o);break;default:console.warn("THREE.FBXLoader: Unknown camera type "+s+"."),n=new Os;break}}return n}createLight(e){let n,i;if(e.children.forEach(function(s){const a=ar.Objects.NodeAttribute[s.ID];a!==void 0&&(i=a)}),i===void 0)n=new Os;else{let s;i.LightType===void 0?s=0:s=i.LightType.value;let a=16777215;i.Color!==void 0&&(a=new Ni().fromArray(i.Color.value).convertSRGBToLinear());let o=i.Intensity===void 0?1:i.Intensity.value/100;i.CastLightOnObject!==void 0&&i.CastLightOnObject.value===0&&(o=0);let l=0;i.FarAttenuationEnd!==void 0&&(i.EnableFarAttenuation!==void 0&&i.EnableFarAttenuation.value===0?l=0:l=i.FarAttenuationEnd.value);const c=1;switch(s){case 0:n=new QL(a,o,l,c);break;case 1:n=new NJ(a,o);break;case 2:let u=Math.PI/3;i.InnerAngle!==void 0&&(u=Zi.degToRad(i.InnerAngle.value));let h=0;i.OuterAngle!==void 0&&(h=Zi.degToRad(i.OuterAngle.value),h=Math.max(h,1)),n=new CJ(a,o,l,u,h,c);break;default:console.warn("THREE.FBXLoader: Unknown light type "+i.LightType.value+", defaulting to a PointLight."),n=new QL(a,o);break}i.CastShadows!==void 0&&i.CastShadows.value===1&&(n.castShadow=!0)}return n}createMesh(e,n,i){let s,a=null,o=null;const l=[];return e.children.forEach(function(c){n.has(c.ID)&&(a=n.get(c.ID)),i.has(c.ID)&&l.push(i.get(c.ID))}),l.length>1?o=l:l.length>0?o=l[0]:(o=new fx({name:Hc.DEFAULT_MATERIAL_NAME,color:13421772}),l.push(o)),"color"in a.attributes&&l.forEach(function(c){c.vertexColors=!0}),a.FBX_Deformer?(s=new xJ(a,o),s.normalizeSkinWeights()):s=new ZB(a,o),s}createCurve(e,n){const i=e.children.reduce(function(a,o){return n.has(o.ID)&&(a=n.get(o.ID)),a},null),s=new OT({name:Hc.DEFAULT_MATERIAL_NAME,color:3342591,linewidth:1});return new JB(i,s)}getTransformData(e,n){const i={};"InheritType"in n&&(i.inheritType=parseInt(n.InheritType.value)),"RotationOrder"in n?i.eulerOrder=zJ(n.RotationOrder.value):i.eulerOrder="ZYX","Lcl_Translation"in n&&(i.translation=n.Lcl_Translation.value),"PreRotation"in n&&(i.preRotation=n.PreRotation.value),"Lcl_Rotation"in n&&(i.rotation=n.Lcl_Rotation.value),"PostRotation"in n&&(i.postRotation=n.PostRotation.value),"Lcl_Scaling"in n&&(i.scale=n.Lcl_Scaling.value),"ScalingOffset"in n&&(i.scalingOffset=n.ScalingOffset.value),"ScalingPivot"in n&&(i.scalingPivot=n.ScalingPivot.value),"RotationOffset"in n&&(i.rotationOffset=n.RotationOffset.value),"RotationPivot"in n&&(i.rotationPivot=n.RotationPivot.value),e.userData.transformData=i}setLookAtProperties(e,n){"LookAtProperty"in n&&Bi.get(e.ID).children.forEach(function(s){if(s.relationship==="LookAtProperty"){const a=ar.Objects.Model[s.ID];if("Lcl_Translation"in a){const o=a.Lcl_Translation.value;e.target!==void 0?(e.target.position.fromArray(o),_a.add(e.target)):e.lookAt(new Oe().fromArray(o))}}})}bindSkeleton(e,n,i){const s=this.parsePoseNodes();for(const a in e){const o=e[a];Bi.get(parseInt(o.ID)).parents.forEach(function(c){if(n.has(c.ID)){const u=c.ID;Bi.get(u).parents.forEach(function(d){i.has(d.ID)&&i.get(d.ID).bind(new gM(o.bones),s[d.ID])})}})}}parsePoseNodes(){const e={};if("Pose"in ar.Objects){const n=ar.Objects.Pose;for(const i in n)if(n[i].attrType==="BindPose"&&n[i].NbPoseNodes>0){const s=n[i].PoseNode;Array.isArray(s)?s.forEach(function(a){e[a.Node]=new mn().fromArray(a.Matrix.a)}):e[s.Node]=new mn().fromArray(s.Matrix.a)}}return e}addGlobalSceneSettings(){if("GlobalSettings"in ar){if("AmbientColor"in ar.GlobalSettings){const e=ar.GlobalSettings.AmbientColor.value,n=e[0],i=e[1],s=e[2];if(n!==0||i!==0||s!==0){const a=new Ni(n,i,s).convertSRGBToLinear();_a.add(new PJ(a,1))}}"UnitScaleFactor"in ar.GlobalSettings&&(_a.userData.unitScaleFactor=ar.GlobalSettings.UnitScaleFactor.value)}}}class nme{constructor(){this.negativeMaterialIndices=!1}parse(e){const n=new Map;if("Geometry"in ar.Objects){const i=ar.Objects.Geometry;for(const s in i){const a=Bi.get(parseInt(s)),o=this.parseGeometry(a,i[s],e);n.set(parseInt(s),o)}}return this.negativeMaterialIndices===!0&&console.warn("THREE.FBXLoader: The FBX file contains invalid (negative) material indices. The asset might not render as expected."),n}parseGeometry(e,n,i){switch(n.attrType){case"Mesh":return this.parseMeshGeometry(e,n,i);case"NurbsCurve":return this.parseNurbsGeometry(n)}}parseMeshGeometry(e,n,i){const s=i.skeletons,a=[],o=e.parents.map(function(d){return ar.Objects.Model[d.ID]});if(o.length===0)return;const l=e.children.reduce(function(d,f){return s[f.ID]!==void 0&&(d=s[f.ID]),d},null);e.children.forEach(function(d){i.morphTargets[d.ID]!==void 0&&a.push(i.morphTargets[d.ID])});const c=o[0],u={};"RotationOrder"in c&&(u.eulerOrder=zJ(c.RotationOrder.value)),"InheritType"in c&&(u.inheritType=parseInt(c.InheritType.value)),"GeometricTranslation"in c&&(u.translation=c.GeometricTranslation.value),"GeometricRotation"in c&&(u.rotation=c.GeometricRotation.value),"GeometricScaling"in c&&(u.scale=c.GeometricScaling.value);const h=UJ(u);return this.genGeometry(n,l,a,h)}genGeometry(e,n,i,s){const a=new Lg;e.attrName&&(a.name=e.attrName);const o=this.parseGeoNode(e,n),l=this.genBuffers(o),c=new oa(l.vertex,3);if(c.applyMatrix4(s),a.setAttribute("position",c),l.colors.length>0&&a.setAttribute("color",new oa(l.colors,3)),n&&(a.setAttribute("skinIndex",new gJ(l.weightsIndices,4)),a.setAttribute("skinWeight",new oa(l.vertexWeights,4)),a.FBX_Deformer=n),l.normal.length>0){const u=new Vd().getNormalMatrix(s),h=new oa(l.normal,3);h.applyNormalMatrix(u),a.setAttribute("normal",h)}if(l.uvs.forEach(function(u,h){const d=h===0?"uv":`uv${h}`;a.setAttribute(d,new oa(l.uvs[h],2))}),o.material&&o.material.mappingType!=="AllSame"){let u=l.materialIndex[0],h=0;if(l.materialIndex.forEach(function(d,f){d!==u&&(a.addGroup(h,f-h,u),u=d,h=f)}),a.groups.length>0){const d=a.groups[a.groups.length-1],f=d.start+d.count;f!==l.materialIndex.length&&a.addGroup(f,l.materialIndex.length-f,u)}a.groups.length===0&&a.addGroup(0,l.materialIndex.length,l.materialIndex[0])}return this.addMorphTargets(a,e,i,s),a}parseGeoNode(e,n){const i={};if(i.vertexPositions=e.Vertices!==void 0?e.Vertices.a:[],i.vertexIndices=e.PolygonVertexIndex!==void 0?e.PolygonVertexIndex.a:[],e.LayerElementColor&&(i.color=this.parseVertexColors(e.LayerElementColor[0])),e.LayerElementMaterial&&(i.material=this.parseMaterialIndices(e.LayerElementMaterial[0])),e.LayerElementNormal&&(i.normal=this.parseNormals(e.LayerElementNormal[0])),e.LayerElementUV){i.uv=[];let s=0;for(;e.LayerElementUV[s];)e.LayerElementUV[s].UV&&i.uv.push(this.parseUVs(e.LayerElementUV[s])),s++}return i.weightTable={},n!==null&&(i.skeleton=n,n.rawBones.forEach(function(s,a){s.indices.forEach(function(o,l){i.weightTable[o]===void 0&&(i.weightTable[o]=[]),i.weightTable[o].push({id:a,weight:s.weights[l]})})})),i}genBuffers(e){const n={vertex:[],normal:[],colors:[],uvs:[],materialIndex:[],vertexWeights:[],weightsIndices:[]};let i=0,s=0,a=!1,o=[],l=[],c=[],u=[],h=[],d=[];const f=this;return e.vertexIndices.forEach(function(p,g){let v,x=!1;p<0&&(p=p^-1,x=!0);let _=[],E=[];if(o.push(p*3,p*3+1,p*3+2),e.color){const S=y1(g,i,p,e.color);c.push(S[0],S[1],S[2])}if(e.skeleton){if(e.weightTable[p]!==void 0&&e.weightTable[p].forEach(function(S){E.push(S.weight),_.push(S.id)}),E.length>4){a||(console.warn("THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights."),a=!0);const S=[0,0,0,0],T=[0,0,0,0];E.forEach(function(M,C){let A=M,P=_[C];T.forEach(function(R,O,D){if(A>R){D[O]=A,A=R;const F=S[O];S[O]=P,P=F}})}),_=S,E=T}for(;E.length<4;)E.push(0),_.push(0);for(let S=0;S<4;++S)h.push(E[S]),d.push(_[S])}if(e.normal){const S=y1(g,i,p,e.normal);l.push(S[0],S[1],S[2])}e.material&&e.material.mappingType!=="AllSame"&&(v=y1(g,i,p,e.material)[0],v<0&&(f.negativeMaterialIndices=!0,v=0)),e.uv&&e.uv.forEach(function(S,T){const M=y1(g,i,p,S);u[T]===void 0&&(u[T]=[]),u[T].push(M[0]),u[T].push(M[1])}),s++,x&&(f.genFace(n,e,o,v,l,c,u,h,d,s),i++,s=0,o=[],l=[],c=[],u=[],h=[],d=[])}),n}getNormalNewell(e){const n=new Oe(0,0,0);for(let i=0;i<e.length;i++){const s=e[i],a=e[(i+1)%e.length];n.x+=(s.y-a.y)*(s.z+a.z),n.y+=(s.z-a.z)*(s.x+a.x),n.z+=(s.x-a.x)*(s.y+a.y)}return n.normalize(),n}getNormalTangentAndBitangent(e){const n=this.getNormalNewell(e),s=(Math.abs(n.z)>.5?new Oe(0,1,0):new Oe(0,0,1)).cross(n).normalize(),a=n.clone().cross(s).normalize();return{normal:n,tangent:s,bitangent:a}}flattenVertex(e,n,i){return new ki(e.dot(n),e.dot(i))}genFace(e,n,i,s,a,o,l,c,u,h){let d;if(h>3){const f=[];for(let x=0;x<i.length;x+=3)f.push(new Oe(n.vertexPositions[i[x]],n.vertexPositions[i[x+1]],n.vertexPositions[i[x+2]]));const{tangent:p,bitangent:g}=this.getNormalTangentAndBitangent(f),v=[];for(const x of f)v.push(this.flattenVertex(x,p,g));d=ej.triangulateShape(v,[])}else d=[[0,1,2]];for(const[f,p,g]of d)e.vertex.push(n.vertexPositions[i[f*3]]),e.vertex.push(n.vertexPositions[i[f*3+1]]),e.vertex.push(n.vertexPositions[i[f*3+2]]),e.vertex.push(n.vertexPositions[i[p*3]]),e.vertex.push(n.vertexPositions[i[p*3+1]]),e.vertex.push(n.vertexPositions[i[p*3+2]]),e.vertex.push(n.vertexPositions[i[g*3]]),e.vertex.push(n.vertexPositions[i[g*3+1]]),e.vertex.push(n.vertexPositions[i[g*3+2]]),n.skeleton&&(e.vertexWeights.push(c[f*4]),e.vertexWeights.push(c[f*4+1]),e.vertexWeights.push(c[f*4+2]),e.vertexWeights.push(c[f*4+3]),e.vertexWeights.push(c[p*4]),e.vertexWeights.push(c[p*4+1]),e.vertexWeights.push(c[p*4+2]),e.vertexWeights.push(c[p*4+3]),e.vertexWeights.push(c[g*4]),e.vertexWeights.push(c[g*4+1]),e.vertexWeights.push(c[g*4+2]),e.vertexWeights.push(c[g*4+3]),e.weightsIndices.push(u[f*4]),e.weightsIndices.push(u[f*4+1]),e.weightsIndices.push(u[f*4+2]),e.weightsIndices.push(u[f*4+3]),e.weightsIndices.push(u[p*4]),e.weightsIndices.push(u[p*4+1]),e.weightsIndices.push(u[p*4+2]),e.weightsIndices.push(u[p*4+3]),e.weightsIndices.push(u[g*4]),e.weightsIndices.push(u[g*4+1]),e.weightsIndices.push(u[g*4+2]),e.weightsIndices.push(u[g*4+3])),n.color&&(e.colors.push(o[f*3]),e.colors.push(o[f*3+1]),e.colors.push(o[f*3+2]),e.colors.push(o[p*3]),e.colors.push(o[p*3+1]),e.colors.push(o[p*3+2]),e.colors.push(o[g*3]),e.colors.push(o[g*3+1]),e.colors.push(o[g*3+2])),n.material&&n.material.mappingType!=="AllSame"&&(e.materialIndex.push(s),e.materialIndex.push(s),e.materialIndex.push(s)),n.normal&&(e.normal.push(a[f*3]),e.normal.push(a[f*3+1]),e.normal.push(a[f*3+2]),e.normal.push(a[p*3]),e.normal.push(a[p*3+1]),e.normal.push(a[p*3+2]),e.normal.push(a[g*3]),e.normal.push(a[g*3+1]),e.normal.push(a[g*3+2])),n.uv&&n.uv.forEach(function(v,x){e.uvs[x]===void 0&&(e.uvs[x]=[]),e.uvs[x].push(l[x][f*2]),e.uvs[x].push(l[x][f*2+1]),e.uvs[x].push(l[x][p*2]),e.uvs[x].push(l[x][p*2+1]),e.uvs[x].push(l[x][g*2]),e.uvs[x].push(l[x][g*2+1])})}addMorphTargets(e,n,i,s){if(i.length===0)return;e.morphTargetsRelative=!0,e.morphAttributes.position=[];const a=this;i.forEach(function(o){o.rawTargets.forEach(function(l){const c=ar.Objects.Geometry[l.geoID];c!==void 0&&a.genMorphGeometry(e,n,c,s,l.name)})})}genMorphGeometry(e,n,i,s,a){const o=n.PolygonVertexIndex!==void 0?n.PolygonVertexIndex.a:[],l=i.Vertices!==void 0?i.Vertices.a:[],c=i.Indexes!==void 0?i.Indexes.a:[],u=e.attributes.position.count*3,h=new Float32Array(u);for(let g=0;g<c.length;g++){const v=c[g]*3;h[v]=l[g*3],h[v+1]=l[g*3+1],h[v+2]=l[g*3+2]}const d={vertexIndices:o,vertexPositions:h},f=this.genBuffers(d),p=new oa(f.vertex,3);p.name=a||i.attrName,p.applyMatrix4(s),e.morphAttributes.position.push(p)}parseNormals(e){const n=e.MappingInformationType,i=e.ReferenceInformationType,s=e.Normals.a;let a=[];return i==="IndexToDirect"&&("NormalIndex"in e?a=e.NormalIndex.a:"NormalsIndex"in e&&(a=e.NormalsIndex.a)),{dataSize:3,buffer:s,indices:a,mappingType:n,referenceType:i}}parseUVs(e){const n=e.MappingInformationType,i=e.ReferenceInformationType,s=e.UV.a;let a=[];return i==="IndexToDirect"&&(a=e.UVIndex.a),{dataSize:2,buffer:s,indices:a,mappingType:n,referenceType:i}}parseVertexColors(e){const n=e.MappingInformationType,i=e.ReferenceInformationType,s=e.Colors.a;let a=[];i==="IndexToDirect"&&(a=e.ColorIndex.a);for(let o=0,l=new Ni;o<s.length;o+=4)l.fromArray(s,o).convertSRGBToLinear().toArray(s,o);return{dataSize:4,buffer:s,indices:a,mappingType:n,referenceType:i}}parseMaterialIndices(e){const n=e.MappingInformationType,i=e.ReferenceInformationType;if(n==="NoMappingInformation")return{dataSize:1,buffer:[0],indices:[0],mappingType:"AllSame",referenceType:i};const s=e.Materials.a,a=[];for(let o=0;o<s.length;++o)a.push(o);return{dataSize:1,buffer:s,indices:a,mappingType:n,referenceType:i}}parseNurbsGeometry(e){const n=parseInt(e.Order);if(isNaN(n))return console.error("THREE.FBXLoader: Invalid Order %s given for geometry ID: %s",e.Order,e.id),new Lg;const i=n-1,s=e.KnotVector.a,a=[],o=e.Points.a;for(let d=0,f=o.length;d<f;d+=4)a.push(new Ha().fromArray(o,d));let l,c;if(e.Form==="Closed")a.push(a[0]);else if(e.Form==="Periodic"){l=i,c=s.length-1-l;for(let d=0;d<i;++d)a.push(a[d])}const h=new Jpe(i,s,a,l,c).getPoints(a.length*12);return new Lg().setFromPoints(h)}}class rme{parse(){const e=[],n=this.parseClips();if(n!==void 0)for(const i in n){const s=n[i],a=this.addClip(s);e.push(a)}return e}parseClips(){if(ar.Objects.AnimationCurve===void 0)return;const e=this.parseAnimationCurveNodes();this.parseAnimationCurves(e);const n=this.parseAnimationLayers(e);return this.parseAnimStacks(n)}parseAnimationCurveNodes(){const e=ar.Objects.AnimationCurveNode,n=new Map;for(const i in e){const s=e[i];if(s.attrName.match(/S|R|T|DeformPercent/)!==null){const a={id:s.id,attr:s.attrName,curves:{}};n.set(a.id,a)}}return n}parseAnimationCurves(e){const n=ar.Objects.AnimationCurve;for(const i in n){const s={id:n[i].id,times:n[i].KeyTime.a.map(lme),values:n[i].KeyValueFloat.a},a=Bi.get(s.id);if(a!==void 0){const o=a.parents[0].ID,l=a.parents[0].relationship;l.match(/X/)?e.get(o).curves.x=s:l.match(/Y/)?e.get(o).curves.y=s:l.match(/Z/)?e.get(o).curves.z=s:l.match(/DeformPercent/)&&e.has(o)&&(e.get(o).curves.morph=s)}}}parseAnimationLayers(e){const n=ar.Objects.AnimationLayer,i=new Map;for(const s in n){const a=[],o=Bi.get(parseInt(s));o!==void 0&&(o.children.forEach(function(c,u){if(e.has(c.ID)){const h=e.get(c.ID);if(h.curves.x!==void 0||h.curves.y!==void 0||h.curves.z!==void 0){if(a[u]===void 0){const d=Bi.get(c.ID).parents.filter(function(f){return f.relationship!==void 0})[0].ID;if(d!==void 0){const f=ar.Objects.Model[d.toString()];if(f===void 0){console.warn("THREE.FBXLoader: Encountered a unused curve.",c);return}const p={modelName:f.attrName?Tr.sanitizeNodeName(f.attrName):"",ID:f.id,initialPosition:[0,0,0],initialRotation:[0,0,0],initialScale:[1,1,1]};_a.traverse(function(g){g.ID===f.id&&(p.transform=g.matrix,g.userData.transformData&&(p.eulerOrder=g.userData.transformData.eulerOrder))}),p.transform||(p.transform=new mn),"PreRotation"in f&&(p.preRotation=f.PreRotation.value),"PostRotation"in f&&(p.postRotation=f.PostRotation.value),a[u]=p}}a[u]&&(a[u][h.attr]=h)}else if(h.curves.morph!==void 0){if(a[u]===void 0){const d=Bi.get(c.ID).parents.filter(function(_){return _.relationship!==void 0})[0].ID,f=Bi.get(d).parents[0].ID,p=Bi.get(f).parents[0].ID,g=Bi.get(p).parents[0].ID,v=ar.Objects.Model[g],x={modelName:v.attrName?Tr.sanitizeNodeName(v.attrName):"",morphName:ar.Objects.Deformer[d].attrName};a[u]=x}a[u][h.attr]=h}}}),i.set(parseInt(s),a))}return i}parseAnimStacks(e){const n=ar.Objects.AnimationStack,i={};for(const s in n){const a=Bi.get(parseInt(s)).children;a.length>1&&console.warn("THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.");const o=e.get(a[0].ID);i[s]={name:n[s].attrName,layer:o}}return i}addClip(e){let n=[];const i=this;return e.layer.forEach(function(s){n=n.concat(i.generateTracks(s))}),new ZL(e.name,-1,n)}generateTracks(e){const n=[];let i=new Oe,s=new Oe;if(e.transform&&e.transform.decompose(i,new Sa,s),i=i.toArray(),s=s.toArray(),e.T!==void 0&&Object.keys(e.T.curves).length>0){const a=this.generateVectorTrack(e.modelName,e.T.curves,i,"position");a!==void 0&&n.push(a)}if(e.R!==void 0&&Object.keys(e.R.curves).length>0){const a=this.generateRotationTrack(e.modelName,e.R.curves,e.preRotation,e.postRotation,e.eulerOrder);a!==void 0&&n.push(a)}if(e.S!==void 0&&Object.keys(e.S.curves).length>0){const a=this.generateVectorTrack(e.modelName,e.S.curves,s,"scale");a!==void 0&&n.push(a)}if(e.DeformPercent!==void 0){const a=this.generateMorphTrack(e);a!==void 0&&n.push(a)}return n}generateVectorTrack(e,n,i,s){const a=this.getTimesForAllAxes(n),o=this.getKeyframeTrackValues(a,n,i);return new xp(e+"."+s,a,o)}generateRotationTrack(e,n,i,s,a){let o,l;if(n.x!==void 0&&n.y!==void 0&&n.z!==void 0){const d=this.interpolateRotations(n.x,n.y,n.z,a);o=d[0],l=d[1]}i!==void 0&&(i=i.map(Zi.degToRad),i.push(a),i=new Vs().fromArray(i),i=new Sa().setFromEuler(i)),s!==void 0&&(s=s.map(Zi.degToRad),s.push(a),s=new Vs().fromArray(s),s=new Sa().setFromEuler(s).invert());const c=new Sa,u=new Vs,h=[];if(!l||!o)return new Id(e+".quaternion",[0],[0]);for(let d=0;d<l.length;d+=3)u.set(l[d],l[d+1],l[d+2],a),c.setFromEuler(u),i!==void 0&&c.premultiply(i),s!==void 0&&c.multiply(s),d>2&&new Sa().fromArray(h,(d-3)/3*4).dot(c)<0&&c.set(-c.x,-c.y,-c.z,-c.w),c.toArray(h,d/3*4);return new Id(e+".quaternion",o,h)}generateMorphTrack(e){const n=e.DeformPercent.curves.morph,i=n.values.map(function(a){return a/100}),s=_a.getObjectByName(e.modelName).morphTargetDictionary[e.morphName];return new Wx(e.modelName+".morphTargetInfluences["+s+"]",n.times,i)}getTimesForAllAxes(e){let n=[];if(e.x!==void 0&&(n=n.concat(e.x.times)),e.y!==void 0&&(n=n.concat(e.y.times)),e.z!==void 0&&(n=n.concat(e.z.times)),n=n.sort(function(i,s){return i-s}),n.length>1){let i=1,s=n[0];for(let a=1;a<n.length;a++){const o=n[a];o!==s&&(n[i]=o,s=o,i++)}n=n.slice(0,i)}return n}getKeyframeTrackValues(e,n,i){const s=i,a=[];let o=-1,l=-1,c=-1;return e.forEach(function(u){if(n.x&&(o=n.x.times.indexOf(u)),n.y&&(l=n.y.times.indexOf(u)),n.z&&(c=n.z.times.indexOf(u)),o!==-1){const h=n.x.values[o];a.push(h),s[0]=h}else a.push(s[0]);if(l!==-1){const h=n.y.values[l];a.push(h),s[1]=h}else a.push(s[1]);if(c!==-1){const h=n.z.values[c];a.push(h),s[2]=h}else a.push(s[2])}),a}interpolateRotations(e,n,i,s){const a=[],o=[];a.push(e.times[0]),o.push(Zi.degToRad(e.values[0])),o.push(Zi.degToRad(n.values[0])),o.push(Zi.degToRad(i.values[0]));for(let l=1;l<e.values.length;l++){const c=[e.values[l-1],n.values[l-1],i.values[l-1]];if(isNaN(c[0])||isNaN(c[1])||isNaN(c[2]))continue;const u=c.map(Zi.degToRad),h=[e.values[l],n.values[l],i.values[l]];if(isNaN(h[0])||isNaN(h[1])||isNaN(h[2]))continue;const d=h.map(Zi.degToRad),f=[h[0]-c[0],h[1]-c[1],h[2]-c[2]],p=[Math.abs(f[0]),Math.abs(f[1]),Math.abs(f[2])];if(p[0]>=180||p[1]>=180||p[2]>=180){const v=Math.max(...p)/180,x=new Vs(...u,s),_=new Vs(...d,s),E=new Sa().setFromEuler(x),S=new Sa().setFromEuler(_);E.dot(S)&&S.set(-S.x,-S.y,-S.z,-S.w);const T=e.times[l-1],M=e.times[l]-T,C=new Sa,A=new Vs;for(let P=0;P<1;P+=1/v)C.copy(E.clone().slerp(S.clone(),P)),a.push(T+P*M),A.setFromQuaternion(C,s),o.push(A.x),o.push(A.y),o.push(A.z)}else a.push(e.times[l]),o.push(Zi.degToRad(e.values[l])),o.push(Zi.degToRad(n.values[l])),o.push(Zi.degToRad(i.values[l]))}return[a,o]}}class ime{getPrevNode(){return this.nodeStack[this.currentIndent-2]}getCurrentNode(){return this.nodeStack[this.currentIndent-1]}getCurrentProp(){return this.currentProp}pushStack(e){this.nodeStack.push(e),this.currentIndent+=1}popStack(){this.nodeStack.pop(),this.currentIndent-=1}setCurrentProp(e,n){this.currentProp=e,this.currentPropName=n}parse(e){this.currentIndent=0,this.allNodes=new jJ,this.nodeStack=[],this.currentProp=[],this.currentPropName="";const n=this,i=e.split(/[\r\n]+/);return i.forEach(function(s,a){const o=s.match(/^[\s\t]*;/),l=s.match(/^[\s\t]*$/);if(o||l)return;const c=s.match("^\\t{"+n.currentIndent+"}(\\w+):(.*){",""),u=s.match("^\\t{"+n.currentIndent+"}(\\w+):[\\s\\t\\r\\n](.*)"),h=s.match("^\\t{"+(n.currentIndent-1)+"}}");c?n.parseNodeBegin(s,c):u?n.parseNodeProperty(s,u,i[++a]):h?n.popStack():s.match(/^[^\s\t}]/)&&n.parseNodePropertyContinued(s)}),this.allNodes}parseNodeBegin(e,n){const i=n[1].trim().replace(/^"/,"").replace(/"$/,""),s=n[2].split(",").map(function(c){return c.trim().replace(/^"/,"").replace(/"$/,"")}),a={name:i},o=this.parseNodeAttr(s),l=this.getCurrentNode();this.currentIndent===0?this.allNodes.add(i,a):i in l?(i==="PoseNode"?l.PoseNode.push(a):l[i].id!==void 0&&(l[i]={},l[i][l[i].id]=l[i]),o.id!==""&&(l[i][o.id]=a)):typeof o.id=="number"?(l[i]={},l[i][o.id]=a):i!=="Properties70"&&(i==="PoseNode"?l[i]=[a]:l[i]=a),typeof o.id=="number"&&(a.id=o.id),o.name!==""&&(a.attrName=o.name),o.type!==""&&(a.attrType=o.type),this.pushStack(a)}parseNodeAttr(e){let n=e[0];e[0]!==""&&(n=parseInt(e[0]),isNaN(n)&&(n=e[0]));let i="",s="";return e.length>1&&(i=e[1].replace(/^(\w+)::/,""),s=e[2]),{id:n,name:i,type:s}}parseNodeProperty(e,n,i){let s=n[1].replace(/^"/,"").replace(/"$/,"").trim(),a=n[2].replace(/^"/,"").replace(/"$/,"").trim();s==="Content"&&a===","&&(a=i.replace(/"/g,"").replace(/,$/,"").trim());const o=this.getCurrentNode();if(o.name==="Properties70"){this.parseNodeSpecialProperty(e,s,a);return}if(s==="C"){const c=a.split(",").slice(1),u=parseInt(c[0]),h=parseInt(c[1]);let d=a.split(",").slice(3);d=d.map(function(f){return f.trim().replace(/^"/,"")}),s="connections",a=[u,h],ume(a,d),o[s]===void 0&&(o[s]=[])}s==="Node"&&(o.id=a),s in o&&Array.isArray(o[s])?o[s].push(a):s!=="a"?o[s]=a:o.a=a,this.setCurrentProp(o,s),s==="a"&&a.slice(-1)!==","&&(o.a=uN(a))}parseNodePropertyContinued(e){const n=this.getCurrentNode();n.a+=e,e.slice(-1)!==","&&(n.a=uN(n.a))}parseNodeSpecialProperty(e,n,i){const s=i.split('",').map(function(h){return h.trim().replace(/^\"/,"").replace(/\s/,"_")}),a=s[0],o=s[1],l=s[2],c=s[3];let u=s[4];switch(o){case"int":case"enum":case"bool":case"ULongLong":case"double":case"Number":case"FieldOfView":u=parseFloat(u);break;case"Color":case"ColorRGB":case"Vector3D":case"Lcl_Translation":case"Lcl_Rotation":case"Lcl_Scaling":u=uN(u);break}this.getPrevNode()[a]={type:o,type2:l,flag:c,value:u},this.setCurrentProp(this.getPrevNode(),a)}}class sme{parse(e){const n=new U6(e);n.skip(23);const i=n.getUint32();if(i<6400)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+i);const s=new jJ;for(;!this.endOfContent(n);){const a=this.parseNode(n,i);a!==null&&s.add(a.name,a)}return s}endOfContent(e){return e.size()%16===0?(e.getOffset()+160+16&-16)>=e.size():e.getOffset()+160+16>=e.size()}parseNode(e,n){const i={},s=n>=7500?e.getUint64():e.getUint32(),a=n>=7500?e.getUint64():e.getUint32();n>=7500?e.getUint64():e.getUint32();const o=e.getUint8(),l=e.getString(o);if(s===0)return null;const c=[];for(let f=0;f<a;f++)c.push(this.parseProperty(e));const u=c.length>0?c[0]:"",h=c.length>1?c[1]:"",d=c.length>2?c[2]:"";for(i.singleProperty=a===1&&e.getOffset()===s;s>e.getOffset();){const f=this.parseNode(e,n);f!==null&&this.parseSubNode(l,i,f)}return i.propertyList=c,typeof u=="number"&&(i.id=u),h!==""&&(i.attrName=h),d!==""&&(i.attrType=d),l!==""&&(i.name=l),i}parseSubNode(e,n,i){if(i.singleProperty===!0){const s=i.propertyList[0];Array.isArray(s)?(n[i.name]=i,i.a=s):n[i.name]=s}else if(e==="Connections"&&i.name==="C"){const s=[];i.propertyList.forEach(function(a,o){o!==0&&s.push(a)}),n.connections===void 0&&(n.connections=[]),n.connections.push(s)}else if(i.name==="Properties70")Object.keys(i).forEach(function(a){n[a]=i[a]});else if(e==="Properties70"&&i.name==="P"){let s=i.propertyList[0],a=i.propertyList[1];const o=i.propertyList[2],l=i.propertyList[3];let c;s.indexOf("Lcl ")===0&&(s=s.replace("Lcl ","Lcl_")),a.indexOf("Lcl ")===0&&(a=a.replace("Lcl ","Lcl_")),a==="Color"||a==="ColorRGB"||a==="Vector"||a==="Vector3D"||a.indexOf("Lcl_")===0?c=[i.propertyList[4],i.propertyList[5],i.propertyList[6]]:c=i.propertyList[4],n[s]={type:a,type2:o,flag:l,value:c}}else n[i.name]===void 0?typeof i.id=="number"?(n[i.name]={},n[i.name][i.id]=i):n[i.name]=i:i.name==="PoseNode"?(Array.isArray(n[i.name])||(n[i.name]=[n[i.name]]),n[i.name].push(i)):n[i.name][i.id]===void 0&&(n[i.name][i.id]=i)}parseProperty(e){const n=e.getString(1);let i;switch(n){case"C":return e.getBoolean();case"D":return e.getFloat64();case"F":return e.getFloat32();case"I":return e.getInt32();case"L":return e.getInt64();case"R":return i=e.getUint32(),e.getArrayBuffer(i);case"S":return i=e.getUint32(),e.getString(i);case"Y":return e.getInt16();case"b":case"c":case"d":case"f":case"i":case"l":const s=e.getUint32(),a=e.getUint32(),o=e.getUint32();if(a===0)switch(n){case"b":case"c":return e.getBooleanArray(s);case"d":return e.getFloat64Array(s);case"f":return e.getFloat32Array(s);case"i":return e.getInt32Array(s);case"l":return e.getInt64Array(s)}const l=Gpe(new Uint8Array(e.getArrayBuffer(o))),c=new U6(l.buffer);switch(n){case"b":case"c":return c.getBooleanArray(s);case"d":return c.getFloat64Array(s);case"f":return c.getFloat32Array(s);case"i":return c.getInt32Array(s);case"l":return c.getInt64Array(s)}break;default:throw new Error("THREE.FBXLoader: Unknown property type "+n)}}}class U6{constructor(e,n){this.dv=new DataView(e),this.offset=0,this.littleEndian=n!==void 0?n:!0,this._textDecoder=new TextDecoder}getOffset(){return this.offset}size(){return this.dv.buffer.byteLength}skip(e){this.offset+=e}getBoolean(){return(this.getUint8()&1)===1}getBooleanArray(e){const n=[];for(let i=0;i<e;i++)n.push(this.getBoolean());return n}getUint8(){const e=this.dv.getUint8(this.offset);return this.offset+=1,e}getInt16(){const e=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}getInt32(){const e=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}getInt32Array(e){const n=[];for(let i=0;i<e;i++)n.push(this.getInt32());return n}getUint32(){const e=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}getInt64(){let e,n;return this.littleEndian?(e=this.getUint32(),n=this.getUint32()):(n=this.getUint32(),e=this.getUint32()),n&2147483648?(n=~n&4294967295,e=~e&4294967295,e===4294967295&&(n=n+1&4294967295),e=e+1&4294967295,-(n*4294967296+e)):n*4294967296+e}getInt64Array(e){const n=[];for(let i=0;i<e;i++)n.push(this.getInt64());return n}getUint64(){let e,n;return this.littleEndian?(e=this.getUint32(),n=this.getUint32()):(n=this.getUint32(),e=this.getUint32()),n*4294967296+e}getFloat32(){const e=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}getFloat32Array(e){const n=[];for(let i=0;i<e;i++)n.push(this.getFloat32());return n}getFloat64(){const e=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}getFloat64Array(e){const n=[];for(let i=0;i<e;i++)n.push(this.getFloat64());return n}getArrayBuffer(e){const n=this.dv.buffer.slice(this.offset,this.offset+e);return this.offset+=e,n}getString(e){const n=this.offset;let i=new Uint8Array(this.dv.buffer,n,e);this.skip(e);const s=i.indexOf(0);return s>=0&&(i=new Uint8Array(this.dv.buffer,n,s)),this._textDecoder.decode(i)}}class jJ{add(e,n){this[e]=n}}function ame(r){const e="Kaydara FBX Binary  \0";return r.byteLength>=e.length&&e===$J(r,0,e.length)}function ome(r){const e=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"];let n=0;function i(s){const a=r[s-1];return r=r.slice(n+s),n++,a}for(let s=0;s<e.length;++s)if(i(1)===e[s])return!1;return!0}function z6(r){const e=/FBXVersion: (\d+)/,n=r.match(e);if(n)return parseInt(n[1]);throw new Error("THREE.FBXLoader: Cannot find the version number for the file given.")}function lme(r){return r/46186158e3}const cme=[];function y1(r,e,n,i){let s;switch(i.mappingType){case"ByPolygonVertex":s=r;break;case"ByPolygon":s=e;break;case"ByVertice":s=n;break;case"AllSame":s=i.indices[0];break;default:console.warn("THREE.FBXLoader: unknown attribute mapping type "+i.mappingType)}i.referenceType==="IndexToDirect"&&(s=i.indices[s]);const a=s*i.dataSize,o=a+i.dataSize;return hme(cme,i.buffer,a,o)}const cN=new Vs,Om=new Oe;function UJ(r){const e=new mn,n=new mn,i=new mn,s=new mn,a=new mn,o=new mn,l=new mn,c=new mn,u=new mn,h=new mn,d=new mn,f=new mn,p=r.inheritType?r.inheritType:0;if(r.translation&&e.setPosition(Om.fromArray(r.translation)),r.preRotation){const O=r.preRotation.map(Zi.degToRad);O.push(r.eulerOrder||Vs.DEFAULT_ORDER),n.makeRotationFromEuler(cN.fromArray(O))}if(r.rotation){const O=r.rotation.map(Zi.degToRad);O.push(r.eulerOrder||Vs.DEFAULT_ORDER),i.makeRotationFromEuler(cN.fromArray(O))}if(r.postRotation){const O=r.postRotation.map(Zi.degToRad);O.push(r.eulerOrder||Vs.DEFAULT_ORDER),s.makeRotationFromEuler(cN.fromArray(O)),s.invert()}r.scale&&a.scale(Om.fromArray(r.scale)),r.scalingOffset&&l.setPosition(Om.fromArray(r.scalingOffset)),r.scalingPivot&&o.setPosition(Om.fromArray(r.scalingPivot)),r.rotationOffset&&c.setPosition(Om.fromArray(r.rotationOffset)),r.rotationPivot&&u.setPosition(Om.fromArray(r.rotationPivot)),r.parentMatrixWorld&&(d.copy(r.parentMatrix),h.copy(r.parentMatrixWorld));const g=n.clone().multiply(i).multiply(s),v=new mn;v.extractRotation(h);const x=new mn;x.copyPosition(h);const _=x.clone().invert().multiply(h),E=v.clone().invert().multiply(_),S=a,T=new mn;if(p===0)T.copy(v).multiply(g).multiply(E).multiply(S);else if(p===1)T.copy(v).multiply(E).multiply(g).multiply(S);else{const D=new mn().scale(new Oe().setFromMatrixScale(d)).clone().invert(),F=E.clone().multiply(D);T.copy(v).multiply(g).multiply(F).multiply(S)}const M=u.clone().invert(),C=o.clone().invert();let A=e.clone().multiply(c).multiply(u).multiply(n).multiply(i).multiply(s).multiply(M).multiply(l).multiply(o).multiply(a).multiply(C);const P=new mn().copyPosition(A),R=h.clone().multiply(P);return f.copyPosition(R),A=f.clone().multiply(T),A.premultiply(h.invert()),A}function zJ(r){r=r||0;const e=["ZYX","YZX","XZY","ZXY","YXZ","XYZ"];return r===6?(console.warn("THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect."),e[0]):e[r]}function uN(r){return r.split(",").map(function(n){return parseFloat(n)})}function $J(r,e,n){return e===void 0&&(e=0),n===void 0&&(n=r.byteLength),new TextDecoder().decode(new Uint8Array(r,e,n))}function ume(r,e){for(let n=0,i=r.length,s=e.length;n<s;n++,i++)r[i]=e[n]}function hme(r,e,n,i){for(let s=n,a=0;s<i;s++,a++)r[a]=e[s];return r}THREE.FBXLoader=eme;AFRAME.registerComponent("fbx-model",{schema:{src:{type:"asset"},crossorigin:{default:""}},init:function(){this.model=null},update:function(){const r=this.data;if(!r.src)return;this.remove();const e=new THREE.FBXLoader;r.crossorigin&&e.setCrossOrigin(r.crossorigin),e.load(r.src,this.load.bind(this))},load:function(r){this.model=r,this.el.setObject3D("mesh",r),this.el.emit("model-loaded",{format:"fbx",model:r})},remove:function(){this.model&&this.el.removeObject3D("mesh")}});var hN,$6;function dme(){if($6)return hN;$6=1;function r(){return"script_"+Date.now()+"_"+Math.ceil(Math.random()*1e5)}function e(o,l){var c=document.createElement("script");return c.type="text/javascript",c.async=!0,c.id=l,c.src=o,c}function n(o){const l=document.getElementById(o),c=l.parentNode;try{c&&c.removeChild(l)}catch{}}function i(o){const l=document.getElementsByTagName("script")[0];l.parentNode.insertBefore(o,l)}function s(o,l,c){return new c(function(u,h){const d=l.timeout||5e3,f=r(),p=e(o,f),g=setTimeout(function(){h(new Error("Script request to "+o+" timed out")),n(f)},d),v=function(x){clearTimeout(x)};p.addEventListener("load",function(x){u({ok:!0}),v(g),n(f)}),p.addEventListener("error",function(x){h(new Error("Script request to "+o+" failed "+x)),v(g),n(f)}),i(p)})}function a(o){return o=o||{},function(l,c){return c=c||{},s(l,c,o.Promise||Promise)}}return hN=a,hN}var dN,G6;function fme(){if(G6)return dN;G6=1;const r=dme()(),e="https://cdn.jsdelivr.net/gh/mrdoob/three.js@r86/examples/js/loaders/GLTFLoader.js",n=function(){let i;return function(){return i=i||r(e),i}}();return dN=AFRAME.registerComponent("gltf-model-legacy",{schema:{type:"model"},init:function(){this.model=null,this.loader=null,this.loaderPromise=n().then(()=>{this.loader=new THREE.GLTFLoader,this.loader.setCrossOrigin("Anonymous")})},update:function(){const i=this,s=this.el,a=this.data;a&&(this.remove(),this.loaderPromise.then(()=>{this.loader.load(a,function(l){i.model=l.scene,i.model.animations=l.animations,s.setObject3D("mesh",i.model),s.emit("model-loaded",{format:"gltf",model:i.model})})}))},remove:function(){this.model&&this.el.removeObject3D("mesh")}}),dN}var fN,V6;function pme(){return V6||(V6=1,fN=AFRAME.registerComponent("object-model",{schema:{src:{type:"asset"},crossorigin:{default:""}},init:function(){this.model=null},update:function(){let r;const e=this.data;e.src&&(this.remove(),r=new THREE.ObjectLoader,e.crossorigin&&r.setCrossOrigin(e.crossorigin),r.load(e.src,n=>{n.traverse(i=>{i instanceof THREE.SkinnedMesh&&i.material&&(i.material.skinning=!!(i.geometry&&i.geometry.bones||[]).length)}),this.load(n)}))},load:function(r){this.model=r,this.el.setObject3D("mesh",r),this.el.emit("model-loaded",{format:"json",model:r})},remove:function(){this.model&&this.el.removeObject3D("mesh")}})),fN}var H6;function mme(){return H6||(H6=1,jde(),fme(),pme()),B$}var W6={},pN,q6;function gme(){return q6||(q6=1,pN=AFRAME.registerComponent("checkpoint",{schema:{offset:{default:{x:0,y:0,z:0},type:"vec3"}},init:function(){this.active=!1,this.targetEl=null,this.fire=this.fire.bind(this),this.offset=new THREE.Vector3},update:function(){this.offset.copy(this.data.offset)},play:function(){this.el.addEventListener("click",this.fire)},pause:function(){this.el.removeEventListener("click",this.fire)},remove:function(){this.pause()},fire:function(){const r=this.el.sceneEl.querySelector("[checkpoint-controls]");if(!r)throw new Error("No `checkpoint-controls` component found.");r.components["checkpoint-controls"].setCheckpoint(this.el)},getOffset:function(){return this.offset.copy(this.data.offset)}})),pN}var mN,X6;function yme(){if(X6)return mN;X6=1;function r(n){return n?Array.isArray(n)?n:n.materials?n.materials:[n]:[]}function e(n,i,s,a){n&&(i=i||[],n.traverse(o=>{if(!o.isMesh)return;r(o.material).forEach(c=>{c&&!("envMap"in c)||i.length&&i.indexOf(c.name)===-1||(c.envMap=s,c.reflectivity=a,c.needsUpdate=!0)})}))}return mN=AFRAME.registerComponent("cube-env-map",{multiple:!0,schema:{path:{default:""},extension:{default:"jpg",oneOf:["jpg","png"]},enableBackground:{default:!1},reflectivity:{default:1,min:0,max:1},materials:{default:[]}},init:function(){const n=this.data;this.texture=new THREE.CubeTextureLoader().load([n.path+"posx."+n.extension,n.path+"negx."+n.extension,n.path+"posy."+n.extension,n.path+"negy."+n.extension,n.path+"posz."+n.extension,n.path+"negz."+n.extension]),this.texture.format=THREE.RGBAFormat,this.object3dsetHandler=()=>{const i=this.el.getObject3D("mesh"),s=this.data;e(i,s.materials,this.texture,s.reflectivity)},this.object3dsetHandler(),this.el.addEventListener("object3dset",this.object3dsetHandler)},update:function(n){const i=this.data,s=this.el.getObject3D("mesh");let a=[],o=[];if(i.materials.length&&(n.materials?(a=i.materials.filter(l=>!n.materials.includes(l)),o=n.materials.filter(l=>!i.materials.includes(l))):a=i.materials),a.length&&e(s,a,this.texture,i.reflectivity),o.length&&e(s,o,null,1),n.materials&&i.reflectivity!==n.reflectivity){const l=i.materials.filter(c=>n.materials.includes(c));l.length&&e(s,l,this.texture,i.reflectivity)}this.data.enableBackground&&!n.enableBackground?this.setBackground(this.texture):!this.data.enableBackground&&n.enableBackground&&this.setBackground(null)},remove:function(){this.el.removeEventListener("object3dset",this.object3dsetHandler);const n=this.el.getObject3D("mesh"),i=this.data;e(n,i.materials,null,1),i.enableBackground&&this.setBackground(null)},setBackground:function(n){this.el.sceneEl.object3D.background=n}}),mN}var gN,K6;function vme(){return K6||(K6=1,gN=AFRAME.registerComponent("grab",{init:function(){this.system=this.el.sceneEl.systems.physics,this.GRABBED_STATE="grabbed",this.grabbing=!1,this.hitEl=null,this.physics=this.el.sceneEl.systems.physics,this.constraint=null,this.onHit=this.onHit.bind(this),this.onGripOpen=this.onGripOpen.bind(this),this.onGripClose=this.onGripClose.bind(this)},play:function(){const r=this.el;r.addEventListener("hit",this.onHit),r.addEventListener("gripdown",this.onGripClose),r.addEventListener("gripup",this.onGripOpen),r.addEventListener("trackpaddown",this.onGripClose),r.addEventListener("trackpadup",this.onGripOpen),r.addEventListener("triggerdown",this.onGripClose),r.addEventListener("triggerup",this.onGripOpen)},pause:function(){const r=this.el;r.removeEventListener("hit",this.onHit),r.removeEventListener("gripdown",this.onGripClose),r.removeEventListener("gripup",this.onGripOpen),r.removeEventListener("trackpaddown",this.onGripClose),r.removeEventListener("trackpadup",this.onGripOpen),r.removeEventListener("triggerdown",this.onGripClose),r.removeEventListener("triggerup",this.onGripOpen)},onGripClose:function(){this.grabbing=!0},onGripOpen:function(){const r=this.hitEl;this.grabbing=!1,r&&(r.removeState(this.GRABBED_STATE),this.hitEl=void 0,this.system.removeConstraint(this.constraint),this.constraint=null)},onHit:function(r){const e=r.detail.el;e.is(this.GRABBED_STATE)||!this.grabbing||this.hitEl||(e.addState(this.GRABBED_STATE),this.hitEl=e,this.constraint=new CANNON.LockConstraint(this.el.body,e.body),this.system.addConstraint(this.constraint))}})),gN}var yN,Y6;function xme(){return Y6||(Y6=1,yN=AFRAME.registerComponent("normal-material",{init:function(){this.material=new THREE.MeshNormalMaterial({flatShading:!0}),this.applyMaterial=this.applyMaterial.bind(this),this.el.addEventListener("object3dset",this.applyMaterial),this.applyMaterial()},remove:function(){this.el.removeEventListener("object3dset",this.applyMaterial)},applyMaterial:function(){this.el.object3D.traverse(r=>{r.isMesh&&(r.material=this.material)})}})),yN}var vN,Z6;function bme(){if(Z6)return vN;Z6=1,vN=AFRAME.registerComponent("sphere-collider",{schema:{enabled:{default:!0},interval:{default:80},objects:{default:""},state:{default:"collided"},radius:{default:.05},watch:{default:!0}},init:function(){this.observer=null,this.els=[],this.collisions=[],this.prevCheckTime=void 0,this.eventDetail={},this.handleHit=this.handleHit.bind(this),this.handleHitEnd=this.handleHitEnd.bind(this)},play:function(){const e=this.el.sceneEl;this.data.watch&&(this.observer=new MutationObserver(this.update.bind(this,null)),this.observer.observe(e,{childList:!0,subtree:!0}))},pause:function(){this.observer&&(this.observer.disconnect(),this.observer=null)},update:function(){const e=this.data;let n;e.objects?n=this.el.sceneEl.querySelectorAll(e.objects):n=this.el.sceneEl.children,this.els=Array.prototype.slice.call(n)},tick:function(){const e=new THREE.Vector3,n=new THREE.Vector3,i=new THREE.Vector3,s=new THREE.Vector3,a=new THREE.Box3,o=[],l=new Map;return function(c){if(!this.data.enabled)return;const u=this.prevCheckTime;if(u&&c-u<this.data.interval)return;this.prevCheckTime=c;const h=this.el,d=this.data,f=h.getObject3D("mesh");let p;if(!f)return;o.length=0,l.clear(),h.object3D.getWorldPosition(e),h.object3D.getWorldScale(i),p=d.radius*v(i),this.els.forEach(g),o.sort((x,_)=>l.get(x)>l.get(_)?1:-1).forEach(this.handleHit),this.collisions.filter(x=>!l.has(x)).forEach(this.handleHitEnd),r(this.collisions,o);function g(x){let _,E,S,T;x.isEntity&&(E=x.getObject3D("mesh"),E&&(a.setFromObject(E).getSize(s),T=Math.max(s.x,s.y,s.z)/2,_=Math.sqrt(2*T*T),a.getCenter(n),_&&(S=e.distanceTo(n),S<_+p&&(o.push(x),l.set(x,S)))))}function v(x){return Math.max(x.x,x.y,x.z)}}}(),handleHit:function(e){e.emit("hit"),e.addState(this.data.state),this.eventDetail.el=e,this.el.emit("hit",this.eventDetail)},handleHitEnd:function(e){e.emit("hitend"),e.removeState(this.data.state),this.eventDetail.el=e,this.el.emit("hitend",this.eventDetail)}});function r(e,n){e.length=0;for(let i=0;i<n.length;i++)e[i]=n[i]}return vN}var Q6;function _me(){return Q6||(Q6=1,gme(),yme(),vme(),xme(),bme()),W6}var J6={},xN,eG;function wme(){return eG||(eG=1,xN=AFRAME.registerComponent("nav-mesh",{schema:{nodeName:{type:"string"}},init:function(){this.system=this.el.sceneEl.systems.nav,this.hasLoadedNavMesh=!1,this.nodeName=this.data.nodeName,this.el.addEventListener("object3dset",this.loadNavMesh.bind(this))},play:function(){this.hasLoadedNavMesh||this.loadNavMesh()},loadNavMesh:function(){var r=this;const e=this.el.getObject3D("mesh");if(this.el.sceneEl.object3D,!e)return;let n;if(e.traverse(s=>{s.isMesh&&(!r.nodeName||s.name===r.nodeName)&&(n=s)}),!n)return;const i=n.geometry.clone();n.updateWorldMatrix(!0,!1),i.applyMatrix4(n.matrixWorld),this.system.setNavMeshGeometry(i),this.hasLoadedNavMesh=!0}})),xN}var bN,tG;function Sme(){return tG||(tG=1,bN=AFRAME.registerComponent("nav-agent",{schema:{destination:{type:"vec3"},active:{default:!1},speed:{default:2}},init:function(){this.system=this.el.sceneEl.systems.nav,this.system.addAgent(this),this.group=null,this.path=[],this.raycaster=new THREE.Raycaster},remove:function(){this.system.removeAgent(this)},update:function(){this.path.length=0},updateNavLocation:function(){this.group=null,this.path=[]},tick:function(){const r=new THREE.Vector3,e=new THREE.Vector3,n=new THREE.Vector3;return function(i,s){const a=this.el,o=this.data,l=this.raycaster,c=o.speed*s/1e3;if(!o.active)return;if(!this.path.length){const g=this.el.object3D.position;this.group=this.group||this.system.getGroup(g),this.path=this.system.getPath(g,r.copy(o.destination),this.group)||[],a.emit("navigation-start")}if(!this.path.length){console.warn("[nav] Unable to find path to %o.",o.destination),this.el.setAttribute("nav-agent",{active:!1}),a.emit("navigation-end");return}const u=a.object3D.position,h=this.path[0];e.subVectors(h,u);const d=e.length();let f;if(d<c){if(this.path.shift(),!this.path.length){this.el.setAttribute("nav-agent",{active:!1}),a.emit("navigation-end");return}n.copy(u),f=this.path[0]}else n.copy(e.setLength(c)).add(u),f=h;f.y=u.y,a.object3D.lookAt(f),l.ray.origin.copy(n),l.ray.origin.y+=1.5,l.ray.direction={x:0,y:-1,z:0};const p=l.intersectObject(this.system.getNavMesh());p.length?(e.subVectors(p[0].point,u),u.add(e.setLength(c))):u.copy(n)}}()})),bN}/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const g_="175",ul={ROTATE:0,DOLLY:1,PAN:2},wg={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},GJ=0,e3=1,VJ=2,Tme=0,sj=1,Eme=2,Ao=3,Ja=0,Wr=1,Ea=2,eo=0,hl=1,Zg=2,Qg=3,Jg=4,Fg=5,ua=100,aj=101,oj=102,HJ=103,WJ=104,Uu=200,lj=201,cj=202,uj=203,qx=204,Xx=205,hj=206,dj=207,fj=208,pj=209,mj=210,Mme=211,Ame=212,Cme=213,Nme=214,Kx=0,Yx=1,Zx=2,Dd=3,Qx=4,Jx=5,eb=6,tb=7,y_=0,qJ=1,XJ=2,to=0,KJ=1,YJ=2,ZJ=3,QJ=4,Pme=5,JJ=6,eee=7,gj=300,ml=301,gl=302,Ld=303,Fd=304,bp=306,_p=1e3,Nc=1001,wp=1002,ei=1003,yj=1004,qu=1005,ds=1006,Bg=1007,Xa=1008,Ri=1009,cp=1010,up=1011,tc=1012,Cs=1013,Vr=1014,zi=1015,da=1016,bM=1017,_M=1018,ko=1020,wM=35902,vj=1021,v_=1022,Oi=1023,xj=1024,bj=1025,Io=1026,Do=1027,x_=1028,r0=1029,Sp=1030,i0=1031,Rme=1032,s0=1033,hp=33776,Ad=33777,Cd=33778,Nd=33779,nb=35840,rb=35841,ib=35842,sb=35843,ab=36196,ey=37492,ty=37496,ny=37808,ry=37809,iy=37810,sy=37811,ay=37812,oy=37813,ly=37814,cy=37815,uy=37816,hy=37817,dy=37818,fy=37819,py=37820,my=37821,dp=36492,t3=36494,n3=36495,_j=36283,ob=36284,lb=36285,cb=36286,Ome=3200,kme=3201,ph=0,tee=1,Po="",dn="srgb",Fc="srgb-linear",LT="linear",Ir="srgb",Ime=0,Gf=7680,Dme=7681,Lme=7682,Fme=7683,Bme=34055,jme=34056,Ume=5386,zme=512,$me=513,Gme=514,Vme=515,Hme=516,Wme=517,qme=518,r3=519,wj=512,SM=513,Sj=514,TM=515,Tj=516,Ej=517,Mj=518,Aj=519,FT=35044,Sg=35048,nG="300 es",Ka=2e3,Bd=2001;let Sh=class{addEventListener(e,n){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(n)===-1&&i[e].push(n)}hasEventListener(e,n){const i=this._listeners;return i===void 0?!1:i[e]!==void 0&&i[e].indexOf(n)!==-1}removeEventListener(e,n){const i=this._listeners;if(i===void 0)return;const s=i[e];if(s!==void 0){const a=s.indexOf(n);a!==-1&&s.splice(a,1)}}dispatchEvent(e){const n=this._listeners;if(n===void 0)return;const i=n[e.type];if(i!==void 0){e.target=this;const s=i.slice(0);for(let a=0,o=s.length;a<o;a++)s[a].call(this,e);e.target=null}}};const ea=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let rG=1234567;const mx=Math.PI/180,Tp=180/Math.PI;function ih(){const r=Math.random()*4294967295|0,e=Math.random()*4294967295|0,n=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(ea[r&255]+ea[r>>8&255]+ea[r>>16&255]+ea[r>>24&255]+"-"+ea[e&255]+ea[e>>8&255]+"-"+ea[e>>16&15|64]+ea[e>>24&255]+"-"+ea[n&63|128]+ea[n>>8&255]+"-"+ea[n>>16&255]+ea[n>>24&255]+ea[i&255]+ea[i>>8&255]+ea[i>>16&255]+ea[i>>24&255]).toLowerCase()}function Kn(r,e,n){return Math.max(e,Math.min(n,r))}function Cj(r,e){return(r%e+e)%e}function Xme(r,e,n,i,s){return i+(r-e)*(s-i)/(n-e)}function Kme(r,e,n){return r!==e?(n-r)/(e-r):0}function gx(r,e,n){return(1-n)*r+n*e}function Yme(r,e,n,i){return gx(r,e,1-Math.exp(-n*i))}function Zme(r,e=1){return e-Math.abs(Cj(r,e*2)-e)}function Qme(r,e,n){return r<=e?0:r>=n?1:(r=(r-e)/(n-e),r*r*(3-2*r))}function Jme(r,e,n){return r<=e?0:r>=n?1:(r=(r-e)/(n-e),r*r*r*(r*(r*6-15)+10))}function ege(r,e){return r+Math.floor(Math.random()*(e-r+1))}function tge(r,e){return r+Math.random()*(e-r)}function nge(r){return r*(.5-Math.random())}function rge(r){r!==void 0&&(rG=r);let e=rG+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function ige(r){return r*mx}function sge(r){return r*Tp}function age(r){return(r&r-1)===0&&r!==0}function oge(r){return Math.pow(2,Math.ceil(Math.log(r)/Math.LN2))}function lge(r){return Math.pow(2,Math.floor(Math.log(r)/Math.LN2))}function cge(r,e,n,i,s){const a=Math.cos,o=Math.sin,l=a(n/2),c=o(n/2),u=a((e+i)/2),h=o((e+i)/2),d=a((e-i)/2),f=o((e-i)/2),p=a((i-e)/2),g=o((i-e)/2);switch(s){case"XYX":r.set(l*h,c*d,c*f,l*u);break;case"YZY":r.set(c*f,l*h,c*d,l*u);break;case"ZXZ":r.set(c*d,c*f,l*h,l*u);break;case"XZX":r.set(l*h,c*g,c*p,l*u);break;case"YXY":r.set(c*p,l*h,c*g,l*u);break;case"ZYZ":r.set(c*g,c*p,l*h,l*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+s)}}function Ma(r,e){switch(e.constructor){case Float32Array:return r;case Uint32Array:return r/4294967295;case Uint16Array:return r/65535;case Uint8Array:return r/255;case Int32Array:return Math.max(r/2147483647,-1);case Int16Array:return Math.max(r/32767,-1);case Int8Array:return Math.max(r/127,-1);default:throw new Error("Invalid component type.")}}function Xn(r,e){switch(e.constructor){case Float32Array:return r;case Uint32Array:return Math.round(r*4294967295);case Uint16Array:return Math.round(r*65535);case Uint8Array:return Math.round(r*255);case Int32Array:return Math.round(r*2147483647);case Int16Array:return Math.round(r*32767);case Int8Array:return Math.round(r*127);default:throw new Error("Invalid component type.")}}const BT={DEG2RAD:mx,RAD2DEG:Tp,generateUUID:ih,clamp:Kn,euclideanModulo:Cj,mapLinear:Xme,inverseLerp:Kme,lerp:gx,damp:Yme,pingpong:Zme,smoothstep:Qme,smootherstep:Jme,randInt:ege,randFloat:tge,randFloatSpread:nge,seededRandom:rge,degToRad:ige,radToDeg:sge,isPowerOfTwo:age,ceilPowerOfTwo:oge,floorPowerOfTwo:lge,setQuaternionFromProperEuler:cge,normalize:Xn,denormalize:Ma};let dt=class nee{constructor(e=0,n=0){nee.prototype.isVector2=!0,this.x=e,this.y=n}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,n){return this.x=e,this.y=n,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const n=this.x,i=this.y,s=e.elements;return this.x=s[0]*n+s[3]*i+s[6],this.y=s[1]*n+s[4]*i+s[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,n){return this.x=Kn(this.x,e.x,n.x),this.y=Kn(this.y,e.y,n.y),this}clampScalar(e,n){return this.x=Kn(this.x,e,n),this.y=Kn(this.y,e,n),this}clampLength(e,n){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Kn(i,e,n))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const i=this.dot(e)/n;return Math.acos(Kn(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,i=this.y-e.y;return n*n+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this}lerpVectors(e,n,i){return this.x=e.x+(n.x-e.x)*i,this.y=e.y+(n.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this}rotateAround(e,n){const i=Math.cos(n),s=Math.sin(n),a=this.x-e.x,o=this.y-e.y;return this.x=a*i-o*s+e.x,this.y=a*s+o*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}},zn=class ree{constructor(e,n,i,s,a,o,l,c,u){ree.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,n,i,s,a,o,l,c,u)}set(e,n,i,s,a,o,l,c,u){const h=this.elements;return h[0]=e,h[1]=s,h[2]=l,h[3]=n,h[4]=a,h[5]=c,h[6]=i,h[7]=o,h[8]=u,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const n=this.elements,i=e.elements;return n[0]=i[0],n[1]=i[1],n[2]=i[2],n[3]=i[3],n[4]=i[4],n[5]=i[5],n[6]=i[6],n[7]=i[7],n[8]=i[8],this}extractBasis(e,n,i){return e.setFromMatrix3Column(this,0),n.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const n=e.elements;return this.set(n[0],n[4],n[8],n[1],n[5],n[9],n[2],n[6],n[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const i=e.elements,s=n.elements,a=this.elements,o=i[0],l=i[3],c=i[6],u=i[1],h=i[4],d=i[7],f=i[2],p=i[5],g=i[8],v=s[0],x=s[3],_=s[6],E=s[1],S=s[4],T=s[7],M=s[2],C=s[5],A=s[8];return a[0]=o*v+l*E+c*M,a[3]=o*x+l*S+c*C,a[6]=o*_+l*T+c*A,a[1]=u*v+h*E+d*M,a[4]=u*x+h*S+d*C,a[7]=u*_+h*T+d*A,a[2]=f*v+p*E+g*M,a[5]=f*x+p*S+g*C,a[8]=f*_+p*T+g*A,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=e,n[4]*=e,n[7]*=e,n[2]*=e,n[5]*=e,n[8]*=e,this}determinant(){const e=this.elements,n=e[0],i=e[1],s=e[2],a=e[3],o=e[4],l=e[5],c=e[6],u=e[7],h=e[8];return n*o*h-n*l*u-i*a*h+i*l*c+s*a*u-s*o*c}invert(){const e=this.elements,n=e[0],i=e[1],s=e[2],a=e[3],o=e[4],l=e[5],c=e[6],u=e[7],h=e[8],d=h*o-l*u,f=l*c-h*a,p=u*a-o*c,g=n*d+i*f+s*p;if(g===0)return this.set(0,0,0,0,0,0,0,0,0);const v=1/g;return e[0]=d*v,e[1]=(s*u-h*i)*v,e[2]=(l*i-s*o)*v,e[3]=f*v,e[4]=(h*n-s*c)*v,e[5]=(s*a-l*n)*v,e[6]=p*v,e[7]=(i*c-u*n)*v,e[8]=(o*n-i*a)*v,this}transpose(){let e;const n=this.elements;return e=n[1],n[1]=n[3],n[3]=e,e=n[2],n[2]=n[6],n[6]=e,e=n[5],n[5]=n[7],n[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const n=this.elements;return e[0]=n[0],e[1]=n[3],e[2]=n[6],e[3]=n[1],e[4]=n[4],e[5]=n[7],e[6]=n[2],e[7]=n[5],e[8]=n[8],this}setUvTransform(e,n,i,s,a,o,l){const c=Math.cos(a),u=Math.sin(a);return this.set(i*c,i*u,-i*(c*o+u*l)+o+e,-s*u,s*c,-s*(-u*o+c*l)+l+n,0,0,1),this}scale(e,n){return this.premultiply(_N.makeScale(e,n)),this}rotate(e){return this.premultiply(_N.makeRotation(-e)),this}translate(e,n){return this.premultiply(_N.makeTranslation(e,n)),this}makeTranslation(e,n){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,n,0,0,1),this}makeRotation(e){const n=Math.cos(e),i=Math.sin(e);return this.set(n,-i,0,i,n,0,0,0,1),this}makeScale(e,n){return this.set(e,0,0,0,n,0,0,0,1),this}equals(e){const n=this.elements,i=e.elements;for(let s=0;s<9;s++)if(n[s]!==i[s])return!1;return!0}fromArray(e,n=0){for(let i=0;i<9;i++)this.elements[i]=e[i+n];return this}toArray(e=[],n=0){const i=this.elements;return e[n]=i[0],e[n+1]=i[1],e[n+2]=i[2],e[n+3]=i[3],e[n+4]=i[4],e[n+5]=i[5],e[n+6]=i[6],e[n+7]=i[7],e[n+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}};const _N=new zn;function Nj(r){for(let e=r.length-1;e>=0;--e)if(r[e]>=65535)return!0;return!1}function ub(r){return document.createElementNS("http://www.w3.org/1999/xhtml",r)}function iee(){const r=ub("canvas");return r.style.display="block",r}const iG={};function ic(r){r in iG||(iG[r]=!0,console.warn(r))}function uge(r,e,n){return new Promise(function(i,s){function a(){switch(r.clientWaitSync(e,r.SYNC_FLUSH_COMMANDS_BIT,0)){case r.WAIT_FAILED:s();break;case r.TIMEOUT_EXPIRED:setTimeout(a,n);break;default:i()}}setTimeout(a,n)})}function hge(r){const e=r.elements;e[2]=.5*e[2]+.5*e[3],e[6]=.5*e[6]+.5*e[7],e[10]=.5*e[10]+.5*e[11],e[14]=.5*e[14]+.5*e[15]}function dge(r){const e=r.elements;e[11]===-1?(e[10]=-e[10]-1,e[14]=-e[14]):(e[10]=-e[10],e[14]=-e[14]+1)}const sG=new zn().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),aG=new zn().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function fge(){const r={enabled:!0,workingColorSpace:Fc,spaces:{},convert:function(s,a,o){return this.enabled===!1||a===o||!a||!o||(this.spaces[a].transfer===Ir&&(s.r=sh(s.r),s.g=sh(s.g),s.b=sh(s.b)),this.spaces[a].primaries!==this.spaces[o].primaries&&(s.applyMatrix3(this.spaces[a].toXYZ),s.applyMatrix3(this.spaces[o].fromXYZ)),this.spaces[o].transfer===Ir&&(s.r=jg(s.r),s.g=jg(s.g),s.b=jg(s.b))),s},fromWorkingColorSpace:function(s,a){return this.convert(s,this.workingColorSpace,a)},toWorkingColorSpace:function(s,a){return this.convert(s,a,this.workingColorSpace)},getPrimaries:function(s){return this.spaces[s].primaries},getTransfer:function(s){return s===Po?LT:this.spaces[s].transfer},getLuminanceCoefficients:function(s,a=this.workingColorSpace){return s.fromArray(this.spaces[a].luminanceCoefficients)},define:function(s){Object.assign(this.spaces,s)},_getMatrix:function(s,a,o){return s.copy(this.spaces[a].toXYZ).multiply(this.spaces[o].fromXYZ)},_getDrawingBufferColorSpace:function(s){return this.spaces[s].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(s=this.workingColorSpace){return this.spaces[s].workingColorSpaceConfig.unpackColorSpace}},e=[.64,.33,.3,.6,.15,.06],n=[.2126,.7152,.0722],i=[.3127,.329];return r.define({[Fc]:{primaries:e,whitePoint:i,transfer:LT,toXYZ:sG,fromXYZ:aG,luminanceCoefficients:n,workingColorSpaceConfig:{unpackColorSpace:dn},outputColorSpaceConfig:{drawingBufferColorSpace:dn}},[dn]:{primaries:e,whitePoint:i,transfer:Ir,toXYZ:sG,fromXYZ:aG,luminanceCoefficients:n,outputColorSpaceConfig:{drawingBufferColorSpace:dn}}}),r}const tr=fge();function sh(r){return r<.04045?r*.0773993808:Math.pow(r*.9478672986+.0521327014,2.4)}function jg(r){return r<.0031308?r*12.92:1.055*Math.pow(r,.41666)-.055}let km,pge=class{static getDataURL(e,n="image/png"){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let i;if(e instanceof HTMLCanvasElement)i=e;else{km===void 0&&(km=ub("canvas")),km.width=e.width,km.height=e.height;const s=km.getContext("2d");e instanceof ImageData?s.putImageData(e,0,0):s.drawImage(e,0,0,e.width,e.height),i=km}return i.toDataURL(n)}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const n=ub("canvas");n.width=e.width,n.height=e.height;const i=n.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const s=i.getImageData(0,0,e.width,e.height),a=s.data;for(let o=0;o<a.length;o++)a[o]=sh(a[o]/255)*255;return i.putImageData(s,0,0),n}else if(e.data){const n=e.data.slice(0);for(let i=0;i<n.length;i++)n instanceof Uint8Array||n instanceof Uint8ClampedArray?n[i]=Math.floor(sh(n[i]/255)*255):n[i]=sh(n[i]);return{data:n,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}},mge=0,Pj=class{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:mge++}),this.uuid=ih(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},s=this.data;if(s!==null){let a;if(Array.isArray(s)){a=[];for(let o=0,l=s.length;o<l;o++)s[o].isDataTexture?a.push(wN(s[o].image)):a.push(wN(s[o]))}else a=wN(s);i.url=a}return n||(e.images[this.uuid]=i),i}};function wN(r){return typeof HTMLImageElement<"u"&&r instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&r instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&r instanceof ImageBitmap?pge.getDataURL(r):r.data?{data:Array.from(r.data),width:r.width,height:r.height,type:r.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let gge=0,Oa=class sT extends Sh{constructor(e=sT.DEFAULT_IMAGE,n=sT.DEFAULT_MAPPING,i=Nc,s=Nc,a=ds,o=Xa,l=Oi,c=Ri,u=sT.DEFAULT_ANISOTROPY,h=Po){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:gge++}),this.uuid=ih(),this.name="",this.source=new Pj(e),this.mipmaps=[],this.mapping=n,this.channel=0,this.wrapS=i,this.wrapT=s,this.magFilter=a,this.minFilter=o,this.anisotropy=u,this.format=l,this.internalFormat=null,this.type=c,this.offset=new dt(0,0),this.repeat=new dt(1,1),this.center=new dt(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new zn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=h,this.userData={},this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),n||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==gj)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case _p:e.x=e.x-Math.floor(e.x);break;case Nc:e.x=e.x<0?0:1;break;case wp:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case _p:e.y=e.y-Math.floor(e.y);break;case Nc:e.y=e.y<0?0:1;break;case wp:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}};Oa.DEFAULT_IMAGE=null;Oa.DEFAULT_MAPPING=gj;Oa.DEFAULT_ANISOTROPY=1;let In=class see{constructor(e=0,n=0,i=0,s=1){see.prototype.isVector4=!0,this.x=e,this.y=n,this.z=i,this.w=s}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,n,i,s){return this.x=e,this.y=n,this.z=i,this.w=s,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;case 3:this.w=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this.w=e.w+n.w,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this.w+=e.w*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this.w=e.w-n.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const n=this.x,i=this.y,s=this.z,a=this.w,o=e.elements;return this.x=o[0]*n+o[4]*i+o[8]*s+o[12]*a,this.y=o[1]*n+o[5]*i+o[9]*s+o[13]*a,this.z=o[2]*n+o[6]*i+o[10]*s+o[14]*a,this.w=o[3]*n+o[7]*i+o[11]*s+o[15]*a,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const n=Math.sqrt(1-e.w*e.w);return n<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/n,this.y=e.y/n,this.z=e.z/n),this}setAxisAngleFromRotationMatrix(e){let n,i,s,a;const c=e.elements,u=c[0],h=c[4],d=c[8],f=c[1],p=c[5],g=c[9],v=c[2],x=c[6],_=c[10];if(Math.abs(h-f)<.01&&Math.abs(d-v)<.01&&Math.abs(g-x)<.01){if(Math.abs(h+f)<.1&&Math.abs(d+v)<.1&&Math.abs(g+x)<.1&&Math.abs(u+p+_-3)<.1)return this.set(1,0,0,0),this;n=Math.PI;const S=(u+1)/2,T=(p+1)/2,M=(_+1)/2,C=(h+f)/4,A=(d+v)/4,P=(g+x)/4;return S>T&&S>M?S<.01?(i=0,s=.707106781,a=.707106781):(i=Math.sqrt(S),s=C/i,a=A/i):T>M?T<.01?(i=.707106781,s=0,a=.707106781):(s=Math.sqrt(T),i=C/s,a=P/s):M<.01?(i=.707106781,s=.707106781,a=0):(a=Math.sqrt(M),i=A/a,s=P/a),this.set(i,s,a,n),this}let E=Math.sqrt((x-g)*(x-g)+(d-v)*(d-v)+(f-h)*(f-h));return Math.abs(E)<.001&&(E=1),this.x=(x-g)/E,this.y=(d-v)/E,this.z=(f-h)/E,this.w=Math.acos((u+p+_-1)/2),this}setFromMatrixPosition(e){const n=e.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this.w=n[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,n){return this.x=Kn(this.x,e.x,n.x),this.y=Kn(this.y,e.y,n.y),this.z=Kn(this.z,e.z,n.z),this.w=Kn(this.w,e.w,n.w),this}clampScalar(e,n){return this.x=Kn(this.x,e,n),this.y=Kn(this.y,e,n),this.z=Kn(this.z,e,n),this.w=Kn(this.w,e,n),this}clampLength(e,n){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Kn(i,e,n))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this.w+=(e.w-this.w)*n,this}lerpVectors(e,n,i){return this.x=e.x+(n.x-e.x)*i,this.y=e.y+(n.y-e.y)*i,this.z=e.z+(n.z-e.z)*i,this.w=e.w+(n.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this.w=e[n+3],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e[n+3]=this.w,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this.w=e.getW(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}},Fp=class extends Sh{constructor(e=1,n=1,i={}){super(),this.isRenderTarget=!0,this.width=e,this.height=n,this.depth=1,this.scissor=new In(0,0,e,n),this.scissorTest=!1,this.viewport=new In(0,0,e,n);const s={width:e,height:n,depth:1};i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:ds,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},i);const a=new Oa(s,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace);a.flipY=!1,a.generateMipmaps=i.generateMipmaps,a.internalFormat=i.internalFormat,this.textures=[];const o=i.count;for(let l=0;l<o;l++)this.textures[l]=a.clone(),this.textures[l].isRenderTargetTexture=!0,this.textures[l].renderTarget=this;this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.resolveDepthBuffer=i.resolveDepthBuffer,this.resolveStencilBuffer=i.resolveStencilBuffer,this._depthTexture=i.depthTexture,this.samples=i.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),e!==null&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,n,i=1){if(this.width!==e||this.height!==n||this.depth!==i){this.width=e,this.height=n,this.depth=i;for(let s=0,a=this.textures.length;s<a;s++)this.textures[s].image.width=e,this.textures[s].image.height=n,this.textures[s].image.depth=i;this.dispose()}this.viewport.set(0,0,e,n),this.scissor.set(0,0,e,n)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let n=0,i=e.textures.length;n<i;n++){this.textures[n]=e.textures[n].clone(),this.textures[n].isRenderTargetTexture=!0,this.textures[n].renderTarget=this;const s=Object.assign({},e.textures[n].image);this.textures[n].source=new Pj(s)}return this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}},jd=class extends Fp{constructor(e=1,n=1,i={}){super(e,n,i),this.isWebGLRenderTarget=!0}};class Rj extends Oa{constructor(e=null,n=1,i=1,s=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:n,height:i,depth:s},this.magFilter=ei,this.minFilter=ei,this.wrapR=Nc,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class yge extends Oa{constructor(e=null,n=1,i=1,s=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:n,height:i,depth:s},this.magFilter=ei,this.minFilter=ei,this.wrapR=Nc,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}let ac=class{constructor(e=0,n=0,i=0,s=1){this.isQuaternion=!0,this._x=e,this._y=n,this._z=i,this._w=s}static slerpFlat(e,n,i,s,a,o,l){let c=i[s+0],u=i[s+1],h=i[s+2],d=i[s+3];const f=a[o+0],p=a[o+1],g=a[o+2],v=a[o+3];if(l===0){e[n+0]=c,e[n+1]=u,e[n+2]=h,e[n+3]=d;return}if(l===1){e[n+0]=f,e[n+1]=p,e[n+2]=g,e[n+3]=v;return}if(d!==v||c!==f||u!==p||h!==g){let x=1-l;const _=c*f+u*p+h*g+d*v,E=_>=0?1:-1,S=1-_*_;if(S>Number.EPSILON){const M=Math.sqrt(S),C=Math.atan2(M,_*E);x=Math.sin(x*C)/M,l=Math.sin(l*C)/M}const T=l*E;if(c=c*x+f*T,u=u*x+p*T,h=h*x+g*T,d=d*x+v*T,x===1-l){const M=1/Math.sqrt(c*c+u*u+h*h+d*d);c*=M,u*=M,h*=M,d*=M}}e[n]=c,e[n+1]=u,e[n+2]=h,e[n+3]=d}static multiplyQuaternionsFlat(e,n,i,s,a,o){const l=i[s],c=i[s+1],u=i[s+2],h=i[s+3],d=a[o],f=a[o+1],p=a[o+2],g=a[o+3];return e[n]=l*g+h*d+c*p-u*f,e[n+1]=c*g+h*f+u*d-l*p,e[n+2]=u*g+h*p+l*f-c*d,e[n+3]=h*g-l*d-c*f-u*p,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,n,i,s){return this._x=e,this._y=n,this._z=i,this._w=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,n=!0){const i=e._x,s=e._y,a=e._z,o=e._order,l=Math.cos,c=Math.sin,u=l(i/2),h=l(s/2),d=l(a/2),f=c(i/2),p=c(s/2),g=c(a/2);switch(o){case"XYZ":this._x=f*h*d+u*p*g,this._y=u*p*d-f*h*g,this._z=u*h*g+f*p*d,this._w=u*h*d-f*p*g;break;case"YXZ":this._x=f*h*d+u*p*g,this._y=u*p*d-f*h*g,this._z=u*h*g-f*p*d,this._w=u*h*d+f*p*g;break;case"ZXY":this._x=f*h*d-u*p*g,this._y=u*p*d+f*h*g,this._z=u*h*g+f*p*d,this._w=u*h*d-f*p*g;break;case"ZYX":this._x=f*h*d-u*p*g,this._y=u*p*d+f*h*g,this._z=u*h*g-f*p*d,this._w=u*h*d+f*p*g;break;case"YZX":this._x=f*h*d+u*p*g,this._y=u*p*d+f*h*g,this._z=u*h*g-f*p*d,this._w=u*h*d-f*p*g;break;case"XZY":this._x=f*h*d-u*p*g,this._y=u*p*d-f*h*g,this._z=u*h*g+f*p*d,this._w=u*h*d+f*p*g;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return n===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,n){const i=n/2,s=Math.sin(i);return this._x=e.x*s,this._y=e.y*s,this._z=e.z*s,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const n=e.elements,i=n[0],s=n[4],a=n[8],o=n[1],l=n[5],c=n[9],u=n[2],h=n[6],d=n[10],f=i+l+d;if(f>0){const p=.5/Math.sqrt(f+1);this._w=.25/p,this._x=(h-c)*p,this._y=(a-u)*p,this._z=(o-s)*p}else if(i>l&&i>d){const p=2*Math.sqrt(1+i-l-d);this._w=(h-c)/p,this._x=.25*p,this._y=(s+o)/p,this._z=(a+u)/p}else if(l>d){const p=2*Math.sqrt(1+l-i-d);this._w=(a-u)/p,this._x=(s+o)/p,this._y=.25*p,this._z=(c+h)/p}else{const p=2*Math.sqrt(1+d-i-l);this._w=(o-s)/p,this._x=(a+u)/p,this._y=(c+h)/p,this._z=.25*p}return this._onChangeCallback(),this}setFromUnitVectors(e,n){let i=e.dot(n)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*n.z-e.z*n.y,this._y=e.z*n.x-e.x*n.z,this._z=e.x*n.y-e.y*n.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Kn(this.dot(e),-1,1)))}rotateTowards(e,n){const i=this.angleTo(e);if(i===0)return this;const s=Math.min(1,n/i);return this.slerp(e,s),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,n){const i=e._x,s=e._y,a=e._z,o=e._w,l=n._x,c=n._y,u=n._z,h=n._w;return this._x=i*h+o*l+s*u-a*c,this._y=s*h+o*c+a*l-i*u,this._z=a*h+o*u+i*c-s*l,this._w=o*h-i*l-s*c-a*u,this._onChangeCallback(),this}slerp(e,n){if(n===0)return this;if(n===1)return this.copy(e);const i=this._x,s=this._y,a=this._z,o=this._w;let l=o*e._w+i*e._x+s*e._y+a*e._z;if(l<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,l=-l):this.copy(e),l>=1)return this._w=o,this._x=i,this._y=s,this._z=a,this;const c=1-l*l;if(c<=Number.EPSILON){const p=1-n;return this._w=p*o+n*this._w,this._x=p*i+n*this._x,this._y=p*s+n*this._y,this._z=p*a+n*this._z,this.normalize(),this}const u=Math.sqrt(c),h=Math.atan2(u,l),d=Math.sin((1-n)*h)/u,f=Math.sin(n*h)/u;return this._w=o*d+this._w*f,this._x=i*d+this._x*f,this._y=s*d+this._y*f,this._z=a*d+this._z*f,this._onChangeCallback(),this}slerpQuaternions(e,n,i){return this.copy(e).slerp(n,i)}random(){const e=2*Math.PI*Math.random(),n=2*Math.PI*Math.random(),i=Math.random(),s=Math.sqrt(1-i),a=Math.sqrt(i);return this.set(s*Math.sin(e),s*Math.cos(e),a*Math.sin(n),a*Math.cos(n))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,n=0){return this._x=e[n],this._y=e[n+1],this._z=e[n+2],this._w=e[n+3],this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._w,e}fromBufferAttribute(e,n){return this._x=e.getX(n),this._y=e.getY(n),this._z=e.getZ(n),this._w=e.getW(n),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}},pe=class aee{constructor(e=0,n=0,i=0){aee.prototype.isVector3=!0,this.x=e,this.y=n,this.z=i}set(e,n,i){return i===void 0&&(i=this.z),this.x=e,this.y=n,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,n){return this.x=e.x*n.x,this.y=e.y*n.y,this.z=e.z*n.z,this}applyEuler(e){return this.applyQuaternion(oG.setFromEuler(e))}applyAxisAngle(e,n){return this.applyQuaternion(oG.setFromAxisAngle(e,n))}applyMatrix3(e){const n=this.x,i=this.y,s=this.z,a=e.elements;return this.x=a[0]*n+a[3]*i+a[6]*s,this.y=a[1]*n+a[4]*i+a[7]*s,this.z=a[2]*n+a[5]*i+a[8]*s,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const n=this.x,i=this.y,s=this.z,a=e.elements,o=1/(a[3]*n+a[7]*i+a[11]*s+a[15]);return this.x=(a[0]*n+a[4]*i+a[8]*s+a[12])*o,this.y=(a[1]*n+a[5]*i+a[9]*s+a[13])*o,this.z=(a[2]*n+a[6]*i+a[10]*s+a[14])*o,this}applyQuaternion(e){const n=this.x,i=this.y,s=this.z,a=e.x,o=e.y,l=e.z,c=e.w,u=2*(o*s-l*i),h=2*(l*n-a*s),d=2*(a*i-o*n);return this.x=n+c*u+o*d-l*h,this.y=i+c*h+l*u-a*d,this.z=s+c*d+a*h-o*u,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const n=this.x,i=this.y,s=this.z,a=e.elements;return this.x=a[0]*n+a[4]*i+a[8]*s,this.y=a[1]*n+a[5]*i+a[9]*s,this.z=a[2]*n+a[6]*i+a[10]*s,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,n){return this.x=Kn(this.x,e.x,n.x),this.y=Kn(this.y,e.y,n.y),this.z=Kn(this.z,e.z,n.z),this}clampScalar(e,n){return this.x=Kn(this.x,e,n),this.y=Kn(this.y,e,n),this.z=Kn(this.z,e,n),this}clampLength(e,n){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Kn(i,e,n))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this}lerpVectors(e,n,i){return this.x=e.x+(n.x-e.x)*i,this.y=e.y+(n.y-e.y)*i,this.z=e.z+(n.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,n){const i=e.x,s=e.y,a=e.z,o=n.x,l=n.y,c=n.z;return this.x=s*c-a*l,this.y=a*o-i*c,this.z=i*l-s*o,this}projectOnVector(e){const n=e.lengthSq();if(n===0)return this.set(0,0,0);const i=e.dot(this)/n;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return SN.copy(this).projectOnVector(e),this.sub(SN)}reflect(e){return this.sub(SN.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const i=this.dot(e)/n;return Math.acos(Kn(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,i=this.y-e.y,s=this.z-e.z;return n*n+i*i+s*s}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,n,i){const s=Math.sin(n)*e;return this.x=s*Math.sin(i),this.y=Math.cos(n)*e,this.z=s*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,n,i){return this.x=e*Math.sin(n),this.y=i,this.z=e*Math.cos(n),this}setFromMatrixPosition(e){const n=e.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this}setFromMatrixScale(e){const n=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),s=this.setFromMatrixColumn(e,2).length();return this.x=n,this.y=i,this.z=s,this}setFromMatrixColumn(e,n){return this.fromArray(e.elements,n*4)}setFromMatrix3Column(e,n){return this.fromArray(e.elements,n*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,n=Math.random()*2-1,i=Math.sqrt(1-n*n);return this.x=i*Math.cos(e),this.y=n,this.z=i*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}};const SN=new pe,oG=new ac;let Bp=class{constructor(e=new pe(1/0,1/0,1/0),n=new pe(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromArray(e){this.makeEmpty();for(let n=0,i=e.length;n<i;n+=3)this.expandByPoint(Il.fromArray(e,n));return this}setFromBufferAttribute(e){this.makeEmpty();for(let n=0,i=e.count;n<i;n++)this.expandByPoint(Il.fromBufferAttribute(e,n));return this}setFromPoints(e){this.makeEmpty();for(let n=0,i=e.length;n<i;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const i=Il.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,n=!1){return this.makeEmpty(),this.expandByObject(e,n)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,n=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(i!==void 0){const a=i.getAttribute("position");if(n===!0&&a!==void 0&&e.isInstancedMesh!==!0)for(let o=0,l=a.count;o<l;o++)e.isMesh===!0?e.getVertexPosition(o,Il):Il.fromBufferAttribute(a,o),Il.applyMatrix4(e.matrixWorld),this.expandByPoint(Il);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),v1.copy(e.boundingBox)):(i.boundingBox===null&&i.computeBoundingBox(),v1.copy(i.boundingBox)),v1.applyMatrix4(e.matrixWorld),this.union(v1)}const s=e.children;for(let a=0,o=s.length;a<o;a++)this.expandByObject(s[a],n);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,Il),Il.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let n,i;return e.normal.x>0?(n=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(n=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(n+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(n+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(n+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(n+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),n<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(sv),x1.subVectors(this.max,sv),Im.subVectors(e.a,sv),Dm.subVectors(e.b,sv),Lm.subVectors(e.c,sv),ed.subVectors(Dm,Im),td.subVectors(Lm,Dm),Nf.subVectors(Im,Lm);let n=[0,-ed.z,ed.y,0,-td.z,td.y,0,-Nf.z,Nf.y,ed.z,0,-ed.x,td.z,0,-td.x,Nf.z,0,-Nf.x,-ed.y,ed.x,0,-td.y,td.x,0,-Nf.y,Nf.x,0];return!TN(n,Im,Dm,Lm,x1)||(n=[1,0,0,0,1,0,0,0,1],!TN(n,Im,Dm,Lm,x1))?!1:(b1.crossVectors(ed,td),n=[b1.x,b1.y,b1.z],TN(n,Im,Dm,Lm,x1))}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Il).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Il).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Eu[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Eu[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Eu[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Eu[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Eu[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Eu[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Eu[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Eu[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Eu),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}};const Eu=[new pe,new pe,new pe,new pe,new pe,new pe,new pe,new pe],Il=new pe,v1=new Bp,Im=new pe,Dm=new pe,Lm=new pe,ed=new pe,td=new pe,Nf=new pe,sv=new pe,x1=new pe,b1=new pe,Pf=new pe;function TN(r,e,n,i,s){for(let a=0,o=r.length-3;a<=o;a+=3){Pf.fromArray(r,a);const l=s.x*Math.abs(Pf.x)+s.y*Math.abs(Pf.y)+s.z*Math.abs(Pf.z),c=e.dot(Pf),u=n.dot(Pf),h=i.dot(Pf);if(Math.max(-Math.max(c,u,h),Math.min(c,u,h))>l)return!1}return!0}const vge=new Bp,av=new pe,EN=new pe;let b_=class{constructor(e=new pe,n=-1){this.isSphere=!0,this.center=e,this.radius=n}set(e,n){return this.center.copy(e),this.radius=n,this}setFromPoints(e,n){const i=this.center;n!==void 0?i.copy(n):vge.setFromPoints(e).getCenter(i);let s=0;for(let a=0,o=e.length;a<o;a++)s=Math.max(s,i.distanceToSquared(e[a]));return this.radius=Math.sqrt(s),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const n=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=n*n}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,n){const i=this.center.distanceToSquared(e);return n.copy(e),i>this.radius*this.radius&&(n.sub(this.center).normalize(),n.multiplyScalar(this.radius).add(this.center)),n}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;av.subVectors(e,this.center);const n=av.lengthSq();if(n>this.radius*this.radius){const i=Math.sqrt(n),s=(i-this.radius)*.5;this.center.addScaledVector(av,s/i),this.radius+=s}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(EN.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(av.copy(e.center).add(EN)),this.expandByPoint(av.copy(e.center).sub(EN))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}};const Mu=new pe,MN=new pe,_1=new pe,nd=new pe,AN=new pe,w1=new pe,CN=new pe;let EM=class{constructor(e=new pe,n=new pe(0,0,-1)){this.origin=e,this.direction=n}set(e,n){return this.origin.copy(e),this.direction.copy(n),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,n){return n.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Mu)),this}closestPointToPoint(e,n){n.subVectors(e,this.origin);const i=n.dot(this.direction);return i<0?n.copy(this.origin):n.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const n=Mu.subVectors(e,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(e):(Mu.copy(this.origin).addScaledVector(this.direction,n),Mu.distanceToSquared(e))}distanceSqToSegment(e,n,i,s){MN.copy(e).add(n).multiplyScalar(.5),_1.copy(n).sub(e).normalize(),nd.copy(this.origin).sub(MN);const a=e.distanceTo(n)*.5,o=-this.direction.dot(_1),l=nd.dot(this.direction),c=-nd.dot(_1),u=nd.lengthSq(),h=Math.abs(1-o*o);let d,f,p,g;if(h>0)if(d=o*c-l,f=o*l-c,g=a*h,d>=0)if(f>=-g)if(f<=g){const v=1/h;d*=v,f*=v,p=d*(d+o*f+2*l)+f*(o*d+f+2*c)+u}else f=a,d=Math.max(0,-(o*f+l)),p=-d*d+f*(f+2*c)+u;else f=-a,d=Math.max(0,-(o*f+l)),p=-d*d+f*(f+2*c)+u;else f<=-g?(d=Math.max(0,-(-o*a+l)),f=d>0?-a:Math.min(Math.max(-a,-c),a),p=-d*d+f*(f+2*c)+u):f<=g?(d=0,f=Math.min(Math.max(-a,-c),a),p=f*(f+2*c)+u):(d=Math.max(0,-(o*a+l)),f=d>0?a:Math.min(Math.max(-a,-c),a),p=-d*d+f*(f+2*c)+u);else f=o>0?-a:a,d=Math.max(0,-(o*f+l)),p=-d*d+f*(f+2*c)+u;return i&&i.copy(this.origin).addScaledVector(this.direction,d),s&&s.copy(MN).addScaledVector(_1,f),p}intersectSphere(e,n){Mu.subVectors(e.center,this.origin);const i=Mu.dot(this.direction),s=Mu.dot(Mu)-i*i,a=e.radius*e.radius;if(s>a)return null;const o=Math.sqrt(a-s),l=i-o,c=i+o;return c<0?null:l<0?this.at(c,n):this.at(l,n)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const n=e.normal.dot(this.direction);if(n===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/n;return i>=0?i:null}intersectPlane(e,n){const i=this.distanceToPlane(e);return i===null?null:this.at(i,n)}intersectsPlane(e){const n=e.distanceToPoint(this.origin);return n===0||e.normal.dot(this.direction)*n<0}intersectBox(e,n){let i,s,a,o,l,c;const u=1/this.direction.x,h=1/this.direction.y,d=1/this.direction.z,f=this.origin;return u>=0?(i=(e.min.x-f.x)*u,s=(e.max.x-f.x)*u):(i=(e.max.x-f.x)*u,s=(e.min.x-f.x)*u),h>=0?(a=(e.min.y-f.y)*h,o=(e.max.y-f.y)*h):(a=(e.max.y-f.y)*h,o=(e.min.y-f.y)*h),i>o||a>s||((a>i||isNaN(i))&&(i=a),(o<s||isNaN(s))&&(s=o),d>=0?(l=(e.min.z-f.z)*d,c=(e.max.z-f.z)*d):(l=(e.max.z-f.z)*d,c=(e.min.z-f.z)*d),i>c||l>s)||((l>i||i!==i)&&(i=l),(c<s||s!==s)&&(s=c),s<0)?null:this.at(i>=0?i:s,n)}intersectsBox(e){return this.intersectBox(e,Mu)!==null}intersectTriangle(e,n,i,s,a){AN.subVectors(n,e),w1.subVectors(i,e),CN.crossVectors(AN,w1);let o=this.direction.dot(CN),l;if(o>0){if(s)return null;l=1}else if(o<0)l=-1,o=-o;else return null;nd.subVectors(this.origin,e);const c=l*this.direction.dot(w1.crossVectors(nd,w1));if(c<0)return null;const u=l*this.direction.dot(AN.cross(nd));if(u<0||c+u>o)return null;const h=-l*nd.dot(CN);return h<0?null:this.at(h/o,a)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}},br=class i3{constructor(e,n,i,s,a,o,l,c,u,h,d,f,p,g,v,x){i3.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,n,i,s,a,o,l,c,u,h,d,f,p,g,v,x)}set(e,n,i,s,a,o,l,c,u,h,d,f,p,g,v,x){const _=this.elements;return _[0]=e,_[4]=n,_[8]=i,_[12]=s,_[1]=a,_[5]=o,_[9]=l,_[13]=c,_[2]=u,_[6]=h,_[10]=d,_[14]=f,_[3]=p,_[7]=g,_[11]=v,_[15]=x,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new i3().fromArray(this.elements)}copy(e){const n=this.elements,i=e.elements;return n[0]=i[0],n[1]=i[1],n[2]=i[2],n[3]=i[3],n[4]=i[4],n[5]=i[5],n[6]=i[6],n[7]=i[7],n[8]=i[8],n[9]=i[9],n[10]=i[10],n[11]=i[11],n[12]=i[12],n[13]=i[13],n[14]=i[14],n[15]=i[15],this}copyPosition(e){const n=this.elements,i=e.elements;return n[12]=i[12],n[13]=i[13],n[14]=i[14],this}setFromMatrix3(e){const n=e.elements;return this.set(n[0],n[3],n[6],0,n[1],n[4],n[7],0,n[2],n[5],n[8],0,0,0,0,1),this}extractBasis(e,n,i){return e.setFromMatrixColumn(this,0),n.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,n,i){return this.set(e.x,n.x,i.x,0,e.y,n.y,i.y,0,e.z,n.z,i.z,0,0,0,0,1),this}extractRotation(e){const n=this.elements,i=e.elements,s=1/Fm.setFromMatrixColumn(e,0).length(),a=1/Fm.setFromMatrixColumn(e,1).length(),o=1/Fm.setFromMatrixColumn(e,2).length();return n[0]=i[0]*s,n[1]=i[1]*s,n[2]=i[2]*s,n[3]=0,n[4]=i[4]*a,n[5]=i[5]*a,n[6]=i[6]*a,n[7]=0,n[8]=i[8]*o,n[9]=i[9]*o,n[10]=i[10]*o,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromEuler(e){const n=this.elements,i=e.x,s=e.y,a=e.z,o=Math.cos(i),l=Math.sin(i),c=Math.cos(s),u=Math.sin(s),h=Math.cos(a),d=Math.sin(a);if(e.order==="XYZ"){const f=o*h,p=o*d,g=l*h,v=l*d;n[0]=c*h,n[4]=-c*d,n[8]=u,n[1]=p+g*u,n[5]=f-v*u,n[9]=-l*c,n[2]=v-f*u,n[6]=g+p*u,n[10]=o*c}else if(e.order==="YXZ"){const f=c*h,p=c*d,g=u*h,v=u*d;n[0]=f+v*l,n[4]=g*l-p,n[8]=o*u,n[1]=o*d,n[5]=o*h,n[9]=-l,n[2]=p*l-g,n[6]=v+f*l,n[10]=o*c}else if(e.order==="ZXY"){const f=c*h,p=c*d,g=u*h,v=u*d;n[0]=f-v*l,n[4]=-o*d,n[8]=g+p*l,n[1]=p+g*l,n[5]=o*h,n[9]=v-f*l,n[2]=-o*u,n[6]=l,n[10]=o*c}else if(e.order==="ZYX"){const f=o*h,p=o*d,g=l*h,v=l*d;n[0]=c*h,n[4]=g*u-p,n[8]=f*u+v,n[1]=c*d,n[5]=v*u+f,n[9]=p*u-g,n[2]=-u,n[6]=l*c,n[10]=o*c}else if(e.order==="YZX"){const f=o*c,p=o*u,g=l*c,v=l*u;n[0]=c*h,n[4]=v-f*d,n[8]=g*d+p,n[1]=d,n[5]=o*h,n[9]=-l*h,n[2]=-u*h,n[6]=p*d+g,n[10]=f-v*d}else if(e.order==="XZY"){const f=o*c,p=o*u,g=l*c,v=l*u;n[0]=c*h,n[4]=-d,n[8]=u*h,n[1]=f*d+v,n[5]=o*h,n[9]=p*d-g,n[2]=g*d-p,n[6]=l*h,n[10]=v*d+f}return n[3]=0,n[7]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromQuaternion(e){return this.compose(xge,e,bge)}lookAt(e,n,i){const s=this.elements;return vo.subVectors(e,n),vo.lengthSq()===0&&(vo.z=1),vo.normalize(),rd.crossVectors(i,vo),rd.lengthSq()===0&&(Math.abs(i.z)===1?vo.x+=1e-4:vo.z+=1e-4,vo.normalize(),rd.crossVectors(i,vo)),rd.normalize(),S1.crossVectors(vo,rd),s[0]=rd.x,s[4]=S1.x,s[8]=vo.x,s[1]=rd.y,s[5]=S1.y,s[9]=vo.y,s[2]=rd.z,s[6]=S1.z,s[10]=vo.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const i=e.elements,s=n.elements,a=this.elements,o=i[0],l=i[4],c=i[8],u=i[12],h=i[1],d=i[5],f=i[9],p=i[13],g=i[2],v=i[6],x=i[10],_=i[14],E=i[3],S=i[7],T=i[11],M=i[15],C=s[0],A=s[4],P=s[8],R=s[12],O=s[1],D=s[5],F=s[9],U=s[13],B=s[2],W=s[6],j=s[10],$=s[14],z=s[3],Z=s[7],se=s[11],q=s[15];return a[0]=o*C+l*O+c*B+u*z,a[4]=o*A+l*D+c*W+u*Z,a[8]=o*P+l*F+c*j+u*se,a[12]=o*R+l*U+c*$+u*q,a[1]=h*C+d*O+f*B+p*z,a[5]=h*A+d*D+f*W+p*Z,a[9]=h*P+d*F+f*j+p*se,a[13]=h*R+d*U+f*$+p*q,a[2]=g*C+v*O+x*B+_*z,a[6]=g*A+v*D+x*W+_*Z,a[10]=g*P+v*F+x*j+_*se,a[14]=g*R+v*U+x*$+_*q,a[3]=E*C+S*O+T*B+M*z,a[7]=E*A+S*D+T*W+M*Z,a[11]=E*P+S*F+T*j+M*se,a[15]=E*R+S*U+T*$+M*q,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[4]*=e,n[8]*=e,n[12]*=e,n[1]*=e,n[5]*=e,n[9]*=e,n[13]*=e,n[2]*=e,n[6]*=e,n[10]*=e,n[14]*=e,n[3]*=e,n[7]*=e,n[11]*=e,n[15]*=e,this}determinant(){const e=this.elements,n=e[0],i=e[4],s=e[8],a=e[12],o=e[1],l=e[5],c=e[9],u=e[13],h=e[2],d=e[6],f=e[10],p=e[14],g=e[3],v=e[7],x=e[11],_=e[15];return g*(+a*c*d-s*u*d-a*l*f+i*u*f+s*l*p-i*c*p)+v*(+n*c*p-n*u*f+a*o*f-s*o*p+s*u*h-a*c*h)+x*(+n*u*d-n*l*p-a*o*d+i*o*p+a*l*h-i*u*h)+_*(-s*l*h-n*c*d+n*l*f+s*o*d-i*o*f+i*c*h)}transpose(){const e=this.elements;let n;return n=e[1],e[1]=e[4],e[4]=n,n=e[2],e[2]=e[8],e[8]=n,n=e[6],e[6]=e[9],e[9]=n,n=e[3],e[3]=e[12],e[12]=n,n=e[7],e[7]=e[13],e[13]=n,n=e[11],e[11]=e[14],e[14]=n,this}setPosition(e,n,i){const s=this.elements;return e.isVector3?(s[12]=e.x,s[13]=e.y,s[14]=e.z):(s[12]=e,s[13]=n,s[14]=i),this}invert(){const e=this.elements,n=e[0],i=e[1],s=e[2],a=e[3],o=e[4],l=e[5],c=e[6],u=e[7],h=e[8],d=e[9],f=e[10],p=e[11],g=e[12],v=e[13],x=e[14],_=e[15],E=d*x*u-v*f*u+v*c*p-l*x*p-d*c*_+l*f*_,S=g*f*u-h*x*u-g*c*p+o*x*p+h*c*_-o*f*_,T=h*v*u-g*d*u+g*l*p-o*v*p-h*l*_+o*d*_,M=g*d*c-h*v*c-g*l*f+o*v*f+h*l*x-o*d*x,C=n*E+i*S+s*T+a*M;if(C===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const A=1/C;return e[0]=E*A,e[1]=(v*f*a-d*x*a-v*s*p+i*x*p+d*s*_-i*f*_)*A,e[2]=(l*x*a-v*c*a+v*s*u-i*x*u-l*s*_+i*c*_)*A,e[3]=(d*c*a-l*f*a-d*s*u+i*f*u+l*s*p-i*c*p)*A,e[4]=S*A,e[5]=(h*x*a-g*f*a+g*s*p-n*x*p-h*s*_+n*f*_)*A,e[6]=(g*c*a-o*x*a-g*s*u+n*x*u+o*s*_-n*c*_)*A,e[7]=(o*f*a-h*c*a+h*s*u-n*f*u-o*s*p+n*c*p)*A,e[8]=T*A,e[9]=(g*d*a-h*v*a-g*i*p+n*v*p+h*i*_-n*d*_)*A,e[10]=(o*v*a-g*l*a+g*i*u-n*v*u-o*i*_+n*l*_)*A,e[11]=(h*l*a-o*d*a-h*i*u+n*d*u+o*i*p-n*l*p)*A,e[12]=M*A,e[13]=(h*v*s-g*d*s+g*i*f-n*v*f-h*i*x+n*d*x)*A,e[14]=(g*l*s-o*v*s-g*i*c+n*v*c+o*i*x-n*l*x)*A,e[15]=(o*d*s-h*l*s+h*i*c-n*d*c-o*i*f+n*l*f)*A,this}scale(e){const n=this.elements,i=e.x,s=e.y,a=e.z;return n[0]*=i,n[4]*=s,n[8]*=a,n[1]*=i,n[5]*=s,n[9]*=a,n[2]*=i,n[6]*=s,n[10]*=a,n[3]*=i,n[7]*=s,n[11]*=a,this}getMaxScaleOnAxis(){const e=this.elements,n=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],s=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(n,i,s))}makeTranslation(e,n,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,n,0,0,1,i,0,0,0,1),this}makeRotationX(e){const n=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,n,-i,0,0,i,n,0,0,0,0,1),this}makeRotationY(e){const n=Math.cos(e),i=Math.sin(e);return this.set(n,0,i,0,0,1,0,0,-i,0,n,0,0,0,0,1),this}makeRotationZ(e){const n=Math.cos(e),i=Math.sin(e);return this.set(n,-i,0,0,i,n,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,n){const i=Math.cos(n),s=Math.sin(n),a=1-i,o=e.x,l=e.y,c=e.z,u=a*o,h=a*l;return this.set(u*o+i,u*l-s*c,u*c+s*l,0,u*l+s*c,h*l+i,h*c-s*o,0,u*c-s*l,h*c+s*o,a*c*c+i,0,0,0,0,1),this}makeScale(e,n,i){return this.set(e,0,0,0,0,n,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,n,i,s,a,o){return this.set(1,i,a,0,e,1,o,0,n,s,1,0,0,0,0,1),this}compose(e,n,i){const s=this.elements,a=n._x,o=n._y,l=n._z,c=n._w,u=a+a,h=o+o,d=l+l,f=a*u,p=a*h,g=a*d,v=o*h,x=o*d,_=l*d,E=c*u,S=c*h,T=c*d,M=i.x,C=i.y,A=i.z;return s[0]=(1-(v+_))*M,s[1]=(p+T)*M,s[2]=(g-S)*M,s[3]=0,s[4]=(p-T)*C,s[5]=(1-(f+_))*C,s[6]=(x+E)*C,s[7]=0,s[8]=(g+S)*A,s[9]=(x-E)*A,s[10]=(1-(f+v))*A,s[11]=0,s[12]=e.x,s[13]=e.y,s[14]=e.z,s[15]=1,this}decompose(e,n,i){const s=this.elements;let a=Fm.set(s[0],s[1],s[2]).length();const o=Fm.set(s[4],s[5],s[6]).length(),l=Fm.set(s[8],s[9],s[10]).length();this.determinant()<0&&(a=-a),e.x=s[12],e.y=s[13],e.z=s[14],Dl.copy(this);const u=1/a,h=1/o,d=1/l;return Dl.elements[0]*=u,Dl.elements[1]*=u,Dl.elements[2]*=u,Dl.elements[4]*=h,Dl.elements[5]*=h,Dl.elements[6]*=h,Dl.elements[8]*=d,Dl.elements[9]*=d,Dl.elements[10]*=d,n.setFromRotationMatrix(Dl),i.x=a,i.y=o,i.z=l,this}makePerspective(e,n,i,s,a,o,l=Ka){const c=this.elements,u=2*a/(n-e),h=2*a/(i-s),d=(n+e)/(n-e),f=(i+s)/(i-s);let p,g;if(l===Ka)p=-(o+a)/(o-a),g=-2*o*a/(o-a);else if(l===Bd)p=-o/(o-a),g=-o*a/(o-a);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+l);return c[0]=u,c[4]=0,c[8]=d,c[12]=0,c[1]=0,c[5]=h,c[9]=f,c[13]=0,c[2]=0,c[6]=0,c[10]=p,c[14]=g,c[3]=0,c[7]=0,c[11]=-1,c[15]=0,this}makeOrthographic(e,n,i,s,a,o,l=Ka){const c=this.elements,u=1/(n-e),h=1/(i-s),d=1/(o-a),f=(n+e)*u,p=(i+s)*h;let g,v;if(l===Ka)g=(o+a)*d,v=-2*d;else if(l===Bd)g=a*d,v=-1*d;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+l);return c[0]=2*u,c[4]=0,c[8]=0,c[12]=-f,c[1]=0,c[5]=2*h,c[9]=0,c[13]=-p,c[2]=0,c[6]=0,c[10]=v,c[14]=-g,c[3]=0,c[7]=0,c[11]=0,c[15]=1,this}equals(e){const n=this.elements,i=e.elements;for(let s=0;s<16;s++)if(n[s]!==i[s])return!1;return!0}fromArray(e,n=0){for(let i=0;i<16;i++)this.elements[i]=e[i+n];return this}toArray(e=[],n=0){const i=this.elements;return e[n]=i[0],e[n+1]=i[1],e[n+2]=i[2],e[n+3]=i[3],e[n+4]=i[4],e[n+5]=i[5],e[n+6]=i[6],e[n+7]=i[7],e[n+8]=i[8],e[n+9]=i[9],e[n+10]=i[10],e[n+11]=i[11],e[n+12]=i[12],e[n+13]=i[13],e[n+14]=i[14],e[n+15]=i[15],e}};const Fm=new pe,Dl=new br,xge=new pe(0,0,0),bge=new pe(1,1,1),rd=new pe,S1=new pe,vo=new pe,lG=new br,cG=new ac;let yl=class oee{constructor(e=0,n=0,i=0,s=oee.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=n,this._z=i,this._order=s}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,n,i,s=this._order){return this._x=e,this._y=n,this._z=i,this._order=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,n=this._order,i=!0){const s=e.elements,a=s[0],o=s[4],l=s[8],c=s[1],u=s[5],h=s[9],d=s[2],f=s[6],p=s[10];switch(n){case"XYZ":this._y=Math.asin(Kn(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-h,p),this._z=Math.atan2(-o,a)):(this._x=Math.atan2(f,u),this._z=0);break;case"YXZ":this._x=Math.asin(-Kn(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(l,p),this._z=Math.atan2(c,u)):(this._y=Math.atan2(-d,a),this._z=0);break;case"ZXY":this._x=Math.asin(Kn(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(-d,p),this._z=Math.atan2(-o,u)):(this._y=0,this._z=Math.atan2(c,a));break;case"ZYX":this._y=Math.asin(-Kn(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(f,p),this._z=Math.atan2(c,a)):(this._x=0,this._z=Math.atan2(-o,u));break;case"YZX":this._z=Math.asin(Kn(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-h,u),this._y=Math.atan2(-d,a)):(this._x=0,this._y=Math.atan2(l,p));break;case"XZY":this._z=Math.asin(-Kn(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(f,u),this._y=Math.atan2(l,a)):(this._x=Math.atan2(-h,p),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+n)}return this._order=n,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,n,i){return lG.makeRotationFromQuaternion(e),this.setFromRotationMatrix(lG,n,i)}setFromVector3(e,n=this._order){return this.set(e.x,e.y,e.z,n)}reorder(e){return cG.setFromEuler(this),this.setFromQuaternion(cG,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}};yl.DEFAULT_ORDER="XYZ";let Oj=class{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}},_ge=0;const uG=new pe,Bm=new ac,Au=new br,T1=new pe,ov=new pe,wge=new pe,Sge=new ac,hG=new pe(1,0,0),dG=new pe(0,1,0),fG=new pe(0,0,1),pG={type:"added"},Tge={type:"removed"},jm={type:"childadded",child:null},NN={type:"childremoved",child:null};let Is=class aT extends Sh{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:_ge++}),this.uuid=ih(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=aT.DEFAULT_UP.clone();const e=new pe,n=new yl,i=new ac,s=new pe(1,1,1);function a(){i.setFromEuler(n,!1)}function o(){n.setFromQuaternion(i,void 0,!1)}n._onChange(a),i._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:n},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:s},modelViewMatrix:{value:new br},normalMatrix:{value:new zn}}),this.matrix=new br,this.matrixWorld=new br,this.matrixAutoUpdate=aT.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=aT.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Oj,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,n){this.quaternion.setFromAxisAngle(e,n)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,n){return Bm.setFromAxisAngle(e,n),this.quaternion.multiply(Bm),this}rotateOnWorldAxis(e,n){return Bm.setFromAxisAngle(e,n),this.quaternion.premultiply(Bm),this}rotateX(e){return this.rotateOnAxis(hG,e)}rotateY(e){return this.rotateOnAxis(dG,e)}rotateZ(e){return this.rotateOnAxis(fG,e)}translateOnAxis(e,n){return uG.copy(e).applyQuaternion(this.quaternion),this.position.add(uG.multiplyScalar(n)),this}translateX(e){return this.translateOnAxis(hG,e)}translateY(e){return this.translateOnAxis(dG,e)}translateZ(e){return this.translateOnAxis(fG,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Au.copy(this.matrixWorld).invert())}lookAt(e,n,i){e.isVector3?T1.copy(e):T1.set(e,n,i);const s=this.parent;this.updateWorldMatrix(!0,!1),ov.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Au.lookAt(ov,T1,this.up):Au.lookAt(T1,ov,this.up),this.quaternion.setFromRotationMatrix(Au),s&&(Au.extractRotation(s.matrixWorld),Bm.setFromRotationMatrix(Au),this.quaternion.premultiply(Bm.invert()))}add(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.add(arguments[n]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(pG),jm.child=e,this.dispatchEvent(jm),jm.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const n=this.children.indexOf(e);return n!==-1&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent(Tge),NN.child=e,this.dispatchEvent(NN),NN.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Au.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Au.multiply(e.parent.matrixWorld)),e.applyMatrix4(Au),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(pG),jm.child=e,this.dispatchEvent(jm),jm.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,n){if(this[e]===n)return this;for(let i=0,s=this.children.length;i<s;i++){const o=this.children[i].getObjectByProperty(e,n);if(o!==void 0)return o}}getObjectsByProperty(e,n,i=[]){this[e]===n&&i.push(this);const s=this.children;for(let a=0,o=s.length;a<o;a++)s[a].getObjectsByProperty(e,n,i);return i}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(ov,e,wge),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(ov,Sge,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const n=this.matrixWorld.elements;return e.set(n[8],n[9],n[10]).normalize()}raycast(){}traverse(e){e(this);const n=this.children;for(let i=0,s=n.length;i<s;i++)n[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const n=this.children;for(let i=0,s=n.length;i<s;i++)n[i].traverseVisible(e)}traverseAncestors(e){const n=this.parent;n!==null&&(e(n),n.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const n=this.children;for(let i=0,s=n.length;i<s;i++)n[i].updateMatrixWorld(e)}updateWorldMatrix(e,n){const i=this.parent;if(e===!0&&i!==null&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),n===!0){const s=this.children;for(let a=0,o=s.length;a<o;a++)s[a].updateWorldMatrix(!1,!0)}}toJSON(e){const n=e===void 0||typeof e=="string",i={};n&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const s={};s.uuid=this.uuid,s.type=this.type,this.name!==""&&(s.name=this.name),this.castShadow===!0&&(s.castShadow=!0),this.receiveShadow===!0&&(s.receiveShadow=!0),this.visible===!1&&(s.visible=!1),this.frustumCulled===!1&&(s.frustumCulled=!1),this.renderOrder!==0&&(s.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(s.userData=this.userData),s.layers=this.layers.mask,s.matrix=this.matrix.toArray(),s.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(s.matrixAutoUpdate=!1),this.isInstancedMesh&&(s.type="InstancedMesh",s.count=this.count,s.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(s.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(s.type="BatchedMesh",s.perObjectFrustumCulled=this.perObjectFrustumCulled,s.sortObjects=this.sortObjects,s.drawRanges=this._drawRanges,s.reservedRanges=this._reservedRanges,s.visibility=this._visibility,s.active=this._active,s.bounds=this._bounds.map(l=>({boxInitialized:l.boxInitialized,boxMin:l.box.min.toArray(),boxMax:l.box.max.toArray(),sphereInitialized:l.sphereInitialized,sphereRadius:l.sphere.radius,sphereCenter:l.sphere.center.toArray()})),s.maxInstanceCount=this._maxInstanceCount,s.maxVertexCount=this._maxVertexCount,s.maxIndexCount=this._maxIndexCount,s.geometryInitialized=this._geometryInitialized,s.geometryCount=this._geometryCount,s.matricesTexture=this._matricesTexture.toJSON(e),this._colorsTexture!==null&&(s.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(s.boundingSphere={center:s.boundingSphere.center.toArray(),radius:s.boundingSphere.radius}),this.boundingBox!==null&&(s.boundingBox={min:s.boundingBox.min.toArray(),max:s.boundingBox.max.toArray()}));function a(l,c){return l[c.uuid]===void 0&&(l[c.uuid]=c.toJSON(e)),c.uuid}if(this.isScene)this.background&&(this.background.isColor?s.background=this.background.toJSON():this.background.isTexture&&(s.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(s.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){s.geometry=a(e.geometries,this.geometry);const l=this.geometry.parameters;if(l!==void 0&&l.shapes!==void 0){const c=l.shapes;if(Array.isArray(c))for(let u=0,h=c.length;u<h;u++){const d=c[u];a(e.shapes,d)}else a(e.shapes,c)}}if(this.isSkinnedMesh&&(s.bindMode=this.bindMode,s.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(a(e.skeletons,this.skeleton),s.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const l=[];for(let c=0,u=this.material.length;c<u;c++)l.push(a(e.materials,this.material[c]));s.material=l}else s.material=a(e.materials,this.material);if(this.children.length>0){s.children=[];for(let l=0;l<this.children.length;l++)s.children.push(this.children[l].toJSON(e).object)}if(this.animations.length>0){s.animations=[];for(let l=0;l<this.animations.length;l++){const c=this.animations[l];s.animations.push(a(e.animations,c))}}if(n){const l=o(e.geometries),c=o(e.materials),u=o(e.textures),h=o(e.images),d=o(e.shapes),f=o(e.skeletons),p=o(e.animations),g=o(e.nodes);l.length>0&&(i.geometries=l),c.length>0&&(i.materials=c),u.length>0&&(i.textures=u),h.length>0&&(i.images=h),d.length>0&&(i.shapes=d),f.length>0&&(i.skeletons=f),p.length>0&&(i.animations=p),g.length>0&&(i.nodes=g)}return i.object=s,i;function o(l){const c=[];for(const u in l){const h=l[u];delete h.metadata,c.push(h)}return c}}clone(e){return new this.constructor().copy(this,e)}copy(e,n=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),n===!0)for(let i=0;i<e.children.length;i++){const s=e.children[i];this.add(s.clone())}return this}};Is.DEFAULT_UP=new pe(0,1,0);Is.DEFAULT_MATRIX_AUTO_UPDATE=!0;Is.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Ll=new pe,Cu=new pe,PN=new pe,Nu=new pe,Um=new pe,zm=new pe,mG=new pe,RN=new pe,ON=new pe,kN=new pe,IN=new In,DN=new In,LN=new In;class sl{constructor(e=new pe,n=new pe,i=new pe){this.a=e,this.b=n,this.c=i}static getNormal(e,n,i,s){s.subVectors(i,n),Ll.subVectors(e,n),s.cross(Ll);const a=s.lengthSq();return a>0?s.multiplyScalar(1/Math.sqrt(a)):s.set(0,0,0)}static getBarycoord(e,n,i,s,a){Ll.subVectors(s,n),Cu.subVectors(i,n),PN.subVectors(e,n);const o=Ll.dot(Ll),l=Ll.dot(Cu),c=Ll.dot(PN),u=Cu.dot(Cu),h=Cu.dot(PN),d=o*u-l*l;if(d===0)return a.set(0,0,0),null;const f=1/d,p=(u*c-l*h)*f,g=(o*h-l*c)*f;return a.set(1-p-g,g,p)}static containsPoint(e,n,i,s){return this.getBarycoord(e,n,i,s,Nu)===null?!1:Nu.x>=0&&Nu.y>=0&&Nu.x+Nu.y<=1}static getInterpolation(e,n,i,s,a,o,l,c){return this.getBarycoord(e,n,i,s,Nu)===null?(c.x=0,c.y=0,"z"in c&&(c.z=0),"w"in c&&(c.w=0),null):(c.setScalar(0),c.addScaledVector(a,Nu.x),c.addScaledVector(o,Nu.y),c.addScaledVector(l,Nu.z),c)}static getInterpolatedAttribute(e,n,i,s,a,o){return IN.setScalar(0),DN.setScalar(0),LN.setScalar(0),IN.fromBufferAttribute(e,n),DN.fromBufferAttribute(e,i),LN.fromBufferAttribute(e,s),o.setScalar(0),o.addScaledVector(IN,a.x),o.addScaledVector(DN,a.y),o.addScaledVector(LN,a.z),o}static isFrontFacing(e,n,i,s){return Ll.subVectors(i,n),Cu.subVectors(e,n),Ll.cross(Cu).dot(s)<0}set(e,n,i){return this.a.copy(e),this.b.copy(n),this.c.copy(i),this}setFromPointsAndIndices(e,n,i,s){return this.a.copy(e[n]),this.b.copy(e[i]),this.c.copy(e[s]),this}setFromAttributeAndIndices(e,n,i,s){return this.a.fromBufferAttribute(e,n),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,s),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Ll.subVectors(this.c,this.b),Cu.subVectors(this.a,this.b),Ll.cross(Cu).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return sl.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,n){return sl.getBarycoord(e,this.a,this.b,this.c,n)}getInterpolation(e,n,i,s,a){return sl.getInterpolation(e,this.a,this.b,this.c,n,i,s,a)}containsPoint(e){return sl.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return sl.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,n){const i=this.a,s=this.b,a=this.c;let o,l;Um.subVectors(s,i),zm.subVectors(a,i),RN.subVectors(e,i);const c=Um.dot(RN),u=zm.dot(RN);if(c<=0&&u<=0)return n.copy(i);ON.subVectors(e,s);const h=Um.dot(ON),d=zm.dot(ON);if(h>=0&&d<=h)return n.copy(s);const f=c*d-h*u;if(f<=0&&c>=0&&h<=0)return o=c/(c-h),n.copy(i).addScaledVector(Um,o);kN.subVectors(e,a);const p=Um.dot(kN),g=zm.dot(kN);if(g>=0&&p<=g)return n.copy(a);const v=p*u-c*g;if(v<=0&&u>=0&&g<=0)return l=u/(u-g),n.copy(i).addScaledVector(zm,l);const x=h*g-p*d;if(x<=0&&d-h>=0&&p-g>=0)return mG.subVectors(a,s),l=(d-h)/(d-h+(p-g)),n.copy(s).addScaledVector(mG,l);const _=1/(x+v+f);return o=v*_,l=f*_,n.copy(i).addScaledVector(Um,o).addScaledVector(zm,l)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const lee={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},id={h:0,s:0,l:0},E1={h:0,s:0,l:0};function FN(r,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?r+(e-r)*6*n:n<1/2?e:n<2/3?r+(e-r)*6*(2/3-n):r}let ln=class{constructor(e,n,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,n,i)}set(e,n,i){if(n===void 0&&i===void 0){const s=e;s&&s.isColor?this.copy(s):typeof s=="number"?this.setHex(s):typeof s=="string"&&this.setStyle(s)}else this.setRGB(e,n,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,n=dn){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,tr.toWorkingColorSpace(this,n),this}setRGB(e,n,i,s=tr.workingColorSpace){return this.r=e,this.g=n,this.b=i,tr.toWorkingColorSpace(this,s),this}setHSL(e,n,i,s=tr.workingColorSpace){if(e=Cj(e,1),n=Kn(n,0,1),i=Kn(i,0,1),n===0)this.r=this.g=this.b=i;else{const a=i<=.5?i*(1+n):i+n-i*n,o=2*i-a;this.r=FN(o,a,e+1/3),this.g=FN(o,a,e),this.b=FN(o,a,e-1/3)}return tr.toWorkingColorSpace(this,s),this}setStyle(e,n=dn){function i(a){a!==void 0&&parseFloat(a)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let s;if(s=/^(\w+)\(([^\)]*)\)/.exec(e)){let a;const o=s[1],l=s[2];switch(o){case"rgb":case"rgba":if(a=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return i(a[4]),this.setRGB(Math.min(255,parseInt(a[1],10))/255,Math.min(255,parseInt(a[2],10))/255,Math.min(255,parseInt(a[3],10))/255,n);if(a=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return i(a[4]),this.setRGB(Math.min(100,parseInt(a[1],10))/100,Math.min(100,parseInt(a[2],10))/100,Math.min(100,parseInt(a[3],10))/100,n);break;case"hsl":case"hsla":if(a=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return i(a[4]),this.setHSL(parseFloat(a[1])/360,parseFloat(a[2])/100,parseFloat(a[3])/100,n);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(s=/^\#([A-Fa-f\d]+)$/.exec(e)){const a=s[1],o=a.length;if(o===3)return this.setRGB(parseInt(a.charAt(0),16)/15,parseInt(a.charAt(1),16)/15,parseInt(a.charAt(2),16)/15,n);if(o===6)return this.setHex(parseInt(a,16),n);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,n);return this}setColorName(e,n=dn){const i=lee[e.toLowerCase()];return i!==void 0?this.setHex(i,n):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=sh(e.r),this.g=sh(e.g),this.b=sh(e.b),this}copyLinearToSRGB(e){return this.r=jg(e.r),this.g=jg(e.g),this.b=jg(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=dn){return tr.fromWorkingColorSpace(ta.copy(this),e),Math.round(Kn(ta.r*255,0,255))*65536+Math.round(Kn(ta.g*255,0,255))*256+Math.round(Kn(ta.b*255,0,255))}getHexString(e=dn){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,n=tr.workingColorSpace){tr.fromWorkingColorSpace(ta.copy(this),n);const i=ta.r,s=ta.g,a=ta.b,o=Math.max(i,s,a),l=Math.min(i,s,a);let c,u;const h=(l+o)/2;if(l===o)c=0,u=0;else{const d=o-l;switch(u=h<=.5?d/(o+l):d/(2-o-l),o){case i:c=(s-a)/d+(s<a?6:0);break;case s:c=(a-i)/d+2;break;case a:c=(i-s)/d+4;break}c/=6}return e.h=c,e.s=u,e.l=h,e}getRGB(e,n=tr.workingColorSpace){return tr.fromWorkingColorSpace(ta.copy(this),n),e.r=ta.r,e.g=ta.g,e.b=ta.b,e}getStyle(e=dn){tr.fromWorkingColorSpace(ta.copy(this),e);const n=ta.r,i=ta.g,s=ta.b;return e!==dn?`color(${e} ${n.toFixed(3)} ${i.toFixed(3)} ${s.toFixed(3)})`:`rgb(${Math.round(n*255)},${Math.round(i*255)},${Math.round(s*255)})`}offsetHSL(e,n,i){return this.getHSL(id),this.setHSL(id.h+e,id.s+n,id.l+i)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,n){return this.r=e.r+n.r,this.g=e.g+n.g,this.b=e.b+n.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,n){return this.r+=(e.r-this.r)*n,this.g+=(e.g-this.g)*n,this.b+=(e.b-this.b)*n,this}lerpColors(e,n,i){return this.r=e.r+(n.r-e.r)*i,this.g=e.g+(n.g-e.g)*i,this.b=e.b+(n.b-e.b)*i,this}lerpHSL(e,n){this.getHSL(id),e.getHSL(E1);const i=gx(id.h,E1.h,n),s=gx(id.s,E1.s,n),a=gx(id.l,E1.l,n);return this.setHSL(i,s,a),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const n=this.r,i=this.g,s=this.b,a=e.elements;return this.r=a[0]*n+a[3]*i+a[6]*s,this.g=a[1]*n+a[4]*i+a[7]*s,this.b=a[2]*n+a[5]*i+a[8]*s,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,n=0){return this.r=e[n],this.g=e[n+1],this.b=e[n+2],this}toArray(e=[],n=0){return e[n]=this.r,e[n+1]=this.g,e[n+2]=this.b,e}fromBufferAttribute(e,n){return this.r=e.getX(n),this.g=e.getY(n),this.b=e.getZ(n),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}};const ta=new ln;ln.NAMES=lee;let Ege=0;class pa extends Sh{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:Ege++}),this.uuid=ih(),this.name="",this.type="Material",this.blending=hl,this.side=Ja,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=qx,this.blendDst=Xx,this.blendEquation=ua,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new ln(0,0,0),this.blendAlpha=0,this.depthFunc=Dd,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=r3,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Gf,this.stencilZFail=Gf,this.stencilZPass=Gf,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const n in e){const i=e[n];if(i===void 0){console.warn(`THREE.Material: parameter '${n}' has value of undefined.`);continue}const s=this[n];if(s===void 0){console.warn(`THREE.Material: '${n}' is not a property of THREE.${this.type}.`);continue}s&&s.isColor?s.set(i):s&&s.isVector3&&i&&i.isVector3?s.copy(i):this[n]=i}}toJSON(e){const n=e===void 0||typeof e=="string";n&&(e={textures:{},images:{}});const i={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(i.dispersion=this.dispersion),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapRotation!==void 0&&(i.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==hl&&(i.blending=this.blending),this.side!==Ja&&(i.side=this.side),this.vertexColors===!0&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=!0),this.blendSrc!==qx&&(i.blendSrc=this.blendSrc),this.blendDst!==Xx&&(i.blendDst=this.blendDst),this.blendEquation!==ua&&(i.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(i.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(i.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(i.blendAlpha=this.blendAlpha),this.depthFunc!==Dd&&(i.depthFunc=this.depthFunc),this.depthTest===!1&&(i.depthTest=this.depthTest),this.depthWrite===!1&&(i.depthWrite=this.depthWrite),this.colorWrite===!1&&(i.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(i.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==r3&&(i.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(i.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Gf&&(i.stencilFail=this.stencilFail),this.stencilZFail!==Gf&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==Gf&&(i.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(i.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaHash===!0&&(i.alphaHash=!0),this.alphaToCoverage===!0&&(i.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=!0),this.forceSinglePass===!0&&(i.forceSinglePass=!0),this.wireframe===!0&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=!0),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function s(a){const o=[];for(const l in a){const c=a[l];delete c.metadata,o.push(c)}return o}if(n){const a=s(e.textures),o=s(e.images);a.length>0&&(i.textures=a),o.length>0&&(i.images=o)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const n=e.clippingPlanes;let i=null;if(n!==null){const s=n.length;i=new Array(s);for(let a=0;a!==s;++a)i[a]=n[a].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}}class Aa extends pa{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new ln(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new yl,this.combine=y_,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Gu=Mge();function Mge(){const r=new ArrayBuffer(4),e=new Float32Array(r),n=new Uint32Array(r),i=new Uint32Array(512),s=new Uint32Array(512);for(let c=0;c<256;++c){const u=c-127;u<-27?(i[c]=0,i[c|256]=32768,s[c]=24,s[c|256]=24):u<-14?(i[c]=1024>>-u-14,i[c|256]=1024>>-u-14|32768,s[c]=-u-1,s[c|256]=-u-1):u<=15?(i[c]=u+15<<10,i[c|256]=u+15<<10|32768,s[c]=13,s[c|256]=13):u<128?(i[c]=31744,i[c|256]=64512,s[c]=24,s[c|256]=24):(i[c]=31744,i[c|256]=64512,s[c]=13,s[c|256]=13)}const a=new Uint32Array(2048),o=new Uint32Array(64),l=new Uint32Array(64);for(let c=1;c<1024;++c){let u=c<<13,h=0;for(;(u&8388608)===0;)u<<=1,h-=8388608;u&=-8388609,h+=947912704,a[c]=u|h}for(let c=1024;c<2048;++c)a[c]=939524096+(c-1024<<13);for(let c=1;c<31;++c)o[c]=c<<23;o[31]=1199570944,o[32]=2147483648;for(let c=33;c<63;++c)o[c]=2147483648+(c-32<<23);o[63]=3347054592;for(let c=1;c<64;++c)c!==32&&(l[c]=1024);return{floatView:e,uint32View:n,baseTable:i,shiftTable:s,mantissaTable:a,exponentTable:o,offsetTable:l}}function xo(r){Math.abs(r)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),r=Kn(r,-65504,65504),Gu.floatView[0]=r;const e=Gu.uint32View[0],n=e>>23&511;return Gu.baseTable[n]+((e&8388607)>>Gu.shiftTable[n])}function M1(r){const e=r>>10;return Gu.uint32View[0]=Gu.mantissaTable[Gu.offsetTable[e]+(r&1023)]+Gu.exponentTable[e],Gu.floatView[0]}const Ki=new pe,A1=new dt;let Age=0;class ps{constructor(e,n,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:Age++}),this.name="",this.array=e,this.itemSize=n,this.count=e!==void 0?e.length/n:0,this.normalized=i,this.usage=FT,this.updateRanges=[],this.gpuType=zi,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,n){this.updateRanges.push({start:e,count:n})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,n,i){e*=this.itemSize,i*=n.itemSize;for(let s=0,a=this.itemSize;s<a;s++)this.array[e+s]=n.array[i+s];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let n=0,i=this.count;n<i;n++)A1.fromBufferAttribute(this,n),A1.applyMatrix3(e),this.setXY(n,A1.x,A1.y);else if(this.itemSize===3)for(let n=0,i=this.count;n<i;n++)Ki.fromBufferAttribute(this,n),Ki.applyMatrix3(e),this.setXYZ(n,Ki.x,Ki.y,Ki.z);return this}applyMatrix4(e){for(let n=0,i=this.count;n<i;n++)Ki.fromBufferAttribute(this,n),Ki.applyMatrix4(e),this.setXYZ(n,Ki.x,Ki.y,Ki.z);return this}applyNormalMatrix(e){for(let n=0,i=this.count;n<i;n++)Ki.fromBufferAttribute(this,n),Ki.applyNormalMatrix(e),this.setXYZ(n,Ki.x,Ki.y,Ki.z);return this}transformDirection(e){for(let n=0,i=this.count;n<i;n++)Ki.fromBufferAttribute(this,n),Ki.transformDirection(e),this.setXYZ(n,Ki.x,Ki.y,Ki.z);return this}set(e,n=0){return this.array.set(e,n),this}getComponent(e,n){let i=this.array[e*this.itemSize+n];return this.normalized&&(i=Ma(i,this.array)),i}setComponent(e,n,i){return this.normalized&&(i=Xn(i,this.array)),this.array[e*this.itemSize+n]=i,this}getX(e){let n=this.array[e*this.itemSize];return this.normalized&&(n=Ma(n,this.array)),n}setX(e,n){return this.normalized&&(n=Xn(n,this.array)),this.array[e*this.itemSize]=n,this}getY(e){let n=this.array[e*this.itemSize+1];return this.normalized&&(n=Ma(n,this.array)),n}setY(e,n){return this.normalized&&(n=Xn(n,this.array)),this.array[e*this.itemSize+1]=n,this}getZ(e){let n=this.array[e*this.itemSize+2];return this.normalized&&(n=Ma(n,this.array)),n}setZ(e,n){return this.normalized&&(n=Xn(n,this.array)),this.array[e*this.itemSize+2]=n,this}getW(e){let n=this.array[e*this.itemSize+3];return this.normalized&&(n=Ma(n,this.array)),n}setW(e,n){return this.normalized&&(n=Xn(n,this.array)),this.array[e*this.itemSize+3]=n,this}setXY(e,n,i){return e*=this.itemSize,this.normalized&&(n=Xn(n,this.array),i=Xn(i,this.array)),this.array[e+0]=n,this.array[e+1]=i,this}setXYZ(e,n,i,s){return e*=this.itemSize,this.normalized&&(n=Xn(n,this.array),i=Xn(i,this.array),s=Xn(s,this.array)),this.array[e+0]=n,this.array[e+1]=i,this.array[e+2]=s,this}setXYZW(e,n,i,s,a){return e*=this.itemSize,this.normalized&&(n=Xn(n,this.array),i=Xn(i,this.array),s=Xn(s,this.array),a=Xn(a,this.array)),this.array[e+0]=n,this.array[e+1]=i,this.array[e+2]=s,this.array[e+3]=a,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==FT&&(e.usage=this.usage),e}}class kj extends ps{constructor(e,n,i){super(new Uint16Array(e),n,i)}}class Ij extends ps{constructor(e,n,i){super(new Uint32Array(e),n,i)}}class cee extends ps{constructor(e,n,i){super(new Uint16Array(e),n,i),this.isFloat16BufferAttribute=!0}getX(e){let n=M1(this.array[e*this.itemSize]);return this.normalized&&(n=Ma(n,this.array)),n}setX(e,n){return this.normalized&&(n=Xn(n,this.array)),this.array[e*this.itemSize]=xo(n),this}getY(e){let n=M1(this.array[e*this.itemSize+1]);return this.normalized&&(n=Ma(n,this.array)),n}setY(e,n){return this.normalized&&(n=Xn(n,this.array)),this.array[e*this.itemSize+1]=xo(n),this}getZ(e){let n=M1(this.array[e*this.itemSize+2]);return this.normalized&&(n=Ma(n,this.array)),n}setZ(e,n){return this.normalized&&(n=Xn(n,this.array)),this.array[e*this.itemSize+2]=xo(n),this}getW(e){let n=M1(this.array[e*this.itemSize+3]);return this.normalized&&(n=Ma(n,this.array)),n}setW(e,n){return this.normalized&&(n=Xn(n,this.array)),this.array[e*this.itemSize+3]=xo(n),this}setXY(e,n,i){return e*=this.itemSize,this.normalized&&(n=Xn(n,this.array),i=Xn(i,this.array)),this.array[e+0]=xo(n),this.array[e+1]=xo(i),this}setXYZ(e,n,i,s){return e*=this.itemSize,this.normalized&&(n=Xn(n,this.array),i=Xn(i,this.array),s=Xn(s,this.array)),this.array[e+0]=xo(n),this.array[e+1]=xo(i),this.array[e+2]=xo(s),this}setXYZW(e,n,i,s,a){return e*=this.itemSize,this.normalized&&(n=Xn(n,this.array),i=Xn(i,this.array),s=Xn(s,this.array),a=Xn(a,this.array)),this.array[e+0]=xo(n),this.array[e+1]=xo(i),this.array[e+2]=xo(s),this.array[e+3]=xo(a),this}}class $i extends ps{constructor(e,n,i){super(new Float32Array(e),n,i)}}let Cge=0;const Ko=new br,BN=new Is,$m=new pe,bo=new Bp,lv=new Bp,Es=new pe;class Ws extends Sh{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Cge++}),this.uuid=ih(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(Nj(e)?Ij:kj)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,n){return this.attributes[e]=n,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,n,i=0){this.groups.push({start:e,count:n,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,n){this.drawRange.start=e,this.drawRange.count=n}applyMatrix4(e){const n=this.attributes.position;n!==void 0&&(n.applyMatrix4(e),n.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const a=new zn().getNormalMatrix(e);i.applyNormalMatrix(a),i.needsUpdate=!0}const s=this.attributes.tangent;return s!==void 0&&(s.transformDirection(e),s.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Ko.makeRotationFromQuaternion(e),this.applyMatrix4(Ko),this}rotateX(e){return Ko.makeRotationX(e),this.applyMatrix4(Ko),this}rotateY(e){return Ko.makeRotationY(e),this.applyMatrix4(Ko),this}rotateZ(e){return Ko.makeRotationZ(e),this.applyMatrix4(Ko),this}translate(e,n,i){return Ko.makeTranslation(e,n,i),this.applyMatrix4(Ko),this}scale(e,n,i){return Ko.makeScale(e,n,i),this.applyMatrix4(Ko),this}lookAt(e){return BN.lookAt(e),BN.updateMatrix(),this.applyMatrix4(BN.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter($m).negate(),this.translate($m.x,$m.y,$m.z),this}setFromPoints(e){const n=this.getAttribute("position");if(n===void 0){const i=[];for(let s=0,a=e.length;s<a;s++){const o=e[s];i.push(o.x,o.y,o.z||0)}this.setAttribute("position",new $i(i,3))}else{const i=Math.min(e.length,n.count);for(let s=0;s<i;s++){const a=e[s];n.setXYZ(s,a.x,a.y,a.z||0)}e.length>n.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),n.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Bp);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new pe(-1/0,-1/0,-1/0),new pe(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),n)for(let i=0,s=n.length;i<s;i++){const a=n[i];bo.setFromBufferAttribute(a),this.morphTargetsRelative?(Es.addVectors(this.boundingBox.min,bo.min),this.boundingBox.expandByPoint(Es),Es.addVectors(this.boundingBox.max,bo.max),this.boundingBox.expandByPoint(Es)):(this.boundingBox.expandByPoint(bo.min),this.boundingBox.expandByPoint(bo.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new b_);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new pe,1/0);return}if(e){const i=this.boundingSphere.center;if(bo.setFromBufferAttribute(e),n)for(let a=0,o=n.length;a<o;a++){const l=n[a];lv.setFromBufferAttribute(l),this.morphTargetsRelative?(Es.addVectors(bo.min,lv.min),bo.expandByPoint(Es),Es.addVectors(bo.max,lv.max),bo.expandByPoint(Es)):(bo.expandByPoint(lv.min),bo.expandByPoint(lv.max))}bo.getCenter(i);let s=0;for(let a=0,o=e.count;a<o;a++)Es.fromBufferAttribute(e,a),s=Math.max(s,i.distanceToSquared(Es));if(n)for(let a=0,o=n.length;a<o;a++){const l=n[a],c=this.morphTargetsRelative;for(let u=0,h=l.count;u<h;u++)Es.fromBufferAttribute(l,u),c&&($m.fromBufferAttribute(e,u),Es.add($m)),s=Math.max(s,i.distanceToSquared(Es))}this.boundingSphere.radius=Math.sqrt(s),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,n=this.attributes;if(e===null||n.position===void 0||n.normal===void 0||n.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=n.position,s=n.normal,a=n.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new ps(new Float32Array(4*i.count),4));const o=this.getAttribute("tangent"),l=[],c=[];for(let P=0;P<i.count;P++)l[P]=new pe,c[P]=new pe;const u=new pe,h=new pe,d=new pe,f=new dt,p=new dt,g=new dt,v=new pe,x=new pe;function _(P,R,O){u.fromBufferAttribute(i,P),h.fromBufferAttribute(i,R),d.fromBufferAttribute(i,O),f.fromBufferAttribute(a,P),p.fromBufferAttribute(a,R),g.fromBufferAttribute(a,O),h.sub(u),d.sub(u),p.sub(f),g.sub(f);const D=1/(p.x*g.y-g.x*p.y);isFinite(D)&&(v.copy(h).multiplyScalar(g.y).addScaledVector(d,-p.y).multiplyScalar(D),x.copy(d).multiplyScalar(p.x).addScaledVector(h,-g.x).multiplyScalar(D),l[P].add(v),l[R].add(v),l[O].add(v),c[P].add(x),c[R].add(x),c[O].add(x))}let E=this.groups;E.length===0&&(E=[{start:0,count:e.count}]);for(let P=0,R=E.length;P<R;++P){const O=E[P],D=O.start,F=O.count;for(let U=D,B=D+F;U<B;U+=3)_(e.getX(U+0),e.getX(U+1),e.getX(U+2))}const S=new pe,T=new pe,M=new pe,C=new pe;function A(P){M.fromBufferAttribute(s,P),C.copy(M);const R=l[P];S.copy(R),S.sub(M.multiplyScalar(M.dot(R))).normalize(),T.crossVectors(C,R);const D=T.dot(c[P])<0?-1:1;o.setXYZW(P,S.x,S.y,S.z,D)}for(let P=0,R=E.length;P<R;++P){const O=E[P],D=O.start,F=O.count;for(let U=D,B=D+F;U<B;U+=3)A(e.getX(U+0)),A(e.getX(U+1)),A(e.getX(U+2))}}computeVertexNormals(){const e=this.index,n=this.getAttribute("position");if(n!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new ps(new Float32Array(n.count*3),3),this.setAttribute("normal",i);else for(let f=0,p=i.count;f<p;f++)i.setXYZ(f,0,0,0);const s=new pe,a=new pe,o=new pe,l=new pe,c=new pe,u=new pe,h=new pe,d=new pe;if(e)for(let f=0,p=e.count;f<p;f+=3){const g=e.getX(f+0),v=e.getX(f+1),x=e.getX(f+2);s.fromBufferAttribute(n,g),a.fromBufferAttribute(n,v),o.fromBufferAttribute(n,x),h.subVectors(o,a),d.subVectors(s,a),h.cross(d),l.fromBufferAttribute(i,g),c.fromBufferAttribute(i,v),u.fromBufferAttribute(i,x),l.add(h),c.add(h),u.add(h),i.setXYZ(g,l.x,l.y,l.z),i.setXYZ(v,c.x,c.y,c.z),i.setXYZ(x,u.x,u.y,u.z)}else for(let f=0,p=n.count;f<p;f+=3)s.fromBufferAttribute(n,f+0),a.fromBufferAttribute(n,f+1),o.fromBufferAttribute(n,f+2),h.subVectors(o,a),d.subVectors(s,a),h.cross(d),i.setXYZ(f+0,h.x,h.y,h.z),i.setXYZ(f+1,h.x,h.y,h.z),i.setXYZ(f+2,h.x,h.y,h.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let n=0,i=e.count;n<i;n++)Es.fromBufferAttribute(e,n),Es.normalize(),e.setXYZ(n,Es.x,Es.y,Es.z)}toNonIndexed(){function e(l,c){const u=l.array,h=l.itemSize,d=l.normalized,f=new u.constructor(c.length*h);let p=0,g=0;for(let v=0,x=c.length;v<x;v++){l.isInterleavedBufferAttribute?p=c[v]*l.data.stride+l.offset:p=c[v]*h;for(let _=0;_<h;_++)f[g++]=u[p++]}return new ps(f,h,d)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const n=new Ws,i=this.index.array,s=this.attributes;for(const l in s){const c=s[l],u=e(c,i);n.setAttribute(l,u)}const a=this.morphAttributes;for(const l in a){const c=[],u=a[l];for(let h=0,d=u.length;h<d;h++){const f=u[h],p=e(f,i);c.push(p)}n.morphAttributes[l]=c}n.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let l=0,c=o.length;l<c;l++){const u=o[l];n.addGroup(u.start,u.count,u.materialIndex)}return n}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const c=this.parameters;for(const u in c)c[u]!==void 0&&(e[u]=c[u]);return e}e.data={attributes:{}};const n=this.index;n!==null&&(e.data.index={type:n.array.constructor.name,array:Array.prototype.slice.call(n.array)});const i=this.attributes;for(const c in i){const u=i[c];e.data.attributes[c]=u.toJSON(e.data)}const s={};let a=!1;for(const c in this.morphAttributes){const u=this.morphAttributes[c],h=[];for(let d=0,f=u.length;d<f;d++){const p=u[d];h.push(p.toJSON(e.data))}h.length>0&&(s[c]=h,a=!0)}a&&(e.data.morphAttributes=s,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const l=this.boundingSphere;return l!==null&&(e.data.boundingSphere={center:l.center.toArray(),radius:l.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const n={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone());const s=e.attributes;for(const u in s){const h=s[u];this.setAttribute(u,h.clone(n))}const a=e.morphAttributes;for(const u in a){const h=[],d=a[u];for(let f=0,p=d.length;f<p;f++)h.push(d[f].clone(n));this.morphAttributes[u]=h}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let u=0,h=o.length;u<h;u++){const d=o[u];this.addGroup(d.start,d.count,d.materialIndex)}const l=e.boundingBox;l!==null&&(this.boundingBox=l.clone());const c=e.boundingSphere;return c!==null&&(this.boundingSphere=c.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const gG=new br,Rf=new EM,C1=new b_,yG=new pe,N1=new pe,P1=new pe,R1=new pe,jN=new pe,O1=new pe,vG=new pe,k1=new pe;class li extends Is{constructor(e=new Ws,n=new Aa){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=n,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const n=this.geometry.morphAttributes,i=Object.keys(n);if(i.length>0){const s=n[i[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,o=s.length;a<o;a++){const l=s[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=a}}}}getVertexPosition(e,n){const i=this.geometry,s=i.attributes.position,a=i.morphAttributes.position,o=i.morphTargetsRelative;n.fromBufferAttribute(s,e);const l=this.morphTargetInfluences;if(a&&l){O1.set(0,0,0);for(let c=0,u=a.length;c<u;c++){const h=l[c],d=a[c];h!==0&&(jN.fromBufferAttribute(d,e),o?O1.addScaledVector(jN,h):O1.addScaledVector(jN.sub(n),h))}n.add(O1)}return n}raycast(e,n){const i=this.geometry,s=this.material,a=this.matrixWorld;s!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),C1.copy(i.boundingSphere),C1.applyMatrix4(a),Rf.copy(e.ray).recast(e.near),!(C1.containsPoint(Rf.origin)===!1&&(Rf.intersectSphere(C1,yG)===null||Rf.origin.distanceToSquared(yG)>(e.far-e.near)**2))&&(gG.copy(a).invert(),Rf.copy(e.ray).applyMatrix4(gG),!(i.boundingBox!==null&&Rf.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(e,n,Rf)))}_computeIntersections(e,n,i){let s;const a=this.geometry,o=this.material,l=a.index,c=a.attributes.position,u=a.attributes.uv,h=a.attributes.uv1,d=a.attributes.normal,f=a.groups,p=a.drawRange;if(l!==null)if(Array.isArray(o))for(let g=0,v=f.length;g<v;g++){const x=f[g],_=o[x.materialIndex],E=Math.max(x.start,p.start),S=Math.min(l.count,Math.min(x.start+x.count,p.start+p.count));for(let T=E,M=S;T<M;T+=3){const C=l.getX(T),A=l.getX(T+1),P=l.getX(T+2);s=I1(this,_,e,i,u,h,d,C,A,P),s&&(s.faceIndex=Math.floor(T/3),s.face.materialIndex=x.materialIndex,n.push(s))}}else{const g=Math.max(0,p.start),v=Math.min(l.count,p.start+p.count);for(let x=g,_=v;x<_;x+=3){const E=l.getX(x),S=l.getX(x+1),T=l.getX(x+2);s=I1(this,o,e,i,u,h,d,E,S,T),s&&(s.faceIndex=Math.floor(x/3),n.push(s))}}else if(c!==void 0)if(Array.isArray(o))for(let g=0,v=f.length;g<v;g++){const x=f[g],_=o[x.materialIndex],E=Math.max(x.start,p.start),S=Math.min(c.count,Math.min(x.start+x.count,p.start+p.count));for(let T=E,M=S;T<M;T+=3){const C=T,A=T+1,P=T+2;s=I1(this,_,e,i,u,h,d,C,A,P),s&&(s.faceIndex=Math.floor(T/3),s.face.materialIndex=x.materialIndex,n.push(s))}}else{const g=Math.max(0,p.start),v=Math.min(c.count,p.start+p.count);for(let x=g,_=v;x<_;x+=3){const E=x,S=x+1,T=x+2;s=I1(this,o,e,i,u,h,d,E,S,T),s&&(s.faceIndex=Math.floor(x/3),n.push(s))}}}}function Nge(r,e,n,i,s,a,o,l){let c;if(e.side===Wr?c=i.intersectTriangle(o,a,s,!0,l):c=i.intersectTriangle(s,a,o,e.side===Ja,l),c===null)return null;k1.copy(l),k1.applyMatrix4(r.matrixWorld);const u=n.ray.origin.distanceTo(k1);return u<n.near||u>n.far?null:{distance:u,point:k1.clone(),object:r}}function I1(r,e,n,i,s,a,o,l,c,u){r.getVertexPosition(l,N1),r.getVertexPosition(c,P1),r.getVertexPosition(u,R1);const h=Nge(r,e,n,i,N1,P1,R1,vG);if(h){const d=new pe;sl.getBarycoord(vG,N1,P1,R1,d),s&&(h.uv=sl.getInterpolatedAttribute(s,l,c,u,d,new dt)),a&&(h.uv1=sl.getInterpolatedAttribute(a,l,c,u,d,new dt)),o&&(h.normal=sl.getInterpolatedAttribute(o,l,c,u,d,new pe),h.normal.dot(i.direction)>0&&h.normal.multiplyScalar(-1));const f={a:l,b:c,c:u,normal:new pe,materialIndex:0};sl.getNormal(N1,P1,R1,f.normal),h.face=f,h.barycoord=d}return h}class Bc extends Ws{constructor(e=1,n=1,i=1,s=1,a=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:n,depth:i,widthSegments:s,heightSegments:a,depthSegments:o};const l=this;s=Math.floor(s),a=Math.floor(a),o=Math.floor(o);const c=[],u=[],h=[],d=[];let f=0,p=0;g("z","y","x",-1,-1,i,n,e,o,a,0),g("z","y","x",1,-1,i,n,-e,o,a,1),g("x","z","y",1,1,e,i,n,s,o,2),g("x","z","y",1,-1,e,i,-n,s,o,3),g("x","y","z",1,-1,e,n,i,s,a,4),g("x","y","z",-1,-1,e,n,-i,s,a,5),this.setIndex(c),this.setAttribute("position",new $i(u,3)),this.setAttribute("normal",new $i(h,3)),this.setAttribute("uv",new $i(d,2));function g(v,x,_,E,S,T,M,C,A,P,R){const O=T/A,D=M/P,F=T/2,U=M/2,B=C/2,W=A+1,j=P+1;let $=0,z=0;const Z=new pe;for(let se=0;se<j;se++){const q=se*D-U;for(let ue=0;ue<W;ue++){const be=ue*O-F;Z[v]=be*E,Z[x]=q*S,Z[_]=B,u.push(Z.x,Z.y,Z.z),Z[v]=0,Z[x]=0,Z[_]=C>0?1:-1,h.push(Z.x,Z.y,Z.z),d.push(ue/A),d.push(1-se/P),$+=1}}for(let se=0;se<P;se++)for(let q=0;q<A;q++){const ue=f+q+W*se,be=f+q+W*(se+1),ee=f+(q+1)+W*(se+1),le=f+(q+1)+W*se;c.push(ue,be,le),c.push(be,ee,le),z+=6}l.addGroup(p,z,R),p+=z,f+=$}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Bc(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function gy(r){const e={};for(const n in r){e[n]={};for(const i in r[n]){const s=r[n][i];s&&(s.isColor||s.isMatrix3||s.isMatrix4||s.isVector2||s.isVector3||s.isVector4||s.isTexture||s.isQuaternion)?s.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[n][i]=null):e[n][i]=s.clone():Array.isArray(s)?e[n][i]=s.slice():e[n][i]=s}}return e}function wa(r){const e={};for(let n=0;n<r.length;n++){const i=gy(r[n]);for(const s in i)e[s]=i[s]}return e}function Pge(r){const e=[];for(let n=0;n<r.length;n++)e.push(r[n].clone());return e}function uee(r){const e=r.getRenderTarget();return e===null?r.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:tr.workingColorSpace}const hee={clone:gy,merge:wa};var Rge=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,Oge=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Wc extends pa{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=Rge,this.fragmentShader=Oge,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=gy(e.uniforms),this.uniformsGroups=Pge(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const n=super.toJSON(e);n.glslVersion=this.glslVersion,n.uniforms={};for(const s in this.uniforms){const o=this.uniforms[s].value;o&&o.isTexture?n.uniforms[s]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?n.uniforms[s]={type:"c",value:o.getHex()}:o&&o.isVector2?n.uniforms[s]={type:"v2",value:o.toArray()}:o&&o.isVector3?n.uniforms[s]={type:"v3",value:o.toArray()}:o&&o.isVector4?n.uniforms[s]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?n.uniforms[s]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?n.uniforms[s]={type:"m4",value:o.toArray()}:n.uniforms[s]={value:o}}Object.keys(this.defines).length>0&&(n.defines=this.defines),n.vertexShader=this.vertexShader,n.fragmentShader=this.fragmentShader,n.lights=this.lights,n.clipping=this.clipping;const i={};for(const s in this.extensions)this.extensions[s]===!0&&(i[s]=!0);return Object.keys(i).length>0&&(n.extensions=i),n}}let Dj=class extends Is{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new br,this.projectionMatrix=new br,this.projectionMatrixInverse=new br,this.coordinateSystem=Ka}copy(e,n){return super.copy(e,n),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,n){super.updateWorldMatrix(e,n),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}};const sd=new pe,xG=new dt,bG=new dt;class Ns extends Dj{constructor(e=50,n=1,i=.1,s=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=s,this.focus=10,this.aspect=n,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const n=.5*this.getFilmHeight()/e;this.fov=Tp*2*Math.atan(n),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(mx*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Tp*2*Math.atan(Math.tan(mx*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,n,i){sd.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(sd.x,sd.y).multiplyScalar(-e/sd.z),sd.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(sd.x,sd.y).multiplyScalar(-e/sd.z)}getViewSize(e,n){return this.getViewBounds(e,xG,bG),n.subVectors(bG,xG)}setViewOffset(e,n,i,s,a,o){this.aspect=e/n,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=i,this.view.offsetY=s,this.view.width=a,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let n=e*Math.tan(mx*.5*this.fov)/this.zoom,i=2*n,s=this.aspect*i,a=-.5*s;const o=this.view;if(this.view!==null&&this.view.enabled){const c=o.fullWidth,u=o.fullHeight;a+=o.offsetX*s/c,n-=o.offsetY*i/u,s*=o.width/c,i*=o.height/u}const l=this.filmOffset;l!==0&&(a+=e*l/this.getFilmWidth()),this.projectionMatrix.makePerspective(a,a+s,n,n-i,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.fov=this.fov,n.object.zoom=this.zoom,n.object.near=this.near,n.object.far=this.far,n.object.focus=this.focus,n.object.aspect=this.aspect,this.view!==null&&(n.object.view=Object.assign({},this.view)),n.object.filmGauge=this.filmGauge,n.object.filmOffset=this.filmOffset,n}}const Gm=-90,Vm=1;class dee extends Is{constructor(e,n,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;const s=new Ns(Gm,Vm,e,n);s.layers=this.layers,this.add(s);const a=new Ns(Gm,Vm,e,n);a.layers=this.layers,this.add(a);const o=new Ns(Gm,Vm,e,n);o.layers=this.layers,this.add(o);const l=new Ns(Gm,Vm,e,n);l.layers=this.layers,this.add(l);const c=new Ns(Gm,Vm,e,n);c.layers=this.layers,this.add(c);const u=new Ns(Gm,Vm,e,n);u.layers=this.layers,this.add(u)}updateCoordinateSystem(){const e=this.coordinateSystem,n=this.children.concat(),[i,s,a,o,l,c]=n;for(const u of n)this.remove(u);if(e===Ka)i.up.set(0,1,0),i.lookAt(1,0,0),s.up.set(0,1,0),s.lookAt(-1,0,0),a.up.set(0,0,-1),a.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),l.up.set(0,1,0),l.lookAt(0,0,1),c.up.set(0,1,0),c.lookAt(0,0,-1);else if(e===Bd)i.up.set(0,-1,0),i.lookAt(-1,0,0),s.up.set(0,-1,0),s.lookAt(1,0,0),a.up.set(0,0,1),a.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),l.up.set(0,-1,0),l.lookAt(0,0,1),c.up.set(0,-1,0),c.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const u of n)this.add(u),u.updateMatrixWorld()}update(e,n){this.parent===null&&this.updateMatrixWorld();const{renderTarget:i,activeMipmapLevel:s}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[a,o,l,c,u,h]=this.children,d=e.getRenderTarget(),f=e.getActiveCubeFace(),p=e.getActiveMipmapLevel(),g=e.xr.enabled;e.xr.enabled=!1;const v=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0,s),e.render(n,a),e.setRenderTarget(i,1,s),e.render(n,o),e.setRenderTarget(i,2,s),e.render(n,l),e.setRenderTarget(i,3,s),e.render(n,c),e.setRenderTarget(i,4,s),e.render(n,u),i.texture.generateMipmaps=v,e.setRenderTarget(i,5,s),e.render(n,h),e.setRenderTarget(d,f,p),e.xr.enabled=g,i.texture.needsPMREMUpdate=!0}}class MM extends Oa{constructor(e=[],n=ml,i,s,a,o,l,c,u,h){super(e,n,i,s,a,o,l,c,u,h),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class fee extends jd{constructor(e=1,n={}){super(e,e,n),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},s=[i,i,i,i,i,i];this.texture=new MM(s,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=n.generateMipmaps!==void 0?n.generateMipmaps:!1,this.texture.minFilter=n.minFilter!==void 0?n.minFilter:ds}fromEquirectangularTexture(e,n){this.texture.type=n.type,this.texture.colorSpace=n.colorSpace,this.texture.generateMipmaps=n.generateMipmaps,this.texture.minFilter=n.minFilter,this.texture.magFilter=n.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},s=new Bc(5,5,5),a=new Wc({name:"CubemapFromEquirect",uniforms:gy(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:Wr,blending:eo});a.uniforms.tEquirect.value=n;const o=new li(s,a),l=n.minFilter;return n.minFilter===Xa&&(n.minFilter=ds),new dee(1,10,this).update(e,o),n.minFilter=l,o.geometry.dispose(),o.material.dispose(),this}clear(e,n=!0,i=!0,s=!0){const a=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(n,i,s);e.setRenderTarget(a)}}let Tg=class extends Is{constructor(){super(),this.isGroup=!0,this.type="Group"}};const kge={type:"move"};class oT{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Tg,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Tg,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new pe,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new pe),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Tg,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new pe,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new pe),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const n=this._hand;if(n)for(const i of e.hand.values())this._getHandJoint(n,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,n,i){let s=null,a=null,o=null;const l=this._targetRay,c=this._grip,u=this._hand;if(e&&n.session.visibilityState!=="visible-blurred"){if(u&&e.hand){o=!0;for(const v of e.hand.values()){const x=n.getJointPose(v,i),_=this._getHandJoint(u,v);x!==null&&(_.matrix.fromArray(x.transform.matrix),_.matrix.decompose(_.position,_.rotation,_.scale),_.matrixWorldNeedsUpdate=!0,_.jointRadius=x.radius),_.visible=x!==null}const h=u.joints["index-finger-tip"],d=u.joints["thumb-tip"],f=h.position.distanceTo(d.position),p=.02,g=.005;u.inputState.pinching&&f>p+g?(u.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!u.inputState.pinching&&f<=p-g&&(u.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else c!==null&&e.gripSpace&&(a=n.getPose(e.gripSpace,i),a!==null&&(c.matrix.fromArray(a.transform.matrix),c.matrix.decompose(c.position,c.rotation,c.scale),c.matrixWorldNeedsUpdate=!0,a.linearVelocity?(c.hasLinearVelocity=!0,c.linearVelocity.copy(a.linearVelocity)):c.hasLinearVelocity=!1,a.angularVelocity?(c.hasAngularVelocity=!0,c.angularVelocity.copy(a.angularVelocity)):c.hasAngularVelocity=!1));l!==null&&(s=n.getPose(e.targetRaySpace,i),s===null&&a!==null&&(s=a),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1,this.dispatchEvent(kge)))}return l!==null&&(l.visible=s!==null),c!==null&&(c.visible=a!==null),u!==null&&(u.visible=o!==null),this}_getHandJoint(e,n){if(e.joints[n.jointName]===void 0){const i=new Tg;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[n.jointName]=i,e.add(i)}return e.joints[n.jointName]}}class AM extends Is{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new yl,this.environmentIntensity=1,this.environmentRotation=new yl,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,n){return super.copy(e,n),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const n=super.toJSON(e);return this.fog!==null&&(n.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(n.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(n.object.backgroundIntensity=this.backgroundIntensity),n.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(n.object.environmentIntensity=this.environmentIntensity),n.object.environmentRotation=this.environmentRotation.toArray(),n}}class pee{constructor(e,n){this.isInterleavedBuffer=!0,this.array=e,this.stride=n,this.count=e!==void 0?e.length/n:0,this.usage=FT,this.updateRanges=[],this.version=0,this.uuid=ih()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,n){this.updateRanges.push({start:e,count:n})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,n,i){e*=this.stride,i*=n.stride;for(let s=0,a=this.stride;s<a;s++)this.array[e+s]=n.array[i+s];return this}set(e,n=0){return this.array.set(e,n),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=ih()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const n=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(n,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=ih()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const va=new pe;class Lj{constructor(e,n,i,s=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=n,this.offset=i,this.normalized=s}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let n=0,i=this.data.count;n<i;n++)va.fromBufferAttribute(this,n),va.applyMatrix4(e),this.setXYZ(n,va.x,va.y,va.z);return this}applyNormalMatrix(e){for(let n=0,i=this.count;n<i;n++)va.fromBufferAttribute(this,n),va.applyNormalMatrix(e),this.setXYZ(n,va.x,va.y,va.z);return this}transformDirection(e){for(let n=0,i=this.count;n<i;n++)va.fromBufferAttribute(this,n),va.transformDirection(e),this.setXYZ(n,va.x,va.y,va.z);return this}getComponent(e,n){let i=this.array[e*this.data.stride+this.offset+n];return this.normalized&&(i=Ma(i,this.array)),i}setComponent(e,n,i){return this.normalized&&(i=Xn(i,this.array)),this.data.array[e*this.data.stride+this.offset+n]=i,this}setX(e,n){return this.normalized&&(n=Xn(n,this.array)),this.data.array[e*this.data.stride+this.offset]=n,this}setY(e,n){return this.normalized&&(n=Xn(n,this.array)),this.data.array[e*this.data.stride+this.offset+1]=n,this}setZ(e,n){return this.normalized&&(n=Xn(n,this.array)),this.data.array[e*this.data.stride+this.offset+2]=n,this}setW(e,n){return this.normalized&&(n=Xn(n,this.array)),this.data.array[e*this.data.stride+this.offset+3]=n,this}getX(e){let n=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(n=Ma(n,this.array)),n}getY(e){let n=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(n=Ma(n,this.array)),n}getZ(e){let n=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(n=Ma(n,this.array)),n}getW(e){let n=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(n=Ma(n,this.array)),n}setXY(e,n,i){return e=e*this.data.stride+this.offset,this.normalized&&(n=Xn(n,this.array),i=Xn(i,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=i,this}setXYZ(e,n,i,s){return e=e*this.data.stride+this.offset,this.normalized&&(n=Xn(n,this.array),i=Xn(i,this.array),s=Xn(s,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=i,this.data.array[e+2]=s,this}setXYZW(e,n,i,s,a){return e=e*this.data.stride+this.offset,this.normalized&&(n=Xn(n,this.array),i=Xn(i,this.array),s=Xn(s,this.array),a=Xn(a,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=i,this.data.array[e+2]=s,this.data.array[e+3]=a,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const n=[];for(let i=0;i<this.count;i++){const s=i*this.data.stride+this.offset;for(let a=0;a<this.itemSize;a++)n.push(this.data.array[s+a])}return new ps(new this.array.constructor(n),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Lj(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const n=[];for(let i=0;i<this.count;i++){const s=i*this.data.stride+this.offset;for(let a=0;a<this.itemSize;a++)n.push(this.data.array[s+a])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:n,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class Ige extends pa{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new ln(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}class Dge extends Oa{constructor(e=null,n=1,i=1,s,a,o,l,c,u=ei,h=ei,d,f){super(null,o,l,c,u,h,s,a,d,f),this.isDataTexture=!0,this.image={data:e,width:n,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Lge extends ps{constructor(e,n,i,s=1){super(e,n,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=s}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const UN=new pe,Fge=new pe,Bge=new zn;let nl=class{constructor(e=new pe(1,0,0),n=0){this.isPlane=!0,this.normal=e,this.constant=n}set(e,n){return this.normal.copy(e),this.constant=n,this}setComponents(e,n,i,s){return this.normal.set(e,n,i),this.constant=s,this}setFromNormalAndCoplanarPoint(e,n){return this.normal.copy(e),this.constant=-n.dot(this.normal),this}setFromCoplanarPoints(e,n,i){const s=UN.subVectors(i,n).cross(Fge.subVectors(e,n)).normalize();return this.setFromNormalAndCoplanarPoint(s,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,n){return n.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,n){const i=e.delta(UN),s=this.normal.dot(i);if(s===0)return this.distanceToPoint(e.start)===0?n.copy(e.start):null;const a=-(e.start.dot(this.normal)+this.constant)/s;return a<0||a>1?null:n.copy(e.start).addScaledVector(i,a)}intersectsLine(e){const n=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return n<0&&i>0||i<0&&n>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,n){const i=n||Bge.getNormalMatrix(e),s=this.coplanarPoint(UN).applyMatrix4(e),a=this.normal.applyMatrix3(i).normalize();return this.constant=-s.dot(a),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}};const Of=new b_,D1=new pe;let CM=class{constructor(e=new nl,n=new nl,i=new nl,s=new nl,a=new nl,o=new nl){this.planes=[e,n,i,s,a,o]}set(e,n,i,s,a,o){const l=this.planes;return l[0].copy(e),l[1].copy(n),l[2].copy(i),l[3].copy(s),l[4].copy(a),l[5].copy(o),this}copy(e){const n=this.planes;for(let i=0;i<6;i++)n[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,n=Ka){const i=this.planes,s=e.elements,a=s[0],o=s[1],l=s[2],c=s[3],u=s[4],h=s[5],d=s[6],f=s[7],p=s[8],g=s[9],v=s[10],x=s[11],_=s[12],E=s[13],S=s[14],T=s[15];if(i[0].setComponents(c-a,f-u,x-p,T-_).normalize(),i[1].setComponents(c+a,f+u,x+p,T+_).normalize(),i[2].setComponents(c+o,f+h,x+g,T+E).normalize(),i[3].setComponents(c-o,f-h,x-g,T-E).normalize(),i[4].setComponents(c-l,f-d,x-v,T-S).normalize(),n===Ka)i[5].setComponents(c+l,f+d,x+v,T+S).normalize();else if(n===Bd)i[5].setComponents(l,d,v,S).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+n);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Of.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const n=e.geometry;n.boundingSphere===null&&n.computeBoundingSphere(),Of.copy(n.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Of)}intersectsSprite(e){return Of.center.set(0,0,0),Of.radius=.7071067811865476,Of.applyMatrix4(e.matrixWorld),this.intersectsSphere(Of)}intersectsSphere(e){const n=this.planes,i=e.center,s=-e.radius;for(let a=0;a<6;a++)if(n[a].distanceToPoint(i)<s)return!1;return!0}intersectsBox(e){const n=this.planes;for(let i=0;i<6;i++){const s=n[i];if(D1.x=s.normal.x>0?e.max.x:e.min.x,D1.y=s.normal.y>0?e.max.y:e.min.y,D1.z=s.normal.z>0?e.max.z:e.min.z,s.distanceToPoint(D1)<0)return!1}return!0}containsPoint(e){const n=this.planes;for(let i=0;i<6;i++)if(n[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}};class __ extends pa{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new ln(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const jT=new pe,UT=new pe,_G=new br,cv=new EM,L1=new b_,zN=new pe,wG=new pe;let mee=class extends Is{constructor(e=new Ws,n=new __){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=n,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const n=e.attributes.position,i=[0];for(let s=1,a=n.count;s<a;s++)jT.fromBufferAttribute(n,s-1),UT.fromBufferAttribute(n,s),i[s]=i[s-1],i[s]+=jT.distanceTo(UT);e.setAttribute("lineDistance",new $i(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,n){const i=this.geometry,s=this.matrixWorld,a=e.params.Line.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),L1.copy(i.boundingSphere),L1.applyMatrix4(s),L1.radius+=a,e.ray.intersectsSphere(L1)===!1)return;_G.copy(s).invert(),cv.copy(e.ray).applyMatrix4(_G);const l=a/((this.scale.x+this.scale.y+this.scale.z)/3),c=l*l,u=this.isLineSegments?2:1,h=i.index,f=i.attributes.position;if(h!==null){const p=Math.max(0,o.start),g=Math.min(h.count,o.start+o.count);for(let v=p,x=g-1;v<x;v+=u){const _=h.getX(v),E=h.getX(v+1),S=F1(this,e,cv,c,_,E,v);S&&n.push(S)}if(this.isLineLoop){const v=h.getX(g-1),x=h.getX(p),_=F1(this,e,cv,c,v,x,g-1);_&&n.push(_)}}else{const p=Math.max(0,o.start),g=Math.min(f.count,o.start+o.count);for(let v=p,x=g-1;v<x;v+=u){const _=F1(this,e,cv,c,v,v+1,v);_&&n.push(_)}if(this.isLineLoop){const v=F1(this,e,cv,c,g-1,p,g-1);v&&n.push(v)}}}updateMorphTargets(){const n=this.geometry.morphAttributes,i=Object.keys(n);if(i.length>0){const s=n[i[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,o=s.length;a<o;a++){const l=s[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=a}}}}};function F1(r,e,n,i,s,a,o){const l=r.geometry.attributes.position;if(jT.fromBufferAttribute(l,s),UT.fromBufferAttribute(l,a),n.distanceSqToSegment(jT,UT,zN,wG)>i)return;zN.applyMatrix4(r.matrixWorld);const u=e.ray.origin.distanceTo(zN);if(!(u<e.near||u>e.far))return{distance:u,point:wG.clone().applyMatrix4(r.matrixWorld),index:o,face:null,faceIndex:null,barycoord:null,object:r}}class jge extends pa{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new ln(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}class Uge extends Oa{constructor(e,n){super({width:e,height:n}),this.isFramebufferTexture=!0,this.magFilter=ei,this.minFilter=ei,this.generateMipmaps=!1,this.needsUpdate=!0}}class dl extends Oa{constructor(e,n,i=Vr,s,a,o,l=ei,c=ei,u,h=Io){if(h!==Io&&h!==Do)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");super(null,s,a,o,l,c,h,i,u),this.isDepthTexture=!0,this.image={width:e,height:n},this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.source=new Pj(Object.assign({},e.image)),this.compareFunction=e.compareFunction,this}toJSON(e){const n=super.toJSON(e);return this.compareFunction!==null&&(n.compareFunction=this.compareFunction),n}}let Th=class{constructor(){this.type="Curve",this.arcLengthDivisions=200,this.needsUpdate=!1,this.cacheArcLengths=null}getPoint(){console.warn("THREE.Curve: .getPoint() not implemented.")}getPointAt(e,n){const i=this.getUtoTmapping(e);return this.getPoint(i,n)}getPoints(e=5){const n=[];for(let i=0;i<=e;i++)n.push(this.getPoint(i/e));return n}getSpacedPoints(e=5){const n=[];for(let i=0;i<=e;i++)n.push(this.getPointAt(i/e));return n}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const n=[];let i,s=this.getPoint(0),a=0;n.push(0);for(let o=1;o<=e;o++)i=this.getPoint(o/e),a+=i.distanceTo(s),n.push(a),s=i;return this.cacheArcLengths=n,n}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,n=null){const i=this.getLengths();let s=0;const a=i.length;let o;n?o=n:o=e*i[a-1];let l=0,c=a-1,u;for(;l<=c;)if(s=Math.floor(l+(c-l)/2),u=i[s]-o,u<0)l=s+1;else if(u>0)c=s-1;else{c=s;break}if(s=c,i[s]===o)return s/(a-1);const h=i[s],f=i[s+1]-h,p=(o-h)/f;return(s+p)/(a-1)}getTangent(e,n){let s=e-1e-4,a=e+1e-4;s<0&&(s=0),a>1&&(a=1);const o=this.getPoint(s),l=this.getPoint(a),c=n||(o.isVector2?new dt:new pe);return c.copy(l).sub(o).normalize(),c}getTangentAt(e,n){const i=this.getUtoTmapping(e);return this.getTangent(i,n)}computeFrenetFrames(e,n=!1){const i=new pe,s=[],a=[],o=[],l=new pe,c=new br;for(let p=0;p<=e;p++){const g=p/e;s[p]=this.getTangentAt(g,new pe)}a[0]=new pe,o[0]=new pe;let u=Number.MAX_VALUE;const h=Math.abs(s[0].x),d=Math.abs(s[0].y),f=Math.abs(s[0].z);h<=u&&(u=h,i.set(1,0,0)),d<=u&&(u=d,i.set(0,1,0)),f<=u&&i.set(0,0,1),l.crossVectors(s[0],i).normalize(),a[0].crossVectors(s[0],l),o[0].crossVectors(s[0],a[0]);for(let p=1;p<=e;p++){if(a[p]=a[p-1].clone(),o[p]=o[p-1].clone(),l.crossVectors(s[p-1],s[p]),l.length()>Number.EPSILON){l.normalize();const g=Math.acos(Kn(s[p-1].dot(s[p]),-1,1));a[p].applyMatrix4(c.makeRotationAxis(l,g))}o[p].crossVectors(s[p],a[p])}if(n===!0){let p=Math.acos(Kn(a[0].dot(a[e]),-1,1));p/=e,s[0].dot(l.crossVectors(a[0],a[e]))>0&&(p=-p);for(let g=1;g<=e;g++)a[g].applyMatrix4(c.makeRotationAxis(s[g],p*g)),o[g].crossVectors(s[g],a[g])}return{tangents:s,normals:a,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}};class gee extends Th{constructor(e=0,n=0,i=1,s=1,a=0,o=Math.PI*2,l=!1,c=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=n,this.xRadius=i,this.yRadius=s,this.aStartAngle=a,this.aEndAngle=o,this.aClockwise=l,this.aRotation=c}getPoint(e,n=new dt){const i=n,s=Math.PI*2;let a=this.aEndAngle-this.aStartAngle;const o=Math.abs(a)<Number.EPSILON;for(;a<0;)a+=s;for(;a>s;)a-=s;a<Number.EPSILON&&(o?a=0:a=s),this.aClockwise===!0&&!o&&(a===s?a=-s:a=a-s);const l=this.aStartAngle+e*a;let c=this.aX+this.xRadius*Math.cos(l),u=this.aY+this.yRadius*Math.sin(l);if(this.aRotation!==0){const h=Math.cos(this.aRotation),d=Math.sin(this.aRotation),f=c-this.aX,p=u-this.aY;c=f*h-p*d+this.aX,u=f*d+p*h+this.aY}return i.set(c,u)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class zge extends gee{constructor(e,n,i,s,a,o){super(e,n,i,i,s,a,o),this.isArcCurve=!0,this.type="ArcCurve"}}function Fj(){let r=0,e=0,n=0,i=0;function s(a,o,l,c){r=a,e=l,n=-3*a+3*o-2*l-c,i=2*a-2*o+l+c}return{initCatmullRom:function(a,o,l,c,u){s(o,l,u*(l-a),u*(c-o))},initNonuniformCatmullRom:function(a,o,l,c,u,h,d){let f=(o-a)/u-(l-a)/(u+h)+(l-o)/h,p=(l-o)/h-(c-o)/(h+d)+(c-l)/d;f*=h,p*=h,s(o,l,f,p)},calc:function(a){const o=a*a,l=o*a;return r+e*a+n*o+i*l}}}const B1=new pe,$N=new Fj,GN=new Fj,VN=new Fj;class $ge extends Th{constructor(e=[],n=!1,i="centripetal",s=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=n,this.curveType=i,this.tension=s}getPoint(e,n=new pe){const i=n,s=this.points,a=s.length,o=(a-(this.closed?0:1))*e;let l=Math.floor(o),c=o-l;this.closed?l+=l>0?0:(Math.floor(Math.abs(l)/a)+1)*a:c===0&&l===a-1&&(l=a-2,c=1);let u,h;this.closed||l>0?u=s[(l-1)%a]:(B1.subVectors(s[0],s[1]).add(s[0]),u=B1);const d=s[l%a],f=s[(l+1)%a];if(this.closed||l+2<a?h=s[(l+2)%a]:(B1.subVectors(s[a-1],s[a-2]).add(s[a-1]),h=B1),this.curveType==="centripetal"||this.curveType==="chordal"){const p=this.curveType==="chordal"?.5:.25;let g=Math.pow(u.distanceToSquared(d),p),v=Math.pow(d.distanceToSquared(f),p),x=Math.pow(f.distanceToSquared(h),p);v<1e-4&&(v=1),g<1e-4&&(g=v),x<1e-4&&(x=v),$N.initNonuniformCatmullRom(u.x,d.x,f.x,h.x,g,v,x),GN.initNonuniformCatmullRom(u.y,d.y,f.y,h.y,g,v,x),VN.initNonuniformCatmullRom(u.z,d.z,f.z,h.z,g,v,x)}else this.curveType==="catmullrom"&&($N.initCatmullRom(u.x,d.x,f.x,h.x,this.tension),GN.initCatmullRom(u.y,d.y,f.y,h.y,this.tension),VN.initCatmullRom(u.z,d.z,f.z,h.z,this.tension));return i.set($N.calc(c),GN.calc(c),VN.calc(c)),i}copy(e){super.copy(e),this.points=[];for(let n=0,i=e.points.length;n<i;n++){const s=e.points[n];this.points.push(s.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let n=0,i=this.points.length;n<i;n++){const s=this.points[n];e.points.push(s.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let n=0,i=e.points.length;n<i;n++){const s=e.points[n];this.points.push(new pe().fromArray(s))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function SG(r,e,n,i,s){const a=(i-e)*.5,o=(s-n)*.5,l=r*r,c=r*l;return(2*n-2*i+a+o)*c+(-3*n+3*i-2*a-o)*l+a*r+n}function Gge(r,e){const n=1-r;return n*n*e}function Vge(r,e){return 2*(1-r)*r*e}function Hge(r,e){return r*r*e}function yx(r,e,n,i){return Gge(r,e)+Vge(r,n)+Hge(r,i)}function Wge(r,e){const n=1-r;return n*n*n*e}function qge(r,e){const n=1-r;return 3*n*n*r*e}function Xge(r,e){return 3*(1-r)*r*r*e}function Kge(r,e){return r*r*r*e}function vx(r,e,n,i,s){return Wge(r,e)+qge(r,n)+Xge(r,i)+Kge(r,s)}class Yge extends Th{constructor(e=new dt,n=new dt,i=new dt,s=new dt){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=n,this.v2=i,this.v3=s}getPoint(e,n=new dt){const i=n,s=this.v0,a=this.v1,o=this.v2,l=this.v3;return i.set(vx(e,s.x,a.x,o.x,l.x),vx(e,s.y,a.y,o.y,l.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class yee extends Th{constructor(e=new pe,n=new pe,i=new pe,s=new pe){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=n,this.v2=i,this.v3=s}getPoint(e,n=new pe){const i=n,s=this.v0,a=this.v1,o=this.v2,l=this.v3;return i.set(vx(e,s.x,a.x,o.x,l.x),vx(e,s.y,a.y,o.y,l.y),vx(e,s.z,a.z,o.z,l.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class Zge extends Th{constructor(e=new dt,n=new dt){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=n}getPoint(e,n=new dt){const i=n;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,n){return this.getPoint(e,n)}getTangent(e,n=new dt){return n.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,n){return this.getTangent(e,n)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Qge extends Th{constructor(e=new pe,n=new pe){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=n}getPoint(e,n=new pe){const i=n;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,n){return this.getPoint(e,n)}getTangent(e,n=new pe){return n.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,n){return this.getTangent(e,n)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Jge extends Th{constructor(e=new dt,n=new dt,i=new dt){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=n,this.v2=i}getPoint(e,n=new dt){const i=n,s=this.v0,a=this.v1,o=this.v2;return i.set(yx(e,s.x,a.x,o.x),yx(e,s.y,a.y,o.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Bj extends Th{constructor(e=new pe,n=new pe,i=new pe){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=n,this.v2=i}getPoint(e,n=new pe){const i=n,s=this.v0,a=this.v1,o=this.v2;return i.set(yx(e,s.x,a.x,o.x),yx(e,s.y,a.y,o.y),yx(e,s.z,a.z,o.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class eye extends Th{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,n=new dt){const i=n,s=this.points,a=(s.length-1)*e,o=Math.floor(a),l=a-o,c=s[o===0?o:o-1],u=s[o],h=s[o>s.length-2?s.length-1:o+1],d=s[o>s.length-3?s.length-1:o+2];return i.set(SG(l,c.x,u.x,h.x,d.x),SG(l,c.y,u.y,h.y,d.y)),i}copy(e){super.copy(e),this.points=[];for(let n=0,i=e.points.length;n<i;n++){const s=e.points[n];this.points.push(s.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let n=0,i=this.points.length;n<i;n++){const s=this.points[n];e.points.push(s.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let n=0,i=e.points.length;n<i;n++){const s=e.points[n];this.points.push(new dt().fromArray(s))}return this}}var tye=Object.freeze({__proto__:null,ArcCurve:zge,CatmullRomCurve3:$ge,CubicBezierCurve:Yge,CubicBezierCurve3:yee,EllipseCurve:gee,LineCurve:Zge,LineCurve3:Qge,QuadraticBezierCurve:Jge,QuadraticBezierCurve3:Bj,SplineCurve:eye});class w_ extends Ws{constructor(e=1,n=1,i=1,s=32,a=1,o=!1,l=0,c=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:n,height:i,radialSegments:s,heightSegments:a,openEnded:o,thetaStart:l,thetaLength:c};const u=this;s=Math.floor(s),a=Math.floor(a);const h=[],d=[],f=[],p=[];let g=0;const v=[],x=i/2;let _=0;E(),o===!1&&(e>0&&S(!0),n>0&&S(!1)),this.setIndex(h),this.setAttribute("position",new $i(d,3)),this.setAttribute("normal",new $i(f,3)),this.setAttribute("uv",new $i(p,2));function E(){const T=new pe,M=new pe;let C=0;const A=(n-e)/i;for(let P=0;P<=a;P++){const R=[],O=P/a,D=O*(n-e)+e;for(let F=0;F<=s;F++){const U=F/s,B=U*c+l,W=Math.sin(B),j=Math.cos(B);M.x=D*W,M.y=-O*i+x,M.z=D*j,d.push(M.x,M.y,M.z),T.set(W,A,j).normalize(),f.push(T.x,T.y,T.z),p.push(U,1-O),R.push(g++)}v.push(R)}for(let P=0;P<s;P++)for(let R=0;R<a;R++){const O=v[R][P],D=v[R+1][P],F=v[R+1][P+1],U=v[R][P+1];(e>0||R!==0)&&(h.push(O,D,U),C+=3),(n>0||R!==a-1)&&(h.push(D,F,U),C+=3)}u.addGroup(_,C,0),_+=C}function S(T){const M=g,C=new dt,A=new pe;let P=0;const R=T===!0?e:n,O=T===!0?1:-1;for(let F=1;F<=s;F++)d.push(0,x*O,0),f.push(0,O,0),p.push(.5,.5),g++;const D=g;for(let F=0;F<=s;F++){const B=F/s*c+l,W=Math.cos(B),j=Math.sin(B);A.x=R*j,A.y=x*O,A.z=R*W,d.push(A.x,A.y,A.z),f.push(0,O,0),C.x=W*.5+.5,C.y=j*.5*O+.5,p.push(C.x,C.y),g++}for(let F=0;F<s;F++){const U=M+F,B=D+F;T===!0?h.push(B,B+1,U):h.push(B+1,B,U),P+=3}u.addGroup(_,P,T===!0?1:2),_+=P}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new w_(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class jj extends w_{constructor(e=1,n=1,i=32,s=1,a=!1,o=0,l=Math.PI*2){super(0,e,n,i,s,a,o,l),this.type="ConeGeometry",this.parameters={radius:e,height:n,radialSegments:i,heightSegments:s,openEnded:a,thetaStart:o,thetaLength:l}}static fromJSON(e){return new jj(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class S_ extends Ws{constructor(e=1,n=1,i=1,s=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:n,widthSegments:i,heightSegments:s};const a=e/2,o=n/2,l=Math.floor(i),c=Math.floor(s),u=l+1,h=c+1,d=e/l,f=n/c,p=[],g=[],v=[],x=[];for(let _=0;_<h;_++){const E=_*f-o;for(let S=0;S<u;S++){const T=S*d-a;g.push(T,-E,0),v.push(0,0,1),x.push(S/l),x.push(1-_/c)}}for(let _=0;_<c;_++)for(let E=0;E<l;E++){const S=E+u*_,T=E+u*(_+1),M=E+1+u*(_+1),C=E+1+u*_;p.push(S,T,C),p.push(T,M,C)}this.setIndex(p),this.setAttribute("position",new $i(g,3)),this.setAttribute("normal",new $i(v,3)),this.setAttribute("uv",new $i(x,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new S_(e.width,e.height,e.widthSegments,e.heightSegments)}}class Ep extends Ws{constructor(e=1,n=32,i=16,s=0,a=Math.PI*2,o=0,l=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:n,heightSegments:i,phiStart:s,phiLength:a,thetaStart:o,thetaLength:l},n=Math.max(3,Math.floor(n)),i=Math.max(2,Math.floor(i));const c=Math.min(o+l,Math.PI);let u=0;const h=[],d=new pe,f=new pe,p=[],g=[],v=[],x=[];for(let _=0;_<=i;_++){const E=[],S=_/i;let T=0;_===0&&o===0?T=.5/n:_===i&&c===Math.PI&&(T=-.5/n);for(let M=0;M<=n;M++){const C=M/n;d.x=-e*Math.cos(s+C*a)*Math.sin(o+S*l),d.y=e*Math.cos(o+S*l),d.z=e*Math.sin(s+C*a)*Math.sin(o+S*l),g.push(d.x,d.y,d.z),f.copy(d).normalize(),v.push(f.x,f.y,f.z),x.push(C+T,1-S),E.push(u++)}h.push(E)}for(let _=0;_<i;_++)for(let E=0;E<n;E++){const S=h[_][E+1],T=h[_][E],M=h[_+1][E],C=h[_+1][E+1];(_!==0||o>0)&&p.push(S,T,C),(_!==i-1||c<Math.PI)&&p.push(T,M,C)}this.setIndex(p),this.setAttribute("position",new $i(g,3)),this.setAttribute("normal",new $i(v,3)),this.setAttribute("uv",new $i(x,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ep(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class Uj extends Ws{constructor(e=new Bj(new pe(-1,-1,0),new pe(-1,1,0),new pe(1,1,0)),n=64,i=1,s=8,a=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:n,radius:i,radialSegments:s,closed:a};const o=e.computeFrenetFrames(n,a);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const l=new pe,c=new pe,u=new dt;let h=new pe;const d=[],f=[],p=[],g=[];v(),this.setIndex(g),this.setAttribute("position",new $i(d,3)),this.setAttribute("normal",new $i(f,3)),this.setAttribute("uv",new $i(p,2));function v(){for(let S=0;S<n;S++)x(S);x(a===!1?n:0),E(),_()}function x(S){h=e.getPointAt(S/n,h);const T=o.normals[S],M=o.binormals[S];for(let C=0;C<=s;C++){const A=C/s*Math.PI*2,P=Math.sin(A),R=-Math.cos(A);c.x=R*T.x+P*M.x,c.y=R*T.y+P*M.y,c.z=R*T.z+P*M.z,c.normalize(),f.push(c.x,c.y,c.z),l.x=h.x+i*c.x,l.y=h.y+i*c.y,l.z=h.z+i*c.z,d.push(l.x,l.y,l.z)}}function _(){for(let S=1;S<=n;S++)for(let T=1;T<=s;T++){const M=(s+1)*(S-1)+(T-1),C=(s+1)*S+(T-1),A=(s+1)*S+T,P=(s+1)*(S-1)+T;g.push(M,C,P),g.push(C,A,P)}}function E(){for(let S=0;S<=n;S++)for(let T=0;T<=s;T++)u.x=S/n,u.y=T/s,p.push(u.x,u.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new Uj(new tye[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class nye extends pa{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new ln(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class vee extends pa{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new ln(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ln(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ph,this.normalScale=new dt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new yl,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class rye extends vee{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new dt(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Kn(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(n){this.ior=(1+.4*n)/(1-.4*n)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new ln(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new ln(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new ln(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class iye extends pa{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new ln(16777215),this.specular=new ln(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ln(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ph,this.normalScale=new dt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new yl,this.combine=y_,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class sye extends pa{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new ln(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ln(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ph,this.normalScale=new dt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class aye extends pa{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ph,this.normalScale=new dt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class xee extends pa{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new ln(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ln(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ph,this.normalScale=new dt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new yl,this.combine=y_,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class oye extends pa{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=Ome,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class lye extends pa{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}class cye extends pa{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new ln(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ph,this.normalScale=new dt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class uye extends __{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}const TG={enabled:!1,files:{},add:function(r,e){this.enabled!==!1&&(this.files[r]=e)},get:function(r){if(this.enabled!==!1)return this.files[r]},remove:function(r){delete this.files[r]},clear:function(){this.files={}}};class hye{constructor(e,n,i){const s=this;let a=!1,o=0,l=0,c;const u=[];this.onStart=void 0,this.onLoad=e,this.onProgress=n,this.onError=i,this.itemStart=function(h){l++,a===!1&&s.onStart!==void 0&&s.onStart(h,o,l),a=!0},this.itemEnd=function(h){o++,s.onProgress!==void 0&&s.onProgress(h,o,l),o===l&&(a=!1,s.onLoad!==void 0&&s.onLoad())},this.itemError=function(h){s.onError!==void 0&&s.onError(h)},this.resolveURL=function(h){return c?c(h):h},this.setURLModifier=function(h){return c=h,this},this.addHandler=function(h,d){return u.push(h,d),this},this.removeHandler=function(h){const d=u.indexOf(h);return d!==-1&&u.splice(d,2),this},this.getHandler=function(h){for(let d=0,f=u.length;d<f;d+=2){const p=u[d],g=u[d+1];if(p.global&&(p.lastIndex=0),p.test(h))return g}return null}}}const dye=new hye;class zj{constructor(e){this.manager=e!==void 0?e:dye,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,n){const i=this;return new Promise(function(s,a){i.load(e,s,n,a)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}zj.DEFAULT_MATERIAL_NAME="__DEFAULT";class fye extends zj{constructor(e){super(e)}load(e,n,i,s){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const a=this,o=TG.get(e);if(o!==void 0)return a.manager.itemStart(e),setTimeout(function(){n&&n(o),a.manager.itemEnd(e)},0),o;const l=ub("img");function c(){h(),TG.add(e,this),n&&n(this),a.manager.itemEnd(e)}function u(d){h(),s&&s(d),a.manager.itemError(e),a.manager.itemEnd(e)}function h(){l.removeEventListener("load",c,!1),l.removeEventListener("error",u,!1)}return l.addEventListener("load",c,!1),l.addEventListener("error",u,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(l.crossOrigin=this.crossOrigin),a.manager.itemStart(e),l.src=e,l}}class pye extends zj{constructor(e){super(e)}load(e,n,i,s){const a=new Oa,o=new fye(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(l){a.image=l,a.needsUpdate=!0,n!==void 0&&n(a)},i,s),a}}let jp=class extends Is{constructor(e,n=1){super(),this.isLight=!0,this.type="Light",this.color=new ln(e),this.intensity=n}dispose(){}copy(e,n){return super.copy(e,n),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const n=super.toJSON(e);return n.object.color=this.color.getHex(),n.object.intensity=this.intensity,this.groundColor!==void 0&&(n.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(n.object.distance=this.distance),this.angle!==void 0&&(n.object.angle=this.angle),this.decay!==void 0&&(n.object.decay=this.decay),this.penumbra!==void 0&&(n.object.penumbra=this.penumbra),this.shadow!==void 0&&(n.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(n.object.target=this.target.uuid),n}};class mye extends jp{constructor(e,n,i){super(e,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Is.DEFAULT_UP),this.updateMatrix(),this.groundColor=new ln(n)}copy(e,n){return super.copy(e,n),this.groundColor.copy(e.groundColor),this}}const HN=new br,EG=new pe,MG=new pe;let $j=class{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new dt(512,512),this.map=null,this.mapPass=null,this.matrix=new br,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new CM,this._frameExtents=new dt(1,1),this._viewportCount=1,this._viewports=[new In(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const n=this.camera,i=this.matrix;EG.setFromMatrixPosition(e.matrixWorld),n.position.copy(EG),MG.setFromMatrixPosition(e.target.matrixWorld),n.lookAt(MG),n.updateMatrixWorld(),HN.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(HN),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(HN)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}};class gye extends $j{constructor(){super(new Ns(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const n=this.camera,i=Tp*2*e.angle*this.focus,s=this.mapSize.width/this.mapSize.height,a=e.distance||n.far;(i!==n.fov||s!==n.aspect||a!==n.far)&&(n.fov=i,n.aspect=s,n.far=a,n.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class bee extends jp{constructor(e,n,i=0,s=Math.PI/3,a=0,o=2){super(e,n),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Is.DEFAULT_UP),this.updateMatrix(),this.target=new Is,this.distance=i,this.angle=s,this.penumbra=a,this.decay=o,this.map=null,this.shadow=new gye}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,n){return super.copy(e,n),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const AG=new br,uv=new pe,WN=new pe;class yye extends $j{constructor(){super(new Ns(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new dt(4,2),this._viewportCount=6,this._viewports=[new In(2,1,1,1),new In(0,1,1,1),new In(3,1,1,1),new In(1,1,1,1),new In(3,0,1,1),new In(1,0,1,1)],this._cubeDirections=[new pe(1,0,0),new pe(-1,0,0),new pe(0,0,1),new pe(0,0,-1),new pe(0,1,0),new pe(0,-1,0)],this._cubeUps=[new pe(0,1,0),new pe(0,1,0),new pe(0,1,0),new pe(0,1,0),new pe(0,0,1),new pe(0,0,-1)]}updateMatrices(e,n=0){const i=this.camera,s=this.matrix,a=e.distance||i.far;a!==i.far&&(i.far=a,i.updateProjectionMatrix()),uv.setFromMatrixPosition(e.matrixWorld),i.position.copy(uv),WN.copy(i.position),WN.add(this._cubeDirections[n]),i.up.copy(this._cubeUps[n]),i.lookAt(WN),i.updateMatrixWorld(),s.makeTranslation(-uv.x,-uv.y,-uv.z),AG.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(AG)}}class vye extends jp{constructor(e,n,i=0,s=2){super(e,n),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=s,this.shadow=new yye}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,n){return super.copy(e,n),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}let T_=class extends Dj{constructor(e=-1,n=1,i=1,s=-1,a=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=n,this.top=i,this.bottom=s,this.near=a,this.far=o,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,n,i,s,a,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=i,this.view.offsetY=s,this.view.width=a,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),n=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,s=(this.top+this.bottom)/2;let a=i-e,o=i+e,l=s+n,c=s-n;if(this.view!==null&&this.view.enabled){const u=(this.right-this.left)/this.view.fullWidth/this.zoom,h=(this.top-this.bottom)/this.view.fullHeight/this.zoom;a+=u*this.view.offsetX,o=a+u*this.view.width,l-=h*this.view.offsetY,c=l-h*this.view.height}this.projectionMatrix.makeOrthographic(a,o,l,c,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.zoom=this.zoom,n.object.left=this.left,n.object.right=this.right,n.object.top=this.top,n.object.bottom=this.bottom,n.object.near=this.near,n.object.far=this.far,this.view!==null&&(n.object.view=Object.assign({},this.view)),n}},xye=class extends $j{constructor(){super(new T_(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}},bye=class extends jp{constructor(e,n){super(e,n),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Is.DEFAULT_UP),this.updateMatrix(),this.target=new Is,this.shadow=new xye}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}},_ye=class extends jp{constructor(e,n){super(e,n),this.isAmbientLight=!0,this.type="AmbientLight"}};class wye extends jp{constructor(e,n,i=10,s=10){super(e,n),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=i,this.height=s}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const n=super.toJSON(e);return n.object.width=this.width,n.object.height=this.height,n}}class Sye{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new pe)}set(e){for(let n=0;n<9;n++)this.coefficients[n].copy(e[n]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,n){const i=e.x,s=e.y,a=e.z,o=this.coefficients;return n.copy(o[0]).multiplyScalar(.282095),n.addScaledVector(o[1],.488603*s),n.addScaledVector(o[2],.488603*a),n.addScaledVector(o[3],.488603*i),n.addScaledVector(o[4],1.092548*(i*s)),n.addScaledVector(o[5],1.092548*(s*a)),n.addScaledVector(o[6],.315392*(3*a*a-1)),n.addScaledVector(o[7],1.092548*(i*a)),n.addScaledVector(o[8],.546274*(i*i-s*s)),n}getIrradianceAt(e,n){const i=e.x,s=e.y,a=e.z,o=this.coefficients;return n.copy(o[0]).multiplyScalar(.886227),n.addScaledVector(o[1],2*.511664*s),n.addScaledVector(o[2],2*.511664*a),n.addScaledVector(o[3],2*.511664*i),n.addScaledVector(o[4],2*.429043*i*s),n.addScaledVector(o[5],2*.429043*s*a),n.addScaledVector(o[6],.743125*a*a-.247708),n.addScaledVector(o[7],2*.429043*i*a),n.addScaledVector(o[8],.429043*(i*i-s*s)),n}add(e){for(let n=0;n<9;n++)this.coefficients[n].add(e.coefficients[n]);return this}addScaledSH(e,n){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],n);return this}scale(e){for(let n=0;n<9;n++)this.coefficients[n].multiplyScalar(e);return this}lerp(e,n){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],n);return this}equals(e){for(let n=0;n<9;n++)if(!this.coefficients[n].equals(e.coefficients[n]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,n=0){const i=this.coefficients;for(let s=0;s<9;s++)i[s].fromArray(e,n+s*3);return this}toArray(e=[],n=0){const i=this.coefficients;for(let s=0;s<9;s++)i[s].toArray(e,n+s*3);return e}static getBasisAt(e,n){const i=e.x,s=e.y,a=e.z;n[0]=.282095,n[1]=.488603*s,n[2]=.488603*a,n[3]=.488603*i,n[4]=1.092548*i*s,n[5]=1.092548*s*a,n[6]=.315392*(3*a*a-1),n[7]=1.092548*i*a,n[8]=.546274*(i*i-s*s)}}class Tye extends jp{constructor(e=new Sye,n=1){super(void 0,n),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const n=super.toJSON(e);return n.object.sh=this.sh.toArray(),n}}class _ee extends Ns{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e,this.index=0}}class wee{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=CG(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const n=CG();e=(n-this.oldTime)/1e3,this.oldTime=n,this.elapsedTime+=e}return e}}function CG(){return performance.now()}class Eye extends pee{constructor(e,n,i=1){super(e,n),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const n=super.clone(e);return n.meshPerAttribute=this.meshPerAttribute,n}toJSON(e){const n=super.toJSON(e);return n.isInstancedInterleavedBuffer=!0,n.meshPerAttribute=this.meshPerAttribute,n}}const NG=new br;let Mye=class{constructor(e,n,i=0,s=1/0){this.ray=new EM(e,n),this.near=i,this.far=s,this.camera=null,this.layers=new Oj,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,n){this.ray.set(e,n)}setFromCamera(e,n){n.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(n.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(n).sub(this.ray.origin).normalize(),this.camera=n):n.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(n.near+n.far)/(n.near-n.far)).unproject(n),this.ray.direction.set(0,0,-1).transformDirection(n.matrixWorld),this.camera=n):console.error("THREE.Raycaster: Unsupported camera type: "+n.type)}setFromXRController(e){return NG.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(NG),this}intersectObject(e,n=!0,i=[]){return s3(e,this,i,n),i.sort(PG),i}intersectObjects(e,n=!0,i=[]){for(let s=0,a=e.length;s<a;s++)s3(e[s],this,i,n);return i.sort(PG),i}};function PG(r,e){return r.distance-e.distance}function s3(r,e,n,i){let s=!0;if(r.layers.test(e.layers)&&r.raycast(e,n)===!1&&(s=!1),s===!0&&i===!0){const a=r.children;for(let o=0,l=a.length;o<l;o++)s3(a[o],e,n,!0)}}class RG{constructor(e=1,n=0,i=0){this.radius=e,this.phi=n,this.theta=i}set(e,n,i){return this.radius=e,this.phi=n,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Kn(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,n,i){return this.radius=Math.sqrt(e*e+n*n+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(Kn(n/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class NM{constructor(e,n,i,s){NM.prototype.isMatrix2=!0,this.elements=[1,0,0,1],e!==void 0&&this.set(e,n,i,s)}identity(){return this.set(1,0,0,1),this}fromArray(e,n=0){for(let i=0;i<4;i++)this.elements[i]=e[i+n];return this}set(e,n,i,s){const a=this.elements;return a[0]=e,a[2]=n,a[1]=i,a[3]=s,this}}let Gj=class extends Sh{constructor(e,n=null){super(),this.object=e,this.domElement=n,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(e){if(e===void 0){console.warn("THREE.Controls: connect() now requires an element.");return}this.domElement!==null&&this.disconnect(),this.domElement=e}disconnect(){}dispose(){}update(){}};function OG(r,e,n,i){const s=Aye(i);switch(n){case vj:return r*e;case xj:return r*e;case bj:return r*e*2;case x_:return r*e/s.components*s.byteLength;case r0:return r*e/s.components*s.byteLength;case Sp:return r*e*2/s.components*s.byteLength;case i0:return r*e*2/s.components*s.byteLength;case v_:return r*e*3/s.components*s.byteLength;case Oi:return r*e*4/s.components*s.byteLength;case s0:return r*e*4/s.components*s.byteLength;case hp:case Ad:return Math.floor((r+3)/4)*Math.floor((e+3)/4)*8;case Cd:case Nd:return Math.floor((r+3)/4)*Math.floor((e+3)/4)*16;case rb:case sb:return Math.max(r,16)*Math.max(e,8)/4;case nb:case ib:return Math.max(r,8)*Math.max(e,8)/2;case ab:case ey:return Math.floor((r+3)/4)*Math.floor((e+3)/4)*8;case ty:return Math.floor((r+3)/4)*Math.floor((e+3)/4)*16;case ny:return Math.floor((r+3)/4)*Math.floor((e+3)/4)*16;case ry:return Math.floor((r+4)/5)*Math.floor((e+3)/4)*16;case iy:return Math.floor((r+4)/5)*Math.floor((e+4)/5)*16;case sy:return Math.floor((r+5)/6)*Math.floor((e+4)/5)*16;case ay:return Math.floor((r+5)/6)*Math.floor((e+5)/6)*16;case oy:return Math.floor((r+7)/8)*Math.floor((e+4)/5)*16;case ly:return Math.floor((r+7)/8)*Math.floor((e+5)/6)*16;case cy:return Math.floor((r+7)/8)*Math.floor((e+7)/8)*16;case uy:return Math.floor((r+9)/10)*Math.floor((e+4)/5)*16;case hy:return Math.floor((r+9)/10)*Math.floor((e+5)/6)*16;case dy:return Math.floor((r+9)/10)*Math.floor((e+7)/8)*16;case fy:return Math.floor((r+9)/10)*Math.floor((e+9)/10)*16;case py:return Math.floor((r+11)/12)*Math.floor((e+9)/10)*16;case my:return Math.floor((r+11)/12)*Math.floor((e+11)/12)*16;case dp:case t3:case n3:return Math.ceil(r/4)*Math.ceil(e/4)*16;case _j:case ob:return Math.ceil(r/4)*Math.ceil(e/4)*8;case lb:case cb:return Math.ceil(r/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${n} format.`)}function Aye(r){switch(r){case Ri:case cp:return{byteLength:1,components:1};case tc:case up:case da:return{byteLength:2,components:1};case bM:case _M:return{byteLength:2,components:4};case Vr:case Cs:case zi:return{byteLength:4,components:1};case wM:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${r}.`)}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:g_}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=g_);/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */function See(){let r=null,e=!1,n=null,i=null;function s(a,o){n(a,o),i=r.requestAnimationFrame(s)}return{start:function(){e!==!0&&n!==null&&(i=r.requestAnimationFrame(s),e=!0)},stop:function(){r.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(a){n=a},setContext:function(a){r=a}}}function Cye(r){const e=new WeakMap;function n(l,c){const u=l.array,h=l.usage,d=u.byteLength,f=r.createBuffer();r.bindBuffer(c,f),r.bufferData(c,u,h),l.onUploadCallback();let p;if(u instanceof Float32Array)p=r.FLOAT;else if(u instanceof Uint16Array)l.isFloat16BufferAttribute?p=r.HALF_FLOAT:p=r.UNSIGNED_SHORT;else if(u instanceof Int16Array)p=r.SHORT;else if(u instanceof Uint32Array)p=r.UNSIGNED_INT;else if(u instanceof Int32Array)p=r.INT;else if(u instanceof Int8Array)p=r.BYTE;else if(u instanceof Uint8Array)p=r.UNSIGNED_BYTE;else if(u instanceof Uint8ClampedArray)p=r.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+u);return{buffer:f,type:p,bytesPerElement:u.BYTES_PER_ELEMENT,version:l.version,size:d}}function i(l,c,u){const h=c.array,d=c.updateRanges;if(r.bindBuffer(u,l),d.length===0)r.bufferSubData(u,0,h);else{d.sort((p,g)=>p.start-g.start);let f=0;for(let p=1;p<d.length;p++){const g=d[f],v=d[p];v.start<=g.start+g.count+1?g.count=Math.max(g.count,v.start+v.count-g.start):(++f,d[f]=v)}d.length=f+1;for(let p=0,g=d.length;p<g;p++){const v=d[p];r.bufferSubData(u,v.start*h.BYTES_PER_ELEMENT,h,v.start,v.count)}c.clearUpdateRanges()}c.onUploadCallback()}function s(l){return l.isInterleavedBufferAttribute&&(l=l.data),e.get(l)}function a(l){l.isInterleavedBufferAttribute&&(l=l.data);const c=e.get(l);c&&(r.deleteBuffer(c.buffer),e.delete(l))}function o(l,c){if(l.isInterleavedBufferAttribute&&(l=l.data),l.isGLBufferAttribute){const h=e.get(l);(!h||h.version<l.version)&&e.set(l,{buffer:l.buffer,type:l.type,bytesPerElement:l.elementSize,version:l.version});return}const u=e.get(l);if(u===void 0)e.set(l,n(l,c));else if(u.version<l.version){if(u.size!==l.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");i(u.buffer,l,c),u.version=l.version}}return{get:s,remove:a,update:o}}var Nye=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,Pye=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,Rye=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,Oye=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,kye=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,Iye=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,Dye=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,Lye=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,Fye=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,Bye=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,jye=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,Uye=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,zye=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,$ye=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,Gye=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,Vye=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,Hye=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,Wye=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,qye=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,Xye=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,Kye=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,Yye=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,Zye=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,Qye=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,Jye=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,e0e=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,t0e=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,n0e=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,r0e=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,i0e=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,s0e="gl_FragColor = linearToOutputTexel( gl_FragColor );",a0e=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,o0e=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,l0e=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,c0e=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,u0e=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,h0e=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,d0e=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,f0e=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,p0e=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,m0e=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,g0e=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,y0e=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,v0e=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,x0e=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,b0e=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,_0e=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,w0e=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,S0e=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,T0e=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,E0e=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,M0e=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,A0e=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,C0e=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,N0e=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,P0e=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,R0e=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,O0e=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,k0e=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,I0e=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,D0e=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,L0e=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,F0e=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,B0e=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,j0e=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,U0e=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,z0e=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,$0e=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,G0e=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,V0e=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,H0e=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,W0e=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,q0e=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,X0e=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,K0e=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Y0e=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,Z0e=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,Q0e=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,J0e=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,eve=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,tve=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,nve=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,rve=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,ive=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,sve=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,ave=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,ove=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,lve=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,cve=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,uve=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,hve=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,dve=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,fve=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,pve=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,mve=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,gve=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,yve=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,vve=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,xve=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,bve=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,_ve=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,wve=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,Sve=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,Tve=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,Eve=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,Mve=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,Ave=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const Cve=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,Nve=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Pve=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Rve=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Ove=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,kve=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Ive=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,Dve=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,Lve=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,Fve=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,Bve=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,jve=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Uve=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,zve=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,$ve=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,Gve=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Vve=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Hve=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Wve=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,qve=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Xve=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,Kve=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,Yve=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Zve=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Qve=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,Jve=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,exe=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,txe=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,nxe=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,rxe=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,ixe=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,sxe=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,axe=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,oxe=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,er={alphahash_fragment:Nye,alphahash_pars_fragment:Pye,alphamap_fragment:Rye,alphamap_pars_fragment:Oye,alphatest_fragment:kye,alphatest_pars_fragment:Iye,aomap_fragment:Dye,aomap_pars_fragment:Lye,batching_pars_vertex:Fye,batching_vertex:Bye,begin_vertex:jye,beginnormal_vertex:Uye,bsdfs:zye,iridescence_fragment:$ye,bumpmap_pars_fragment:Gye,clipping_planes_fragment:Vye,clipping_planes_pars_fragment:Hye,clipping_planes_pars_vertex:Wye,clipping_planes_vertex:qye,color_fragment:Xye,color_pars_fragment:Kye,color_pars_vertex:Yye,color_vertex:Zye,common:Qye,cube_uv_reflection_fragment:Jye,defaultnormal_vertex:e0e,displacementmap_pars_vertex:t0e,displacementmap_vertex:n0e,emissivemap_fragment:r0e,emissivemap_pars_fragment:i0e,colorspace_fragment:s0e,colorspace_pars_fragment:a0e,envmap_fragment:o0e,envmap_common_pars_fragment:l0e,envmap_pars_fragment:c0e,envmap_pars_vertex:u0e,envmap_physical_pars_fragment:_0e,envmap_vertex:h0e,fog_vertex:d0e,fog_pars_vertex:f0e,fog_fragment:p0e,fog_pars_fragment:m0e,gradientmap_pars_fragment:g0e,lightmap_pars_fragment:y0e,lights_lambert_fragment:v0e,lights_lambert_pars_fragment:x0e,lights_pars_begin:b0e,lights_toon_fragment:w0e,lights_toon_pars_fragment:S0e,lights_phong_fragment:T0e,lights_phong_pars_fragment:E0e,lights_physical_fragment:M0e,lights_physical_pars_fragment:A0e,lights_fragment_begin:C0e,lights_fragment_maps:N0e,lights_fragment_end:P0e,logdepthbuf_fragment:R0e,logdepthbuf_pars_fragment:O0e,logdepthbuf_pars_vertex:k0e,logdepthbuf_vertex:I0e,map_fragment:D0e,map_pars_fragment:L0e,map_particle_fragment:F0e,map_particle_pars_fragment:B0e,metalnessmap_fragment:j0e,metalnessmap_pars_fragment:U0e,morphinstance_vertex:z0e,morphcolor_vertex:$0e,morphnormal_vertex:G0e,morphtarget_pars_vertex:V0e,morphtarget_vertex:H0e,normal_fragment_begin:W0e,normal_fragment_maps:q0e,normal_pars_fragment:X0e,normal_pars_vertex:K0e,normal_vertex:Y0e,normalmap_pars_fragment:Z0e,clearcoat_normal_fragment_begin:Q0e,clearcoat_normal_fragment_maps:J0e,clearcoat_pars_fragment:eve,iridescence_pars_fragment:tve,opaque_fragment:nve,packing:rve,premultiplied_alpha_fragment:ive,project_vertex:sve,dithering_fragment:ave,dithering_pars_fragment:ove,roughnessmap_fragment:lve,roughnessmap_pars_fragment:cve,shadowmap_pars_fragment:uve,shadowmap_pars_vertex:hve,shadowmap_vertex:dve,shadowmask_pars_fragment:fve,skinbase_vertex:pve,skinning_pars_vertex:mve,skinning_vertex:gve,skinnormal_vertex:yve,specularmap_fragment:vve,specularmap_pars_fragment:xve,tonemapping_fragment:bve,tonemapping_pars_fragment:_ve,transmission_fragment:wve,transmission_pars_fragment:Sve,uv_pars_fragment:Tve,uv_pars_vertex:Eve,uv_vertex:Mve,worldpos_vertex:Ave,background_vert:Cve,background_frag:Nve,backgroundCube_vert:Pve,backgroundCube_frag:Rve,cube_vert:Ove,cube_frag:kve,depth_vert:Ive,depth_frag:Dve,distanceRGBA_vert:Lve,distanceRGBA_frag:Fve,equirect_vert:Bve,equirect_frag:jve,linedashed_vert:Uve,linedashed_frag:zve,meshbasic_vert:$ve,meshbasic_frag:Gve,meshlambert_vert:Vve,meshlambert_frag:Hve,meshmatcap_vert:Wve,meshmatcap_frag:qve,meshnormal_vert:Xve,meshnormal_frag:Kve,meshphong_vert:Yve,meshphong_frag:Zve,meshphysical_vert:Qve,meshphysical_frag:Jve,meshtoon_vert:exe,meshtoon_frag:txe,points_vert:nxe,points_frag:rxe,shadow_vert:ixe,shadow_frag:sxe,sprite_vert:axe,sprite_frag:oxe},Ot={common:{diffuse:{value:new ln(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new zn},alphaMap:{value:null},alphaMapTransform:{value:new zn},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new zn}},envmap:{envMap:{value:null},envMapRotation:{value:new zn},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new zn}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new zn}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new zn},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new zn},normalScale:{value:new dt(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new zn},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new zn}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new zn}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new zn}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new ln(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new ln(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new zn},alphaTest:{value:0},uvTransform:{value:new zn}},sprite:{diffuse:{value:new ln(16777215)},opacity:{value:1},center:{value:new dt(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new zn},alphaMap:{value:null},alphaMapTransform:{value:new zn},alphaTest:{value:0}}},Mc={basic:{uniforms:wa([Ot.common,Ot.specularmap,Ot.envmap,Ot.aomap,Ot.lightmap,Ot.fog]),vertexShader:er.meshbasic_vert,fragmentShader:er.meshbasic_frag},lambert:{uniforms:wa([Ot.common,Ot.specularmap,Ot.envmap,Ot.aomap,Ot.lightmap,Ot.emissivemap,Ot.bumpmap,Ot.normalmap,Ot.displacementmap,Ot.fog,Ot.lights,{emissive:{value:new ln(0)}}]),vertexShader:er.meshlambert_vert,fragmentShader:er.meshlambert_frag},phong:{uniforms:wa([Ot.common,Ot.specularmap,Ot.envmap,Ot.aomap,Ot.lightmap,Ot.emissivemap,Ot.bumpmap,Ot.normalmap,Ot.displacementmap,Ot.fog,Ot.lights,{emissive:{value:new ln(0)},specular:{value:new ln(1118481)},shininess:{value:30}}]),vertexShader:er.meshphong_vert,fragmentShader:er.meshphong_frag},standard:{uniforms:wa([Ot.common,Ot.envmap,Ot.aomap,Ot.lightmap,Ot.emissivemap,Ot.bumpmap,Ot.normalmap,Ot.displacementmap,Ot.roughnessmap,Ot.metalnessmap,Ot.fog,Ot.lights,{emissive:{value:new ln(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:er.meshphysical_vert,fragmentShader:er.meshphysical_frag},toon:{uniforms:wa([Ot.common,Ot.aomap,Ot.lightmap,Ot.emissivemap,Ot.bumpmap,Ot.normalmap,Ot.displacementmap,Ot.gradientmap,Ot.fog,Ot.lights,{emissive:{value:new ln(0)}}]),vertexShader:er.meshtoon_vert,fragmentShader:er.meshtoon_frag},matcap:{uniforms:wa([Ot.common,Ot.bumpmap,Ot.normalmap,Ot.displacementmap,Ot.fog,{matcap:{value:null}}]),vertexShader:er.meshmatcap_vert,fragmentShader:er.meshmatcap_frag},points:{uniforms:wa([Ot.points,Ot.fog]),vertexShader:er.points_vert,fragmentShader:er.points_frag},dashed:{uniforms:wa([Ot.common,Ot.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:er.linedashed_vert,fragmentShader:er.linedashed_frag},depth:{uniforms:wa([Ot.common,Ot.displacementmap]),vertexShader:er.depth_vert,fragmentShader:er.depth_frag},normal:{uniforms:wa([Ot.common,Ot.bumpmap,Ot.normalmap,Ot.displacementmap,{opacity:{value:1}}]),vertexShader:er.meshnormal_vert,fragmentShader:er.meshnormal_frag},sprite:{uniforms:wa([Ot.sprite,Ot.fog]),vertexShader:er.sprite_vert,fragmentShader:er.sprite_frag},background:{uniforms:{uvTransform:{value:new zn},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:er.background_vert,fragmentShader:er.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new zn}},vertexShader:er.backgroundCube_vert,fragmentShader:er.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:er.cube_vert,fragmentShader:er.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:er.equirect_vert,fragmentShader:er.equirect_frag},distanceRGBA:{uniforms:wa([Ot.common,Ot.displacementmap,{referencePosition:{value:new pe},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:er.distanceRGBA_vert,fragmentShader:er.distanceRGBA_frag},shadow:{uniforms:wa([Ot.lights,Ot.fog,{color:{value:new ln(0)},opacity:{value:1}}]),vertexShader:er.shadow_vert,fragmentShader:er.shadow_frag}};Mc.physical={uniforms:wa([Mc.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new zn},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new zn},clearcoatNormalScale:{value:new dt(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new zn},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new zn},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new zn},sheen:{value:0},sheenColor:{value:new ln(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new zn},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new zn},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new zn},transmissionSamplerSize:{value:new dt},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new zn},attenuationDistance:{value:0},attenuationColor:{value:new ln(0)},specularColor:{value:new ln(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new zn},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new zn},anisotropyVector:{value:new dt},anisotropyMap:{value:null},anisotropyMapTransform:{value:new zn}}]),vertexShader:er.meshphysical_vert,fragmentShader:er.meshphysical_frag};const j1={r:0,b:0,g:0},kf=new yl,lxe=new br;function cxe(r,e,n,i,s,a,o){const l=new ln(0);let c=a===!0?0:1,u,h,d=null,f=0,p=null;function g(S){let T=S.isScene===!0?S.background:null;return T&&T.isTexture&&(T=(S.backgroundBlurriness>0?n:e).get(T)),T}function v(S){let T=!1;const M=g(S);M===null?_(l,c):M&&M.isColor&&(_(M,1),T=!0);const C=r.xr.getEnvironmentBlendMode();C==="additive"?i.buffers.color.setClear(0,0,0,1,o):C==="alpha-blend"&&i.buffers.color.setClear(0,0,0,0,o),(r.autoClear||T)&&(i.buffers.depth.setTest(!0),i.buffers.depth.setMask(!0),i.buffers.color.setMask(!0),r.clear(r.autoClearColor,r.autoClearDepth,r.autoClearStencil))}function x(S,T){const M=g(T);M&&(M.isCubeTexture||M.mapping===bp)?(h===void 0&&(h=new li(new Bc(1,1,1),new Wc({name:"BackgroundCubeMaterial",uniforms:gy(Mc.backgroundCube.uniforms),vertexShader:Mc.backgroundCube.vertexShader,fragmentShader:Mc.backgroundCube.fragmentShader,side:Wr,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),h.geometry.deleteAttribute("normal"),h.geometry.deleteAttribute("uv"),h.onBeforeRender=function(C,A,P){this.matrixWorld.copyPosition(P.matrixWorld)},Object.defineProperty(h.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),s.update(h)),kf.copy(T.backgroundRotation),kf.x*=-1,kf.y*=-1,kf.z*=-1,M.isCubeTexture&&M.isRenderTargetTexture===!1&&(kf.y*=-1,kf.z*=-1),h.material.uniforms.envMap.value=M,h.material.uniforms.flipEnvMap.value=M.isCubeTexture&&M.isRenderTargetTexture===!1?-1:1,h.material.uniforms.backgroundBlurriness.value=T.backgroundBlurriness,h.material.uniforms.backgroundIntensity.value=T.backgroundIntensity,h.material.uniforms.backgroundRotation.value.setFromMatrix4(lxe.makeRotationFromEuler(kf)),h.material.toneMapped=tr.getTransfer(M.colorSpace)!==Ir,(d!==M||f!==M.version||p!==r.toneMapping)&&(h.material.needsUpdate=!0,d=M,f=M.version,p=r.toneMapping),h.layers.enableAll(),S.unshift(h,h.geometry,h.material,0,0,null)):M&&M.isTexture&&(u===void 0&&(u=new li(new S_(2,2),new Wc({name:"BackgroundMaterial",uniforms:gy(Mc.background.uniforms),vertexShader:Mc.background.vertexShader,fragmentShader:Mc.background.fragmentShader,side:Ja,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),u.geometry.deleteAttribute("normal"),Object.defineProperty(u.material,"map",{get:function(){return this.uniforms.t2D.value}}),s.update(u)),u.material.uniforms.t2D.value=M,u.material.uniforms.backgroundIntensity.value=T.backgroundIntensity,u.material.toneMapped=tr.getTransfer(M.colorSpace)!==Ir,M.matrixAutoUpdate===!0&&M.updateMatrix(),u.material.uniforms.uvTransform.value.copy(M.matrix),(d!==M||f!==M.version||p!==r.toneMapping)&&(u.material.needsUpdate=!0,d=M,f=M.version,p=r.toneMapping),u.layers.enableAll(),S.unshift(u,u.geometry,u.material,0,0,null))}function _(S,T){S.getRGB(j1,uee(r)),i.buffers.color.setClear(j1.r,j1.g,j1.b,T,o)}function E(){h!==void 0&&(h.geometry.dispose(),h.material.dispose(),h=void 0),u!==void 0&&(u.geometry.dispose(),u.material.dispose(),u=void 0)}return{getClearColor:function(){return l},setClearColor:function(S,T=1){l.set(S),c=T,_(l,c)},getClearAlpha:function(){return c},setClearAlpha:function(S){c=S,_(l,c)},render:v,addToRenderList:x,dispose:E}}function uxe(r,e){const n=r.getParameter(r.MAX_VERTEX_ATTRIBS),i={},s=f(null);let a=s,o=!1;function l(O,D,F,U,B){let W=!1;const j=d(U,F,D);a!==j&&(a=j,u(a.object)),W=p(O,U,F,B),W&&g(O,U,F,B),B!==null&&e.update(B,r.ELEMENT_ARRAY_BUFFER),(W||o)&&(o=!1,T(O,D,F,U),B!==null&&r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,e.get(B).buffer))}function c(){return r.createVertexArray()}function u(O){return r.bindVertexArray(O)}function h(O){return r.deleteVertexArray(O)}function d(O,D,F){const U=F.wireframe===!0;let B=i[O.id];B===void 0&&(B={},i[O.id]=B);let W=B[D.id];W===void 0&&(W={},B[D.id]=W);let j=W[U];return j===void 0&&(j=f(c()),W[U]=j),j}function f(O){const D=[],F=[],U=[];for(let B=0;B<n;B++)D[B]=0,F[B]=0,U[B]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:D,enabledAttributes:F,attributeDivisors:U,object:O,attributes:{},index:null}}function p(O,D,F,U){const B=a.attributes,W=D.attributes;let j=0;const $=F.getAttributes();for(const z in $)if($[z].location>=0){const se=B[z];let q=W[z];if(q===void 0&&(z==="instanceMatrix"&&O.instanceMatrix&&(q=O.instanceMatrix),z==="instanceColor"&&O.instanceColor&&(q=O.instanceColor)),se===void 0||se.attribute!==q||q&&se.data!==q.data)return!0;j++}return a.attributesNum!==j||a.index!==U}function g(O,D,F,U){const B={},W=D.attributes;let j=0;const $=F.getAttributes();for(const z in $)if($[z].location>=0){let se=W[z];se===void 0&&(z==="instanceMatrix"&&O.instanceMatrix&&(se=O.instanceMatrix),z==="instanceColor"&&O.instanceColor&&(se=O.instanceColor));const q={};q.attribute=se,se&&se.data&&(q.data=se.data),B[z]=q,j++}a.attributes=B,a.attributesNum=j,a.index=U}function v(){const O=a.newAttributes;for(let D=0,F=O.length;D<F;D++)O[D]=0}function x(O){_(O,0)}function _(O,D){const F=a.newAttributes,U=a.enabledAttributes,B=a.attributeDivisors;F[O]=1,U[O]===0&&(r.enableVertexAttribArray(O),U[O]=1),B[O]!==D&&(r.vertexAttribDivisor(O,D),B[O]=D)}function E(){const O=a.newAttributes,D=a.enabledAttributes;for(let F=0,U=D.length;F<U;F++)D[F]!==O[F]&&(r.disableVertexAttribArray(F),D[F]=0)}function S(O,D,F,U,B,W,j){j===!0?r.vertexAttribIPointer(O,D,F,B,W):r.vertexAttribPointer(O,D,F,U,B,W)}function T(O,D,F,U){v();const B=U.attributes,W=F.getAttributes(),j=D.defaultAttributeValues;for(const $ in W){const z=W[$];if(z.location>=0){let Z=B[$];if(Z===void 0&&($==="instanceMatrix"&&O.instanceMatrix&&(Z=O.instanceMatrix),$==="instanceColor"&&O.instanceColor&&(Z=O.instanceColor)),Z!==void 0){const se=Z.normalized,q=Z.itemSize,ue=e.get(Z);if(ue===void 0)continue;const be=ue.buffer,ee=ue.type,le=ue.bytesPerElement,oe=ee===r.INT||ee===r.UNSIGNED_INT||Z.gpuType===Cs;if(Z.isInterleavedBufferAttribute){const fe=Z.data,Se=fe.stride,we=Z.offset;if(fe.isInstancedInterleavedBuffer){for(let Le=0;Le<z.locationSize;Le++)_(z.location+Le,fe.meshPerAttribute);O.isInstancedMesh!==!0&&U._maxInstanceCount===void 0&&(U._maxInstanceCount=fe.meshPerAttribute*fe.count)}else for(let Le=0;Le<z.locationSize;Le++)x(z.location+Le);r.bindBuffer(r.ARRAY_BUFFER,be);for(let Le=0;Le<z.locationSize;Le++)S(z.location+Le,q/z.locationSize,ee,se,Se*le,(we+q/z.locationSize*Le)*le,oe)}else{if(Z.isInstancedBufferAttribute){for(let fe=0;fe<z.locationSize;fe++)_(z.location+fe,Z.meshPerAttribute);O.isInstancedMesh!==!0&&U._maxInstanceCount===void 0&&(U._maxInstanceCount=Z.meshPerAttribute*Z.count)}else for(let fe=0;fe<z.locationSize;fe++)x(z.location+fe);r.bindBuffer(r.ARRAY_BUFFER,be);for(let fe=0;fe<z.locationSize;fe++)S(z.location+fe,q/z.locationSize,ee,se,q*le,q/z.locationSize*fe*le,oe)}}else if(j!==void 0){const se=j[$];if(se!==void 0)switch(se.length){case 2:r.vertexAttrib2fv(z.location,se);break;case 3:r.vertexAttrib3fv(z.location,se);break;case 4:r.vertexAttrib4fv(z.location,se);break;default:r.vertexAttrib1fv(z.location,se)}}}}E()}function M(){P();for(const O in i){const D=i[O];for(const F in D){const U=D[F];for(const B in U)h(U[B].object),delete U[B];delete D[F]}delete i[O]}}function C(O){if(i[O.id]===void 0)return;const D=i[O.id];for(const F in D){const U=D[F];for(const B in U)h(U[B].object),delete U[B];delete D[F]}delete i[O.id]}function A(O){for(const D in i){const F=i[D];if(F[O.id]===void 0)continue;const U=F[O.id];for(const B in U)h(U[B].object),delete U[B];delete F[O.id]}}function P(){R(),o=!0,a!==s&&(a=s,u(a.object))}function R(){s.geometry=null,s.program=null,s.wireframe=!1}return{setup:l,reset:P,resetDefaultState:R,dispose:M,releaseStatesOfGeometry:C,releaseStatesOfProgram:A,initAttributes:v,enableAttribute:x,disableUnusedAttributes:E}}function hxe(r,e,n){let i;function s(u){i=u}function a(u,h){r.drawArrays(i,u,h),n.update(h,i,1)}function o(u,h,d){d!==0&&(r.drawArraysInstanced(i,u,h,d),n.update(h,i,d))}function l(u,h,d){if(d===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(i,u,0,h,0,d);let p=0;for(let g=0;g<d;g++)p+=h[g];n.update(p,i,1)}function c(u,h,d,f){if(d===0)return;const p=e.get("WEBGL_multi_draw");if(p===null)for(let g=0;g<u.length;g++)o(u[g],h[g],f[g]);else{p.multiDrawArraysInstancedWEBGL(i,u,0,h,0,f,0,d);let g=0;for(let v=0;v<d;v++)g+=h[v]*f[v];n.update(g,i,1)}}this.setMode=s,this.render=a,this.renderInstances=o,this.renderMultiDraw=l,this.renderMultiDrawInstances=c}function dxe(r,e,n,i){let s;function a(){if(s!==void 0)return s;if(e.has("EXT_texture_filter_anisotropic")===!0){const A=e.get("EXT_texture_filter_anisotropic");s=r.getParameter(A.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else s=0;return s}function o(A){return!(A!==Oi&&i.convert(A)!==r.getParameter(r.IMPLEMENTATION_COLOR_READ_FORMAT))}function l(A){const P=A===da&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(A!==Ri&&i.convert(A)!==r.getParameter(r.IMPLEMENTATION_COLOR_READ_TYPE)&&A!==zi&&!P)}function c(A){if(A==="highp"){if(r.getShaderPrecisionFormat(r.VERTEX_SHADER,r.HIGH_FLOAT).precision>0&&r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT).precision>0)return"highp";A="mediump"}return A==="mediump"&&r.getShaderPrecisionFormat(r.VERTEX_SHADER,r.MEDIUM_FLOAT).precision>0&&r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let u=n.precision!==void 0?n.precision:"highp";const h=c(u);h!==u&&(console.warn("THREE.WebGLRenderer:",u,"not supported, using",h,"instead."),u=h);const d=n.logarithmicDepthBuffer===!0,f=n.reverseDepthBuffer===!0&&e.has("EXT_clip_control"),p=r.getParameter(r.MAX_TEXTURE_IMAGE_UNITS),g=r.getParameter(r.MAX_VERTEX_TEXTURE_IMAGE_UNITS),v=r.getParameter(r.MAX_TEXTURE_SIZE),x=r.getParameter(r.MAX_CUBE_MAP_TEXTURE_SIZE),_=r.getParameter(r.MAX_VERTEX_ATTRIBS),E=r.getParameter(r.MAX_VERTEX_UNIFORM_VECTORS),S=r.getParameter(r.MAX_VARYING_VECTORS),T=r.getParameter(r.MAX_FRAGMENT_UNIFORM_VECTORS),M=g>0,C=r.getParameter(r.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:a,getMaxPrecision:c,textureFormatReadable:o,textureTypeReadable:l,precision:u,logarithmicDepthBuffer:d,reverseDepthBuffer:f,maxTextures:p,maxVertexTextures:g,maxTextureSize:v,maxCubemapSize:x,maxAttributes:_,maxVertexUniforms:E,maxVaryings:S,maxFragmentUniforms:T,vertexTextures:M,maxSamples:C}}function fxe(r){const e=this;let n=null,i=0,s=!1,a=!1;const o=new nl,l=new zn,c={value:null,needsUpdate:!1};this.uniform=c,this.numPlanes=0,this.numIntersection=0,this.init=function(d,f){const p=d.length!==0||f||i!==0||s;return s=f,i=d.length,p},this.beginShadows=function(){a=!0,h(null)},this.endShadows=function(){a=!1},this.setGlobalState=function(d,f){n=h(d,f,0)},this.setState=function(d,f,p){const g=d.clippingPlanes,v=d.clipIntersection,x=d.clipShadows,_=r.get(d);if(!s||g===null||g.length===0||a&&!x)a?h(null):u();else{const E=a?0:i,S=E*4;let T=_.clippingState||null;c.value=T,T=h(g,f,S,p);for(let M=0;M!==S;++M)T[M]=n[M];_.clippingState=T,this.numIntersection=v?this.numPlanes:0,this.numPlanes+=E}};function u(){c.value!==n&&(c.value=n,c.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function h(d,f,p,g){const v=d!==null?d.length:0;let x=null;if(v!==0){if(x=c.value,g!==!0||x===null){const _=p+v*4,E=f.matrixWorldInverse;l.getNormalMatrix(E),(x===null||x.length<_)&&(x=new Float32Array(_));for(let S=0,T=p;S!==v;++S,T+=4)o.copy(d[S]).applyMatrix4(E,l),o.normal.toArray(x,T),x[T+3]=o.constant}c.value=x,c.needsUpdate=!0}return e.numPlanes=v,e.numIntersection=0,x}}function pxe(r){let e=new WeakMap;function n(o,l){return l===Ld?o.mapping=ml:l===Fd&&(o.mapping=gl),o}function i(o){if(o&&o.isTexture){const l=o.mapping;if(l===Ld||l===Fd)if(e.has(o)){const c=e.get(o).texture;return n(c,o.mapping)}else{const c=o.image;if(c&&c.height>0){const u=new fee(c.height);return u.fromEquirectangularTexture(r,o),e.set(o,u),o.addEventListener("dispose",s),n(u.texture,o.mapping)}else return null}}return o}function s(o){const l=o.target;l.removeEventListener("dispose",s);const c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function a(){e=new WeakMap}return{get:i,dispose:a}}const Eg=4,kG=[.125,.215,.35,.446,.526,.582],Zf=20,qN=new T_,IG=new ln;let XN=null,KN=0,YN=0,ZN=!1;const Vf=(1+Math.sqrt(5))/2,Hm=1/Vf,DG=[new pe(-Vf,Hm,0),new pe(Vf,Hm,0),new pe(-Hm,0,Vf),new pe(Hm,0,Vf),new pe(0,Vf,-Hm),new pe(0,Vf,Hm),new pe(-1,1,-1),new pe(1,1,-1),new pe(-1,1,1),new pe(1,1,1)],mxe=new pe;let LG=class{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,n=0,i=.1,s=100,a={}){const{size:o=256,position:l=mxe}=a;XN=this._renderer.getRenderTarget(),KN=this._renderer.getActiveCubeFace(),YN=this._renderer.getActiveMipmapLevel(),ZN=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(o);const c=this._allocateTargets();return c.depthBuffer=!0,this._sceneToCubeUV(e,i,s,c,l),n>0&&this._blur(c,0,0,n),this._applyPMREM(c),this._cleanup(c),c}fromEquirectangular(e,n=null){return this._fromTexture(e,n)}fromCubemap(e,n=null){return this._fromTexture(e,n)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=jG(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=BG(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(XN,KN,YN),this._renderer.xr.enabled=ZN,e.scissorTest=!1,U1(e,0,0,e.width,e.height)}_fromTexture(e,n){e.mapping===ml||e.mapping===gl?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),XN=this._renderer.getRenderTarget(),KN=this._renderer.getActiveCubeFace(),YN=this._renderer.getActiveMipmapLevel(),ZN=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const i=n||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),n=4*this._cubeSize,i={magFilter:ds,minFilter:ds,generateMipmaps:!1,type:da,format:Oi,colorSpace:Fc,depthBuffer:!1},s=FG(e,n,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==n){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=FG(e,n,i);const{_lodMax:a}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=gxe(a)),this._blurMaterial=yxe(a,e,n)}return s}_compileMaterial(e){const n=new li(this._lodPlanes[0],e);this._renderer.compile(n,qN)}_sceneToCubeUV(e,n,i,s,a){const c=new Ns(90,1,n,i),u=[1,-1,1,1,1,1],h=[1,1,1,-1,-1,-1],d=this._renderer,f=d.autoClear,p=d.toneMapping;d.getClearColor(IG),d.toneMapping=to,d.autoClear=!1;const g=new Aa({name:"PMREM.Background",side:Wr,depthWrite:!1,depthTest:!1}),v=new li(new Bc,g);let x=!1;const _=e.background;_?_.isColor&&(g.color.copy(_),e.background=null,x=!0):(g.color.copy(IG),x=!0);for(let E=0;E<6;E++){const S=E%3;S===0?(c.up.set(0,u[E],0),c.position.set(a.x,a.y,a.z),c.lookAt(a.x+h[E],a.y,a.z)):S===1?(c.up.set(0,0,u[E]),c.position.set(a.x,a.y,a.z),c.lookAt(a.x,a.y+h[E],a.z)):(c.up.set(0,u[E],0),c.position.set(a.x,a.y,a.z),c.lookAt(a.x,a.y,a.z+h[E]));const T=this._cubeSize;U1(s,S*T,E>2?T:0,T,T),d.setRenderTarget(s),x&&d.render(v,c),d.render(e,c)}v.geometry.dispose(),v.material.dispose(),d.toneMapping=p,d.autoClear=f,e.background=_}_textureToCubeUV(e,n){const i=this._renderer,s=e.mapping===ml||e.mapping===gl;s?(this._cubemapMaterial===null&&(this._cubemapMaterial=jG()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=BG());const a=s?this._cubemapMaterial:this._equirectMaterial,o=new li(this._lodPlanes[0],a),l=a.uniforms;l.envMap.value=e;const c=this._cubeSize;U1(n,0,0,3*c,2*c),i.setRenderTarget(n),i.render(o,qN)}_applyPMREM(e){const n=this._renderer,i=n.autoClear;n.autoClear=!1;const s=this._lodPlanes.length;for(let a=1;a<s;a++){const o=Math.sqrt(this._sigmas[a]*this._sigmas[a]-this._sigmas[a-1]*this._sigmas[a-1]),l=DG[(s-a-1)%DG.length];this._blur(e,a-1,a,o,l)}n.autoClear=i}_blur(e,n,i,s,a){const o=this._pingPongRenderTarget;this._halfBlur(e,o,n,i,s,"latitudinal",a),this._halfBlur(o,e,i,i,s,"longitudinal",a)}_halfBlur(e,n,i,s,a,o,l){const c=this._renderer,u=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const h=3,d=new li(this._lodPlanes[s],u),f=u.uniforms,p=this._sizeLods[i]-1,g=isFinite(a)?Math.PI/(2*p):2*Math.PI/(2*Zf-1),v=a/g,x=isFinite(a)?1+Math.floor(h*v):Zf;x>Zf&&console.warn(`sigmaRadians, ${a}, is too large and will clip, as it requested ${x} samples when the maximum is set to ${Zf}`);const _=[];let E=0;for(let A=0;A<Zf;++A){const P=A/v,R=Math.exp(-P*P/2);_.push(R),A===0?E+=R:A<x&&(E+=2*R)}for(let A=0;A<_.length;A++)_[A]=_[A]/E;f.envMap.value=e.texture,f.samples.value=x,f.weights.value=_,f.latitudinal.value=o==="latitudinal",l&&(f.poleAxis.value=l);const{_lodMax:S}=this;f.dTheta.value=g,f.mipInt.value=S-i;const T=this._sizeLods[s],M=3*T*(s>S-Eg?s-S+Eg:0),C=4*(this._cubeSize-T);U1(n,M,C,3*T,2*T),c.setRenderTarget(n),c.render(d,qN)}};function gxe(r){const e=[],n=[],i=[];let s=r;const a=r-Eg+1+kG.length;for(let o=0;o<a;o++){const l=Math.pow(2,s);n.push(l);let c=1/l;o>r-Eg?c=kG[o-r+Eg-1]:o===0&&(c=0),i.push(c);const u=1/(l-2),h=-u,d=1+u,f=[h,h,d,h,d,d,h,h,d,d,h,d],p=6,g=6,v=3,x=2,_=1,E=new Float32Array(v*g*p),S=new Float32Array(x*g*p),T=new Float32Array(_*g*p);for(let C=0;C<p;C++){const A=C%3*2/3-1,P=C>2?0:-1,R=[A,P,0,A+2/3,P,0,A+2/3,P+1,0,A,P,0,A+2/3,P+1,0,A,P+1,0];E.set(R,v*g*C),S.set(f,x*g*C);const O=[C,C,C,C,C,C];T.set(O,_*g*C)}const M=new Ws;M.setAttribute("position",new ps(E,v)),M.setAttribute("uv",new ps(S,x)),M.setAttribute("faceIndex",new ps(T,_)),e.push(M),s>Eg&&s--}return{lodPlanes:e,sizeLods:n,sigmas:i}}function FG(r,e,n){const i=new jd(r,e,n);return i.texture.mapping=bp,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function U1(r,e,n,i,s){r.viewport.set(e,n,i,s),r.scissor.set(e,n,i,s)}function yxe(r,e,n){const i=new Float32Array(Zf),s=new pe(0,1,0);return new Wc({name:"SphericalGaussianBlur",defines:{n:Zf,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${r}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:s}},vertexShader:Vj(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:eo,depthTest:!1,depthWrite:!1})}function BG(){return new Wc({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:Vj(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:eo,depthTest:!1,depthWrite:!1})}function jG(){return new Wc({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:Vj(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:eo,depthTest:!1,depthWrite:!1})}function Vj(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function vxe(r){let e=new WeakMap,n=null;function i(l){if(l&&l.isTexture){const c=l.mapping,u=c===Ld||c===Fd,h=c===ml||c===gl;if(u||h){let d=e.get(l);const f=d!==void 0?d.texture.pmremVersion:0;if(l.isRenderTargetTexture&&l.pmremVersion!==f)return n===null&&(n=new LG(r)),d=u?n.fromEquirectangular(l,d):n.fromCubemap(l,d),d.texture.pmremVersion=l.pmremVersion,e.set(l,d),d.texture;if(d!==void 0)return d.texture;{const p=l.image;return u&&p&&p.height>0||h&&p&&s(p)?(n===null&&(n=new LG(r)),d=u?n.fromEquirectangular(l):n.fromCubemap(l),d.texture.pmremVersion=l.pmremVersion,e.set(l,d),l.addEventListener("dispose",a),d.texture):null}}}return l}function s(l){let c=0;const u=6;for(let h=0;h<u;h++)l[h]!==void 0&&c++;return c===u}function a(l){const c=l.target;c.removeEventListener("dispose",a);const u=e.get(c);u!==void 0&&(e.delete(c),u.dispose())}function o(){e=new WeakMap,n!==null&&(n.dispose(),n=null)}return{get:i,dispose:o}}function xxe(r){const e={};function n(i){if(e[i]!==void 0)return e[i];let s;switch(i){case"WEBGL_depth_texture":s=r.getExtension("WEBGL_depth_texture")||r.getExtension("MOZ_WEBGL_depth_texture")||r.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":s=r.getExtension("EXT_texture_filter_anisotropic")||r.getExtension("MOZ_EXT_texture_filter_anisotropic")||r.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":s=r.getExtension("WEBGL_compressed_texture_s3tc")||r.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||r.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":s=r.getExtension("WEBGL_compressed_texture_pvrtc")||r.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:s=r.getExtension(i)}return e[i]=s,s}return{has:function(i){return n(i)!==null},init:function(){n("EXT_color_buffer_float"),n("WEBGL_clip_cull_distance"),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture"),n("WEBGL_render_shared_exponent")},get:function(i){const s=n(i);return s===null&&ic("THREE.WebGLRenderer: "+i+" extension not supported."),s}}}function bxe(r,e,n,i){const s={},a=new WeakMap;function o(d){const f=d.target;f.index!==null&&e.remove(f.index);for(const g in f.attributes)e.remove(f.attributes[g]);f.removeEventListener("dispose",o),delete s[f.id];const p=a.get(f);p&&(e.remove(p),a.delete(f)),i.releaseStatesOfGeometry(f),f.isInstancedBufferGeometry===!0&&delete f._maxInstanceCount,n.memory.geometries--}function l(d,f){return s[f.id]===!0||(f.addEventListener("dispose",o),s[f.id]=!0,n.memory.geometries++),f}function c(d){const f=d.attributes;for(const p in f)e.update(f[p],r.ARRAY_BUFFER)}function u(d){const f=[],p=d.index,g=d.attributes.position;let v=0;if(p!==null){const E=p.array;v=p.version;for(let S=0,T=E.length;S<T;S+=3){const M=E[S+0],C=E[S+1],A=E[S+2];f.push(M,C,C,A,A,M)}}else if(g!==void 0){const E=g.array;v=g.version;for(let S=0,T=E.length/3-1;S<T;S+=3){const M=S+0,C=S+1,A=S+2;f.push(M,C,C,A,A,M)}}else return;const x=new(Nj(f)?Ij:kj)(f,1);x.version=v;const _=a.get(d);_&&e.remove(_),a.set(d,x)}function h(d){const f=a.get(d);if(f){const p=d.index;p!==null&&f.version<p.version&&u(d)}else u(d);return a.get(d)}return{get:l,update:c,getWireframeAttribute:h}}function _xe(r,e,n){let i;function s(f){i=f}let a,o;function l(f){a=f.type,o=f.bytesPerElement}function c(f,p){r.drawElements(i,p,a,f*o),n.update(p,i,1)}function u(f,p,g){g!==0&&(r.drawElementsInstanced(i,p,a,f*o,g),n.update(p,i,g))}function h(f,p,g){if(g===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(i,p,0,a,f,0,g);let x=0;for(let _=0;_<g;_++)x+=p[_];n.update(x,i,1)}function d(f,p,g,v){if(g===0)return;const x=e.get("WEBGL_multi_draw");if(x===null)for(let _=0;_<f.length;_++)u(f[_]/o,p[_],v[_]);else{x.multiDrawElementsInstancedWEBGL(i,p,0,a,f,0,v,0,g);let _=0;for(let E=0;E<g;E++)_+=p[E]*v[E];n.update(_,i,1)}}this.setMode=s,this.setIndex=l,this.render=c,this.renderInstances=u,this.renderMultiDraw=h,this.renderMultiDrawInstances=d}function wxe(r){const e={geometries:0,textures:0},n={frame:0,calls:0,triangles:0,points:0,lines:0};function i(a,o,l){switch(n.calls++,o){case r.TRIANGLES:n.triangles+=l*(a/3);break;case r.LINES:n.lines+=l*(a/2);break;case r.LINE_STRIP:n.lines+=l*(a-1);break;case r.LINE_LOOP:n.lines+=l*a;break;case r.POINTS:n.points+=l*a;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function s(){n.calls=0,n.triangles=0,n.points=0,n.lines=0}return{memory:e,render:n,programs:null,autoReset:!0,reset:s,update:i}}function Sxe(r,e,n){const i=new WeakMap,s=new In;function a(o,l,c){const u=o.morphTargetInfluences,h=l.morphAttributes.position||l.morphAttributes.normal||l.morphAttributes.color,d=h!==void 0?h.length:0;let f=i.get(l);if(f===void 0||f.count!==d){let O=function(){P.dispose(),i.delete(l),l.removeEventListener("dispose",O)};var p=O;f!==void 0&&f.texture.dispose();const g=l.morphAttributes.position!==void 0,v=l.morphAttributes.normal!==void 0,x=l.morphAttributes.color!==void 0,_=l.morphAttributes.position||[],E=l.morphAttributes.normal||[],S=l.morphAttributes.color||[];let T=0;g===!0&&(T=1),v===!0&&(T=2),x===!0&&(T=3);let M=l.attributes.position.count*T,C=1;M>e.maxTextureSize&&(C=Math.ceil(M/e.maxTextureSize),M=e.maxTextureSize);const A=new Float32Array(M*C*4*d),P=new Rj(A,M,C,d);P.type=zi,P.needsUpdate=!0;const R=T*4;for(let D=0;D<d;D++){const F=_[D],U=E[D],B=S[D],W=M*C*4*D;for(let j=0;j<F.count;j++){const $=j*R;g===!0&&(s.fromBufferAttribute(F,j),A[W+$+0]=s.x,A[W+$+1]=s.y,A[W+$+2]=s.z,A[W+$+3]=0),v===!0&&(s.fromBufferAttribute(U,j),A[W+$+4]=s.x,A[W+$+5]=s.y,A[W+$+6]=s.z,A[W+$+7]=0),x===!0&&(s.fromBufferAttribute(B,j),A[W+$+8]=s.x,A[W+$+9]=s.y,A[W+$+10]=s.z,A[W+$+11]=B.itemSize===4?s.w:1)}}f={count:d,texture:P,size:new dt(M,C)},i.set(l,f),l.addEventListener("dispose",O)}if(o.isInstancedMesh===!0&&o.morphTexture!==null)c.getUniforms().setValue(r,"morphTexture",o.morphTexture,n);else{let g=0;for(let x=0;x<u.length;x++)g+=u[x];const v=l.morphTargetsRelative?1:1-g;c.getUniforms().setValue(r,"morphTargetBaseInfluence",v),c.getUniforms().setValue(r,"morphTargetInfluences",u)}c.getUniforms().setValue(r,"morphTargetsTexture",f.texture,n),c.getUniforms().setValue(r,"morphTargetsTextureSize",f.size)}return{update:a}}function Txe(r,e,n,i){let s=new WeakMap;function a(c){const u=i.render.frame,h=c.geometry,d=e.get(c,h);if(s.get(d)!==u&&(e.update(d),s.set(d,u)),c.isInstancedMesh&&(c.hasEventListener("dispose",l)===!1&&c.addEventListener("dispose",l),s.get(c)!==u&&(n.update(c.instanceMatrix,r.ARRAY_BUFFER),c.instanceColor!==null&&n.update(c.instanceColor,r.ARRAY_BUFFER),s.set(c,u))),c.isSkinnedMesh){const f=c.skeleton;s.get(f)!==u&&(f.update(),s.set(f,u))}return d}function o(){s=new WeakMap}function l(c){const u=c.target;u.removeEventListener("dispose",l),n.remove(u.instanceMatrix),u.instanceColor!==null&&n.remove(u.instanceColor)}return{update:a,dispose:o}}const Tee=new Oa,UG=new dl(1,1),Eee=new Rj,Mee=new yge,Aee=new MM,zG=[],$G=[],GG=new Float32Array(16),VG=new Float32Array(9),HG=new Float32Array(4);function a0(r,e,n){const i=r[0];if(i<=0||i>0)return r;const s=e*n;let a=zG[s];if(a===void 0&&(a=new Float32Array(s),zG[s]=a),e!==0){i.toArray(a,0);for(let o=1,l=0;o!==e;++o)l+=n,r[o].toArray(a,l)}return a}function ys(r,e){if(r.length!==e.length)return!1;for(let n=0,i=r.length;n<i;n++)if(r[n]!==e[n])return!1;return!0}function vs(r,e){for(let n=0,i=e.length;n<i;n++)r[n]=e[n]}function PM(r,e){let n=$G[e];n===void 0&&(n=new Int32Array(e),$G[e]=n);for(let i=0;i!==e;++i)n[i]=r.allocateTextureUnit();return n}function Exe(r,e){const n=this.cache;n[0]!==e&&(r.uniform1f(this.addr,e),n[0]=e)}function Mxe(r,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(r.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(ys(n,e))return;r.uniform2fv(this.addr,e),vs(n,e)}}function Axe(r,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(r.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(e.r!==void 0)(n[0]!==e.r||n[1]!==e.g||n[2]!==e.b)&&(r.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(ys(n,e))return;r.uniform3fv(this.addr,e),vs(n,e)}}function Cxe(r,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(r.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(ys(n,e))return;r.uniform4fv(this.addr,e),vs(n,e)}}function Nxe(r,e){const n=this.cache,i=e.elements;if(i===void 0){if(ys(n,e))return;r.uniformMatrix2fv(this.addr,!1,e),vs(n,e)}else{if(ys(n,i))return;HG.set(i),r.uniformMatrix2fv(this.addr,!1,HG),vs(n,i)}}function Pxe(r,e){const n=this.cache,i=e.elements;if(i===void 0){if(ys(n,e))return;r.uniformMatrix3fv(this.addr,!1,e),vs(n,e)}else{if(ys(n,i))return;VG.set(i),r.uniformMatrix3fv(this.addr,!1,VG),vs(n,i)}}function Rxe(r,e){const n=this.cache,i=e.elements;if(i===void 0){if(ys(n,e))return;r.uniformMatrix4fv(this.addr,!1,e),vs(n,e)}else{if(ys(n,i))return;GG.set(i),r.uniformMatrix4fv(this.addr,!1,GG),vs(n,i)}}function Oxe(r,e){const n=this.cache;n[0]!==e&&(r.uniform1i(this.addr,e),n[0]=e)}function kxe(r,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(r.uniform2i(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(ys(n,e))return;r.uniform2iv(this.addr,e),vs(n,e)}}function Ixe(r,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(r.uniform3i(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(ys(n,e))return;r.uniform3iv(this.addr,e),vs(n,e)}}function Dxe(r,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(r.uniform4i(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(ys(n,e))return;r.uniform4iv(this.addr,e),vs(n,e)}}function Lxe(r,e){const n=this.cache;n[0]!==e&&(r.uniform1ui(this.addr,e),n[0]=e)}function Fxe(r,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(r.uniform2ui(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(ys(n,e))return;r.uniform2uiv(this.addr,e),vs(n,e)}}function Bxe(r,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(r.uniform3ui(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(ys(n,e))return;r.uniform3uiv(this.addr,e),vs(n,e)}}function jxe(r,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(r.uniform4ui(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(ys(n,e))return;r.uniform4uiv(this.addr,e),vs(n,e)}}function Uxe(r,e,n){const i=this.cache,s=n.allocateTextureUnit();i[0]!==s&&(r.uniform1i(this.addr,s),i[0]=s);let a;this.type===r.SAMPLER_2D_SHADOW?(UG.compareFunction=TM,a=UG):a=Tee,n.setTexture2D(e||a,s)}function zxe(r,e,n){const i=this.cache,s=n.allocateTextureUnit();i[0]!==s&&(r.uniform1i(this.addr,s),i[0]=s),n.setTexture3D(e||Mee,s)}function $xe(r,e,n){const i=this.cache,s=n.allocateTextureUnit();i[0]!==s&&(r.uniform1i(this.addr,s),i[0]=s),n.setTextureCube(e||Aee,s)}function Gxe(r,e,n){const i=this.cache,s=n.allocateTextureUnit();i[0]!==s&&(r.uniform1i(this.addr,s),i[0]=s),n.setTexture2DArray(e||Eee,s)}function Vxe(r){switch(r){case 5126:return Exe;case 35664:return Mxe;case 35665:return Axe;case 35666:return Cxe;case 35674:return Nxe;case 35675:return Pxe;case 35676:return Rxe;case 5124:case 35670:return Oxe;case 35667:case 35671:return kxe;case 35668:case 35672:return Ixe;case 35669:case 35673:return Dxe;case 5125:return Lxe;case 36294:return Fxe;case 36295:return Bxe;case 36296:return jxe;case 35678:case 36198:case 36298:case 36306:case 35682:return Uxe;case 35679:case 36299:case 36307:return zxe;case 35680:case 36300:case 36308:case 36293:return $xe;case 36289:case 36303:case 36311:case 36292:return Gxe}}function Hxe(r,e){r.uniform1fv(this.addr,e)}function Wxe(r,e){const n=a0(e,this.size,2);r.uniform2fv(this.addr,n)}function qxe(r,e){const n=a0(e,this.size,3);r.uniform3fv(this.addr,n)}function Xxe(r,e){const n=a0(e,this.size,4);r.uniform4fv(this.addr,n)}function Kxe(r,e){const n=a0(e,this.size,4);r.uniformMatrix2fv(this.addr,!1,n)}function Yxe(r,e){const n=a0(e,this.size,9);r.uniformMatrix3fv(this.addr,!1,n)}function Zxe(r,e){const n=a0(e,this.size,16);r.uniformMatrix4fv(this.addr,!1,n)}function Qxe(r,e){r.uniform1iv(this.addr,e)}function Jxe(r,e){r.uniform2iv(this.addr,e)}function ebe(r,e){r.uniform3iv(this.addr,e)}function tbe(r,e){r.uniform4iv(this.addr,e)}function nbe(r,e){r.uniform1uiv(this.addr,e)}function rbe(r,e){r.uniform2uiv(this.addr,e)}function ibe(r,e){r.uniform3uiv(this.addr,e)}function sbe(r,e){r.uniform4uiv(this.addr,e)}function abe(r,e,n){const i=this.cache,s=e.length,a=PM(n,s);ys(i,a)||(r.uniform1iv(this.addr,a),vs(i,a));for(let o=0;o!==s;++o)n.setTexture2D(e[o]||Tee,a[o])}function obe(r,e,n){const i=this.cache,s=e.length,a=PM(n,s);ys(i,a)||(r.uniform1iv(this.addr,a),vs(i,a));for(let o=0;o!==s;++o)n.setTexture3D(e[o]||Mee,a[o])}function lbe(r,e,n){const i=this.cache,s=e.length,a=PM(n,s);ys(i,a)||(r.uniform1iv(this.addr,a),vs(i,a));for(let o=0;o!==s;++o)n.setTextureCube(e[o]||Aee,a[o])}function cbe(r,e,n){const i=this.cache,s=e.length,a=PM(n,s);ys(i,a)||(r.uniform1iv(this.addr,a),vs(i,a));for(let o=0;o!==s;++o)n.setTexture2DArray(e[o]||Eee,a[o])}function ube(r){switch(r){case 5126:return Hxe;case 35664:return Wxe;case 35665:return qxe;case 35666:return Xxe;case 35674:return Kxe;case 35675:return Yxe;case 35676:return Zxe;case 5124:case 35670:return Qxe;case 35667:case 35671:return Jxe;case 35668:case 35672:return ebe;case 35669:case 35673:return tbe;case 5125:return nbe;case 36294:return rbe;case 36295:return ibe;case 36296:return sbe;case 35678:case 36198:case 36298:case 36306:case 35682:return abe;case 35679:case 36299:case 36307:return obe;case 35680:case 36300:case 36308:case 36293:return lbe;case 36289:case 36303:case 36311:case 36292:return cbe}}class hbe{constructor(e,n,i){this.id=e,this.addr=i,this.cache=[],this.type=n.type,this.setValue=Vxe(n.type)}}class dbe{constructor(e,n,i){this.id=e,this.addr=i,this.cache=[],this.type=n.type,this.size=n.size,this.setValue=ube(n.type)}}class fbe{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,n,i){const s=this.seq;for(let a=0,o=s.length;a!==o;++a){const l=s[a];l.setValue(e,n[l.id],i)}}}const QN=/(\w+)(\])?(\[|\.)?/g;function WG(r,e){r.seq.push(e),r.map[e.id]=e}function pbe(r,e,n){const i=r.name,s=i.length;for(QN.lastIndex=0;;){const a=QN.exec(i),o=QN.lastIndex;let l=a[1];const c=a[2]==="]",u=a[3];if(c&&(l=l|0),u===void 0||u==="["&&o+2===s){WG(n,u===void 0?new hbe(l,r,e):new dbe(l,r,e));break}else{let d=n.map[l];d===void 0&&(d=new fbe(l),WG(n,d)),n=d}}}class lT{constructor(e,n){this.seq=[],this.map={};const i=e.getProgramParameter(n,e.ACTIVE_UNIFORMS);for(let s=0;s<i;++s){const a=e.getActiveUniform(n,s),o=e.getUniformLocation(n,a.name);pbe(a,o,this)}}setValue(e,n,i,s){const a=this.map[n];a!==void 0&&a.setValue(e,i,s)}setOptional(e,n,i){const s=n[i];s!==void 0&&this.setValue(e,i,s)}static upload(e,n,i,s){for(let a=0,o=n.length;a!==o;++a){const l=n[a],c=i[l.id];c.needsUpdate!==!1&&l.setValue(e,c.value,s)}}static seqWithValue(e,n){const i=[];for(let s=0,a=e.length;s!==a;++s){const o=e[s];o.id in n&&i.push(o)}return i}}function qG(r,e,n){const i=r.createShader(e);return r.shaderSource(i,n),r.compileShader(i),i}const mbe=37297;let gbe=0;function ybe(r,e){const n=r.split(`
`),i=[],s=Math.max(e-6,0),a=Math.min(e+6,n.length);for(let o=s;o<a;o++){const l=o+1;i.push(`${l===e?">":" "} ${l}: ${n[o]}`)}return i.join(`
`)}const XG=new zn;function vbe(r){tr._getMatrix(XG,tr.workingColorSpace,r);const e=`mat3( ${XG.elements.map(n=>n.toFixed(4))} )`;switch(tr.getTransfer(r)){case LT:return[e,"LinearTransferOETF"];case Ir:return[e,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",r),[e,"LinearTransferOETF"]}}function KG(r,e,n){const i=r.getShaderParameter(e,r.COMPILE_STATUS),s=r.getShaderInfoLog(e).trim();if(i&&s==="")return"";const a=/ERROR: 0:(\d+)/.exec(s);if(a){const o=parseInt(a[1]);return n.toUpperCase()+`

`+s+`

`+ybe(r.getShaderSource(e),o)}else return s}function xbe(r,e){const n=vbe(e);return[`vec4 ${r}( vec4 value ) {`,`	return ${n[1]}( vec4( value.rgb * ${n[0]}, value.a ) );`,"}"].join(`
`)}function bbe(r,e){let n;switch(e){case KJ:n="Linear";break;case YJ:n="Reinhard";break;case ZJ:n="Cineon";break;case QJ:n="ACESFilmic";break;case JJ:n="AgX";break;case eee:n="Neutral";break;case Pme:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),n="Linear"}return"vec3 "+r+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}const z1=new pe;function _be(){tr.getLuminanceCoefficients(z1);const r=z1.x.toFixed(4),e=z1.y.toFixed(4),n=z1.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${r}, ${e}, ${n} );`,"	return dot( weights, rgb );","}"].join(`
`)}function wbe(r){return[r.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",r.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(Yv).join(`
`)}function Sbe(r){const e=[];for(const n in r){const i=r[n];i!==!1&&e.push("#define "+n+" "+i)}return e.join(`
`)}function Tbe(r,e){const n={},i=r.getProgramParameter(e,r.ACTIVE_ATTRIBUTES);for(let s=0;s<i;s++){const a=r.getActiveAttrib(e,s),o=a.name;let l=1;a.type===r.FLOAT_MAT2&&(l=2),a.type===r.FLOAT_MAT3&&(l=3),a.type===r.FLOAT_MAT4&&(l=4),n[o]={type:a.type,location:r.getAttribLocation(e,o),locationSize:l}}return n}function Yv(r){return r!==""}function YG(r,e){const n=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return r.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function ZG(r,e){return r.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const Ebe=/^[ \t]*#include +<([\w\d./]+)>/gm;function a3(r){return r.replace(Ebe,Abe)}const Mbe=new Map;function Abe(r,e){let n=er[e];if(n===void 0){const i=Mbe.get(e);if(i!==void 0)n=er[i],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,i);else throw new Error("Can not resolve #include <"+e+">")}return a3(n)}const Cbe=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function QG(r){return r.replace(Cbe,Nbe)}function Nbe(r,e,n,i){let s="";for(let a=parseInt(e);a<parseInt(n);a++)s+=i.replace(/\[\s*i\s*\]/g,"[ "+a+" ]").replace(/UNROLLED_LOOP_INDEX/g,a);return s}function JG(r){let e=`precision ${r.precision} float;
	precision ${r.precision} int;
	precision ${r.precision} sampler2D;
	precision ${r.precision} samplerCube;
	precision ${r.precision} sampler3D;
	precision ${r.precision} sampler2DArray;
	precision ${r.precision} sampler2DShadow;
	precision ${r.precision} samplerCubeShadow;
	precision ${r.precision} sampler2DArrayShadow;
	precision ${r.precision} isampler2D;
	precision ${r.precision} isampler3D;
	precision ${r.precision} isamplerCube;
	precision ${r.precision} isampler2DArray;
	precision ${r.precision} usampler2D;
	precision ${r.precision} usampler3D;
	precision ${r.precision} usamplerCube;
	precision ${r.precision} usampler2DArray;
	`;return r.precision==="highp"?e+=`
#define HIGH_PRECISION`:r.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:r.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function Pbe(r){let e="SHADOWMAP_TYPE_BASIC";return r.shadowMapType===sj?e="SHADOWMAP_TYPE_PCF":r.shadowMapType===Eme?e="SHADOWMAP_TYPE_PCF_SOFT":r.shadowMapType===Ao&&(e="SHADOWMAP_TYPE_VSM"),e}function Rbe(r){let e="ENVMAP_TYPE_CUBE";if(r.envMap)switch(r.envMapMode){case ml:case gl:e="ENVMAP_TYPE_CUBE";break;case bp:e="ENVMAP_TYPE_CUBE_UV";break}return e}function Obe(r){let e="ENVMAP_MODE_REFLECTION";if(r.envMap)switch(r.envMapMode){case gl:e="ENVMAP_MODE_REFRACTION";break}return e}function kbe(r){let e="ENVMAP_BLENDING_NONE";if(r.envMap)switch(r.combine){case y_:e="ENVMAP_BLENDING_MULTIPLY";break;case qJ:e="ENVMAP_BLENDING_MIX";break;case XJ:e="ENVMAP_BLENDING_ADD";break}return e}function Ibe(r){const e=r.envMapCubeUVHeight;if(e===null)return null;const n=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,n),7*16)),texelHeight:i,maxMip:n}}function Dbe(r,e,n,i){const s=r.getContext(),a=n.defines;let o=n.vertexShader,l=n.fragmentShader;const c=Pbe(n),u=Rbe(n),h=Obe(n),d=kbe(n),f=Ibe(n),p=wbe(n),g=Sbe(a),v=s.createProgram();let x,_,E=n.glslVersion?"#version "+n.glslVersion+`
`:"";n.isRawShaderMaterial?(x=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,g].filter(Yv).join(`
`),x.length>0&&(x+=`
`),_=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,g].filter(Yv).join(`
`),_.length>0&&(_+=`
`)):(x=[JG(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,g,n.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",n.batching?"#define USE_BATCHING":"",n.batchingColor?"#define USE_BATCHING_COLOR":"",n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.instancingMorph?"#define USE_INSTANCING_MORPH":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+h:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.displacementMap?"#define USE_DISPLACEMENTMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.mapUv?"#define MAP_UV "+n.mapUv:"",n.alphaMapUv?"#define ALPHAMAP_UV "+n.alphaMapUv:"",n.lightMapUv?"#define LIGHTMAP_UV "+n.lightMapUv:"",n.aoMapUv?"#define AOMAP_UV "+n.aoMapUv:"",n.emissiveMapUv?"#define EMISSIVEMAP_UV "+n.emissiveMapUv:"",n.bumpMapUv?"#define BUMPMAP_UV "+n.bumpMapUv:"",n.normalMapUv?"#define NORMALMAP_UV "+n.normalMapUv:"",n.displacementMapUv?"#define DISPLACEMENTMAP_UV "+n.displacementMapUv:"",n.metalnessMapUv?"#define METALNESSMAP_UV "+n.metalnessMapUv:"",n.roughnessMapUv?"#define ROUGHNESSMAP_UV "+n.roughnessMapUv:"",n.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+n.anisotropyMapUv:"",n.clearcoatMapUv?"#define CLEARCOATMAP_UV "+n.clearcoatMapUv:"",n.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+n.clearcoatNormalMapUv:"",n.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+n.clearcoatRoughnessMapUv:"",n.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+n.iridescenceMapUv:"",n.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+n.iridescenceThicknessMapUv:"",n.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+n.sheenColorMapUv:"",n.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+n.sheenRoughnessMapUv:"",n.specularMapUv?"#define SPECULARMAP_UV "+n.specularMapUv:"",n.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+n.specularColorMapUv:"",n.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+n.specularIntensityMapUv:"",n.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+n.transmissionMapUv:"",n.thicknessMapUv?"#define THICKNESSMAP_UV "+n.thicknessMapUv:"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&n.flatShading===!1?"#define USE_MORPHNORMALS":"",n.morphColors?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+c:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Yv).join(`
`),_=[JG(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,g,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+u:"",n.envMap?"#define "+h:"",n.envMap?"#define "+d:"",f?"#define CUBEUV_TEXEL_WIDTH "+f.texelWidth:"",f?"#define CUBEUV_TEXEL_HEIGHT "+f.texelHeight:"",f?"#define CUBEUV_MAX_MIP "+f.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.dispersion?"#define USE_DISPERSION":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor||n.batchingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+c:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==to?"#define TONE_MAPPING":"",n.toneMapping!==to?er.tonemapping_pars_fragment:"",n.toneMapping!==to?bbe("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",er.colorspace_pars_fragment,xbe("linearToOutputTexel",n.outputColorSpace),_be(),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"",`
`].filter(Yv).join(`
`)),o=a3(o),o=YG(o,n),o=ZG(o,n),l=a3(l),l=YG(l,n),l=ZG(l,n),o=QG(o),l=QG(l),n.isRawShaderMaterial!==!0&&(E=`#version 300 es
`,x=[p,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+x,_=["#define varying in",n.glslVersion===nG?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===nG?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+_);const S=E+x+o,T=E+_+l,M=qG(s,s.VERTEX_SHADER,S),C=qG(s,s.FRAGMENT_SHADER,T);s.attachShader(v,M),s.attachShader(v,C),n.index0AttributeName!==void 0?s.bindAttribLocation(v,0,n.index0AttributeName):n.morphTargets===!0&&s.bindAttribLocation(v,0,"position"),s.linkProgram(v);function A(D){if(r.debug.checkShaderErrors){const F=s.getProgramInfoLog(v).trim(),U=s.getShaderInfoLog(M).trim(),B=s.getShaderInfoLog(C).trim();let W=!0,j=!0;if(s.getProgramParameter(v,s.LINK_STATUS)===!1)if(W=!1,typeof r.debug.onShaderError=="function")r.debug.onShaderError(s,v,M,C);else{const $=KG(s,M,"vertex"),z=KG(s,C,"fragment");console.error("THREE.WebGLProgram: Shader Error "+s.getError()+" - VALIDATE_STATUS "+s.getProgramParameter(v,s.VALIDATE_STATUS)+`

Material Name: `+D.name+`
Material Type: `+D.type+`

Program Info Log: `+F+`
`+$+`
`+z)}else F!==""?console.warn("THREE.WebGLProgram: Program Info Log:",F):(U===""||B==="")&&(j=!1);j&&(D.diagnostics={runnable:W,programLog:F,vertexShader:{log:U,prefix:x},fragmentShader:{log:B,prefix:_}})}s.deleteShader(M),s.deleteShader(C),P=new lT(s,v),R=Tbe(s,v)}let P;this.getUniforms=function(){return P===void 0&&A(this),P};let R;this.getAttributes=function(){return R===void 0&&A(this),R};let O=n.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return O===!1&&(O=s.getProgramParameter(v,mbe)),O},this.destroy=function(){i.releaseStatesOfProgram(this),s.deleteProgram(v),this.program=void 0},this.type=n.shaderType,this.name=n.shaderName,this.id=gbe++,this.cacheKey=e,this.usedTimes=1,this.program=v,this.vertexShader=M,this.fragmentShader=C,this}let Lbe=0;class Fbe{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const n=e.vertexShader,i=e.fragmentShader,s=this._getShaderStage(n),a=this._getShaderStage(i),o=this._getShaderCacheForMaterial(e);return o.has(s)===!1&&(o.add(s),s.usedTimes++),o.has(a)===!1&&(o.add(a),a.usedTimes++),this}remove(e){const n=this.materialCache.get(e);for(const i of n)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const n=this.materialCache;let i=n.get(e);return i===void 0&&(i=new Set,n.set(e,i)),i}_getShaderStage(e){const n=this.shaderCache;let i=n.get(e);return i===void 0&&(i=new Bbe(e),n.set(e,i)),i}}class Bbe{constructor(e){this.id=Lbe++,this.code=e,this.usedTimes=0}}function jbe(r,e,n,i,s,a,o){const l=new Oj,c=new Fbe,u=new Set,h=[],d=s.logarithmicDepthBuffer,f=s.vertexTextures;let p=s.precision;const g={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function v(R){return u.add(R),R===0?"uv":`uv${R}`}function x(R,O,D,F,U){const B=F.fog,W=U.geometry,j=R.isMeshStandardMaterial?F.environment:null,$=(R.isMeshStandardMaterial?n:e).get(R.envMap||j),z=$&&$.mapping===bp?$.image.height:null,Z=g[R.type];R.precision!==null&&(p=s.getMaxPrecision(R.precision),p!==R.precision&&console.warn("THREE.WebGLProgram.getParameters:",R.precision,"not supported, using",p,"instead."));const se=W.morphAttributes.position||W.morphAttributes.normal||W.morphAttributes.color,q=se!==void 0?se.length:0;let ue=0;W.morphAttributes.position!==void 0&&(ue=1),W.morphAttributes.normal!==void 0&&(ue=2),W.morphAttributes.color!==void 0&&(ue=3);let be,ee,le,oe;if(Z){const Rn=Mc[Z];be=Rn.vertexShader,ee=Rn.fragmentShader}else be=R.vertexShader,ee=R.fragmentShader,c.update(R),le=c.getVertexShaderID(R),oe=c.getFragmentShaderID(R);const fe=r.getRenderTarget(),Se=r.state.buffers.depth.getReversed(),we=U.isInstancedMesh===!0,Le=U.isBatchedMesh===!0,et=!!R.map,Fe=!!R.matcap,Tt=!!$,me=!!R.aoMap,En=!!R.lightMap,Wt=!!R.bumpMap,Jt=!!R.normalMap,zt=!!R.displacementMap,Yn=!!R.emissiveMap,Ft=!!R.metalnessMap,he=!!R.roughnessMap,Q=R.anisotropy>0,Re=R.clearcoat>0,Ze=R.dispersion>0,Je=R.iridescence>0,Ke=R.sheen>0,Kt=R.transmission>0,Et=Q&&!!R.anisotropyMap,Dt=Re&&!!R.clearcoatMap,Vn=Re&&!!R.clearcoatNormalMap,at=Re&&!!R.clearcoatRoughnessMap,$t=Je&&!!R.iridescenceMap,fn=Je&&!!R.iridescenceThicknessMap,vn=Ke&&!!R.sheenColorMap,Bt=Ke&&!!R.sheenRoughnessMap,Hn=!!R.specularMap,Nn=!!R.specularColorMap,hr=!!R.specularIntensityMap,Me=Kt&&!!R.transmissionMap,Mt=Kt&&!!R.thicknessMap,Ue=!!R.gradientMap,Ye=!!R.alphaMap,Pt=R.alphaTest>0,wt=!!R.alphaHash,Pn=!!R.extensions;let Rr=to;R.toneMapped&&(fe===null||fe.isXRRenderTarget===!0)&&(Rr=r.toneMapping);const vi={shaderID:Z,shaderType:R.type,shaderName:R.name,vertexShader:be,fragmentShader:ee,defines:R.defines,customVertexShaderID:le,customFragmentShaderID:oe,isRawShaderMaterial:R.isRawShaderMaterial===!0,glslVersion:R.glslVersion,precision:p,batching:Le,batchingColor:Le&&U._colorsTexture!==null,instancing:we,instancingColor:we&&U.instanceColor!==null,instancingMorph:we&&U.morphTexture!==null,supportsVertexTextures:f,outputColorSpace:fe===null?r.outputColorSpace:fe.isXRRenderTarget===!0?fe.texture.colorSpace:Fc,alphaToCoverage:!!R.alphaToCoverage,map:et,matcap:Fe,envMap:Tt,envMapMode:Tt&&$.mapping,envMapCubeUVHeight:z,aoMap:me,lightMap:En,bumpMap:Wt,normalMap:Jt,displacementMap:f&&zt,emissiveMap:Yn,normalMapObjectSpace:Jt&&R.normalMapType===tee,normalMapTangentSpace:Jt&&R.normalMapType===ph,metalnessMap:Ft,roughnessMap:he,anisotropy:Q,anisotropyMap:Et,clearcoat:Re,clearcoatMap:Dt,clearcoatNormalMap:Vn,clearcoatRoughnessMap:at,dispersion:Ze,iridescence:Je,iridescenceMap:$t,iridescenceThicknessMap:fn,sheen:Ke,sheenColorMap:vn,sheenRoughnessMap:Bt,specularMap:Hn,specularColorMap:Nn,specularIntensityMap:hr,transmission:Kt,transmissionMap:Me,thicknessMap:Mt,gradientMap:Ue,opaque:R.transparent===!1&&R.blending===hl&&R.alphaToCoverage===!1,alphaMap:Ye,alphaTest:Pt,alphaHash:wt,combine:R.combine,mapUv:et&&v(R.map.channel),aoMapUv:me&&v(R.aoMap.channel),lightMapUv:En&&v(R.lightMap.channel),bumpMapUv:Wt&&v(R.bumpMap.channel),normalMapUv:Jt&&v(R.normalMap.channel),displacementMapUv:zt&&v(R.displacementMap.channel),emissiveMapUv:Yn&&v(R.emissiveMap.channel),metalnessMapUv:Ft&&v(R.metalnessMap.channel),roughnessMapUv:he&&v(R.roughnessMap.channel),anisotropyMapUv:Et&&v(R.anisotropyMap.channel),clearcoatMapUv:Dt&&v(R.clearcoatMap.channel),clearcoatNormalMapUv:Vn&&v(R.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:at&&v(R.clearcoatRoughnessMap.channel),iridescenceMapUv:$t&&v(R.iridescenceMap.channel),iridescenceThicknessMapUv:fn&&v(R.iridescenceThicknessMap.channel),sheenColorMapUv:vn&&v(R.sheenColorMap.channel),sheenRoughnessMapUv:Bt&&v(R.sheenRoughnessMap.channel),specularMapUv:Hn&&v(R.specularMap.channel),specularColorMapUv:Nn&&v(R.specularColorMap.channel),specularIntensityMapUv:hr&&v(R.specularIntensityMap.channel),transmissionMapUv:Me&&v(R.transmissionMap.channel),thicknessMapUv:Mt&&v(R.thicknessMap.channel),alphaMapUv:Ye&&v(R.alphaMap.channel),vertexTangents:!!W.attributes.tangent&&(Jt||Q),vertexColors:R.vertexColors,vertexAlphas:R.vertexColors===!0&&!!W.attributes.color&&W.attributes.color.itemSize===4,pointsUvs:U.isPoints===!0&&!!W.attributes.uv&&(et||Ye),fog:!!B,useFog:R.fog===!0,fogExp2:!!B&&B.isFogExp2,flatShading:R.flatShading===!0,sizeAttenuation:R.sizeAttenuation===!0,logarithmicDepthBuffer:d,reverseDepthBuffer:Se,skinning:U.isSkinnedMesh===!0,morphTargets:W.morphAttributes.position!==void 0,morphNormals:W.morphAttributes.normal!==void 0,morphColors:W.morphAttributes.color!==void 0,morphTargetsCount:q,morphTextureStride:ue,numDirLights:O.directional.length,numPointLights:O.point.length,numSpotLights:O.spot.length,numSpotLightMaps:O.spotLightMap.length,numRectAreaLights:O.rectArea.length,numHemiLights:O.hemi.length,numDirLightShadows:O.directionalShadowMap.length,numPointLightShadows:O.pointShadowMap.length,numSpotLightShadows:O.spotShadowMap.length,numSpotLightShadowsWithMaps:O.numSpotLightShadowsWithMaps,numLightProbes:O.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:R.dithering,shadowMapEnabled:r.shadowMap.enabled&&D.length>0,shadowMapType:r.shadowMap.type,toneMapping:Rr,decodeVideoTexture:et&&R.map.isVideoTexture===!0&&tr.getTransfer(R.map.colorSpace)===Ir,decodeVideoTextureEmissive:Yn&&R.emissiveMap.isVideoTexture===!0&&tr.getTransfer(R.emissiveMap.colorSpace)===Ir,premultipliedAlpha:R.premultipliedAlpha,doubleSided:R.side===Ea,flipSided:R.side===Wr,useDepthPacking:R.depthPacking>=0,depthPacking:R.depthPacking||0,index0AttributeName:R.index0AttributeName,extensionClipCullDistance:Pn&&R.extensions.clipCullDistance===!0&&i.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(Pn&&R.extensions.multiDraw===!0||Le)&&i.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:R.customProgramCacheKey()};return vi.vertexUv1s=u.has(1),vi.vertexUv2s=u.has(2),vi.vertexUv3s=u.has(3),u.clear(),vi}function _(R){const O=[];if(R.shaderID?O.push(R.shaderID):(O.push(R.customVertexShaderID),O.push(R.customFragmentShaderID)),R.defines!==void 0)for(const D in R.defines)O.push(D),O.push(R.defines[D]);return R.isRawShaderMaterial===!1&&(E(O,R),S(O,R),O.push(r.outputColorSpace)),O.push(R.customProgramCacheKey),O.join()}function E(R,O){R.push(O.precision),R.push(O.outputColorSpace),R.push(O.envMapMode),R.push(O.envMapCubeUVHeight),R.push(O.mapUv),R.push(O.alphaMapUv),R.push(O.lightMapUv),R.push(O.aoMapUv),R.push(O.bumpMapUv),R.push(O.normalMapUv),R.push(O.displacementMapUv),R.push(O.emissiveMapUv),R.push(O.metalnessMapUv),R.push(O.roughnessMapUv),R.push(O.anisotropyMapUv),R.push(O.clearcoatMapUv),R.push(O.clearcoatNormalMapUv),R.push(O.clearcoatRoughnessMapUv),R.push(O.iridescenceMapUv),R.push(O.iridescenceThicknessMapUv),R.push(O.sheenColorMapUv),R.push(O.sheenRoughnessMapUv),R.push(O.specularMapUv),R.push(O.specularColorMapUv),R.push(O.specularIntensityMapUv),R.push(O.transmissionMapUv),R.push(O.thicknessMapUv),R.push(O.combine),R.push(O.fogExp2),R.push(O.sizeAttenuation),R.push(O.morphTargetsCount),R.push(O.morphAttributeCount),R.push(O.numDirLights),R.push(O.numPointLights),R.push(O.numSpotLights),R.push(O.numSpotLightMaps),R.push(O.numHemiLights),R.push(O.numRectAreaLights),R.push(O.numDirLightShadows),R.push(O.numPointLightShadows),R.push(O.numSpotLightShadows),R.push(O.numSpotLightShadowsWithMaps),R.push(O.numLightProbes),R.push(O.shadowMapType),R.push(O.toneMapping),R.push(O.numClippingPlanes),R.push(O.numClipIntersection),R.push(O.depthPacking)}function S(R,O){l.disableAll(),O.supportsVertexTextures&&l.enable(0),O.instancing&&l.enable(1),O.instancingColor&&l.enable(2),O.instancingMorph&&l.enable(3),O.matcap&&l.enable(4),O.envMap&&l.enable(5),O.normalMapObjectSpace&&l.enable(6),O.normalMapTangentSpace&&l.enable(7),O.clearcoat&&l.enable(8),O.iridescence&&l.enable(9),O.alphaTest&&l.enable(10),O.vertexColors&&l.enable(11),O.vertexAlphas&&l.enable(12),O.vertexUv1s&&l.enable(13),O.vertexUv2s&&l.enable(14),O.vertexUv3s&&l.enable(15),O.vertexTangents&&l.enable(16),O.anisotropy&&l.enable(17),O.alphaHash&&l.enable(18),O.batching&&l.enable(19),O.dispersion&&l.enable(20),O.batchingColor&&l.enable(21),R.push(l.mask),l.disableAll(),O.fog&&l.enable(0),O.useFog&&l.enable(1),O.flatShading&&l.enable(2),O.logarithmicDepthBuffer&&l.enable(3),O.reverseDepthBuffer&&l.enable(4),O.skinning&&l.enable(5),O.morphTargets&&l.enable(6),O.morphNormals&&l.enable(7),O.morphColors&&l.enable(8),O.premultipliedAlpha&&l.enable(9),O.shadowMapEnabled&&l.enable(10),O.doubleSided&&l.enable(11),O.flipSided&&l.enable(12),O.useDepthPacking&&l.enable(13),O.dithering&&l.enable(14),O.transmission&&l.enable(15),O.sheen&&l.enable(16),O.opaque&&l.enable(17),O.pointsUvs&&l.enable(18),O.decodeVideoTexture&&l.enable(19),O.decodeVideoTextureEmissive&&l.enable(20),O.alphaToCoverage&&l.enable(21),R.push(l.mask)}function T(R){const O=g[R.type];let D;if(O){const F=Mc[O];D=hee.clone(F.uniforms)}else D=R.uniforms;return D}function M(R,O){let D;for(let F=0,U=h.length;F<U;F++){const B=h[F];if(B.cacheKey===O){D=B,++D.usedTimes;break}}return D===void 0&&(D=new Dbe(r,O,R,a),h.push(D)),D}function C(R){if(--R.usedTimes===0){const O=h.indexOf(R);h[O]=h[h.length-1],h.pop(),R.destroy()}}function A(R){c.remove(R)}function P(){c.dispose()}return{getParameters:x,getProgramCacheKey:_,getUniforms:T,acquireProgram:M,releaseProgram:C,releaseShaderCache:A,programs:h,dispose:P}}function Ube(){let r=new WeakMap;function e(o){return r.has(o)}function n(o){let l=r.get(o);return l===void 0&&(l={},r.set(o,l)),l}function i(o){r.delete(o)}function s(o,l,c){r.get(o)[l]=c}function a(){r=new WeakMap}return{has:e,get:n,remove:i,update:s,dispose:a}}function zbe(r,e){return r.groupOrder!==e.groupOrder?r.groupOrder-e.groupOrder:r.renderOrder!==e.renderOrder?r.renderOrder-e.renderOrder:r.material.id!==e.material.id?r.material.id-e.material.id:r.z!==e.z?r.z-e.z:r.id-e.id}function eV(r,e){return r.groupOrder!==e.groupOrder?r.groupOrder-e.groupOrder:r.renderOrder!==e.renderOrder?r.renderOrder-e.renderOrder:r.z!==e.z?e.z-r.z:r.id-e.id}function tV(){const r=[];let e=0;const n=[],i=[],s=[];function a(){e=0,n.length=0,i.length=0,s.length=0}function o(d,f,p,g,v,x){let _=r[e];return _===void 0?(_={id:d.id,object:d,geometry:f,material:p,groupOrder:g,renderOrder:d.renderOrder,z:v,group:x},r[e]=_):(_.id=d.id,_.object=d,_.geometry=f,_.material=p,_.groupOrder=g,_.renderOrder=d.renderOrder,_.z=v,_.group=x),e++,_}function l(d,f,p,g,v,x){const _=o(d,f,p,g,v,x);p.transmission>0?i.push(_):p.transparent===!0?s.push(_):n.push(_)}function c(d,f,p,g,v,x){const _=o(d,f,p,g,v,x);p.transmission>0?i.unshift(_):p.transparent===!0?s.unshift(_):n.unshift(_)}function u(d,f){n.length>1&&n.sort(d||zbe),i.length>1&&i.sort(f||eV),s.length>1&&s.sort(f||eV)}function h(){for(let d=e,f=r.length;d<f;d++){const p=r[d];if(p.id===null)break;p.id=null,p.object=null,p.geometry=null,p.material=null,p.group=null}}return{opaque:n,transmissive:i,transparent:s,init:a,push:l,unshift:c,finish:h,sort:u}}function $be(){let r=new WeakMap;function e(i,s){const a=r.get(i);let o;return a===void 0?(o=new tV,r.set(i,[o])):s>=a.length?(o=new tV,a.push(o)):o=a[s],o}function n(){r=new WeakMap}return{get:e,dispose:n}}function Gbe(){const r={};return{get:function(e){if(r[e.id]!==void 0)return r[e.id];let n;switch(e.type){case"DirectionalLight":n={direction:new pe,color:new ln};break;case"SpotLight":n={position:new pe,direction:new pe,color:new ln,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new pe,color:new ln,distance:0,decay:0};break;case"HemisphereLight":n={direction:new pe,skyColor:new ln,groundColor:new ln};break;case"RectAreaLight":n={color:new ln,position:new pe,halfWidth:new pe,halfHeight:new pe};break}return r[e.id]=n,n}}}function Vbe(){const r={};return{get:function(e){if(r[e.id]!==void 0)return r[e.id];let n;switch(e.type){case"DirectionalLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new dt};break;case"SpotLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new dt};break;case"PointLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new dt,shadowCameraNear:1,shadowCameraFar:1e3};break}return r[e.id]=n,n}}}let Hbe=0;function Wbe(r,e){return(e.castShadow?2:0)-(r.castShadow?2:0)+(e.map?1:0)-(r.map?1:0)}function qbe(r){const e=new Gbe,n=Vbe(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let u=0;u<9;u++)i.probe.push(new pe);const s=new pe,a=new br,o=new br;function l(u){let h=0,d=0,f=0;for(let R=0;R<9;R++)i.probe[R].set(0,0,0);let p=0,g=0,v=0,x=0,_=0,E=0,S=0,T=0,M=0,C=0,A=0;u.sort(Wbe);for(let R=0,O=u.length;R<O;R++){const D=u[R],F=D.color,U=D.intensity,B=D.distance,W=D.shadow&&D.shadow.map?D.shadow.map.texture:null;if(D.isAmbientLight)h+=F.r*U,d+=F.g*U,f+=F.b*U;else if(D.isLightProbe){for(let j=0;j<9;j++)i.probe[j].addScaledVector(D.sh.coefficients[j],U);A++}else if(D.isDirectionalLight){const j=e.get(D);if(j.color.copy(D.color).multiplyScalar(D.intensity),D.castShadow){const $=D.shadow,z=n.get(D);z.shadowIntensity=$.intensity,z.shadowBias=$.bias,z.shadowNormalBias=$.normalBias,z.shadowRadius=$.radius,z.shadowMapSize=$.mapSize,i.directionalShadow[p]=z,i.directionalShadowMap[p]=W,i.directionalShadowMatrix[p]=D.shadow.matrix,E++}i.directional[p]=j,p++}else if(D.isSpotLight){const j=e.get(D);j.position.setFromMatrixPosition(D.matrixWorld),j.color.copy(F).multiplyScalar(U),j.distance=B,j.coneCos=Math.cos(D.angle),j.penumbraCos=Math.cos(D.angle*(1-D.penumbra)),j.decay=D.decay,i.spot[v]=j;const $=D.shadow;if(D.map&&(i.spotLightMap[M]=D.map,M++,$.updateMatrices(D),D.castShadow&&C++),i.spotLightMatrix[v]=$.matrix,D.castShadow){const z=n.get(D);z.shadowIntensity=$.intensity,z.shadowBias=$.bias,z.shadowNormalBias=$.normalBias,z.shadowRadius=$.radius,z.shadowMapSize=$.mapSize,i.spotShadow[v]=z,i.spotShadowMap[v]=W,T++}v++}else if(D.isRectAreaLight){const j=e.get(D);j.color.copy(F).multiplyScalar(U),j.halfWidth.set(D.width*.5,0,0),j.halfHeight.set(0,D.height*.5,0),i.rectArea[x]=j,x++}else if(D.isPointLight){const j=e.get(D);if(j.color.copy(D.color).multiplyScalar(D.intensity),j.distance=D.distance,j.decay=D.decay,D.castShadow){const $=D.shadow,z=n.get(D);z.shadowIntensity=$.intensity,z.shadowBias=$.bias,z.shadowNormalBias=$.normalBias,z.shadowRadius=$.radius,z.shadowMapSize=$.mapSize,z.shadowCameraNear=$.camera.near,z.shadowCameraFar=$.camera.far,i.pointShadow[g]=z,i.pointShadowMap[g]=W,i.pointShadowMatrix[g]=D.shadow.matrix,S++}i.point[g]=j,g++}else if(D.isHemisphereLight){const j=e.get(D);j.skyColor.copy(D.color).multiplyScalar(U),j.groundColor.copy(D.groundColor).multiplyScalar(U),i.hemi[_]=j,_++}}x>0&&(r.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=Ot.LTC_FLOAT_1,i.rectAreaLTC2=Ot.LTC_FLOAT_2):(i.rectAreaLTC1=Ot.LTC_HALF_1,i.rectAreaLTC2=Ot.LTC_HALF_2)),i.ambient[0]=h,i.ambient[1]=d,i.ambient[2]=f;const P=i.hash;(P.directionalLength!==p||P.pointLength!==g||P.spotLength!==v||P.rectAreaLength!==x||P.hemiLength!==_||P.numDirectionalShadows!==E||P.numPointShadows!==S||P.numSpotShadows!==T||P.numSpotMaps!==M||P.numLightProbes!==A)&&(i.directional.length=p,i.spot.length=v,i.rectArea.length=x,i.point.length=g,i.hemi.length=_,i.directionalShadow.length=E,i.directionalShadowMap.length=E,i.pointShadow.length=S,i.pointShadowMap.length=S,i.spotShadow.length=T,i.spotShadowMap.length=T,i.directionalShadowMatrix.length=E,i.pointShadowMatrix.length=S,i.spotLightMatrix.length=T+M-C,i.spotLightMap.length=M,i.numSpotLightShadowsWithMaps=C,i.numLightProbes=A,P.directionalLength=p,P.pointLength=g,P.spotLength=v,P.rectAreaLength=x,P.hemiLength=_,P.numDirectionalShadows=E,P.numPointShadows=S,P.numSpotShadows=T,P.numSpotMaps=M,P.numLightProbes=A,i.version=Hbe++)}function c(u,h){let d=0,f=0,p=0,g=0,v=0;const x=h.matrixWorldInverse;for(let _=0,E=u.length;_<E;_++){const S=u[_];if(S.isDirectionalLight){const T=i.directional[d];T.direction.setFromMatrixPosition(S.matrixWorld),s.setFromMatrixPosition(S.target.matrixWorld),T.direction.sub(s),T.direction.transformDirection(x),d++}else if(S.isSpotLight){const T=i.spot[p];T.position.setFromMatrixPosition(S.matrixWorld),T.position.applyMatrix4(x),T.direction.setFromMatrixPosition(S.matrixWorld),s.setFromMatrixPosition(S.target.matrixWorld),T.direction.sub(s),T.direction.transformDirection(x),p++}else if(S.isRectAreaLight){const T=i.rectArea[g];T.position.setFromMatrixPosition(S.matrixWorld),T.position.applyMatrix4(x),o.identity(),a.copy(S.matrixWorld),a.premultiply(x),o.extractRotation(a),T.halfWidth.set(S.width*.5,0,0),T.halfHeight.set(0,S.height*.5,0),T.halfWidth.applyMatrix4(o),T.halfHeight.applyMatrix4(o),g++}else if(S.isPointLight){const T=i.point[f];T.position.setFromMatrixPosition(S.matrixWorld),T.position.applyMatrix4(x),f++}else if(S.isHemisphereLight){const T=i.hemi[v];T.direction.setFromMatrixPosition(S.matrixWorld),T.direction.transformDirection(x),v++}}}return{setup:l,setupView:c,state:i}}function nV(r){const e=new qbe(r),n=[],i=[];function s(h){u.camera=h,n.length=0,i.length=0}function a(h){n.push(h)}function o(h){i.push(h)}function l(){e.setup(n)}function c(h){e.setupView(n,h)}const u={lightsArray:n,shadowsArray:i,camera:null,lights:e,transmissionRenderTarget:{}};return{init:s,state:u,setupLights:l,setupLightsView:c,pushLight:a,pushShadow:o}}function Xbe(r){let e=new WeakMap;function n(s,a=0){const o=e.get(s);let l;return o===void 0?(l=new nV(r),e.set(s,[l])):a>=o.length?(l=new nV(r),o.push(l)):l=o[a],l}function i(){e=new WeakMap}return{get:n,dispose:i}}const Kbe=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,Ybe=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function Zbe(r,e,n){let i=new CM;const s=new dt,a=new dt,o=new In,l=new oye({depthPacking:kme}),c=new lye,u={},h=n.maxTextureSize,d={[Ja]:Wr,[Wr]:Ja,[Ea]:Ea},f=new Wc({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new dt},radius:{value:4}},vertexShader:Kbe,fragmentShader:Ybe}),p=f.clone();p.defines.HORIZONTAL_PASS=1;const g=new Ws;g.setAttribute("position",new ps(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const v=new li(g,f),x=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=sj;let _=this.type;this.render=function(C,A,P){if(x.enabled===!1||x.autoUpdate===!1&&x.needsUpdate===!1||C.length===0)return;const R=r.getRenderTarget(),O=r.getActiveCubeFace(),D=r.getActiveMipmapLevel(),F=r.state;F.setBlending(eo),F.buffers.color.setClear(1,1,1,1),F.buffers.depth.setTest(!0),F.setScissorTest(!1);const U=_!==Ao&&this.type===Ao,B=_===Ao&&this.type!==Ao;for(let W=0,j=C.length;W<j;W++){const $=C[W],z=$.shadow;if(z===void 0){console.warn("THREE.WebGLShadowMap:",$,"has no shadow.");continue}if(z.autoUpdate===!1&&z.needsUpdate===!1)continue;s.copy(z.mapSize);const Z=z.getFrameExtents();if(s.multiply(Z),a.copy(z.mapSize),(s.x>h||s.y>h)&&(s.x>h&&(a.x=Math.floor(h/Z.x),s.x=a.x*Z.x,z.mapSize.x=a.x),s.y>h&&(a.y=Math.floor(h/Z.y),s.y=a.y*Z.y,z.mapSize.y=a.y)),z.map===null||U===!0||B===!0){const q=this.type!==Ao?{minFilter:ei,magFilter:ei}:{};z.map!==null&&z.map.dispose(),z.map=new jd(s.x,s.y,q),z.map.texture.name=$.name+".shadowMap",z.camera.updateProjectionMatrix()}r.setRenderTarget(z.map),r.clear();const se=z.getViewportCount();for(let q=0;q<se;q++){const ue=z.getViewport(q);o.set(a.x*ue.x,a.y*ue.y,a.x*ue.z,a.y*ue.w),F.viewport(o),z.updateMatrices($,q),i=z.getFrustum(),T(A,P,z.camera,$,this.type)}z.isPointLightShadow!==!0&&this.type===Ao&&E(z,P),z.needsUpdate=!1}_=this.type,x.needsUpdate=!1,r.setRenderTarget(R,O,D)};function E(C,A){const P=e.update(v);f.defines.VSM_SAMPLES!==C.blurSamples&&(f.defines.VSM_SAMPLES=C.blurSamples,p.defines.VSM_SAMPLES=C.blurSamples,f.needsUpdate=!0,p.needsUpdate=!0),C.mapPass===null&&(C.mapPass=new jd(s.x,s.y)),f.uniforms.shadow_pass.value=C.map.texture,f.uniforms.resolution.value=C.mapSize,f.uniforms.radius.value=C.radius,r.setRenderTarget(C.mapPass),r.clear(),r.renderBufferDirect(A,null,P,f,v,null),p.uniforms.shadow_pass.value=C.mapPass.texture,p.uniforms.resolution.value=C.mapSize,p.uniforms.radius.value=C.radius,r.setRenderTarget(C.map),r.clear(),r.renderBufferDirect(A,null,P,p,v,null)}function S(C,A,P,R){let O=null;const D=P.isPointLight===!0?C.customDistanceMaterial:C.customDepthMaterial;if(D!==void 0)O=D;else if(O=P.isPointLight===!0?c:l,r.localClippingEnabled&&A.clipShadows===!0&&Array.isArray(A.clippingPlanes)&&A.clippingPlanes.length!==0||A.displacementMap&&A.displacementScale!==0||A.alphaMap&&A.alphaTest>0||A.map&&A.alphaTest>0){const F=O.uuid,U=A.uuid;let B=u[F];B===void 0&&(B={},u[F]=B);let W=B[U];W===void 0&&(W=O.clone(),B[U]=W,A.addEventListener("dispose",M)),O=W}if(O.visible=A.visible,O.wireframe=A.wireframe,R===Ao?O.side=A.shadowSide!==null?A.shadowSide:A.side:O.side=A.shadowSide!==null?A.shadowSide:d[A.side],O.alphaMap=A.alphaMap,O.alphaTest=A.alphaTest,O.map=A.map,O.clipShadows=A.clipShadows,O.clippingPlanes=A.clippingPlanes,O.clipIntersection=A.clipIntersection,O.displacementMap=A.displacementMap,O.displacementScale=A.displacementScale,O.displacementBias=A.displacementBias,O.wireframeLinewidth=A.wireframeLinewidth,O.linewidth=A.linewidth,P.isPointLight===!0&&O.isMeshDistanceMaterial===!0){const F=r.properties.get(O);F.light=P}return O}function T(C,A,P,R,O){if(C.visible===!1)return;if(C.layers.test(A.layers)&&(C.isMesh||C.isLine||C.isPoints)&&(C.castShadow||C.receiveShadow&&O===Ao)&&(!C.frustumCulled||i.intersectsObject(C))){C.modelViewMatrix.multiplyMatrices(P.matrixWorldInverse,C.matrixWorld);const U=e.update(C),B=C.material;if(Array.isArray(B)){const W=U.groups;for(let j=0,$=W.length;j<$;j++){const z=W[j],Z=B[z.materialIndex];if(Z&&Z.visible){const se=S(C,Z,R,O);C.onBeforeShadow(r,C,A,P,U,se,z),r.renderBufferDirect(P,null,U,se,C,z),C.onAfterShadow(r,C,A,P,U,se,z)}}}else if(B.visible){const W=S(C,B,R,O);C.onBeforeShadow(r,C,A,P,U,W,null),r.renderBufferDirect(P,null,U,W,C,null),C.onAfterShadow(r,C,A,P,U,W,null)}}const F=C.children;for(let U=0,B=F.length;U<B;U++)T(F[U],A,P,R,O)}function M(C){C.target.removeEventListener("dispose",M);for(const P in u){const R=u[P],O=C.target.uuid;O in R&&(R[O].dispose(),delete R[O])}}}const Qbe={[Kx]:Yx,[Zx]:eb,[Qx]:tb,[Dd]:Jx,[Yx]:Kx,[eb]:Zx,[tb]:Qx,[Jx]:Dd};function Jbe(r,e){function n(){let Me=!1;const Mt=new In;let Ue=null;const Ye=new In(0,0,0,0);return{setMask:function(Pt){Ue!==Pt&&!Me&&(r.colorMask(Pt,Pt,Pt,Pt),Ue=Pt)},setLocked:function(Pt){Me=Pt},setClear:function(Pt,wt,Pn,Rr,vi){vi===!0&&(Pt*=Rr,wt*=Rr,Pn*=Rr),Mt.set(Pt,wt,Pn,Rr),Ye.equals(Mt)===!1&&(r.clearColor(Pt,wt,Pn,Rr),Ye.copy(Mt))},reset:function(){Me=!1,Ue=null,Ye.set(-1,0,0,0)}}}function i(){let Me=!1,Mt=!1,Ue=null,Ye=null,Pt=null;return{setReversed:function(wt){if(Mt!==wt){const Pn=e.get("EXT_clip_control");wt?Pn.clipControlEXT(Pn.LOWER_LEFT_EXT,Pn.ZERO_TO_ONE_EXT):Pn.clipControlEXT(Pn.LOWER_LEFT_EXT,Pn.NEGATIVE_ONE_TO_ONE_EXT),Mt=wt;const Rr=Pt;Pt=null,this.setClear(Rr)}},getReversed:function(){return Mt},setTest:function(wt){wt?fe(r.DEPTH_TEST):Se(r.DEPTH_TEST)},setMask:function(wt){Ue!==wt&&!Me&&(r.depthMask(wt),Ue=wt)},setFunc:function(wt){if(Mt&&(wt=Qbe[wt]),Ye!==wt){switch(wt){case Kx:r.depthFunc(r.NEVER);break;case Yx:r.depthFunc(r.ALWAYS);break;case Zx:r.depthFunc(r.LESS);break;case Dd:r.depthFunc(r.LEQUAL);break;case Qx:r.depthFunc(r.EQUAL);break;case Jx:r.depthFunc(r.GEQUAL);break;case eb:r.depthFunc(r.GREATER);break;case tb:r.depthFunc(r.NOTEQUAL);break;default:r.depthFunc(r.LEQUAL)}Ye=wt}},setLocked:function(wt){Me=wt},setClear:function(wt){Pt!==wt&&(Mt&&(wt=1-wt),r.clearDepth(wt),Pt=wt)},reset:function(){Me=!1,Ue=null,Ye=null,Pt=null,Mt=!1}}}function s(){let Me=!1,Mt=null,Ue=null,Ye=null,Pt=null,wt=null,Pn=null,Rr=null,vi=null;return{setTest:function(Rn){Me||(Rn?fe(r.STENCIL_TEST):Se(r.STENCIL_TEST))},setMask:function(Rn){Mt!==Rn&&!Me&&(r.stencilMask(Rn),Mt=Rn)},setFunc:function(Rn,ss,as){(Ue!==Rn||Ye!==ss||Pt!==as)&&(r.stencilFunc(Rn,ss,as),Ue=Rn,Ye=ss,Pt=as)},setOp:function(Rn,ss,as){(wt!==Rn||Pn!==ss||Rr!==as)&&(r.stencilOp(Rn,ss,as),wt=Rn,Pn=ss,Rr=as)},setLocked:function(Rn){Me=Rn},setClear:function(Rn){vi!==Rn&&(r.clearStencil(Rn),vi=Rn)},reset:function(){Me=!1,Mt=null,Ue=null,Ye=null,Pt=null,wt=null,Pn=null,Rr=null,vi=null}}}const a=new n,o=new i,l=new s,c=new WeakMap,u=new WeakMap;let h={},d={},f=new WeakMap,p=[],g=null,v=!1,x=null,_=null,E=null,S=null,T=null,M=null,C=null,A=new ln(0,0,0),P=0,R=!1,O=null,D=null,F=null,U=null,B=null;const W=r.getParameter(r.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let j=!1,$=0;const z=r.getParameter(r.VERSION);z.indexOf("WebGL")!==-1?($=parseFloat(/^WebGL (\d)/.exec(z)[1]),j=$>=1):z.indexOf("OpenGL ES")!==-1&&($=parseFloat(/^OpenGL ES (\d)/.exec(z)[1]),j=$>=2);let Z=null,se={};const q=r.getParameter(r.SCISSOR_BOX),ue=r.getParameter(r.VIEWPORT),be=new In().fromArray(q),ee=new In().fromArray(ue);function le(Me,Mt,Ue,Ye){const Pt=new Uint8Array(4),wt=r.createTexture();r.bindTexture(Me,wt),r.texParameteri(Me,r.TEXTURE_MIN_FILTER,r.NEAREST),r.texParameteri(Me,r.TEXTURE_MAG_FILTER,r.NEAREST);for(let Pn=0;Pn<Ue;Pn++)Me===r.TEXTURE_3D||Me===r.TEXTURE_2D_ARRAY?r.texImage3D(Mt,0,r.RGBA,1,1,Ye,0,r.RGBA,r.UNSIGNED_BYTE,Pt):r.texImage2D(Mt+Pn,0,r.RGBA,1,1,0,r.RGBA,r.UNSIGNED_BYTE,Pt);return wt}const oe={};oe[r.TEXTURE_2D]=le(r.TEXTURE_2D,r.TEXTURE_2D,1),oe[r.TEXTURE_CUBE_MAP]=le(r.TEXTURE_CUBE_MAP,r.TEXTURE_CUBE_MAP_POSITIVE_X,6),oe[r.TEXTURE_2D_ARRAY]=le(r.TEXTURE_2D_ARRAY,r.TEXTURE_2D_ARRAY,1,1),oe[r.TEXTURE_3D]=le(r.TEXTURE_3D,r.TEXTURE_3D,1,1),a.setClear(0,0,0,1),o.setClear(1),l.setClear(0),fe(r.DEPTH_TEST),o.setFunc(Dd),Wt(!1),Jt(e3),fe(r.CULL_FACE),me(eo);function fe(Me){h[Me]!==!0&&(r.enable(Me),h[Me]=!0)}function Se(Me){h[Me]!==!1&&(r.disable(Me),h[Me]=!1)}function we(Me,Mt){return d[Me]!==Mt?(r.bindFramebuffer(Me,Mt),d[Me]=Mt,Me===r.DRAW_FRAMEBUFFER&&(d[r.FRAMEBUFFER]=Mt),Me===r.FRAMEBUFFER&&(d[r.DRAW_FRAMEBUFFER]=Mt),!0):!1}function Le(Me,Mt){let Ue=p,Ye=!1;if(Me){Ue=f.get(Mt),Ue===void 0&&(Ue=[],f.set(Mt,Ue));const Pt=Me.textures;if(Ue.length!==Pt.length||Ue[0]!==r.COLOR_ATTACHMENT0){for(let wt=0,Pn=Pt.length;wt<Pn;wt++)Ue[wt]=r.COLOR_ATTACHMENT0+wt;Ue.length=Pt.length,Ye=!0}}else Ue[0]!==r.BACK&&(Ue[0]=r.BACK,Ye=!0);Ye&&r.drawBuffers(Ue)}function et(Me){return g!==Me?(r.useProgram(Me),g=Me,!0):!1}const Fe={[ua]:r.FUNC_ADD,[aj]:r.FUNC_SUBTRACT,[oj]:r.FUNC_REVERSE_SUBTRACT};Fe[HJ]=r.MIN,Fe[WJ]=r.MAX;const Tt={[Uu]:r.ZERO,[lj]:r.ONE,[cj]:r.SRC_COLOR,[qx]:r.SRC_ALPHA,[mj]:r.SRC_ALPHA_SATURATE,[fj]:r.DST_COLOR,[hj]:r.DST_ALPHA,[uj]:r.ONE_MINUS_SRC_COLOR,[Xx]:r.ONE_MINUS_SRC_ALPHA,[pj]:r.ONE_MINUS_DST_COLOR,[dj]:r.ONE_MINUS_DST_ALPHA,[Mme]:r.CONSTANT_COLOR,[Ame]:r.ONE_MINUS_CONSTANT_COLOR,[Cme]:r.CONSTANT_ALPHA,[Nme]:r.ONE_MINUS_CONSTANT_ALPHA};function me(Me,Mt,Ue,Ye,Pt,wt,Pn,Rr,vi,Rn){if(Me===eo){v===!0&&(Se(r.BLEND),v=!1);return}if(v===!1&&(fe(r.BLEND),v=!0),Me!==Fg){if(Me!==x||Rn!==R){if((_!==ua||T!==ua)&&(r.blendEquation(r.FUNC_ADD),_=ua,T=ua),Rn)switch(Me){case hl:r.blendFuncSeparate(r.ONE,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA);break;case Zg:r.blendFunc(r.ONE,r.ONE);break;case Qg:r.blendFuncSeparate(r.ZERO,r.ONE_MINUS_SRC_COLOR,r.ZERO,r.ONE);break;case Jg:r.blendFuncSeparate(r.ZERO,r.SRC_COLOR,r.ZERO,r.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",Me);break}else switch(Me){case hl:r.blendFuncSeparate(r.SRC_ALPHA,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA);break;case Zg:r.blendFunc(r.SRC_ALPHA,r.ONE);break;case Qg:r.blendFuncSeparate(r.ZERO,r.ONE_MINUS_SRC_COLOR,r.ZERO,r.ONE);break;case Jg:r.blendFunc(r.ZERO,r.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",Me);break}E=null,S=null,M=null,C=null,A.set(0,0,0),P=0,x=Me,R=Rn}return}Pt=Pt||Mt,wt=wt||Ue,Pn=Pn||Ye,(Mt!==_||Pt!==T)&&(r.blendEquationSeparate(Fe[Mt],Fe[Pt]),_=Mt,T=Pt),(Ue!==E||Ye!==S||wt!==M||Pn!==C)&&(r.blendFuncSeparate(Tt[Ue],Tt[Ye],Tt[wt],Tt[Pn]),E=Ue,S=Ye,M=wt,C=Pn),(Rr.equals(A)===!1||vi!==P)&&(r.blendColor(Rr.r,Rr.g,Rr.b,vi),A.copy(Rr),P=vi),x=Me,R=!1}function En(Me,Mt){Me.side===Ea?Se(r.CULL_FACE):fe(r.CULL_FACE);let Ue=Me.side===Wr;Mt&&(Ue=!Ue),Wt(Ue),Me.blending===hl&&Me.transparent===!1?me(eo):me(Me.blending,Me.blendEquation,Me.blendSrc,Me.blendDst,Me.blendEquationAlpha,Me.blendSrcAlpha,Me.blendDstAlpha,Me.blendColor,Me.blendAlpha,Me.premultipliedAlpha),o.setFunc(Me.depthFunc),o.setTest(Me.depthTest),o.setMask(Me.depthWrite),a.setMask(Me.colorWrite);const Ye=Me.stencilWrite;l.setTest(Ye),Ye&&(l.setMask(Me.stencilWriteMask),l.setFunc(Me.stencilFunc,Me.stencilRef,Me.stencilFuncMask),l.setOp(Me.stencilFail,Me.stencilZFail,Me.stencilZPass)),Yn(Me.polygonOffset,Me.polygonOffsetFactor,Me.polygonOffsetUnits),Me.alphaToCoverage===!0?fe(r.SAMPLE_ALPHA_TO_COVERAGE):Se(r.SAMPLE_ALPHA_TO_COVERAGE)}function Wt(Me){O!==Me&&(Me?r.frontFace(r.CW):r.frontFace(r.CCW),O=Me)}function Jt(Me){Me!==GJ?(fe(r.CULL_FACE),Me!==D&&(Me===e3?r.cullFace(r.BACK):Me===VJ?r.cullFace(r.FRONT):r.cullFace(r.FRONT_AND_BACK))):Se(r.CULL_FACE),D=Me}function zt(Me){Me!==F&&(j&&r.lineWidth(Me),F=Me)}function Yn(Me,Mt,Ue){Me?(fe(r.POLYGON_OFFSET_FILL),(U!==Mt||B!==Ue)&&(r.polygonOffset(Mt,Ue),U=Mt,B=Ue)):Se(r.POLYGON_OFFSET_FILL)}function Ft(Me){Me?fe(r.SCISSOR_TEST):Se(r.SCISSOR_TEST)}function he(Me){Me===void 0&&(Me=r.TEXTURE0+W-1),Z!==Me&&(r.activeTexture(Me),Z=Me)}function Q(Me,Mt,Ue){Ue===void 0&&(Z===null?Ue=r.TEXTURE0+W-1:Ue=Z);let Ye=se[Ue];Ye===void 0&&(Ye={type:void 0,texture:void 0},se[Ue]=Ye),(Ye.type!==Me||Ye.texture!==Mt)&&(Z!==Ue&&(r.activeTexture(Ue),Z=Ue),r.bindTexture(Me,Mt||oe[Me]),Ye.type=Me,Ye.texture=Mt)}function Re(){const Me=se[Z];Me!==void 0&&Me.type!==void 0&&(r.bindTexture(Me.type,null),Me.type=void 0,Me.texture=void 0)}function Ze(){try{r.compressedTexImage2D(...arguments)}catch(Me){console.error("THREE.WebGLState:",Me)}}function Je(){try{r.compressedTexImage3D(...arguments)}catch(Me){console.error("THREE.WebGLState:",Me)}}function Ke(){try{r.texSubImage2D(...arguments)}catch(Me){console.error("THREE.WebGLState:",Me)}}function Kt(){try{r.texSubImage3D(...arguments)}catch(Me){console.error("THREE.WebGLState:",Me)}}function Et(){try{r.compressedTexSubImage2D(...arguments)}catch(Me){console.error("THREE.WebGLState:",Me)}}function Dt(){try{r.compressedTexSubImage3D(...arguments)}catch(Me){console.error("THREE.WebGLState:",Me)}}function Vn(){try{r.texStorage2D(...arguments)}catch(Me){console.error("THREE.WebGLState:",Me)}}function at(){try{r.texStorage3D(...arguments)}catch(Me){console.error("THREE.WebGLState:",Me)}}function $t(){try{r.texImage2D(...arguments)}catch(Me){console.error("THREE.WebGLState:",Me)}}function fn(){try{r.texImage3D(...arguments)}catch(Me){console.error("THREE.WebGLState:",Me)}}function vn(Me){be.equals(Me)===!1&&(r.scissor(Me.x,Me.y,Me.z,Me.w),be.copy(Me))}function Bt(Me){ee.equals(Me)===!1&&(r.viewport(Me.x,Me.y,Me.z,Me.w),ee.copy(Me))}function Hn(Me,Mt){let Ue=u.get(Mt);Ue===void 0&&(Ue=new WeakMap,u.set(Mt,Ue));let Ye=Ue.get(Me);Ye===void 0&&(Ye=r.getUniformBlockIndex(Mt,Me.name),Ue.set(Me,Ye))}function Nn(Me,Mt){const Ye=u.get(Mt).get(Me);c.get(Mt)!==Ye&&(r.uniformBlockBinding(Mt,Ye,Me.__bindingPointIndex),c.set(Mt,Ye))}function hr(){r.disable(r.BLEND),r.disable(r.CULL_FACE),r.disable(r.DEPTH_TEST),r.disable(r.POLYGON_OFFSET_FILL),r.disable(r.SCISSOR_TEST),r.disable(r.STENCIL_TEST),r.disable(r.SAMPLE_ALPHA_TO_COVERAGE),r.blendEquation(r.FUNC_ADD),r.blendFunc(r.ONE,r.ZERO),r.blendFuncSeparate(r.ONE,r.ZERO,r.ONE,r.ZERO),r.blendColor(0,0,0,0),r.colorMask(!0,!0,!0,!0),r.clearColor(0,0,0,0),r.depthMask(!0),r.depthFunc(r.LESS),o.setReversed(!1),r.clearDepth(1),r.stencilMask(4294967295),r.stencilFunc(r.ALWAYS,0,4294967295),r.stencilOp(r.KEEP,r.KEEP,r.KEEP),r.clearStencil(0),r.cullFace(r.BACK),r.frontFace(r.CCW),r.polygonOffset(0,0),r.activeTexture(r.TEXTURE0),r.bindFramebuffer(r.FRAMEBUFFER,null),r.bindFramebuffer(r.DRAW_FRAMEBUFFER,null),r.bindFramebuffer(r.READ_FRAMEBUFFER,null),r.useProgram(null),r.lineWidth(1),r.scissor(0,0,r.canvas.width,r.canvas.height),r.viewport(0,0,r.canvas.width,r.canvas.height),h={},Z=null,se={},d={},f=new WeakMap,p=[],g=null,v=!1,x=null,_=null,E=null,S=null,T=null,M=null,C=null,A=new ln(0,0,0),P=0,R=!1,O=null,D=null,F=null,U=null,B=null,be.set(0,0,r.canvas.width,r.canvas.height),ee.set(0,0,r.canvas.width,r.canvas.height),a.reset(),o.reset(),l.reset()}return{buffers:{color:a,depth:o,stencil:l},enable:fe,disable:Se,bindFramebuffer:we,drawBuffers:Le,useProgram:et,setBlending:me,setMaterial:En,setFlipSided:Wt,setCullFace:Jt,setLineWidth:zt,setPolygonOffset:Yn,setScissorTest:Ft,activeTexture:he,bindTexture:Q,unbindTexture:Re,compressedTexImage2D:Ze,compressedTexImage3D:Je,texImage2D:$t,texImage3D:fn,updateUBOMapping:Hn,uniformBlockBinding:Nn,texStorage2D:Vn,texStorage3D:at,texSubImage2D:Ke,texSubImage3D:Kt,compressedTexSubImage2D:Et,compressedTexSubImage3D:Dt,scissor:vn,viewport:Bt,reset:hr}}function e_e(r,e,n,i,s,a,o){const l=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,c=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),u=new dt,h=new WeakMap;let d;const f=new WeakMap;let p=!1;try{p=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function g(he,Q){return p?new OffscreenCanvas(he,Q):ub("canvas")}function v(he,Q,Re){let Ze=1;const Je=Ft(he);if((Je.width>Re||Je.height>Re)&&(Ze=Re/Math.max(Je.width,Je.height)),Ze<1)if(typeof HTMLImageElement<"u"&&he instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&he instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&he instanceof ImageBitmap||typeof VideoFrame<"u"&&he instanceof VideoFrame){const Ke=Math.floor(Ze*Je.width),Kt=Math.floor(Ze*Je.height);d===void 0&&(d=g(Ke,Kt));const Et=Q?g(Ke,Kt):d;return Et.width=Ke,Et.height=Kt,Et.getContext("2d").drawImage(he,0,0,Ke,Kt),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Je.width+"x"+Je.height+") to ("+Ke+"x"+Kt+")."),Et}else return"data"in he&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Je.width+"x"+Je.height+")."),he;return he}function x(he){return he.generateMipmaps}function _(he){r.generateMipmap(he)}function E(he){return he.isWebGLCubeRenderTarget?r.TEXTURE_CUBE_MAP:he.isWebGL3DRenderTarget?r.TEXTURE_3D:he.isWebGLArrayRenderTarget||he.isCompressedArrayTexture?r.TEXTURE_2D_ARRAY:r.TEXTURE_2D}function S(he,Q,Re,Ze,Je=!1){if(he!==null){if(r[he]!==void 0)return r[he];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+he+"'")}let Ke=Q;if(Q===r.RED&&(Re===r.FLOAT&&(Ke=r.R32F),Re===r.HALF_FLOAT&&(Ke=r.R16F),Re===r.UNSIGNED_BYTE&&(Ke=r.R8)),Q===r.RED_INTEGER&&(Re===r.UNSIGNED_BYTE&&(Ke=r.R8UI),Re===r.UNSIGNED_SHORT&&(Ke=r.R16UI),Re===r.UNSIGNED_INT&&(Ke=r.R32UI),Re===r.BYTE&&(Ke=r.R8I),Re===r.SHORT&&(Ke=r.R16I),Re===r.INT&&(Ke=r.R32I)),Q===r.RG&&(Re===r.FLOAT&&(Ke=r.RG32F),Re===r.HALF_FLOAT&&(Ke=r.RG16F),Re===r.UNSIGNED_BYTE&&(Ke=r.RG8)),Q===r.RG_INTEGER&&(Re===r.UNSIGNED_BYTE&&(Ke=r.RG8UI),Re===r.UNSIGNED_SHORT&&(Ke=r.RG16UI),Re===r.UNSIGNED_INT&&(Ke=r.RG32UI),Re===r.BYTE&&(Ke=r.RG8I),Re===r.SHORT&&(Ke=r.RG16I),Re===r.INT&&(Ke=r.RG32I)),Q===r.RGB_INTEGER&&(Re===r.UNSIGNED_BYTE&&(Ke=r.RGB8UI),Re===r.UNSIGNED_SHORT&&(Ke=r.RGB16UI),Re===r.UNSIGNED_INT&&(Ke=r.RGB32UI),Re===r.BYTE&&(Ke=r.RGB8I),Re===r.SHORT&&(Ke=r.RGB16I),Re===r.INT&&(Ke=r.RGB32I)),Q===r.RGBA_INTEGER&&(Re===r.UNSIGNED_BYTE&&(Ke=r.RGBA8UI),Re===r.UNSIGNED_SHORT&&(Ke=r.RGBA16UI),Re===r.UNSIGNED_INT&&(Ke=r.RGBA32UI),Re===r.BYTE&&(Ke=r.RGBA8I),Re===r.SHORT&&(Ke=r.RGBA16I),Re===r.INT&&(Ke=r.RGBA32I)),Q===r.RGB&&Re===r.UNSIGNED_INT_5_9_9_9_REV&&(Ke=r.RGB9_E5),Q===r.RGBA){const Kt=Je?LT:tr.getTransfer(Ze);Re===r.FLOAT&&(Ke=r.RGBA32F),Re===r.HALF_FLOAT&&(Ke=r.RGBA16F),Re===r.UNSIGNED_BYTE&&(Ke=Kt===Ir?r.SRGB8_ALPHA8:r.RGBA8),Re===r.UNSIGNED_SHORT_4_4_4_4&&(Ke=r.RGBA4),Re===r.UNSIGNED_SHORT_5_5_5_1&&(Ke=r.RGB5_A1)}return(Ke===r.R16F||Ke===r.R32F||Ke===r.RG16F||Ke===r.RG32F||Ke===r.RGBA16F||Ke===r.RGBA32F)&&e.get("EXT_color_buffer_float"),Ke}function T(he,Q){let Re;return he?Q===null||Q===Vr||Q===ko?Re=r.DEPTH24_STENCIL8:Q===zi?Re=r.DEPTH32F_STENCIL8:Q===tc&&(Re=r.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):Q===null||Q===Vr||Q===ko?Re=r.DEPTH_COMPONENT24:Q===zi?Re=r.DEPTH_COMPONENT32F:Q===tc&&(Re=r.DEPTH_COMPONENT16),Re}function M(he,Q){return x(he)===!0||he.isFramebufferTexture&&he.minFilter!==ei&&he.minFilter!==ds?Math.log2(Math.max(Q.width,Q.height))+1:he.mipmaps!==void 0&&he.mipmaps.length>0?he.mipmaps.length:he.isCompressedTexture&&Array.isArray(he.image)?Q.mipmaps.length:1}function C(he){const Q=he.target;Q.removeEventListener("dispose",C),P(Q),Q.isVideoTexture&&h.delete(Q)}function A(he){const Q=he.target;Q.removeEventListener("dispose",A),O(Q)}function P(he){const Q=i.get(he);if(Q.__webglInit===void 0)return;const Re=he.source,Ze=f.get(Re);if(Ze){const Je=Ze[Q.__cacheKey];Je.usedTimes--,Je.usedTimes===0&&R(he),Object.keys(Ze).length===0&&f.delete(Re)}i.remove(he)}function R(he){const Q=i.get(he);r.deleteTexture(Q.__webglTexture);const Re=he.source,Ze=f.get(Re);delete Ze[Q.__cacheKey],o.memory.textures--}function O(he){const Q=i.get(he);if(he.depthTexture&&(he.depthTexture.dispose(),i.remove(he.depthTexture)),he.isWebGLCubeRenderTarget)for(let Ze=0;Ze<6;Ze++){if(Array.isArray(Q.__webglFramebuffer[Ze]))for(let Je=0;Je<Q.__webglFramebuffer[Ze].length;Je++)r.deleteFramebuffer(Q.__webglFramebuffer[Ze][Je]);else r.deleteFramebuffer(Q.__webglFramebuffer[Ze]);Q.__webglDepthbuffer&&r.deleteRenderbuffer(Q.__webglDepthbuffer[Ze])}else{if(Array.isArray(Q.__webglFramebuffer))for(let Ze=0;Ze<Q.__webglFramebuffer.length;Ze++)r.deleteFramebuffer(Q.__webglFramebuffer[Ze]);else r.deleteFramebuffer(Q.__webglFramebuffer);if(Q.__webglDepthbuffer&&r.deleteRenderbuffer(Q.__webglDepthbuffer),Q.__webglMultisampledFramebuffer&&r.deleteFramebuffer(Q.__webglMultisampledFramebuffer),Q.__webglColorRenderbuffer)for(let Ze=0;Ze<Q.__webglColorRenderbuffer.length;Ze++)Q.__webglColorRenderbuffer[Ze]&&r.deleteRenderbuffer(Q.__webglColorRenderbuffer[Ze]);Q.__webglDepthRenderbuffer&&r.deleteRenderbuffer(Q.__webglDepthRenderbuffer)}const Re=he.textures;for(let Ze=0,Je=Re.length;Ze<Je;Ze++){const Ke=i.get(Re[Ze]);Ke.__webglTexture&&(r.deleteTexture(Ke.__webglTexture),o.memory.textures--),i.remove(Re[Ze])}i.remove(he)}let D=0;function F(){D=0}function U(){const he=D;return he>=s.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+he+" texture units while this GPU supports only "+s.maxTextures),D+=1,he}function B(he){const Q=[];return Q.push(he.wrapS),Q.push(he.wrapT),Q.push(he.wrapR||0),Q.push(he.magFilter),Q.push(he.minFilter),Q.push(he.anisotropy),Q.push(he.internalFormat),Q.push(he.format),Q.push(he.type),Q.push(he.generateMipmaps),Q.push(he.premultiplyAlpha),Q.push(he.flipY),Q.push(he.unpackAlignment),Q.push(he.colorSpace),Q.join()}function W(he,Q){const Re=i.get(he);if(he.isVideoTexture&&zt(he),he.isRenderTargetTexture===!1&&he.version>0&&Re.__version!==he.version){const Ze=he.image;if(Ze===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Ze.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{ee(Re,he,Q);return}}n.bindTexture(r.TEXTURE_2D,Re.__webglTexture,r.TEXTURE0+Q)}function j(he,Q){const Re=i.get(he);if(he.version>0&&Re.__version!==he.version){ee(Re,he,Q);return}n.bindTexture(r.TEXTURE_2D_ARRAY,Re.__webglTexture,r.TEXTURE0+Q)}function $(he,Q){const Re=i.get(he);if(he.version>0&&Re.__version!==he.version){ee(Re,he,Q);return}n.bindTexture(r.TEXTURE_3D,Re.__webglTexture,r.TEXTURE0+Q)}function z(he,Q){const Re=i.get(he);if(he.version>0&&Re.__version!==he.version){le(Re,he,Q);return}n.bindTexture(r.TEXTURE_CUBE_MAP,Re.__webglTexture,r.TEXTURE0+Q)}const Z={[_p]:r.REPEAT,[Nc]:r.CLAMP_TO_EDGE,[wp]:r.MIRRORED_REPEAT},se={[ei]:r.NEAREST,[yj]:r.NEAREST_MIPMAP_NEAREST,[qu]:r.NEAREST_MIPMAP_LINEAR,[ds]:r.LINEAR,[Bg]:r.LINEAR_MIPMAP_NEAREST,[Xa]:r.LINEAR_MIPMAP_LINEAR},q={[wj]:r.NEVER,[Aj]:r.ALWAYS,[SM]:r.LESS,[TM]:r.LEQUAL,[Sj]:r.EQUAL,[Mj]:r.GEQUAL,[Tj]:r.GREATER,[Ej]:r.NOTEQUAL};function ue(he,Q){if(Q.type===zi&&e.has("OES_texture_float_linear")===!1&&(Q.magFilter===ds||Q.magFilter===Bg||Q.magFilter===qu||Q.magFilter===Xa||Q.minFilter===ds||Q.minFilter===Bg||Q.minFilter===qu||Q.minFilter===Xa)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),r.texParameteri(he,r.TEXTURE_WRAP_S,Z[Q.wrapS]),r.texParameteri(he,r.TEXTURE_WRAP_T,Z[Q.wrapT]),(he===r.TEXTURE_3D||he===r.TEXTURE_2D_ARRAY)&&r.texParameteri(he,r.TEXTURE_WRAP_R,Z[Q.wrapR]),r.texParameteri(he,r.TEXTURE_MAG_FILTER,se[Q.magFilter]),r.texParameteri(he,r.TEXTURE_MIN_FILTER,se[Q.minFilter]),Q.compareFunction&&(r.texParameteri(he,r.TEXTURE_COMPARE_MODE,r.COMPARE_REF_TO_TEXTURE),r.texParameteri(he,r.TEXTURE_COMPARE_FUNC,q[Q.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(Q.magFilter===ei||Q.minFilter!==qu&&Q.minFilter!==Xa||Q.type===zi&&e.has("OES_texture_float_linear")===!1)return;if(Q.anisotropy>1||i.get(Q).__currentAnisotropy){const Re=e.get("EXT_texture_filter_anisotropic");r.texParameterf(he,Re.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(Q.anisotropy,s.getMaxAnisotropy())),i.get(Q).__currentAnisotropy=Q.anisotropy}}}function be(he,Q){let Re=!1;he.__webglInit===void 0&&(he.__webglInit=!0,Q.addEventListener("dispose",C));const Ze=Q.source;let Je=f.get(Ze);Je===void 0&&(Je={},f.set(Ze,Je));const Ke=B(Q);if(Ke!==he.__cacheKey){Je[Ke]===void 0&&(Je[Ke]={texture:r.createTexture(),usedTimes:0},o.memory.textures++,Re=!0),Je[Ke].usedTimes++;const Kt=Je[he.__cacheKey];Kt!==void 0&&(Je[he.__cacheKey].usedTimes--,Kt.usedTimes===0&&R(Q)),he.__cacheKey=Ke,he.__webglTexture=Je[Ke].texture}return Re}function ee(he,Q,Re){let Ze=r.TEXTURE_2D;(Q.isDataArrayTexture||Q.isCompressedArrayTexture)&&(Ze=r.TEXTURE_2D_ARRAY),Q.isData3DTexture&&(Ze=r.TEXTURE_3D);const Je=be(he,Q),Ke=Q.source;n.bindTexture(Ze,he.__webglTexture,r.TEXTURE0+Re);const Kt=i.get(Ke);if(Ke.version!==Kt.__version||Je===!0){n.activeTexture(r.TEXTURE0+Re);const Et=tr.getPrimaries(tr.workingColorSpace),Dt=Q.colorSpace===Po?null:tr.getPrimaries(Q.colorSpace),Vn=Q.colorSpace===Po||Et===Dt?r.NONE:r.BROWSER_DEFAULT_WEBGL;r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,Q.flipY),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Q.premultiplyAlpha),r.pixelStorei(r.UNPACK_ALIGNMENT,Q.unpackAlignment),r.pixelStorei(r.UNPACK_COLORSPACE_CONVERSION_WEBGL,Vn);let at=v(Q.image,!1,s.maxTextureSize);at=Yn(Q,at);const $t=a.convert(Q.format,Q.colorSpace),fn=a.convert(Q.type);let vn=S(Q.internalFormat,$t,fn,Q.colorSpace,Q.isVideoTexture);ue(Ze,Q);let Bt;const Hn=Q.mipmaps,Nn=Q.isVideoTexture!==!0,hr=Kt.__version===void 0||Je===!0,Me=Ke.dataReady,Mt=M(Q,at);if(Q.isDepthTexture)vn=T(Q.format===Do,Q.type),hr&&(Nn?n.texStorage2D(r.TEXTURE_2D,1,vn,at.width,at.height):n.texImage2D(r.TEXTURE_2D,0,vn,at.width,at.height,0,$t,fn,null));else if(Q.isDataTexture)if(Hn.length>0){Nn&&hr&&n.texStorage2D(r.TEXTURE_2D,Mt,vn,Hn[0].width,Hn[0].height);for(let Ue=0,Ye=Hn.length;Ue<Ye;Ue++)Bt=Hn[Ue],Nn?Me&&n.texSubImage2D(r.TEXTURE_2D,Ue,0,0,Bt.width,Bt.height,$t,fn,Bt.data):n.texImage2D(r.TEXTURE_2D,Ue,vn,Bt.width,Bt.height,0,$t,fn,Bt.data);Q.generateMipmaps=!1}else Nn?(hr&&n.texStorage2D(r.TEXTURE_2D,Mt,vn,at.width,at.height),Me&&n.texSubImage2D(r.TEXTURE_2D,0,0,0,at.width,at.height,$t,fn,at.data)):n.texImage2D(r.TEXTURE_2D,0,vn,at.width,at.height,0,$t,fn,at.data);else if(Q.isCompressedTexture)if(Q.isCompressedArrayTexture){Nn&&hr&&n.texStorage3D(r.TEXTURE_2D_ARRAY,Mt,vn,Hn[0].width,Hn[0].height,at.depth);for(let Ue=0,Ye=Hn.length;Ue<Ye;Ue++)if(Bt=Hn[Ue],Q.format!==Oi)if($t!==null)if(Nn){if(Me)if(Q.layerUpdates.size>0){const Pt=OG(Bt.width,Bt.height,Q.format,Q.type);for(const wt of Q.layerUpdates){const Pn=Bt.data.subarray(wt*Pt/Bt.data.BYTES_PER_ELEMENT,(wt+1)*Pt/Bt.data.BYTES_PER_ELEMENT);n.compressedTexSubImage3D(r.TEXTURE_2D_ARRAY,Ue,0,0,wt,Bt.width,Bt.height,1,$t,Pn)}Q.clearLayerUpdates()}else n.compressedTexSubImage3D(r.TEXTURE_2D_ARRAY,Ue,0,0,0,Bt.width,Bt.height,at.depth,$t,Bt.data)}else n.compressedTexImage3D(r.TEXTURE_2D_ARRAY,Ue,vn,Bt.width,Bt.height,at.depth,0,Bt.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else Nn?Me&&n.texSubImage3D(r.TEXTURE_2D_ARRAY,Ue,0,0,0,Bt.width,Bt.height,at.depth,$t,fn,Bt.data):n.texImage3D(r.TEXTURE_2D_ARRAY,Ue,vn,Bt.width,Bt.height,at.depth,0,$t,fn,Bt.data)}else{Nn&&hr&&n.texStorage2D(r.TEXTURE_2D,Mt,vn,Hn[0].width,Hn[0].height);for(let Ue=0,Ye=Hn.length;Ue<Ye;Ue++)Bt=Hn[Ue],Q.format!==Oi?$t!==null?Nn?Me&&n.compressedTexSubImage2D(r.TEXTURE_2D,Ue,0,0,Bt.width,Bt.height,$t,Bt.data):n.compressedTexImage2D(r.TEXTURE_2D,Ue,vn,Bt.width,Bt.height,0,Bt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Nn?Me&&n.texSubImage2D(r.TEXTURE_2D,Ue,0,0,Bt.width,Bt.height,$t,fn,Bt.data):n.texImage2D(r.TEXTURE_2D,Ue,vn,Bt.width,Bt.height,0,$t,fn,Bt.data)}else if(Q.isDataArrayTexture)if(Nn){if(hr&&n.texStorage3D(r.TEXTURE_2D_ARRAY,Mt,vn,at.width,at.height,at.depth),Me)if(Q.layerUpdates.size>0){const Ue=OG(at.width,at.height,Q.format,Q.type);for(const Ye of Q.layerUpdates){const Pt=at.data.subarray(Ye*Ue/at.data.BYTES_PER_ELEMENT,(Ye+1)*Ue/at.data.BYTES_PER_ELEMENT);n.texSubImage3D(r.TEXTURE_2D_ARRAY,0,0,0,Ye,at.width,at.height,1,$t,fn,Pt)}Q.clearLayerUpdates()}else n.texSubImage3D(r.TEXTURE_2D_ARRAY,0,0,0,0,at.width,at.height,at.depth,$t,fn,at.data)}else n.texImage3D(r.TEXTURE_2D_ARRAY,0,vn,at.width,at.height,at.depth,0,$t,fn,at.data);else if(Q.isData3DTexture)Nn?(hr&&n.texStorage3D(r.TEXTURE_3D,Mt,vn,at.width,at.height,at.depth),Me&&n.texSubImage3D(r.TEXTURE_3D,0,0,0,0,at.width,at.height,at.depth,$t,fn,at.data)):n.texImage3D(r.TEXTURE_3D,0,vn,at.width,at.height,at.depth,0,$t,fn,at.data);else if(Q.isFramebufferTexture){if(hr)if(Nn)n.texStorage2D(r.TEXTURE_2D,Mt,vn,at.width,at.height);else{let Ue=at.width,Ye=at.height;for(let Pt=0;Pt<Mt;Pt++)n.texImage2D(r.TEXTURE_2D,Pt,vn,Ue,Ye,0,$t,fn,null),Ue>>=1,Ye>>=1}}else if(Hn.length>0){if(Nn&&hr){const Ue=Ft(Hn[0]);n.texStorage2D(r.TEXTURE_2D,Mt,vn,Ue.width,Ue.height)}for(let Ue=0,Ye=Hn.length;Ue<Ye;Ue++)Bt=Hn[Ue],Nn?Me&&n.texSubImage2D(r.TEXTURE_2D,Ue,0,0,$t,fn,Bt):n.texImage2D(r.TEXTURE_2D,Ue,vn,$t,fn,Bt);Q.generateMipmaps=!1}else if(Nn){if(hr){const Ue=Ft(at);n.texStorage2D(r.TEXTURE_2D,Mt,vn,Ue.width,Ue.height)}Me&&n.texSubImage2D(r.TEXTURE_2D,0,0,0,$t,fn,at)}else n.texImage2D(r.TEXTURE_2D,0,vn,$t,fn,at);x(Q)&&_(Ze),Kt.__version=Ke.version,Q.onUpdate&&Q.onUpdate(Q)}he.__version=Q.version}function le(he,Q,Re){if(Q.image.length!==6)return;const Ze=be(he,Q),Je=Q.source;n.bindTexture(r.TEXTURE_CUBE_MAP,he.__webglTexture,r.TEXTURE0+Re);const Ke=i.get(Je);if(Je.version!==Ke.__version||Ze===!0){n.activeTexture(r.TEXTURE0+Re);const Kt=tr.getPrimaries(tr.workingColorSpace),Et=Q.colorSpace===Po?null:tr.getPrimaries(Q.colorSpace),Dt=Q.colorSpace===Po||Kt===Et?r.NONE:r.BROWSER_DEFAULT_WEBGL;r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,Q.flipY),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Q.premultiplyAlpha),r.pixelStorei(r.UNPACK_ALIGNMENT,Q.unpackAlignment),r.pixelStorei(r.UNPACK_COLORSPACE_CONVERSION_WEBGL,Dt);const Vn=Q.isCompressedTexture||Q.image[0].isCompressedTexture,at=Q.image[0]&&Q.image[0].isDataTexture,$t=[];for(let Ye=0;Ye<6;Ye++)!Vn&&!at?$t[Ye]=v(Q.image[Ye],!0,s.maxCubemapSize):$t[Ye]=at?Q.image[Ye].image:Q.image[Ye],$t[Ye]=Yn(Q,$t[Ye]);const fn=$t[0],vn=a.convert(Q.format,Q.colorSpace),Bt=a.convert(Q.type),Hn=S(Q.internalFormat,vn,Bt,Q.colorSpace),Nn=Q.isVideoTexture!==!0,hr=Ke.__version===void 0||Ze===!0,Me=Je.dataReady;let Mt=M(Q,fn);ue(r.TEXTURE_CUBE_MAP,Q);let Ue;if(Vn){Nn&&hr&&n.texStorage2D(r.TEXTURE_CUBE_MAP,Mt,Hn,fn.width,fn.height);for(let Ye=0;Ye<6;Ye++){Ue=$t[Ye].mipmaps;for(let Pt=0;Pt<Ue.length;Pt++){const wt=Ue[Pt];Q.format!==Oi?vn!==null?Nn?Me&&n.compressedTexSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Ye,Pt,0,0,wt.width,wt.height,vn,wt.data):n.compressedTexImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Ye,Pt,Hn,wt.width,wt.height,0,wt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Nn?Me&&n.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Ye,Pt,0,0,wt.width,wt.height,vn,Bt,wt.data):n.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Ye,Pt,Hn,wt.width,wt.height,0,vn,Bt,wt.data)}}}else{if(Ue=Q.mipmaps,Nn&&hr){Ue.length>0&&Mt++;const Ye=Ft($t[0]);n.texStorage2D(r.TEXTURE_CUBE_MAP,Mt,Hn,Ye.width,Ye.height)}for(let Ye=0;Ye<6;Ye++)if(at){Nn?Me&&n.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Ye,0,0,0,$t[Ye].width,$t[Ye].height,vn,Bt,$t[Ye].data):n.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Ye,0,Hn,$t[Ye].width,$t[Ye].height,0,vn,Bt,$t[Ye].data);for(let Pt=0;Pt<Ue.length;Pt++){const Pn=Ue[Pt].image[Ye].image;Nn?Me&&n.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Ye,Pt+1,0,0,Pn.width,Pn.height,vn,Bt,Pn.data):n.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Ye,Pt+1,Hn,Pn.width,Pn.height,0,vn,Bt,Pn.data)}}else{Nn?Me&&n.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Ye,0,0,0,vn,Bt,$t[Ye]):n.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Ye,0,Hn,vn,Bt,$t[Ye]);for(let Pt=0;Pt<Ue.length;Pt++){const wt=Ue[Pt];Nn?Me&&n.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Ye,Pt+1,0,0,vn,Bt,wt.image[Ye]):n.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Ye,Pt+1,Hn,vn,Bt,wt.image[Ye])}}}x(Q)&&_(r.TEXTURE_CUBE_MAP),Ke.__version=Je.version,Q.onUpdate&&Q.onUpdate(Q)}he.__version=Q.version}function oe(he,Q,Re,Ze,Je,Ke){const Kt=a.convert(Re.format,Re.colorSpace),Et=a.convert(Re.type),Dt=S(Re.internalFormat,Kt,Et,Re.colorSpace),Vn=i.get(Q),at=i.get(Re);if(at.__renderTarget=Q,!Vn.__hasExternalTextures){const $t=Math.max(1,Q.width>>Ke),fn=Math.max(1,Q.height>>Ke);Je===r.TEXTURE_3D||Je===r.TEXTURE_2D_ARRAY?n.texImage3D(Je,Ke,Dt,$t,fn,Q.depth,0,Kt,Et,null):n.texImage2D(Je,Ke,Dt,$t,fn,0,Kt,Et,null)}n.bindFramebuffer(r.FRAMEBUFFER,he),Jt(Q)?l.framebufferTexture2DMultisampleEXT(r.FRAMEBUFFER,Ze,Je,at.__webglTexture,0,Wt(Q)):(Je===r.TEXTURE_2D||Je>=r.TEXTURE_CUBE_MAP_POSITIVE_X&&Je<=r.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&r.framebufferTexture2D(r.FRAMEBUFFER,Ze,Je,at.__webglTexture,Ke),n.bindFramebuffer(r.FRAMEBUFFER,null)}function fe(he,Q,Re){if(r.bindRenderbuffer(r.RENDERBUFFER,he),Q.depthBuffer){const Ze=Q.depthTexture,Je=Ze&&Ze.isDepthTexture?Ze.type:null,Ke=T(Q.stencilBuffer,Je),Kt=Q.stencilBuffer?r.DEPTH_STENCIL_ATTACHMENT:r.DEPTH_ATTACHMENT,Et=Wt(Q);Jt(Q)?l.renderbufferStorageMultisampleEXT(r.RENDERBUFFER,Et,Ke,Q.width,Q.height):Re?r.renderbufferStorageMultisample(r.RENDERBUFFER,Et,Ke,Q.width,Q.height):r.renderbufferStorage(r.RENDERBUFFER,Ke,Q.width,Q.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,Kt,r.RENDERBUFFER,he)}else{const Ze=Q.textures;for(let Je=0;Je<Ze.length;Je++){const Ke=Ze[Je],Kt=a.convert(Ke.format,Ke.colorSpace),Et=a.convert(Ke.type),Dt=S(Ke.internalFormat,Kt,Et,Ke.colorSpace),Vn=Wt(Q);Re&&Jt(Q)===!1?r.renderbufferStorageMultisample(r.RENDERBUFFER,Vn,Dt,Q.width,Q.height):Jt(Q)?l.renderbufferStorageMultisampleEXT(r.RENDERBUFFER,Vn,Dt,Q.width,Q.height):r.renderbufferStorage(r.RENDERBUFFER,Dt,Q.width,Q.height)}}r.bindRenderbuffer(r.RENDERBUFFER,null)}function Se(he,Q){if(Q&&Q.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(r.FRAMEBUFFER,he),!(Q.depthTexture&&Q.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const Ze=i.get(Q.depthTexture);Ze.__renderTarget=Q,(!Ze.__webglTexture||Q.depthTexture.image.width!==Q.width||Q.depthTexture.image.height!==Q.height)&&(Q.depthTexture.image.width=Q.width,Q.depthTexture.image.height=Q.height,Q.depthTexture.needsUpdate=!0),W(Q.depthTexture,0);const Je=Ze.__webglTexture,Ke=Wt(Q);if(Q.depthTexture.format===Io)Jt(Q)?l.framebufferTexture2DMultisampleEXT(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.TEXTURE_2D,Je,0,Ke):r.framebufferTexture2D(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.TEXTURE_2D,Je,0);else if(Q.depthTexture.format===Do)Jt(Q)?l.framebufferTexture2DMultisampleEXT(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.TEXTURE_2D,Je,0,Ke):r.framebufferTexture2D(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.TEXTURE_2D,Je,0);else throw new Error("Unknown depthTexture format")}function we(he){const Q=i.get(he),Re=he.isWebGLCubeRenderTarget===!0;if(Q.__boundDepthTexture!==he.depthTexture){const Ze=he.depthTexture;if(Q.__depthDisposeCallback&&Q.__depthDisposeCallback(),Ze){const Je=()=>{delete Q.__boundDepthTexture,delete Q.__depthDisposeCallback,Ze.removeEventListener("dispose",Je)};Ze.addEventListener("dispose",Je),Q.__depthDisposeCallback=Je}Q.__boundDepthTexture=Ze}if(he.depthTexture&&!Q.__autoAllocateDepthBuffer){if(Re)throw new Error("target.depthTexture not supported in Cube render targets");Se(Q.__webglFramebuffer,he)}else if(Re){Q.__webglDepthbuffer=[];for(let Ze=0;Ze<6;Ze++)if(n.bindFramebuffer(r.FRAMEBUFFER,Q.__webglFramebuffer[Ze]),Q.__webglDepthbuffer[Ze]===void 0)Q.__webglDepthbuffer[Ze]=r.createRenderbuffer(),fe(Q.__webglDepthbuffer[Ze],he,!1);else{const Je=he.stencilBuffer?r.DEPTH_STENCIL_ATTACHMENT:r.DEPTH_ATTACHMENT,Ke=Q.__webglDepthbuffer[Ze];r.bindRenderbuffer(r.RENDERBUFFER,Ke),r.framebufferRenderbuffer(r.FRAMEBUFFER,Je,r.RENDERBUFFER,Ke)}}else if(n.bindFramebuffer(r.FRAMEBUFFER,Q.__webglFramebuffer),Q.__webglDepthbuffer===void 0)Q.__webglDepthbuffer=r.createRenderbuffer(),fe(Q.__webglDepthbuffer,he,!1);else{const Ze=he.stencilBuffer?r.DEPTH_STENCIL_ATTACHMENT:r.DEPTH_ATTACHMENT,Je=Q.__webglDepthbuffer;r.bindRenderbuffer(r.RENDERBUFFER,Je),r.framebufferRenderbuffer(r.FRAMEBUFFER,Ze,r.RENDERBUFFER,Je)}n.bindFramebuffer(r.FRAMEBUFFER,null)}function Le(he,Q,Re){const Ze=i.get(he);Q!==void 0&&oe(Ze.__webglFramebuffer,he,he.texture,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,0),Re!==void 0&&we(he)}function et(he){const Q=he.texture,Re=i.get(he),Ze=i.get(Q);he.addEventListener("dispose",A);const Je=he.textures,Ke=he.isWebGLCubeRenderTarget===!0,Kt=Je.length>1;if(Kt||(Ze.__webglTexture===void 0&&(Ze.__webglTexture=r.createTexture()),Ze.__version=Q.version,o.memory.textures++),Ke){Re.__webglFramebuffer=[];for(let Et=0;Et<6;Et++)if(Q.mipmaps&&Q.mipmaps.length>0){Re.__webglFramebuffer[Et]=[];for(let Dt=0;Dt<Q.mipmaps.length;Dt++)Re.__webglFramebuffer[Et][Dt]=r.createFramebuffer()}else Re.__webglFramebuffer[Et]=r.createFramebuffer()}else{if(Q.mipmaps&&Q.mipmaps.length>0){Re.__webglFramebuffer=[];for(let Et=0;Et<Q.mipmaps.length;Et++)Re.__webglFramebuffer[Et]=r.createFramebuffer()}else Re.__webglFramebuffer=r.createFramebuffer();if(Kt)for(let Et=0,Dt=Je.length;Et<Dt;Et++){const Vn=i.get(Je[Et]);Vn.__webglTexture===void 0&&(Vn.__webglTexture=r.createTexture(),o.memory.textures++)}if(he.samples>0&&Jt(he)===!1){Re.__webglMultisampledFramebuffer=r.createFramebuffer(),Re.__webglColorRenderbuffer=[],n.bindFramebuffer(r.FRAMEBUFFER,Re.__webglMultisampledFramebuffer);for(let Et=0;Et<Je.length;Et++){const Dt=Je[Et];Re.__webglColorRenderbuffer[Et]=r.createRenderbuffer(),r.bindRenderbuffer(r.RENDERBUFFER,Re.__webglColorRenderbuffer[Et]);const Vn=a.convert(Dt.format,Dt.colorSpace),at=a.convert(Dt.type),$t=S(Dt.internalFormat,Vn,at,Dt.colorSpace,he.isXRRenderTarget===!0),fn=Wt(he);r.renderbufferStorageMultisample(r.RENDERBUFFER,fn,$t,he.width,he.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+Et,r.RENDERBUFFER,Re.__webglColorRenderbuffer[Et])}r.bindRenderbuffer(r.RENDERBUFFER,null),he.depthBuffer&&(Re.__webglDepthRenderbuffer=r.createRenderbuffer(),fe(Re.__webglDepthRenderbuffer,he,!0)),n.bindFramebuffer(r.FRAMEBUFFER,null)}}if(Ke){n.bindTexture(r.TEXTURE_CUBE_MAP,Ze.__webglTexture),ue(r.TEXTURE_CUBE_MAP,Q);for(let Et=0;Et<6;Et++)if(Q.mipmaps&&Q.mipmaps.length>0)for(let Dt=0;Dt<Q.mipmaps.length;Dt++)oe(Re.__webglFramebuffer[Et][Dt],he,Q,r.COLOR_ATTACHMENT0,r.TEXTURE_CUBE_MAP_POSITIVE_X+Et,Dt);else oe(Re.__webglFramebuffer[Et],he,Q,r.COLOR_ATTACHMENT0,r.TEXTURE_CUBE_MAP_POSITIVE_X+Et,0);x(Q)&&_(r.TEXTURE_CUBE_MAP),n.unbindTexture()}else if(Kt){for(let Et=0,Dt=Je.length;Et<Dt;Et++){const Vn=Je[Et],at=i.get(Vn);n.bindTexture(r.TEXTURE_2D,at.__webglTexture),ue(r.TEXTURE_2D,Vn),oe(Re.__webglFramebuffer,he,Vn,r.COLOR_ATTACHMENT0+Et,r.TEXTURE_2D,0),x(Vn)&&_(r.TEXTURE_2D)}n.unbindTexture()}else{let Et=r.TEXTURE_2D;if((he.isWebGL3DRenderTarget||he.isWebGLArrayRenderTarget)&&(Et=he.isWebGL3DRenderTarget?r.TEXTURE_3D:r.TEXTURE_2D_ARRAY),n.bindTexture(Et,Ze.__webglTexture),ue(Et,Q),Q.mipmaps&&Q.mipmaps.length>0)for(let Dt=0;Dt<Q.mipmaps.length;Dt++)oe(Re.__webglFramebuffer[Dt],he,Q,r.COLOR_ATTACHMENT0,Et,Dt);else oe(Re.__webglFramebuffer,he,Q,r.COLOR_ATTACHMENT0,Et,0);x(Q)&&_(Et),n.unbindTexture()}he.depthBuffer&&we(he)}function Fe(he){const Q=he.textures;for(let Re=0,Ze=Q.length;Re<Ze;Re++){const Je=Q[Re];if(x(Je)){const Ke=E(he),Kt=i.get(Je).__webglTexture;n.bindTexture(Ke,Kt),_(Ke),n.unbindTexture()}}}const Tt=[],me=[];function En(he){if(he.samples>0){if(Jt(he)===!1){const Q=he.textures,Re=he.width,Ze=he.height;let Je=r.COLOR_BUFFER_BIT;const Ke=he.stencilBuffer?r.DEPTH_STENCIL_ATTACHMENT:r.DEPTH_ATTACHMENT,Kt=i.get(he),Et=Q.length>1;if(Et)for(let Dt=0;Dt<Q.length;Dt++)n.bindFramebuffer(r.FRAMEBUFFER,Kt.__webglMultisampledFramebuffer),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+Dt,r.RENDERBUFFER,null),n.bindFramebuffer(r.FRAMEBUFFER,Kt.__webglFramebuffer),r.framebufferTexture2D(r.DRAW_FRAMEBUFFER,r.COLOR_ATTACHMENT0+Dt,r.TEXTURE_2D,null,0);n.bindFramebuffer(r.READ_FRAMEBUFFER,Kt.__webglMultisampledFramebuffer),n.bindFramebuffer(r.DRAW_FRAMEBUFFER,Kt.__webglFramebuffer);for(let Dt=0;Dt<Q.length;Dt++){if(he.resolveDepthBuffer&&(he.depthBuffer&&(Je|=r.DEPTH_BUFFER_BIT),he.stencilBuffer&&he.resolveStencilBuffer&&(Je|=r.STENCIL_BUFFER_BIT)),Et){r.framebufferRenderbuffer(r.READ_FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.RENDERBUFFER,Kt.__webglColorRenderbuffer[Dt]);const Vn=i.get(Q[Dt]).__webglTexture;r.framebufferTexture2D(r.DRAW_FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,Vn,0)}r.blitFramebuffer(0,0,Re,Ze,0,0,Re,Ze,Je,r.NEAREST),c===!0&&(Tt.length=0,me.length=0,Tt.push(r.COLOR_ATTACHMENT0+Dt),he.depthBuffer&&he.resolveDepthBuffer===!1&&(Tt.push(Ke),me.push(Ke),r.invalidateFramebuffer(r.DRAW_FRAMEBUFFER,me)),r.invalidateFramebuffer(r.READ_FRAMEBUFFER,Tt))}if(n.bindFramebuffer(r.READ_FRAMEBUFFER,null),n.bindFramebuffer(r.DRAW_FRAMEBUFFER,null),Et)for(let Dt=0;Dt<Q.length;Dt++){n.bindFramebuffer(r.FRAMEBUFFER,Kt.__webglMultisampledFramebuffer),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+Dt,r.RENDERBUFFER,Kt.__webglColorRenderbuffer[Dt]);const Vn=i.get(Q[Dt]).__webglTexture;n.bindFramebuffer(r.FRAMEBUFFER,Kt.__webglFramebuffer),r.framebufferTexture2D(r.DRAW_FRAMEBUFFER,r.COLOR_ATTACHMENT0+Dt,r.TEXTURE_2D,Vn,0)}n.bindFramebuffer(r.DRAW_FRAMEBUFFER,Kt.__webglMultisampledFramebuffer)}else if(he.depthBuffer&&he.resolveDepthBuffer===!1&&c){const Q=he.stencilBuffer?r.DEPTH_STENCIL_ATTACHMENT:r.DEPTH_ATTACHMENT;r.invalidateFramebuffer(r.DRAW_FRAMEBUFFER,[Q])}}}function Wt(he){return Math.min(s.maxSamples,he.samples)}function Jt(he){const Q=i.get(he);return he.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&Q.__useRenderToTexture!==!1}function zt(he){const Q=o.render.frame;h.get(he)!==Q&&(h.set(he,Q),he.update())}function Yn(he,Q){const Re=he.colorSpace,Ze=he.format,Je=he.type;return he.isCompressedTexture===!0||he.isVideoTexture===!0||Re!==Fc&&Re!==Po&&(tr.getTransfer(Re)===Ir?(Ze!==Oi||Je!==Ri)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",Re)),Q}function Ft(he){return typeof HTMLImageElement<"u"&&he instanceof HTMLImageElement?(u.width=he.naturalWidth||he.width,u.height=he.naturalHeight||he.height):typeof VideoFrame<"u"&&he instanceof VideoFrame?(u.width=he.displayWidth,u.height=he.displayHeight):(u.width=he.width,u.height=he.height),u}this.allocateTextureUnit=U,this.resetTextureUnits=F,this.setTexture2D=W,this.setTexture2DArray=j,this.setTexture3D=$,this.setTextureCube=z,this.rebindTextures=Le,this.setupRenderTarget=et,this.updateRenderTargetMipmap=Fe,this.updateMultisampleRenderTarget=En,this.setupDepthRenderbuffer=we,this.setupFrameBufferTexture=oe,this.useMultisampledRTT=Jt}function t_e(r,e){function n(i,s=Po){let a;const o=tr.getTransfer(s);if(i===Ri)return r.UNSIGNED_BYTE;if(i===bM)return r.UNSIGNED_SHORT_4_4_4_4;if(i===_M)return r.UNSIGNED_SHORT_5_5_5_1;if(i===wM)return r.UNSIGNED_INT_5_9_9_9_REV;if(i===cp)return r.BYTE;if(i===up)return r.SHORT;if(i===tc)return r.UNSIGNED_SHORT;if(i===Cs)return r.INT;if(i===Vr)return r.UNSIGNED_INT;if(i===zi)return r.FLOAT;if(i===da)return r.HALF_FLOAT;if(i===vj)return r.ALPHA;if(i===v_)return r.RGB;if(i===Oi)return r.RGBA;if(i===xj)return r.LUMINANCE;if(i===bj)return r.LUMINANCE_ALPHA;if(i===Io)return r.DEPTH_COMPONENT;if(i===Do)return r.DEPTH_STENCIL;if(i===x_)return r.RED;if(i===r0)return r.RED_INTEGER;if(i===Sp)return r.RG;if(i===i0)return r.RG_INTEGER;if(i===s0)return r.RGBA_INTEGER;if(i===hp||i===Ad||i===Cd||i===Nd)if(o===Ir)if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),a!==null){if(i===hp)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(i===Ad)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(i===Cd)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(i===Nd)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(a=e.get("WEBGL_compressed_texture_s3tc"),a!==null){if(i===hp)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===Ad)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===Cd)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===Nd)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(i===nb||i===rb||i===ib||i===sb)if(a=e.get("WEBGL_compressed_texture_pvrtc"),a!==null){if(i===nb)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(i===rb)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(i===ib)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(i===sb)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(i===ab||i===ey||i===ty)if(a=e.get("WEBGL_compressed_texture_etc"),a!==null){if(i===ab||i===ey)return o===Ir?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(i===ty)return o===Ir?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(i===ny||i===ry||i===iy||i===sy||i===ay||i===oy||i===ly||i===cy||i===uy||i===hy||i===dy||i===fy||i===py||i===my)if(a=e.get("WEBGL_compressed_texture_astc"),a!==null){if(i===ny)return o===Ir?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(i===ry)return o===Ir?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(i===iy)return o===Ir?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(i===sy)return o===Ir?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(i===ay)return o===Ir?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(i===oy)return o===Ir?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(i===ly)return o===Ir?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(i===cy)return o===Ir?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(i===uy)return o===Ir?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(i===hy)return o===Ir?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(i===dy)return o===Ir?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(i===fy)return o===Ir?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(i===py)return o===Ir?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(i===my)return o===Ir?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(i===dp||i===t3||i===n3)if(a=e.get("EXT_texture_compression_bptc"),a!==null){if(i===dp)return o===Ir?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(i===t3)return a.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(i===n3)return a.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(i===_j||i===ob||i===lb||i===cb)if(a=e.get("EXT_texture_compression_rgtc"),a!==null){if(i===dp)return a.COMPRESSED_RED_RGTC1_EXT;if(i===ob)return a.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(i===lb)return a.COMPRESSED_RED_GREEN_RGTC2_EXT;if(i===cb)return a.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return i===ko?r.UNSIGNED_INT_24_8:r[i]!==void 0?r[i]:null}return{convert:n}}const n_e=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,r_e=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class i_e{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,n,i){if(this.texture===null){const s=new Oa,a=e.properties.get(s);a.__webglTexture=n.texture,(n.depthNear!==i.depthNear||n.depthFar!==i.depthFar)&&(this.depthNear=n.depthNear,this.depthFar=n.depthFar),this.texture=s}}getMesh(e){if(this.texture!==null&&this.mesh===null){const n=e.cameras[0].viewport,i=new Wc({vertexShader:n_e,fragmentShader:r_e,uniforms:{depthColor:{value:this.texture},depthWidth:{value:n.z},depthHeight:{value:n.w}}});this.mesh=new li(new S_(20,20),i)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class s_e extends Sh{constructor(e,n){super();const i=this;let s=null,a=1,o=null,l="local-floor",c=1,u=null,h=null,d=null,f=null,p=null,g=null;const v=new i_e,x=n.getContextAttributes();let _=null,E=null;const S=[],T=[],M=new dt;let C=null;const A=new Ns;A.viewport=new In;const P=new Ns;P.viewport=new In;const R=[A,P],O=new _ee;let D=null,F=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(ee){let le=S[ee];return le===void 0&&(le=new oT,S[ee]=le),le.getTargetRaySpace()},this.getControllerGrip=function(ee){let le=S[ee];return le===void 0&&(le=new oT,S[ee]=le),le.getGripSpace()},this.getHand=function(ee){let le=S[ee];return le===void 0&&(le=new oT,S[ee]=le),le.getHandSpace()};function U(ee){const le=T.indexOf(ee.inputSource);if(le===-1)return;const oe=S[le];oe!==void 0&&(oe.update(ee.inputSource,ee.frame,u||o),oe.dispatchEvent({type:ee.type,data:ee.inputSource}))}function B(){s.removeEventListener("select",U),s.removeEventListener("selectstart",U),s.removeEventListener("selectend",U),s.removeEventListener("squeeze",U),s.removeEventListener("squeezestart",U),s.removeEventListener("squeezeend",U),s.removeEventListener("end",B),s.removeEventListener("inputsourceschange",W);for(let ee=0;ee<S.length;ee++){const le=T[ee];le!==null&&(T[ee]=null,S[ee].disconnect(le))}D=null,F=null,v.reset(),e.setRenderTarget(_),p=null,f=null,d=null,s=null,E=null,be.stop(),i.isPresenting=!1,e.setPixelRatio(C),e.setSize(M.width,M.height,!1),i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(ee){a=ee,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(ee){l=ee,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return u||o},this.setReferenceSpace=function(ee){u=ee},this.getBaseLayer=function(){return f!==null?f:p},this.getBinding=function(){return d},this.getFrame=function(){return g},this.getSession=function(){return s},this.setSession=async function(ee){if(s=ee,s!==null){if(_=e.getRenderTarget(),s.addEventListener("select",U),s.addEventListener("selectstart",U),s.addEventListener("selectend",U),s.addEventListener("squeeze",U),s.addEventListener("squeezestart",U),s.addEventListener("squeezeend",U),s.addEventListener("end",B),s.addEventListener("inputsourceschange",W),x.xrCompatible!==!0&&await n.makeXRCompatible(),C=e.getPixelRatio(),e.getSize(M),typeof XRWebGLBinding<"u"&&"createProjectionLayer"in XRWebGLBinding.prototype){let oe=null,fe=null,Se=null;x.depth&&(Se=x.stencil?n.DEPTH24_STENCIL8:n.DEPTH_COMPONENT24,oe=x.stencil?Do:Io,fe=x.stencil?ko:Vr);const we={colorFormat:n.RGBA8,depthFormat:Se,scaleFactor:a};d=new XRWebGLBinding(s,n),f=d.createProjectionLayer(we),s.updateRenderState({layers:[f]}),e.setPixelRatio(1),e.setSize(f.textureWidth,f.textureHeight,!1),E=new jd(f.textureWidth,f.textureHeight,{format:Oi,type:Ri,depthTexture:new dl(f.textureWidth,f.textureHeight,fe,void 0,void 0,void 0,void 0,void 0,void 0,oe),stencilBuffer:x.stencil,colorSpace:e.outputColorSpace,samples:x.antialias?4:0,resolveDepthBuffer:f.ignoreDepthValues===!1,resolveStencilBuffer:f.ignoreDepthValues===!1})}else{const oe={antialias:x.antialias,alpha:!0,depth:x.depth,stencil:x.stencil,framebufferScaleFactor:a};p=new XRWebGLLayer(s,n,oe),s.updateRenderState({baseLayer:p}),e.setPixelRatio(1),e.setSize(p.framebufferWidth,p.framebufferHeight,!1),E=new jd(p.framebufferWidth,p.framebufferHeight,{format:Oi,type:Ri,colorSpace:e.outputColorSpace,stencilBuffer:x.stencil,resolveDepthBuffer:p.ignoreDepthValues===!1,resolveStencilBuffer:p.ignoreDepthValues===!1})}E.isXRRenderTarget=!0,this.setFoveation(c),u=null,o=await s.requestReferenceSpace(l),be.setContext(s),be.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(s!==null)return s.environmentBlendMode},this.getDepthTexture=function(){return v.getDepthTexture()};function W(ee){for(let le=0;le<ee.removed.length;le++){const oe=ee.removed[le],fe=T.indexOf(oe);fe>=0&&(T[fe]=null,S[fe].disconnect(oe))}for(let le=0;le<ee.added.length;le++){const oe=ee.added[le];let fe=T.indexOf(oe);if(fe===-1){for(let we=0;we<S.length;we++)if(we>=T.length){T.push(oe),fe=we;break}else if(T[we]===null){T[we]=oe,fe=we;break}if(fe===-1)break}const Se=S[fe];Se&&Se.connect(oe)}}const j=new pe,$=new pe;function z(ee,le,oe){j.setFromMatrixPosition(le.matrixWorld),$.setFromMatrixPosition(oe.matrixWorld);const fe=j.distanceTo($),Se=le.projectionMatrix.elements,we=oe.projectionMatrix.elements,Le=Se[14]/(Se[10]-1),et=Se[14]/(Se[10]+1),Fe=(Se[9]+1)/Se[5],Tt=(Se[9]-1)/Se[5],me=(Se[8]-1)/Se[0],En=(we[8]+1)/we[0],Wt=Le*me,Jt=Le*En,zt=fe/(-me+En),Yn=zt*-me;if(le.matrixWorld.decompose(ee.position,ee.quaternion,ee.scale),ee.translateX(Yn),ee.translateZ(zt),ee.matrixWorld.compose(ee.position,ee.quaternion,ee.scale),ee.matrixWorldInverse.copy(ee.matrixWorld).invert(),Se[10]===-1)ee.projectionMatrix.copy(le.projectionMatrix),ee.projectionMatrixInverse.copy(le.projectionMatrixInverse);else{const Ft=Le+zt,he=et+zt,Q=Wt-Yn,Re=Jt+(fe-Yn),Ze=Fe*et/he*Ft,Je=Tt*et/he*Ft;ee.projectionMatrix.makePerspective(Q,Re,Ze,Je,Ft,he),ee.projectionMatrixInverse.copy(ee.projectionMatrix).invert()}}function Z(ee,le){le===null?ee.matrixWorld.copy(ee.matrix):ee.matrixWorld.multiplyMatrices(le.matrixWorld,ee.matrix),ee.matrixWorldInverse.copy(ee.matrixWorld).invert()}this.updateCamera=function(ee){if(s===null)return;let le=ee.near,oe=ee.far;v.texture!==null&&(v.depthNear>0&&(le=v.depthNear),v.depthFar>0&&(oe=v.depthFar)),O.near=P.near=A.near=le,O.far=P.far=A.far=oe,(D!==O.near||F!==O.far)&&(s.updateRenderState({depthNear:O.near,depthFar:O.far}),D=O.near,F=O.far),A.layers.mask=ee.layers.mask|2,P.layers.mask=ee.layers.mask|4,O.layers.mask=A.layers.mask|P.layers.mask;const fe=ee.parent,Se=O.cameras;Z(O,fe);for(let we=0;we<Se.length;we++)Z(Se[we],fe);Se.length===2?z(O,A,P):O.projectionMatrix.copy(A.projectionMatrix),se(ee,O,fe)};function se(ee,le,oe){oe===null?ee.matrix.copy(le.matrixWorld):(ee.matrix.copy(oe.matrixWorld),ee.matrix.invert(),ee.matrix.multiply(le.matrixWorld)),ee.matrix.decompose(ee.position,ee.quaternion,ee.scale),ee.updateMatrixWorld(!0),ee.projectionMatrix.copy(le.projectionMatrix),ee.projectionMatrixInverse.copy(le.projectionMatrixInverse),ee.isPerspectiveCamera&&(ee.fov=Tp*2*Math.atan(1/ee.projectionMatrix.elements[5]),ee.zoom=1)}this.getCamera=function(){return O},this.getFoveation=function(){if(!(f===null&&p===null))return c},this.setFoveation=function(ee){c=ee,f!==null&&(f.fixedFoveation=ee),p!==null&&p.fixedFoveation!==void 0&&(p.fixedFoveation=ee)},this.hasDepthSensing=function(){return v.texture!==null},this.getDepthSensingMesh=function(){return v.getMesh(O)};let q=null;function ue(ee,le){if(h=le.getViewerPose(u||o),g=le,h!==null){const oe=h.views;p!==null&&(e.setRenderTargetFramebuffer(E,p.framebuffer),e.setRenderTarget(E));let fe=!1;oe.length!==O.cameras.length&&(O.cameras.length=0,fe=!0);for(let Le=0;Le<oe.length;Le++){const et=oe[Le];let Fe=null;if(p!==null)Fe=p.getViewport(et);else{const me=d.getViewSubImage(f,et);Fe=me.viewport,Le===0&&(e.setRenderTargetTextures(E,me.colorTexture,me.depthStencilTexture),e.setRenderTarget(E))}let Tt=R[Le];Tt===void 0&&(Tt=new Ns,Tt.layers.enable(Le),Tt.viewport=new In,R[Le]=Tt),Tt.matrix.fromArray(et.transform.matrix),Tt.matrix.decompose(Tt.position,Tt.quaternion,Tt.scale),Tt.projectionMatrix.fromArray(et.projectionMatrix),Tt.projectionMatrixInverse.copy(Tt.projectionMatrix).invert(),Tt.viewport.set(Fe.x,Fe.y,Fe.width,Fe.height),Le===0&&(O.matrix.copy(Tt.matrix),O.matrix.decompose(O.position,O.quaternion,O.scale)),fe===!0&&O.cameras.push(Tt)}const Se=s.enabledFeatures;if(Se&&Se.includes("depth-sensing")&&s.depthUsage=="gpu-optimized"&&d){const Le=d.getDepthInformation(oe[0]);Le&&Le.isValid&&Le.texture&&v.init(e,Le,s.renderState)}}for(let oe=0;oe<S.length;oe++){const fe=T[oe],Se=S[oe];fe!==null&&Se!==void 0&&Se.update(fe,le,u||o)}q&&q(ee,le),le.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:le}),g=null}const be=new See;be.setAnimationLoop(ue),this.setAnimationLoop=function(ee){q=ee},this.dispose=function(){}}}const If=new yl,a_e=new br;function o_e(r,e){function n(x,_){x.matrixAutoUpdate===!0&&x.updateMatrix(),_.value.copy(x.matrix)}function i(x,_){_.color.getRGB(x.fogColor.value,uee(r)),_.isFog?(x.fogNear.value=_.near,x.fogFar.value=_.far):_.isFogExp2&&(x.fogDensity.value=_.density)}function s(x,_,E,S,T){_.isMeshBasicMaterial||_.isMeshLambertMaterial?a(x,_):_.isMeshToonMaterial?(a(x,_),d(x,_)):_.isMeshPhongMaterial?(a(x,_),h(x,_)):_.isMeshStandardMaterial?(a(x,_),f(x,_),_.isMeshPhysicalMaterial&&p(x,_,T)):_.isMeshMatcapMaterial?(a(x,_),g(x,_)):_.isMeshDepthMaterial?a(x,_):_.isMeshDistanceMaterial?(a(x,_),v(x,_)):_.isMeshNormalMaterial?a(x,_):_.isLineBasicMaterial?(o(x,_),_.isLineDashedMaterial&&l(x,_)):_.isPointsMaterial?c(x,_,E,S):_.isSpriteMaterial?u(x,_):_.isShadowMaterial?(x.color.value.copy(_.color),x.opacity.value=_.opacity):_.isShaderMaterial&&(_.uniformsNeedUpdate=!1)}function a(x,_){x.opacity.value=_.opacity,_.color&&x.diffuse.value.copy(_.color),_.emissive&&x.emissive.value.copy(_.emissive).multiplyScalar(_.emissiveIntensity),_.map&&(x.map.value=_.map,n(_.map,x.mapTransform)),_.alphaMap&&(x.alphaMap.value=_.alphaMap,n(_.alphaMap,x.alphaMapTransform)),_.bumpMap&&(x.bumpMap.value=_.bumpMap,n(_.bumpMap,x.bumpMapTransform),x.bumpScale.value=_.bumpScale,_.side===Wr&&(x.bumpScale.value*=-1)),_.normalMap&&(x.normalMap.value=_.normalMap,n(_.normalMap,x.normalMapTransform),x.normalScale.value.copy(_.normalScale),_.side===Wr&&x.normalScale.value.negate()),_.displacementMap&&(x.displacementMap.value=_.displacementMap,n(_.displacementMap,x.displacementMapTransform),x.displacementScale.value=_.displacementScale,x.displacementBias.value=_.displacementBias),_.emissiveMap&&(x.emissiveMap.value=_.emissiveMap,n(_.emissiveMap,x.emissiveMapTransform)),_.specularMap&&(x.specularMap.value=_.specularMap,n(_.specularMap,x.specularMapTransform)),_.alphaTest>0&&(x.alphaTest.value=_.alphaTest);const E=e.get(_),S=E.envMap,T=E.envMapRotation;S&&(x.envMap.value=S,If.copy(T),If.x*=-1,If.y*=-1,If.z*=-1,S.isCubeTexture&&S.isRenderTargetTexture===!1&&(If.y*=-1,If.z*=-1),x.envMapRotation.value.setFromMatrix4(a_e.makeRotationFromEuler(If)),x.flipEnvMap.value=S.isCubeTexture&&S.isRenderTargetTexture===!1?-1:1,x.reflectivity.value=_.reflectivity,x.ior.value=_.ior,x.refractionRatio.value=_.refractionRatio),_.lightMap&&(x.lightMap.value=_.lightMap,x.lightMapIntensity.value=_.lightMapIntensity,n(_.lightMap,x.lightMapTransform)),_.aoMap&&(x.aoMap.value=_.aoMap,x.aoMapIntensity.value=_.aoMapIntensity,n(_.aoMap,x.aoMapTransform))}function o(x,_){x.diffuse.value.copy(_.color),x.opacity.value=_.opacity,_.map&&(x.map.value=_.map,n(_.map,x.mapTransform))}function l(x,_){x.dashSize.value=_.dashSize,x.totalSize.value=_.dashSize+_.gapSize,x.scale.value=_.scale}function c(x,_,E,S){x.diffuse.value.copy(_.color),x.opacity.value=_.opacity,x.size.value=_.size*E,x.scale.value=S*.5,_.map&&(x.map.value=_.map,n(_.map,x.uvTransform)),_.alphaMap&&(x.alphaMap.value=_.alphaMap,n(_.alphaMap,x.alphaMapTransform)),_.alphaTest>0&&(x.alphaTest.value=_.alphaTest)}function u(x,_){x.diffuse.value.copy(_.color),x.opacity.value=_.opacity,x.rotation.value=_.rotation,_.map&&(x.map.value=_.map,n(_.map,x.mapTransform)),_.alphaMap&&(x.alphaMap.value=_.alphaMap,n(_.alphaMap,x.alphaMapTransform)),_.alphaTest>0&&(x.alphaTest.value=_.alphaTest)}function h(x,_){x.specular.value.copy(_.specular),x.shininess.value=Math.max(_.shininess,1e-4)}function d(x,_){_.gradientMap&&(x.gradientMap.value=_.gradientMap)}function f(x,_){x.metalness.value=_.metalness,_.metalnessMap&&(x.metalnessMap.value=_.metalnessMap,n(_.metalnessMap,x.metalnessMapTransform)),x.roughness.value=_.roughness,_.roughnessMap&&(x.roughnessMap.value=_.roughnessMap,n(_.roughnessMap,x.roughnessMapTransform)),_.envMap&&(x.envMapIntensity.value=_.envMapIntensity)}function p(x,_,E){x.ior.value=_.ior,_.sheen>0&&(x.sheenColor.value.copy(_.sheenColor).multiplyScalar(_.sheen),x.sheenRoughness.value=_.sheenRoughness,_.sheenColorMap&&(x.sheenColorMap.value=_.sheenColorMap,n(_.sheenColorMap,x.sheenColorMapTransform)),_.sheenRoughnessMap&&(x.sheenRoughnessMap.value=_.sheenRoughnessMap,n(_.sheenRoughnessMap,x.sheenRoughnessMapTransform))),_.clearcoat>0&&(x.clearcoat.value=_.clearcoat,x.clearcoatRoughness.value=_.clearcoatRoughness,_.clearcoatMap&&(x.clearcoatMap.value=_.clearcoatMap,n(_.clearcoatMap,x.clearcoatMapTransform)),_.clearcoatRoughnessMap&&(x.clearcoatRoughnessMap.value=_.clearcoatRoughnessMap,n(_.clearcoatRoughnessMap,x.clearcoatRoughnessMapTransform)),_.clearcoatNormalMap&&(x.clearcoatNormalMap.value=_.clearcoatNormalMap,n(_.clearcoatNormalMap,x.clearcoatNormalMapTransform),x.clearcoatNormalScale.value.copy(_.clearcoatNormalScale),_.side===Wr&&x.clearcoatNormalScale.value.negate())),_.dispersion>0&&(x.dispersion.value=_.dispersion),_.iridescence>0&&(x.iridescence.value=_.iridescence,x.iridescenceIOR.value=_.iridescenceIOR,x.iridescenceThicknessMinimum.value=_.iridescenceThicknessRange[0],x.iridescenceThicknessMaximum.value=_.iridescenceThicknessRange[1],_.iridescenceMap&&(x.iridescenceMap.value=_.iridescenceMap,n(_.iridescenceMap,x.iridescenceMapTransform)),_.iridescenceThicknessMap&&(x.iridescenceThicknessMap.value=_.iridescenceThicknessMap,n(_.iridescenceThicknessMap,x.iridescenceThicknessMapTransform))),_.transmission>0&&(x.transmission.value=_.transmission,x.transmissionSamplerMap.value=E.texture,x.transmissionSamplerSize.value.set(E.width,E.height),_.transmissionMap&&(x.transmissionMap.value=_.transmissionMap,n(_.transmissionMap,x.transmissionMapTransform)),x.thickness.value=_.thickness,_.thicknessMap&&(x.thicknessMap.value=_.thicknessMap,n(_.thicknessMap,x.thicknessMapTransform)),x.attenuationDistance.value=_.attenuationDistance,x.attenuationColor.value.copy(_.attenuationColor)),_.anisotropy>0&&(x.anisotropyVector.value.set(_.anisotropy*Math.cos(_.anisotropyRotation),_.anisotropy*Math.sin(_.anisotropyRotation)),_.anisotropyMap&&(x.anisotropyMap.value=_.anisotropyMap,n(_.anisotropyMap,x.anisotropyMapTransform))),x.specularIntensity.value=_.specularIntensity,x.specularColor.value.copy(_.specularColor),_.specularColorMap&&(x.specularColorMap.value=_.specularColorMap,n(_.specularColorMap,x.specularColorMapTransform)),_.specularIntensityMap&&(x.specularIntensityMap.value=_.specularIntensityMap,n(_.specularIntensityMap,x.specularIntensityMapTransform))}function g(x,_){_.matcap&&(x.matcap.value=_.matcap)}function v(x,_){const E=e.get(_).light;x.referencePosition.value.setFromMatrixPosition(E.matrixWorld),x.nearDistance.value=E.shadow.camera.near,x.farDistance.value=E.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:s}}function l_e(r,e,n,i){let s={},a={},o=[];const l=r.getParameter(r.MAX_UNIFORM_BUFFER_BINDINGS);function c(E,S){const T=S.program;i.uniformBlockBinding(E,T)}function u(E,S){let T=s[E.id];T===void 0&&(g(E),T=h(E),s[E.id]=T,E.addEventListener("dispose",x));const M=S.program;i.updateUBOMapping(E,M);const C=e.render.frame;a[E.id]!==C&&(f(E),a[E.id]=C)}function h(E){const S=d();E.__bindingPointIndex=S;const T=r.createBuffer(),M=E.__size,C=E.usage;return r.bindBuffer(r.UNIFORM_BUFFER,T),r.bufferData(r.UNIFORM_BUFFER,M,C),r.bindBuffer(r.UNIFORM_BUFFER,null),r.bindBufferBase(r.UNIFORM_BUFFER,S,T),T}function d(){for(let E=0;E<l;E++)if(o.indexOf(E)===-1)return o.push(E),E;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function f(E){const S=s[E.id],T=E.uniforms,M=E.__cache;r.bindBuffer(r.UNIFORM_BUFFER,S);for(let C=0,A=T.length;C<A;C++){const P=Array.isArray(T[C])?T[C]:[T[C]];for(let R=0,O=P.length;R<O;R++){const D=P[R];if(p(D,C,R,M)===!0){const F=D.__offset,U=Array.isArray(D.value)?D.value:[D.value];let B=0;for(let W=0;W<U.length;W++){const j=U[W],$=v(j);typeof j=="number"||typeof j=="boolean"?(D.__data[0]=j,r.bufferSubData(r.UNIFORM_BUFFER,F+B,D.__data)):j.isMatrix3?(D.__data[0]=j.elements[0],D.__data[1]=j.elements[1],D.__data[2]=j.elements[2],D.__data[3]=0,D.__data[4]=j.elements[3],D.__data[5]=j.elements[4],D.__data[6]=j.elements[5],D.__data[7]=0,D.__data[8]=j.elements[6],D.__data[9]=j.elements[7],D.__data[10]=j.elements[8],D.__data[11]=0):(j.toArray(D.__data,B),B+=$.storage/Float32Array.BYTES_PER_ELEMENT)}r.bufferSubData(r.UNIFORM_BUFFER,F,D.__data)}}}r.bindBuffer(r.UNIFORM_BUFFER,null)}function p(E,S,T,M){const C=E.value,A=S+"_"+T;if(M[A]===void 0)return typeof C=="number"||typeof C=="boolean"?M[A]=C:M[A]=C.clone(),!0;{const P=M[A];if(typeof C=="number"||typeof C=="boolean"){if(P!==C)return M[A]=C,!0}else if(P.equals(C)===!1)return P.copy(C),!0}return!1}function g(E){const S=E.uniforms;let T=0;const M=16;for(let A=0,P=S.length;A<P;A++){const R=Array.isArray(S[A])?S[A]:[S[A]];for(let O=0,D=R.length;O<D;O++){const F=R[O],U=Array.isArray(F.value)?F.value:[F.value];for(let B=0,W=U.length;B<W;B++){const j=U[B],$=v(j),z=T%M,Z=z%$.boundary,se=z+Z;T+=Z,se!==0&&M-se<$.storage&&(T+=M-se),F.__data=new Float32Array($.storage/Float32Array.BYTES_PER_ELEMENT),F.__offset=T,T+=$.storage}}}const C=T%M;return C>0&&(T+=M-C),E.__size=T,E.__cache={},this}function v(E){const S={boundary:0,storage:0};return typeof E=="number"||typeof E=="boolean"?(S.boundary=4,S.storage=4):E.isVector2?(S.boundary=8,S.storage=8):E.isVector3||E.isColor?(S.boundary=16,S.storage=12):E.isVector4?(S.boundary=16,S.storage=16):E.isMatrix3?(S.boundary=48,S.storage=48):E.isMatrix4?(S.boundary=64,S.storage=64):E.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",E),S}function x(E){const S=E.target;S.removeEventListener("dispose",x);const T=o.indexOf(S.__bindingPointIndex);o.splice(T,1),r.deleteBuffer(s[S.id]),delete s[S.id],delete a[S.id]}function _(){for(const E in s)r.deleteBuffer(s[E]);o=[],s={},a={}}return{bind:c,update:u,dispose:_}}class c_e{constructor(e={}){const{canvas:n=iee(),context:i=null,depth:s=!0,stencil:a=!1,alpha:o=!1,antialias:l=!1,premultipliedAlpha:c=!0,preserveDrawingBuffer:u=!1,powerPreference:h="default",failIfMajorPerformanceCaveat:d=!1,reverseDepthBuffer:f=!1}=e;this.isWebGLRenderer=!0;let p;if(i!==null){if(typeof WebGLRenderingContext<"u"&&i instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");p=i.getContextAttributes().alpha}else p=o;const g=new Uint32Array(4),v=new Int32Array(4);let x=null,_=null;const E=[],S=[];this.domElement=n,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=to,this.toneMappingExposure=1,this.transmissionResolutionScale=1;const T=this;let M=!1;this._outputColorSpace=dn;let C=0,A=0,P=null,R=-1,O=null;const D=new In,F=new In;let U=null;const B=new ln(0);let W=0,j=n.width,$=n.height,z=1,Z=null,se=null;const q=new In(0,0,j,$),ue=new In(0,0,j,$);let be=!1;const ee=new CM;let le=!1,oe=!1;const fe=new br,Se=new br,we=new pe,Le=new In,et={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let Fe=!1;function Tt(){return P===null?z:1}let me=i;function En(re,Ee){return n.getContext(re,Ee)}try{const re={alpha:!0,depth:s,stencil:a,antialias:l,premultipliedAlpha:c,preserveDrawingBuffer:u,powerPreference:h,failIfMajorPerformanceCaveat:d};if("setAttribute"in n&&n.setAttribute("data-engine",`three.js r${g_}`),n.addEventListener("webglcontextlost",Ye,!1),n.addEventListener("webglcontextrestored",Pt,!1),n.addEventListener("webglcontextcreationerror",wt,!1),me===null){const Ee="webgl2";if(me=En(Ee,re),me===null)throw En(Ee)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(re){throw console.error("THREE.WebGLRenderer: "+re.message),re}let Wt,Jt,zt,Yn,Ft,he,Q,Re,Ze,Je,Ke,Kt,Et,Dt,Vn,at,$t,fn,vn,Bt,Hn,Nn,hr,Me;function Mt(){Wt=new xxe(me),Wt.init(),Nn=new t_e(me,Wt),Jt=new dxe(me,Wt,e,Nn),zt=new Jbe(me,Wt),Jt.reverseDepthBuffer&&f&&zt.buffers.depth.setReversed(!0),Yn=new wxe(me),Ft=new Ube,he=new e_e(me,Wt,zt,Ft,Jt,Nn,Yn),Q=new pxe(T),Re=new vxe(T),Ze=new Cye(me),hr=new uxe(me,Ze),Je=new bxe(me,Ze,Yn,hr),Ke=new Txe(me,Je,Ze,Yn),vn=new Sxe(me,Jt,he),at=new fxe(Ft),Kt=new jbe(T,Q,Re,Wt,Jt,hr,at),Et=new o_e(T,Ft),Dt=new $be,Vn=new Xbe(Wt),fn=new cxe(T,Q,Re,zt,Ke,p,c),$t=new Zbe(T,Ke,Jt),Me=new l_e(me,Yn,Jt,zt),Bt=new hxe(me,Wt,Yn),Hn=new _xe(me,Wt,Yn),Yn.programs=Kt.programs,T.capabilities=Jt,T.extensions=Wt,T.properties=Ft,T.renderLists=Dt,T.shadowMap=$t,T.state=zt,T.info=Yn}Mt();const Ue=new s_e(T,me);this.xr=Ue,this.getContext=function(){return me},this.getContextAttributes=function(){return me.getContextAttributes()},this.forceContextLoss=function(){const re=Wt.get("WEBGL_lose_context");re&&re.loseContext()},this.forceContextRestore=function(){const re=Wt.get("WEBGL_lose_context");re&&re.restoreContext()},this.getPixelRatio=function(){return z},this.setPixelRatio=function(re){re!==void 0&&(z=re,this.setSize(j,$,!1))},this.getSize=function(re){return re.set(j,$)},this.setSize=function(re,Ee,Ie=!0){if(Ue.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}j=re,$=Ee,n.width=Math.floor(re*z),n.height=Math.floor(Ee*z),Ie===!0&&(n.style.width=re+"px",n.style.height=Ee+"px"),this.setViewport(0,0,re,Ee)},this.getDrawingBufferSize=function(re){return re.set(j*z,$*z).floor()},this.setDrawingBufferSize=function(re,Ee,Ie){j=re,$=Ee,z=Ie,n.width=Math.floor(re*Ie),n.height=Math.floor(Ee*Ie),this.setViewport(0,0,re,Ee)},this.getCurrentViewport=function(re){return re.copy(D)},this.getViewport=function(re){return re.copy(q)},this.setViewport=function(re,Ee,Ie,Ne){re.isVector4?q.set(re.x,re.y,re.z,re.w):q.set(re,Ee,Ie,Ne),zt.viewport(D.copy(q).multiplyScalar(z).round())},this.getScissor=function(re){return re.copy(ue)},this.setScissor=function(re,Ee,Ie,Ne){re.isVector4?ue.set(re.x,re.y,re.z,re.w):ue.set(re,Ee,Ie,Ne),zt.scissor(F.copy(ue).multiplyScalar(z).round())},this.getScissorTest=function(){return be},this.setScissorTest=function(re){zt.setScissorTest(be=re)},this.setOpaqueSort=function(re){Z=re},this.setTransparentSort=function(re){se=re},this.getClearColor=function(re){return re.copy(fn.getClearColor())},this.setClearColor=function(){fn.setClearColor(...arguments)},this.getClearAlpha=function(){return fn.getClearAlpha()},this.setClearAlpha=function(){fn.setClearAlpha(...arguments)},this.clear=function(re=!0,Ee=!0,Ie=!0){let Ne=0;if(re){let Ae=!1;if(P!==null){const st=P.texture.format;Ae=st===s0||st===i0||st===r0}if(Ae){const st=P.texture.type,At=st===Ri||st===Vr||st===tc||st===ko||st===bM||st===_M,kt=fn.getClearColor(),jt=fn.getClearAlpha(),xn=kt.r,hn=kt.g,Gt=kt.b;At?(g[0]=xn,g[1]=hn,g[2]=Gt,g[3]=jt,me.clearBufferuiv(me.COLOR,0,g)):(v[0]=xn,v[1]=hn,v[2]=Gt,v[3]=jt,me.clearBufferiv(me.COLOR,0,v))}else Ne|=me.COLOR_BUFFER_BIT}Ee&&(Ne|=me.DEPTH_BUFFER_BIT),Ie&&(Ne|=me.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),me.clear(Ne)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){n.removeEventListener("webglcontextlost",Ye,!1),n.removeEventListener("webglcontextrestored",Pt,!1),n.removeEventListener("webglcontextcreationerror",wt,!1),fn.dispose(),Dt.dispose(),Vn.dispose(),Ft.dispose(),Q.dispose(),Re.dispose(),Ke.dispose(),hr.dispose(),Me.dispose(),Kt.dispose(),Ue.dispose(),Ue.removeEventListener("sessionstart",_l),Ue.removeEventListener("sessionend",oo),lo.stop()};function Ye(re){re.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),M=!0}function Pt(){console.log("THREE.WebGLRenderer: Context Restored."),M=!1;const re=Yn.autoReset,Ee=$t.enabled,Ie=$t.autoUpdate,Ne=$t.needsUpdate,Ae=$t.type;Mt(),Yn.autoReset=re,$t.enabled=Ee,$t.autoUpdate=Ie,$t.needsUpdate=Ne,$t.type=Ae}function wt(re){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",re.statusMessage)}function Pn(re){const Ee=re.target;Ee.removeEventListener("dispose",Pn),Rr(Ee)}function Rr(re){vi(re),Ft.remove(re)}function vi(re){const Ee=Ft.get(re).programs;Ee!==void 0&&(Ee.forEach(function(Ie){Kt.releaseProgram(Ie)}),re.isShaderMaterial&&Kt.releaseShaderCache(re))}this.renderBufferDirect=function(re,Ee,Ie,Ne,Ae,st){Ee===null&&(Ee=et);const At=Ae.isMesh&&Ae.matrixWorld.determinant()<0,kt=au(re,Ee,Ie,Ne,Ae);zt.setMaterial(Ne,At);let jt=Ie.index,xn=1;if(Ne.wireframe===!0){if(jt=Je.getWireframeAttribute(Ie),jt===void 0)return;xn=2}const hn=Ie.drawRange,Gt=Ie.attributes.position;let Un=hn.start*xn,Dn=(hn.start+hn.count)*xn;st!==null&&(Un=Math.max(Un,st.start*xn),Dn=Math.min(Dn,(st.start+st.count)*xn)),jt!==null?(Un=Math.max(Un,0),Dn=Math.min(Dn,jt.count)):Gt!=null&&(Un=Math.max(Un,0),Dn=Math.min(Dn,Gt.count));const Ur=Dn-Un;if(Ur<0||Ur===1/0)return;hr.setup(Ae,Ne,kt,Ie,jt);let Lr,rr=Bt;if(jt!==null&&(Lr=Ze.get(jt),rr=Hn,rr.setIndex(Lr)),Ae.isMesh)Ne.wireframe===!0?(zt.setLineWidth(Ne.wireframeLinewidth*Tt()),rr.setMode(me.LINES)):rr.setMode(me.TRIANGLES);else if(Ae.isLine){let an=Ne.linewidth;an===void 0&&(an=1),zt.setLineWidth(an*Tt()),Ae.isLineSegments?rr.setMode(me.LINES):Ae.isLineLoop?rr.setMode(me.LINE_LOOP):rr.setMode(me.LINE_STRIP)}else Ae.isPoints?rr.setMode(me.POINTS):Ae.isSprite&&rr.setMode(me.TRIANGLES);if(Ae.isBatchedMesh)if(Ae._multiDrawInstances!==null)ic("THREE.WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),rr.renderMultiDrawInstances(Ae._multiDrawStarts,Ae._multiDrawCounts,Ae._multiDrawCount,Ae._multiDrawInstances);else if(Wt.get("WEBGL_multi_draw"))rr.renderMultiDraw(Ae._multiDrawStarts,Ae._multiDrawCounts,Ae._multiDrawCount);else{const an=Ae._multiDrawStarts,qr=Ae._multiDrawCounts,Zn=Ae._multiDrawCount,Ii=jt?Ze.get(jt).bytesPerElement:1,Mr=Ft.get(Ne).currentProgram.getUniforms();for(let Di=0;Di<Zn;Di++)Mr.setValue(me,"_gl_DrawID",Di),rr.render(an[Di]/Ii,qr[Di])}else if(Ae.isInstancedMesh)rr.renderInstances(Un,Ur,Ae.count);else if(Ie.isInstancedBufferGeometry){const an=Ie._maxInstanceCount!==void 0?Ie._maxInstanceCount:1/0,qr=Math.min(Ie.instanceCount,an);rr.renderInstances(Un,Ur,qr)}else rr.render(Un,Ur)};function Rn(re,Ee,Ie){re.transparent===!0&&re.side===Ea&&re.forceSinglePass===!1?(re.side=Wr,re.needsUpdate=!0,fc(re,Ee,Ie),re.side=Ja,re.needsUpdate=!0,fc(re,Ee,Ie),re.side=Ea):fc(re,Ee,Ie)}this.compile=function(re,Ee,Ie=null){Ie===null&&(Ie=re),_=Vn.get(Ie),_.init(Ee),S.push(_),Ie.traverseVisible(function(Ae){Ae.isLight&&Ae.layers.test(Ee.layers)&&(_.pushLight(Ae),Ae.castShadow&&_.pushShadow(Ae))}),re!==Ie&&re.traverseVisible(function(Ae){Ae.isLight&&Ae.layers.test(Ee.layers)&&(_.pushLight(Ae),Ae.castShadow&&_.pushShadow(Ae))}),_.setupLights();const Ne=new Set;return re.traverse(function(Ae){if(!(Ae.isMesh||Ae.isPoints||Ae.isLine||Ae.isSprite))return;const st=Ae.material;if(st)if(Array.isArray(st))for(let At=0;At<st.length;At++){const kt=st[At];Rn(kt,Ie,Ae),Ne.add(kt)}else Rn(st,Ie,Ae),Ne.add(st)}),_=S.pop(),Ne},this.compileAsync=function(re,Ee,Ie=null){const Ne=this.compile(re,Ee,Ie);return new Promise(Ae=>{function st(){if(Ne.forEach(function(At){Ft.get(At).currentProgram.isReady()&&Ne.delete(At)}),Ne.size===0){Ae(re);return}setTimeout(st,10)}Wt.get("KHR_parallel_shader_compile")!==null?st():setTimeout(st,10)})};let ss=null;function as(re){ss&&ss(re)}function _l(){lo.stop()}function oo(){lo.start()}const lo=new See;lo.setAnimationLoop(as),typeof self<"u"&&lo.setContext(self),this.setAnimationLoop=function(re){ss=re,Ue.setAnimationLoop(re),re===null?lo.stop():lo.start()},Ue.addEventListener("sessionstart",_l),Ue.addEventListener("sessionend",oo),this.render=function(re,Ee){if(Ee!==void 0&&Ee.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(M===!0)return;if(re.matrixWorldAutoUpdate===!0&&re.updateMatrixWorld(),Ee.parent===null&&Ee.matrixWorldAutoUpdate===!0&&Ee.updateMatrixWorld(),Ue.enabled===!0&&Ue.isPresenting===!0&&(Ue.cameraAutoUpdate===!0&&Ue.updateCamera(Ee),Ee=Ue.getCamera()),re.isScene===!0&&re.onBeforeRender(T,re,Ee,P),_=Vn.get(re,S.length),_.init(Ee),S.push(_),Se.multiplyMatrices(Ee.projectionMatrix,Ee.matrixWorldInverse),ee.setFromProjectionMatrix(Se),oe=this.localClippingEnabled,le=at.init(this.clippingPlanes,oe),x=Dt.get(re,E.length),x.init(),E.push(x),Ue.enabled===!0&&Ue.isPresenting===!0){const st=T.xr.getDepthSensingMesh();st!==null&&co(st,Ee,-1/0,T.sortObjects)}co(re,Ee,0,T.sortObjects),x.finish(),T.sortObjects===!0&&x.sort(Z,se),Fe=Ue.enabled===!1||Ue.isPresenting===!1||Ue.hasDepthSensing()===!1,Fe&&fn.addToRenderList(x,re),this.info.render.frame++,le===!0&&at.beginShadows();const Ie=_.state.shadowsArray;$t.render(Ie,re,Ee),le===!0&&at.endShadows(),this.info.autoReset===!0&&this.info.reset();const Ne=x.opaque,Ae=x.transmissive;if(_.setupLights(),Ee.isArrayCamera){const st=Ee.cameras;if(Ae.length>0)for(let At=0,kt=st.length;At<kt;At++){const jt=st[At];jo(Ne,Ae,re,jt)}Fe&&fn.render(re);for(let At=0,kt=st.length;At<kt;At++){const jt=st[At];Bo(x,re,jt,jt.viewport)}}else Ae.length>0&&jo(Ne,Ae,re,Ee),Fe&&fn.render(re),Bo(x,re,Ee);P!==null&&A===0&&(he.updateMultisampleRenderTarget(P),he.updateRenderTargetMipmap(P)),re.isScene===!0&&re.onAfterRender(T,re,Ee),hr.resetDefaultState(),R=-1,O=null,S.pop(),S.length>0?(_=S[S.length-1],le===!0&&at.setGlobalState(T.clippingPlanes,_.state.camera)):_=null,E.pop(),E.length>0?x=E[E.length-1]:x=null};function co(re,Ee,Ie,Ne){if(re.visible===!1)return;if(re.layers.test(Ee.layers)){if(re.isGroup)Ie=re.renderOrder;else if(re.isLOD)re.autoUpdate===!0&&re.update(Ee);else if(re.isLight)_.pushLight(re),re.castShadow&&_.pushShadow(re);else if(re.isSprite){if(!re.frustumCulled||ee.intersectsSprite(re)){Ne&&Le.setFromMatrixPosition(re.matrixWorld).applyMatrix4(Se);const At=Ke.update(re),kt=re.material;kt.visible&&x.push(re,At,kt,Ie,Le.z,null)}}else if((re.isMesh||re.isLine||re.isPoints)&&(!re.frustumCulled||ee.intersectsObject(re))){const At=Ke.update(re),kt=re.material;if(Ne&&(re.boundingSphere!==void 0?(re.boundingSphere===null&&re.computeBoundingSphere(),Le.copy(re.boundingSphere.center)):(At.boundingSphere===null&&At.computeBoundingSphere(),Le.copy(At.boundingSphere.center)),Le.applyMatrix4(re.matrixWorld).applyMatrix4(Se)),Array.isArray(kt)){const jt=At.groups;for(let xn=0,hn=jt.length;xn<hn;xn++){const Gt=jt[xn],Un=kt[Gt.materialIndex];Un&&Un.visible&&x.push(re,At,Un,Ie,Le.z,Gt)}}else kt.visible&&x.push(re,At,kt,Ie,Le.z,null)}}const st=re.children;for(let At=0,kt=st.length;At<kt;At++)co(st[At],Ee,Ie,Ne)}function Bo(re,Ee,Ie,Ne){const Ae=re.opaque,st=re.transmissive,At=re.transparent;_.setupLightsView(Ie),le===!0&&at.setGlobalState(T.clippingPlanes,Ie),Ne&&zt.viewport(D.copy(Ne)),Ae.length>0&&Uo(Ae,Ee,Ie),st.length>0&&Uo(st,Ee,Ie),At.length>0&&Uo(At,Ee,Ie),zt.buffers.depth.setTest(!0),zt.buffers.depth.setMask(!0),zt.buffers.color.setMask(!0),zt.setPolygonOffset(!1)}function jo(re,Ee,Ie,Ne){if((Ie.isScene===!0?Ie.overrideMaterial:null)!==null)return;_.state.transmissionRenderTarget[Ne.id]===void 0&&(_.state.transmissionRenderTarget[Ne.id]=new jd(1,1,{generateMipmaps:!0,type:Wt.has("EXT_color_buffer_half_float")||Wt.has("EXT_color_buffer_float")?da:Ri,minFilter:Xa,samples:4,stencilBuffer:a,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:tr.workingColorSpace}));const st=_.state.transmissionRenderTarget[Ne.id],At=Ne.viewport||D;st.setSize(At.z*T.transmissionResolutionScale,At.w*T.transmissionResolutionScale);const kt=T.getRenderTarget();T.setRenderTarget(st),T.getClearColor(B),W=T.getClearAlpha(),W<1&&T.setClearColor(16777215,.5),T.clear(),Fe&&fn.render(Ie);const jt=T.toneMapping;T.toneMapping=to;const xn=Ne.viewport;if(Ne.viewport!==void 0&&(Ne.viewport=void 0),_.setupLightsView(Ne),le===!0&&at.setGlobalState(T.clippingPlanes,Ne),Uo(re,Ie,Ne),he.updateMultisampleRenderTarget(st),he.updateRenderTargetMipmap(st),Wt.has("WEBGL_multisampled_render_to_texture")===!1){let hn=!1;for(let Gt=0,Un=Ee.length;Gt<Un;Gt++){const Dn=Ee[Gt],Ur=Dn.object,Lr=Dn.geometry,rr=Dn.material,an=Dn.group;if(rr.side===Ea&&Ur.layers.test(Ne.layers)){const qr=rr.side;rr.side=Wr,rr.needsUpdate=!0,su(Ur,Ie,Ne,Lr,rr,an),rr.side=qr,rr.needsUpdate=!0,hn=!0}}hn===!0&&(he.updateMultisampleRenderTarget(st),he.updateRenderTargetMipmap(st))}T.setRenderTarget(kt),T.setClearColor(B,W),xn!==void 0&&(Ne.viewport=xn),T.toneMapping=jt}function Uo(re,Ee,Ie){const Ne=Ee.isScene===!0?Ee.overrideMaterial:null;for(let Ae=0,st=re.length;Ae<st;Ae++){const At=re[Ae],kt=At.object,jt=At.geometry,xn=At.group;let hn=At.material;hn.allowOverride===!0&&Ne!==null&&(hn=Ne),kt.layers.test(Ie.layers)&&su(kt,Ee,Ie,jt,hn,xn)}}function su(re,Ee,Ie,Ne,Ae,st){re.onBeforeRender(T,Ee,Ie,Ne,Ae,st),re.modelViewMatrix.multiplyMatrices(Ie.matrixWorldInverse,re.matrixWorld),re.normalMatrix.getNormalMatrix(re.modelViewMatrix),Ae.onBeforeRender(T,Ee,Ie,Ne,re,st),Ae.transparent===!0&&Ae.side===Ea&&Ae.forceSinglePass===!1?(Ae.side=Wr,Ae.needsUpdate=!0,T.renderBufferDirect(Ie,Ee,Ne,Ae,re,st),Ae.side=Ja,Ae.needsUpdate=!0,T.renderBufferDirect(Ie,Ee,Ne,Ae,re,st),Ae.side=Ea):T.renderBufferDirect(Ie,Ee,Ne,Ae,re,st),re.onAfterRender(T,Ee,Ie,Ne,Ae,st)}function fc(re,Ee,Ie){Ee.isScene!==!0&&(Ee=et);const Ne=Ft.get(re),Ae=_.state.lights,st=_.state.shadowsArray,At=Ae.state.version,kt=Kt.getParameters(re,Ae.state,st,Ee,Ie),jt=Kt.getProgramCacheKey(kt);let xn=Ne.programs;Ne.environment=re.isMeshStandardMaterial?Ee.environment:null,Ne.fog=Ee.fog,Ne.envMap=(re.isMeshStandardMaterial?Re:Q).get(re.envMap||Ne.environment),Ne.envMapRotation=Ne.environment!==null&&re.envMap===null?Ee.environmentRotation:re.envMapRotation,xn===void 0&&(re.addEventListener("dispose",Pn),xn=new Map,Ne.programs=xn);let hn=xn.get(jt);if(hn!==void 0){if(Ne.currentProgram===hn&&Ne.lightsStateVersion===At)return Ia(re,kt),hn}else kt.uniforms=Kt.getUniforms(re),re.onBeforeCompile(kt,T),hn=Kt.acquireProgram(kt,jt),xn.set(jt,hn),Ne.uniforms=kt.uniforms;const Gt=Ne.uniforms;return(!re.isShaderMaterial&&!re.isRawShaderMaterial||re.clipping===!0)&&(Gt.clippingPlanes=at.uniform),Ia(re,kt),Ne.needsLights=lu(re),Ne.lightsStateVersion=At,Ne.needsLights&&(Gt.ambientLightColor.value=Ae.state.ambient,Gt.lightProbe.value=Ae.state.probe,Gt.directionalLights.value=Ae.state.directional,Gt.directionalLightShadows.value=Ae.state.directionalShadow,Gt.spotLights.value=Ae.state.spot,Gt.spotLightShadows.value=Ae.state.spotShadow,Gt.rectAreaLights.value=Ae.state.rectArea,Gt.ltc_1.value=Ae.state.rectAreaLTC1,Gt.ltc_2.value=Ae.state.rectAreaLTC2,Gt.pointLights.value=Ae.state.point,Gt.pointLightShadows.value=Ae.state.pointShadow,Gt.hemisphereLights.value=Ae.state.hemi,Gt.directionalShadowMap.value=Ae.state.directionalShadowMap,Gt.directionalShadowMatrix.value=Ae.state.directionalShadowMatrix,Gt.spotShadowMap.value=Ae.state.spotShadowMap,Gt.spotLightMatrix.value=Ae.state.spotLightMatrix,Gt.spotLightMap.value=Ae.state.spotLightMap,Gt.pointShadowMap.value=Ae.state.pointShadowMap,Gt.pointShadowMatrix.value=Ae.state.pointShadowMatrix),Ne.currentProgram=hn,Ne.uniformsList=null,hn}function Rh(re){if(re.uniformsList===null){const Ee=re.currentProgram.getUniforms();re.uniformsList=lT.seqWithValue(Ee.seq,re.uniforms)}return re.uniformsList}function Ia(re,Ee){const Ie=Ft.get(re);Ie.outputColorSpace=Ee.outputColorSpace,Ie.batching=Ee.batching,Ie.batchingColor=Ee.batchingColor,Ie.instancing=Ee.instancing,Ie.instancingColor=Ee.instancingColor,Ie.instancingMorph=Ee.instancingMorph,Ie.skinning=Ee.skinning,Ie.morphTargets=Ee.morphTargets,Ie.morphNormals=Ee.morphNormals,Ie.morphColors=Ee.morphColors,Ie.morphTargetsCount=Ee.morphTargetsCount,Ie.numClippingPlanes=Ee.numClippingPlanes,Ie.numIntersection=Ee.numClipIntersection,Ie.vertexAlphas=Ee.vertexAlphas,Ie.vertexTangents=Ee.vertexTangents,Ie.toneMapping=Ee.toneMapping}function au(re,Ee,Ie,Ne,Ae){Ee.isScene!==!0&&(Ee=et),he.resetTextureUnits();const st=Ee.fog,At=Ne.isMeshStandardMaterial?Ee.environment:null,kt=P===null?T.outputColorSpace:P.isXRRenderTarget===!0?P.texture.colorSpace:Fc,jt=(Ne.isMeshStandardMaterial?Re:Q).get(Ne.envMap||At),xn=Ne.vertexColors===!0&&!!Ie.attributes.color&&Ie.attributes.color.itemSize===4,hn=!!Ie.attributes.tangent&&(!!Ne.normalMap||Ne.anisotropy>0),Gt=!!Ie.morphAttributes.position,Un=!!Ie.morphAttributes.normal,Dn=!!Ie.morphAttributes.color;let Ur=to;Ne.toneMapped&&(P===null||P.isXRRenderTarget===!0)&&(Ur=T.toneMapping);const Lr=Ie.morphAttributes.position||Ie.morphAttributes.normal||Ie.morphAttributes.color,rr=Lr!==void 0?Lr.length:0,an=Ft.get(Ne),qr=_.state.lights;if(le===!0&&(oe===!0||re!==O)){const ui=re===O&&Ne.id===R;at.setState(Ne,re,ui)}let Zn=!1;Ne.version===an.__version?(an.needsLights&&an.lightsStateVersion!==qr.state.version||an.outputColorSpace!==kt||Ae.isBatchedMesh&&an.batching===!1||!Ae.isBatchedMesh&&an.batching===!0||Ae.isBatchedMesh&&an.batchingColor===!0&&Ae.colorTexture===null||Ae.isBatchedMesh&&an.batchingColor===!1&&Ae.colorTexture!==null||Ae.isInstancedMesh&&an.instancing===!1||!Ae.isInstancedMesh&&an.instancing===!0||Ae.isSkinnedMesh&&an.skinning===!1||!Ae.isSkinnedMesh&&an.skinning===!0||Ae.isInstancedMesh&&an.instancingColor===!0&&Ae.instanceColor===null||Ae.isInstancedMesh&&an.instancingColor===!1&&Ae.instanceColor!==null||Ae.isInstancedMesh&&an.instancingMorph===!0&&Ae.morphTexture===null||Ae.isInstancedMesh&&an.instancingMorph===!1&&Ae.morphTexture!==null||an.envMap!==jt||Ne.fog===!0&&an.fog!==st||an.numClippingPlanes!==void 0&&(an.numClippingPlanes!==at.numPlanes||an.numIntersection!==at.numIntersection)||an.vertexAlphas!==xn||an.vertexTangents!==hn||an.morphTargets!==Gt||an.morphNormals!==Un||an.morphColors!==Dn||an.toneMapping!==Ur||an.morphTargetsCount!==rr)&&(Zn=!0):(Zn=!0,an.__version=Ne.version);let Ii=an.currentProgram;Zn===!0&&(Ii=fc(Ne,Ee,Ae));let Mr=!1,Di=!1,uo=!1;const wr=Ii.getUniforms(),Li=an.uniforms;if(zt.useProgram(Ii.program)&&(Mr=!0,Di=!0,uo=!0),Ne.id!==R&&(R=Ne.id,Di=!0),Mr||O!==re){zt.buffers.depth.getReversed()?(fe.copy(re.projectionMatrix),hge(fe),dge(fe),wr.setValue(me,"projectionMatrix",fe)):wr.setValue(me,"projectionMatrix",re.projectionMatrix),wr.setValue(me,"viewMatrix",re.matrixWorldInverse);const Xr=wr.map.cameraPosition;Xr!==void 0&&Xr.setValue(me,we.setFromMatrixPosition(re.matrixWorld)),Jt.logarithmicDepthBuffer&&wr.setValue(me,"logDepthBufFC",2/(Math.log(re.far+1)/Math.LN2)),(Ne.isMeshPhongMaterial||Ne.isMeshToonMaterial||Ne.isMeshLambertMaterial||Ne.isMeshBasicMaterial||Ne.isMeshStandardMaterial||Ne.isShaderMaterial)&&wr.setValue(me,"isOrthographic",re.isOrthographicCamera===!0),O!==re&&(O=re,Di=!0,uo=!0)}if(Ae.isSkinnedMesh){wr.setOptional(me,Ae,"bindMatrix"),wr.setOptional(me,Ae,"bindMatrixInverse");const ui=Ae.skeleton;ui&&(ui.boneTexture===null&&ui.computeBoneTexture(),wr.setValue(me,"boneTexture",ui.boneTexture,he))}Ae.isBatchedMesh&&(wr.setOptional(me,Ae,"batchingTexture"),wr.setValue(me,"batchingTexture",Ae._matricesTexture,he),wr.setOptional(me,Ae,"batchingIdTexture"),wr.setValue(me,"batchingIdTexture",Ae._indirectTexture,he),wr.setOptional(me,Ae,"batchingColorTexture"),Ae._colorsTexture!==null&&wr.setValue(me,"batchingColorTexture",Ae._colorsTexture,he));const ci=Ie.morphAttributes;if((ci.position!==void 0||ci.normal!==void 0||ci.color!==void 0)&&vn.update(Ae,Ie,Ii),(Di||an.receiveShadow!==Ae.receiveShadow)&&(an.receiveShadow=Ae.receiveShadow,wr.setValue(me,"receiveShadow",Ae.receiveShadow)),Ne.isMeshGouraudMaterial&&Ne.envMap!==null&&(Li.envMap.value=jt,Li.flipEnvMap.value=jt.isCubeTexture&&jt.isRenderTargetTexture===!1?-1:1),Ne.isMeshStandardMaterial&&Ne.envMap===null&&Ee.environment!==null&&(Li.envMapIntensity.value=Ee.environmentIntensity),Di&&(wr.setValue(me,"toneMappingExposure",T.toneMappingExposure),an.needsLights&&ou(Li,uo),st&&Ne.fog===!0&&Et.refreshFogUniforms(Li,st),Et.refreshMaterialUniforms(Li,Ne,z,$,_.state.transmissionRenderTarget[re.id]),lT.upload(me,Rh(an),Li,he)),Ne.isShaderMaterial&&Ne.uniformsNeedUpdate===!0&&(lT.upload(me,Rh(an),Li,he),Ne.uniformsNeedUpdate=!1),Ne.isSpriteMaterial&&wr.setValue(me,"center",Ae.center),wr.setValue(me,"modelViewMatrix",Ae.modelViewMatrix),wr.setValue(me,"normalMatrix",Ae.normalMatrix),wr.setValue(me,"modelMatrix",Ae.matrixWorld),Ne.isShaderMaterial||Ne.isRawShaderMaterial){const ui=Ne.uniformsGroups;for(let Xr=0,ir=ui.length;Xr<ir;Xr++){const ma=ui[Xr];Me.update(ma,Ii),Me.bind(ma,Ii)}}return Ii}function ou(re,Ee){re.ambientLightColor.needsUpdate=Ee,re.lightProbe.needsUpdate=Ee,re.directionalLights.needsUpdate=Ee,re.directionalLightShadows.needsUpdate=Ee,re.pointLights.needsUpdate=Ee,re.pointLightShadows.needsUpdate=Ee,re.spotLights.needsUpdate=Ee,re.spotLightShadows.needsUpdate=Ee,re.rectAreaLights.needsUpdate=Ee,re.hemisphereLights.needsUpdate=Ee}function lu(re){return re.isMeshLambertMaterial||re.isMeshToonMaterial||re.isMeshPhongMaterial||re.isMeshStandardMaterial||re.isShadowMaterial||re.isShaderMaterial&&re.lights===!0}this.getActiveCubeFace=function(){return C},this.getActiveMipmapLevel=function(){return A},this.getRenderTarget=function(){return P},this.setRenderTargetTextures=function(re,Ee,Ie){const Ne=Ft.get(re);Ne.__autoAllocateDepthBuffer=re.resolveDepthBuffer===!1,Ne.__autoAllocateDepthBuffer===!1&&(Ne.__useRenderToTexture=!1),Ft.get(re.texture).__webglTexture=Ee,Ft.get(re.depthTexture).__webglTexture=Ne.__autoAllocateDepthBuffer?void 0:Ie,Ne.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(re,Ee){const Ie=Ft.get(re);Ie.__webglFramebuffer=Ee,Ie.__useDefaultFramebuffer=Ee===void 0};const zo=me.createFramebuffer();this.setRenderTarget=function(re,Ee=0,Ie=0){P=re,C=Ee,A=Ie;let Ne=!0,Ae=null,st=!1,At=!1;if(re){const jt=Ft.get(re);if(jt.__useDefaultFramebuffer!==void 0)zt.bindFramebuffer(me.FRAMEBUFFER,null),Ne=!1;else if(jt.__webglFramebuffer===void 0)he.setupRenderTarget(re);else if(jt.__hasExternalTextures)he.rebindTextures(re,Ft.get(re.texture).__webglTexture,Ft.get(re.depthTexture).__webglTexture);else if(re.depthBuffer){const Gt=re.depthTexture;if(jt.__boundDepthTexture!==Gt){if(Gt!==null&&Ft.has(Gt)&&(re.width!==Gt.image.width||re.height!==Gt.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");he.setupDepthRenderbuffer(re)}}const xn=re.texture;(xn.isData3DTexture||xn.isDataArrayTexture||xn.isCompressedArrayTexture)&&(At=!0);const hn=Ft.get(re).__webglFramebuffer;re.isWebGLCubeRenderTarget?(Array.isArray(hn[Ee])?Ae=hn[Ee][Ie]:Ae=hn[Ee],st=!0):re.samples>0&&he.useMultisampledRTT(re)===!1?Ae=Ft.get(re).__webglMultisampledFramebuffer:Array.isArray(hn)?Ae=hn[Ie]:Ae=hn,D.copy(re.viewport),F.copy(re.scissor),U=re.scissorTest}else D.copy(q).multiplyScalar(z).floor(),F.copy(ue).multiplyScalar(z).floor(),U=be;if(Ie!==0&&(Ae=zo),zt.bindFramebuffer(me.FRAMEBUFFER,Ae)&&Ne&&zt.drawBuffers(re,Ae),zt.viewport(D),zt.scissor(F),zt.setScissorTest(U),st){const jt=Ft.get(re.texture);me.framebufferTexture2D(me.FRAMEBUFFER,me.COLOR_ATTACHMENT0,me.TEXTURE_CUBE_MAP_POSITIVE_X+Ee,jt.__webglTexture,Ie)}else if(At){const jt=Ft.get(re.texture),xn=Ee;me.framebufferTextureLayer(me.FRAMEBUFFER,me.COLOR_ATTACHMENT0,jt.__webglTexture,Ie,xn)}else if(re!==null&&Ie!==0){const jt=Ft.get(re.texture);me.framebufferTexture2D(me.FRAMEBUFFER,me.COLOR_ATTACHMENT0,me.TEXTURE_2D,jt.__webglTexture,Ie)}R=-1},this.readRenderTargetPixels=function(re,Ee,Ie,Ne,Ae,st,At){if(!(re&&re.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let kt=Ft.get(re).__webglFramebuffer;if(re.isWebGLCubeRenderTarget&&At!==void 0&&(kt=kt[At]),kt){zt.bindFramebuffer(me.FRAMEBUFFER,kt);try{const jt=re.texture,xn=jt.format,hn=jt.type;if(!Jt.textureFormatReadable(xn)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!Jt.textureTypeReadable(hn)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}Ee>=0&&Ee<=re.width-Ne&&Ie>=0&&Ie<=re.height-Ae&&me.readPixels(Ee,Ie,Ne,Ae,Nn.convert(xn),Nn.convert(hn),st)}finally{const jt=P!==null?Ft.get(P).__webglFramebuffer:null;zt.bindFramebuffer(me.FRAMEBUFFER,jt)}}},this.readRenderTargetPixelsAsync=async function(re,Ee,Ie,Ne,Ae,st,At){if(!(re&&re.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let kt=Ft.get(re).__webglFramebuffer;if(re.isWebGLCubeRenderTarget&&At!==void 0&&(kt=kt[At]),kt)if(Ee>=0&&Ee<=re.width-Ne&&Ie>=0&&Ie<=re.height-Ae){zt.bindFramebuffer(me.FRAMEBUFFER,kt);const jt=re.texture,xn=jt.format,hn=jt.type;if(!Jt.textureFormatReadable(xn))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!Jt.textureTypeReadable(hn))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");const Gt=me.createBuffer();me.bindBuffer(me.PIXEL_PACK_BUFFER,Gt),me.bufferData(me.PIXEL_PACK_BUFFER,st.byteLength,me.STREAM_READ),me.readPixels(Ee,Ie,Ne,Ae,Nn.convert(xn),Nn.convert(hn),0);const Un=P!==null?Ft.get(P).__webglFramebuffer:null;zt.bindFramebuffer(me.FRAMEBUFFER,Un);const Dn=me.fenceSync(me.SYNC_GPU_COMMANDS_COMPLETE,0);return me.flush(),await uge(me,Dn,4),me.bindBuffer(me.PIXEL_PACK_BUFFER,Gt),me.getBufferSubData(me.PIXEL_PACK_BUFFER,0,st),me.deleteBuffer(Gt),me.deleteSync(Dn),st}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")},this.copyFramebufferToTexture=function(re,Ee=null,Ie=0){const Ne=Math.pow(2,-Ie),Ae=Math.floor(re.image.width*Ne),st=Math.floor(re.image.height*Ne),At=Ee!==null?Ee.x:0,kt=Ee!==null?Ee.y:0;he.setTexture2D(re,0),me.copyTexSubImage2D(me.TEXTURE_2D,Ie,0,0,At,kt,Ae,st),zt.unbindTexture()};const cu=me.createFramebuffer(),Oh=me.createFramebuffer();this.copyTextureToTexture=function(re,Ee,Ie=null,Ne=null,Ae=0,st=null){st===null&&(Ae!==0?(ic("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),st=Ae,Ae=0):st=0);let At,kt,jt,xn,hn,Gt,Un,Dn,Ur;const Lr=re.isCompressedTexture?re.mipmaps[st]:re.image;if(Ie!==null)At=Ie.max.x-Ie.min.x,kt=Ie.max.y-Ie.min.y,jt=Ie.isBox3?Ie.max.z-Ie.min.z:1,xn=Ie.min.x,hn=Ie.min.y,Gt=Ie.isBox3?Ie.min.z:0;else{const ci=Math.pow(2,-Ae);At=Math.floor(Lr.width*ci),kt=Math.floor(Lr.height*ci),re.isDataArrayTexture?jt=Lr.depth:re.isData3DTexture?jt=Math.floor(Lr.depth*ci):jt=1,xn=0,hn=0,Gt=0}Ne!==null?(Un=Ne.x,Dn=Ne.y,Ur=Ne.z):(Un=0,Dn=0,Ur=0);const rr=Nn.convert(Ee.format),an=Nn.convert(Ee.type);let qr;Ee.isData3DTexture?(he.setTexture3D(Ee,0),qr=me.TEXTURE_3D):Ee.isDataArrayTexture||Ee.isCompressedArrayTexture?(he.setTexture2DArray(Ee,0),qr=me.TEXTURE_2D_ARRAY):(he.setTexture2D(Ee,0),qr=me.TEXTURE_2D),me.pixelStorei(me.UNPACK_FLIP_Y_WEBGL,Ee.flipY),me.pixelStorei(me.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Ee.premultiplyAlpha),me.pixelStorei(me.UNPACK_ALIGNMENT,Ee.unpackAlignment);const Zn=me.getParameter(me.UNPACK_ROW_LENGTH),Ii=me.getParameter(me.UNPACK_IMAGE_HEIGHT),Mr=me.getParameter(me.UNPACK_SKIP_PIXELS),Di=me.getParameter(me.UNPACK_SKIP_ROWS),uo=me.getParameter(me.UNPACK_SKIP_IMAGES);me.pixelStorei(me.UNPACK_ROW_LENGTH,Lr.width),me.pixelStorei(me.UNPACK_IMAGE_HEIGHT,Lr.height),me.pixelStorei(me.UNPACK_SKIP_PIXELS,xn),me.pixelStorei(me.UNPACK_SKIP_ROWS,hn),me.pixelStorei(me.UNPACK_SKIP_IMAGES,Gt);const wr=re.isDataArrayTexture||re.isData3DTexture,Li=Ee.isDataArrayTexture||Ee.isData3DTexture;if(re.isDepthTexture){const ci=Ft.get(re),ui=Ft.get(Ee),Xr=Ft.get(ci.__renderTarget),ir=Ft.get(ui.__renderTarget);zt.bindFramebuffer(me.READ_FRAMEBUFFER,Xr.__webglFramebuffer),zt.bindFramebuffer(me.DRAW_FRAMEBUFFER,ir.__webglFramebuffer);for(let ma=0;ma<jt;ma++)wr&&(me.framebufferTextureLayer(me.READ_FRAMEBUFFER,me.COLOR_ATTACHMENT0,Ft.get(re).__webglTexture,Ae,Gt+ma),me.framebufferTextureLayer(me.DRAW_FRAMEBUFFER,me.COLOR_ATTACHMENT0,Ft.get(Ee).__webglTexture,st,Ur+ma)),me.blitFramebuffer(xn,hn,At,kt,Un,Dn,At,kt,me.DEPTH_BUFFER_BIT,me.NEAREST);zt.bindFramebuffer(me.READ_FRAMEBUFFER,null),zt.bindFramebuffer(me.DRAW_FRAMEBUFFER,null)}else if(Ae!==0||re.isRenderTargetTexture||Ft.has(re)){const ci=Ft.get(re),ui=Ft.get(Ee);zt.bindFramebuffer(me.READ_FRAMEBUFFER,cu),zt.bindFramebuffer(me.DRAW_FRAMEBUFFER,Oh);for(let Xr=0;Xr<jt;Xr++)wr?me.framebufferTextureLayer(me.READ_FRAMEBUFFER,me.COLOR_ATTACHMENT0,ci.__webglTexture,Ae,Gt+Xr):me.framebufferTexture2D(me.READ_FRAMEBUFFER,me.COLOR_ATTACHMENT0,me.TEXTURE_2D,ci.__webglTexture,Ae),Li?me.framebufferTextureLayer(me.DRAW_FRAMEBUFFER,me.COLOR_ATTACHMENT0,ui.__webglTexture,st,Ur+Xr):me.framebufferTexture2D(me.DRAW_FRAMEBUFFER,me.COLOR_ATTACHMENT0,me.TEXTURE_2D,ui.__webglTexture,st),Ae!==0?me.blitFramebuffer(xn,hn,At,kt,Un,Dn,At,kt,me.COLOR_BUFFER_BIT,me.NEAREST):Li?me.copyTexSubImage3D(qr,st,Un,Dn,Ur+Xr,xn,hn,At,kt):me.copyTexSubImage2D(qr,st,Un,Dn,xn,hn,At,kt);zt.bindFramebuffer(me.READ_FRAMEBUFFER,null),zt.bindFramebuffer(me.DRAW_FRAMEBUFFER,null)}else Li?re.isDataTexture||re.isData3DTexture?me.texSubImage3D(qr,st,Un,Dn,Ur,At,kt,jt,rr,an,Lr.data):Ee.isCompressedArrayTexture?me.compressedTexSubImage3D(qr,st,Un,Dn,Ur,At,kt,jt,rr,Lr.data):me.texSubImage3D(qr,st,Un,Dn,Ur,At,kt,jt,rr,an,Lr):re.isDataTexture?me.texSubImage2D(me.TEXTURE_2D,st,Un,Dn,At,kt,rr,an,Lr.data):re.isCompressedTexture?me.compressedTexSubImage2D(me.TEXTURE_2D,st,Un,Dn,Lr.width,Lr.height,rr,Lr.data):me.texSubImage2D(me.TEXTURE_2D,st,Un,Dn,At,kt,rr,an,Lr);me.pixelStorei(me.UNPACK_ROW_LENGTH,Zn),me.pixelStorei(me.UNPACK_IMAGE_HEIGHT,Ii),me.pixelStorei(me.UNPACK_SKIP_PIXELS,Mr),me.pixelStorei(me.UNPACK_SKIP_ROWS,Di),me.pixelStorei(me.UNPACK_SKIP_IMAGES,uo),st===0&&Ee.generateMipmaps&&me.generateMipmap(qr),zt.unbindTexture()},this.copyTextureToTexture3D=function(re,Ee,Ie=null,Ne=null,Ae=0){return ic('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(re,Ee,Ie,Ne,Ae)},this.initRenderTarget=function(re){Ft.get(re).__webglFramebuffer===void 0&&he.setupRenderTarget(re)},this.initTexture=function(re){re.isCubeTexture?he.setTextureCube(re,0):re.isData3DTexture?he.setTexture3D(re,0):re.isDataArrayTexture||re.isCompressedArrayTexture?he.setTexture2DArray(re,0):he.setTexture2D(re,0),zt.unbindTexture()},this.resetState=function(){C=0,A=0,P=null,zt.reset(),hr.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Ka}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const n=this.getContext();n.drawingBufferColorSpace=tr._getDrawingBufferColorSpace(e),n.unpackColorSpace=tr._getUnpackColorSpace()}}let ji=class{static roundNumber(e,n){const i=Math.pow(10,n);return Math.round(e*i)/i}static sample(e){return e[Math.floor(Math.random()*e.length)]}static distanceToSquared(e,n){var i=e.x-n.x,s=e.y-n.y,a=e.z-n.z;return i*i+s*s+a*a}static isPointInPoly(e,n){for(var i=!1,s=-1,a=e.length,o=a-1;++s<a;o=s)(e[s].z<=n.z&&n.z<e[o].z||e[o].z<=n.z&&n.z<e[s].z)&&n.x<(e[o].x-e[s].x)*(n.z-e[s].z)/(e[o].z-e[s].z)+e[s].x&&(i=!i);return i}static isVectorInPolygon(e,n,i){var s=1e5,a=-1e5,o=[];return n.vertexIds.forEach(l=>{s=Math.min(i[l].y,s),a=Math.max(i[l].y,a),o.push(i[l])}),!!(e.y<a+.5&&e.y>s-.5&&this.isPointInPoly(o,e))}static triarea2(e,n,i){return(i.x-e.x)*(n.z-e.z)-(n.x-e.x)*(i.z-e.z)}static vequal(e,n){return this.distanceToSquared(e,n)<1e-5}static mergeVertices(e,n=1e-4){n=Math.max(n,Number.EPSILON);for(var i={},s=e.getIndex(),a=e.getAttribute("position"),o=s?s.count:a.count,l=0,c=[],u=[],h=Math.log10(1/n),d=Math.pow(10,h),f=0;f<o;f++){var p=s?s.getX(f):f,g="";g+=~~(a.getX(p)*d)+",",g+=~~(a.getY(p)*d)+",",(g+=~~(a.getZ(p)*d)+",")in i?c.push(i[g]):(u.push(a.getX(p)),u.push(a.getY(p)),u.push(a.getZ(p)),i[g]=l,c.push(l),l++)}const v=new ps(new Float32Array(u),a.itemSize,a.normalized),x=new Ws;return x.setAttribute("position",v),x.setIndex(c),x}},u_e=class{constructor(e){this.content=[],this.scoreFunction=e}push(e){this.content.push(e),this.sinkDown(this.content.length-1)}pop(){const e=this.content[0],n=this.content.pop();return this.content.length>0&&(this.content[0]=n,this.bubbleUp(0)),e}remove(e){const n=this.content.indexOf(e),i=this.content.pop();n!==this.content.length-1&&(this.content[n]=i,this.scoreFunction(i)<this.scoreFunction(e)?this.sinkDown(n):this.bubbleUp(n))}size(){return this.content.length}rescoreElement(e){this.sinkDown(this.content.indexOf(e))}sinkDown(e){const n=this.content[e];for(;e>0;){const i=(e+1>>1)-1,s=this.content[i];if(!(this.scoreFunction(n)<this.scoreFunction(s)))break;this.content[i]=n,this.content[e]=s,e=i}}bubbleUp(e){const n=this.content.length,i=this.content[e],s=this.scoreFunction(i);for(;;){const a=e+1<<1,o=a-1;let l,c=null;if(o<n&&(l=this.scoreFunction(this.content[o]),l<s&&(c=o)),a<n&&this.scoreFunction(this.content[a])<(c===null?s:l)&&(c=a),c===null)break;this.content[e]=this.content[c],this.content[c]=i,e=c}}},h_e=class{constructor(){this.portals=[]}push(e,n){n===void 0&&(n=e),this.portals.push({left:e,right:n})}stringPull(){const e=this.portals,n=[];let i,s,a,o=0,l=0,c=0;i=e[0].left,s=e[0].left,a=e[0].right,n.push(i);for(let u=1;u<e.length;u++){const h=e[u].left,d=e[u].right;if(ji.triarea2(i,a,d)<=0){if(!(ji.vequal(i,a)||ji.triarea2(i,s,d)>0)){n.push(s),i=s,o=l,s=i,a=i,l=o,c=o,u=o;continue}a=d,c=u}if(ji.triarea2(i,s,h)>=0){if(!(ji.vequal(i,s)||ji.triarea2(i,a,h)<0)){n.push(a),i=a,o=c,s=i,a=i,l=o,c=o,u=o;continue}s=h,l=u}}return n.length!==0&&ji.vequal(n[n.length-1],e[e.length-1].left)||n.push(e[e.length-1].left),this.path=n,n}},o3=class{constructor(){this.zones={}}static createZone(e,n=1e-4){return(class{static buildZone(i,s){const a=this._buildNavigationMesh(i,s),o={};a.vertices.forEach(c=>{c.x=ji.roundNumber(c.x,2),c.y=ji.roundNumber(c.y,2),c.z=ji.roundNumber(c.z,2)}),o.vertices=a.vertices;const l=this._buildPolygonGroups(a);return o.groups=new Array(l.length),l.forEach((c,u)=>{const h=new Map;c.forEach((f,p)=>{h.set(f,p)});const d=new Array(c.length);c.forEach((f,p)=>{const g=[];f.neighbours.forEach(_=>g.push(h.get(_)));const v=[];f.neighbours.forEach(_=>v.push(this._getSharedVerticesInOrder(f,_)));const x=new pe(0,0,0);x.add(o.vertices[f.vertexIds[0]]),x.add(o.vertices[f.vertexIds[1]]),x.add(o.vertices[f.vertexIds[2]]),x.divideScalar(3),x.x=ji.roundNumber(x.x,2),x.y=ji.roundNumber(x.y,2),x.z=ji.roundNumber(x.z,2),d[p]={id:p,neighbours:g,vertexIds:f.vertexIds,centroid:x,portals:v}}),o.groups[u]=d}),o}static _buildNavigationMesh(i,s){return i=ji.mergeVertices(i,s),this._buildPolygonsFromGeometry(i)}static _spreadGroupId(i){let s=new Set([i]);for(;s.size>0;){const a=s;s=new Set,a.forEach(o=>{o.group=i.group,o.neighbours.forEach(l=>{l.group===void 0&&s.add(l)})})}}static _buildPolygonGroups(i){const s=[];return i.polygons.forEach(a=>{a.group!==void 0?s[a.group].push(a):(a.group=s.length,this._spreadGroupId(a),s.push([a]))}),s}static _buildPolygonNeighbours(i,s){const a=new Set,o=s[i.vertexIds[1]],l=s[i.vertexIds[2]];return s[i.vertexIds[0]].forEach(c=>{c!==i&&(o.includes(c)||l.includes(c))&&a.add(c)}),o.forEach(c=>{c!==i&&l.includes(c)&&a.add(c)}),a}static _buildPolygonsFromGeometry(i){const s=[],a=[],o=i.attributes.position,l=i.index,c=[];for(let u=0;u<o.count;u++)a.push(new pe().fromBufferAttribute(o,u)),c[u]=[];for(let u=0;u<i.index.count;u+=3){const h=l.getX(u),d=l.getX(u+1),f=l.getX(u+2),p={vertexIds:[h,d,f],neighbours:null};s.push(p),c[h].push(p),c[d].push(p),c[f].push(p)}return s.forEach(u=>{u.neighbours=this._buildPolygonNeighbours(u,c)}),{polygons:s,vertices:a}}static _getSharedVerticesInOrder(i,s){const a=i.vertexIds,o=a[0],l=a[1],c=a[2],u=s.vertexIds,h=u.includes(o),d=u.includes(l),f=u.includes(c);return h&&d&&f?Array.from(a):h&&d?[o,l]:d&&f?[l,c]:h&&f?[c,o]:(console.warn("Error processing navigation mesh neighbors; neighbors with <2 shared vertices found."),[])}}).buildZone(e,n)}setZoneData(e,n){this.zones[e]=n}getRandomNode(e,n,i,s){if(!this.zones[e])return new pe;i=i||null,s=s||0;const a=[];return this.zones[e].groups[n].forEach(o=>{i&&s?ji.distanceToSquared(i,o.centroid)<s*s&&a.push(o.centroid):a.push(o.centroid)}),ji.sample(a)||new pe}getClosestNode(e,n,i,s=!1){const a=this.zones[n].vertices;let o=null,l=1/0;return this.zones[n].groups[i].forEach(c=>{const u=ji.distanceToSquared(c.centroid,e);u<l&&(!s||ji.isVectorInPolygon(e,c,a))&&(o=c,l=u)}),o}findPath(e,n,i,s){const a=this.zones[i].groups[s],o=this.zones[i].vertices,l=this.getClosestNode(e,i,s,!0),c=this.getClosestNode(n,i,s,!0);if(!l||!c)return null;const u=(class{static init(p){for(let g=0;g<p.length;g++){const v=p[g];v.f=0,v.g=0,v.h=0,v.cost=1,v.visited=!1,v.closed=!1,v.parent=null}}static cleanUp(p){for(let g=0;g<p.length;g++){const v=p[g];delete v.f,delete v.g,delete v.h,delete v.cost,delete v.visited,delete v.closed,delete v.parent}}static heap(){return new u_e(function(p){return p.f})}static search(p,g,v){this.init(p);const x=this.heap();for(x.push(g);x.size()>0;){const _=x.pop();if(_===v){let S=_;const T=[];for(;S.parent;)T.push(S),S=S.parent;return this.cleanUp(T),T.reverse()}_.closed=!0;const E=this.neighbours(p,_);for(let S=0,T=E.length;S<T;S++){const M=E[S];if(M.closed)continue;const C=_.g+M.cost,A=M.visited;if(!A||C<M.g){if(M.visited=!0,M.parent=_,!M.centroid||!v.centroid)throw new Error("Unexpected state");M.h=M.h||this.heuristic(M.centroid,v.centroid),M.g=C,M.f=M.g+M.h,A?x.rescoreElement(M):x.push(M)}}}return[]}static heuristic(p,g){return ji.distanceToSquared(p,g)}static neighbours(p,g){const v=[];for(let x=0;x<g.neighbours.length;x++)v.push(p[g.neighbours[x]]);return v}}).search(a,l,c),h=function(p,g){for(var v=0;v<p.neighbours.length;v++)if(p.neighbours[v]===g.id)return p.portals[v]},d=new h_e;d.push(e);for(let p=0;p<u.length;p++){const g=u[p],v=u[p+1];if(v){const x=h(g,v);d.push(o[x[0]],o[x[1]])}}d.push(n),d.stringPull();const f=d.path.map(p=>new pe(p.x,p.y,p.z));return f.shift(),f}};o3.prototype.getGroup=function(){const r=new nl;return function(e,n,i=!1){if(!this.zones[e])return null;let s=null,a=Math.pow(50,2);const o=this.zones[e];for(let l=0;l<o.groups.length;l++){const c=o.groups[l];for(const u of c){if(i&&(r.setFromCoplanarPoints(o.vertices[u.vertexIds[0]],o.vertices[u.vertexIds[1]],o.vertices[u.vertexIds[2]]),Math.abs(r.distanceToPoint(n))<.01)&&ji.isPointInPoly([o.vertices[u.vertexIds[0]],o.vertices[u.vertexIds[1]],o.vertices[u.vertexIds[2]]],n))return l;const h=ji.distanceToSquared(u.centroid,n);h<a&&(s=l,a=h)}}return s}}(),o3.prototype.clampStep=function(){const r=new pe,e=new nl,n=new sl,i=new pe;let s,a,o=new pe;return function(l,c,u,h,d,f){const p=this.zones[h].vertices,g=this.zones[h].groups[d],v=[u],x={};x[u.id]=0,s=void 0,o.set(0,0,0),a=1/0,e.setFromCoplanarPoints(p[u.vertexIds[0]],p[u.vertexIds[1]],p[u.vertexIds[2]]),e.projectPoint(c,r),i.copy(r);for(let _=v.pop();_;_=v.pop()){n.set(p[_.vertexIds[0]],p[_.vertexIds[1]],p[_.vertexIds[2]]),n.closestPointToPoint(i,r),r.distanceToSquared(i)<a&&(s=_,o.copy(r),a=r.distanceToSquared(i));const E=x[_.id];if(!(E>2))for(let S=0;S<_.neighbours.length;S++){const T=g[_.neighbours[S]];T.id in x||(v.push(T),x[T.id]=E+1)}}return f.copy(o),s}}();let d_e=class extends Is{constructor(){super(),this._playerMarker=new li(new Ep(.25,32,32),new Aa({color:15631215})),this._targetMarker=new li(new Bc(.3,.3,.3),new Aa({color:14469912})),this._nodeMarker=new li(new Bc(.1,.8,.1),new Aa({color:4417387})),this._stepMarker=new li(new Bc(.1,1,.1),new Aa({color:14472114})),this._pathMarker=new Is,this._pathLineMaterial=new __({color:41903,linewidth:2}),this._pathPointMaterial=new Aa({color:41903}),this._pathPointGeometry=new Ep(.08),this._markers=[this._playerMarker,this._targetMarker,this._nodeMarker,this._stepMarker,this._pathMarker],this._markers.forEach(e=>{e.visible=!1,this.add(e)})}setPath(e){for(;this._pathMarker.children.length;)this._pathMarker.children[0].visible=!1,this._pathMarker.remove(this._pathMarker.children[0]);e=[this._playerMarker.position].concat(e);const n=new Ws;n.setAttribute("position",new ps(new Float32Array(3*e.length),3));for(let i=0;i<e.length;i++)n.attributes.position.setXYZ(i,e[i].x,e[i].y+.2,e[i].z);this._pathMarker.add(new mee(n,this._pathLineMaterial));for(let i=0;i<e.length-1;i++){const s=new li(this._pathPointGeometry,this._pathPointMaterial);s.position.copy(e[i]),s.position.y+=.2,this._pathMarker.add(s)}return this._pathMarker.visible=!0,this}setPlayerPosition(e){return this._playerMarker.position.copy(e),this._playerMarker.visible=!0,this}setTargetPosition(e){return this._targetMarker.position.copy(e),this._targetMarker.visible=!0,this}setNodePosition(e){return this._nodeMarker.position.copy(e),this._nodeMarker.visible=!0,this}setStepPosition(e){return this._stepMarker.position.copy(e),this._stepMarker.visible=!0,this}reset(){for(;this._pathMarker.children.length;)this._pathMarker.children[0].visible=!1,this._pathMarker.remove(this._pathMarker.children[0]);return this._markers.forEach(e=>{e.visible=!1}),this}};const f_e=Object.freeze(Object.defineProperty({__proto__:null,Pathfinding:o3,PathfindingHelper:d_e},Symbol.toStringTag,{value:"Module"})),p_e=mce(f_e);var JN,rV;function m_e(){if(rV)return JN;rV=1;const{Pathfinding:r}=p_e,e=new r,n="level";return JN=AFRAME.registerSystem("nav",{init:function(){this.navMesh=null,this.agents=new Set},setNavMeshGeometry:function(i){this.navMesh=new THREE.Mesh(i),e.setZoneData(n,r.createZone(i)),Array.from(this.agents).forEach(s=>s.updateNavLocation())},getNavMesh:function(){return this.navMesh},addAgent:function(i){this.agents.add(i)},removeAgent:function(i){this.agents.delete(i)},getPath:function(i,s,a){return this.navMesh?e.findPath(i,s,n,a):null},getGroup:function(i){return this.navMesh?e.getGroup(n,i):null},getNode:function(i,s){return this.navMesh?e.getClosestNode(i,n,s,!0):null},clampStep:function(i,s,a,o,l){if(this.navMesh){if(!o)return l.copy(s),this.getNode(s,a)}else return l.copy(s),null;return e.clampStep(i,s,o,n,a,l)}}),JN}var iV;function g_e(){return iV||(iV=1,wme(),Sme(),m_e()),J6}var sV={},eP,aV;function y_e(){return aV||(aV=1,eP=AFRAME.registerPrimitive("a-grid",{defaultComponents:{geometry:{primitive:"plane",width:75,height:75},rotation:{x:-90,y:0,z:0},material:{src:"url(https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v1.16.3/assets/grid.png)",repeat:"75 75"}},mappings:{width:"geometry.width",height:"geometry.height",src:"material.src"}})),eP}var $1={},oV;function v_e(){return oV||(oV=1,$1.Primitive=AFRAME.registerPrimitive("a-ocean",{defaultComponents:{ocean:{},rotation:{x:-90,y:0,z:0}},mappings:{width:"ocean.width",depth:"ocean.depth",density:"ocean.density",amplitude:"ocean.amplitude",amplitudeVariance:"ocean.amplitudeVariance",speed:"ocean.speed",speedVariance:"ocean.speedVariance",color:"ocean.color",opacity:"ocean.opacity"}}),$1.Component=AFRAME.registerComponent("ocean",{schema:{width:{default:10,min:0},depth:{default:10,min:0},density:{default:10},amplitude:{default:.1},amplitudeVariance:{default:.3},speed:{default:1},speedVariance:{default:2},color:{default:"#7AD2F7",type:"color"},opacity:{default:.8}},play:function(){const r=this.el,e=this.data;let n=r.components.material;const i=new THREE.PlaneGeometry(e.width,e.depth,e.density,e.density);this.waves=[];const s=i.getAttribute("position");for(let a=0;a<s.count;a++)this.waves.push({z:s.getZ(a),ang:Math.random()*Math.PI*2,amp:e.amplitude+Math.random()*e.amplitudeVariance,speed:(e.speed+Math.random()*e.speedVariance)/1e3});n||(n={},n.material=new THREE.MeshPhongMaterial({color:e.color,transparent:e.opacity<1,opacity:e.opacity,flatShading:!0})),this.mesh=new THREE.Mesh(i,n.material),r.setObject3D("mesh",this.mesh)},remove:function(){this.el.removeObject3D("mesh")},tick:function(r,e){if(!e)return;const n=this.mesh.geometry.getAttribute("position");for(let i=0;i<n.count;i++){const s=this.waves[i],a=s.z+Math.sin(s.ang)*s.amp;n.setZ(i,a),s.ang+=s.speed*e}n.needsUpdate=!0}})),$1}var G1={},lV;function x_e(){return lV||(lV=1,G1.Primitive=AFRAME.registerPrimitive("a-tube",{defaultComponents:{tube:{}},mappings:{path:"tube.path",segments:"tube.segments",radius:"tube.radius","radial-segments":"tube.radialSegments",closed:"tube.closed"}}),G1.Component=AFRAME.registerComponent("tube",{schema:{path:{default:[]},segments:{default:64},radius:{default:1},radialSegments:{default:8},closed:{default:!1}},init:function(){const r=this.el,e=this.data;let n=r.components.material;if(!e.path.length){console.error("[a-tube] `path` property expected but not found.");return}const i=new THREE.CatmullRomCurve3(e.path.map(function(a){return a=a.split(" "),new THREE.Vector3(Number(a[0]),Number(a[1]),Number(a[2]))})),s=new THREE.TubeGeometry(i,e.segments,e.radius,e.radialSegments,e.closed);n||(n={},n.material=new THREE.MeshPhongMaterial),this.mesh=new THREE.Mesh(s,n.material),this.el.setObject3D("mesh",this.mesh)},update:function(r){Object.keys(r).length&&(this.remove(),this.init())},remove:function(){this.mesh&&this.el.removeObject3D("mesh")}})),G1}var cV;function b_e(){return cV||(cV=1,y_e(),v_e(),x_e()),sV}var uV;function __e(){return uV||(uV=1,Bde(),mme(),_me(),g_e(),b_e()),x$}__e();function Cee(r,e,n){var i,s=1;r==null&&(r=0),e==null&&(e=0),n==null&&(n=0);function a(){var o,l=i.length,c,u=0,h=0,d=0;for(o=0;o<l;++o)c=i[o],u+=c.x||0,h+=c.y||0,d+=c.z||0;for(u=(u/l-r)*s,h=(h/l-e)*s,d=(d/l-n)*s,o=0;o<l;++o)c=i[o],u&&(c.x-=u),h&&(c.y-=h),d&&(c.z-=d)}return a.initialize=function(o){i=o},a.x=function(o){return arguments.length?(r=+o,a):r},a.y=function(o){return arguments.length?(e=+o,a):e},a.z=function(o){return arguments.length?(n=+o,a):n},a.strength=function(o){return arguments.length?(s=+o,a):s},a}function w_e(r){const e=+this._x.call(null,r);return Nee(this.cover(e),e,r)}function Nee(r,e,n){if(isNaN(e))return r;var i,s=r._root,a={data:n},o=r._x0,l=r._x1,c,u,h,d,f;if(!s)return r._root=a,r;for(;s.length;)if((h=e>=(c=(o+l)/2))?o=c:l=c,i=s,!(s=s[d=+h]))return i[d]=a,r;if(u=+r._x.call(null,s.data),e===u)return a.next=s,i?i[d]=a:r._root=a,r;do i=i?i[d]=new Array(2):r._root=new Array(2),(h=e>=(c=(o+l)/2))?o=c:l=c;while((d=+h)==(f=+(u>=c)));return i[f]=s,i[d]=a,r}function S_e(r){Array.isArray(r)||(r=Array.from(r));const e=r.length,n=new Float64Array(e);let i=1/0,s=-1/0;for(let a=0,o;a<e;++a)isNaN(o=+this._x.call(null,r[a]))||(n[a]=o,o<i&&(i=o),o>s&&(s=o));if(i>s)return this;this.cover(i).cover(s);for(let a=0;a<e;++a)Nee(this,n[a],r[a]);return this}function T_e(r){if(isNaN(r=+r))return this;var e=this._x0,n=this._x1;if(isNaN(e))n=(e=Math.floor(r))+1;else{for(var i=n-e||1,s=this._root,a,o;e>r||r>=n;)switch(o=+(r<e),a=new Array(2),a[o]=s,s=a,i*=2,o){case 0:n=e+i;break;case 1:e=n-i;break}this._root&&this._root.length&&(this._root=s)}return this._x0=e,this._x1=n,this}function E_e(){var r=[];return this.visit(function(e){if(!e.length)do r.push(e.data);while(e=e.next)}),r}function M_e(r){return arguments.length?this.cover(+r[0][0]).cover(+r[1][0]):isNaN(this._x0)?void 0:[[this._x0],[this._x1]]}function ah(r,e,n){this.node=r,this.x0=e,this.x1=n}function A_e(r,e){var n,i=this._x0,s,a,o=this._x1,l=[],c=this._root,u,h;for(c&&l.push(new ah(c,i,o)),e==null?e=1/0:(i=r-e,o=r+e);u=l.pop();)if(!(!(c=u.node)||(s=u.x0)>o||(a=u.x1)<i))if(c.length){var d=(s+a)/2;l.push(new ah(c[1],d,a),new ah(c[0],s,d)),(h=+(r>=d))&&(u=l[l.length-1],l[l.length-1]=l[l.length-1-h],l[l.length-1-h]=u)}else{var f=Math.abs(r-+this._x.call(null,c.data));f<e&&(e=f,i=r-f,o=r+f,n=c.data)}return n}function C_e(r){if(isNaN(c=+this._x.call(null,r)))return this;var e,n=this._root,i,s,a,o=this._x0,l=this._x1,c,u,h,d,f;if(!n)return this;if(n.length)for(;;){if((h=c>=(u=(o+l)/2))?o=u:l=u,e=n,!(n=n[d=+h]))return this;if(!n.length)break;e[d+1&1]&&(i=e,f=d)}for(;n.data!==r;)if(s=n,!(n=n.next))return this;return(a=n.next)&&delete n.next,s?(a?s.next=a:delete s.next,this):e?(a?e[d]=a:delete e[d],(n=e[0]||e[1])&&n===(e[1]||e[0])&&!n.length&&(i?i[f]=n:this._root=n),this):(this._root=a,this)}function N_e(r){for(var e=0,n=r.length;e<n;++e)this.remove(r[e]);return this}function P_e(){return this._root}function R_e(){var r=0;return this.visit(function(e){if(!e.length)do++r;while(e=e.next)}),r}function O_e(r){var e=[],n,i=this._root,s,a,o;for(i&&e.push(new ah(i,this._x0,this._x1));n=e.pop();)if(!r(i=n.node,a=n.x0,o=n.x1)&&i.length){var l=(a+o)/2;(s=i[1])&&e.push(new ah(s,l,o)),(s=i[0])&&e.push(new ah(s,a,l))}return this}function k_e(r){var e=[],n=[],i;for(this._root&&e.push(new ah(this._root,this._x0,this._x1));i=e.pop();){var s=i.node;if(s.length){var a,o=i.x0,l=i.x1,c=(o+l)/2;(a=s[0])&&e.push(new ah(a,o,c)),(a=s[1])&&e.push(new ah(a,c,l))}n.push(i)}for(;i=n.pop();)r(i.node,i.x0,i.x1);return this}function I_e(r){return r[0]}function D_e(r){return arguments.length?(this._x=r,this):this._x}function Pee(r,e){var n=new Hj(e??I_e,NaN,NaN);return r==null?n:n.addAll(r)}function Hj(r,e,n){this._x=r,this._x0=e,this._x1=n,this._root=void 0}function hV(r){for(var e={data:r.data},n=e;r=r.next;)n=n.next={data:r.data};return e}var so=Pee.prototype=Hj.prototype;so.copy=function(){var r=new Hj(this._x,this._x0,this._x1),e=this._root,n,i;if(!e)return r;if(!e.length)return r._root=hV(e),r;for(n=[{source:e,target:r._root=new Array(2)}];e=n.pop();)for(var s=0;s<2;++s)(i=e.source[s])&&(i.length?n.push({source:i,target:e.target[s]=new Array(2)}):e.target[s]=hV(i));return r};so.add=w_e;so.addAll=S_e;so.cover=T_e;so.data=E_e;so.extent=M_e;so.find=A_e;so.remove=C_e;so.removeAll=N_e;so.root=P_e;so.size=R_e;so.visit=O_e;so.visitAfter=k_e;so.x=D_e;function L_e(r){const e=+this._x.call(null,r),n=+this._y.call(null,r);return Ree(this.cover(e,n),e,n,r)}function Ree(r,e,n,i){if(isNaN(e)||isNaN(n))return r;var s,a=r._root,o={data:i},l=r._x0,c=r._y0,u=r._x1,h=r._y1,d,f,p,g,v,x,_,E;if(!a)return r._root=o,r;for(;a.length;)if((v=e>=(d=(l+u)/2))?l=d:u=d,(x=n>=(f=(c+h)/2))?c=f:h=f,s=a,!(a=a[_=x<<1|v]))return s[_]=o,r;if(p=+r._x.call(null,a.data),g=+r._y.call(null,a.data),e===p&&n===g)return o.next=a,s?s[_]=o:r._root=o,r;do s=s?s[_]=new Array(4):r._root=new Array(4),(v=e>=(d=(l+u)/2))?l=d:u=d,(x=n>=(f=(c+h)/2))?c=f:h=f;while((_=x<<1|v)===(E=(g>=f)<<1|p>=d));return s[E]=a,s[_]=o,r}function F_e(r){var e,n,i=r.length,s,a,o=new Array(i),l=new Array(i),c=1/0,u=1/0,h=-1/0,d=-1/0;for(n=0;n<i;++n)isNaN(s=+this._x.call(null,e=r[n]))||isNaN(a=+this._y.call(null,e))||(o[n]=s,l[n]=a,s<c&&(c=s),s>h&&(h=s),a<u&&(u=a),a>d&&(d=a));if(c>h||u>d)return this;for(this.cover(c,u).cover(h,d),n=0;n<i;++n)Ree(this,o[n],l[n],r[n]);return this}function B_e(r,e){if(isNaN(r=+r)||isNaN(e=+e))return this;var n=this._x0,i=this._y0,s=this._x1,a=this._y1;if(isNaN(n))s=(n=Math.floor(r))+1,a=(i=Math.floor(e))+1;else{for(var o=s-n||1,l=this._root,c,u;n>r||r>=s||i>e||e>=a;)switch(u=(e<i)<<1|r<n,c=new Array(4),c[u]=l,l=c,o*=2,u){case 0:s=n+o,a=i+o;break;case 1:n=s-o,a=i+o;break;case 2:s=n+o,i=a-o;break;case 3:n=s-o,i=a-o;break}this._root&&this._root.length&&(this._root=l)}return this._x0=n,this._y0=i,this._x1=s,this._y1=a,this}function j_e(){var r=[];return this.visit(function(e){if(!e.length)do r.push(e.data);while(e=e.next)}),r}function U_e(r){return arguments.length?this.cover(+r[0][0],+r[0][1]).cover(+r[1][0],+r[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Ca(r,e,n,i,s){this.node=r,this.x0=e,this.y0=n,this.x1=i,this.y1=s}function z_e(r,e,n){var i,s=this._x0,a=this._y0,o,l,c,u,h=this._x1,d=this._y1,f=[],p=this._root,g,v;for(p&&f.push(new Ca(p,s,a,h,d)),n==null?n=1/0:(s=r-n,a=e-n,h=r+n,d=e+n,n*=n);g=f.pop();)if(!(!(p=g.node)||(o=g.x0)>h||(l=g.y0)>d||(c=g.x1)<s||(u=g.y1)<a))if(p.length){var x=(o+c)/2,_=(l+u)/2;f.push(new Ca(p[3],x,_,c,u),new Ca(p[2],o,_,x,u),new Ca(p[1],x,l,c,_),new Ca(p[0],o,l,x,_)),(v=(e>=_)<<1|r>=x)&&(g=f[f.length-1],f[f.length-1]=f[f.length-1-v],f[f.length-1-v]=g)}else{var E=r-+this._x.call(null,p.data),S=e-+this._y.call(null,p.data),T=E*E+S*S;if(T<n){var M=Math.sqrt(n=T);s=r-M,a=e-M,h=r+M,d=e+M,i=p.data}}return i}function $_e(r){if(isNaN(h=+this._x.call(null,r))||isNaN(d=+this._y.call(null,r)))return this;var e,n=this._root,i,s,a,o=this._x0,l=this._y0,c=this._x1,u=this._y1,h,d,f,p,g,v,x,_;if(!n)return this;if(n.length)for(;;){if((g=h>=(f=(o+c)/2))?o=f:c=f,(v=d>=(p=(l+u)/2))?l=p:u=p,e=n,!(n=n[x=v<<1|g]))return this;if(!n.length)break;(e[x+1&3]||e[x+2&3]||e[x+3&3])&&(i=e,_=x)}for(;n.data!==r;)if(s=n,!(n=n.next))return this;return(a=n.next)&&delete n.next,s?(a?s.next=a:delete s.next,this):e?(a?e[x]=a:delete e[x],(n=e[0]||e[1]||e[2]||e[3])&&n===(e[3]||e[2]||e[1]||e[0])&&!n.length&&(i?i[_]=n:this._root=n),this):(this._root=a,this)}function G_e(r){for(var e=0,n=r.length;e<n;++e)this.remove(r[e]);return this}function V_e(){return this._root}function H_e(){var r=0;return this.visit(function(e){if(!e.length)do++r;while(e=e.next)}),r}function W_e(r){var e=[],n,i=this._root,s,a,o,l,c;for(i&&e.push(new Ca(i,this._x0,this._y0,this._x1,this._y1));n=e.pop();)if(!r(i=n.node,a=n.x0,o=n.y0,l=n.x1,c=n.y1)&&i.length){var u=(a+l)/2,h=(o+c)/2;(s=i[3])&&e.push(new Ca(s,u,h,l,c)),(s=i[2])&&e.push(new Ca(s,a,h,u,c)),(s=i[1])&&e.push(new Ca(s,u,o,l,h)),(s=i[0])&&e.push(new Ca(s,a,o,u,h))}return this}function q_e(r){var e=[],n=[],i;for(this._root&&e.push(new Ca(this._root,this._x0,this._y0,this._x1,this._y1));i=e.pop();){var s=i.node;if(s.length){var a,o=i.x0,l=i.y0,c=i.x1,u=i.y1,h=(o+c)/2,d=(l+u)/2;(a=s[0])&&e.push(new Ca(a,o,l,h,d)),(a=s[1])&&e.push(new Ca(a,h,l,c,d)),(a=s[2])&&e.push(new Ca(a,o,d,h,u)),(a=s[3])&&e.push(new Ca(a,h,d,c,u))}n.push(i)}for(;i=n.pop();)r(i.node,i.x0,i.y0,i.x1,i.y1);return this}function X_e(r){return r[0]}function K_e(r){return arguments.length?(this._x=r,this):this._x}function Y_e(r){return r[1]}function Z_e(r){return arguments.length?(this._y=r,this):this._y}function Oee(r,e,n){var i=new Wj(e??X_e,n??Y_e,NaN,NaN,NaN,NaN);return r==null?i:i.addAll(r)}function Wj(r,e,n,i,s,a){this._x=r,this._y=e,this._x0=n,this._y0=i,this._x1=s,this._y1=a,this._root=void 0}function dV(r){for(var e={data:r.data},n=e;r=r.next;)n=n.next={data:r.data};return e}var ka=Oee.prototype=Wj.prototype;ka.copy=function(){var r=new Wj(this._x,this._y,this._x0,this._y0,this._x1,this._y1),e=this._root,n,i;if(!e)return r;if(!e.length)return r._root=dV(e),r;for(n=[{source:e,target:r._root=new Array(4)}];e=n.pop();)for(var s=0;s<4;++s)(i=e.source[s])&&(i.length?n.push({source:i,target:e.target[s]=new Array(4)}):e.target[s]=dV(i));return r};ka.add=L_e;ka.addAll=F_e;ka.cover=B_e;ka.data=j_e;ka.extent=U_e;ka.find=z_e;ka.remove=$_e;ka.removeAll=G_e;ka.root=V_e;ka.size=H_e;ka.visit=W_e;ka.visitAfter=q_e;ka.x=K_e;ka.y=Z_e;function Q_e(r){const e=+this._x.call(null,r),n=+this._y.call(null,r),i=+this._z.call(null,r);return kee(this.cover(e,n,i),e,n,i,r)}function kee(r,e,n,i,s){if(isNaN(e)||isNaN(n)||isNaN(i))return r;var a,o=r._root,l={data:s},c=r._x0,u=r._y0,h=r._z0,d=r._x1,f=r._y1,p=r._z1,g,v,x,_,E,S,T,M,C,A,P;if(!o)return r._root=l,r;for(;o.length;)if((T=e>=(g=(c+d)/2))?c=g:d=g,(M=n>=(v=(u+f)/2))?u=v:f=v,(C=i>=(x=(h+p)/2))?h=x:p=x,a=o,!(o=o[A=C<<2|M<<1|T]))return a[A]=l,r;if(_=+r._x.call(null,o.data),E=+r._y.call(null,o.data),S=+r._z.call(null,o.data),e===_&&n===E&&i===S)return l.next=o,a?a[A]=l:r._root=l,r;do a=a?a[A]=new Array(8):r._root=new Array(8),(T=e>=(g=(c+d)/2))?c=g:d=g,(M=n>=(v=(u+f)/2))?u=v:f=v,(C=i>=(x=(h+p)/2))?h=x:p=x;while((A=C<<2|M<<1|T)===(P=(S>=x)<<2|(E>=v)<<1|_>=g));return a[P]=o,a[A]=l,r}function J_e(r){Array.isArray(r)||(r=Array.from(r));const e=r.length,n=new Float64Array(e),i=new Float64Array(e),s=new Float64Array(e);let a=1/0,o=1/0,l=1/0,c=-1/0,u=-1/0,h=-1/0;for(let d=0,f,p,g,v;d<e;++d)isNaN(p=+this._x.call(null,f=r[d]))||isNaN(g=+this._y.call(null,f))||isNaN(v=+this._z.call(null,f))||(n[d]=p,i[d]=g,s[d]=v,p<a&&(a=p),p>c&&(c=p),g<o&&(o=g),g>u&&(u=g),v<l&&(l=v),v>h&&(h=v));if(a>c||o>u||l>h)return this;this.cover(a,o,l).cover(c,u,h);for(let d=0;d<e;++d)kee(this,n[d],i[d],s[d],r[d]);return this}function ewe(r,e,n){if(isNaN(r=+r)||isNaN(e=+e)||isNaN(n=+n))return this;var i=this._x0,s=this._y0,a=this._z0,o=this._x1,l=this._y1,c=this._z1;if(isNaN(i))o=(i=Math.floor(r))+1,l=(s=Math.floor(e))+1,c=(a=Math.floor(n))+1;else{for(var u=o-i||1,h=this._root,d,f;i>r||r>=o||s>e||e>=l||a>n||n>=c;)switch(f=(n<a)<<2|(e<s)<<1|r<i,d=new Array(8),d[f]=h,h=d,u*=2,f){case 0:o=i+u,l=s+u,c=a+u;break;case 1:i=o-u,l=s+u,c=a+u;break;case 2:o=i+u,s=l-u,c=a+u;break;case 3:i=o-u,s=l-u,c=a+u;break;case 4:o=i+u,l=s+u,a=c-u;break;case 5:i=o-u,l=s+u,a=c-u;break;case 6:o=i+u,s=l-u,a=c-u;break;case 7:i=o-u,s=l-u,a=c-u;break}this._root&&this._root.length&&(this._root=h)}return this._x0=i,this._y0=s,this._z0=a,this._x1=o,this._y1=l,this._z1=c,this}function twe(){var r=[];return this.visit(function(e){if(!e.length)do r.push(e.data);while(e=e.next)}),r}function nwe(r){return arguments.length?this.cover(+r[0][0],+r[0][1],+r[0][2]).cover(+r[1][0],+r[1][1],+r[1][2]):isNaN(this._x0)?void 0:[[this._x0,this._y0,this._z0],[this._x1,this._y1,this._z1]]}function $r(r,e,n,i,s,a,o){this.node=r,this.x0=e,this.y0=n,this.z0=i,this.x1=s,this.y1=a,this.z1=o}function rwe(r,e,n,i){var s,a=this._x0,o=this._y0,l=this._z0,c,u,h,d,f,p,g=this._x1,v=this._y1,x=this._z1,_=[],E=this._root,S,T;for(E&&_.push(new $r(E,a,o,l,g,v,x)),i==null?i=1/0:(a=r-i,o=e-i,l=n-i,g=r+i,v=e+i,x=n+i,i*=i);S=_.pop();)if(!(!(E=S.node)||(c=S.x0)>g||(u=S.y0)>v||(h=S.z0)>x||(d=S.x1)<a||(f=S.y1)<o||(p=S.z1)<l))if(E.length){var M=(c+d)/2,C=(u+f)/2,A=(h+p)/2;_.push(new $r(E[7],M,C,A,d,f,p),new $r(E[6],c,C,A,M,f,p),new $r(E[5],M,u,A,d,C,p),new $r(E[4],c,u,A,M,C,p),new $r(E[3],M,C,h,d,f,A),new $r(E[2],c,C,h,M,f,A),new $r(E[1],M,u,h,d,C,A),new $r(E[0],c,u,h,M,C,A)),(T=(n>=A)<<2|(e>=C)<<1|r>=M)&&(S=_[_.length-1],_[_.length-1]=_[_.length-1-T],_[_.length-1-T]=S)}else{var P=r-+this._x.call(null,E.data),R=e-+this._y.call(null,E.data),O=n-+this._z.call(null,E.data),D=P*P+R*R+O*O;if(D<i){var F=Math.sqrt(i=D);a=r-F,o=e-F,l=n-F,g=r+F,v=e+F,x=n+F,s=E.data}}return s}const iwe=(r,e,n,i,s,a)=>Math.sqrt((r-i)**2+(e-s)**2+(n-a)**2);function swe(r,e,n,i){const s=[],a=r-i,o=e-i,l=n-i,c=r+i,u=e+i,h=n+i;return this.visit((d,f,p,g,v,x,_)=>{if(!d.length)do{const E=d.data;iwe(r,e,n,this._x(E),this._y(E),this._z(E))<=i&&s.push(E)}while(d=d.next);return f>c||p>u||g>h||v<a||x<o||_<l}),s}function awe(r){if(isNaN(f=+this._x.call(null,r))||isNaN(p=+this._y.call(null,r))||isNaN(g=+this._z.call(null,r)))return this;var e,n=this._root,i,s,a,o=this._x0,l=this._y0,c=this._z0,u=this._x1,h=this._y1,d=this._z1,f,p,g,v,x,_,E,S,T,M,C;if(!n)return this;if(n.length)for(;;){if((E=f>=(v=(o+u)/2))?o=v:u=v,(S=p>=(x=(l+h)/2))?l=x:h=x,(T=g>=(_=(c+d)/2))?c=_:d=_,e=n,!(n=n[M=T<<2|S<<1|E]))return this;if(!n.length)break;(e[M+1&7]||e[M+2&7]||e[M+3&7]||e[M+4&7]||e[M+5&7]||e[M+6&7]||e[M+7&7])&&(i=e,C=M)}for(;n.data!==r;)if(s=n,!(n=n.next))return this;return(a=n.next)&&delete n.next,s?(a?s.next=a:delete s.next,this):e?(a?e[M]=a:delete e[M],(n=e[0]||e[1]||e[2]||e[3]||e[4]||e[5]||e[6]||e[7])&&n===(e[7]||e[6]||e[5]||e[4]||e[3]||e[2]||e[1]||e[0])&&!n.length&&(i?i[C]=n:this._root=n),this):(this._root=a,this)}function owe(r){for(var e=0,n=r.length;e<n;++e)this.remove(r[e]);return this}function lwe(){return this._root}function cwe(){var r=0;return this.visit(function(e){if(!e.length)do++r;while(e=e.next)}),r}function uwe(r){var e=[],n,i=this._root,s,a,o,l,c,u,h;for(i&&e.push(new $r(i,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));n=e.pop();)if(!r(i=n.node,a=n.x0,o=n.y0,l=n.z0,c=n.x1,u=n.y1,h=n.z1)&&i.length){var d=(a+c)/2,f=(o+u)/2,p=(l+h)/2;(s=i[7])&&e.push(new $r(s,d,f,p,c,u,h)),(s=i[6])&&e.push(new $r(s,a,f,p,d,u,h)),(s=i[5])&&e.push(new $r(s,d,o,p,c,f,h)),(s=i[4])&&e.push(new $r(s,a,o,p,d,f,h)),(s=i[3])&&e.push(new $r(s,d,f,l,c,u,p)),(s=i[2])&&e.push(new $r(s,a,f,l,d,u,p)),(s=i[1])&&e.push(new $r(s,d,o,l,c,f,p)),(s=i[0])&&e.push(new $r(s,a,o,l,d,f,p))}return this}function hwe(r){var e=[],n=[],i;for(this._root&&e.push(new $r(this._root,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));i=e.pop();){var s=i.node;if(s.length){var a,o=i.x0,l=i.y0,c=i.z0,u=i.x1,h=i.y1,d=i.z1,f=(o+u)/2,p=(l+h)/2,g=(c+d)/2;(a=s[0])&&e.push(new $r(a,o,l,c,f,p,g)),(a=s[1])&&e.push(new $r(a,f,l,c,u,p,g)),(a=s[2])&&e.push(new $r(a,o,p,c,f,h,g)),(a=s[3])&&e.push(new $r(a,f,p,c,u,h,g)),(a=s[4])&&e.push(new $r(a,o,l,g,f,p,d)),(a=s[5])&&e.push(new $r(a,f,l,g,u,p,d)),(a=s[6])&&e.push(new $r(a,o,p,g,f,h,d)),(a=s[7])&&e.push(new $r(a,f,p,g,u,h,d))}n.push(i)}for(;i=n.pop();)r(i.node,i.x0,i.y0,i.z0,i.x1,i.y1,i.z1);return this}function dwe(r){return r[0]}function fwe(r){return arguments.length?(this._x=r,this):this._x}function pwe(r){return r[1]}function mwe(r){return arguments.length?(this._y=r,this):this._y}function gwe(r){return r[2]}function ywe(r){return arguments.length?(this._z=r,this):this._z}function Iee(r,e,n,i){var s=new qj(e??dwe,n??pwe,i??gwe,NaN,NaN,NaN,NaN,NaN,NaN);return r==null?s:s.addAll(r)}function qj(r,e,n,i,s,a,o,l,c){this._x=r,this._y=e,this._z=n,this._x0=i,this._y0=s,this._z0=a,this._x1=o,this._y1=l,this._z1=c,this._root=void 0}function fV(r){for(var e={data:r.data},n=e;r=r.next;)n=n.next={data:r.data};return e}var qs=Iee.prototype=qj.prototype;qs.copy=function(){var r=new qj(this._x,this._y,this._z,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1),e=this._root,n,i;if(!e)return r;if(!e.length)return r._root=fV(e),r;for(n=[{source:e,target:r._root=new Array(8)}];e=n.pop();)for(var s=0;s<8;++s)(i=e.source[s])&&(i.length?n.push({source:i,target:e.target[s]=new Array(8)}):e.target[s]=fV(i));return r};qs.add=Q_e;qs.addAll=J_e;qs.cover=ewe;qs.data=twe;qs.extent=nwe;qs.find=rwe;qs.findAllWithinRadius=swe;qs.remove=awe;qs.removeAll=owe;qs.root=lwe;qs.size=cwe;qs.visit=uwe;qs.visitAfter=hwe;qs.x=fwe;qs.y=mwe;qs.z=ywe;function Xu(r){return function(){return r}}function zu(r){return(r()-.5)*1e-6}function vwe(r){return r.index}function pV(r,e){var n=r.get(e);if(!n)throw new Error("node not found: "+e);return n}function Dee(r){var e=vwe,n=f,i,s=Xu(30),a,o,l,c,u,h,d=1;r==null&&(r=[]);function f(_){return 1/Math.min(c[_.source.index],c[_.target.index])}function p(_){for(var E=0,S=r.length;E<d;++E)for(var T=0,M,C,A,P=0,R=0,O=0,D,F;T<S;++T)M=r[T],C=M.source,A=M.target,P=A.x+A.vx-C.x-C.vx||zu(h),l>1&&(R=A.y+A.vy-C.y-C.vy||zu(h)),l>2&&(O=A.z+A.vz-C.z-C.vz||zu(h)),D=Math.sqrt(P*P+R*R+O*O),D=(D-a[T])/D*_*i[T],P*=D,R*=D,O*=D,A.vx-=P*(F=u[T]),l>1&&(A.vy-=R*F),l>2&&(A.vz-=O*F),C.vx+=P*(F=1-F),l>1&&(C.vy+=R*F),l>2&&(C.vz+=O*F)}function g(){if(o){var _,E=o.length,S=r.length,T=new Map(o.map((C,A)=>[e(C,A,o),C])),M;for(_=0,c=new Array(E);_<S;++_)M=r[_],M.index=_,typeof M.source!="object"&&(M.source=pV(T,M.source)),typeof M.target!="object"&&(M.target=pV(T,M.target)),c[M.source.index]=(c[M.source.index]||0)+1,c[M.target.index]=(c[M.target.index]||0)+1;for(_=0,u=new Array(S);_<S;++_)M=r[_],u[_]=c[M.source.index]/(c[M.source.index]+c[M.target.index]);i=new Array(S),v(),a=new Array(S),x()}}function v(){if(o)for(var _=0,E=r.length;_<E;++_)i[_]=+n(r[_],_,r)}function x(){if(o)for(var _=0,E=r.length;_<E;++_)a[_]=+s(r[_],_,r)}return p.initialize=function(_,...E){o=_,h=E.find(S=>typeof S=="function")||Math.random,l=E.find(S=>[1,2,3].includes(S))||2,g()},p.links=function(_){return arguments.length?(r=_,g(),p):r},p.id=function(_){return arguments.length?(e=_,p):e},p.iterations=function(_){return arguments.length?(d=+_,p):d},p.strength=function(_){return arguments.length?(n=typeof _=="function"?_:Xu(+_),v(),p):n},p.distance=function(_){return arguments.length?(s=typeof _=="function"?_:Xu(+_),x(),p):s},p}var xwe={value:()=>{}};function E_(){for(var r=0,e=arguments.length,n={},i;r<e;++r){if(!(i=arguments[r]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new cT(n)}function cT(r){this._=r}function bwe(r,e){return r.trim().split(/^|\s+/).map(function(n){var i="",s=n.indexOf(".");if(s>=0&&(i=n.slice(s+1),n=n.slice(0,s)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}cT.prototype=E_.prototype={constructor:cT,on:function(r,e){var n=this._,i=bwe(r+"",n),s,a=-1,o=i.length;if(arguments.length<2){for(;++a<o;)if((s=(r=i[a]).type)&&(s=_we(n[s],r.name)))return s;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++a<o;)if(s=(r=i[a]).type)n[s]=mV(n[s],r.name,e);else if(e==null)for(s in n)n[s]=mV(n[s],r.name,null);return this},copy:function(){var r={},e=this._;for(var n in e)r[n]=e[n].slice();return new cT(r)},call:function(r,e){if((s=arguments.length-2)>0)for(var n=new Array(s),i=0,s,a;i<s;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(r))throw new Error("unknown type: "+r);for(a=this._[r],i=0,s=a.length;i<s;++i)a[i].value.apply(e,n)},apply:function(r,e,n){if(!this._.hasOwnProperty(r))throw new Error("unknown type: "+r);for(var i=this._[r],s=0,a=i.length;s<a;++s)i[s].value.apply(e,n)}};function _we(r,e){for(var n=0,i=r.length,s;n<i;++n)if((s=r[n]).name===e)return s.value}function mV(r,e,n){for(var i=0,s=r.length;i<s;++i)if(r[i].name===e){r[i]=xwe,r=r.slice(0,i).concat(r.slice(i+1));break}return n!=null&&r.push({name:e,value:n}),r}var yy=0,Zv=0,hv=0,Lee=1e3,zT,Qv,$T=0,Mp=0,RM=0,hb=typeof performance=="object"&&performance.now?performance:Date,Fee=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(r){setTimeout(r,17)};function Xj(){return Mp||(Fee(wwe),Mp=hb.now()+RM)}function wwe(){Mp=0}function GT(){this._call=this._time=this._next=null}GT.prototype=Kj.prototype={constructor:GT,restart:function(r,e,n){if(typeof r!="function")throw new TypeError("callback is not a function");n=(n==null?Xj():+n)+(e==null?0:+e),!this._next&&Qv!==this&&(Qv?Qv._next=this:zT=this,Qv=this),this._call=r,this._time=n,l3()},stop:function(){this._call&&(this._call=null,this._time=1/0,l3())}};function Kj(r,e,n){var i=new GT;return i.restart(r,e,n),i}function Swe(){Xj(),++yy;for(var r=zT,e;r;)(e=Mp-r._time)>=0&&r._call.call(void 0,e),r=r._next;--yy}function gV(){Mp=($T=hb.now())+RM,yy=Zv=0;try{Swe()}finally{yy=0,Ewe(),Mp=0}}function Twe(){var r=hb.now(),e=r-$T;e>Lee&&(RM-=e,$T=r)}function Ewe(){for(var r,e=zT,n,i=1/0;e;)e._call?(i>e._time&&(i=e._time),r=e,e=e._next):(n=e._next,e._next=null,e=r?r._next=n:zT=n);Qv=r,l3(i)}function l3(r){if(!yy){Zv&&(Zv=clearTimeout(Zv));var e=r-Mp;e>24?(r<1/0&&(Zv=setTimeout(gV,r-hb.now()-RM)),hv&&(hv=clearInterval(hv))):(hv||($T=hb.now(),hv=setInterval(Twe,Lee)),yy=1,Fee(gV))}}function yV(r,e,n){var i=new GT;return e=e==null?0:+e,i.restart(s=>{i.stop(),r(s+e)},e,n),i}const Mwe=1664525,Awe=1013904223,vV=4294967296;function Cwe(){let r=1;return()=>(r=(Mwe*r+Awe)%vV)/vV}var xV=3;function tP(r){return r.x}function bV(r){return r.y}function Nwe(r){return r.z}var Pwe=10,Rwe=Math.PI*(3-Math.sqrt(5)),Owe=Math.PI*20/(9+Math.sqrt(221));function Bee(r,e){e=e||2;var n=Math.min(xV,Math.max(1,Math.round(e))),i,s=1,a=.001,o=1-Math.pow(a,1/300),l=0,c=.6,u=new Map,h=Kj(p),d=E_("tick","end"),f=Cwe();r==null&&(r=[]);function p(){g(),d.call("tick",i),s<a&&(h.stop(),d.call("end",i))}function g(_){var E,S=r.length,T;_===void 0&&(_=1);for(var M=0;M<_;++M)for(s+=(l-s)*o,u.forEach(function(C){C(s)}),E=0;E<S;++E)T=r[E],T.fx==null?T.x+=T.vx*=c:(T.x=T.fx,T.vx=0),n>1&&(T.fy==null?T.y+=T.vy*=c:(T.y=T.fy,T.vy=0)),n>2&&(T.fz==null?T.z+=T.vz*=c:(T.z=T.fz,T.vz=0));return i}function v(){for(var _=0,E=r.length,S;_<E;++_){if(S=r[_],S.index=_,S.fx!=null&&(S.x=S.fx),S.fy!=null&&(S.y=S.fy),S.fz!=null&&(S.z=S.fz),isNaN(S.x)||n>1&&isNaN(S.y)||n>2&&isNaN(S.z)){var T=Pwe*(n>2?Math.cbrt(.5+_):n>1?Math.sqrt(.5+_):_),M=_*Rwe,C=_*Owe;n===1?S.x=T:n===2?(S.x=T*Math.cos(M),S.y=T*Math.sin(M)):(S.x=T*Math.sin(M)*Math.cos(C),S.y=T*Math.cos(M),S.z=T*Math.sin(M)*Math.sin(C))}(isNaN(S.vx)||n>1&&isNaN(S.vy)||n>2&&isNaN(S.vz))&&(S.vx=0,n>1&&(S.vy=0),n>2&&(S.vz=0))}}function x(_){return _.initialize&&_.initialize(r,f,n),_}return v(),i={tick:g,restart:function(){return h.restart(p),i},stop:function(){return h.stop(),i},numDimensions:function(_){return arguments.length?(n=Math.min(xV,Math.max(1,Math.round(_))),u.forEach(x),i):n},nodes:function(_){return arguments.length?(r=_,v(),u.forEach(x),i):r},alpha:function(_){return arguments.length?(s=+_,i):s},alphaMin:function(_){return arguments.length?(a=+_,i):a},alphaDecay:function(_){return arguments.length?(o=+_,i):+o},alphaTarget:function(_){return arguments.length?(l=+_,i):l},velocityDecay:function(_){return arguments.length?(c=1-_,i):1-c},randomSource:function(_){return arguments.length?(f=_,u.forEach(x),i):f},force:function(_,E){return arguments.length>1?(E==null?u.delete(_):u.set(_,x(E)),i):u.get(_)},find:function(){var _=Array.prototype.slice.call(arguments),E=_.shift()||0,S=(n>1?_.shift():null)||0,T=(n>2?_.shift():null)||0,M=_.shift()||1/0,C=0,A=r.length,P,R,O,D,F,U;for(M*=M,C=0;C<A;++C)F=r[C],P=E-F.x,R=S-(F.y||0),O=T-(F.z||0),D=P*P+R*R+O*O,D<M&&(U=F,M=D);return U},on:function(_,E){return arguments.length>1?(d.on(_,E),i):d.on(_)}}}function jee(){var r,e,n,i,s,a=Xu(-30),o,l=1,c=1/0,u=.81;function h(g){var v,x=r.length,_=(e===1?Pee(r,tP):e===2?Oee(r,tP,bV):e===3?Iee(r,tP,bV,Nwe):null).visitAfter(f);for(s=g,v=0;v<x;++v)n=r[v],_.visit(p)}function d(){if(r){var g,v=r.length,x;for(o=new Array(v),g=0;g<v;++g)x=r[g],o[x.index]=+a(x,g,r)}}function f(g){var v=0,x,_,E=0,S,T,M,C,A=g.length;if(A){for(S=T=M=C=0;C<A;++C)(x=g[C])&&(_=Math.abs(x.value))&&(v+=x.value,E+=_,S+=_*(x.x||0),T+=_*(x.y||0),M+=_*(x.z||0));v*=Math.sqrt(4/A),g.x=S/E,e>1&&(g.y=T/E),e>2&&(g.z=M/E)}else{x=g,x.x=x.data.x,e>1&&(x.y=x.data.y),e>2&&(x.z=x.data.z);do v+=o[x.data.index];while(x=x.next)}g.value=v}function p(g,v,x,_,E){if(!g.value)return!0;var S=[x,_,E][e-1],T=g.x-n.x,M=e>1?g.y-n.y:0,C=e>2?g.z-n.z:0,A=S-v,P=T*T+M*M+C*C;if(A*A/u<P)return P<c&&(T===0&&(T=zu(i),P+=T*T),e>1&&M===0&&(M=zu(i),P+=M*M),e>2&&C===0&&(C=zu(i),P+=C*C),P<l&&(P=Math.sqrt(l*P)),n.vx+=T*g.value*s/P,e>1&&(n.vy+=M*g.value*s/P),e>2&&(n.vz+=C*g.value*s/P)),!0;if(g.length||P>=c)return;(g.data!==n||g.next)&&(T===0&&(T=zu(i),P+=T*T),e>1&&M===0&&(M=zu(i),P+=M*M),e>2&&C===0&&(C=zu(i),P+=C*C),P<l&&(P=Math.sqrt(l*P)));do g.data!==n&&(A=o[g.data.index]*s/P,n.vx+=T*A,e>1&&(n.vy+=M*A),e>2&&(n.vz+=C*A));while(g=g.next)}return h.initialize=function(g,...v){r=g,i=v.find(x=>typeof x=="function")||Math.random,e=v.find(x=>[1,2,3].includes(x))||2,d()},h.strength=function(g){return arguments.length?(a=typeof g=="function"?g:Xu(+g),d(),h):a},h.distanceMin=function(g){return arguments.length?(l=g*g,h):Math.sqrt(l)},h.distanceMax=function(g){return arguments.length?(c=g*g,h):Math.sqrt(c)},h.theta=function(g){return arguments.length?(u=g*g,h):Math.sqrt(u)},h}function Uee(r,e,n,i){var s,a,o=Xu(.1),l,c;typeof r!="function"&&(r=Xu(+r)),e==null&&(e=0),n==null&&(n=0),i==null&&(i=0);function u(d){for(var f=0,p=s.length;f<p;++f){var g=s[f],v=g.x-e||1e-6,x=(g.y||0)-n||1e-6,_=(g.z||0)-i||1e-6,E=Math.sqrt(v*v+x*x+_*_),S=(c[f]-E)*l[f]*d/E;g.vx+=v*S,a>1&&(g.vy+=x*S),a>2&&(g.vz+=_*S)}}function h(){if(s){var d,f=s.length;for(l=new Array(f),c=new Array(f),d=0;d<f;++d)c[d]=+r(s[d],d,s),l[d]=isNaN(c[d])?0:+o(s[d],d,s)}}return u.initialize=function(d,...f){s=d,a=f.find(p=>[1,2,3].includes(p))||2,h()},u.strength=function(d){return arguments.length?(o=typeof d=="function"?d:Xu(+d),h(),u):o},u.radius=function(d){return arguments.length?(r=typeof d=="function"?d:Xu(+d),h(),u):r},u.x=function(d){return arguments.length?(e=+d,u):e},u.y=function(d){return arguments.length?(n=+d,u):n},u.z=function(d){return arguments.length?(i=+d,u):i},u}var nP,_V;function Yj(){if(_V)return nP;_V=1,nP=function(i){e(i);var s=r(i);return i.on=s.on,i.off=s.off,i.fire=s.fire,i};function r(n){var i=Object.create(null);return{on:function(s,a,o){if(typeof a!="function")throw new Error("callback is expected to be a function");var l=i[s];return l||(l=i[s]=[]),l.push({callback:a,ctx:o}),n},off:function(s,a){var o=typeof s>"u";if(o)return i=Object.create(null),n;if(i[s]){var l=typeof a!="function";if(l)delete i[s];else for(var c=i[s],u=0;u<c.length;++u)c[u].callback===a&&c.splice(u,1)}return n},fire:function(s){var a=i[s];if(!a)return n;var o;arguments.length>1&&(o=Array.prototype.splice.call(arguments,1));for(var l=0;l<a.length;++l){var c=a[l];c.callback.apply(c.ctx,o)}return n}}}function e(n){if(!n)throw new Error("Eventify cannot use falsy object as events subject");for(var i=["on","fire","off"],s=0;s<i.length;++s)if(n.hasOwnProperty(i[s]))throw new Error("Subject cannot be eventified, since it already has property '"+i[s]+"'")}return nP}var rP,wV;function kwe(){if(wV)return rP;wV=1,rP=e;var r=Yj();function e(o){if(o=o||{},"uniqueLinkId"in o&&(console.warn("ngraph.graph: Starting from version 0.14 `uniqueLinkId` is deprecated.\nUse `multigraph` option instead\n",`
`,`Note: there is also change in default behavior: From now on each graph
is considered to be not a multigraph by default (each edge is unique).`),o.multigraph=o.uniqueLinkId),o.multigraph===void 0&&(o.multigraph=!1),typeof Map!="function")throw new Error("ngraph.graph requires `Map` to be defined. Please polyfill it before using ngraph");var l=new Map,c=new Map,u={},h=0,d=o.multigraph?O:R,f=[],p=ue,g=ue,v=ue,x=ue,_={version:20,addNode:M,addLink:P,removeLink:B,removeNode:A,getNode:C,getNodeCount:D,getLinkCount:F,getEdgeCount:F,getLinksCount:F,getNodesCount:D,getLinks:U,forEachNode:le,forEachLinkedNode:Z,forEachLink:z,beginUpdate:v,endUpdate:x,clear:$,hasLink:j,hasNode:C,getLink:j};return r(_),E(),_;function E(){var oe=_.on;_.on=fe;function fe(){return _.beginUpdate=v=be,_.endUpdate=x=ee,p=S,g=T,_.on=oe,oe.apply(_,arguments)}}function S(oe,fe){f.push({link:oe,changeType:fe})}function T(oe,fe){f.push({node:oe,changeType:fe})}function M(oe,fe){if(oe===void 0)throw new Error("Invalid node identifier");v();var Se=C(oe);return Se?(Se.data=fe,g(Se,"update")):(Se=new n(oe,fe),g(Se,"add")),l.set(oe,Se),x(),Se}function C(oe){return l.get(oe)}function A(oe){var fe=C(oe);if(!fe)return!1;v();var Se=fe.links;return Se&&(Se.forEach(W),fe.links=null),l.delete(oe),g(fe,"remove"),x(),!0}function P(oe,fe,Se){v();var we=C(oe)||M(oe),Le=C(fe)||M(fe),et=d(oe,fe,Se),Fe=c.has(et.id);return c.set(et.id,et),i(we,et),oe!==fe&&i(Le,et),p(et,Fe?"update":"add"),x(),et}function R(oe,fe,Se){var we=a(oe,fe),Le=c.get(we);return Le?(Le.data=Se,Le):new s(oe,fe,Se,we)}function O(oe,fe,Se){var we=a(oe,fe),Le=u.hasOwnProperty(we);if(Le||j(oe,fe)){Le||(u[we]=0);var et="@"+ ++u[we];we=a(oe+et,fe+et)}return new s(oe,fe,Se,we)}function D(){return l.size}function F(){return c.size}function U(oe){var fe=C(oe);return fe?fe.links:null}function B(oe,fe){return fe!==void 0&&(oe=j(oe,fe)),W(oe)}function W(oe){if(!oe||!c.get(oe.id))return!1;v(),c.delete(oe.id);var fe=C(oe.fromId),Se=C(oe.toId);return fe&&fe.links.delete(oe),Se&&Se.links.delete(oe),p(oe,"remove"),x(),!0}function j(oe,fe){if(!(oe===void 0||fe===void 0))return c.get(a(oe,fe))}function $(){v(),le(function(oe){A(oe.id)}),x()}function z(oe){if(typeof oe=="function")for(var fe=c.values(),Se=fe.next();!Se.done;){if(oe(Se.value))return!0;Se=fe.next()}}function Z(oe,fe,Se){var we=C(oe);if(we&&we.links&&typeof fe=="function")return Se?q(we.links,oe,fe):se(we.links,oe,fe)}function se(oe,fe,Se){for(var we,Le=oe.values(),et=Le.next();!et.done;){var Fe=et.value,Tt=Fe.fromId===fe?Fe.toId:Fe.fromId;if(we=Se(l.get(Tt),Fe),we)return!0;et=Le.next()}}function q(oe,fe,Se){for(var we,Le=oe.values(),et=Le.next();!et.done;){var Fe=et.value;if(Fe.fromId===fe&&(we=Se(l.get(Fe.toId),Fe),we))return!0;et=Le.next()}}function ue(){}function be(){h+=1}function ee(){h-=1,h===0&&f.length>0&&(_.fire("changed",f),f.length=0)}function le(oe){if(typeof oe!="function")throw new Error("Function is expected to iterate over graph nodes. You passed "+oe);for(var fe=l.values(),Se=fe.next();!Se.done;){if(oe(Se.value))return!0;Se=fe.next()}}}function n(o,l){this.id=o,this.links=null,this.data=l}function i(o,l){o.links?o.links.add(l):o.links=new Set([l])}function s(o,l,c,u){this.fromId=o,this.toId=l,this.data=c,this.id=u}function a(o,l){return o.toString()+"👉 "+l.toString()}return rP}var Iwe=kwe();const Dwe=_r(Iwe);var V1={exports:{}},Wm={exports:{}},iP,SV;function zee(){return SV||(SV=1,iP=function(e){return e===0?"x":e===1?"y":e===2?"z":"c"+(e+1)}),iP}var sP,TV;function o0(){if(TV)return sP;TV=1;const r=zee();return sP=function(n){return i;function i(s,a){let o=a&&a.indent||0,l=a&&a.join!==void 0?a.join:`
`,c=Array(o+1).join(" "),u=[];for(let h=0;h<n;++h){let d=r(h),f=h===0?"":c;u.push(f+s.replace(/{var}/g,d))}return u.join(l)}},sP}var EV;function Lwe(){if(EV)return Wm.exports;EV=1;const r=o0();Wm.exports=e,Wm.exports.generateCreateBodyFunctionBody=n,Wm.exports.getVectorCode=s,Wm.exports.getBodyCode=i;function e(a,o){let l=n(a,o),{Body:c}=new Function(l)();return c}function n(a,o){return`
${s(a,o)}
${i(a)}
return {Body: Body, Vector: Vector};
`}function i(a){let o=r(a),l=o("{var}",{join:", "});return`
function Body(${l}) {
  this.isPinned = false;
  this.pos = new Vector(${l});
  this.force = new Vector();
  this.velocity = new Vector();
  this.mass = 1;

  this.springCount = 0;
  this.springLength = 0;
}

Body.prototype.reset = function() {
  this.force.reset();
  this.springCount = 0;
  this.springLength = 0;
}

Body.prototype.setPosition = function (${l}) {
  ${o("this.pos.{var} = {var} || 0;",{indent:2})}
};`}function s(a,o){let l=r(a),c="";return o&&(c=`${l(`
	   var v{var};
	Object.defineProperty(this, '{var}', {
	  set: function(v) { 
	    if (!Number.isFinite(v)) throw new Error('Cannot set non-numbers to {var}');
	    v{var} = v; 
	  },
	  get: function() { return v{var}; }
	});`)}`),`function Vector(${l("{var}",{join:", "})}) {
  ${c}
    if (typeof arguments[0] === 'object') {
      // could be another vector
      let v = arguments[0];
      ${l('if (!Number.isFinite(v.{var})) throw new Error("Expected value is not a finite number at Vector constructor ({var})");',{indent:4})}
      ${l("this.{var} = v.{var};",{indent:4})}
    } else {
      ${l('this.{var} = typeof {var} === "number" ? {var} : 0;',{indent:4})}
    }
  }
  
  Vector.prototype.reset = function () {
    ${l("this.{var} = ",{join:""})}0;
  };`}return Wm.exports}var Pu={exports:{}},MV;function Fwe(){if(MV)return Pu.exports;MV=1;const r=o0(),e=zee();Pu.exports=n,Pu.exports.generateQuadTreeFunctionBody=i,Pu.exports.getInsertStackCode=c,Pu.exports.getQuadNodeCode=l,Pu.exports.isSamePosition=s,Pu.exports.getChildBodyCode=o,Pu.exports.setChildBodyCode=a;function n(u){let h=i(u);return new Function(h)()}function i(u){let h=r(u),d=Math.pow(2,u);return`
${c()}
${l(u)}
${s(u)}
${o(u)}
${a(u)}

function createQuadTree(options, random) {
  options = options || {};
  options.gravity = typeof options.gravity === 'number' ? options.gravity : -1;
  options.theta = typeof options.theta === 'number' ? options.theta : 0.8;

  var gravity = options.gravity;
  var updateQueue = [];
  var insertStack = new InsertStack();
  var theta = options.theta;

  var nodesCache = [];
  var currentInCache = 0;
  var root = newNode();

  return {
    insertBodies: insertBodies,

    /**
     * Gets root node if it is present
     */
    getRoot: function() {
      return root;
    },

    updateBodyForce: update,

    options: function(newOptions) {
      if (newOptions) {
        if (typeof newOptions.gravity === 'number') {
          gravity = newOptions.gravity;
        }
        if (typeof newOptions.theta === 'number') {
          theta = newOptions.theta;
        }

        return this;
      }

      return {
        gravity: gravity,
        theta: theta
      };
    }
  };

  function newNode() {
    // To avoid pressure on GC we reuse nodes.
    var node = nodesCache[currentInCache];
    if (node) {
${v("      node.")}
      node.body = null;
      node.mass = ${h("node.mass_{var} = ",{join:""})}0;
      ${h("node.min_{var} = node.max_{var} = ",{join:""})}0;
    } else {
      node = new QuadNode();
      nodesCache[currentInCache] = node;
    }

    ++currentInCache;
    return node;
  }

  function update(sourceBody) {
    var queue = updateQueue;
    var v;
    ${h("var d{var};",{indent:4})}
    var r; 
    ${h("var f{var} = 0;",{indent:4})}
    var queueLength = 1;
    var shiftIdx = 0;
    var pushIdx = 1;

    queue[0] = root;

    while (queueLength) {
      var node = queue[shiftIdx];
      var body = node.body;

      queueLength -= 1;
      shiftIdx += 1;
      var differentBody = (body !== sourceBody);
      if (body && differentBody) {
        // If the current node is a leaf node (and it is not source body),
        // calculate the force exerted by the current node on body, and add this
        // amount to body's net force.
        ${h("d{var} = body.pos.{var} - sourceBody.pos.{var};",{indent:8})}
        r = Math.sqrt(${h("d{var} * d{var}",{join:" + "})});

        if (r === 0) {
          // Poor man's protection against zero distance.
          ${h("d{var} = (random.nextDouble() - 0.5) / 50;",{indent:10})}
          r = Math.sqrt(${h("d{var} * d{var}",{join:" + "})});
        }

        // This is standard gravitation force calculation but we divide
        // by r^3 to save two operations when normalizing force vector.
        v = gravity * body.mass * sourceBody.mass / (r * r * r);
        ${h("f{var} += v * d{var};",{indent:8})}
      } else if (differentBody) {
        // Otherwise, calculate the ratio s / r,  where s is the width of the region
        // represented by the internal node, and r is the distance between the body
        // and the node's center-of-mass
        ${h("d{var} = node.mass_{var} / node.mass - sourceBody.pos.{var};",{indent:8})}
        r = Math.sqrt(${h("d{var} * d{var}",{join:" + "})});

        if (r === 0) {
          // Sorry about code duplication. I don't want to create many functions
          // right away. Just want to see performance first.
          ${h("d{var} = (random.nextDouble() - 0.5) / 50;",{indent:10})}
          r = Math.sqrt(${h("d{var} * d{var}",{join:" + "})});
        }
        // If s / r < θ, treat this internal node as a single body, and calculate the
        // force it exerts on sourceBody, and add this amount to sourceBody's net force.
        if ((node.max_${e(0)} - node.min_${e(0)}) / r < theta) {
          // in the if statement above we consider node's width only
          // because the region was made into square during tree creation.
          // Thus there is no difference between using width or height.
          v = gravity * node.mass * sourceBody.mass / (r * r * r);
          ${h("f{var} += v * d{var};",{indent:10})}
        } else {
          // Otherwise, run the procedure recursively on each of the current node's children.

          // I intentionally unfolded this loop, to save several CPU cycles.
${g()}
        }
      }
    }

    ${h("sourceBody.force.{var} += f{var};",{indent:4})}
  }

  function insertBodies(bodies) {
    ${h("var {var}min = Number.MAX_VALUE;",{indent:4})}
    ${h("var {var}max = Number.MIN_VALUE;",{indent:4})}
    var i = bodies.length;

    // To reduce quad tree depth we are looking for exact bounding box of all particles.
    while (i--) {
      var pos = bodies[i].pos;
      ${h("if (pos.{var} < {var}min) {var}min = pos.{var};",{indent:6})}
      ${h("if (pos.{var} > {var}max) {var}max = pos.{var};",{indent:6})}
    }

    // Makes the bounds square.
    var maxSideLength = -Infinity;
    ${h("if ({var}max - {var}min > maxSideLength) maxSideLength = {var}max - {var}min ;",{indent:4})}

    currentInCache = 0;
    root = newNode();
    ${h("root.min_{var} = {var}min;",{indent:4})}
    ${h("root.max_{var} = {var}min + maxSideLength;",{indent:4})}

    i = bodies.length - 1;
    if (i >= 0) {
      root.body = bodies[i];
    }
    while (i--) {
      insert(bodies[i], root);
    }
  }

  function insert(newBody) {
    insertStack.reset();
    insertStack.push(root, newBody);

    while (!insertStack.isEmpty()) {
      var stackItem = insertStack.pop();
      var node = stackItem.node;
      var body = stackItem.body;

      if (!node.body) {
        // This is internal node. Update the total mass of the node and center-of-mass.
        ${h("var {var} = body.pos.{var};",{indent:8})}
        node.mass += body.mass;
        ${h("node.mass_{var} += body.mass * {var};",{indent:8})}

        // Recursively insert the body in the appropriate quadrant.
        // But first find the appropriate quadrant.
        var quadIdx = 0; // Assume we are in the 0's quad.
        ${h("var min_{var} = node.min_{var};",{indent:8})}
        ${h("var max_{var} = (min_{var} + node.max_{var}) / 2;",{indent:8})}

${p(8)}

        var child = getChild(node, quadIdx);

        if (!child) {
          // The node is internal but this quadrant is not taken. Add
          // subnode to it.
          child = newNode();
          ${h("child.min_{var} = min_{var};",{indent:10})}
          ${h("child.max_{var} = max_{var};",{indent:10})}
          child.body = body;

          setChild(node, quadIdx, child);
        } else {
          // continue searching in this quadrant.
          insertStack.push(child, body);
        }
      } else {
        // We are trying to add to the leaf node.
        // We have to convert current leaf into internal node
        // and continue adding two nodes.
        var oldBody = node.body;
        node.body = null; // internal nodes do not cary bodies

        if (isSamePosition(oldBody.pos, body.pos)) {
          // Prevent infinite subdivision by bumping one node
          // anywhere in this quadrant
          var retriesCount = 3;
          do {
            var offset = random.nextDouble();
            ${h("var d{var} = (node.max_{var} - node.min_{var}) * offset;",{indent:12})}

            ${h("oldBody.pos.{var} = node.min_{var} + d{var};",{indent:12})}
            retriesCount -= 1;
            // Make sure we don't bump it out of the box. If we do, next iteration should fix it
          } while (retriesCount > 0 && isSamePosition(oldBody.pos, body.pos));

          if (retriesCount === 0 && isSamePosition(oldBody.pos, body.pos)) {
            // This is very bad, we ran out of precision.
            // if we do not return from the method we'll get into
            // infinite loop here. So we sacrifice correctness of layout, and keep the app running
            // Next layout iteration should get larger bounding box in the first step and fix this
            return;
          }
        }
        // Next iteration should subdivide node further.
        insertStack.push(node, oldBody);
        insertStack.push(node, body);
      }
    }
  }
}
return createQuadTree;

`;function p(x){let _=[],E=Array(x+1).join(" ");for(let S=0;S<u;++S)_.push(E+`if (${e(S)} > max_${e(S)}) {`),_.push(E+`  quadIdx = quadIdx + ${Math.pow(2,S)};`),_.push(E+`  min_${e(S)} = max_${e(S)};`),_.push(E+`  max_${e(S)} = node.max_${e(S)};`),_.push(E+"}");return _.join(`
`)}function g(){let x=Array(11).join(" "),_=[];for(let E=0;E<d;++E)_.push(x+`if (node.quad${E}) {`),_.push(x+`  queue[pushIdx] = node.quad${E};`),_.push(x+"  queueLength += 1;"),_.push(x+"  pushIdx += 1;"),_.push(x+"}");return _.join(`
`)}function v(x){let _=[];for(let E=0;E<d;++E)_.push(`${x}quad${E} = null;`);return _.join(`
`)}}function s(u){let h=r(u);return`
  function isSamePosition(point1, point2) {
    ${h("var d{var} = Math.abs(point1.{var} - point2.{var});",{indent:2})}
  
    return ${h("d{var} < 1e-8",{join:" && "})};
  }  
`}function a(u){var h=Math.pow(2,u);return`
function setChild(node, idx, child) {
  ${d()}
}`;function d(){let f=[];for(let p=0;p<h;++p){let g=p===0?"  ":"  else ";f.push(`${g}if (idx === ${p}) node.quad${p} = child;`)}return f.join(`
`)}}function o(u){return`function getChild(node, idx) {
${h()}
  return null;
}`;function h(){let d=[],f=Math.pow(2,u);for(let p=0;p<f;++p)d.push(`  if (idx === ${p}) return node.quad${p};`);return d.join(`
`)}}function l(u){let h=r(u),d=Math.pow(2,u);var f=`
function QuadNode() {
  // body stored inside this node. In quad tree only leaf nodes (by construction)
  // contain bodies:
  this.body = null;

  // Child nodes are stored in quads. Each quad is presented by number:
  // 0 | 1
  // -----
  // 2 | 3
${p("  this.")}

  // Total mass of current node
  this.mass = 0;

  // Center of mass coordinates
  ${h("this.mass_{var} = 0;",{indent:2})}

  // bounding box coordinates
  ${h("this.min_{var} = 0;",{indent:2})}
  ${h("this.max_{var} = 0;",{indent:2})}
}
`;return f;function p(g){let v=[];for(let x=0;x<d;++x)v.push(`${g}quad${x} = null;`);return v.join(`
`)}}function c(){return`
/**
 * Our implementation of QuadTree is non-recursive to avoid GC hit
 * This data structure represent stack of elements
 * which we are trying to insert into quad tree.
 */
function InsertStack () {
    this.stack = [];
    this.popIdx = 0;
}

InsertStack.prototype = {
    isEmpty: function() {
        return this.popIdx === 0;
    },
    push: function (node, body) {
        var item = this.stack[this.popIdx];
        if (!item) {
            // we are trying to avoid memory pressure: create new element
            // only when absolutely necessary
            this.stack[this.popIdx] = new InsertStackElement(node, body);
        } else {
            item.node = node;
            item.body = body;
        }
        ++this.popIdx;
    },
    pop: function () {
        if (this.popIdx > 0) {
            return this.stack[--this.popIdx];
        }
    },
    reset: function () {
        this.popIdx = 0;
    }
};

function InsertStackElement(node, body) {
    this.node = node; // QuadTree node
    this.body = body; // physical body which needs to be inserted to node
}
`}return Pu.exports}var H1={exports:{}},AV;function Bwe(){if(AV)return H1.exports;AV=1,H1.exports=e,H1.exports.generateFunctionBody=n;const r=o0();function e(i){let s=n(i);return new Function("bodies","settings","random",s)}function n(i){let s=r(i);return`
  var boundingBox = {
    ${s("min_{var}: 0, max_{var}: 0,",{indent:4})}
  };

  return {
    box: boundingBox,

    update: updateBoundingBox,

    reset: resetBoundingBox,

    getBestNewPosition: function (neighbors) {
      var ${s("base_{var} = 0",{join:", "})};

      if (neighbors.length) {
        for (var i = 0; i < neighbors.length; ++i) {
          let neighborPos = neighbors[i].pos;
          ${s("base_{var} += neighborPos.{var};",{indent:10})}
        }

        ${s("base_{var} /= neighbors.length;",{indent:8})}
      } else {
        ${s("base_{var} = (boundingBox.min_{var} + boundingBox.max_{var}) / 2;",{indent:8})}
      }

      var springLength = settings.springLength;
      return {
        ${s("{var}: base_{var} + (random.nextDouble() - 0.5) * springLength,",{indent:8})}
      };
    }
  };

  function updateBoundingBox() {
    var i = bodies.length;
    if (i === 0) return; // No bodies - no borders.

    ${s("var max_{var} = -Infinity;",{indent:4})}
    ${s("var min_{var} = Infinity;",{indent:4})}

    while(i--) {
      // this is O(n), it could be done faster with quadtree, if we check the root node bounds
      var bodyPos = bodies[i].pos;
      ${s("if (bodyPos.{var} < min_{var}) min_{var} = bodyPos.{var};",{indent:6})}
      ${s("if (bodyPos.{var} > max_{var}) max_{var} = bodyPos.{var};",{indent:6})}
    }

    ${s("boundingBox.min_{var} = min_{var};",{indent:4})}
    ${s("boundingBox.max_{var} = max_{var};",{indent:4})}
  }

  function resetBoundingBox() {
    ${s("boundingBox.min_{var} = boundingBox.max_{var} = 0;",{indent:4})}
  }
`}return H1.exports}var W1={exports:{}},CV;function jwe(){if(CV)return W1.exports;CV=1;const r=o0();W1.exports=e,W1.exports.generateCreateDragForceFunctionBody=n;function e(i){let s=n(i);return new Function("options",s)}function n(i){return`
  if (!Number.isFinite(options.dragCoefficient)) throw new Error('dragCoefficient is not a finite number');

  return {
    update: function(body) {
      ${r(i)("body.force.{var} -= options.dragCoefficient * body.velocity.{var};",{indent:6})}
    }
  };
`}return W1.exports}var q1={exports:{}},NV;function Uwe(){if(NV)return q1.exports;NV=1;const r=o0();q1.exports=e,q1.exports.generateCreateSpringForceFunctionBody=n;function e(i){let s=n(i);return new Function("options","random",s)}function n(i){let s=r(i);return`
  if (!Number.isFinite(options.springCoefficient)) throw new Error('Spring coefficient is not a number');
  if (!Number.isFinite(options.springLength)) throw new Error('Spring length is not a number');

  return {
    /**
     * Updates forces acting on a spring
     */
    update: function (spring) {
      var body1 = spring.from;
      var body2 = spring.to;
      var length = spring.length < 0 ? options.springLength : spring.length;
      ${s("var d{var} = body2.pos.{var} - body1.pos.{var};",{indent:6})}
      var r = Math.sqrt(${s("d{var} * d{var}",{join:" + "})});

      if (r === 0) {
        ${s("d{var} = (random.nextDouble() - 0.5) / 50;",{indent:8})}
        r = Math.sqrt(${s("d{var} * d{var}",{join:" + "})});
      }

      var d = r - length;
      var coefficient = ((spring.coefficient > 0) ? spring.coefficient : options.springCoefficient) * d / r;

      ${s("body1.force.{var} += coefficient * d{var}",{indent:6})};
      body1.springCount += 1;
      body1.springLength += r;

      ${s("body2.force.{var} -= coefficient * d{var}",{indent:6})};
      body2.springCount += 1;
      body2.springLength += r;
    }
  };
`}return q1.exports}var X1={exports:{}},PV;function zwe(){if(PV)return X1.exports;PV=1;const r=o0();X1.exports=e,X1.exports.generateIntegratorFunctionBody=n;function e(i){let s=n(i);return new Function("bodies","timeStep","adaptiveTimeStepWeight",s)}function n(i){let s=r(i);return`
  var length = bodies.length;
  if (length === 0) return 0;

  ${s("var d{var} = 0, t{var} = 0;",{indent:2})}

  for (var i = 0; i < length; ++i) {
    var body = bodies[i];
    if (body.isPinned) continue;

    if (adaptiveTimeStepWeight && body.springCount) {
      timeStep = (adaptiveTimeStepWeight * body.springLength/body.springCount);
    }

    var coeff = timeStep / body.mass;

    ${s("body.velocity.{var} += coeff * body.force.{var};",{indent:4})}
    ${s("var v{var} = body.velocity.{var};",{indent:4})}
    var v = Math.sqrt(${s("v{var} * v{var}",{join:" + "})});

    if (v > 1) {
      // We normalize it so that we move within timeStep range. 
      // for the case when v <= 1 - we let velocity to fade out.
      ${s("body.velocity.{var} = v{var} / v;",{indent:6})}
    }

    ${s("d{var} = timeStep * body.velocity.{var};",{indent:4})}

    ${s("body.pos.{var} += d{var};",{indent:4})}

    ${s("t{var} += Math.abs(d{var});",{indent:4})}
  }

  return (${s("t{var} * t{var}",{join:" + "})})/length;
`}return X1.exports}var aP,RV;function $we(){if(RV)return aP;RV=1,aP=r;function r(e,n,i,s){this.from=e,this.to=n,this.length=i,this.coefficient=s}return aP}var oP,OV;function Gwe(){if(OV)return oP;OV=1,oP=r;function r(e,n){var i;if(e||(e={}),n){for(i in n)if(n.hasOwnProperty(i)){var s=e.hasOwnProperty(i),a=typeof n[i],o=!s||typeof e[i]!==a;o?e[i]=n[i]:a==="object"&&(e[i]=r(e[i],n[i]))}}return e}return oP}var dv={exports:{}},kV;function Vwe(){if(kV)return dv.exports;kV=1,dv.exports=r,dv.exports.random=r,dv.exports.randomIterator=l;function r(c){var u=typeof c=="number"?c:+new Date;return new e(u)}function e(c){this.seed=c}e.prototype.next=o,e.prototype.nextDouble=a,e.prototype.uniform=a,e.prototype.gaussian=n,e.prototype.random=a;function n(){var c,u,h;do u=this.nextDouble()*2-1,h=this.nextDouble()*2-1,c=u*u+h*h;while(c>=1||c===0);return u*Math.sqrt(-2*Math.log(c)/c)}e.prototype.levy=i;function i(){var c=1.5,u=Math.pow(s(1+c)*Math.sin(Math.PI*c/2)/(s((1+c)/2)*c*Math.pow(2,(c-1)/2)),1/c);return this.gaussian()*u/Math.pow(Math.abs(this.gaussian()),1/c)}function s(c){return Math.sqrt(2*Math.PI/c)*Math.pow(1/Math.E*(c+1/(12*c-1/(10*c))),c)}function a(){var c=this.seed;return c=c+2127912214+(c<<12)&4294967295,c=(c^3345072700^c>>>19)&4294967295,c=c+374761393+(c<<5)&4294967295,c=(c+3550635116^c<<9)&4294967295,c=c+4251993797+(c<<3)&4294967295,c=(c^3042594569^c>>>16)&4294967295,this.seed=c,(c&268435455)/268435456}function o(c){return Math.floor(this.nextDouble()*c)}function l(c,u){var h=u||r();if(typeof h.next!="function")throw new Error("customRandom does not match expected API: next() function is missing");return{forEach:f,shuffle:d};function d(){var p,g,v;for(p=c.length-1;p>0;--p)g=h.next(p+1),v=c[g],c[g]=c[p],c[p]=v;return c}function f(p){var g,v,x;for(g=c.length-1;g>0;--g)v=h.next(g+1),x=c[v],c[v]=c[g],c[g]=x,p(x);c.length&&p(c[0])}}return dv.exports}var lP,IV;function DV(){if(IV)return lP;IV=1,lP=l;var r=Lwe(),e=Fwe(),n=Bwe(),i=jwe(),s=Uwe(),a=zwe(),o={};function l(h){var d=$we(),f=Gwe(),p=Yj();if(h){if(h.springCoeff!==void 0)throw new Error("springCoeff was renamed to springCoefficient");if(h.dragCoeff!==void 0)throw new Error("dragCoeff was renamed to dragCoefficient")}h=f(h,{springLength:10,springCoefficient:.8,gravity:-12,theta:.8,dragCoefficient:.9,timeStep:.5,adaptiveTimeStepWeight:0,dimensions:2,debug:!1});var g=o[h.dimensions];if(!g){var v=h.dimensions;g={Body:r(v,h.debug),createQuadTree:e(v),createBounds:n(v),createDragForce:i(v),createSpringForce:s(v),integrate:a(v)},o[v]=g}var x=g.Body,_=g.createQuadTree,E=g.createBounds,S=g.createDragForce,T=g.createSpringForce,M=g.integrate,C=le=>new x(le),A=Vwe().random(42),P=[],R=[],O=_(h,A),D=E(P,h,A),F=T(h,A),U=S(h),B=0,W=[],j=new Map,$=0;se("nbody",be),se("spring",ee);var z={bodies:P,quadTree:O,springs:R,settings:h,addForce:se,removeForce:q,getForces:ue,step:function(){for(var le=0;le<W.length;++le)W[le]($);var oe=M(P,h.timeStep,h.adaptiveTimeStepWeight);return $+=1,oe},addBody:function(le){if(!le)throw new Error("Body is required");return P.push(le),le},addBodyAt:function(le){if(!le)throw new Error("Body position is required");var oe=C(le);return P.push(oe),oe},removeBody:function(le){if(le){var oe=P.indexOf(le);if(!(oe<0))return P.splice(oe,1),P.length===0&&D.reset(),!0}},addSpring:function(le,oe,fe,Se){if(!le||!oe)throw new Error("Cannot add null spring to force simulator");typeof fe!="number"&&(fe=-1);var we=new d(le,oe,fe,Se>=0?Se:-1);return R.push(we),we},getTotalMovement:function(){return B},removeSpring:function(le){if(le){var oe=R.indexOf(le);if(oe>-1)return R.splice(oe,1),!0}},getBestNewBodyPosition:function(le){return D.getBestNewPosition(le)},getBBox:Z,getBoundingBox:Z,invalidateBBox:function(){console.warn("invalidateBBox() is deprecated, bounds always recomputed on `getBBox()` call")},gravity:function(le){return le!==void 0?(h.gravity=le,O.options({gravity:le}),this):h.gravity},theta:function(le){return le!==void 0?(h.theta=le,O.options({theta:le}),this):h.theta},random:A};return c(h,z),p(z),z;function Z(){return D.update(),D.box}function se(le,oe){if(j.has(le))throw new Error("Force "+le+" is already added");j.set(le,oe),W.push(oe)}function q(le){var oe=W.indexOf(j.get(le));oe<0||(W.splice(oe,1),j.delete(le))}function ue(){return j}function be(){if(P.length!==0){O.insertBodies(P);for(var le=P.length;le--;){var oe=P[le];oe.isPinned||(oe.reset(),O.updateBodyForce(oe),U.update(oe))}}}function ee(){for(var le=R.length;le--;)F.update(R[le])}}function c(h,d){for(var f in h)u(h,d,f)}function u(h,d,f){if(h.hasOwnProperty(f)&&typeof d[f]!="function"){var p=Number.isFinite(h[f]);p?d[f]=function(g){if(g!==void 0){if(!Number.isFinite(g))throw new Error("Value of "+f+" should be a valid number.");return h[f]=g,d}return h[f]}:d[f]=function(g){return g!==void 0?(h[f]=g,d):h[f]}}}return lP}var LV;function Hwe(){if(LV)return V1.exports;LV=1,V1.exports=e,V1.exports.simulator=DV();var r=Yj();function e(i,s){if(!i)throw new Error("Graph structure cannot be undefined");var a=s&&s.createSimulator||DV(),o=a(s);if(Array.isArray(s))throw new Error("Physics settings is expected to be an object");var l=i.version>19?j:W;s&&typeof s.nodeMass=="function"&&(l=s.nodeMass);var c=new Map,u={},h=0,d=o.settings.springTransform||n;C(),S();var f=!1,p={step:function(){if(h===0)return g(!0),!0;var $=o.step();p.lastMove=$,p.fire("step");var z=$/h,Z=z<=.01;return g(Z),Z},getNodePosition:function($){return B($).pos},setNodePosition:function($){var z=B($);z.setPosition.apply(z,Array.prototype.slice.call(arguments,1))},getLinkPosition:function($){var z=u[$];if(z)return{from:z.from.pos,to:z.to.pos}},getGraphRect:function(){return o.getBBox()},forEachBody:v,pinNode:function($,z){var Z=B($.id);Z.isPinned=!!z},isNodePinned:function($){return B($.id).isPinned},dispose:function(){i.off("changed",M),p.fire("disposed")},getBody:E,getSpring:_,getForceVectorLength:x,simulator:o,graph:i,lastMove:0};return r(p),p;function g($){f!==$&&(f=$,T($))}function v($){c.forEach($)}function x(){var $=0,z=0;return v(function(Z){$+=Math.abs(Z.force.x),z+=Math.abs(Z.force.y)}),Math.sqrt($*$+z*z)}function _($,z){var Z;if(z===void 0)typeof $!="object"?Z=$:Z=$.id;else{var se=i.hasLink($,z);if(!se)return;Z=se.id}return u[Z]}function E($){return c.get($)}function S(){i.on("changed",M)}function T($){p.fire("stable",$)}function M($){for(var z=0;z<$.length;++z){var Z=$[z];Z.changeType==="add"?(Z.node&&A(Z.node.id),Z.link&&R(Z.link)):Z.changeType==="remove"&&(Z.node&&P(Z.node),Z.link&&O(Z.link))}h=i.getNodesCount()}function C(){h=0,i.forEachNode(function($){A($.id),h+=1}),i.forEachLink(R)}function A($){var z=c.get($);if(!z){var Z=i.getNode($);if(!Z)throw new Error("initBody() was called with unknown node id");var se=Z.position;if(!se){var q=D(Z);se=o.getBestNewBodyPosition(q)}z=o.addBodyAt(se),z.id=$,c.set($,z),F($),U(Z)&&(z.isPinned=!0)}}function P($){var z=$.id,Z=c.get(z);Z&&(c.delete(z),o.removeBody(Z))}function R($){F($.fromId),F($.toId);var z=c.get($.fromId),Z=c.get($.toId),se=o.addSpring(z,Z,$.length);d($,se),u[$.id]=se}function O($){var z=u[$.id];if(z){var Z=i.getNode($.fromId),se=i.getNode($.toId);Z&&F(Z.id),se&&F(se.id),delete u[$.id],o.removeSpring(z)}}function D($){var z=[];if(!$.links)return z;for(var Z=Math.min($.links.length,2),se=0;se<Z;++se){var q=$.links[se],ue=q.fromId!==$.id?c.get(q.fromId):c.get(q.toId);ue&&ue.pos&&z.push(ue)}return z}function F($){var z=c.get($);if(z.mass=l($),Number.isNaN(z.mass))throw new Error("Node mass should be a number")}function U($){return $&&($.isPinned||$.data&&$.data.isPinned)}function B($){var z=c.get($);return z||(A($),z=c.get($)),z}function W($){var z=i.getLinks($);return z?1+z.length/3:1}function j($){var z=i.getLinks($);return z?1+z.size/3:1}}function n(){}return V1.exports}var Wwe=Hwe();const qwe=_r(Wwe);function c3(r){var e=typeof r;return r!=null&&(e=="object"||e=="function")}var Xwe=typeof global=="object"&&global&&global.Object===Object&&global,Kwe=typeof self=="object"&&self&&self.Object===Object&&self,$ee=Xwe||Kwe||Function("return this")(),cP=function(){return $ee.Date.now()},Ywe=/\s/;function Zwe(r){for(var e=r.length;e--&&Ywe.test(r.charAt(e)););return e}var Qwe=/^\s+/;function Jwe(r){return r&&r.slice(0,Zwe(r)+1).replace(Qwe,"")}var VT=$ee.Symbol,Gee=Object.prototype,e1e=Gee.hasOwnProperty,t1e=Gee.toString,fv=VT?VT.toStringTag:void 0;function n1e(r){var e=e1e.call(r,fv),n=r[fv];try{r[fv]=void 0;var i=!0}catch{}var s=t1e.call(r);return i&&(e?r[fv]=n:delete r[fv]),s}var r1e=Object.prototype,i1e=r1e.toString;function s1e(r){return i1e.call(r)}var a1e="[object Null]",o1e="[object Undefined]",FV=VT?VT.toStringTag:void 0;function l1e(r){return r==null?r===void 0?o1e:a1e:FV&&FV in Object(r)?n1e(r):s1e(r)}function c1e(r){return r!=null&&typeof r=="object"}var u1e="[object Symbol]";function h1e(r){return typeof r=="symbol"||c1e(r)&&l1e(r)==u1e}var BV=NaN,d1e=/^[-+]0x[0-9a-f]+$/i,f1e=/^0b[01]+$/i,p1e=/^0o[0-7]+$/i,m1e=parseInt;function jV(r){if(typeof r=="number")return r;if(h1e(r))return BV;if(c3(r)){var e=typeof r.valueOf=="function"?r.valueOf():r;r=c3(e)?e+"":e}if(typeof r!="string")return r===0?r:+r;r=Jwe(r);var n=f1e.test(r);return n||p1e.test(r)?m1e(r.slice(2),n?2:8):d1e.test(r)?BV:+r}var g1e="Expected a function",y1e=Math.max,v1e=Math.min;function x1e(r,e,n){var i,s,a,o,l,c,u=0,h=!1,d=!1,f=!0;if(typeof r!="function")throw new TypeError(g1e);e=jV(e)||0,c3(n)&&(h=!!n.leading,d="maxWait"in n,a=d?y1e(jV(n.maxWait)||0,e):a,f="trailing"in n?!!n.trailing:f);function p(C){var A=i,P=s;return i=s=void 0,u=C,o=r.apply(P,A),o}function g(C){return u=C,l=setTimeout(_,e),h?p(C):o}function v(C){var A=C-c,P=C-u,R=e-A;return d?v1e(R,a-P):R}function x(C){var A=C-c,P=C-u;return c===void 0||A>=e||A<0||d&&P>=a}function _(){var C=cP();if(x(C))return E(C);l=setTimeout(_,v(C))}function E(C){return l=void 0,f&&i?p(C):(i=s=void 0,o)}function S(){l!==void 0&&clearTimeout(l),u=0,i=c=s=l=void 0}function T(){return l===void 0?o:E(cP())}function M(){var C=cP(),A=x(C);if(i=arguments,s=this,c=C,A){if(l===void 0)return g(c);if(d)return clearTimeout(l),l=setTimeout(_,e),p(c)}return l===void 0&&(l=setTimeout(_,e)),o}return M.cancel=S,M.flush=T,M}function UV(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,i=Array(e);n<e;n++)i[n]=r[n];return i}function b1e(r){if(Array.isArray(r))return r}function _1e(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function w1e(r,e,n){return Object.defineProperty(r,"prototype",{writable:!1}),r}function S1e(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var i,s,a,o,l=[],c=!0,u=!1;try{if(a=(n=n.call(r)).next,e!==0)for(;!(c=(i=a.call(n)).done)&&(l.push(i.value),l.length!==e);c=!0);}catch(h){u=!0,s=h}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function T1e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function E1e(r,e){return b1e(r)||S1e(r,e)||M1e(r,e)||T1e()}function M1e(r,e){if(r){if(typeof r=="string")return UV(r,e);var n={}.toString.call(r).slice(8,-1);return n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set"?Array.from(r):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?UV(r,e):void 0}}var A1e=w1e(function r(e,n){var i=n.default,s=i===void 0?null:i,a=n.triggerUpdate,o=a===void 0?!0:a,l=n.onChange,c=l===void 0?function(u,h){}:l;_1e(this,r),this.name=e,this.defaultVal=s,this.triggerUpdate=o,this.onChange=c});function Hd(r){var e=r.stateInit,n=e===void 0?function(){return{}}:e,i=r.props,s=i===void 0?{}:i,a=r.methods,o=a===void 0?{}:a,l=r.aliases,c=l===void 0?{}:l,u=r.init,h=u===void 0?function(){}:u,d=r.update,f=d===void 0?function(){}:d,p=Object.keys(s).map(function(g){return new A1e(g,s[g])});return function g(){for(var v=arguments.length,x=new Array(v),_=0;_<v;_++)x[_]=arguments[_];var E=!!(this instanceof g&&this.constructor),S=E?x.shift():void 0,T=x[0],M=T===void 0?{}:T,C=Object.assign({},n instanceof Function?n(M):n,{initialised:!1}),A={};function P(D){return R(D,M),O(),P}var R=function(F,U){h.call(P,F,C,U),C.initialised=!0},O=x1e(function(){C.initialised&&(f.call(P,C,A),A={})},1);return p.forEach(function(D){P[D.name]=F(D);function F(U){var B=U.name,W=U.triggerUpdate,j=W===void 0?!1:W,$=U.onChange,z=$===void 0?function(q,ue){}:$,Z=U.defaultVal,se=Z===void 0?null:Z;return function(q){var ue=C[B];if(!arguments.length)return ue;var be=q===void 0?se:q;return C[B]=be,z.call(P,be,C,ue),!A.hasOwnProperty(B)&&(A[B]=ue),j&&O(),P}}}),Object.keys(o).forEach(function(D){P[D]=function(){for(var F,U=arguments.length,B=new Array(U),W=0;W<U;W++)B[W]=arguments[W];return(F=o[D]).call.apply(F,[P,C].concat(B))}}),Object.entries(c).forEach(function(D){var F=E1e(D,2),U=F[0],B=F[1];return P[U]=P[B]}),P.resetProps=function(){return p.forEach(function(D){P[D.name](D.defaultVal)}),P},P.resetProps(),C._rerender=O,E&&S&&P(S),P}}var Zt=function(r){return typeof r=="function"?r:typeof r=="string"?function(e){return e[r]}:function(e){return r}};function Pd(r,e){return r==null||e==null?NaN:r<e?-1:r>e?1:r>=e?0:NaN}function C1e(r,e){return r==null||e==null?NaN:e<r?-1:e>r?1:e>=r?0:NaN}function Zj(r){let e,n,i;r.length!==2?(e=Pd,n=(l,c)=>Pd(r(l),c),i=(l,c)=>r(l)-c):(e=r===Pd||r===C1e?r:N1e,n=r,i=r);function s(l,c,u=0,h=l.length){if(u<h){if(e(c,c)!==0)return h;do{const d=u+h>>>1;n(l[d],c)<0?u=d+1:h=d}while(u<h)}return u}function a(l,c,u=0,h=l.length){if(u<h){if(e(c,c)!==0)return h;do{const d=u+h>>>1;n(l[d],c)<=0?u=d+1:h=d}while(u<h)}return u}function o(l,c,u=0,h=l.length){const d=s(l,c,u,h-1);return d>u&&i(l[d-1],c)>-i(l[d],c)?d-1:d}return{left:s,center:o,right:a}}function N1e(){return 0}function Vee(r){return r===null?NaN:+r}function*P1e(r,e){for(let n of r)n!=null&&(n=+n)>=n&&(yield n)}const R1e=Zj(Pd),M_=R1e.right;Zj(Vee).center;class zV extends Map{constructor(e,n=I1e){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[i,s]of e)this.set(i,s)}get(e){return super.get($V(this,e))}has(e){return super.has($V(this,e))}set(e,n){return super.set(O1e(this,e),n)}delete(e){return super.delete(k1e(this,e))}}function $V({_intern:r,_key:e},n){const i=e(n);return r.has(i)?r.get(i):n}function O1e({_intern:r,_key:e},n){const i=e(n);return r.has(i)?r.get(i):(r.set(i,n),n)}function k1e({_intern:r,_key:e},n){const i=e(n);return r.has(i)&&(n=r.get(i),r.delete(i)),n}function I1e(r){return r!==null&&typeof r=="object"?r.valueOf():r}function D1e(r=Pd){if(r===Pd)return Hee;if(typeof r!="function")throw new TypeError("compare is not a function");return(e,n)=>{const i=r(e,n);return i||i===0?i:(r(n,n)===0)-(r(e,e)===0)}}function Hee(r,e){return(r==null||!(r>=r))-(e==null||!(e>=e))||(r<e?-1:r>e?1:0)}var u3=Math.sqrt(50),h3=Math.sqrt(10),d3=Math.sqrt(2);function f3(r,e,n){var i,s=-1,a,o,l;if(e=+e,r=+r,n=+n,r===e&&n>0)return[r];if((i=e<r)&&(a=r,r=e,e=a),(l=Wee(r,e,n))===0||!isFinite(l))return[];if(l>0){let c=Math.round(r/l),u=Math.round(e/l);for(c*l<r&&++c,u*l>e&&--u,o=new Array(a=u-c+1);++s<a;)o[s]=(c+s)*l}else{l=-l;let c=Math.round(r*l),u=Math.round(e*l);for(c/l<r&&++c,u/l>e&&--u,o=new Array(a=u-c+1);++s<a;)o[s]=(c+s)/l}return i&&o.reverse(),o}function Wee(r,e,n){var i=(e-r)/Math.max(0,n),s=Math.floor(Math.log(i)/Math.LN10),a=i/Math.pow(10,s);return s>=0?(a>=u3?10:a>=h3?5:a>=d3?2:1)*Math.pow(10,s):-Math.pow(10,-s)/(a>=u3?10:a>=h3?5:a>=d3?2:1)}function p3(r,e,n){var i=Math.abs(e-r)/Math.max(0,n),s=Math.pow(10,Math.floor(Math.log(i)/Math.LN10)),a=i/s;return a>=u3?s*=10:a>=h3?s*=5:a>=d3&&(s*=2),e<r?-s:s}function db(r,e){let n;if(e===void 0)for(const i of r)i!=null&&(n<i||n===void 0&&i>=i)&&(n=i);else{let i=-1;for(let s of r)(s=e(s,++i,r))!=null&&(n<s||n===void 0&&s>=s)&&(n=s)}return n}function fb(r,e){let n;if(e===void 0)for(const i of r)i!=null&&(n>i||n===void 0&&i>=i)&&(n=i);else{let i=-1;for(let s of r)(s=e(s,++i,r))!=null&&(n>s||n===void 0&&s>=s)&&(n=s)}return n}function qee(r,e,n=0,i=1/0,s){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),i=Math.floor(Math.min(r.length-1,i)),!(n<=e&&e<=i))return r;for(s=s===void 0?Hee:D1e(s);i>n;){if(i-n>600){const c=i-n+1,u=e-n+1,h=Math.log(c),d=.5*Math.exp(2*h/3),f=.5*Math.sqrt(h*d*(c-d)/c)*(u-c/2<0?-1:1),p=Math.max(n,Math.floor(e-u*d/c+f)),g=Math.min(i,Math.floor(e+(c-u)*d/c+f));qee(r,e,p,g,s)}const a=r[e];let o=n,l=i;for(pv(r,n,e),s(r[i],a)>0&&pv(r,n,i);o<l;){for(pv(r,o,l),++o,--l;s(r[o],a)<0;)++o;for(;s(r[l],a)>0;)--l}s(r[n],a)===0?pv(r,n,l):(++l,pv(r,l,i)),l<=e&&(n=l+1),e<=l&&(i=l-1)}return r}function pv(r,e,n){const i=r[e];r[e]=r[n],r[n]=i}function L1e(r,e,n){if(r=Float64Array.from(P1e(r)),!(!(i=r.length)||isNaN(e=+e))){if(e<=0||i<2)return fb(r);if(e>=1)return db(r);var i,s=(i-1)*e,a=Math.floor(s),o=db(qee(r,a).subarray(0,a+1)),l=fb(r.subarray(a+1));return o+(l-o)*(s-a)}}function F1e(r,e,n=Vee){if(!(!(i=r.length)||isNaN(e=+e))){if(e<=0||i<2)return+n(r[0],0,r);if(e>=1)return+n(r[i-1],i-1,r);var i,s=(i-1)*e,a=Math.floor(s),o=+n(r[a],a,r),l=+n(r[a+1],a+1,r);return o+(l-o)*(s-a)}}function B1e(r,e,n){r=+r,e=+e,n=(s=arguments.length)<2?(e=r,r=0,1):s<3?1:+n;for(var i=-1,s=Math.max(0,Math.ceil((e-r)/n))|0,a=new Array(s);++i<s;)a[i]=r+i*n;return a}function j1e(r,e){let n=0;for(let i of r)(i=+i)&&(n+=i);return n}function m3(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,i=Array(e);n<e;n++)i[n]=r[n];return i}function U1e(r){if(Array.isArray(r))return r}function z1e(r){if(Array.isArray(r))return m3(r)}function Xee(r,e,n){if(typeof r=="function"?r===e:r.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}function $1e(r,e){if(e.has(r))throw new TypeError("Cannot initialize the same private elements twice on an object")}function G1e(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function na(r,e){return r.get(Xee(r,e))}function qm(r,e,n){$1e(r,e),e.set(r,n)}function K1(r,e,n){return r.set(Xee(r,e),n),n}function V1e(r,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(r,J1e(i.key),i)}}function H1e(r,e,n){return e&&V1e(r.prototype,e),Object.defineProperty(r,"prototype",{writable:!1}),r}function W1e(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function q1e(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var i,s,a,o,l=[],c=!0,u=!1;try{if(a=(n=n.call(r)).next,e!==0)for(;!(c=(i=a.call(n)).done)&&(l.push(i.value),l.length!==e);c=!0);}catch(h){u=!0,s=h}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function X1e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function K1e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Y1e(r,e){return U1e(r)||q1e(r,e)||Kee(r,e)||X1e()}function Z1e(r){return z1e(r)||W1e(r)||Kee(r)||K1e()}function Q1e(r,e){if(typeof r!="object"||!r)return r;var n=r[Symbol.toPrimitive];if(n!==void 0){var i=n.call(r,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(r)}function J1e(r){var e=Q1e(r,"string");return typeof e=="symbol"?e:e+""}function Kee(r,e){if(r){if(typeof r=="string")return m3(r,e);var n={}.toString.call(r).slice(8,-1);return n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set"?Array.from(r):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?m3(r,e):void 0}}var Xm=new WeakMap,mv=new WeakMap,Km=new WeakMap,uP=new WeakMap,hP=new WeakMap,dP=new WeakMap,eSe=function(){function r(){G1e(this,r),qm(this,Xm,new Map),qm(this,mv,new Map),qm(this,Km,function(e){return e}),qm(this,uP,function(){return{}}),qm(this,hP,function(){}),qm(this,dP,function(){})}return H1e(r,[{key:"getObj",value:function(n){return na(Xm,this).get(na(Km,this).call(this,n))}},{key:"getData",value:function(n){return na(mv,this).get(n)}},{key:"entries",value:function(){return Z1e(na(mv,this).entries()).map(function(n){var i=Y1e(n,2),s=i[0],a=i[1];return[a,s]})}},{key:"id",value:function(n){return K1(Km,this,Zt(n)),this}},{key:"onCreateObj",value:function(n){return K1(uP,this,n),this}},{key:"onUpdateObj",value:function(n){return K1(hP,this,n),this}},{key:"onRemoveObj",value:function(n){return K1(dP,this,n),this}},{key:"digest",value:function(n){var i=this;n.filter(function(a){return!na(Xm,i).has(na(Km,i).call(i,a))}).forEach(function(a){var o=na(uP,i).call(i,a);na(Xm,i).set(na(Km,i).call(i,a),o),na(mv,i).set(o,a)});var s=new Map(n.map(function(a){return[na(Km,i).call(i,a),a]}));return na(Xm,this).forEach(function(a,o){s.has(o)?na(hP,i).call(i,a,s.get(o)):(na(dP,i).call(i,a,o),na(Xm,i).delete(o),na(mv,i).delete(a))}),this}},{key:"clear",value:function(){return this.digest([]),this}}])}();function bl(r,e){switch(arguments.length){case 0:break;case 1:this.range(r);break;default:this.range(e).domain(r);break}return this}function Eh(r,e){switch(arguments.length){case 0:break;case 1:{typeof r=="function"?this.interpolator(r):this.range(r);break}default:{this.domain(r),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const g3=Symbol("implicit");function A_(){var r=new zV,e=[],n=[],i=g3;function s(a){let o=r.get(a);if(o===void 0){if(i!==g3)return i;r.set(a,o=e.push(a)-1)}return n[o%n.length]}return s.domain=function(a){if(!arguments.length)return e.slice();e=[],r=new zV;for(const o of a)r.has(o)||r.set(o,e.push(o)-1);return s},s.range=function(a){return arguments.length?(n=Array.from(a),s):n.slice()},s.unknown=function(a){return arguments.length?(i=a,s):i},s.copy=function(){return A_(e,n).unknown(i)},bl.apply(s,arguments),s}function pb(){var r=A_().unknown(void 0),e=r.domain,n=r.range,i=0,s=1,a,o,l=!1,c=0,u=0,h=.5;delete r.unknown;function d(){var f=e().length,p=s<i,g=p?s:i,v=p?i:s;a=(v-g)/Math.max(1,f-c+u*2),l&&(a=Math.floor(a)),g+=(v-g-a*(f-c))*h,o=a*(1-c),l&&(g=Math.round(g),o=Math.round(o));var x=B1e(f).map(function(_){return g+a*_});return n(p?x.reverse():x)}return r.domain=function(f){return arguments.length?(e(f),d()):e()},r.range=function(f){return arguments.length?([i,s]=f,i=+i,s=+s,d()):[i,s]},r.rangeRound=function(f){return[i,s]=f,i=+i,s=+s,l=!0,d()},r.bandwidth=function(){return o},r.step=function(){return a},r.round=function(f){return arguments.length?(l=!!f,d()):l},r.padding=function(f){return arguments.length?(c=Math.min(1,u=+f),d()):c},r.paddingInner=function(f){return arguments.length?(c=Math.min(1,f),d()):c},r.paddingOuter=function(f){return arguments.length?(u=+f,d()):u},r.align=function(f){return arguments.length?(h=Math.max(0,Math.min(1,f)),d()):h},r.copy=function(){return pb(e(),[i,s]).round(l).paddingInner(c).paddingOuter(u).align(h)},bl.apply(d(),arguments)}function Yee(r){var e=r.copy;return r.padding=r.paddingOuter,delete r.paddingInner,delete r.paddingOuter,r.copy=function(){return Yee(e())},r}function xx(){return Yee(pb.apply(null,arguments).paddingInner(1))}function l0(r,e,n){r.prototype=e.prototype=n,n.constructor=r}function C_(r,e){var n=Object.create(r.prototype);for(var i in e)n[i]=e[i];return n}function Wd(){}var Ap=.7,vy=1/Ap,Ug="\\s*([+-]?\\d+)\\s*",mb="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",jc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",tSe=/^#([0-9a-f]{3,8})$/,nSe=new RegExp(`^rgb\\(${Ug},${Ug},${Ug}\\)$`),rSe=new RegExp(`^rgb\\(${jc},${jc},${jc}\\)$`),iSe=new RegExp(`^rgba\\(${Ug},${Ug},${Ug},${mb}\\)$`),sSe=new RegExp(`^rgba\\(${jc},${jc},${jc},${mb}\\)$`),aSe=new RegExp(`^hsl\\(${mb},${jc},${jc}\\)$`),oSe=new RegExp(`^hsla\\(${mb},${jc},${jc},${mb}\\)$`),GV={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};l0(Wd,Cp,{copy(r){return Object.assign(new this.constructor,this,r)},displayable(){return this.rgb().displayable()},hex:VV,formatHex:VV,formatHex8:lSe,formatHsl:cSe,formatRgb:HV,toString:HV});function VV(){return this.rgb().formatHex()}function lSe(){return this.rgb().formatHex8()}function cSe(){return Zee(this).formatHsl()}function HV(){return this.rgb().formatRgb()}function Cp(r){var e,n;return r=(r+"").trim().toLowerCase(),(e=tSe.exec(r))?(n=e[1].length,e=parseInt(e[1],16),n===6?WV(e):n===3?new Ps(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Y1(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Y1(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=nSe.exec(r))?new Ps(e[1],e[2],e[3],1):(e=rSe.exec(r))?new Ps(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=iSe.exec(r))?Y1(e[1],e[2],e[3],e[4]):(e=sSe.exec(r))?Y1(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=aSe.exec(r))?KV(e[1],e[2]/100,e[3]/100,1):(e=oSe.exec(r))?KV(e[1],e[2]/100,e[3]/100,e[4]):GV.hasOwnProperty(r)?WV(GV[r]):r==="transparent"?new Ps(NaN,NaN,NaN,0):null}function WV(r){return new Ps(r>>16&255,r>>8&255,r&255,1)}function Y1(r,e,n,i){return i<=0&&(r=e=n=NaN),new Ps(r,e,n,i)}function Qj(r){return r instanceof Wd||(r=Cp(r)),r?(r=r.rgb(),new Ps(r.r,r.g,r.b,r.opacity)):new Ps}function y3(r,e,n,i){return arguments.length===1?Qj(r):new Ps(r,e,n,i??1)}function Ps(r,e,n,i){this.r=+r,this.g=+e,this.b=+n,this.opacity=+i}l0(Ps,y3,C_(Wd,{brighter(r){return r=r==null?vy:Math.pow(vy,r),new Ps(this.r*r,this.g*r,this.b*r,this.opacity)},darker(r){return r=r==null?Ap:Math.pow(Ap,r),new Ps(this.r*r,this.g*r,this.b*r,this.opacity)},rgb(){return this},clamp(){return new Ps(fp(this.r),fp(this.g),fp(this.b),HT(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:qV,formatHex:qV,formatHex8:uSe,formatRgb:XV,toString:XV}));function qV(){return`#${ip(this.r)}${ip(this.g)}${ip(this.b)}`}function uSe(){return`#${ip(this.r)}${ip(this.g)}${ip(this.b)}${ip((isNaN(this.opacity)?1:this.opacity)*255)}`}function XV(){const r=HT(this.opacity);return`${r===1?"rgb(":"rgba("}${fp(this.r)}, ${fp(this.g)}, ${fp(this.b)}${r===1?")":`, ${r})`}`}function HT(r){return isNaN(r)?1:Math.max(0,Math.min(1,r))}function fp(r){return Math.max(0,Math.min(255,Math.round(r)||0))}function ip(r){return r=fp(r),(r<16?"0":"")+r.toString(16)}function KV(r,e,n,i){return i<=0?r=e=n=NaN:n<=0||n>=1?r=e=NaN:e<=0&&(r=NaN),new Jl(r,e,n,i)}function Zee(r){if(r instanceof Jl)return new Jl(r.h,r.s,r.l,r.opacity);if(r instanceof Wd||(r=Cp(r)),!r)return new Jl;if(r instanceof Jl)return r;r=r.rgb();var e=r.r/255,n=r.g/255,i=r.b/255,s=Math.min(e,n,i),a=Math.max(e,n,i),o=NaN,l=a-s,c=(a+s)/2;return l?(e===a?o=(n-i)/l+(n<i)*6:n===a?o=(i-e)/l+2:o=(e-n)/l+4,l/=c<.5?a+s:2-a-s,o*=60):l=c>0&&c<1?0:o,new Jl(o,l,c,r.opacity)}function v3(r,e,n,i){return arguments.length===1?Zee(r):new Jl(r,e,n,i??1)}function Jl(r,e,n,i){this.h=+r,this.s=+e,this.l=+n,this.opacity=+i}l0(Jl,v3,C_(Wd,{brighter(r){return r=r==null?vy:Math.pow(vy,r),new Jl(this.h,this.s,this.l*r,this.opacity)},darker(r){return r=r==null?Ap:Math.pow(Ap,r),new Jl(this.h,this.s,this.l*r,this.opacity)},rgb(){var r=this.h%360+(this.h<0)*360,e=isNaN(r)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*e,s=2*n-i;return new Ps(fP(r>=240?r-240:r+120,s,i),fP(r,s,i),fP(r<120?r+240:r-120,s,i),this.opacity)},clamp(){return new Jl(YV(this.h),Z1(this.s),Z1(this.l),HT(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const r=HT(this.opacity);return`${r===1?"hsl(":"hsla("}${YV(this.h)}, ${Z1(this.s)*100}%, ${Z1(this.l)*100}%${r===1?")":`, ${r})`}`}}));function YV(r){return r=(r||0)%360,r<0?r+360:r}function Z1(r){return Math.max(0,Math.min(1,r||0))}function fP(r,e,n){return(r<60?e+(n-e)*r/60:r<180?n:r<240?e+(n-e)*(240-r)/60:e)*255}const Qee=Math.PI/180,Jee=180/Math.PI,WT=18,ete=.96422,tte=1,nte=.82521,rte=4/29,zg=6/29,ite=3*zg*zg,hSe=zg*zg*zg;function ste(r){if(r instanceof Uc)return new Uc(r.l,r.a,r.b,r.opacity);if(r instanceof Ku)return ate(r);r instanceof Ps||(r=Qj(r));var e=yP(r.r),n=yP(r.g),i=yP(r.b),s=pP((.2225045*e+.7168786*n+.0606169*i)/tte),a,o;return e===n&&n===i?a=o=s:(a=pP((.4360747*e+.3850649*n+.1430804*i)/ete),o=pP((.0139322*e+.0971045*n+.7141733*i)/nte)),new Uc(116*s-16,500*(a-s),200*(s-o),r.opacity)}function x3(r,e,n,i){return arguments.length===1?ste(r):new Uc(r,e,n,i??1)}function Uc(r,e,n,i){this.l=+r,this.a=+e,this.b=+n,this.opacity=+i}l0(Uc,x3,C_(Wd,{brighter(r){return new Uc(this.l+WT*(r??1),this.a,this.b,this.opacity)},darker(r){return new Uc(this.l-WT*(r??1),this.a,this.b,this.opacity)},rgb(){var r=(this.l+16)/116,e=isNaN(this.a)?r:r+this.a/500,n=isNaN(this.b)?r:r-this.b/200;return e=ete*mP(e),r=tte*mP(r),n=nte*mP(n),new Ps(gP(3.1338561*e-1.6168667*r-.4906146*n),gP(-.9787684*e+1.9161415*r+.033454*n),gP(.0719453*e-.2289914*r+1.4052427*n),this.opacity)}}));function pP(r){return r>hSe?Math.pow(r,1/3):r/ite+rte}function mP(r){return r>zg?r*r*r:ite*(r-rte)}function gP(r){return 255*(r<=.0031308?12.92*r:1.055*Math.pow(r,1/2.4)-.055)}function yP(r){return(r/=255)<=.04045?r/12.92:Math.pow((r+.055)/1.055,2.4)}function dSe(r){if(r instanceof Ku)return new Ku(r.h,r.c,r.l,r.opacity);if(r instanceof Uc||(r=ste(r)),r.a===0&&r.b===0)return new Ku(NaN,0<r.l&&r.l<100?0:NaN,r.l,r.opacity);var e=Math.atan2(r.b,r.a)*Jee;return new Ku(e<0?e+360:e,Math.sqrt(r.a*r.a+r.b*r.b),r.l,r.opacity)}function b3(r,e,n,i){return arguments.length===1?dSe(r):new Ku(r,e,n,i??1)}function Ku(r,e,n,i){this.h=+r,this.c=+e,this.l=+n,this.opacity=+i}function ate(r){if(isNaN(r.h))return new Uc(r.l,0,0,r.opacity);var e=r.h*Qee;return new Uc(r.l,Math.cos(e)*r.c,Math.sin(e)*r.c,r.opacity)}l0(Ku,b3,C_(Wd,{brighter(r){return new Ku(this.h,this.c,this.l+WT*(r??1),this.opacity)},darker(r){return new Ku(this.h,this.c,this.l-WT*(r??1),this.opacity)},rgb(){return ate(this).rgb()}}));var ote=-.14861,Jj=1.78277,eU=-.29227,OM=-.90649,gb=1.97294,ZV=gb*OM,QV=gb*Jj,JV=Jj*eU-OM*ote;function fSe(r){if(r instanceof pp)return new pp(r.h,r.s,r.l,r.opacity);r instanceof Ps||(r=Qj(r));var e=r.r/255,n=r.g/255,i=r.b/255,s=(JV*i+ZV*e-QV*n)/(JV+ZV-QV),a=i-s,o=(gb*(n-s)-eU*a)/OM,l=Math.sqrt(o*o+a*a)/(gb*s*(1-s)),c=l?Math.atan2(o,a)*Jee-120:NaN;return new pp(c<0?c+360:c,l,s,r.opacity)}function _3(r,e,n,i){return arguments.length===1?fSe(r):new pp(r,e,n,i??1)}function pp(r,e,n,i){this.h=+r,this.s=+e,this.l=+n,this.opacity=+i}l0(pp,_3,C_(Wd,{brighter(r){return r=r==null?vy:Math.pow(vy,r),new pp(this.h,this.s,this.l*r,this.opacity)},darker(r){return r=r==null?Ap:Math.pow(Ap,r),new pp(this.h,this.s,this.l*r,this.opacity)},rgb(){var r=isNaN(this.h)?0:(this.h+120)*Qee,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),i=Math.cos(r),s=Math.sin(r);return new Ps(255*(e+n*(ote*i+Jj*s)),255*(e+n*(eU*i+OM*s)),255*(e+n*(gb*i)),this.opacity)}}));const kM=r=>()=>r;function lte(r,e){return function(n){return r+n*e}}function pSe(r,e,n){return r=Math.pow(r,n),e=Math.pow(e,n)-r,n=1/n,function(i){return Math.pow(r+i*e,n)}}function tU(r,e){var n=e-r;return n?lte(r,n>180||n<-180?n-360*Math.round(n/360):n):kM(isNaN(r)?e:r)}function mSe(r){return(r=+r)==1?Rs:function(e,n){return n-e?pSe(e,n,r):kM(isNaN(e)?n:e)}}function Rs(r,e){var n=e-r;return n?lte(r,n):kM(isNaN(r)?e:r)}const yb=function r(e){var n=mSe(e);function i(s,a){var o=n((s=y3(s)).r,(a=y3(a)).r),l=n(s.g,a.g),c=n(s.b,a.b),u=Rs(s.opacity,a.opacity);return function(h){return s.r=o(h),s.g=l(h),s.b=c(h),s.opacity=u(h),s+""}}return i.gamma=r,i}(1);function gSe(r,e){e||(e=[]);var n=r?Math.min(e.length,r.length):0,i=e.slice(),s;return function(a){for(s=0;s<n;++s)i[s]=r[s]*(1-a)+e[s]*a;return i}}function ySe(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}function vSe(r,e){var n=e?e.length:0,i=r?Math.min(n,r.length):0,s=new Array(i),a=new Array(n),o;for(o=0;o<i;++o)s[o]=c0(r[o],e[o]);for(;o<n;++o)a[o]=e[o];return function(l){for(o=0;o<i;++o)a[o]=s[o](l);return a}}function xSe(r,e){var n=new Date;return r=+r,e=+e,function(i){return n.setTime(r*(1-i)+e*i),n}}function Zl(r,e){return r=+r,e=+e,function(n){return r*(1-n)+e*n}}function bSe(r,e){var n={},i={},s;(r===null||typeof r!="object")&&(r={}),(e===null||typeof e!="object")&&(e={});for(s in e)s in r?n[s]=c0(r[s],e[s]):i[s]=e[s];return function(a){for(s in n)i[s]=n[s](a);return i}}var w3=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,vP=new RegExp(w3.source,"g");function _Se(r){return function(){return r}}function wSe(r){return function(e){return r(e)+""}}function cte(r,e){var n=w3.lastIndex=vP.lastIndex=0,i,s,a,o=-1,l=[],c=[];for(r=r+"",e=e+"";(i=w3.exec(r))&&(s=vP.exec(e));)(a=s.index)>n&&(a=e.slice(n,a),l[o]?l[o]+=a:l[++o]=a),(i=i[0])===(s=s[0])?l[o]?l[o]+=s:l[++o]=s:(l[++o]=null,c.push({i:o,x:Zl(i,s)})),n=vP.lastIndex;return n<e.length&&(a=e.slice(n),l[o]?l[o]+=a:l[++o]=a),l.length<2?c[0]?wSe(c[0].x):_Se(e):(e=c.length,function(u){for(var h=0,d;h<e;++h)l[(d=c[h]).i]=d.x(u);return l.join("")})}function c0(r,e){var n=typeof e,i;return e==null||n==="boolean"?kM(e):(n==="number"?Zl:n==="string"?(i=Cp(e))?(e=i,yb):cte:e instanceof Cp?yb:e instanceof Date?xSe:ySe(e)?gSe:Array.isArray(e)?vSe:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?bSe:Zl)(r,e)}function IM(r,e){return r=+r,e=+e,function(n){return Math.round(r*(1-n)+e*n)}}var e8=180/Math.PI,S3={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function ute(r,e,n,i,s,a){var o,l,c;return(o=Math.sqrt(r*r+e*e))&&(r/=o,e/=o),(c=r*n+e*i)&&(n-=r*c,i-=e*c),(l=Math.sqrt(n*n+i*i))&&(n/=l,i/=l,c/=l),r*i<e*n&&(r=-r,e=-e,c=-c,o=-o),{translateX:s,translateY:a,rotate:Math.atan2(e,r)*e8,skewX:Math.atan(c)*e8,scaleX:o,scaleY:l}}var Q1;function SSe(r){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(r+"");return e.isIdentity?S3:ute(e.a,e.b,e.c,e.d,e.e,e.f)}function TSe(r){return r==null||(Q1||(Q1=document.createElementNS("http://www.w3.org/2000/svg","g")),Q1.setAttribute("transform",r),!(r=Q1.transform.baseVal.consolidate()))?S3:(r=r.matrix,ute(r.a,r.b,r.c,r.d,r.e,r.f))}function hte(r,e,n,i){function s(u){return u.length?u.pop()+" ":""}function a(u,h,d,f,p,g){if(u!==d||h!==f){var v=p.push("translate(",null,e,null,n);g.push({i:v-4,x:Zl(u,d)},{i:v-2,x:Zl(h,f)})}else(d||f)&&p.push("translate("+d+e+f+n)}function o(u,h,d,f){u!==h?(u-h>180?h+=360:h-u>180&&(u+=360),f.push({i:d.push(s(d)+"rotate(",null,i)-2,x:Zl(u,h)})):h&&d.push(s(d)+"rotate("+h+i)}function l(u,h,d,f){u!==h?f.push({i:d.push(s(d)+"skewX(",null,i)-2,x:Zl(u,h)}):h&&d.push(s(d)+"skewX("+h+i)}function c(u,h,d,f,p,g){if(u!==d||h!==f){var v=p.push(s(p)+"scale(",null,",",null,")");g.push({i:v-4,x:Zl(u,d)},{i:v-2,x:Zl(h,f)})}else(d!==1||f!==1)&&p.push(s(p)+"scale("+d+","+f+")")}return function(u,h){var d=[],f=[];return u=r(u),h=r(h),a(u.translateX,u.translateY,h.translateX,h.translateY,d,f),o(u.rotate,h.rotate,d,f),l(u.skewX,h.skewX,d,f),c(u.scaleX,u.scaleY,h.scaleX,h.scaleY,d,f),u=h=null,function(p){for(var g=-1,v=f.length,x;++g<v;)d[(x=f[g]).i]=x.x(p);return d.join("")}}}var ESe=hte(SSe,"px, ","px)","deg)"),MSe=hte(TSe,", ",")",")"),ASe=1e-12;function t8(r){return((r=Math.exp(r))+1/r)/2}function CSe(r){return((r=Math.exp(r))-1/r)/2}function NSe(r){return((r=Math.exp(2*r))-1)/(r+1)}const PSe=function r(e,n,i){function s(a,o){var l=a[0],c=a[1],u=a[2],h=o[0],d=o[1],f=o[2],p=h-l,g=d-c,v=p*p+g*g,x,_;if(v<ASe)_=Math.log(f/u)/e,x=function(A){return[l+A*p,c+A*g,u*Math.exp(e*A*_)]};else{var E=Math.sqrt(v),S=(f*f-u*u+i*v)/(2*u*n*E),T=(f*f-u*u-i*v)/(2*f*n*E),M=Math.log(Math.sqrt(S*S+1)-S),C=Math.log(Math.sqrt(T*T+1)-T);_=(C-M)/e,x=function(A){var P=A*_,R=t8(M),O=u/(n*E)*(R*NSe(e*P+M)-CSe(M));return[l+O*p,c+O*g,u*R/t8(e*P+M)]}}return x.duration=_*1e3*e/Math.SQRT2,x}return s.rho=function(a){var o=Math.max(.001,+a),l=o*o,c=l*l;return r(o,l,c)},s}(Math.SQRT2,2,4);function dte(r){return function(e,n){var i=r((e=v3(e)).h,(n=v3(n)).h),s=Rs(e.s,n.s),a=Rs(e.l,n.l),o=Rs(e.opacity,n.opacity);return function(l){return e.h=i(l),e.s=s(l),e.l=a(l),e.opacity=o(l),e+""}}}const RSe=dte(tU);var OSe=dte(Rs);function kSe(r,e){var n=Rs((r=x3(r)).l,(e=x3(e)).l),i=Rs(r.a,e.a),s=Rs(r.b,e.b),a=Rs(r.opacity,e.opacity);return function(o){return r.l=n(o),r.a=i(o),r.b=s(o),r.opacity=a(o),r+""}}function fte(r){return function(e,n){var i=r((e=b3(e)).h,(n=b3(n)).h),s=Rs(e.c,n.c),a=Rs(e.l,n.l),o=Rs(e.opacity,n.opacity);return function(l){return e.h=i(l),e.c=s(l),e.l=a(l),e.opacity=o(l),e+""}}}const ISe=fte(tU);var DSe=fte(Rs);function pte(r){return function e(n){n=+n;function i(s,a){var o=r((s=_3(s)).h,(a=_3(a)).h),l=Rs(s.s,a.s),c=Rs(s.l,a.l),u=Rs(s.opacity,a.opacity);return function(h){return s.h=o(h),s.s=l(h),s.l=c(Math.pow(h,n)),s.opacity=u(h),s+""}}return i.gamma=e,i}(1)}const LSe=pte(tU);var FSe=pte(Rs);function BSe(r,e){e===void 0&&(e=r,r=c0);for(var n=0,i=e.length-1,s=e[0],a=new Array(i<0?0:i);n<i;)a[n]=r(s,s=e[++n]);return function(o){var l=Math.max(0,Math.min(i-1,Math.floor(o*=i)));return a[l](o-l)}}function jSe(r){return function(){return r}}function qT(r){return+r}var n8=[0,1];function Na(r){return r}function T3(r,e){return(e-=r=+r)?function(n){return(n-r)/e}:jSe(isNaN(e)?NaN:.5)}function USe(r,e){var n;return r>e&&(n=r,r=e,e=n),function(i){return Math.max(r,Math.min(e,i))}}function zSe(r,e,n){var i=r[0],s=r[1],a=e[0],o=e[1];return s<i?(i=T3(s,i),a=n(o,a)):(i=T3(i,s),a=n(a,o)),function(l){return a(i(l))}}function $Se(r,e,n){var i=Math.min(r.length,e.length)-1,s=new Array(i),a=new Array(i),o=-1;for(r[i]<r[0]&&(r=r.slice().reverse(),e=e.slice().reverse());++o<i;)s[o]=T3(r[o],r[o+1]),a[o]=n(e[o],e[o+1]);return function(l){var c=M_(r,l,1,i)-1;return a[c](s[c](l))}}function N_(r,e){return e.domain(r.domain()).range(r.range()).interpolate(r.interpolate()).clamp(r.clamp()).unknown(r.unknown())}function DM(){var r=n8,e=n8,n=c0,i,s,a,o=Na,l,c,u;function h(){var f=Math.min(r.length,e.length);return o!==Na&&(o=USe(r[0],r[f-1])),l=f>2?$Se:zSe,c=u=null,d}function d(f){return f==null||isNaN(f=+f)?a:(c||(c=l(r.map(i),e,n)))(i(o(f)))}return d.invert=function(f){return o(s((u||(u=l(e,r.map(i),Zl)))(f)))},d.domain=function(f){return arguments.length?(r=Array.from(f,qT),h()):r.slice()},d.range=function(f){return arguments.length?(e=Array.from(f),h()):e.slice()},d.rangeRound=function(f){return e=Array.from(f),n=IM,h()},d.clamp=function(f){return arguments.length?(o=f?!0:Na,h()):o!==Na},d.interpolate=function(f){return arguments.length?(n=f,h()):n},d.unknown=function(f){return arguments.length?(a=f,d):a},function(f,p){return i=f,s=p,h()}}function nU(){return DM()(Na,Na)}function GSe(r){return Math.abs(r=Math.round(r))>=1e21?r.toLocaleString("en").replace(/,/g,""):r.toString(10)}function XT(r,e){if((n=(r=e?r.toExponential(e-1):r.toExponential()).indexOf("e"))<0)return null;var n,i=r.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+r.slice(n+1)]}function xy(r){return r=XT(Math.abs(r)),r?r[1]:NaN}function VSe(r,e){return function(n,i){for(var s=n.length,a=[],o=0,l=r[0],c=0;s>0&&l>0&&(c+l+1>i&&(l=Math.max(1,i-c)),a.push(n.substring(s-=l,s+l)),!((c+=l+1)>i));)l=r[o=(o+1)%r.length];return a.reverse().join(e)}}function HSe(r){return function(e){return e.replace(/[0-9]/g,function(n){return r[+n]})}}var WSe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function vb(r){if(!(e=WSe.exec(r)))throw new Error("invalid format: "+r);var e;return new rU({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}vb.prototype=rU.prototype;function rU(r){this.fill=r.fill===void 0?" ":r.fill+"",this.align=r.align===void 0?">":r.align+"",this.sign=r.sign===void 0?"-":r.sign+"",this.symbol=r.symbol===void 0?"":r.symbol+"",this.zero=!!r.zero,this.width=r.width===void 0?void 0:+r.width,this.comma=!!r.comma,this.precision=r.precision===void 0?void 0:+r.precision,this.trim=!!r.trim,this.type=r.type===void 0?"":r.type+""}rU.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function qSe(r){e:for(var e=r.length,n=1,i=-1,s;n<e;++n)switch(r[n]){case".":i=s=n;break;case"0":i===0&&(i=n),s=n;break;default:if(!+r[n])break e;i>0&&(i=0);break}return i>0?r.slice(0,i)+r.slice(s+1):r}var mte;function XSe(r,e){var n=XT(r,e);if(!n)return r+"";var i=n[0],s=n[1],a=s-(mte=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,o=i.length;return a===o?i:a>o?i+new Array(a-o+1).join("0"):a>0?i.slice(0,a)+"."+i.slice(a):"0."+new Array(1-a).join("0")+XT(r,Math.max(0,e+a-1))[0]}function r8(r,e){var n=XT(r,e);if(!n)return r+"";var i=n[0],s=n[1];return s<0?"0."+new Array(-s).join("0")+i:i.length>s+1?i.slice(0,s+1)+"."+i.slice(s+1):i+new Array(s-i.length+2).join("0")}const i8={"%":(r,e)=>(r*100).toFixed(e),b:r=>Math.round(r).toString(2),c:r=>r+"",d:GSe,e:(r,e)=>r.toExponential(e),f:(r,e)=>r.toFixed(e),g:(r,e)=>r.toPrecision(e),o:r=>Math.round(r).toString(8),p:(r,e)=>r8(r*100,e),r:r8,s:XSe,X:r=>Math.round(r).toString(16).toUpperCase(),x:r=>Math.round(r).toString(16)};function s8(r){return r}var a8=Array.prototype.map,o8=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function KSe(r){var e=r.grouping===void 0||r.thousands===void 0?s8:VSe(a8.call(r.grouping,Number),r.thousands+""),n=r.currency===void 0?"":r.currency[0]+"",i=r.currency===void 0?"":r.currency[1]+"",s=r.decimal===void 0?".":r.decimal+"",a=r.numerals===void 0?s8:HSe(a8.call(r.numerals,String)),o=r.percent===void 0?"%":r.percent+"",l=r.minus===void 0?"−":r.minus+"",c=r.nan===void 0?"NaN":r.nan+"";function u(d){d=vb(d);var f=d.fill,p=d.align,g=d.sign,v=d.symbol,x=d.zero,_=d.width,E=d.comma,S=d.precision,T=d.trim,M=d.type;M==="n"?(E=!0,M="g"):i8[M]||(S===void 0&&(S=12),T=!0,M="g"),(x||f==="0"&&p==="=")&&(x=!0,f="0",p="=");var C=v==="$"?n:v==="#"&&/[boxX]/.test(M)?"0"+M.toLowerCase():"",A=v==="$"?i:/[%p]/.test(M)?o:"",P=i8[M],R=/[defgprs%]/.test(M);S=S===void 0?6:/[gprs]/.test(M)?Math.max(1,Math.min(21,S)):Math.max(0,Math.min(20,S));function O(D){var F=C,U=A,B,W,j;if(M==="c")U=P(D)+U,D="";else{D=+D;var $=D<0||1/D<0;if(D=isNaN(D)?c:P(Math.abs(D),S),T&&(D=qSe(D)),$&&+D==0&&g!=="+"&&($=!1),F=($?g==="("?g:l:g==="-"||g==="("?"":g)+F,U=(M==="s"?o8[8+mte/3]:"")+U+($&&g==="("?")":""),R){for(B=-1,W=D.length;++B<W;)if(j=D.charCodeAt(B),48>j||j>57){U=(j===46?s+D.slice(B+1):D.slice(B))+U,D=D.slice(0,B);break}}}E&&!x&&(D=e(D,1/0));var z=F.length+D.length+U.length,Z=z<_?new Array(_-z+1).join(f):"";switch(E&&x&&(D=e(Z+D,Z.length?_-U.length:1/0),Z=""),p){case"<":D=F+D+U+Z;break;case"=":D=F+Z+D+U;break;case"^":D=Z.slice(0,z=Z.length>>1)+F+D+U+Z.slice(z);break;default:D=Z+F+D+U;break}return a(D)}return O.toString=function(){return d+""},O}function h(d,f){var p=u((d=vb(d),d.type="f",d)),g=Math.max(-8,Math.min(8,Math.floor(xy(f)/3)))*3,v=Math.pow(10,-g),x=o8[8+g/3];return function(_){return p(v*_)+x}}return{format:u,formatPrefix:h}}var J1,iU,gte;YSe({thousands:",",grouping:[3],currency:["$",""]});function YSe(r){return J1=KSe(r),iU=J1.format,gte=J1.formatPrefix,J1}function ZSe(r){return Math.max(0,-xy(Math.abs(r)))}function QSe(r,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(xy(e)/3)))*3-xy(Math.abs(r)))}function JSe(r,e){return r=Math.abs(r),e=Math.abs(e)-r,Math.max(0,xy(e)-xy(r))+1}function yte(r,e,n,i){var s=p3(r,e,n),a;switch(i=vb(i??",f"),i.type){case"s":{var o=Math.max(Math.abs(r),Math.abs(e));return i.precision==null&&!isNaN(a=QSe(s,o))&&(i.precision=a),gte(i,o)}case"":case"e":case"g":case"p":case"r":{i.precision==null&&!isNaN(a=JSe(s,Math.max(Math.abs(r),Math.abs(e))))&&(i.precision=a-(i.type==="e"));break}case"f":case"%":{i.precision==null&&!isNaN(a=ZSe(s))&&(i.precision=a-(i.type==="%")*2);break}}return iU(i)}function qd(r){var e=r.domain;return r.ticks=function(n){var i=e();return f3(i[0],i[i.length-1],n??10)},r.tickFormat=function(n,i){var s=e();return yte(s[0],s[s.length-1],n??10,i)},r.nice=function(n){n==null&&(n=10);var i=e(),s=0,a=i.length-1,o=i[s],l=i[a],c,u,h=10;for(l<o&&(u=o,o=l,l=u,u=s,s=a,a=u);h-- >0;){if(u=Wee(o,l,n),u===c)return i[s]=o,i[a]=l,e(i);if(u>0)o=Math.floor(o/u)*u,l=Math.ceil(l/u)*u;else if(u<0)o=Math.ceil(o*u)/u,l=Math.floor(l*u)/u;else break;c=u}return r},r}function xb(){var r=nU();return r.copy=function(){return N_(r,xb())},bl.apply(r,arguments),qd(r)}function vte(r){var e;function n(i){return i==null||isNaN(i=+i)?e:i}return n.invert=n,n.domain=n.range=function(i){return arguments.length?(r=Array.from(i,qT),n):r.slice()},n.unknown=function(i){return arguments.length?(e=i,n):e},n.copy=function(){return vte(r).unknown(e)},r=arguments.length?Array.from(r,qT):[0,1],qd(n)}function xte(r,e){r=r.slice();var n=0,i=r.length-1,s=r[n],a=r[i],o;return a<s&&(o=n,n=i,i=o,o=s,s=a,a=o),r[n]=e.floor(s),r[i]=e.ceil(a),r}function l8(r){return Math.log(r)}function c8(r){return Math.exp(r)}function eTe(r){return-Math.log(-r)}function tTe(r){return-Math.exp(-r)}function nTe(r){return isFinite(r)?+("1e"+r):r<0?0:r}function rTe(r){return r===10?nTe:r===Math.E?Math.exp:e=>Math.pow(r,e)}function iTe(r){return r===Math.E?Math.log:r===10&&Math.log10||r===2&&Math.log2||(r=Math.log(r),e=>Math.log(e)/r)}function u8(r){return(e,n)=>-r(-e,n)}function sU(r){const e=r(l8,c8),n=e.domain;let i=10,s,a;function o(){return s=iTe(i),a=rTe(i),n()[0]<0?(s=u8(s),a=u8(a),r(eTe,tTe)):r(l8,c8),e}return e.base=function(l){return arguments.length?(i=+l,o()):i},e.domain=function(l){return arguments.length?(n(l),o()):n()},e.ticks=l=>{const c=n();let u=c[0],h=c[c.length-1];const d=h<u;d&&([u,h]=[h,u]);let f=s(u),p=s(h),g,v;const x=l==null?10:+l;let _=[];if(!(i%1)&&p-f<x){if(f=Math.floor(f),p=Math.ceil(p),u>0){for(;f<=p;++f)for(g=1;g<i;++g)if(v=f<0?g/a(-f):g*a(f),!(v<u)){if(v>h)break;_.push(v)}}else for(;f<=p;++f)for(g=i-1;g>=1;--g)if(v=f>0?g/a(-f):g*a(f),!(v<u)){if(v>h)break;_.push(v)}_.length*2<x&&(_=f3(u,h,x))}else _=f3(f,p,Math.min(p-f,x)).map(a);return d?_.reverse():_},e.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=i===10?"s":","),typeof c!="function"&&(!(i%1)&&(c=vb(c)).precision==null&&(c.trim=!0),c=iU(c)),l===1/0)return c;const u=Math.max(1,i*l/e.ticks().length);return h=>{let d=h/a(Math.round(s(h)));return d*i<i-.5&&(d*=i),d<=u?c(h):""}},e.nice=()=>n(xte(n(),{floor:l=>a(Math.floor(s(l))),ceil:l=>a(Math.ceil(s(l)))})),e}function bte(){const r=sU(DM()).domain([1,10]);return r.copy=()=>N_(r,bte()).base(r.base()),bl.apply(r,arguments),r}function h8(r){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/r))}}function d8(r){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*r}}function aU(r){var e=1,n=r(h8(e),d8(e));return n.constant=function(i){return arguments.length?r(h8(e=+i),d8(e)):e},qd(n)}function _te(){var r=aU(DM());return r.copy=function(){return N_(r,_te()).constant(r.constant())},bl.apply(r,arguments)}function f8(r){return function(e){return e<0?-Math.pow(-e,r):Math.pow(e,r)}}function sTe(r){return r<0?-Math.sqrt(-r):Math.sqrt(r)}function aTe(r){return r<0?-r*r:r*r}function oU(r){var e=r(Na,Na),n=1;function i(){return n===1?r(Na,Na):n===.5?r(sTe,aTe):r(f8(n),f8(1/n))}return e.exponent=function(s){return arguments.length?(n=+s,i()):n},qd(e)}function lU(){var r=oU(DM());return r.copy=function(){return N_(r,lU()).exponent(r.exponent())},bl.apply(r,arguments),r}function oTe(){return lU.apply(null,arguments).exponent(.5)}function p8(r){return Math.sign(r)*r*r}function lTe(r){return Math.sign(r)*Math.sqrt(Math.abs(r))}function wte(){var r=nU(),e=[0,1],n=!1,i;function s(a){var o=lTe(r(a));return isNaN(o)?i:n?Math.round(o):o}return s.invert=function(a){return r.invert(p8(a))},s.domain=function(a){return arguments.length?(r.domain(a),s):r.domain()},s.range=function(a){return arguments.length?(r.range((e=Array.from(a,qT)).map(p8)),s):e.slice()},s.rangeRound=function(a){return s.range(a).round(!0)},s.round=function(a){return arguments.length?(n=!!a,s):n},s.clamp=function(a){return arguments.length?(r.clamp(a),s):r.clamp()},s.unknown=function(a){return arguments.length?(i=a,s):i},s.copy=function(){return wte(r.domain(),e).round(n).clamp(r.clamp()).unknown(i)},bl.apply(s,arguments),qd(s)}function Ste(){var r=[],e=[],n=[],i;function s(){var o=0,l=Math.max(1,e.length);for(n=new Array(l-1);++o<l;)n[o-1]=F1e(r,o/l);return a}function a(o){return o==null||isNaN(o=+o)?i:e[M_(n,o)]}return a.invertExtent=function(o){var l=e.indexOf(o);return l<0?[NaN,NaN]:[l>0?n[l-1]:r[0],l<n.length?n[l]:r[r.length-1]]},a.domain=function(o){if(!arguments.length)return r.slice();r=[];for(let l of o)l!=null&&!isNaN(l=+l)&&r.push(l);return r.sort(Pd),s()},a.range=function(o){return arguments.length?(e=Array.from(o),s()):e.slice()},a.unknown=function(o){return arguments.length?(i=o,a):i},a.quantiles=function(){return n.slice()},a.copy=function(){return Ste().domain(r).range(e).unknown(i)},bl.apply(a,arguments)}function Tte(){var r=0,e=1,n=1,i=[.5],s=[0,1],a;function o(c){return c!=null&&c<=c?s[M_(i,c,0,n)]:a}function l(){var c=-1;for(i=new Array(n);++c<n;)i[c]=((c+1)*e-(c-n)*r)/(n+1);return o}return o.domain=function(c){return arguments.length?([r,e]=c,r=+r,e=+e,l()):[r,e]},o.range=function(c){return arguments.length?(n=(s=Array.from(c)).length-1,l()):s.slice()},o.invertExtent=function(c){var u=s.indexOf(c);return u<0?[NaN,NaN]:u<1?[r,i[0]]:u>=n?[i[n-1],e]:[i[u-1],i[u]]},o.unknown=function(c){return arguments.length&&(a=c),o},o.thresholds=function(){return i.slice()},o.copy=function(){return Tte().domain([r,e]).range(s).unknown(a)},bl.apply(qd(o),arguments)}function Ete(){var r=[.5],e=[0,1],n,i=1;function s(a){return a!=null&&a<=a?e[M_(r,a,0,i)]:n}return s.domain=function(a){return arguments.length?(r=Array.from(a),i=Math.min(r.length,e.length-1),s):r.slice()},s.range=function(a){return arguments.length?(e=Array.from(a),i=Math.min(r.length,e.length-1),s):e.slice()},s.invertExtent=function(a){var o=e.indexOf(a);return[r[o-1],r[o]]},s.unknown=function(a){return arguments.length?(n=a,s):n},s.copy=function(){return Ete().domain(r).range(e).unknown(n)},bl.apply(s,arguments)}const xP=new Date,bP=new Date;function bs(r,e,n,i){function s(a){return r(a=arguments.length===0?new Date:new Date(+a)),a}return s.floor=a=>(r(a=new Date(+a)),a),s.ceil=a=>(r(a=new Date(a-1)),e(a,1),r(a),a),s.round=a=>{const o=s(a),l=s.ceil(a);return a-o<l-a?o:l},s.offset=(a,o)=>(e(a=new Date(+a),o==null?1:Math.floor(o)),a),s.range=(a,o,l)=>{const c=[];if(a=s.ceil(a),l=l==null?1:Math.floor(l),!(a<o)||!(l>0))return c;let u;do c.push(u=new Date(+a)),e(a,l),r(a);while(u<a&&a<o);return c},s.filter=a=>bs(o=>{if(o>=o)for(;r(o),!a(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;e(o,-1),!a(o););else for(;--l>=0;)for(;e(o,1),!a(o););}),n&&(s.count=(a,o)=>(xP.setTime(+a),bP.setTime(+o),r(xP),r(bP),Math.floor(n(xP,bP))),s.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?s.filter(i?o=>i(o)%a===0:o=>s.count(0,o)%a===0):s)),s}const KT=bs(()=>{},(r,e)=>{r.setTime(+r+e)},(r,e)=>e-r);KT.every=r=>(r=Math.floor(r),!isFinite(r)||!(r>0)?null:r>1?bs(e=>{e.setTime(Math.floor(e/r)*r)},(e,n)=>{e.setTime(+e+n*r)},(e,n)=>(n-e)/r):KT);KT.range;const Yu=1e3,ll=Yu*60,Zu=ll*60,mh=Zu*24,cU=mh*7,m8=mh*30,_P=mh*365,Qu=bs(r=>{r.setTime(r-r.getMilliseconds())},(r,e)=>{r.setTime(+r+e*Yu)},(r,e)=>(e-r)/Yu,r=>r.getUTCSeconds());Qu.range;const LM=bs(r=>{r.setTime(r-r.getMilliseconds()-r.getSeconds()*Yu)},(r,e)=>{r.setTime(+r+e*ll)},(r,e)=>(e-r)/ll,r=>r.getMinutes());LM.range;const FM=bs(r=>{r.setUTCSeconds(0,0)},(r,e)=>{r.setTime(+r+e*ll)},(r,e)=>(e-r)/ll,r=>r.getUTCMinutes());FM.range;const BM=bs(r=>{r.setTime(r-r.getMilliseconds()-r.getSeconds()*Yu-r.getMinutes()*ll)},(r,e)=>{r.setTime(+r+e*Zu)},(r,e)=>(e-r)/Zu,r=>r.getHours());BM.range;const jM=bs(r=>{r.setUTCMinutes(0,0,0)},(r,e)=>{r.setTime(+r+e*Zu)},(r,e)=>(e-r)/Zu,r=>r.getUTCHours());jM.range;const u0=bs(r=>r.setHours(0,0,0,0),(r,e)=>r.setDate(r.getDate()+e),(r,e)=>(e-r-(e.getTimezoneOffset()-r.getTimezoneOffset())*ll)/mh,r=>r.getDate()-1);u0.range;const P_=bs(r=>{r.setUTCHours(0,0,0,0)},(r,e)=>{r.setUTCDate(r.getUTCDate()+e)},(r,e)=>(e-r)/mh,r=>r.getUTCDate()-1);P_.range;const Mte=bs(r=>{r.setUTCHours(0,0,0,0)},(r,e)=>{r.setUTCDate(r.getUTCDate()+e)},(r,e)=>(e-r)/mh,r=>Math.floor(r/mh));Mte.range;function Up(r){return bs(e=>{e.setDate(e.getDate()-(e.getDay()+7-r)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*ll)/cU)}const R_=Up(0),YT=Up(1),cTe=Up(2),uTe=Up(3),by=Up(4),hTe=Up(5),dTe=Up(6);R_.range;YT.range;cTe.range;uTe.range;by.range;hTe.range;dTe.range;function zp(r){return bs(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-r)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/cU)}const O_=zp(0),ZT=zp(1),fTe=zp(2),pTe=zp(3),_y=zp(4),mTe=zp(5),gTe=zp(6);O_.range;ZT.range;fTe.range;pTe.range;_y.range;mTe.range;gTe.range;const UM=bs(r=>{r.setDate(1),r.setHours(0,0,0,0)},(r,e)=>{r.setMonth(r.getMonth()+e)},(r,e)=>e.getMonth()-r.getMonth()+(e.getFullYear()-r.getFullYear())*12,r=>r.getMonth());UM.range;const zM=bs(r=>{r.setUTCDate(1),r.setUTCHours(0,0,0,0)},(r,e)=>{r.setUTCMonth(r.getUTCMonth()+e)},(r,e)=>e.getUTCMonth()-r.getUTCMonth()+(e.getUTCFullYear()-r.getUTCFullYear())*12,r=>r.getUTCMonth());zM.range;const qc=bs(r=>{r.setMonth(0,1),r.setHours(0,0,0,0)},(r,e)=>{r.setFullYear(r.getFullYear()+e)},(r,e)=>e.getFullYear()-r.getFullYear(),r=>r.getFullYear());qc.every=r=>!isFinite(r=Math.floor(r))||!(r>0)?null:bs(e=>{e.setFullYear(Math.floor(e.getFullYear()/r)*r),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*r)});qc.range;const Xc=bs(r=>{r.setUTCMonth(0,1),r.setUTCHours(0,0,0,0)},(r,e)=>{r.setUTCFullYear(r.getUTCFullYear()+e)},(r,e)=>e.getUTCFullYear()-r.getUTCFullYear(),r=>r.getUTCFullYear());Xc.every=r=>!isFinite(r=Math.floor(r))||!(r>0)?null:bs(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/r)*r),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*r)});Xc.range;function Ate(r,e,n,i,s,a){const o=[[Qu,1,Yu],[Qu,5,5*Yu],[Qu,15,15*Yu],[Qu,30,30*Yu],[a,1,ll],[a,5,5*ll],[a,15,15*ll],[a,30,30*ll],[s,1,Zu],[s,3,3*Zu],[s,6,6*Zu],[s,12,12*Zu],[i,1,mh],[i,2,2*mh],[n,1,cU],[e,1,m8],[e,3,3*m8],[r,1,_P]];function l(u,h,d){const f=h<u;f&&([u,h]=[h,u]);const p=d&&typeof d.range=="function"?d:c(u,h,d),g=p?p.range(u,+h+1):[];return f?g.reverse():g}function c(u,h,d){const f=Math.abs(h-u)/d,p=Zj(([,,x])=>x).right(o,f);if(p===o.length)return r.every(p3(u/_P,h/_P,d));if(p===0)return KT.every(Math.max(p3(u,h,d),1));const[g,v]=o[f/o[p-1][2]<o[p][2]/f?p-1:p];return g.every(v)}return[l,c]}const[yTe,vTe]=Ate(Xc,zM,O_,Mte,jM,FM),[xTe,bTe]=Ate(qc,UM,R_,u0,BM,LM);function wP(r){if(0<=r.y&&r.y<100){var e=new Date(-1,r.m,r.d,r.H,r.M,r.S,r.L);return e.setFullYear(r.y),e}return new Date(r.y,r.m,r.d,r.H,r.M,r.S,r.L)}function SP(r){if(0<=r.y&&r.y<100){var e=new Date(Date.UTC(-1,r.m,r.d,r.H,r.M,r.S,r.L));return e.setUTCFullYear(r.y),e}return new Date(Date.UTC(r.y,r.m,r.d,r.H,r.M,r.S,r.L))}function gv(r,e,n){return{y:r,m:e,d:n,H:0,M:0,S:0,L:0}}function _Te(r){var e=r.dateTime,n=r.date,i=r.time,s=r.periods,a=r.days,o=r.shortDays,l=r.months,c=r.shortMonths,u=yv(s),h=vv(s),d=yv(a),f=vv(a),p=yv(o),g=vv(o),v=yv(l),x=vv(l),_=yv(c),E=vv(c),S={a:$,A:z,b:Z,B:se,c:null,d:_8,e:_8,f:VTe,g:eEe,G:nEe,H:zTe,I:$Te,j:GTe,L:Cte,m:HTe,M:WTe,p:q,q:ue,Q:T8,s:E8,S:qTe,u:XTe,U:KTe,V:YTe,w:ZTe,W:QTe,x:null,X:null,y:JTe,Y:tEe,Z:rEe,"%":S8},T={a:be,A:ee,b:le,B:oe,c:null,d:w8,e:w8,f:oEe,g:yEe,G:xEe,H:iEe,I:sEe,j:aEe,L:Pte,m:lEe,M:cEe,p:fe,q:Se,Q:T8,s:E8,S:uEe,u:hEe,U:dEe,V:fEe,w:pEe,W:mEe,x:null,X:null,y:gEe,Y:vEe,Z:bEe,"%":S8},M={a:O,A:D,b:F,B:U,c:B,d:x8,e:x8,f:FTe,g:v8,G:y8,H:b8,I:b8,j:kTe,L:LTe,m:OTe,M:ITe,p:R,q:RTe,Q:jTe,s:UTe,S:DTe,u:MTe,U:ATe,V:CTe,w:ETe,W:NTe,x:W,X:j,y:v8,Y:y8,Z:PTe,"%":BTe};S.x=C(n,S),S.X=C(i,S),S.c=C(e,S),T.x=C(n,T),T.X=C(i,T),T.c=C(e,T);function C(we,Le){return function(et){var Fe=[],Tt=-1,me=0,En=we.length,Wt,Jt,zt;for(et instanceof Date||(et=new Date(+et));++Tt<En;)we.charCodeAt(Tt)===37&&(Fe.push(we.slice(me,Tt)),(Jt=g8[Wt=we.charAt(++Tt)])!=null?Wt=we.charAt(++Tt):Jt=Wt==="e"?" ":"0",(zt=Le[Wt])&&(Wt=zt(et,Jt)),Fe.push(Wt),me=Tt+1);return Fe.push(we.slice(me,Tt)),Fe.join("")}}function A(we,Le){return function(et){var Fe=gv(1900,void 0,1),Tt=P(Fe,we,et+="",0),me,En;if(Tt!=et.length)return null;if("Q"in Fe)return new Date(Fe.Q);if("s"in Fe)return new Date(Fe.s*1e3+("L"in Fe?Fe.L:0));if(Le&&!("Z"in Fe)&&(Fe.Z=0),"p"in Fe&&(Fe.H=Fe.H%12+Fe.p*12),Fe.m===void 0&&(Fe.m="q"in Fe?Fe.q:0),"V"in Fe){if(Fe.V<1||Fe.V>53)return null;"w"in Fe||(Fe.w=1),"Z"in Fe?(me=SP(gv(Fe.y,0,1)),En=me.getUTCDay(),me=En>4||En===0?ZT.ceil(me):ZT(me),me=P_.offset(me,(Fe.V-1)*7),Fe.y=me.getUTCFullYear(),Fe.m=me.getUTCMonth(),Fe.d=me.getUTCDate()+(Fe.w+6)%7):(me=wP(gv(Fe.y,0,1)),En=me.getDay(),me=En>4||En===0?YT.ceil(me):YT(me),me=u0.offset(me,(Fe.V-1)*7),Fe.y=me.getFullYear(),Fe.m=me.getMonth(),Fe.d=me.getDate()+(Fe.w+6)%7)}else("W"in Fe||"U"in Fe)&&("w"in Fe||(Fe.w="u"in Fe?Fe.u%7:"W"in Fe?1:0),En="Z"in Fe?SP(gv(Fe.y,0,1)).getUTCDay():wP(gv(Fe.y,0,1)).getDay(),Fe.m=0,Fe.d="W"in Fe?(Fe.w+6)%7+Fe.W*7-(En+5)%7:Fe.w+Fe.U*7-(En+6)%7);return"Z"in Fe?(Fe.H+=Fe.Z/100|0,Fe.M+=Fe.Z%100,SP(Fe)):wP(Fe)}}function P(we,Le,et,Fe){for(var Tt=0,me=Le.length,En=et.length,Wt,Jt;Tt<me;){if(Fe>=En)return-1;if(Wt=Le.charCodeAt(Tt++),Wt===37){if(Wt=Le.charAt(Tt++),Jt=M[Wt in g8?Le.charAt(Tt++):Wt],!Jt||(Fe=Jt(we,et,Fe))<0)return-1}else if(Wt!=et.charCodeAt(Fe++))return-1}return Fe}function R(we,Le,et){var Fe=u.exec(Le.slice(et));return Fe?(we.p=h.get(Fe[0].toLowerCase()),et+Fe[0].length):-1}function O(we,Le,et){var Fe=p.exec(Le.slice(et));return Fe?(we.w=g.get(Fe[0].toLowerCase()),et+Fe[0].length):-1}function D(we,Le,et){var Fe=d.exec(Le.slice(et));return Fe?(we.w=f.get(Fe[0].toLowerCase()),et+Fe[0].length):-1}function F(we,Le,et){var Fe=_.exec(Le.slice(et));return Fe?(we.m=E.get(Fe[0].toLowerCase()),et+Fe[0].length):-1}function U(we,Le,et){var Fe=v.exec(Le.slice(et));return Fe?(we.m=x.get(Fe[0].toLowerCase()),et+Fe[0].length):-1}function B(we,Le,et){return P(we,e,Le,et)}function W(we,Le,et){return P(we,n,Le,et)}function j(we,Le,et){return P(we,i,Le,et)}function $(we){return o[we.getDay()]}function z(we){return a[we.getDay()]}function Z(we){return c[we.getMonth()]}function se(we){return l[we.getMonth()]}function q(we){return s[+(we.getHours()>=12)]}function ue(we){return 1+~~(we.getMonth()/3)}function be(we){return o[we.getUTCDay()]}function ee(we){return a[we.getUTCDay()]}function le(we){return c[we.getUTCMonth()]}function oe(we){return l[we.getUTCMonth()]}function fe(we){return s[+(we.getUTCHours()>=12)]}function Se(we){return 1+~~(we.getUTCMonth()/3)}return{format:function(we){var Le=C(we+="",S);return Le.toString=function(){return we},Le},parse:function(we){var Le=A(we+="",!1);return Le.toString=function(){return we},Le},utcFormat:function(we){var Le=C(we+="",T);return Le.toString=function(){return we},Le},utcParse:function(we){var Le=A(we+="",!0);return Le.toString=function(){return we},Le}}}var g8={"-":"",_:" ",0:"0"},Ds=/^\s*\d+/,wTe=/^%/,STe=/[\\^$*+?|[\]().{}]/g;function Er(r,e,n){var i=r<0?"-":"",s=(i?-r:r)+"",a=s.length;return i+(a<n?new Array(n-a+1).join(e)+s:s)}function TTe(r){return r.replace(STe,"\\$&")}function yv(r){return new RegExp("^(?:"+r.map(TTe).join("|")+")","i")}function vv(r){return new Map(r.map((e,n)=>[e.toLowerCase(),n]))}function ETe(r,e,n){var i=Ds.exec(e.slice(n,n+1));return i?(r.w=+i[0],n+i[0].length):-1}function MTe(r,e,n){var i=Ds.exec(e.slice(n,n+1));return i?(r.u=+i[0],n+i[0].length):-1}function ATe(r,e,n){var i=Ds.exec(e.slice(n,n+2));return i?(r.U=+i[0],n+i[0].length):-1}function CTe(r,e,n){var i=Ds.exec(e.slice(n,n+2));return i?(r.V=+i[0],n+i[0].length):-1}function NTe(r,e,n){var i=Ds.exec(e.slice(n,n+2));return i?(r.W=+i[0],n+i[0].length):-1}function y8(r,e,n){var i=Ds.exec(e.slice(n,n+4));return i?(r.y=+i[0],n+i[0].length):-1}function v8(r,e,n){var i=Ds.exec(e.slice(n,n+2));return i?(r.y=+i[0]+(+i[0]>68?1900:2e3),n+i[0].length):-1}function PTe(r,e,n){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return i?(r.Z=i[1]?0:-(i[2]+(i[3]||"00")),n+i[0].length):-1}function RTe(r,e,n){var i=Ds.exec(e.slice(n,n+1));return i?(r.q=i[0]*3-3,n+i[0].length):-1}function OTe(r,e,n){var i=Ds.exec(e.slice(n,n+2));return i?(r.m=i[0]-1,n+i[0].length):-1}function x8(r,e,n){var i=Ds.exec(e.slice(n,n+2));return i?(r.d=+i[0],n+i[0].length):-1}function kTe(r,e,n){var i=Ds.exec(e.slice(n,n+3));return i?(r.m=0,r.d=+i[0],n+i[0].length):-1}function b8(r,e,n){var i=Ds.exec(e.slice(n,n+2));return i?(r.H=+i[0],n+i[0].length):-1}function ITe(r,e,n){var i=Ds.exec(e.slice(n,n+2));return i?(r.M=+i[0],n+i[0].length):-1}function DTe(r,e,n){var i=Ds.exec(e.slice(n,n+2));return i?(r.S=+i[0],n+i[0].length):-1}function LTe(r,e,n){var i=Ds.exec(e.slice(n,n+3));return i?(r.L=+i[0],n+i[0].length):-1}function FTe(r,e,n){var i=Ds.exec(e.slice(n,n+6));return i?(r.L=Math.floor(i[0]/1e3),n+i[0].length):-1}function BTe(r,e,n){var i=wTe.exec(e.slice(n,n+1));return i?n+i[0].length:-1}function jTe(r,e,n){var i=Ds.exec(e.slice(n));return i?(r.Q=+i[0],n+i[0].length):-1}function UTe(r,e,n){var i=Ds.exec(e.slice(n));return i?(r.s=+i[0],n+i[0].length):-1}function _8(r,e){return Er(r.getDate(),e,2)}function zTe(r,e){return Er(r.getHours(),e,2)}function $Te(r,e){return Er(r.getHours()%12||12,e,2)}function GTe(r,e){return Er(1+u0.count(qc(r),r),e,3)}function Cte(r,e){return Er(r.getMilliseconds(),e,3)}function VTe(r,e){return Cte(r,e)+"000"}function HTe(r,e){return Er(r.getMonth()+1,e,2)}function WTe(r,e){return Er(r.getMinutes(),e,2)}function qTe(r,e){return Er(r.getSeconds(),e,2)}function XTe(r){var e=r.getDay();return e===0?7:e}function KTe(r,e){return Er(R_.count(qc(r)-1,r),e,2)}function Nte(r){var e=r.getDay();return e>=4||e===0?by(r):by.ceil(r)}function YTe(r,e){return r=Nte(r),Er(by.count(qc(r),r)+(qc(r).getDay()===4),e,2)}function ZTe(r){return r.getDay()}function QTe(r,e){return Er(YT.count(qc(r)-1,r),e,2)}function JTe(r,e){return Er(r.getFullYear()%100,e,2)}function eEe(r,e){return r=Nte(r),Er(r.getFullYear()%100,e,2)}function tEe(r,e){return Er(r.getFullYear()%1e4,e,4)}function nEe(r,e){var n=r.getDay();return r=n>=4||n===0?by(r):by.ceil(r),Er(r.getFullYear()%1e4,e,4)}function rEe(r){var e=r.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Er(e/60|0,"0",2)+Er(e%60,"0",2)}function w8(r,e){return Er(r.getUTCDate(),e,2)}function iEe(r,e){return Er(r.getUTCHours(),e,2)}function sEe(r,e){return Er(r.getUTCHours()%12||12,e,2)}function aEe(r,e){return Er(1+P_.count(Xc(r),r),e,3)}function Pte(r,e){return Er(r.getUTCMilliseconds(),e,3)}function oEe(r,e){return Pte(r,e)+"000"}function lEe(r,e){return Er(r.getUTCMonth()+1,e,2)}function cEe(r,e){return Er(r.getUTCMinutes(),e,2)}function uEe(r,e){return Er(r.getUTCSeconds(),e,2)}function hEe(r){var e=r.getUTCDay();return e===0?7:e}function dEe(r,e){return Er(O_.count(Xc(r)-1,r),e,2)}function Rte(r){var e=r.getUTCDay();return e>=4||e===0?_y(r):_y.ceil(r)}function fEe(r,e){return r=Rte(r),Er(_y.count(Xc(r),r)+(Xc(r).getUTCDay()===4),e,2)}function pEe(r){return r.getUTCDay()}function mEe(r,e){return Er(ZT.count(Xc(r)-1,r),e,2)}function gEe(r,e){return Er(r.getUTCFullYear()%100,e,2)}function yEe(r,e){return r=Rte(r),Er(r.getUTCFullYear()%100,e,2)}function vEe(r,e){return Er(r.getUTCFullYear()%1e4,e,4)}function xEe(r,e){var n=r.getUTCDay();return r=n>=4||n===0?_y(r):_y.ceil(r),Er(r.getUTCFullYear()%1e4,e,4)}function bEe(){return"+0000"}function S8(){return"%"}function T8(r){return+r}function E8(r){return Math.floor(+r/1e3)}var Ym,Ote,kte;_Ee({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function _Ee(r){return Ym=_Te(r),Ote=Ym.format,Ym.parse,kte=Ym.utcFormat,Ym.utcParse,Ym}function wEe(r){return new Date(r)}function SEe(r){return r instanceof Date?+r:+new Date(+r)}function uU(r,e,n,i,s,a,o,l,c,u){var h=nU(),d=h.invert,f=h.domain,p=u(".%L"),g=u(":%S"),v=u("%I:%M"),x=u("%I %p"),_=u("%a %d"),E=u("%b %d"),S=u("%B"),T=u("%Y");function M(C){return(c(C)<C?p:l(C)<C?g:o(C)<C?v:a(C)<C?x:i(C)<C?s(C)<C?_:E:n(C)<C?S:T)(C)}return h.invert=function(C){return new Date(d(C))},h.domain=function(C){return arguments.length?f(Array.from(C,SEe)):f().map(wEe)},h.ticks=function(C){var A=f();return r(A[0],A[A.length-1],C??10)},h.tickFormat=function(C,A){return A==null?M:u(A)},h.nice=function(C){var A=f();return(!C||typeof C.range!="function")&&(C=e(A[0],A[A.length-1],C??10)),C?f(xte(A,C)):h},h.copy=function(){return N_(h,uU(r,e,n,i,s,a,o,l,c,u))},h}function TEe(){return bl.apply(uU(xTe,bTe,qc,UM,R_,u0,BM,LM,Qu,Ote).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function EEe(){return bl.apply(uU(yTe,vTe,Xc,zM,O_,P_,jM,FM,Qu,kte).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function $M(){var r=0,e=1,n,i,s,a,o=Na,l=!1,c;function u(d){return d==null||isNaN(d=+d)?c:o(s===0?.5:(d=(a(d)-n)*s,l?Math.max(0,Math.min(1,d)):d))}u.domain=function(d){return arguments.length?([r,e]=d,n=a(r=+r),i=a(e=+e),s=n===i?0:1/(i-n),u):[r,e]},u.clamp=function(d){return arguments.length?(l=!!d,u):l},u.interpolator=function(d){return arguments.length?(o=d,u):o};function h(d){return function(f){var p,g;return arguments.length?([p,g]=f,o=d(p,g),u):[o(0),o(1)]}}return u.range=h(c0),u.rangeRound=h(IM),u.unknown=function(d){return arguments.length?(c=d,u):c},function(d){return a=d,n=d(r),i=d(e),s=n===i?0:1/(i-n),u}}function Xd(r,e){return e.domain(r.domain()).interpolator(r.interpolator()).clamp(r.clamp()).unknown(r.unknown())}function Ite(){var r=qd($M()(Na));return r.copy=function(){return Xd(r,Ite())},Eh.apply(r,arguments)}function Dte(){var r=sU($M()).domain([1,10]);return r.copy=function(){return Xd(r,Dte()).base(r.base())},Eh.apply(r,arguments)}function Lte(){var r=aU($M());return r.copy=function(){return Xd(r,Lte()).constant(r.constant())},Eh.apply(r,arguments)}function hU(){var r=oU($M());return r.copy=function(){return Xd(r,hU()).exponent(r.exponent())},Eh.apply(r,arguments)}function MEe(){return hU.apply(null,arguments).exponent(.5)}function Fte(){var r=[],e=Na;function n(i){if(i!=null&&!isNaN(i=+i))return e((M_(r,i,1)-1)/(r.length-1))}return n.domain=function(i){if(!arguments.length)return r.slice();r=[];for(let s of i)s!=null&&!isNaN(s=+s)&&r.push(s);return r.sort(Pd),n},n.interpolator=function(i){return arguments.length?(e=i,n):e},n.range=function(){return r.map((i,s)=>e(s/(r.length-1)))},n.quantiles=function(i){return Array.from({length:i+1},(s,a)=>L1e(r,a/i))},n.copy=function(){return Fte(e).domain(r)},Eh.apply(n,arguments)}function GM(){var r=0,e=.5,n=1,i=1,s,a,o,l,c,u=Na,h,d=!1,f;function p(v){return isNaN(v=+v)?f:(v=.5+((v=+h(v))-a)*(i*v<i*a?l:c),u(d?Math.max(0,Math.min(1,v)):v))}p.domain=function(v){return arguments.length?([r,e,n]=v,s=h(r=+r),a=h(e=+e),o=h(n=+n),l=s===a?0:.5/(a-s),c=a===o?0:.5/(o-a),i=a<s?-1:1,p):[r,e,n]},p.clamp=function(v){return arguments.length?(d=!!v,p):d},p.interpolator=function(v){return arguments.length?(u=v,p):u};function g(v){return function(x){var _,E,S;return arguments.length?([_,E,S]=x,u=BSe(v,[_,E,S]),p):[u(0),u(.5),u(1)]}}return p.range=g(c0),p.rangeRound=g(IM),p.unknown=function(v){return arguments.length?(f=v,p):f},function(v){return h=v,s=v(r),a=v(e),o=v(n),l=s===a?0:.5/(a-s),c=a===o?0:.5/(o-a),i=a<s?-1:1,p}}function Bte(){var r=qd(GM()(Na));return r.copy=function(){return Xd(r,Bte())},Eh.apply(r,arguments)}function jte(){var r=sU(GM()).domain([.1,1,10]);return r.copy=function(){return Xd(r,jte()).base(r.base())},Eh.apply(r,arguments)}function Ute(){var r=aU(GM());return r.copy=function(){return Xd(r,Ute()).constant(r.constant())},Eh.apply(r,arguments)}function dU(){var r=oU(GM());return r.copy=function(){return Xd(r,dU()).exponent(r.exponent())},Eh.apply(r,arguments)}function AEe(){return dU.apply(null,arguments).exponent(.5)}function CEe(r){for(var e=r.length/6|0,n=new Array(e),i=0;i<e;)n[i]="#"+r.slice(i*6,++i*6);return n}const zte=CEe("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928");function QT(r){"@babel/helpers - typeof";return QT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},QT(r)}var NEe=/^\s+/,PEe=/\s+$/;function cn(r,e){if(r=r||"",e=e||{},r instanceof cn)return r;if(!(this instanceof cn))return new cn(r,e);var n=REe(r);this._originalInput=r,this._r=n.r,this._g=n.g,this._b=n.b,this._a=n.a,this._roundA=Math.round(100*this._a)/100,this._format=e.format||n.format,this._gradientType=e.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=n.ok}cn.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(e.r*299+e.g*587+e.b*114)/1e3},getLuminance:function(){var e=this.toRgb(),n,i,s,a,o,l;return n=e.r/255,i=e.g/255,s=e.b/255,n<=.03928?a=n/12.92:a=Math.pow((n+.055)/1.055,2.4),i<=.03928?o=i/12.92:o=Math.pow((i+.055)/1.055,2.4),s<=.03928?l=s/12.92:l=Math.pow((s+.055)/1.055,2.4),.2126*a+.7152*o+.0722*l},setAlpha:function(e){return this._a=$te(e),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var e=A8(this._r,this._g,this._b);return{h:e.h*360,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=A8(this._r,this._g,this._b),n=Math.round(e.h*360),i=Math.round(e.s*100),s=Math.round(e.v*100);return this._a==1?"hsv("+n+", "+i+"%, "+s+"%)":"hsva("+n+", "+i+"%, "+s+"%, "+this._roundA+")"},toHsl:function(){var e=M8(this._r,this._g,this._b);return{h:e.h*360,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=M8(this._r,this._g,this._b),n=Math.round(e.h*360),i=Math.round(e.s*100),s=Math.round(e.l*100);return this._a==1?"hsl("+n+", "+i+"%, "+s+"%)":"hsla("+n+", "+i+"%, "+s+"%, "+this._roundA+")"},toHex:function(e){return C8(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return DEe(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(pi(this._r,255)*100)+"%",g:Math.round(pi(this._g,255)*100)+"%",b:Math.round(pi(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(pi(this._r,255)*100)+"%, "+Math.round(pi(this._g,255)*100)+"%, "+Math.round(pi(this._b,255)*100)+"%)":"rgba("+Math.round(pi(this._r,255)*100)+"%, "+Math.round(pi(this._g,255)*100)+"%, "+Math.round(pi(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:qEe[C8(this._r,this._g,this._b,!0)]||!1},toFilter:function(e){var n="#"+N8(this._r,this._g,this._b,this._a),i=n,s=this._gradientType?"GradientType = 1, ":"";if(e){var a=cn(e);i="#"+N8(a._r,a._g,a._b,a._a)}return"progid:DXImageTransform.Microsoft.gradient("+s+"startColorstr="+n+",endColorstr="+i+")"},toString:function(e){var n=!!e;e=e||this._format;var i=!1,s=this._a<1&&this._a>=0,a=!n&&s&&(e==="hex"||e==="hex6"||e==="hex3"||e==="hex4"||e==="hex8"||e==="name");return a?e==="name"&&this._a===0?this.toName():this.toRgbString():(e==="rgb"&&(i=this.toRgbString()),e==="prgb"&&(i=this.toPercentageRgbString()),(e==="hex"||e==="hex6")&&(i=this.toHexString()),e==="hex3"&&(i=this.toHexString(!0)),e==="hex4"&&(i=this.toHex8String(!0)),e==="hex8"&&(i=this.toHex8String()),e==="name"&&(i=this.toName()),e==="hsl"&&(i=this.toHslString()),e==="hsv"&&(i=this.toHsvString()),i||this.toHexString())},clone:function(){return cn(this.toString())},_applyModification:function(e,n){var i=e.apply(null,[this].concat([].slice.call(n)));return this._r=i._r,this._g=i._g,this._b=i._b,this.setAlpha(i._a),this},lighten:function(){return this._applyModification(jEe,arguments)},brighten:function(){return this._applyModification(UEe,arguments)},darken:function(){return this._applyModification(zEe,arguments)},desaturate:function(){return this._applyModification(LEe,arguments)},saturate:function(){return this._applyModification(FEe,arguments)},greyscale:function(){return this._applyModification(BEe,arguments)},spin:function(){return this._applyModification($Ee,arguments)},_applyCombination:function(e,n){return e.apply(null,[this].concat([].slice.call(n)))},analogous:function(){return this._applyCombination(HEe,arguments)},complement:function(){return this._applyCombination(GEe,arguments)},monochromatic:function(){return this._applyCombination(WEe,arguments)},splitcomplement:function(){return this._applyCombination(VEe,arguments)},triad:function(){return this._applyCombination(P8,[3])},tetrad:function(){return this._applyCombination(P8,[4])}};cn.fromRatio=function(r,e){if(QT(r)=="object"){var n={};for(var i in r)r.hasOwnProperty(i)&&(i==="a"?n[i]=r[i]:n[i]=Jv(r[i]));r=n}return cn(r,e)};function REe(r){var e={r:0,g:0,b:0},n=1,i=null,s=null,a=null,o=!1,l=!1;return typeof r=="string"&&(r=ZEe(r)),QT(r)=="object"&&(Ru(r.r)&&Ru(r.g)&&Ru(r.b)?(e=OEe(r.r,r.g,r.b),o=!0,l=String(r.r).substr(-1)==="%"?"prgb":"rgb"):Ru(r.h)&&Ru(r.s)&&Ru(r.v)?(i=Jv(r.s),s=Jv(r.v),e=IEe(r.h,i,s),o=!0,l="hsv"):Ru(r.h)&&Ru(r.s)&&Ru(r.l)&&(i=Jv(r.s),a=Jv(r.l),e=kEe(r.h,i,a),o=!0,l="hsl"),r.hasOwnProperty("a")&&(n=r.a)),n=$te(n),{ok:o,format:r.format||l,r:Math.min(255,Math.max(e.r,0)),g:Math.min(255,Math.max(e.g,0)),b:Math.min(255,Math.max(e.b,0)),a:n}}function OEe(r,e,n){return{r:pi(r,255)*255,g:pi(e,255)*255,b:pi(n,255)*255}}function M8(r,e,n){r=pi(r,255),e=pi(e,255),n=pi(n,255);var i=Math.max(r,e,n),s=Math.min(r,e,n),a,o,l=(i+s)/2;if(i==s)a=o=0;else{var c=i-s;switch(o=l>.5?c/(2-i-s):c/(i+s),i){case r:a=(e-n)/c+(e<n?6:0);break;case e:a=(n-r)/c+2;break;case n:a=(r-e)/c+4;break}a/=6}return{h:a,s:o,l}}function kEe(r,e,n){var i,s,a;r=pi(r,360),e=pi(e,100),n=pi(n,100);function o(u,h,d){return d<0&&(d+=1),d>1&&(d-=1),d<1/6?u+(h-u)*6*d:d<1/2?h:d<2/3?u+(h-u)*(2/3-d)*6:u}if(e===0)i=s=a=n;else{var l=n<.5?n*(1+e):n+e-n*e,c=2*n-l;i=o(c,l,r+1/3),s=o(c,l,r),a=o(c,l,r-1/3)}return{r:i*255,g:s*255,b:a*255}}function A8(r,e,n){r=pi(r,255),e=pi(e,255),n=pi(n,255);var i=Math.max(r,e,n),s=Math.min(r,e,n),a,o,l=i,c=i-s;if(o=i===0?0:c/i,i==s)a=0;else{switch(i){case r:a=(e-n)/c+(e<n?6:0);break;case e:a=(n-r)/c+2;break;case n:a=(r-e)/c+4;break}a/=6}return{h:a,s:o,v:l}}function IEe(r,e,n){r=pi(r,360)*6,e=pi(e,100),n=pi(n,100);var i=Math.floor(r),s=r-i,a=n*(1-e),o=n*(1-s*e),l=n*(1-(1-s)*e),c=i%6,u=[n,o,a,a,l,n][c],h=[l,n,n,o,a,a][c],d=[a,a,l,n,n,o][c];return{r:u*255,g:h*255,b:d*255}}function C8(r,e,n,i){var s=[nc(Math.round(r).toString(16)),nc(Math.round(e).toString(16)),nc(Math.round(n).toString(16))];return i&&s[0].charAt(0)==s[0].charAt(1)&&s[1].charAt(0)==s[1].charAt(1)&&s[2].charAt(0)==s[2].charAt(1)?s[0].charAt(0)+s[1].charAt(0)+s[2].charAt(0):s.join("")}function DEe(r,e,n,i,s){var a=[nc(Math.round(r).toString(16)),nc(Math.round(e).toString(16)),nc(Math.round(n).toString(16)),nc(Gte(i))];return s&&a[0].charAt(0)==a[0].charAt(1)&&a[1].charAt(0)==a[1].charAt(1)&&a[2].charAt(0)==a[2].charAt(1)&&a[3].charAt(0)==a[3].charAt(1)?a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0)+a[3].charAt(0):a.join("")}function N8(r,e,n,i){var s=[nc(Gte(i)),nc(Math.round(r).toString(16)),nc(Math.round(e).toString(16)),nc(Math.round(n).toString(16))];return s.join("")}cn.equals=function(r,e){return!r||!e?!1:cn(r).toRgbString()==cn(e).toRgbString()};cn.random=function(){return cn.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})};function LEe(r,e){e=e===0?0:e||10;var n=cn(r).toHsl();return n.s-=e/100,n.s=VM(n.s),cn(n)}function FEe(r,e){e=e===0?0:e||10;var n=cn(r).toHsl();return n.s+=e/100,n.s=VM(n.s),cn(n)}function BEe(r){return cn(r).desaturate(100)}function jEe(r,e){e=e===0?0:e||10;var n=cn(r).toHsl();return n.l+=e/100,n.l=VM(n.l),cn(n)}function UEe(r,e){e=e===0?0:e||10;var n=cn(r).toRgb();return n.r=Math.max(0,Math.min(255,n.r-Math.round(255*-(e/100)))),n.g=Math.max(0,Math.min(255,n.g-Math.round(255*-(e/100)))),n.b=Math.max(0,Math.min(255,n.b-Math.round(255*-(e/100)))),cn(n)}function zEe(r,e){e=e===0?0:e||10;var n=cn(r).toHsl();return n.l-=e/100,n.l=VM(n.l),cn(n)}function $Ee(r,e){var n=cn(r).toHsl(),i=(n.h+e)%360;return n.h=i<0?360+i:i,cn(n)}function GEe(r){var e=cn(r).toHsl();return e.h=(e.h+180)%360,cn(e)}function P8(r,e){if(isNaN(e)||e<=0)throw new Error("Argument to polyad must be a positive number");for(var n=cn(r).toHsl(),i=[cn(r)],s=360/e,a=1;a<e;a++)i.push(cn({h:(n.h+a*s)%360,s:n.s,l:n.l}));return i}function VEe(r){var e=cn(r).toHsl(),n=e.h;return[cn(r),cn({h:(n+72)%360,s:e.s,l:e.l}),cn({h:(n+216)%360,s:e.s,l:e.l})]}function HEe(r,e,n){e=e||6,n=n||30;var i=cn(r).toHsl(),s=360/n,a=[cn(r)];for(i.h=(i.h-(s*e>>1)+720)%360;--e;)i.h=(i.h+s)%360,a.push(cn(i));return a}function WEe(r,e){e=e||6;for(var n=cn(r).toHsv(),i=n.h,s=n.s,a=n.v,o=[],l=1/e;e--;)o.push(cn({h:i,s,v:a})),a=(a+l)%1;return o}cn.mix=function(r,e,n){n=n===0?0:n||50;var i=cn(r).toRgb(),s=cn(e).toRgb(),a=n/100,o={r:(s.r-i.r)*a+i.r,g:(s.g-i.g)*a+i.g,b:(s.b-i.b)*a+i.b,a:(s.a-i.a)*a+i.a};return cn(o)};cn.readability=function(r,e){var n=cn(r),i=cn(e);return(Math.max(n.getLuminance(),i.getLuminance())+.05)/(Math.min(n.getLuminance(),i.getLuminance())+.05)};cn.isReadable=function(r,e,n){var i=cn.readability(r,e),s,a;switch(a=!1,s=QEe(n),s.level+s.size){case"AAsmall":case"AAAlarge":a=i>=4.5;break;case"AAlarge":a=i>=3;break;case"AAAsmall":a=i>=7;break}return a};cn.mostReadable=function(r,e,n){var i=null,s=0,a,o,l,c;n=n||{},o=n.includeFallbackColors,l=n.level,c=n.size;for(var u=0;u<e.length;u++)a=cn.readability(r,e[u]),a>s&&(s=a,i=cn(e[u]));return cn.isReadable(r,i,{level:l,size:c})||!o?i:(n.includeFallbackColors=!1,cn.mostReadable(r,["#fff","#000"],n))};var E3=cn.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},qEe=cn.hexNames=XEe(E3);function XEe(r){var e={};for(var n in r)r.hasOwnProperty(n)&&(e[r[n]]=n);return e}function $te(r){return r=parseFloat(r),(isNaN(r)||r<0||r>1)&&(r=1),r}function pi(r,e){KEe(r)&&(r="100%");var n=YEe(r);return r=Math.min(e,Math.max(0,parseFloat(r))),n&&(r=parseInt(r*e,10)/100),Math.abs(r-e)<1e-6?1:r%e/parseFloat(e)}function VM(r){return Math.min(1,Math.max(0,r))}function So(r){return parseInt(r,16)}function KEe(r){return typeof r=="string"&&r.indexOf(".")!=-1&&parseFloat(r)===1}function YEe(r){return typeof r=="string"&&r.indexOf("%")!=-1}function nc(r){return r.length==1?"0"+r:""+r}function Jv(r){return r<=1&&(r=r*100+"%"),r}function Gte(r){return Math.round(parseFloat(r)*255).toString(16)}function R8(r){return So(r)/255}var Gl=function(){var r="[-\\+]?\\d+%?",e="[-\\+]?\\d*\\.\\d+%?",n="(?:"+e+")|(?:"+r+")",i="[\\s|\\(]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")\\s*\\)?",s="[\\s|\\(]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")\\s*\\)?";return{CSS_UNIT:new RegExp(n),rgb:new RegExp("rgb"+i),rgba:new RegExp("rgba"+s),hsl:new RegExp("hsl"+i),hsla:new RegExp("hsla"+s),hsv:new RegExp("hsv"+i),hsva:new RegExp("hsva"+s),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function Ru(r){return!!Gl.CSS_UNIT.exec(r)}function ZEe(r){r=r.replace(NEe,"").replace(PEe,"").toLowerCase();var e=!1;if(E3[r])r=E3[r],e=!0;else if(r=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var n;return(n=Gl.rgb.exec(r))?{r:n[1],g:n[2],b:n[3]}:(n=Gl.rgba.exec(r))?{r:n[1],g:n[2],b:n[3],a:n[4]}:(n=Gl.hsl.exec(r))?{h:n[1],s:n[2],l:n[3]}:(n=Gl.hsla.exec(r))?{h:n[1],s:n[2],l:n[3],a:n[4]}:(n=Gl.hsv.exec(r))?{h:n[1],s:n[2],v:n[3]}:(n=Gl.hsva.exec(r))?{h:n[1],s:n[2],v:n[3],a:n[4]}:(n=Gl.hex8.exec(r))?{r:So(n[1]),g:So(n[2]),b:So(n[3]),a:R8(n[4]),format:e?"name":"hex8"}:(n=Gl.hex6.exec(r))?{r:So(n[1]),g:So(n[2]),b:So(n[3]),format:e?"name":"hex"}:(n=Gl.hex4.exec(r))?{r:So(n[1]+""+n[1]),g:So(n[2]+""+n[2]),b:So(n[3]+""+n[3]),a:R8(n[4]+""+n[4]),format:e?"name":"hex8"}:(n=Gl.hex3.exec(r))?{r:So(n[1]+""+n[1]),g:So(n[2]+""+n[2]),b:So(n[3]+""+n[3]),format:e?"name":"hex"}:!1}function QEe(r){var e,n;return r=r||{level:"AA",size:"small"},e=(r.level||"AA").toUpperCase(),n=(r.size||"small").toLowerCase(),e!=="AA"&&e!=="AAA"&&(e="AA"),n!=="small"&&n!=="large"&&(n="small"),{level:e,size:n}}function M3(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,i=Array(e);n<e;n++)i[n]=r[n];return i}function JEe(r){if(Array.isArray(r))return r}function eMe(r){if(Array.isArray(r))return M3(r)}function Vte(r,e,n){if(typeof r=="function"?r===e:r.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}function tMe(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function Hte(r,e,n){return e=wy(e),cMe(r,fU()?Reflect.construct(e,n||[],wy(r).constructor):e.apply(r,n))}function nMe(r,e){if(e.has(r))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Wte(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function TP(r,e){return r.get(Vte(r,e))}function O8(r,e,n){nMe(r,e),e.set(r,n)}function k8(r,e,n){return r.set(Vte(r,e),n),n}function qte(r,e,n){if(fU())return Reflect.construct.apply(null,arguments);var i=[null];i.push.apply(i,e);var s=new(r.bind.apply(r,i));return s}function rMe(r,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(r,Yte(i.key),i)}}function Xte(r,e,n){return e&&rMe(r.prototype,e),Object.defineProperty(r,"prototype",{writable:!1}),r}function HM(r,e,n){return(e=Yte(e))in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function A3(){return A3=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(r,e,n){var i=uMe(r,e);if(i){var s=Object.getOwnPropertyDescriptor(i,e);return s.get?s.get.call(arguments.length<3?r:n):s.value}},A3.apply(null,arguments)}function wy(r){return wy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},wy(r)}function Kte(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),e&&C3(r,e)}function fU(){try{var r=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(fU=function(){return!!r})()}function iMe(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function sMe(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var i,s,a,o,l=[],c=!0,u=!1;try{if(a=(n=n.call(r)).next,e!==0)for(;!(c=(i=a.call(n)).done)&&(l.push(i.value),l.length!==e);c=!0);}catch(h){u=!0,s=h}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function aMe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function oMe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function I8(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable})),n.push.apply(n,i)}return n}function lMe(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?I8(Object(n),!0).forEach(function(i){HM(r,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):I8(Object(n)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(n,i))})}return r}function cMe(r,e){if(e&&(typeof e=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return tMe(r)}function C3(r,e){return C3=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},C3(r,e)}function bx(r,e){return JEe(r)||sMe(r,e)||Zte(r,e)||aMe()}function uMe(r,e){for(;!{}.hasOwnProperty.call(r,e)&&(r=wy(r))!==null;);return r}function EP(r,e,n,i){var s=A3(wy(r.prototype),e,n);return typeof s=="function"?function(a){return s.apply(n,a)}:s}function ql(r){return eMe(r)||iMe(r)||Zte(r)||oMe()}function hMe(r,e){if(typeof r!="object"||!r)return r;var n=r[Symbol.toPrimitive];if(n!==void 0){var i=n.call(r,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function Yte(r){var e=hMe(r,"string");return typeof e=="symbol"?e:e+""}function N3(r){"@babel/helpers - typeof";return N3=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},N3(r)}function Zte(r,e){if(r){if(typeof r=="string")return M3(r,e);var n={}.toString.call(r).slice(8,-1);return n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set"?Array.from(r):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?M3(r,e):void 0}}var Qte=function(e){e instanceof Array?e.forEach(Qte):(e.map&&e.map.dispose(),e.dispose())},Jte=function(e){e.geometry&&e.geometry.dispose(),e.material&&Qte(e.material),e.texture&&e.texture.dispose(),e.children&&e.children.forEach(Jte)},P3=function(e){for(;e.children.length;){var n=e.children[0];e.remove(n),Jte(n)}},MP=new WeakMap,eS=new WeakMap,xv=function(r){function e(n){var i,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=s.dataBindAttr,o=a===void 0?"__data":a,l=s.objBindAttr,c=l===void 0?"__threeObj":l;return Wte(this,e),i=Hte(this,e),HM(i,"scene",void 0),O8(i,MP,void 0),O8(i,eS,void 0),i.scene=n,k8(MP,i,o),k8(eS,i,c),i.onRemoveObj(function(){}),i}return Kte(e,r),Xte(e,[{key:"onCreateObj",value:function(i){var s=this;return EP(e,"onCreateObj",this)([function(a){var o=i(a);return a[TP(eS,s)]=o,o[TP(MP,s)]=a,s.scene.add(o),o}]),this}},{key:"onRemoveObj",value:function(i){var s=this;return EP(e,"onRemoveObj",this)([function(a,o){var l=EP(e,"getData",s)([a]);i(a,o),s.scene.remove(a),P3(a),delete l[TP(eS,s)]}]),this}}])}(eSe),bv=function(e){return isNaN(e)?parseInt(cn(e).toHex(),16):e},AP=function(e){return isNaN(e)?cn(e).getAlpha():1},dMe=A_(zte);function D8(r,e,n){!e||typeof n!="string"||r.filter(function(i){return!i[n]}).forEach(function(i){i[n]=dMe(e(i))})}function fMe(r,e){var n=r.nodes,i=r.links,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=s.nodeFilter,o=a===void 0?function(){return!0}:a,l=s.onLoopError,c=l===void 0?function(p){throw"Invalid DAG structure! Found cycle in node path: ".concat(p.join(" -> "),".")}:l,u={};n.forEach(function(p){return u[e(p)]={data:p,out:[],depth:-1,skip:!o(p)}}),i.forEach(function(p){var g=p.source,v=p.target,x=T(g),_=T(v);if(!u.hasOwnProperty(x))throw"Missing source node with id: ".concat(x);if(!u.hasOwnProperty(_))throw"Missing target node with id: ".concat(_);var E=u[x],S=u[_];E.out.push(S);function T(M){return N3(M)==="object"?e(M):M}});var h=[];f(Object.values(u));var d=Object.assign.apply(Object,[{}].concat(ql(Object.entries(u).filter(function(p){var g=bx(p,2),v=g[1];return!v.skip}).map(function(p){var g=bx(p,2),v=g[0],x=g[1];return HM({},v,x.depth)}))));return d;function f(p){for(var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],v=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,x=function(){var T=p[_];if(g.indexOf(T)!==-1){var M=[].concat(ql(g.slice(g.indexOf(T))),[T]).map(function(C){return e(C.data)});return h.some(function(C){return C.length===M.length&&C.every(function(A,P){return A===M[P]})})||(h.push(M),c(M)),1}v>T.depth&&(T.depth=v,f(T.out,[].concat(ql(g),[T]),v+(T.skip?0:1)))},_=0,E=p.length;_<E;_++)x()}}var An=window.THREE?window.THREE:{Group:Tg,Mesh:li,MeshLambertMaterial:xee,Color:ln,BufferGeometry:Ws,BufferAttribute:ps,Matrix4:br,Vector3:pe,SphereGeometry:Ep,CylinderGeometry:w_,TubeGeometry:Uj,ConeGeometry:jj,Line:mee,LineBasicMaterial:__,QuadraticBezierCurve3:Bj,CubicBezierCurve3:yee,Box3:Bp},L8={graph:Dwe,forcelayout:qwe},pMe=2,CP=new An.BufferGeometry().setAttribute?"setAttribute":"addAttribute",tS=new An.BufferGeometry().applyMatrix4?"applyMatrix4":"applyMatrix",mMe=Hd({props:{jsonUrl:{onChange:function(e,n){var i=this;e&&!n.fetchingJson&&(n.fetchingJson=!0,n.onLoading(),fetch(e).then(function(s){return s.json()}).then(function(s){n.fetchingJson=!1,n.onFinishLoading(s),i.graphData(s)}))},triggerUpdate:!1},graphData:{default:{nodes:[],links:[]},onChange:function(e,n){n.engineRunning=!1}},numDimensions:{default:3,onChange:function(e,n){var i=n.d3ForceLayout.force("charge");i&&i.strength(e>2?-60:-30),e<3&&s(n.graphData.nodes,"z"),e<2&&s(n.graphData.nodes,"y");function s(a,o){a.forEach(function(l){delete l[o],delete l["v".concat(o)]})}}},dagMode:{onChange:function(e,n){!e&&n.forceEngine==="d3"&&(n.graphData.nodes||[]).forEach(function(i){return i.fx=i.fy=i.fz=void 0})}},dagLevelDistance:{},dagNodeFilter:{default:function(e){return!0}},onDagError:{triggerUpdate:!1},nodeRelSize:{default:4},nodeId:{default:"id"},nodeVal:{default:"val"},nodeResolution:{default:8},nodeColor:{default:"color"},nodeAutoColorBy:{},nodeOpacity:{default:.75},nodeVisibility:{default:!0},nodeThreeObject:{},nodeThreeObjectExtend:{default:!1},nodePositionUpdate:{triggerUpdate:!1},linkSource:{default:"source"},linkTarget:{default:"target"},linkVisibility:{default:!0},linkColor:{default:"color"},linkAutoColorBy:{},linkOpacity:{default:.2},linkWidth:{},linkResolution:{default:6},linkCurvature:{default:0,triggerUpdate:!1},linkCurveRotation:{default:0,triggerUpdate:!1},linkMaterial:{},linkThreeObject:{},linkThreeObjectExtend:{default:!1},linkPositionUpdate:{triggerUpdate:!1},linkDirectionalArrowLength:{default:0},linkDirectionalArrowColor:{},linkDirectionalArrowRelPos:{default:.5,triggerUpdate:!1},linkDirectionalArrowResolution:{default:8},linkDirectionalParticles:{default:0},linkDirectionalParticleSpeed:{default:.01,triggerUpdate:!1},linkDirectionalParticleWidth:{default:.5},linkDirectionalParticleColor:{},linkDirectionalParticleResolution:{default:4},forceEngine:{default:"d3"},d3AlphaMin:{default:0},d3AlphaDecay:{default:.0228,triggerUpdate:!1,onChange:function(e,n){n.d3ForceLayout.alphaDecay(e)}},d3AlphaTarget:{default:0,triggerUpdate:!1,onChange:function(e,n){n.d3ForceLayout.alphaTarget(e)}},d3VelocityDecay:{default:.4,triggerUpdate:!1,onChange:function(e,n){n.d3ForceLayout.velocityDecay(e)}},ngraphPhysics:{default:{timeStep:20,gravity:-1.2,theta:.8,springLength:30,springCoefficient:8e-4,dragCoefficient:.02}},warmupTicks:{default:0,triggerUpdate:!1},cooldownTicks:{default:1/0,triggerUpdate:!1},cooldownTime:{default:15e3,triggerUpdate:!1},onLoading:{default:function(){},triggerUpdate:!1},onFinishLoading:{default:function(){},triggerUpdate:!1},onUpdate:{default:function(){},triggerUpdate:!1},onFinishUpdate:{default:function(){},triggerUpdate:!1},onEngineTick:{default:function(){},triggerUpdate:!1},onEngineStop:{default:function(){},triggerUpdate:!1}},methods:{refresh:function(e){return e._flushObjects=!0,e._rerender(),this},d3Force:function(e,n,i){return i===void 0?e.d3ForceLayout.force(n):(e.d3ForceLayout.force(n,i),this)},d3ReheatSimulation:function(e){return e.d3ForceLayout.alpha(1),this.resetCountdown(),this},resetCountdown:function(e){return e.cntTicks=0,e.startTickTime=new Date,e.engineRunning=!0,this},tickFrame:function(e){var n=e.forceEngine!=="ngraph";return e.engineRunning&&i(),s(),a(),this;function i(){++e.cntTicks>e.cooldownTicks||new Date-e.startTickTime>e.cooldownTime||n&&e.d3AlphaMin>0&&e.d3ForceLayout.alpha()<e.d3AlphaMin?(e.engineRunning=!1,e.onEngineStop()):(e.layout[n?"tick":"step"](),e.onEngineTick());var o=Zt(e.nodeThreeObjectExtend);e.nodeDataMapper.entries().forEach(function(f){var p=bx(f,2),g=p[0],v=p[1];if(v){var x=n?g:e.layout.getNodePosition(g[e.nodeId]),_=o(g);(!e.nodePositionUpdate||!e.nodePositionUpdate(_?v.children[0]:v,{x:x.x,y:x.y,z:x.z},g)||_)&&(v.position.x=x.x,v.position.y=x.y||0,v.position.z=x.z||0)}});var l=Zt(e.linkWidth),c=Zt(e.linkCurvature),u=Zt(e.linkCurveRotation),h=Zt(e.linkThreeObjectExtend);e.linkDataMapper.entries().forEach(function(f){var p=bx(f,2),g=p[0],v=p[1];if(v){var x=n?g:e.layout.getLinkPosition(e.layout.graph.getLink(g.source,g.target).id),_=x[n?"source":"from"],E=x[n?"target":"to"];if(!(!_||!E||!_.hasOwnProperty("x")||!E.hasOwnProperty("x"))){d(g);var S=h(g);if(!(e.linkPositionUpdate&&e.linkPositionUpdate(S?v.children[1]:v,{start:{x:_.x,y:_.y,z:_.z},end:{x:E.x,y:E.y,z:E.z}},g)&&!S)){var T=30,M=g.__curve,C=v.children.length?v.children[0]:v;if(C.type==="Line"){if(M){var P=M.getPoints(T);C.geometry.getAttribute("position").array.length!==P.length*3&&C.geometry[CP]("position",new An.BufferAttribute(new Float32Array(P.length*3),3)),C.geometry.setFromPoints(P)}else{var A=C.geometry.getAttribute("position");(!A||!A.array||A.array.length!==6)&&C.geometry[CP]("position",A=new An.BufferAttribute(new Float32Array(2*3),3)),A.array[0]=_.x,A.array[1]=_.y||0,A.array[2]=_.z||0,A.array[3]=E.x,A.array[4]=E.y||0,A.array[5]=E.z||0,A.needsUpdate=!0}C.geometry.computeBoundingSphere()}else if(C.type==="Mesh")if(M){C.geometry.type.match(/^Tube(Buffer)?Geometry$/)||(C.position.set(0,0,0),C.rotation.set(0,0,0),C.scale.set(1,1,1));var W=Math.ceil(l(g)*10)/10,j=W/2,$=new An.TubeGeometry(M,T,j,e.linkResolution,!1);C.geometry.dispose(),C.geometry=$}else{if(!C.geometry.type.match(/^Cylinder(Buffer)?Geometry$/)){var R=Math.ceil(l(g)*10)/10,O=R/2,D=new An.CylinderGeometry(O,O,1,e.linkResolution,1,!1);D[tS](new An.Matrix4().makeTranslation(0,1/2,0)),D[tS](new An.Matrix4().makeRotationX(Math.PI/2)),C.geometry.dispose(),C.geometry=D}var F=new An.Vector3(_.x,_.y||0,_.z||0),U=new An.Vector3(E.x,E.y||0,E.z||0),B=F.distanceTo(U);C.position.x=F.x,C.position.y=F.y,C.position.z=F.z,C.scale.z=B,C.parent.localToWorld(U),C.lookAt(U)}}}}});function d(f){var p=n?f:e.layout.getLinkPosition(e.layout.graph.getLink(f.source,f.target).id),g=p[n?"source":"from"],v=p[n?"target":"to"];if(!(!g||!v||!g.hasOwnProperty("x")||!v.hasOwnProperty("x"))){var x=c(f);if(!x)f.__curve=null;else{var _=new An.Vector3(g.x,g.y||0,g.z||0),E=new An.Vector3(v.x,v.y||0,v.z||0),S=_.distanceTo(E),T,M=u(f);if(S>0){var C=v.x-g.x,A=v.y-g.y||0,P=new An.Vector3().subVectors(E,_),R=P.clone().multiplyScalar(x).cross(C!==0||A!==0?new An.Vector3(0,0,1):new An.Vector3(0,1,0)).applyAxisAngle(P.normalize(),M).add(new An.Vector3().addVectors(_,E).divideScalar(2));T=new An.QuadraticBezierCurve3(_,R,E)}else{var O=x*70,D=-M,F=D+Math.PI/2;T=new An.CubicBezierCurve3(_,new An.Vector3(O*Math.cos(F),O*Math.sin(F),0).add(_),new An.Vector3(O*Math.cos(D),O*Math.sin(D),0).add(_),E)}f.__curve=T}}}}function s(){var o=Zt(e.linkDirectionalArrowRelPos),l=Zt(e.linkDirectionalArrowLength),c=Zt(e.nodeVal);e.arrowDataMapper.entries().forEach(function(u){var h=bx(u,2),d=h[0],f=h[1];if(f){var p=n?d:e.layout.getLinkPosition(e.layout.graph.getLink(d.source,d.target).id),g=p[n?"source":"from"],v=p[n?"target":"to"];if(!(!g||!v||!g.hasOwnProperty("x")||!v.hasOwnProperty("x"))){var x=Math.cbrt(Math.max(0,c(g)||1))*e.nodeRelSize,_=Math.cbrt(Math.max(0,c(v)||1))*e.nodeRelSize,E=l(d),S=o(d),T=d.__curve?function(O){return d.__curve.getPoint(O)}:function(O){var D=function(U,B,W,j){return B[U]+(W[U]-B[U])*j||0};return{x:D("x",g,v,O),y:D("y",g,v,O),z:D("z",g,v,O)}},M=d.__curve?d.__curve.getLength():Math.sqrt(["x","y","z"].map(function(O){return Math.pow((v[O]||0)-(g[O]||0),2)}).reduce(function(O,D){return O+D},0)),C=x+E+(M-x-_-E)*S,A=T(C/M),P=T((C-E)/M);["x","y","z"].forEach(function(O){return f.position[O]=P[O]});var R=qte(An.Vector3,ql(["x","y","z"].map(function(O){return A[O]})));f.parent.localToWorld(R),f.lookAt(R)}}})}function a(){var o=Zt(e.linkDirectionalParticleSpeed);e.graphData.links.forEach(function(l){var c=e.particlesDataMapper.getObj(l),u=c&&c.children,h=l.__singleHopPhotonsObj&&l.__singleHopPhotonsObj.children;if(!((!h||!h.length)&&(!u||!u.length))){var d=n?l:e.layout.getLinkPosition(e.layout.graph.getLink(l.source,l.target).id),f=d[n?"source":"from"],p=d[n?"target":"to"];if(!(!f||!p||!f.hasOwnProperty("x")||!p.hasOwnProperty("x"))){var g=o(l),v=l.__curve?function(_){return l.__curve.getPoint(_)}:function(_){var E=function(T,M,C,A){return M[T]+(C[T]-M[T])*A||0};return{x:E("x",f,p,_),y:E("y",f,p,_),z:E("z",f,p,_)}},x=[].concat(ql(u||[]),ql(h||[]));x.forEach(function(_,E){var S=_.parent.__linkThreeObjType==="singleHopPhotons";if(_.hasOwnProperty("__progressRatio")||(_.__progressRatio=S?0:E/u.length),_.__progressRatio+=g,_.__progressRatio>=1)if(!S)_.__progressRatio=_.__progressRatio%1;else{_.parent.remove(_),P3(_);return}var T=_.__progressRatio,M=v(T);["x","y","z"].forEach(function(C){return _.position[C]=M[C]})})}}})}},emitParticle:function(e,n){if(n&&e.graphData.links.includes(n)){if(!n.__singleHopPhotonsObj){var i=new An.Group;i.__linkThreeObjType="singleHopPhotons",n.__singleHopPhotonsObj=i,e.graphScene.add(i)}var s=Zt(e.linkDirectionalParticleWidth),a=Math.ceil(s(n)*10)/10/2,o=e.linkDirectionalParticleResolution,l=new An.SphereGeometry(a,o,o),c=Zt(e.linkColor),u=Zt(e.linkDirectionalParticleColor),h=u(n)||c(n)||"#f0f0f0",d=new An.Color(bv(h)),f=e.linkOpacity*3,p=new An.MeshLambertMaterial({color:d,transparent:!0,opacity:f});n.__singleHopPhotonsObj.add(new An.Mesh(l,p))}return this},getGraphBbox:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){return!0};if(!e.initialised)return null;var i=function s(a){var o=[];if(a.geometry){a.geometry.computeBoundingBox();var l=new An.Box3;l.copy(a.geometry.boundingBox).applyMatrix4(a.matrixWorld),o.push(l)}return o.concat.apply(o,ql((a.children||[]).filter(function(c){return!c.hasOwnProperty("__graphObjType")||c.__graphObjType==="node"&&n(c.__data)}).map(s)))}(e.graphScene);return i.length?Object.assign.apply(Object,ql(["x","y","z"].map(function(s){return HM({},s,[fb(i,function(a){return a.min[s]}),db(i,function(a){return a.max[s]})])}))):null}},stateInit:function(){return{d3ForceLayout:Bee().force("link",Dee()).force("charge",jee()).force("center",Cee()).force("dagRadial",null).stop(),engineRunning:!1}},init:function(e,n){n.graphScene=e,n.nodeDataMapper=new xv(e,{objBindAttr:"__threeObj"}),n.linkDataMapper=new xv(e,{objBindAttr:"__lineObj"}),n.arrowDataMapper=new xv(e,{objBindAttr:"__arrowObj"}),n.particlesDataMapper=new xv(e,{objBindAttr:"__photonsObj"})},update:function(e,n){var i=function(le){return le.some(function(oe){return n.hasOwnProperty(oe)})};if(e.engineRunning=!1,typeof e.onUpdate=="function"&&e.onUpdate(),e.nodeAutoColorBy!==null&&i(["nodeAutoColorBy","graphData","nodeColor"])&&D8(e.graphData.nodes,Zt(e.nodeAutoColorBy),e.nodeColor),e.linkAutoColorBy!==null&&i(["linkAutoColorBy","graphData","linkColor"])&&D8(e.graphData.links,Zt(e.linkAutoColorBy),e.linkColor),e._flushObjects||i(["graphData","nodeThreeObject","nodeThreeObjectExtend","nodeVal","nodeColor","nodeVisibility","nodeRelSize","nodeResolution","nodeOpacity"])){var s=Zt(e.nodeThreeObject),a=Zt(e.nodeThreeObjectExtend),o=Zt(e.nodeVal),l=Zt(e.nodeColor),c=Zt(e.nodeVisibility),u={},h={};(e._flushObjects||i(["nodeThreeObject","nodeThreeObjectExtend"]))&&e.nodeDataMapper.clear(),e.nodeDataMapper.onCreateObj(function(ee){var le=s(ee),oe=a(ee);le&&e.nodeThreeObject===le&&(le=le.clone());var fe;return le&&!oe?fe=le:(fe=new An.Mesh,fe.__graphDefaultObj=!0,le&&oe&&fe.add(le)),fe.__graphObjType="node",fe}).onUpdateObj(function(ee,le){if(ee.__graphDefaultObj){var oe=o(le)||1,fe=Math.cbrt(oe)*e.nodeRelSize,Se=e.nodeResolution;(!ee.geometry.type.match(/^Sphere(Buffer)?Geometry$/)||ee.geometry.parameters.radius!==fe||ee.geometry.parameters.widthSegments!==Se)&&(u.hasOwnProperty(oe)||(u[oe]=new An.SphereGeometry(fe,Se,Se)),ee.geometry.dispose(),ee.geometry=u[oe]);var we=l(le),Le=new An.Color(bv(we||"#ffffaa")),et=e.nodeOpacity*AP(we);(ee.material.type!=="MeshLambertMaterial"||!ee.material.color.equals(Le)||ee.material.opacity!==et)&&(h.hasOwnProperty(we)||(h[we]=new An.MeshLambertMaterial({color:Le,transparent:!0,opacity:et})),ee.material.dispose(),ee.material=h[we])}}).digest(e.graphData.nodes.filter(c))}if(e._flushObjects||i(["graphData","linkThreeObject","linkThreeObjectExtend","linkMaterial","linkColor","linkWidth","linkVisibility","linkResolution","linkOpacity","linkDirectionalArrowLength","linkDirectionalArrowColor","linkDirectionalArrowResolution","linkDirectionalParticles","linkDirectionalParticleWidth","linkDirectionalParticleColor","linkDirectionalParticleResolution"])){var d=Zt(e.linkThreeObject),f=Zt(e.linkThreeObjectExtend),p=Zt(e.linkMaterial),g=Zt(e.linkVisibility),v=Zt(e.linkColor),x=Zt(e.linkWidth),_={},E={},S={},T=e.graphData.links.filter(g);if((e._flushObjects||i(["linkThreeObject","linkThreeObjectExtend","linkWidth"]))&&e.linkDataMapper.clear(),e.linkDataMapper.onRemoveObj(function(ee){var le=ee.__data&&ee.__data.__singleHopPhotonsObj;le&&(le.parent.remove(le),P3(le),delete ee.__data.__singleHopPhotonsObj)}).onCreateObj(function(ee){var le=d(ee),oe=f(ee);le&&e.linkThreeObject===le&&(le=le.clone());var fe;if(!le||oe){var Se=!!x(ee);if(Se)fe=new An.Mesh;else{var we=new An.BufferGeometry;we[CP]("position",new An.BufferAttribute(new Float32Array(2*3),3)),fe=new An.Line(we)}}var Le;return le?oe?(Le=new An.Group,Le.__graphDefaultObj=!0,Le.add(fe),Le.add(le)):Le=le:(Le=fe,Le.__graphDefaultObj=!0),Le.renderOrder=10,Le.__graphObjType="link",Le}).onUpdateObj(function(ee,le){if(ee.__graphDefaultObj){var oe=ee.children.length?ee.children[0]:ee,fe=Math.ceil(x(le)*10)/10,Se=!!fe;if(Se){var we=fe/2,Le=e.linkResolution;if(!oe.geometry.type.match(/^Cylinder(Buffer)?Geometry$/)||oe.geometry.parameters.radiusTop!==we||oe.geometry.parameters.radialSegments!==Le){if(!_.hasOwnProperty(fe)){var et=new An.CylinderGeometry(we,we,1,Le,1,!1);et[tS](new An.Matrix4().makeTranslation(0,1/2,0)),et[tS](new An.Matrix4().makeRotationX(Math.PI/2)),_[fe]=et}oe.geometry.dispose(),oe.geometry=_[fe]}}var Fe=p(le);if(Fe)oe.material=Fe;else{var Tt=v(le),me=new An.Color(bv(Tt||"#f0f0f0")),En=e.linkOpacity*AP(Tt),Wt=Se?"MeshLambertMaterial":"LineBasicMaterial";if(oe.material.type!==Wt||!oe.material.color.equals(me)||oe.material.opacity!==En){var Jt=Se?E:S;Jt.hasOwnProperty(Tt)||(Jt[Tt]=new An[Wt]({color:me,transparent:En<1,opacity:En,depthWrite:En>=1})),oe.material.dispose(),oe.material=Jt[Tt]}}}}).digest(T),e.linkDirectionalArrowLength||n.hasOwnProperty("linkDirectionalArrowLength")){var M=Zt(e.linkDirectionalArrowLength),C=Zt(e.linkDirectionalArrowColor);e.arrowDataMapper.onCreateObj(function(){var ee=new An.Mesh(void 0,new An.MeshLambertMaterial({transparent:!0}));return ee.__linkThreeObjType="arrow",ee}).onUpdateObj(function(ee,le){var oe=M(le),fe=e.linkDirectionalArrowResolution;if(!ee.geometry.type.match(/^Cone(Buffer)?Geometry$/)||ee.geometry.parameters.height!==oe||ee.geometry.parameters.radialSegments!==fe){var Se=new An.ConeGeometry(oe*.25,oe,fe);Se.translate(0,oe/2,0),Se.rotateX(Math.PI/2),ee.geometry.dispose(),ee.geometry=Se}var we=C(le)||v(le)||"#f0f0f0";ee.material.color=new An.Color(bv(we)),ee.material.opacity=e.linkOpacity*3*AP(we)}).digest(T.filter(M))}if(e.linkDirectionalParticles||n.hasOwnProperty("linkDirectionalParticles")){var A=Zt(e.linkDirectionalParticles),P=Zt(e.linkDirectionalParticleWidth),R=Zt(e.linkDirectionalParticleColor),O={},D={};e.particlesDataMapper.onCreateObj(function(){var ee=new An.Group;return ee.__linkThreeObjType="photons",ee.__photonDataMapper=new xv(ee),ee}).onUpdateObj(function(ee,le){var oe=Math.round(Math.abs(A(le))),fe=!!ee.children.length&&ee.children[0],Se=Math.ceil(P(le)*10)/10/2,we=e.linkDirectionalParticleResolution,Le;fe&&fe.geometry.parameters.radius===Se&&fe.geometry.parameters.widthSegments===we?Le=fe.geometry:(D.hasOwnProperty(Se)||(D[Se]=new An.SphereGeometry(Se,we,we)),Le=D[Se],fe&&fe.geometry.dispose());var et=R(le)||v(le)||"#f0f0f0",Fe=new An.Color(bv(et)),Tt=e.linkOpacity*3,me;fe&&fe.material.color.equals(Fe)&&fe.material.opacity===Tt?me=fe.material:(O.hasOwnProperty(et)||(O[et]=new An.MeshLambertMaterial({color:Fe,transparent:!0,opacity:Tt})),me=O[et],fe&&fe.material.dispose()),ee.__photonDataMapper.id(function(En){return En.idx}).onCreateObj(function(){return new An.Mesh(Le,me)}).onUpdateObj(function(En){En.geometry=Le,En.material=me}).digest(ql(new Array(oe)).map(function(En,Wt){return{idx:Wt}}))}).digest(T.filter(A))}}if(e._flushObjects=!1,i(["graphData","nodeId","linkSource","linkTarget","numDimensions","forceEngine","dagMode","dagNodeFilter","dagLevelDistance"])){e.engineRunning=!1,e.graphData.links.forEach(function(ee){ee.source=ee[e.linkSource],ee.target=ee[e.linkTarget]});var F=e.forceEngine!=="ngraph",U;if(F){(U=e.d3ForceLayout).stop().alpha(1).numDimensions(e.numDimensions).nodes(e.graphData.nodes);var B=e.d3ForceLayout.force("link");B&&B.id(function(ee){return ee[e.nodeId]}).links(e.graphData.links);var W=e.dagMode&&fMe(e.graphData,function(ee){return ee[e.nodeId]},{nodeFilter:e.dagNodeFilter,onLoopError:e.onDagError||void 0}),j=Math.max.apply(Math,ql(Object.values(W||[]))),$=e.dagLevelDistance||e.graphData.nodes.length/(j||1)*pMe*(["radialin","radialout"].indexOf(e.dagMode)!==-1?.7:1);if(["lr","rl","td","bu","zin","zout"].includes(n.dagMode)){var z=["lr","rl"].includes(n.dagMode)?"fx":["td","bu"].includes(n.dagMode)?"fy":"fz";e.graphData.nodes.filter(e.dagNodeFilter).forEach(function(ee){return delete ee[z]})}if(["lr","rl","td","bu","zin","zout"].includes(e.dagMode)){var Z=["rl","td","zout"].includes(e.dagMode),se=function(le){return(W[le[e.nodeId]]-j/2)*$*(Z?-1:1)},q=["lr","rl"].includes(e.dagMode)?"fx":["td","bu"].includes(e.dagMode)?"fy":"fz";e.graphData.nodes.filter(e.dagNodeFilter).forEach(function(ee){return ee[q]=se(ee)})}e.d3ForceLayout.force("dagRadial",["radialin","radialout"].indexOf(e.dagMode)!==-1?Uee(function(ee){var le=W[ee[e.nodeId]]||-1;return(e.dagMode==="radialin"?j-le:le)*$}).strength(function(ee){return e.dagNodeFilter(ee)?1:0}):null)}else{var ue=L8.graph();e.graphData.nodes.forEach(function(ee){ue.addNode(ee[e.nodeId])}),e.graphData.links.forEach(function(ee){ue.addLink(ee.source,ee.target)}),U=L8.forcelayout(ue,lMe({dimensions:e.numDimensions},e.ngraphPhysics)),U.graph=ue}for(var be=0;be<e.warmupTicks&&!(F&&e.d3AlphaMin>0&&e.d3ForceLayout.alpha()<e.d3AlphaMin);be++)U[F?"tick":"step"]();e.layout=U,this.resetCountdown()}e.engineRunning=!0,e.onFinishUpdate()}});function gMe(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Object,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=function(s){function a(){var o;Wte(this,a);for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];return o=Hte(this,a,[].concat(c)),o.__kapsuleInstance=qte(r,[].concat(ql(n?[o]:[]),c)),o}return Kte(a,s),Xte(a)}(e);return Object.keys(r()).forEach(function(s){return i.prototype[s]=function(){var a,o=(a=this.__kapsuleInstance)[s].apply(a,arguments);return o===this.__kapsuleInstance?this:o}}),i}var yMe=window.THREE?window.THREE:{Group:Tg},Mg=gMe(mMe,yMe.Group,!0);if(typeof AFRAME>"u")throw new Error("Component attempted to register before AFRAME was available.");var NP=function(e){return typeof e=="string"?JSON.parse(e):e},Vl=function(e){if(typeof e=="function")return e;var n=eval;try{var i=n("("+e+")");return i}catch{}return null},Ci=function(e){return isNaN(parseFloat(e))?Vl(e)?Vl(e):e:parseFloat(e)};AFRAME.components.hasOwnProperty("forcegraph")||AFRAME.registerComponent("forcegraph",{schema:{jsonUrl:{type:"string",default:""},nodes:{parse:NP,default:[]},links:{parse:NP,default:[]},numDimensions:{type:"number",default:3},dagMode:{type:"string",default:""},dagLevelDistance:{type:"number",default:0},dagNodeFilter:{parse:Vl,default:function(){return!0}},onDagError:{parse:Vl,default:void 0},nodeRelSize:{type:"number",default:4},nodeId:{type:"string",default:"id"},nodeVal:{parse:Ci,default:"val"},nodeResolution:{type:"number",default:8},nodeVisibility:{parse:Ci,default:!0},nodeColor:{parse:Ci,default:"color"},nodeAutoColorBy:{parse:Ci,default:""},nodeOpacity:{type:"number",default:.75},nodeThreeObject:{parse:Ci,default:null},nodeThreeObjectExtend:{parse:Ci,default:!1},linkSource:{type:"string",default:"source"},linkTarget:{type:"string",default:"target"},linkVisibility:{parse:Ci,default:!0},linkColor:{parse:Ci,default:"color"},linkAutoColorBy:{parse:Ci,default:""},linkOpacity:{type:"number",default:.2},linkWidth:{parse:Ci,default:0},linkResolution:{type:"number",default:6},linkCurvature:{parse:Ci,default:0},linkCurveRotation:{parse:Ci,default:0},linkMaterial:{parse:Ci,default:null},linkThreeObject:{parse:Ci,default:null},linkThreeObjectExtend:{parse:Ci,default:!1},linkPositionUpdate:{parse:Vl,default:null},linkDirectionalArrowLength:{parse:Ci,default:0},linkDirectionalArrowColor:{parse:Ci,default:null},linkDirectionalArrowRelPos:{parse:Ci,default:.5},linkDirectionalArrowResolution:{type:"number",default:8},linkDirectionalParticles:{parse:Ci,default:0},linkDirectionalParticleSpeed:{parse:Ci,default:.01},linkDirectionalParticleWidth:{parse:Ci,default:.5},linkDirectionalParticleColor:{parse:Ci,default:null},linkDirectionalParticleResolution:{type:"number",default:4},onNodeHover:{parse:Vl,default:function(){}},onLinkHover:{parse:Vl,default:function(){}},onNodeClick:{parse:Vl,default:function(){}},onLinkClick:{parse:Vl,default:function(){}},forceEngine:{type:"string",default:"d3"},d3AlphaMin:{type:"number",default:0},d3AlphaDecay:{type:"number",default:.0228},d3VelocityDecay:{type:"number",default:.4},ngraphPhysics:{parse:NP,default:null},warmupTicks:{type:"int",default:0},cooldownTicks:{type:"int",default:1e18},cooldownTime:{type:"int",default:15e3},onEngineTick:{parse:Vl,default:function(){}},onEngineStop:{parse:Vl,default:function(){}}},getGraphBbox:function(e){return this.forceGraph||(this.forceGraph=new Mg),this.forceGraph.getGraphBbox(e)},emitParticle:function(){this.forceGraph||(this.forceGraph=new Mg);var e=this.forceGraph,n=e.emitParticle.apply(e,arguments);return n===e?this:n},d3Force:function(){this.forceGraph||(this.forceGraph=new Mg);var e=this.forceGraph,n=e.d3Force.apply(e,arguments);return n===e?this:n},d3ReheatSimulation:function(){return this.forceGraph&&this.forceGraph.d3ReheatSimulation(),this},refresh:function(){return this.forceGraph&&this.forceGraph.refresh(),this},init:function(){var e=this,n=this.state={};n.infoEl=document.createElement("a-text"),n.infoEl.setAttribute("position","0 -0.1 -1"),n.infoEl.setAttribute("width",1),n.infoEl.setAttribute("align","center"),n.infoEl.setAttribute("color","lavender");var i=document.querySelector("a-entity[camera], a-camera");i.appendChild(n.infoEl),n.cameraObj=i.object3D.children.filter(function(s){return s.type==="PerspectiveCamera"})[0],this.el.sceneEl.addEventListener("camera-set-active",function(s){n.cameraObj=s.detail.cameraEl.components.camera.camera}),this.forceGraph||(this.forceGraph=new Mg),this.forceGraph.onFinishUpdate(function(){return e.el.setObject3D("forcegraphGroup",e.forceGraph)}).onLoading(function(){return n.infoEl.setAttribute("value","Loading...")}).onFinishLoading(function(){return n.infoEl.setAttribute("value","")}),this.el.addEventListener("raycaster-intersected",function(s){return n.hoverDetail=s.detail}),this.el.addEventListener("raycaster-intersected-cleared",function(s){return n.hoverDetail=s.detail}),this.el.addEventListener("click",function(){return n.hoverObj&&e.data["on"+(n.hoverObj.__graphObjType==="node"?"Node":"Link")+"Click"](n.hoverObj.__data)})},remove:function(){this.state.infoEl.remove(),this.el.removeObject3D("forcegraphGroup")},update:function(e){var n=this,i=this.data,s=AFRAME.utils.diff(i,e),a=["jsonUrl","numDimensions","dagMode","dagLevelDistance","dagNodeFilter","onDagError","nodeRelSize","nodeId","nodeVal","nodeResolution","nodeVisibility","nodeColor","nodeAutoColorBy","nodeOpacity","nodeThreeObject","nodeThreeObjectExtend","linkSource","linkTarget","linkVisibility","linkColor","linkAutoColorBy","linkOpacity","linkWidth","linkResolution","linkCurvature","linkCurveRotation","linkMaterial","linkThreeObject","linkThreeObjectExtend","linkPositionUpdate","linkDirectionalArrowLength","linkDirectionalArrowColor","linkDirectionalArrowRelPos","linkDirectionalArrowResolution","linkDirectionalParticles","linkDirectionalParticleSpeed","linkDirectionalParticleWidth","linkDirectionalParticleColor","linkDirectionalParticleResolution","forceEngine","d3AlphaMin","d3AphaDecay","d3VelocityDecay","ngraphPhysics","warmupTicks","cooldownTicks","cooldownTime","onEngineTick","onEngineStop"];a.filter(function(o){return o in s}).forEach(function(o){n.forceGraph[o](i[o]!==""?i[o]:null)}),("nodes"in s||"links"in s)&&n.forceGraph.graphData({nodes:i.nodes,links:i.links})},tick:function(e,n){for(var i=this.state,s=this.data,a=i.hoverDetail?i.hoverDetail.getIntersection?i.hoverDetail.getIntersection(this.el):i.hoverDetail.intersection||void 0:void 0,o=a?a.object:void 0;o&&!o.hasOwnProperty("__graphObjType");)o=o.parent;if(o!==i.hoverObj){var l=i.hoverObj?i.hoverObj.__graphObjType:null,c=i.hoverObj?i.hoverObj.__data:null,u=o?o.__graphObjType:null,h=o?o.__data:null;l&&l!==u&&s["on"+(l==="node"?"Node":"Link")+"Hover"](null,c),u&&s["on"+(u==="node"?"Node":"Link")+"Hover"](h,l===u?c:null),i.hoverObj=o}this.forceGraph.tickFrame()}});function ro(){return ro=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(r[i]=n[i])}return r},ro.apply(null,arguments)}function vMe(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function bb(r,e){return bb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},bb(r,e)}function xMe(r,e){r.prototype=Object.create(e.prototype),r.prototype.constructor=r,bb(r,e)}function R3(r){return R3=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},R3(r)}function bMe(r){try{return Function.toString.call(r).indexOf("[native code]")!==-1}catch{return typeof r=="function"}}function ene(){try{var r=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ene=function(){return!!r})()}function _Me(r,e,n){if(ene())return Reflect.construct.apply(null,arguments);var i=[null];i.push.apply(i,e);var s=new(r.bind.apply(r,i));return n&&bb(s,n.prototype),s}function O3(r){var e=typeof Map=="function"?new Map:void 0;return O3=function(i){if(i===null||!bMe(i))return i;if(typeof i!="function")throw new TypeError("Super expression must either be null or a function");if(e!==void 0){if(e.has(i))return e.get(i);e.set(i,s)}function s(){return _Me(i,arguments,R3(this).constructor)}return s.prototype=Object.create(i.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}),bb(s,i)},O3(r)}var Pc=function(r){xMe(e,r);function e(n){var i;return i=r.call(this,"An error occurred. See https://github.com/styled-components/polished/blob/main/src/internalHelpers/errors.md#"+n+" for more information.")||this,vMe(i)}return e}(O3(Error));function PP(r){return Math.round(r*255)}function wMe(r,e,n){return PP(r)+","+PP(e)+","+PP(n)}function JT(r,e,n,i){if(i===void 0&&(i=wMe),e===0)return i(n,n,n);var s=(r%360+360)%360/60,a=(1-Math.abs(2*n-1))*e,o=a*(1-Math.abs(s%2-1)),l=0,c=0,u=0;s>=0&&s<1?(l=a,c=o):s>=1&&s<2?(l=o,c=a):s>=2&&s<3?(c=a,u=o):s>=3&&s<4?(c=o,u=a):s>=4&&s<5?(l=o,u=a):s>=5&&s<6&&(l=a,u=o);var h=n-a/2,d=l+h,f=c+h,p=u+h;return i(d,f,p)}var F8={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"639",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"};function SMe(r){if(typeof r!="string")return r;var e=r.toLowerCase();return F8[e]?"#"+F8[e]:r}var TMe=/^#[a-fA-F0-9]{6}$/,EMe=/^#[a-fA-F0-9]{8}$/,MMe=/^#[a-fA-F0-9]{3}$/,AMe=/^#[a-fA-F0-9]{4}$/,RP=/^rgb\(\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*\)$/i,CMe=/^rgb(?:a)?\(\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*(?:,|\/)\s*([-+]?\d*[.]?\d+[%]?)\s*\)$/i,NMe=/^hsl\(\s*(\d{0,3}[.]?[0-9]+(?:deg)?)\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*\)$/i,PMe=/^hsl(?:a)?\(\s*(\d{0,3}[.]?[0-9]+(?:deg)?)\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*(?:,|\/)\s*([-+]?\d*[.]?\d+[%]?)\s*\)$/i;function Np(r){if(typeof r!="string")throw new Pc(3);var e=SMe(r);if(e.match(TMe))return{red:parseInt(""+e[1]+e[2],16),green:parseInt(""+e[3]+e[4],16),blue:parseInt(""+e[5]+e[6],16)};if(e.match(EMe)){var n=parseFloat((parseInt(""+e[7]+e[8],16)/255).toFixed(2));return{red:parseInt(""+e[1]+e[2],16),green:parseInt(""+e[3]+e[4],16),blue:parseInt(""+e[5]+e[6],16),alpha:n}}if(e.match(MMe))return{red:parseInt(""+e[1]+e[1],16),green:parseInt(""+e[2]+e[2],16),blue:parseInt(""+e[3]+e[3],16)};if(e.match(AMe)){var i=parseFloat((parseInt(""+e[4]+e[4],16)/255).toFixed(2));return{red:parseInt(""+e[1]+e[1],16),green:parseInt(""+e[2]+e[2],16),blue:parseInt(""+e[3]+e[3],16),alpha:i}}var s=RP.exec(e);if(s)return{red:parseInt(""+s[1],10),green:parseInt(""+s[2],10),blue:parseInt(""+s[3],10)};var a=CMe.exec(e.substring(0,50));if(a)return{red:parseInt(""+a[1],10),green:parseInt(""+a[2],10),blue:parseInt(""+a[3],10),alpha:parseFloat(""+a[4])>1?parseFloat(""+a[4])/100:parseFloat(""+a[4])};var o=NMe.exec(e);if(o){var l=parseInt(""+o[1],10),c=parseInt(""+o[2],10)/100,u=parseInt(""+o[3],10)/100,h="rgb("+JT(l,c,u)+")",d=RP.exec(h);if(!d)throw new Pc(4,e,h);return{red:parseInt(""+d[1],10),green:parseInt(""+d[2],10),blue:parseInt(""+d[3],10)}}var f=PMe.exec(e.substring(0,50));if(f){var p=parseInt(""+f[1],10),g=parseInt(""+f[2],10)/100,v=parseInt(""+f[3],10)/100,x="rgb("+JT(p,g,v)+")",_=RP.exec(x);if(!_)throw new Pc(4,e,x);return{red:parseInt(""+_[1],10),green:parseInt(""+_[2],10),blue:parseInt(""+_[3],10),alpha:parseFloat(""+f[4])>1?parseFloat(""+f[4])/100:parseFloat(""+f[4])}}throw new Pc(5)}function RMe(r){var e=r.red/255,n=r.green/255,i=r.blue/255,s=Math.max(e,n,i),a=Math.min(e,n,i),o=(s+a)/2;if(s===a)return r.alpha!==void 0?{hue:0,saturation:0,lightness:o,alpha:r.alpha}:{hue:0,saturation:0,lightness:o};var l,c=s-a,u=o>.5?c/(2-s-a):c/(s+a);switch(s){case e:l=(n-i)/c+(n<i?6:0);break;case n:l=(i-e)/c+2;break;default:l=(e-n)/c+4;break}return l*=60,r.alpha!==void 0?{hue:l,saturation:u,lightness:o,alpha:r.alpha}:{hue:l,saturation:u,lightness:o}}function Kd(r){return RMe(Np(r))}var OMe=function(e){return e.length===7&&e[1]===e[2]&&e[3]===e[4]&&e[5]===e[6]?"#"+e[1]+e[3]+e[5]:e},k3=OMe;function Hf(r){var e=r.toString(16);return e.length===1?"0"+e:e}function OP(r){return Hf(Math.round(r*255))}function kMe(r,e,n){return k3("#"+OP(r)+OP(e)+OP(n))}function tne(r,e,n){return JT(r,e,n,kMe)}function IMe(r,e,n){if(typeof r=="object"&&e===void 0&&n===void 0)return tne(r.hue,r.saturation,r.lightness);throw new Pc(1)}function DMe(r,e,n,i){if(typeof r=="object"&&e===void 0&&n===void 0&&i===void 0)return r.alpha>=1?tne(r.hue,r.saturation,r.lightness):"rgba("+JT(r.hue,r.saturation,r.lightness)+","+r.alpha+")";throw new Pc(2)}function nne(r,e,n){if(typeof r=="number"&&typeof e=="number"&&typeof n=="number")return k3("#"+Hf(r)+Hf(e)+Hf(n));if(typeof r=="object"&&e===void 0&&n===void 0)return k3("#"+Hf(r.red)+Hf(r.green)+Hf(r.blue));throw new Pc(6)}function WM(r,e,n,i){if(typeof r=="object"&&e===void 0&&n===void 0&&i===void 0)return r.alpha>=1?nne(r.red,r.green,r.blue):"rgba("+r.red+","+r.green+","+r.blue+","+r.alpha+")";throw new Pc(7)}var LMe=function(e){return typeof e.red=="number"&&typeof e.green=="number"&&typeof e.blue=="number"&&(typeof e.alpha!="number"||typeof e.alpha>"u")},FMe=function(e){return typeof e.red=="number"&&typeof e.green=="number"&&typeof e.blue=="number"&&typeof e.alpha=="number"},BMe=function(e){return typeof e.hue=="number"&&typeof e.saturation=="number"&&typeof e.lightness=="number"&&(typeof e.alpha!="number"||typeof e.alpha>"u")},jMe=function(e){return typeof e.hue=="number"&&typeof e.saturation=="number"&&typeof e.lightness=="number"&&typeof e.alpha=="number"};function Yd(r){if(typeof r!="object")throw new Pc(8);if(FMe(r))return WM(r);if(LMe(r))return nne(r);if(jMe(r))return DMe(r);if(BMe(r))return IMe(r);throw new Pc(8)}function rne(r,e,n){return function(){var s=n.concat(Array.prototype.slice.call(arguments));return s.length>=e?r.apply(this,s):rne(r,e,s)}}function Fo(r){return rne(r,r.length,[])}function UMe(r,e){if(e==="transparent")return e;var n=Kd(e);return Yd(ro({},n,{hue:n.hue+parseFloat(r)}))}Fo(UMe);function h0(r,e,n){return Math.max(r,Math.min(e,n))}function zMe(r,e){if(e==="transparent")return e;var n=Kd(e);return Yd(ro({},n,{lightness:h0(0,1,n.lightness-parseFloat(r))}))}Fo(zMe);function $Me(r,e){if(e==="transparent")return e;var n=Kd(e);return Yd(ro({},n,{saturation:h0(0,1,n.saturation-parseFloat(r))}))}Fo($Me);function GMe(r,e){if(e==="transparent")return e;var n=Kd(e);return Yd(ro({},n,{lightness:h0(0,1,n.lightness+parseFloat(r))}))}Fo(GMe);function VMe(r,e,n){if(e==="transparent")return n;if(n==="transparent")return e;if(r===0)return n;var i=Np(e),s=ro({},i,{alpha:typeof i.alpha=="number"?i.alpha:1}),a=Np(n),o=ro({},a,{alpha:typeof a.alpha=="number"?a.alpha:1}),l=s.alpha-o.alpha,c=parseFloat(r)*2-1,u=c*l===-1?c:c+l,h=1+c*l,d=(u/h+1)/2,f=1-d,p={red:Math.floor(s.red*d+o.red*f),green:Math.floor(s.green*d+o.green*f),blue:Math.floor(s.blue*d+o.blue*f),alpha:s.alpha*parseFloat(r)+o.alpha*(1-parseFloat(r))};return WM(p)}var HMe=Fo(VMe),ine=HMe;function WMe(r,e){if(e==="transparent")return e;var n=Np(e),i=typeof n.alpha=="number"?n.alpha:1,s=ro({},n,{alpha:h0(0,1,(i*100+parseFloat(r)*100)/100)});return WM(s)}var qMe=Fo(WMe),sne=qMe;function XMe(r,e){if(e==="transparent")return e;var n=Kd(e);return Yd(ro({},n,{saturation:h0(0,1,n.saturation+parseFloat(r))}))}Fo(XMe);function KMe(r,e){return e==="transparent"?e:Yd(ro({},Kd(e),{hue:parseFloat(r)}))}Fo(KMe);function YMe(r,e){return e==="transparent"?e:Yd(ro({},Kd(e),{lightness:parseFloat(r)}))}Fo(YMe);function ZMe(r,e){return e==="transparent"?e:Yd(ro({},Kd(e),{saturation:parseFloat(r)}))}Fo(ZMe);function QMe(r,e){return e==="transparent"?e:ine(parseFloat(r),"rgb(0, 0, 0)",e)}Fo(QMe);function JMe(r,e){return e==="transparent"?e:ine(parseFloat(r),"rgb(255, 255, 255)",e)}Fo(JMe);function eAe(r,e){if(e==="transparent")return e;var n=Np(e),i=typeof n.alpha=="number"?n.alpha:1,s=ro({},n,{alpha:h0(0,1,+(i*100-parseFloat(r)*100).toFixed(2)/100)});return WM(s)}Fo(eAe);function tAe(r,e){e===void 0&&(e={});var n=e.insertAt;if(!(typeof document>"u")){var i=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css",n==="top"&&i.firstChild?i.insertBefore(s,i.firstChild):i.appendChild(s),s.styleSheet?s.styleSheet.cssText=r:s.appendChild(document.createTextNode(r))}}var nAe=`.graph-nav-info {
  position: absolute;
  bottom: 5px;
  width: 100%;
  text-align: center;
  color: slategrey;
  opacity: 0.7;
  font-size: 10px;
  font-family: Sans-serif;
  z-index: 1000;
}`;tAe(nAe);function I3(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,i=Array(e);n<e;n++)i[n]=r[n];return i}function rAe(r){if(Array.isArray(r))return r}function iAe(r){if(Array.isArray(r))return I3(r)}function ex(r,e,n){return(e=uAe(e))in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function sAe(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function aAe(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var i,s,a,o,l=[],c=!0,u=!1;try{if(a=(n=n.call(r)).next,e!==0)for(;!(c=(i=a.call(n)).done)&&(l.push(i.value),l.length!==e);c=!0);}catch(h){u=!0,s=h}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function oAe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lAe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function B8(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable})),n.push.apply(n,i)}return n}function j8(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?B8(Object(n),!0).forEach(function(i){ex(r,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):B8(Object(n)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(n,i))})}return r}function kP(r,e){return rAe(r)||aAe(r,e)||ane(r,e)||oAe()}function nS(r){return iAe(r)||sAe(r)||ane(r)||lAe()}function cAe(r,e){if(typeof r!="object"||!r)return r;var n=r[Symbol.toPrimitive];if(n!==void 0){var i=n.call(r,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function uAe(r){var e=cAe(r,"string");return typeof e=="symbol"?e:e+""}function ane(r,e){if(r){if(typeof r=="string")return I3(r,e);var n={}.toString.call(r).slice(8,-1);return n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set"?Array.from(r):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?I3(r,e):void 0}}var hAe=Hd({props:{width:{default:window.innerWidth,triggerUpdate:!1,onChange:function(e,n){n.container&&(n.container.style.width="".concat(e,"px"))}},height:{default:window.innerHeight,triggerUpdate:!1,onChange:function(e,n){n.container&&(n.container.style.height="".concat(e,"px"))}},jsonUrl:{},graphData:{default:{nodes:[],links:[]}},numDimensions:{default:3},dagMode:{},dagLevelDistance:{},dagNodeFilter:{default:function(){return!0}},onDagError:{default:void 0},backgroundColor:{default:"#002"},showNavInfo:{default:!0},nodeRelSize:{default:4},nodeId:{default:"id"},nodeLabel:{default:"name"},nodeDesc:{default:"desc"},onNodeHover:{},onNodeClick:{},nodeVal:{default:"val"},nodeResolution:{default:8},nodeVisibility:{default:!0},nodeColor:{default:"color"},nodeAutoColorBy:{},nodeOpacity:{default:.75},nodeThreeObject:{},nodeThreeObjectExtend:{default:!1},linkSource:{default:"source"},linkTarget:{default:"target"},linkLabel:{default:"name"},linkDesc:{default:"desc"},onLinkHover:{},onLinkClick:{},linkVisibility:{default:!0},linkColor:{default:"color"},linkAutoColorBy:{},linkOpacity:{default:.2},linkWidth:{default:0},linkResolution:{default:6},linkCurvature:{default:0},linkCurveRotation:{default:0},linkMaterial:{},linkThreeObject:{},linkThreeObjectExtend:{default:!1},linkPositionUpdate:{},linkDirectionalArrowLength:{default:0},linkDirectionalArrowColor:{},linkDirectionalArrowRelPos:{default:.5},linkDirectionalArrowResolution:{default:8},linkDirectionalParticles:{default:0},linkDirectionalParticleSpeed:{default:.01},linkDirectionalParticleWidth:{default:.5},linkDirectionalParticleColor:{},linkDirectionalParticleResolution:{default:4},forceEngine:{default:"d3"},d3AlphaMin:{default:0},d3AlphaDecay:{default:.0228},d3VelocityDecay:{default:.4},ngraphPhysics:{},warmupTicks:{default:0},cooldownTicks:{},cooldownTime:{default:15e3},onEngineTick:{},onEngineStop:{}},methods:j8(j8({},Object.assign.apply(Object,[{}].concat(nS(["getGraphBbox","emitParticle","d3Force","d3ReheatSimulation","refresh"].map(function(r){return ex({},r,function(e){for(var n=e.forcegraph.components.forcegraph,i=arguments.length,s=new Array(i>1?i-1:0),a=1;a<i;a++)s[a-1]=arguments[a];var o=n[r].apply(n,s);return o===n?this:o})}))))),{},{_destructor:function(){this.graphData({nodes:[],links:[]})}}),init:function(e,n){e.innerHTML="",n.container=document.createElement("div"),e.appendChild(n.container),n.container.style.position="relative",n.container.style.width="".concat(n.width,"px"),n.container.style.height="".concat(n.height,"px"),n.container.appendChild(n.navInfo=document.createElement("div")),n.navInfo.className="graph-nav-info",n.navInfo.textContent="Mouse drag: look, gamepad/arrow/wasd keys: move";var i=document.createElement("a-scene");i.setAttribute("embedded",""),i.appendChild(n.sky=document.createElement("a-sky")),n.sky.setAttribute("radius",3e3);var s;i.appendChild(s=document.createElement("a-entity")),s.setAttribute("position","0 0 300"),s.setAttribute("movement-controls","controls: gamepad, touch; fly: true; speed: 7");var a;s.appendChild(a=document.createElement("a-entity")),a.setAttribute("camera",""),a.setAttribute("position","0 0 0"),a.setAttribute("look-controls","pointerLockEnabled: false"),a.setAttribute("wasd-controls","fly: true; acceleration: 700");var o;a.appendChild(o=document.createElement("a-text")),o.setAttribute("position","0 -0.3 -1"),o.setAttribute("width",2),o.setAttribute("align","center"),o.setAttribute("color","lavender"),o.setAttribute("value","");var l;a.appendChild(l=document.createElement("a-text")),l.setAttribute("position","0 -0.4 -1"),l.setAttribute("width",1.3),l.setAttribute("align","center"),l.setAttribute("color","lavender"),l.setAttribute("value",""),n.raycasterEls=[];var c;i.appendChild(c=document.createElement("a-entity")),c.setAttribute("cursor","rayOrigin: mouse; mouseCursorStylesEnabled: true"),c.setAttribute("raycaster","objects: [forcegraph]; interval: 100"),n.raycasterEls.push(c),["left","right"].forEach(function(u){var h;s.appendChild(h=document.createElement("a-entity")),h.setAttribute("laser-controls","hand: ".concat(u,"; model: false;")),h.setAttribute("raycaster","objects: [forcegraph]; interval: 100; lineColor: steelblue; lineOpacity: 0.85"),n.raycasterEls.push(h)}),i.appendChild(n.forcegraph=document.createElement("a-entity")),n.forcegraph.setAttribute("forcegraph",null),n.container.appendChild(i),n.forcegraph.setAttribute("forcegraph",Object.assign.apply(Object,nS(["node","link"].map(function(u){var h={node:"Node",link:"Link"}[u];return ex({},"on".concat(h,"Hover"),function(f,p){var g=f&&Zt(n["".concat(u,"Label")])(f)||"",v=f&&Zt(n["".concat(u,"Desc")])(f)||"";o.setAttribute("value",g),l.setAttribute("value",v),n["on".concat(h,"Hover")]&&n["on".concat(h,"Hover")](f,p)})}))))},update:function(e,n){if(n.hasOwnProperty("backgroundColor")){var i=Np(e.backgroundColor).alpha;i===void 0&&(i=1),e.sky.setAttribute("color",sne(1,e.backgroundColor)),e.sky.setAttribute("opacity",i)}n.hasOwnProperty("showNavInfo")&&(e.navInfo.style.display=e.showNavInfo?null:"none");var s=["onNodeHover","onLinkHover","onNodeClick","onLinkClick"].some(function(l){return e[l]})||["nodeLabel","linkLabel"].some(function(l){return e[l]!=="name"})||["nodeDesc","linkDesc"].some(function(l){return e[l]!=="desc"});e.raycasterEls.forEach(function(l){return l.setAttribute("raycaster",s?"objects: [forcegraph]; interval: 100":"objects: __none__")});var a=["jsonUrl","numDimensions","dagMode","dagLevelDistance","dagNodeFilter","onDagError","nodeRelSize","nodeId","onNodeClick","nodeVal","nodeResolution","nodeVisibility","nodeColor","nodeAutoColorBy","nodeOpacity","nodeThreeObject","nodeThreeObjectExtend","linkSource","linkTarget","onLinkClick","linkVisibility","linkColor","linkAutoColorBy","linkOpacity","linkWidth","linkResolution","linkCurvature","linkCurveRotation","linkMaterial","linkThreeObject","linkThreeObjectExtend","linkPositionUpdate","linkDirectionalArrowLength","linkDirectionalArrowColor","linkDirectionalArrowRelPos","linkDirectionalArrowResolution","linkDirectionalParticles","linkDirectionalParticleSpeed","linkDirectionalParticleWidth","linkDirectionalParticleColor","linkDirectionalParticleResolution","forceEngine","d3AlphaMin","d3AlphaDecay","d3VelocityDecay","ngraphPhysics","warmupTicks","cooldownTicks","cooldownTime","onEngineTick","onEngineStop"],o=Object.assign.apply(Object,[{}].concat(nS(Object.entries(e).filter(function(l){var c=kP(l,2),u=c[0],h=c[1];return n.hasOwnProperty(u)&&a.indexOf(u)!==-1&&h!==void 0&&h!==null}).map(function(l){var c=kP(l,2),u=c[0],h=c[1];return ex({},u,h)})),nS(Object.entries(e.graphData).map(function(l){var c=kP(l,2),u=c[0],h=c[1];return ex({},u,h)}))));e.forcegraph.setAttribute("forcegraph",o)}});function D3(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,i=Array(e);n<e;n++)i[n]=r[n];return i}function dAe(r){if(Array.isArray(r))return r}function fAe(r){if(Array.isArray(r))return D3(r)}function uT(r,e,n){return(e=xAe(e))in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function pAe(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function mAe(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var i,s,a,o,l=[],c=!0,u=!1;try{if(a=(n=n.call(r)).next,e!==0)for(;!(c=(i=a.call(n)).done)&&(l.push(i.value),l.length!==e);c=!0);}catch(h){u=!0,s=h}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function gAe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yAe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function U8(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable})),n.push.apply(n,i)}return n}function z8(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?U8(Object(n),!0).forEach(function(i){uT(r,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):U8(Object(n)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(n,i))})}return r}function rS(r,e){return dAe(r)||mAe(r,e)||one(r,e)||gAe()}function iS(r){return fAe(r)||pAe(r)||one(r)||yAe()}function vAe(r,e){if(typeof r!="object"||!r)return r;var n=r[Symbol.toPrimitive];if(n!==void 0){var i=n.call(r,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function xAe(r){var e=vAe(r,"string");return typeof e=="symbol"?e:e+""}function one(r,e){if(r){if(typeof r=="string")return D3(r,e);var n={}.toString.call(r).slice(8,-1);return n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set"?Array.from(r):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?D3(r,e):void 0}}var bAe=Hd({props:{width:{},height:{},yOffset:{default:1.5},glScale:{default:200},jsonUrl:{},graphData:{default:{nodes:[],links:[]}},numDimensions:{default:3},dagMode:{},dagLevelDistance:{},dagNodeFilter:{default:function(){return!0}},onDagError:{default:void 0},nodeRelSize:{default:4},nodeId:{default:"id"},nodeVal:{default:"val"},nodeResolution:{default:8},nodeVisibility:{default:!0},nodeColor:{default:"color"},nodeAutoColorBy:{},nodeOpacity:{default:.75},nodeThreeObject:{},nodeThreeObjectExtend:{default:!1},linkSource:{default:"source"},linkTarget:{default:"target"},linkVisibility:{default:!0},linkColor:{default:"color"},linkAutoColorBy:{},linkOpacity:{default:.2},linkWidth:{default:0},linkResolution:{default:6},linkCurvature:{default:0},linkCurveRotation:{default:0},linkMaterial:{},linkThreeObject:{},linkThreeObjectExtend:{default:!1},linkPositionUpdate:{},linkDirectionalArrowLength:{default:0},linkDirectionalArrowColor:{},linkDirectionalArrowRelPos:{default:.5},linkDirectionalArrowResolution:{default:8},linkDirectionalParticles:{default:0},linkDirectionalParticleSpeed:{default:.01},linkDirectionalParticleWidth:{default:.5},linkDirectionalParticleColor:{},linkDirectionalParticleResolution:{default:4},onNodeHover:{},onNodeClick:{},onLinkHover:{},onLinkClick:{},forceEngine:{default:"d3"},d3AlphaMin:{default:0},d3AlphaDecay:{default:.0228},d3VelocityDecay:{default:.4},ngraphPhysics:{},warmupTicks:{default:0},cooldownTicks:{},cooldownTime:{default:15e3},onEngineTick:{},onEngineStop:{}},methods:z8(z8({},Object.assign.apply(Object,[{}].concat(iS(["getGraphBbox","emitParticle","d3Force","d3ReheatSimulation","refresh"].map(function(r){return uT({},r,function(e){for(var n=e.forcegraph.components.forcegraph,i=arguments.length,s=new Array(i>1?i-1:0),a=1;a<i;a++)s[a-1]=arguments[a];var o=n[r].apply(n,s);return o===n?this:o})}))))),{},{_destructor:function(){this.graphData({nodes:[],links:[]})}}),init:function(e,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=i.markerAttrs,a=s===void 0?{preset:"hiro"}:s;e.innerHTML="",n.container=document.createElement("div"),e.appendChild(n.container);var o=document.createElement("a-scene");o.setAttribute("embedded",""),o.setAttribute("vr-mode-ui","enabled: false"),o.setAttribute("arjs","debugUIEnabled: false;");var l=document.createElement("a-marker");Object.entries(a).forEach(function(h){var d=rS(h,2),f=d[0],p=d[1];return l.setAttribute(f,p)}),o.appendChild(l);var c;o.appendChild(c=document.createElement("a-entity")),c.setAttribute("cursor"),c.setAttribute("raycaster","objects: [forcegraph]"),n.forcegraph=document.createElement("a-entity"),n.forcegraph.setAttribute("forcegraph",null),l.appendChild(n.forcegraph);var u=document.createElement("a-entity");u.setAttribute("camera",""),o.appendChild(u),n.container.appendChild(o)},update:function(e,n){n.hasOwnProperty("width")&&e.width&&(e.container.style.width="".concat(e.width,"px")),n.hasOwnProperty("height")&&e.height&&(e.container.style.height="".concat(e.height,"px")),n.hasOwnProperty("glScale")&&e.forcegraph.setAttribute("scale",iS(new Array(3)).map(function(){return 1/e.glScale}).join(" ")),n.hasOwnProperty("yOffset")&&e.forcegraph.setAttribute("position","0 ".concat(e.yOffset," 0"));var i=["jsonUrl","numDimensions","dagMode","dagLevelDistance","dagNodeFilter","onDagError","nodeRelSize","nodeId","nodeVal","nodeResolution","nodeVisibility","nodeColor","nodeAutoColorBy","nodeOpacity","nodeThreeObject","nodeThreeObjectExtend","linkSource","linkTarget","linkVisibility","linkColor","linkAutoColorBy","linkOpacity","linkWidth","linkResolution","linkCurvature","linkCurveRotation","linkMaterial","linkThreeObject","linkThreeObjectExtend","linkPositionUpdate","linkDirectionalArrowLength","linkDirectionalArrowColor","linkDirectionalArrowRelPos","linkDirectionalArrowResolution","linkDirectionalParticles","linkDirectionalParticleSpeed","linkDirectionalParticleWidth","linkDirectionalParticleColor","linkDirectionalParticleResolution","onNodeHover","onNodeClick","onLinkHover","onLinkClick","forceEngine","d3AlphaMin","d3AlphaDecay","d3VelocityDecay","ngraphPhysics","warmupTicks","cooldownTicks","cooldownTime","onEngineTick","onEngineStop"],s=Object.assign.apply(Object,[{}].concat(iS(Object.entries(e).filter(function(a){var o=rS(a,2),l=o[0],c=o[1];return n.hasOwnProperty(l)&&i.indexOf(l)!==-1&&c!==void 0&&c!==null}).map(function(a){var o=rS(a,2),l=o[0],c=o[1];return uT({},l,c)})),iS(Object.entries(e.graphData).map(function(a){var o=rS(a,2),l=o[0],c=o[1];return uT({},l,c)}))));e.forcegraph.setAttribute("forcegraph",s)}});/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const pU="173",_v={ROTATE:0,PAN:2},IP={ROTATE:0,PAN:1},lne=300,$8=1e3,sS=1001,G8=1002,cne=1006,_Ae=1008,wAe=1009,SAe=1023,une="",Xl="srgb",V8="srgb-linear",H8="linear",DP="srgb",sp=2e3,L3=2001;class qM{addEventListener(e,n){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(n)===-1&&i[e].push(n)}hasEventListener(e,n){const i=this._listeners;return i===void 0?!1:i[e]!==void 0&&i[e].indexOf(n)!==-1}removeEventListener(e,n){const i=this._listeners;if(i===void 0)return;const s=i[e];if(s!==void 0){const a=s.indexOf(n);a!==-1&&s.splice(a,1)}}dispatchEvent(e){const n=this._listeners;if(n===void 0)return;const i=n[e.type];if(i!==void 0){e.target=this;const s=i.slice(0);for(let a=0,o=s.length;a<o;a++)s[a].call(this,e);e.target=null}}}const ra=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];function mU(){const r=Math.random()*4294967295|0,e=Math.random()*4294967295|0,n=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(ra[r&255]+ra[r>>8&255]+ra[r>>16&255]+ra[r>>24&255]+"-"+ra[e&255]+ra[e>>8&255]+"-"+ra[e>>16&15|64]+ra[e>>24&255]+"-"+ra[n&63|128]+ra[n>>8&255]+"-"+ra[n>>16&255]+ra[n>>24&255]+ra[i&255]+ra[i>>8&255]+ra[i>>16&255]+ra[i>>24&255]).toLowerCase()}function pr(r,e,n){return Math.max(e,Math.min(n,r))}function TAe(r,e){return(r%e+e)%e}function LP(r,e,n){return(1-n)*r+n*e}class zc{constructor(e=0,n=0){zc.prototype.isVector2=!0,this.x=e,this.y=n}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,n){return this.x=e,this.y=n,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const n=this.x,i=this.y,s=e.elements;return this.x=s[0]*n+s[3]*i+s[6],this.y=s[1]*n+s[4]*i+s[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,n){return this.x=pr(this.x,e.x,n.x),this.y=pr(this.y,e.y,n.y),this}clampScalar(e,n){return this.x=pr(this.x,e,n),this.y=pr(this.y,e,n),this}clampLength(e,n){const i=this.length();return this.divideScalar(i||1).multiplyScalar(pr(i,e,n))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const i=this.dot(e)/n;return Math.acos(pr(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,i=this.y-e.y;return n*n+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this}lerpVectors(e,n,i){return this.x=e.x+(n.x-e.x)*i,this.y=e.y+(n.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this}rotateAround(e,n){const i=Math.cos(n),s=Math.sin(n),a=this.x-e.x,o=this.y-e.y;return this.x=a*i-o*s+e.x,this.y=a*s+o*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Zd{constructor(e,n,i,s,a,o,l,c,u){Zd.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,n,i,s,a,o,l,c,u)}set(e,n,i,s,a,o,l,c,u){const h=this.elements;return h[0]=e,h[1]=s,h[2]=l,h[3]=n,h[4]=a,h[5]=c,h[6]=i,h[7]=o,h[8]=u,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const n=this.elements,i=e.elements;return n[0]=i[0],n[1]=i[1],n[2]=i[2],n[3]=i[3],n[4]=i[4],n[5]=i[5],n[6]=i[6],n[7]=i[7],n[8]=i[8],this}extractBasis(e,n,i){return e.setFromMatrix3Column(this,0),n.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const n=e.elements;return this.set(n[0],n[4],n[8],n[1],n[5],n[9],n[2],n[6],n[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const i=e.elements,s=n.elements,a=this.elements,o=i[0],l=i[3],c=i[6],u=i[1],h=i[4],d=i[7],f=i[2],p=i[5],g=i[8],v=s[0],x=s[3],_=s[6],E=s[1],S=s[4],T=s[7],M=s[2],C=s[5],A=s[8];return a[0]=o*v+l*E+c*M,a[3]=o*x+l*S+c*C,a[6]=o*_+l*T+c*A,a[1]=u*v+h*E+d*M,a[4]=u*x+h*S+d*C,a[7]=u*_+h*T+d*A,a[2]=f*v+p*E+g*M,a[5]=f*x+p*S+g*C,a[8]=f*_+p*T+g*A,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=e,n[4]*=e,n[7]*=e,n[2]*=e,n[5]*=e,n[8]*=e,this}determinant(){const e=this.elements,n=e[0],i=e[1],s=e[2],a=e[3],o=e[4],l=e[5],c=e[6],u=e[7],h=e[8];return n*o*h-n*l*u-i*a*h+i*l*c+s*a*u-s*o*c}invert(){const e=this.elements,n=e[0],i=e[1],s=e[2],a=e[3],o=e[4],l=e[5],c=e[6],u=e[7],h=e[8],d=h*o-l*u,f=l*c-h*a,p=u*a-o*c,g=n*d+i*f+s*p;if(g===0)return this.set(0,0,0,0,0,0,0,0,0);const v=1/g;return e[0]=d*v,e[1]=(s*u-h*i)*v,e[2]=(l*i-s*o)*v,e[3]=f*v,e[4]=(h*n-s*c)*v,e[5]=(s*a-l*n)*v,e[6]=p*v,e[7]=(i*c-u*n)*v,e[8]=(o*n-i*a)*v,this}transpose(){let e;const n=this.elements;return e=n[1],n[1]=n[3],n[3]=e,e=n[2],n[2]=n[6],n[6]=e,e=n[5],n[5]=n[7],n[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const n=this.elements;return e[0]=n[0],e[1]=n[3],e[2]=n[6],e[3]=n[1],e[4]=n[4],e[5]=n[7],e[6]=n[2],e[7]=n[5],e[8]=n[8],this}setUvTransform(e,n,i,s,a,o,l){const c=Math.cos(a),u=Math.sin(a);return this.set(i*c,i*u,-i*(c*o+u*l)+o+e,-s*u,s*c,-s*(-u*o+c*l)+l+n,0,0,1),this}scale(e,n){return this.premultiply(FP.makeScale(e,n)),this}rotate(e){return this.premultiply(FP.makeRotation(-e)),this}translate(e,n){return this.premultiply(FP.makeTranslation(e,n)),this}makeTranslation(e,n){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,n,0,0,1),this}makeRotation(e){const n=Math.cos(e),i=Math.sin(e);return this.set(n,-i,0,i,n,0,0,0,1),this}makeScale(e,n){return this.set(e,0,0,0,n,0,0,0,1),this}equals(e){const n=this.elements,i=e.elements;for(let s=0;s<9;s++)if(n[s]!==i[s])return!1;return!0}fromArray(e,n=0){for(let i=0;i<9;i++)this.elements[i]=e[i+n];return this}toArray(e=[],n=0){const i=this.elements;return e[n]=i[0],e[n+1]=i[1],e[n+2]=i[2],e[n+3]=i[3],e[n+4]=i[4],e[n+5]=i[5],e[n+6]=i[6],e[n+7]=i[7],e[n+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const FP=new Zd;function W8(r){return document.createElementNS("http://www.w3.org/1999/xhtml",r)}const q8=new Zd().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),X8=new Zd().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function EAe(){const r={enabled:!0,workingColorSpace:V8,spaces:{},convert:function(s,a,o){return this.enabled===!1||a===o||!a||!o||(this.spaces[a].transfer===DP&&(s.r=oh(s.r),s.g=oh(s.g),s.b=oh(s.b)),this.spaces[a].primaries!==this.spaces[o].primaries&&(s.applyMatrix3(this.spaces[a].toXYZ),s.applyMatrix3(this.spaces[o].fromXYZ)),this.spaces[o].transfer===DP&&(s.r=$g(s.r),s.g=$g(s.g),s.b=$g(s.b))),s},fromWorkingColorSpace:function(s,a){return this.convert(s,this.workingColorSpace,a)},toWorkingColorSpace:function(s,a){return this.convert(s,a,this.workingColorSpace)},getPrimaries:function(s){return this.spaces[s].primaries},getTransfer:function(s){return s===une?H8:this.spaces[s].transfer},getLuminanceCoefficients:function(s,a=this.workingColorSpace){return s.fromArray(this.spaces[a].luminanceCoefficients)},define:function(s){Object.assign(this.spaces,s)},_getMatrix:function(s,a,o){return s.copy(this.spaces[a].toXYZ).multiply(this.spaces[o].fromXYZ)},_getDrawingBufferColorSpace:function(s){return this.spaces[s].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(s=this.workingColorSpace){return this.spaces[s].workingColorSpaceConfig.unpackColorSpace}},e=[.64,.33,.3,.6,.15,.06],n=[.2126,.7152,.0722],i=[.3127,.329];return r.define({[V8]:{primaries:e,whitePoint:i,transfer:H8,toXYZ:q8,fromXYZ:X8,luminanceCoefficients:n,workingColorSpaceConfig:{unpackColorSpace:Xl},outputColorSpaceConfig:{drawingBufferColorSpace:Xl}},[Xl]:{primaries:e,whitePoint:i,transfer:DP,toXYZ:q8,fromXYZ:X8,luminanceCoefficients:n,outputColorSpaceConfig:{drawingBufferColorSpace:Xl}}}),r}const Fl=EAe();function oh(r){return r<.04045?r*.0773993808:Math.pow(r*.9478672986+.0521327014,2.4)}function $g(r){return r<.0031308?r*12.92:1.055*Math.pow(r,.41666)-.055}let Zm;class MAe{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let n;if(e instanceof HTMLCanvasElement)n=e;else{Zm===void 0&&(Zm=W8("canvas")),Zm.width=e.width,Zm.height=e.height;const i=Zm.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),n=Zm}return n.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const n=W8("canvas");n.width=e.width,n.height=e.height;const i=n.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const s=i.getImageData(0,0,e.width,e.height),a=s.data;for(let o=0;o<a.length;o++)a[o]=oh(a[o]/255)*255;return i.putImageData(s,0,0),n}else if(e.data){const n=e.data.slice(0);for(let i=0;i<n.length;i++)n instanceof Uint8Array||n instanceof Uint8ClampedArray?n[i]=Math.floor(oh(n[i]/255)*255):n[i]=oh(n[i]);return{data:n,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let AAe=0;class hne{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:AAe++}),this.uuid=mU(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},s=this.data;if(s!==null){let a;if(Array.isArray(s)){a=[];for(let o=0,l=s.length;o<l;o++)s[o].isDataTexture?a.push(BP(s[o].image)):a.push(BP(s[o]))}else a=BP(s);i.url=a}return n||(e.images[this.uuid]=i),i}}function BP(r){return typeof HTMLImageElement<"u"&&r instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&r instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&r instanceof ImageBitmap?MAe.getDataURL(r):r.data?{data:Array.from(r.data),width:r.width,height:r.height,type:r.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let CAe=0;class Rd extends qM{constructor(e=Rd.DEFAULT_IMAGE,n=Rd.DEFAULT_MAPPING,i=sS,s=sS,a=cne,o=_Ae,l=SAe,c=wAe,u=Rd.DEFAULT_ANISOTROPY,h=une){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:CAe++}),this.uuid=mU(),this.name="",this.source=new hne(e),this.mipmaps=[],this.mapping=n,this.channel=0,this.wrapS=i,this.wrapT=s,this.magFilter=a,this.minFilter=o,this.anisotropy=u,this.format=l,this.internalFormat=null,this.type=c,this.offset=new zc(0,0),this.repeat=new zc(1,1),this.center=new zc(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Zd,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=h,this.userData={},this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),n||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==lne)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case $8:e.x=e.x-Math.floor(e.x);break;case sS:e.x=e.x<0?0:1;break;case G8:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case $8:e.y=e.y-Math.floor(e.y);break;case sS:e.y=e.y<0?0:1;break;case G8:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}Rd.DEFAULT_IMAGE=null;Rd.DEFAULT_MAPPING=lne;Rd.DEFAULT_ANISOTROPY=1;class _b{constructor(e=0,n=0,i=0,s=1){_b.prototype.isVector4=!0,this.x=e,this.y=n,this.z=i,this.w=s}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,n,i,s){return this.x=e,this.y=n,this.z=i,this.w=s,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;case 3:this.w=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this.w=e.w+n.w,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this.w+=e.w*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this.w=e.w-n.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const n=this.x,i=this.y,s=this.z,a=this.w,o=e.elements;return this.x=o[0]*n+o[4]*i+o[8]*s+o[12]*a,this.y=o[1]*n+o[5]*i+o[9]*s+o[13]*a,this.z=o[2]*n+o[6]*i+o[10]*s+o[14]*a,this.w=o[3]*n+o[7]*i+o[11]*s+o[15]*a,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const n=Math.sqrt(1-e.w*e.w);return n<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/n,this.y=e.y/n,this.z=e.z/n),this}setAxisAngleFromRotationMatrix(e){let n,i,s,a;const c=e.elements,u=c[0],h=c[4],d=c[8],f=c[1],p=c[5],g=c[9],v=c[2],x=c[6],_=c[10];if(Math.abs(h-f)<.01&&Math.abs(d-v)<.01&&Math.abs(g-x)<.01){if(Math.abs(h+f)<.1&&Math.abs(d+v)<.1&&Math.abs(g+x)<.1&&Math.abs(u+p+_-3)<.1)return this.set(1,0,0,0),this;n=Math.PI;const S=(u+1)/2,T=(p+1)/2,M=(_+1)/2,C=(h+f)/4,A=(d+v)/4,P=(g+x)/4;return S>T&&S>M?S<.01?(i=0,s=.707106781,a=.707106781):(i=Math.sqrt(S),s=C/i,a=A/i):T>M?T<.01?(i=.707106781,s=0,a=.707106781):(s=Math.sqrt(T),i=C/s,a=P/s):M<.01?(i=.707106781,s=.707106781,a=0):(a=Math.sqrt(M),i=A/a,s=P/a),this.set(i,s,a,n),this}let E=Math.sqrt((x-g)*(x-g)+(d-v)*(d-v)+(f-h)*(f-h));return Math.abs(E)<.001&&(E=1),this.x=(x-g)/E,this.y=(d-v)/E,this.z=(f-h)/E,this.w=Math.acos((u+p+_-1)/2),this}setFromMatrixPosition(e){const n=e.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this.w=n[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,n){return this.x=pr(this.x,e.x,n.x),this.y=pr(this.y,e.y,n.y),this.z=pr(this.z,e.z,n.z),this.w=pr(this.w,e.w,n.w),this}clampScalar(e,n){return this.x=pr(this.x,e,n),this.y=pr(this.y,e,n),this.z=pr(this.z,e,n),this.w=pr(this.w,e,n),this}clampLength(e,n){const i=this.length();return this.divideScalar(i||1).multiplyScalar(pr(i,e,n))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this.w+=(e.w-this.w)*n,this}lerpVectors(e,n,i){return this.x=e.x+(n.x-e.x)*i,this.y=e.y+(n.y-e.y)*i,this.z=e.z+(n.z-e.z)*i,this.w=e.w+(n.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this.w=e[n+3],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e[n+3]=this.w,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this.w=e.getW(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class NAe extends qM{constructor(e=1,n=1,i={}){super(),this.isRenderTarget=!0,this.width=e,this.height=n,this.depth=1,this.scissor=new _b(0,0,e,n),this.scissorTest=!1,this.viewport=new _b(0,0,e,n);const s={width:e,height:n,depth:1};i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:cne,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},i);const a=new Rd(s,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace);a.flipY=!1,a.generateMipmaps=i.generateMipmaps,a.internalFormat=i.internalFormat,this.textures=[];const o=i.count;for(let l=0;l<o;l++)this.textures[l]=a.clone(),this.textures[l].isRenderTargetTexture=!0,this.textures[l].renderTarget=this;this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.resolveDepthBuffer=i.resolveDepthBuffer,this.resolveStencilBuffer=i.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=i.depthTexture,this.samples=i.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),e!==null&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,n,i=1){if(this.width!==e||this.height!==n||this.depth!==i){this.width=e,this.height=n,this.depth=i;for(let s=0,a=this.textures.length;s<a;s++)this.textures[s].image.width=e,this.textures[s].image.height=n,this.textures[s].image.depth=i;this.dispose()}this.viewport.set(0,0,e,n),this.scissor.set(0,0,e,n)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let i=0,s=e.textures.length;i<s;i++)this.textures[i]=e.textures[i].clone(),this.textures[i].isRenderTargetTexture=!0,this.textures[i].renderTarget=this;const n=Object.assign({},e.texture.image);return this.texture.source=new hne(n),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class PAe extends NAe{constructor(e=1,n=1,i={}){super(e,n,i),this.isWebGLRenderTarget=!0}}class k_{constructor(e=0,n=0,i=0,s=1){this.isQuaternion=!0,this._x=e,this._y=n,this._z=i,this._w=s}static slerpFlat(e,n,i,s,a,o,l){let c=i[s+0],u=i[s+1],h=i[s+2],d=i[s+3];const f=a[o+0],p=a[o+1],g=a[o+2],v=a[o+3];if(l===0){e[n+0]=c,e[n+1]=u,e[n+2]=h,e[n+3]=d;return}if(l===1){e[n+0]=f,e[n+1]=p,e[n+2]=g,e[n+3]=v;return}if(d!==v||c!==f||u!==p||h!==g){let x=1-l;const _=c*f+u*p+h*g+d*v,E=_>=0?1:-1,S=1-_*_;if(S>Number.EPSILON){const M=Math.sqrt(S),C=Math.atan2(M,_*E);x=Math.sin(x*C)/M,l=Math.sin(l*C)/M}const T=l*E;if(c=c*x+f*T,u=u*x+p*T,h=h*x+g*T,d=d*x+v*T,x===1-l){const M=1/Math.sqrt(c*c+u*u+h*h+d*d);c*=M,u*=M,h*=M,d*=M}}e[n]=c,e[n+1]=u,e[n+2]=h,e[n+3]=d}static multiplyQuaternionsFlat(e,n,i,s,a,o){const l=i[s],c=i[s+1],u=i[s+2],h=i[s+3],d=a[o],f=a[o+1],p=a[o+2],g=a[o+3];return e[n]=l*g+h*d+c*p-u*f,e[n+1]=c*g+h*f+u*d-l*p,e[n+2]=u*g+h*p+l*f-c*d,e[n+3]=h*g-l*d-c*f-u*p,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,n,i,s){return this._x=e,this._y=n,this._z=i,this._w=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,n=!0){const i=e._x,s=e._y,a=e._z,o=e._order,l=Math.cos,c=Math.sin,u=l(i/2),h=l(s/2),d=l(a/2),f=c(i/2),p=c(s/2),g=c(a/2);switch(o){case"XYZ":this._x=f*h*d+u*p*g,this._y=u*p*d-f*h*g,this._z=u*h*g+f*p*d,this._w=u*h*d-f*p*g;break;case"YXZ":this._x=f*h*d+u*p*g,this._y=u*p*d-f*h*g,this._z=u*h*g-f*p*d,this._w=u*h*d+f*p*g;break;case"ZXY":this._x=f*h*d-u*p*g,this._y=u*p*d+f*h*g,this._z=u*h*g+f*p*d,this._w=u*h*d-f*p*g;break;case"ZYX":this._x=f*h*d-u*p*g,this._y=u*p*d+f*h*g,this._z=u*h*g-f*p*d,this._w=u*h*d+f*p*g;break;case"YZX":this._x=f*h*d+u*p*g,this._y=u*p*d+f*h*g,this._z=u*h*g-f*p*d,this._w=u*h*d-f*p*g;break;case"XZY":this._x=f*h*d-u*p*g,this._y=u*p*d-f*h*g,this._z=u*h*g+f*p*d,this._w=u*h*d+f*p*g;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return n===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,n){const i=n/2,s=Math.sin(i);return this._x=e.x*s,this._y=e.y*s,this._z=e.z*s,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const n=e.elements,i=n[0],s=n[4],a=n[8],o=n[1],l=n[5],c=n[9],u=n[2],h=n[6],d=n[10],f=i+l+d;if(f>0){const p=.5/Math.sqrt(f+1);this._w=.25/p,this._x=(h-c)*p,this._y=(a-u)*p,this._z=(o-s)*p}else if(i>l&&i>d){const p=2*Math.sqrt(1+i-l-d);this._w=(h-c)/p,this._x=.25*p,this._y=(s+o)/p,this._z=(a+u)/p}else if(l>d){const p=2*Math.sqrt(1+l-i-d);this._w=(a-u)/p,this._x=(s+o)/p,this._y=.25*p,this._z=(c+h)/p}else{const p=2*Math.sqrt(1+d-i-l);this._w=(o-s)/p,this._x=(a+u)/p,this._y=(c+h)/p,this._z=.25*p}return this._onChangeCallback(),this}setFromUnitVectors(e,n){let i=e.dot(n)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*n.z-e.z*n.y,this._y=e.z*n.x-e.x*n.z,this._z=e.x*n.y-e.y*n.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(pr(this.dot(e),-1,1)))}rotateTowards(e,n){const i=this.angleTo(e);if(i===0)return this;const s=Math.min(1,n/i);return this.slerp(e,s),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,n){const i=e._x,s=e._y,a=e._z,o=e._w,l=n._x,c=n._y,u=n._z,h=n._w;return this._x=i*h+o*l+s*u-a*c,this._y=s*h+o*c+a*l-i*u,this._z=a*h+o*u+i*c-s*l,this._w=o*h-i*l-s*c-a*u,this._onChangeCallback(),this}slerp(e,n){if(n===0)return this;if(n===1)return this.copy(e);const i=this._x,s=this._y,a=this._z,o=this._w;let l=o*e._w+i*e._x+s*e._y+a*e._z;if(l<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,l=-l):this.copy(e),l>=1)return this._w=o,this._x=i,this._y=s,this._z=a,this;const c=1-l*l;if(c<=Number.EPSILON){const p=1-n;return this._w=p*o+n*this._w,this._x=p*i+n*this._x,this._y=p*s+n*this._y,this._z=p*a+n*this._z,this.normalize(),this}const u=Math.sqrt(c),h=Math.atan2(u,l),d=Math.sin((1-n)*h)/u,f=Math.sin(n*h)/u;return this._w=o*d+this._w*f,this._x=i*d+this._x*f,this._y=s*d+this._y*f,this._z=a*d+this._z*f,this._onChangeCallback(),this}slerpQuaternions(e,n,i){return this.copy(e).slerp(n,i)}random(){const e=2*Math.PI*Math.random(),n=2*Math.PI*Math.random(),i=Math.random(),s=Math.sqrt(1-i),a=Math.sqrt(i);return this.set(s*Math.sin(e),s*Math.cos(e),a*Math.sin(n),a*Math.cos(n))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,n=0){return this._x=e[n],this._y=e[n+1],this._z=e[n+2],this._w=e[n+3],this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._w,e}fromBufferAttribute(e,n){return this._x=e.getX(n),this._y=e.getY(n),this._z=e.getZ(n),this._w=e.getW(n),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Qt{constructor(e=0,n=0,i=0){Qt.prototype.isVector3=!0,this.x=e,this.y=n,this.z=i}set(e,n,i){return i===void 0&&(i=this.z),this.x=e,this.y=n,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,n){return this.x=e.x*n.x,this.y=e.y*n.y,this.z=e.z*n.z,this}applyEuler(e){return this.applyQuaternion(K8.setFromEuler(e))}applyAxisAngle(e,n){return this.applyQuaternion(K8.setFromAxisAngle(e,n))}applyMatrix3(e){const n=this.x,i=this.y,s=this.z,a=e.elements;return this.x=a[0]*n+a[3]*i+a[6]*s,this.y=a[1]*n+a[4]*i+a[7]*s,this.z=a[2]*n+a[5]*i+a[8]*s,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const n=this.x,i=this.y,s=this.z,a=e.elements,o=1/(a[3]*n+a[7]*i+a[11]*s+a[15]);return this.x=(a[0]*n+a[4]*i+a[8]*s+a[12])*o,this.y=(a[1]*n+a[5]*i+a[9]*s+a[13])*o,this.z=(a[2]*n+a[6]*i+a[10]*s+a[14])*o,this}applyQuaternion(e){const n=this.x,i=this.y,s=this.z,a=e.x,o=e.y,l=e.z,c=e.w,u=2*(o*s-l*i),h=2*(l*n-a*s),d=2*(a*i-o*n);return this.x=n+c*u+o*d-l*h,this.y=i+c*h+l*u-a*d,this.z=s+c*d+a*h-o*u,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const n=this.x,i=this.y,s=this.z,a=e.elements;return this.x=a[0]*n+a[4]*i+a[8]*s,this.y=a[1]*n+a[5]*i+a[9]*s,this.z=a[2]*n+a[6]*i+a[10]*s,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,n){return this.x=pr(this.x,e.x,n.x),this.y=pr(this.y,e.y,n.y),this.z=pr(this.z,e.z,n.z),this}clampScalar(e,n){return this.x=pr(this.x,e,n),this.y=pr(this.y,e,n),this.z=pr(this.z,e,n),this}clampLength(e,n){const i=this.length();return this.divideScalar(i||1).multiplyScalar(pr(i,e,n))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this}lerpVectors(e,n,i){return this.x=e.x+(n.x-e.x)*i,this.y=e.y+(n.y-e.y)*i,this.z=e.z+(n.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,n){const i=e.x,s=e.y,a=e.z,o=n.x,l=n.y,c=n.z;return this.x=s*c-a*l,this.y=a*o-i*c,this.z=i*l-s*o,this}projectOnVector(e){const n=e.lengthSq();if(n===0)return this.set(0,0,0);const i=e.dot(this)/n;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return jP.copy(this).projectOnVector(e),this.sub(jP)}reflect(e){return this.sub(jP.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const i=this.dot(e)/n;return Math.acos(pr(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,i=this.y-e.y,s=this.z-e.z;return n*n+i*i+s*s}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,n,i){const s=Math.sin(n)*e;return this.x=s*Math.sin(i),this.y=Math.cos(n)*e,this.z=s*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,n,i){return this.x=e*Math.sin(n),this.y=i,this.z=e*Math.cos(n),this}setFromMatrixPosition(e){const n=e.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this}setFromMatrixScale(e){const n=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),s=this.setFromMatrixColumn(e,2).length();return this.x=n,this.y=i,this.z=s,this}setFromMatrixColumn(e,n){return this.fromArray(e.elements,n*4)}setFromMatrix3Column(e,n){return this.fromArray(e.elements,n*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,n=Math.random()*2-1,i=Math.sqrt(1-n*n);return this.x=i*Math.cos(e),this.y=n,this.z=i*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const jP=new Qt,K8=new k_;class dne{constructor(e=new Qt(1/0,1/0,1/0),n=new Qt(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromArray(e){this.makeEmpty();for(let n=0,i=e.length;n<i;n+=3)this.expandByPoint(Bl.fromArray(e,n));return this}setFromBufferAttribute(e){this.makeEmpty();for(let n=0,i=e.count;n<i;n++)this.expandByPoint(Bl.fromBufferAttribute(e,n));return this}setFromPoints(e){this.makeEmpty();for(let n=0,i=e.length;n<i;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const i=Bl.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,n=!1){return this.makeEmpty(),this.expandByObject(e,n)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,n=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(i!==void 0){const a=i.getAttribute("position");if(n===!0&&a!==void 0&&e.isInstancedMesh!==!0)for(let o=0,l=a.count;o<l;o++)e.isMesh===!0?e.getVertexPosition(o,Bl):Bl.fromBufferAttribute(a,o),Bl.applyMatrix4(e.matrixWorld),this.expandByPoint(Bl);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),aS.copy(e.boundingBox)):(i.boundingBox===null&&i.computeBoundingBox(),aS.copy(i.boundingBox)),aS.applyMatrix4(e.matrixWorld),this.union(aS)}const s=e.children;for(let a=0,o=s.length;a<o;a++)this.expandByObject(s[a],n);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,Bl),Bl.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let n,i;return e.normal.x>0?(n=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(n=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(n+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(n+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(n+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(n+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),n<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(wv),oS.subVectors(this.max,wv),Qm.subVectors(e.a,wv),Jm.subVectors(e.b,wv),eg.subVectors(e.c,wv),ad.subVectors(Jm,Qm),od.subVectors(eg,Jm),Df.subVectors(Qm,eg);let n=[0,-ad.z,ad.y,0,-od.z,od.y,0,-Df.z,Df.y,ad.z,0,-ad.x,od.z,0,-od.x,Df.z,0,-Df.x,-ad.y,ad.x,0,-od.y,od.x,0,-Df.y,Df.x,0];return!UP(n,Qm,Jm,eg,oS)||(n=[1,0,0,0,1,0,0,0,1],!UP(n,Qm,Jm,eg,oS))?!1:(lS.crossVectors(ad,od),n=[lS.x,lS.y,lS.z],UP(n,Qm,Jm,eg,oS))}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Bl).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Bl).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Ou[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Ou[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Ou[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Ou[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Ou[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Ou[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Ou[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Ou[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Ou),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Ou=[new Qt,new Qt,new Qt,new Qt,new Qt,new Qt,new Qt,new Qt],Bl=new Qt,aS=new dne,Qm=new Qt,Jm=new Qt,eg=new Qt,ad=new Qt,od=new Qt,Df=new Qt,wv=new Qt,oS=new Qt,lS=new Qt,Lf=new Qt;function UP(r,e,n,i,s){for(let a=0,o=r.length-3;a<=o;a+=3){Lf.fromArray(r,a);const l=s.x*Math.abs(Lf.x)+s.y*Math.abs(Lf.y)+s.z*Math.abs(Lf.z),c=e.dot(Lf),u=n.dot(Lf),h=i.dot(Lf);if(Math.max(-Math.max(c,u,h),Math.min(c,u,h))>l)return!1}return!0}const RAe=new dne,Sv=new Qt,zP=new Qt;class OAe{constructor(e=new Qt,n=-1){this.isSphere=!0,this.center=e,this.radius=n}set(e,n){return this.center.copy(e),this.radius=n,this}setFromPoints(e,n){const i=this.center;n!==void 0?i.copy(n):RAe.setFromPoints(e).getCenter(i);let s=0;for(let a=0,o=e.length;a<o;a++)s=Math.max(s,i.distanceToSquared(e[a]));return this.radius=Math.sqrt(s),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const n=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=n*n}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,n){const i=this.center.distanceToSquared(e);return n.copy(e),i>this.radius*this.radius&&(n.sub(this.center).normalize(),n.multiplyScalar(this.radius).add(this.center)),n}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Sv.subVectors(e,this.center);const n=Sv.lengthSq();if(n>this.radius*this.radius){const i=Math.sqrt(n),s=(i-this.radius)*.5;this.center.addScaledVector(Sv,s/i),this.radius+=s}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(zP.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Sv.copy(e.center).add(zP)),this.expandByPoint(Sv.copy(e.center).sub(zP))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const ku=new Qt,$P=new Qt,cS=new Qt,ld=new Qt,GP=new Qt,uS=new Qt,VP=new Qt;class kAe{constructor(e=new Qt,n=new Qt(0,0,-1)){this.origin=e,this.direction=n}set(e,n){return this.origin.copy(e),this.direction.copy(n),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,n){return n.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,ku)),this}closestPointToPoint(e,n){n.subVectors(e,this.origin);const i=n.dot(this.direction);return i<0?n.copy(this.origin):n.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const n=ku.subVectors(e,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(e):(ku.copy(this.origin).addScaledVector(this.direction,n),ku.distanceToSquared(e))}distanceSqToSegment(e,n,i,s){$P.copy(e).add(n).multiplyScalar(.5),cS.copy(n).sub(e).normalize(),ld.copy(this.origin).sub($P);const a=e.distanceTo(n)*.5,o=-this.direction.dot(cS),l=ld.dot(this.direction),c=-ld.dot(cS),u=ld.lengthSq(),h=Math.abs(1-o*o);let d,f,p,g;if(h>0)if(d=o*c-l,f=o*l-c,g=a*h,d>=0)if(f>=-g)if(f<=g){const v=1/h;d*=v,f*=v,p=d*(d+o*f+2*l)+f*(o*d+f+2*c)+u}else f=a,d=Math.max(0,-(o*f+l)),p=-d*d+f*(f+2*c)+u;else f=-a,d=Math.max(0,-(o*f+l)),p=-d*d+f*(f+2*c)+u;else f<=-g?(d=Math.max(0,-(-o*a+l)),f=d>0?-a:Math.min(Math.max(-a,-c),a),p=-d*d+f*(f+2*c)+u):f<=g?(d=0,f=Math.min(Math.max(-a,-c),a),p=f*(f+2*c)+u):(d=Math.max(0,-(o*a+l)),f=d>0?a:Math.min(Math.max(-a,-c),a),p=-d*d+f*(f+2*c)+u);else f=o>0?-a:a,d=Math.max(0,-(o*f+l)),p=-d*d+f*(f+2*c)+u;return i&&i.copy(this.origin).addScaledVector(this.direction,d),s&&s.copy($P).addScaledVector(cS,f),p}intersectSphere(e,n){ku.subVectors(e.center,this.origin);const i=ku.dot(this.direction),s=ku.dot(ku)-i*i,a=e.radius*e.radius;if(s>a)return null;const o=Math.sqrt(a-s),l=i-o,c=i+o;return c<0?null:l<0?this.at(c,n):this.at(l,n)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const n=e.normal.dot(this.direction);if(n===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/n;return i>=0?i:null}intersectPlane(e,n){const i=this.distanceToPlane(e);return i===null?null:this.at(i,n)}intersectsPlane(e){const n=e.distanceToPoint(this.origin);return n===0||e.normal.dot(this.direction)*n<0}intersectBox(e,n){let i,s,a,o,l,c;const u=1/this.direction.x,h=1/this.direction.y,d=1/this.direction.z,f=this.origin;return u>=0?(i=(e.min.x-f.x)*u,s=(e.max.x-f.x)*u):(i=(e.max.x-f.x)*u,s=(e.min.x-f.x)*u),h>=0?(a=(e.min.y-f.y)*h,o=(e.max.y-f.y)*h):(a=(e.max.y-f.y)*h,o=(e.min.y-f.y)*h),i>o||a>s||((a>i||isNaN(i))&&(i=a),(o<s||isNaN(s))&&(s=o),d>=0?(l=(e.min.z-f.z)*d,c=(e.max.z-f.z)*d):(l=(e.max.z-f.z)*d,c=(e.min.z-f.z)*d),i>c||l>s)||((l>i||i!==i)&&(i=l),(c<s||s!==s)&&(s=c),s<0)?null:this.at(i>=0?i:s,n)}intersectsBox(e){return this.intersectBox(e,ku)!==null}intersectTriangle(e,n,i,s,a){GP.subVectors(n,e),uS.subVectors(i,e),VP.crossVectors(GP,uS);let o=this.direction.dot(VP),l;if(o>0){if(s)return null;l=1}else if(o<0)l=-1,o=-o;else return null;ld.subVectors(this.origin,e);const c=l*this.direction.dot(uS.crossVectors(ld,uS));if(c<0)return null;const u=l*this.direction.dot(GP.cross(ld));if(u<0||c+u>o)return null;const h=-l*ld.dot(VP);return h<0?null:this.at(h/o,a)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class fa{constructor(e,n,i,s,a,o,l,c,u,h,d,f,p,g,v,x){fa.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,n,i,s,a,o,l,c,u,h,d,f,p,g,v,x)}set(e,n,i,s,a,o,l,c,u,h,d,f,p,g,v,x){const _=this.elements;return _[0]=e,_[4]=n,_[8]=i,_[12]=s,_[1]=a,_[5]=o,_[9]=l,_[13]=c,_[2]=u,_[6]=h,_[10]=d,_[14]=f,_[3]=p,_[7]=g,_[11]=v,_[15]=x,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new fa().fromArray(this.elements)}copy(e){const n=this.elements,i=e.elements;return n[0]=i[0],n[1]=i[1],n[2]=i[2],n[3]=i[3],n[4]=i[4],n[5]=i[5],n[6]=i[6],n[7]=i[7],n[8]=i[8],n[9]=i[9],n[10]=i[10],n[11]=i[11],n[12]=i[12],n[13]=i[13],n[14]=i[14],n[15]=i[15],this}copyPosition(e){const n=this.elements,i=e.elements;return n[12]=i[12],n[13]=i[13],n[14]=i[14],this}setFromMatrix3(e){const n=e.elements;return this.set(n[0],n[3],n[6],0,n[1],n[4],n[7],0,n[2],n[5],n[8],0,0,0,0,1),this}extractBasis(e,n,i){return e.setFromMatrixColumn(this,0),n.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,n,i){return this.set(e.x,n.x,i.x,0,e.y,n.y,i.y,0,e.z,n.z,i.z,0,0,0,0,1),this}extractRotation(e){const n=this.elements,i=e.elements,s=1/tg.setFromMatrixColumn(e,0).length(),a=1/tg.setFromMatrixColumn(e,1).length(),o=1/tg.setFromMatrixColumn(e,2).length();return n[0]=i[0]*s,n[1]=i[1]*s,n[2]=i[2]*s,n[3]=0,n[4]=i[4]*a,n[5]=i[5]*a,n[6]=i[6]*a,n[7]=0,n[8]=i[8]*o,n[9]=i[9]*o,n[10]=i[10]*o,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromEuler(e){const n=this.elements,i=e.x,s=e.y,a=e.z,o=Math.cos(i),l=Math.sin(i),c=Math.cos(s),u=Math.sin(s),h=Math.cos(a),d=Math.sin(a);if(e.order==="XYZ"){const f=o*h,p=o*d,g=l*h,v=l*d;n[0]=c*h,n[4]=-c*d,n[8]=u,n[1]=p+g*u,n[5]=f-v*u,n[9]=-l*c,n[2]=v-f*u,n[6]=g+p*u,n[10]=o*c}else if(e.order==="YXZ"){const f=c*h,p=c*d,g=u*h,v=u*d;n[0]=f+v*l,n[4]=g*l-p,n[8]=o*u,n[1]=o*d,n[5]=o*h,n[9]=-l,n[2]=p*l-g,n[6]=v+f*l,n[10]=o*c}else if(e.order==="ZXY"){const f=c*h,p=c*d,g=u*h,v=u*d;n[0]=f-v*l,n[4]=-o*d,n[8]=g+p*l,n[1]=p+g*l,n[5]=o*h,n[9]=v-f*l,n[2]=-o*u,n[6]=l,n[10]=o*c}else if(e.order==="ZYX"){const f=o*h,p=o*d,g=l*h,v=l*d;n[0]=c*h,n[4]=g*u-p,n[8]=f*u+v,n[1]=c*d,n[5]=v*u+f,n[9]=p*u-g,n[2]=-u,n[6]=l*c,n[10]=o*c}else if(e.order==="YZX"){const f=o*c,p=o*u,g=l*c,v=l*u;n[0]=c*h,n[4]=v-f*d,n[8]=g*d+p,n[1]=d,n[5]=o*h,n[9]=-l*h,n[2]=-u*h,n[6]=p*d+g,n[10]=f-v*d}else if(e.order==="XZY"){const f=o*c,p=o*u,g=l*c,v=l*u;n[0]=c*h,n[4]=-d,n[8]=u*h,n[1]=f*d+v,n[5]=o*h,n[9]=p*d-g,n[2]=g*d-p,n[6]=l*h,n[10]=v*d+f}return n[3]=0,n[7]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromQuaternion(e){return this.compose(IAe,e,DAe)}lookAt(e,n,i){const s=this.elements;return _o.subVectors(e,n),_o.lengthSq()===0&&(_o.z=1),_o.normalize(),cd.crossVectors(i,_o),cd.lengthSq()===0&&(Math.abs(i.z)===1?_o.x+=1e-4:_o.z+=1e-4,_o.normalize(),cd.crossVectors(i,_o)),cd.normalize(),hS.crossVectors(_o,cd),s[0]=cd.x,s[4]=hS.x,s[8]=_o.x,s[1]=cd.y,s[5]=hS.y,s[9]=_o.y,s[2]=cd.z,s[6]=hS.z,s[10]=_o.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const i=e.elements,s=n.elements,a=this.elements,o=i[0],l=i[4],c=i[8],u=i[12],h=i[1],d=i[5],f=i[9],p=i[13],g=i[2],v=i[6],x=i[10],_=i[14],E=i[3],S=i[7],T=i[11],M=i[15],C=s[0],A=s[4],P=s[8],R=s[12],O=s[1],D=s[5],F=s[9],U=s[13],B=s[2],W=s[6],j=s[10],$=s[14],z=s[3],Z=s[7],se=s[11],q=s[15];return a[0]=o*C+l*O+c*B+u*z,a[4]=o*A+l*D+c*W+u*Z,a[8]=o*P+l*F+c*j+u*se,a[12]=o*R+l*U+c*$+u*q,a[1]=h*C+d*O+f*B+p*z,a[5]=h*A+d*D+f*W+p*Z,a[9]=h*P+d*F+f*j+p*se,a[13]=h*R+d*U+f*$+p*q,a[2]=g*C+v*O+x*B+_*z,a[6]=g*A+v*D+x*W+_*Z,a[10]=g*P+v*F+x*j+_*se,a[14]=g*R+v*U+x*$+_*q,a[3]=E*C+S*O+T*B+M*z,a[7]=E*A+S*D+T*W+M*Z,a[11]=E*P+S*F+T*j+M*se,a[15]=E*R+S*U+T*$+M*q,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[4]*=e,n[8]*=e,n[12]*=e,n[1]*=e,n[5]*=e,n[9]*=e,n[13]*=e,n[2]*=e,n[6]*=e,n[10]*=e,n[14]*=e,n[3]*=e,n[7]*=e,n[11]*=e,n[15]*=e,this}determinant(){const e=this.elements,n=e[0],i=e[4],s=e[8],a=e[12],o=e[1],l=e[5],c=e[9],u=e[13],h=e[2],d=e[6],f=e[10],p=e[14],g=e[3],v=e[7],x=e[11],_=e[15];return g*(+a*c*d-s*u*d-a*l*f+i*u*f+s*l*p-i*c*p)+v*(+n*c*p-n*u*f+a*o*f-s*o*p+s*u*h-a*c*h)+x*(+n*u*d-n*l*p-a*o*d+i*o*p+a*l*h-i*u*h)+_*(-s*l*h-n*c*d+n*l*f+s*o*d-i*o*f+i*c*h)}transpose(){const e=this.elements;let n;return n=e[1],e[1]=e[4],e[4]=n,n=e[2],e[2]=e[8],e[8]=n,n=e[6],e[6]=e[9],e[9]=n,n=e[3],e[3]=e[12],e[12]=n,n=e[7],e[7]=e[13],e[13]=n,n=e[11],e[11]=e[14],e[14]=n,this}setPosition(e,n,i){const s=this.elements;return e.isVector3?(s[12]=e.x,s[13]=e.y,s[14]=e.z):(s[12]=e,s[13]=n,s[14]=i),this}invert(){const e=this.elements,n=e[0],i=e[1],s=e[2],a=e[3],o=e[4],l=e[5],c=e[6],u=e[7],h=e[8],d=e[9],f=e[10],p=e[11],g=e[12],v=e[13],x=e[14],_=e[15],E=d*x*u-v*f*u+v*c*p-l*x*p-d*c*_+l*f*_,S=g*f*u-h*x*u-g*c*p+o*x*p+h*c*_-o*f*_,T=h*v*u-g*d*u+g*l*p-o*v*p-h*l*_+o*d*_,M=g*d*c-h*v*c-g*l*f+o*v*f+h*l*x-o*d*x,C=n*E+i*S+s*T+a*M;if(C===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const A=1/C;return e[0]=E*A,e[1]=(v*f*a-d*x*a-v*s*p+i*x*p+d*s*_-i*f*_)*A,e[2]=(l*x*a-v*c*a+v*s*u-i*x*u-l*s*_+i*c*_)*A,e[3]=(d*c*a-l*f*a-d*s*u+i*f*u+l*s*p-i*c*p)*A,e[4]=S*A,e[5]=(h*x*a-g*f*a+g*s*p-n*x*p-h*s*_+n*f*_)*A,e[6]=(g*c*a-o*x*a-g*s*u+n*x*u+o*s*_-n*c*_)*A,e[7]=(o*f*a-h*c*a+h*s*u-n*f*u-o*s*p+n*c*p)*A,e[8]=T*A,e[9]=(g*d*a-h*v*a-g*i*p+n*v*p+h*i*_-n*d*_)*A,e[10]=(o*v*a-g*l*a+g*i*u-n*v*u-o*i*_+n*l*_)*A,e[11]=(h*l*a-o*d*a-h*i*u+n*d*u+o*i*p-n*l*p)*A,e[12]=M*A,e[13]=(h*v*s-g*d*s+g*i*f-n*v*f-h*i*x+n*d*x)*A,e[14]=(g*l*s-o*v*s-g*i*c+n*v*c+o*i*x-n*l*x)*A,e[15]=(o*d*s-h*l*s+h*i*c-n*d*c-o*i*f+n*l*f)*A,this}scale(e){const n=this.elements,i=e.x,s=e.y,a=e.z;return n[0]*=i,n[4]*=s,n[8]*=a,n[1]*=i,n[5]*=s,n[9]*=a,n[2]*=i,n[6]*=s,n[10]*=a,n[3]*=i,n[7]*=s,n[11]*=a,this}getMaxScaleOnAxis(){const e=this.elements,n=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],s=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(n,i,s))}makeTranslation(e,n,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,n,0,0,1,i,0,0,0,1),this}makeRotationX(e){const n=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,n,-i,0,0,i,n,0,0,0,0,1),this}makeRotationY(e){const n=Math.cos(e),i=Math.sin(e);return this.set(n,0,i,0,0,1,0,0,-i,0,n,0,0,0,0,1),this}makeRotationZ(e){const n=Math.cos(e),i=Math.sin(e);return this.set(n,-i,0,0,i,n,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,n){const i=Math.cos(n),s=Math.sin(n),a=1-i,o=e.x,l=e.y,c=e.z,u=a*o,h=a*l;return this.set(u*o+i,u*l-s*c,u*c+s*l,0,u*l+s*c,h*l+i,h*c-s*o,0,u*c-s*l,h*c+s*o,a*c*c+i,0,0,0,0,1),this}makeScale(e,n,i){return this.set(e,0,0,0,0,n,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,n,i,s,a,o){return this.set(1,i,a,0,e,1,o,0,n,s,1,0,0,0,0,1),this}compose(e,n,i){const s=this.elements,a=n._x,o=n._y,l=n._z,c=n._w,u=a+a,h=o+o,d=l+l,f=a*u,p=a*h,g=a*d,v=o*h,x=o*d,_=l*d,E=c*u,S=c*h,T=c*d,M=i.x,C=i.y,A=i.z;return s[0]=(1-(v+_))*M,s[1]=(p+T)*M,s[2]=(g-S)*M,s[3]=0,s[4]=(p-T)*C,s[5]=(1-(f+_))*C,s[6]=(x+E)*C,s[7]=0,s[8]=(g+S)*A,s[9]=(x-E)*A,s[10]=(1-(f+v))*A,s[11]=0,s[12]=e.x,s[13]=e.y,s[14]=e.z,s[15]=1,this}decompose(e,n,i){const s=this.elements;let a=tg.set(s[0],s[1],s[2]).length();const o=tg.set(s[4],s[5],s[6]).length(),l=tg.set(s[8],s[9],s[10]).length();this.determinant()<0&&(a=-a),e.x=s[12],e.y=s[13],e.z=s[14],jl.copy(this);const u=1/a,h=1/o,d=1/l;return jl.elements[0]*=u,jl.elements[1]*=u,jl.elements[2]*=u,jl.elements[4]*=h,jl.elements[5]*=h,jl.elements[6]*=h,jl.elements[8]*=d,jl.elements[9]*=d,jl.elements[10]*=d,n.setFromRotationMatrix(jl),i.x=a,i.y=o,i.z=l,this}makePerspective(e,n,i,s,a,o,l=sp){const c=this.elements,u=2*a/(n-e),h=2*a/(i-s),d=(n+e)/(n-e),f=(i+s)/(i-s);let p,g;if(l===sp)p=-(o+a)/(o-a),g=-2*o*a/(o-a);else if(l===L3)p=-o/(o-a),g=-o*a/(o-a);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+l);return c[0]=u,c[4]=0,c[8]=d,c[12]=0,c[1]=0,c[5]=h,c[9]=f,c[13]=0,c[2]=0,c[6]=0,c[10]=p,c[14]=g,c[3]=0,c[7]=0,c[11]=-1,c[15]=0,this}makeOrthographic(e,n,i,s,a,o,l=sp){const c=this.elements,u=1/(n-e),h=1/(i-s),d=1/(o-a),f=(n+e)*u,p=(i+s)*h;let g,v;if(l===sp)g=(o+a)*d,v=-2*d;else if(l===L3)g=a*d,v=-1*d;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+l);return c[0]=2*u,c[4]=0,c[8]=0,c[12]=-f,c[1]=0,c[5]=2*h,c[9]=0,c[13]=-p,c[2]=0,c[6]=0,c[10]=v,c[14]=-g,c[3]=0,c[7]=0,c[11]=0,c[15]=1,this}equals(e){const n=this.elements,i=e.elements;for(let s=0;s<16;s++)if(n[s]!==i[s])return!1;return!0}fromArray(e,n=0){for(let i=0;i<16;i++)this.elements[i]=e[i+n];return this}toArray(e=[],n=0){const i=this.elements;return e[n]=i[0],e[n+1]=i[1],e[n+2]=i[2],e[n+3]=i[3],e[n+4]=i[4],e[n+5]=i[5],e[n+6]=i[6],e[n+7]=i[7],e[n+8]=i[8],e[n+9]=i[9],e[n+10]=i[10],e[n+11]=i[11],e[n+12]=i[12],e[n+13]=i[13],e[n+14]=i[14],e[n+15]=i[15],e}}const tg=new Qt,jl=new fa,IAe=new Qt(0,0,0),DAe=new Qt(1,1,1),cd=new Qt,hS=new Qt,_o=new Qt,Y8=new fa,Z8=new k_;class XM{constructor(e=0,n=0,i=0,s=XM.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=n,this._z=i,this._order=s}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,n,i,s=this._order){return this._x=e,this._y=n,this._z=i,this._order=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,n=this._order,i=!0){const s=e.elements,a=s[0],o=s[4],l=s[8],c=s[1],u=s[5],h=s[9],d=s[2],f=s[6],p=s[10];switch(n){case"XYZ":this._y=Math.asin(pr(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-h,p),this._z=Math.atan2(-o,a)):(this._x=Math.atan2(f,u),this._z=0);break;case"YXZ":this._x=Math.asin(-pr(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(l,p),this._z=Math.atan2(c,u)):(this._y=Math.atan2(-d,a),this._z=0);break;case"ZXY":this._x=Math.asin(pr(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(-d,p),this._z=Math.atan2(-o,u)):(this._y=0,this._z=Math.atan2(c,a));break;case"ZYX":this._y=Math.asin(-pr(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(f,p),this._z=Math.atan2(c,a)):(this._x=0,this._z=Math.atan2(-o,u));break;case"YZX":this._z=Math.asin(pr(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-h,u),this._y=Math.atan2(-d,a)):(this._x=0,this._y=Math.atan2(l,p));break;case"XZY":this._z=Math.asin(-pr(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(f,u),this._y=Math.atan2(l,a)):(this._x=Math.atan2(-h,p),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+n)}return this._order=n,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,n,i){return Y8.makeRotationFromQuaternion(e),this.setFromRotationMatrix(Y8,n,i)}setFromVector3(e,n=this._order){return this.set(e.x,e.y,e.z,n)}reorder(e){return Z8.setFromEuler(this),this.setFromQuaternion(Z8,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}XM.DEFAULT_ORDER="XYZ";class fne{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let LAe=0;const Q8=new Qt,ng=new k_,Iu=new fa,dS=new Qt,Tv=new Qt,FAe=new Qt,BAe=new k_,J8=new Qt(1,0,0),eH=new Qt(0,1,0),tH=new Qt(0,0,1),nH={type:"added"},jAe={type:"removed"},rg={type:"childadded",child:null},HP={type:"childremoved",child:null};class sc extends qM{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:LAe++}),this.uuid=mU(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=sc.DEFAULT_UP.clone();const e=new Qt,n=new XM,i=new k_,s=new Qt(1,1,1);function a(){i.setFromEuler(n,!1)}function o(){n.setFromQuaternion(i,void 0,!1)}n._onChange(a),i._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:n},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:s},modelViewMatrix:{value:new fa},normalMatrix:{value:new Zd}}),this.matrix=new fa,this.matrixWorld=new fa,this.matrixAutoUpdate=sc.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=sc.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new fne,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,n){this.quaternion.setFromAxisAngle(e,n)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,n){return ng.setFromAxisAngle(e,n),this.quaternion.multiply(ng),this}rotateOnWorldAxis(e,n){return ng.setFromAxisAngle(e,n),this.quaternion.premultiply(ng),this}rotateX(e){return this.rotateOnAxis(J8,e)}rotateY(e){return this.rotateOnAxis(eH,e)}rotateZ(e){return this.rotateOnAxis(tH,e)}translateOnAxis(e,n){return Q8.copy(e).applyQuaternion(this.quaternion),this.position.add(Q8.multiplyScalar(n)),this}translateX(e){return this.translateOnAxis(J8,e)}translateY(e){return this.translateOnAxis(eH,e)}translateZ(e){return this.translateOnAxis(tH,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Iu.copy(this.matrixWorld).invert())}lookAt(e,n,i){e.isVector3?dS.copy(e):dS.set(e,n,i);const s=this.parent;this.updateWorldMatrix(!0,!1),Tv.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Iu.lookAt(Tv,dS,this.up):Iu.lookAt(dS,Tv,this.up),this.quaternion.setFromRotationMatrix(Iu),s&&(Iu.extractRotation(s.matrixWorld),ng.setFromRotationMatrix(Iu),this.quaternion.premultiply(ng.invert()))}add(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.add(arguments[n]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(nH),rg.child=e,this.dispatchEvent(rg),rg.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const n=this.children.indexOf(e);return n!==-1&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent(jAe),HP.child=e,this.dispatchEvent(HP),HP.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Iu.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Iu.multiply(e.parent.matrixWorld)),e.applyMatrix4(Iu),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(nH),rg.child=e,this.dispatchEvent(rg),rg.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,n){if(this[e]===n)return this;for(let i=0,s=this.children.length;i<s;i++){const o=this.children[i].getObjectByProperty(e,n);if(o!==void 0)return o}}getObjectsByProperty(e,n,i=[]){this[e]===n&&i.push(this);const s=this.children;for(let a=0,o=s.length;a<o;a++)s[a].getObjectsByProperty(e,n,i);return i}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Tv,e,FAe),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Tv,BAe,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const n=this.matrixWorld.elements;return e.set(n[8],n[9],n[10]).normalize()}raycast(){}traverse(e){e(this);const n=this.children;for(let i=0,s=n.length;i<s;i++)n[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const n=this.children;for(let i=0,s=n.length;i<s;i++)n[i].traverseVisible(e)}traverseAncestors(e){const n=this.parent;n!==null&&(e(n),n.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const n=this.children;for(let i=0,s=n.length;i<s;i++)n[i].updateMatrixWorld(e)}updateWorldMatrix(e,n){const i=this.parent;if(e===!0&&i!==null&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),n===!0){const s=this.children;for(let a=0,o=s.length;a<o;a++)s[a].updateWorldMatrix(!1,!0)}}toJSON(e){const n=e===void 0||typeof e=="string",i={};n&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const s={};s.uuid=this.uuid,s.type=this.type,this.name!==""&&(s.name=this.name),this.castShadow===!0&&(s.castShadow=!0),this.receiveShadow===!0&&(s.receiveShadow=!0),this.visible===!1&&(s.visible=!1),this.frustumCulled===!1&&(s.frustumCulled=!1),this.renderOrder!==0&&(s.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(s.userData=this.userData),s.layers=this.layers.mask,s.matrix=this.matrix.toArray(),s.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(s.matrixAutoUpdate=!1),this.isInstancedMesh&&(s.type="InstancedMesh",s.count=this.count,s.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(s.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(s.type="BatchedMesh",s.perObjectFrustumCulled=this.perObjectFrustumCulled,s.sortObjects=this.sortObjects,s.drawRanges=this._drawRanges,s.reservedRanges=this._reservedRanges,s.visibility=this._visibility,s.active=this._active,s.bounds=this._bounds.map(l=>({boxInitialized:l.boxInitialized,boxMin:l.box.min.toArray(),boxMax:l.box.max.toArray(),sphereInitialized:l.sphereInitialized,sphereRadius:l.sphere.radius,sphereCenter:l.sphere.center.toArray()})),s.maxInstanceCount=this._maxInstanceCount,s.maxVertexCount=this._maxVertexCount,s.maxIndexCount=this._maxIndexCount,s.geometryInitialized=this._geometryInitialized,s.geometryCount=this._geometryCount,s.matricesTexture=this._matricesTexture.toJSON(e),this._colorsTexture!==null&&(s.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(s.boundingSphere={center:s.boundingSphere.center.toArray(),radius:s.boundingSphere.radius}),this.boundingBox!==null&&(s.boundingBox={min:s.boundingBox.min.toArray(),max:s.boundingBox.max.toArray()}));function a(l,c){return l[c.uuid]===void 0&&(l[c.uuid]=c.toJSON(e)),c.uuid}if(this.isScene)this.background&&(this.background.isColor?s.background=this.background.toJSON():this.background.isTexture&&(s.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(s.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){s.geometry=a(e.geometries,this.geometry);const l=this.geometry.parameters;if(l!==void 0&&l.shapes!==void 0){const c=l.shapes;if(Array.isArray(c))for(let u=0,h=c.length;u<h;u++){const d=c[u];a(e.shapes,d)}else a(e.shapes,c)}}if(this.isSkinnedMesh&&(s.bindMode=this.bindMode,s.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(a(e.skeletons,this.skeleton),s.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const l=[];for(let c=0,u=this.material.length;c<u;c++)l.push(a(e.materials,this.material[c]));s.material=l}else s.material=a(e.materials,this.material);if(this.children.length>0){s.children=[];for(let l=0;l<this.children.length;l++)s.children.push(this.children[l].toJSON(e).object)}if(this.animations.length>0){s.animations=[];for(let l=0;l<this.animations.length;l++){const c=this.animations[l];s.animations.push(a(e.animations,c))}}if(n){const l=o(e.geometries),c=o(e.materials),u=o(e.textures),h=o(e.images),d=o(e.shapes),f=o(e.skeletons),p=o(e.animations),g=o(e.nodes);l.length>0&&(i.geometries=l),c.length>0&&(i.materials=c),u.length>0&&(i.textures=u),h.length>0&&(i.images=h),d.length>0&&(i.shapes=d),f.length>0&&(i.skeletons=f),p.length>0&&(i.animations=p),g.length>0&&(i.nodes=g)}return i.object=s,i;function o(l){const c=[];for(const u in l){const h=l[u];delete h.metadata,c.push(h)}return c}}clone(e){return new this.constructor().copy(this,e)}copy(e,n=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),n===!0)for(let i=0;i<e.children.length;i++){const s=e.children[i];this.add(s.clone())}return this}}sc.DEFAULT_UP=new Qt(0,1,0);sc.DEFAULT_MATRIX_AUTO_UPDATE=!0;sc.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const pne={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},ud={h:0,s:0,l:0},fS={h:0,s:0,l:0};function WP(r,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?r+(e-r)*6*n:n<1/2?e:n<2/3?r+(e-r)*6*(2/3-n):r}class gU{constructor(e,n,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,n,i)}set(e,n,i){if(n===void 0&&i===void 0){const s=e;s&&s.isColor?this.copy(s):typeof s=="number"?this.setHex(s):typeof s=="string"&&this.setStyle(s)}else this.setRGB(e,n,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,n=Xl){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Fl.toWorkingColorSpace(this,n),this}setRGB(e,n,i,s=Fl.workingColorSpace){return this.r=e,this.g=n,this.b=i,Fl.toWorkingColorSpace(this,s),this}setHSL(e,n,i,s=Fl.workingColorSpace){if(e=TAe(e,1),n=pr(n,0,1),i=pr(i,0,1),n===0)this.r=this.g=this.b=i;else{const a=i<=.5?i*(1+n):i+n-i*n,o=2*i-a;this.r=WP(o,a,e+1/3),this.g=WP(o,a,e),this.b=WP(o,a,e-1/3)}return Fl.toWorkingColorSpace(this,s),this}setStyle(e,n=Xl){function i(a){a!==void 0&&parseFloat(a)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let s;if(s=/^(\w+)\(([^\)]*)\)/.exec(e)){let a;const o=s[1],l=s[2];switch(o){case"rgb":case"rgba":if(a=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return i(a[4]),this.setRGB(Math.min(255,parseInt(a[1],10))/255,Math.min(255,parseInt(a[2],10))/255,Math.min(255,parseInt(a[3],10))/255,n);if(a=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return i(a[4]),this.setRGB(Math.min(100,parseInt(a[1],10))/100,Math.min(100,parseInt(a[2],10))/100,Math.min(100,parseInt(a[3],10))/100,n);break;case"hsl":case"hsla":if(a=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return i(a[4]),this.setHSL(parseFloat(a[1])/360,parseFloat(a[2])/100,parseFloat(a[3])/100,n);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(s=/^\#([A-Fa-f\d]+)$/.exec(e)){const a=s[1],o=a.length;if(o===3)return this.setRGB(parseInt(a.charAt(0),16)/15,parseInt(a.charAt(1),16)/15,parseInt(a.charAt(2),16)/15,n);if(o===6)return this.setHex(parseInt(a,16),n);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,n);return this}setColorName(e,n=Xl){const i=pne[e.toLowerCase()];return i!==void 0?this.setHex(i,n):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=oh(e.r),this.g=oh(e.g),this.b=oh(e.b),this}copyLinearToSRGB(e){return this.r=$g(e.r),this.g=$g(e.g),this.b=$g(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Xl){return Fl.fromWorkingColorSpace(ia.copy(this),e),Math.round(pr(ia.r*255,0,255))*65536+Math.round(pr(ia.g*255,0,255))*256+Math.round(pr(ia.b*255,0,255))}getHexString(e=Xl){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,n=Fl.workingColorSpace){Fl.fromWorkingColorSpace(ia.copy(this),n);const i=ia.r,s=ia.g,a=ia.b,o=Math.max(i,s,a),l=Math.min(i,s,a);let c,u;const h=(l+o)/2;if(l===o)c=0,u=0;else{const d=o-l;switch(u=h<=.5?d/(o+l):d/(2-o-l),o){case i:c=(s-a)/d+(s<a?6:0);break;case s:c=(a-i)/d+2;break;case a:c=(i-s)/d+4;break}c/=6}return e.h=c,e.s=u,e.l=h,e}getRGB(e,n=Fl.workingColorSpace){return Fl.fromWorkingColorSpace(ia.copy(this),n),e.r=ia.r,e.g=ia.g,e.b=ia.b,e}getStyle(e=Xl){Fl.fromWorkingColorSpace(ia.copy(this),e);const n=ia.r,i=ia.g,s=ia.b;return e!==Xl?`color(${e} ${n.toFixed(3)} ${i.toFixed(3)} ${s.toFixed(3)})`:`rgb(${Math.round(n*255)},${Math.round(i*255)},${Math.round(s*255)})`}offsetHSL(e,n,i){return this.getHSL(ud),this.setHSL(ud.h+e,ud.s+n,ud.l+i)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,n){return this.r=e.r+n.r,this.g=e.g+n.g,this.b=e.b+n.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,n){return this.r+=(e.r-this.r)*n,this.g+=(e.g-this.g)*n,this.b+=(e.b-this.b)*n,this}lerpColors(e,n,i){return this.r=e.r+(n.r-e.r)*i,this.g=e.g+(n.g-e.g)*i,this.b=e.b+(n.b-e.b)*i,this}lerpHSL(e,n){this.getHSL(ud),e.getHSL(fS);const i=LP(ud.h,fS.h,n),s=LP(ud.s,fS.s,n),a=LP(ud.l,fS.l,n);return this.setHSL(i,s,a),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const n=this.r,i=this.g,s=this.b,a=e.elements;return this.r=a[0]*n+a[3]*i+a[6]*s,this.g=a[1]*n+a[4]*i+a[7]*s,this.b=a[2]*n+a[5]*i+a[8]*s,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,n=0){return this.r=e[n],this.g=e[n+1],this.b=e[n+2],this}toArray(e=[],n=0){return e[n]=this.r,e[n+1]=this.g,e[n+2]=this.b,e}fromBufferAttribute(e,n){return this.r=e.getX(n),this.g=e.getY(n),this.b=e.getZ(n),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const ia=new gU;gU.NAMES=pne;class UAe extends sc{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new fa,this.projectionMatrix=new fa,this.projectionMatrixInverse=new fa,this.coordinateSystem=sp}copy(e,n){return super.copy(e,n),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,n){super.updateWorldMatrix(e,n),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const qP=new Qt,zAe=new Qt,$Ae=new Zd;class Wf{constructor(e=new Qt(1,0,0),n=0){this.isPlane=!0,this.normal=e,this.constant=n}set(e,n){return this.normal.copy(e),this.constant=n,this}setComponents(e,n,i,s){return this.normal.set(e,n,i),this.constant=s,this}setFromNormalAndCoplanarPoint(e,n){return this.normal.copy(e),this.constant=-n.dot(this.normal),this}setFromCoplanarPoints(e,n,i){const s=qP.subVectors(i,n).cross(zAe.subVectors(e,n)).normalize();return this.setFromNormalAndCoplanarPoint(s,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,n){return n.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,n){const i=e.delta(qP),s=this.normal.dot(i);if(s===0)return this.distanceToPoint(e.start)===0?n.copy(e.start):null;const a=-(e.start.dot(this.normal)+this.constant)/s;return a<0||a>1?null:n.copy(e.start).addScaledVector(i,a)}intersectsLine(e){const n=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return n<0&&i>0||i<0&&n>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,n){const i=n||$Ae.getNormalMatrix(e),s=this.coplanarPoint(qP).applyMatrix4(e),a=this.normal.applyMatrix3(i).normalize();return this.constant=-s.dot(a),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Ff=new OAe,pS=new Qt;class GAe{constructor(e=new Wf,n=new Wf,i=new Wf,s=new Wf,a=new Wf,o=new Wf){this.planes=[e,n,i,s,a,o]}set(e,n,i,s,a,o){const l=this.planes;return l[0].copy(e),l[1].copy(n),l[2].copy(i),l[3].copy(s),l[4].copy(a),l[5].copy(o),this}copy(e){const n=this.planes;for(let i=0;i<6;i++)n[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,n=sp){const i=this.planes,s=e.elements,a=s[0],o=s[1],l=s[2],c=s[3],u=s[4],h=s[5],d=s[6],f=s[7],p=s[8],g=s[9],v=s[10],x=s[11],_=s[12],E=s[13],S=s[14],T=s[15];if(i[0].setComponents(c-a,f-u,x-p,T-_).normalize(),i[1].setComponents(c+a,f+u,x+p,T+_).normalize(),i[2].setComponents(c+o,f+h,x+g,T+E).normalize(),i[3].setComponents(c-o,f-h,x-g,T-E).normalize(),i[4].setComponents(c-l,f-d,x-v,T-S).normalize(),n===sp)i[5].setComponents(c+l,f+d,x+v,T+S).normalize();else if(n===L3)i[5].setComponents(l,d,v,S).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+n);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Ff.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const n=e.geometry;n.boundingSphere===null&&n.computeBoundingSphere(),Ff.copy(n.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Ff)}intersectsSprite(e){return Ff.center.set(0,0,0),Ff.radius=.7071067811865476,Ff.applyMatrix4(e.matrixWorld),this.intersectsSphere(Ff)}intersectsSphere(e){const n=this.planes,i=e.center,s=-e.radius;for(let a=0;a<6;a++)if(n[a].distanceToPoint(i)<s)return!1;return!0}intersectsBox(e){const n=this.planes;for(let i=0;i<6;i++){const s=n[i];if(pS.x=s.normal.x>0?e.max.x:e.min.x,pS.y=s.normal.y>0?e.max.y:e.min.y,pS.z=s.normal.z>0?e.max.z:e.min.z,s.distanceToPoint(pS)<0)return!1}return!0}containsPoint(e){const n=this.planes;for(let i=0;i<6;i++)if(n[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}class mne extends sc{constructor(e,n=1){super(),this.isLight=!0,this.type="Light",this.color=new gU(e),this.intensity=n}dispose(){}copy(e,n){return super.copy(e,n),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const n=super.toJSON(e);return n.object.color=this.color.getHex(),n.object.intensity=this.intensity,this.groundColor!==void 0&&(n.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(n.object.distance=this.distance),this.angle!==void 0&&(n.object.angle=this.angle),this.decay!==void 0&&(n.object.decay=this.decay),this.penumbra!==void 0&&(n.object.penumbra=this.penumbra),this.shadow!==void 0&&(n.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(n.object.target=this.target.uuid),n}}const XP=new fa,rH=new Qt,iH=new Qt;class VAe{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new zc(512,512),this.map=null,this.mapPass=null,this.matrix=new fa,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new GAe,this._frameExtents=new zc(1,1),this._viewportCount=1,this._viewports=[new _b(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const n=this.camera,i=this.matrix;rH.setFromMatrixPosition(e.matrixWorld),n.position.copy(rH),iH.setFromMatrixPosition(e.target.matrixWorld),n.lookAt(iH),n.updateMatrixWorld(),XP.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(XP),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(XP)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class HAe extends UAe{constructor(e=-1,n=1,i=1,s=-1,a=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=n,this.top=i,this.bottom=s,this.near=a,this.far=o,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,n,i,s,a,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=i,this.view.offsetY=s,this.view.width=a,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),n=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,s=(this.top+this.bottom)/2;let a=i-e,o=i+e,l=s+n,c=s-n;if(this.view!==null&&this.view.enabled){const u=(this.right-this.left)/this.view.fullWidth/this.zoom,h=(this.top-this.bottom)/this.view.fullHeight/this.zoom;a+=u*this.view.offsetX,o=a+u*this.view.width,l-=h*this.view.offsetY,c=l-h*this.view.height}this.projectionMatrix.makeOrthographic(a,o,l,c,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.zoom=this.zoom,n.object.left=this.left,n.object.right=this.right,n.object.top=this.top,n.object.bottom=this.bottom,n.object.near=this.near,n.object.far=this.far,this.view!==null&&(n.object.view=Object.assign({},this.view)),n}}class WAe extends VAe{constructor(){super(new HAe(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class qAe extends mne{constructor(e,n){super(e,n),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(sc.DEFAULT_UP),this.updateMatrix(),this.target=new sc,this.shadow=new WAe}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class XAe extends mne{constructor(e,n){super(e,n),this.isAmbientLight=!0,this.type="AmbientLight"}}const sH=new fa;class KAe{constructor(e,n,i=0,s=1/0){this.ray=new kAe(e,n),this.near=i,this.far=s,this.camera=null,this.layers=new fne,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,n){this.ray.set(e,n)}setFromCamera(e,n){n.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(n.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(n).sub(this.ray.origin).normalize(),this.camera=n):n.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(n.near+n.far)/(n.near-n.far)).unproject(n),this.ray.direction.set(0,0,-1).transformDirection(n.matrixWorld),this.camera=n):console.error("THREE.Raycaster: Unsupported camera type: "+n.type)}setFromXRController(e){return sH.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(sH),this}intersectObject(e,n=!0,i=[]){return F3(e,this,i,n),i.sort(aH),i}intersectObjects(e,n=!0,i=[]){for(let s=0,a=e.length;s<a;s++)F3(e[s],this,i,n);return i.sort(aH),i}}function aH(r,e){return r.distance-e.distance}function F3(r,e,n,i){let s=!0;if(r.layers.test(e.layers)&&r.raycast(e,n)===!1&&(s=!1),s===!0&&i===!0){const a=r.children;for(let o=0,l=a.length;o<l;o++)F3(a[o],e,n,!0)}}class YAe extends qM{constructor(e,n=null){super(),this.object=e,this.domElement=n,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(){}disconnect(){}dispose(){}update(){}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:pU}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=pU);/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */class ZAe extends PAe{constructor(e,n,i,s={}){super(e,n,s),this.depthBuffer=!1,this.stencilBuffer=!1,this.numViews=i}copy(e){return super.copy(e),this.numViews=e.numViews,this}}ZAe.prototype.isWebGLMultiviewRenderTarget=!0;const Gg=new Wf,Vu=new zc,gne=new Qt,KP=new zc,hT=new zc,eE=new Qt,B3=new Qt,yne=new fa,vne=new Qt,xne=new Qt;let Wa=null,wc=null;const Hu=[],Od={NONE:-1,PAN:0,ROTATE:1};class QAe extends YAe{constructor(e,n,i=null){super(n,i),this.objects=e,this.recursive=!0,this.transformGroup=!1,this.rotateSpeed=1,this.raycaster=new KAe,this.mouseButtons={LEFT:_v.PAN,MIDDLE:_v.PAN,RIGHT:_v.ROTATE},this.touches={ONE:IP.PAN},this._onPointerMove=JAe.bind(this),this._onPointerDown=eCe.bind(this),this._onPointerCancel=tCe.bind(this),this._onContextMenu=nCe.bind(this),i!==null&&this.connect()}connect(){this.domElement.addEventListener("pointermove",this._onPointerMove),this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointerup",this._onPointerCancel),this.domElement.addEventListener("pointerleave",this._onPointerCancel),this.domElement.addEventListener("contextmenu",this._onContextMenu),this.domElement.style.touchAction="none"}disconnect(){this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointerup",this._onPointerCancel),this.domElement.removeEventListener("pointerleave",this._onPointerCancel),this.domElement.removeEventListener("contextmenu",this._onContextMenu),this.domElement.style.touchAction="auto",this.domElement.style.cursor=""}dispose(){this.disconnect()}_updatePointer(e){const n=this.domElement.getBoundingClientRect();Vu.x=(e.clientX-n.left)/n.width*2-1,Vu.y=-(e.clientY-n.top)/n.height*2+1}_updateState(e){let n;if(e.pointerType==="touch")n=this.touches.ONE;else switch(e.button){case 0:n=this.mouseButtons.LEFT;break;case 1:n=this.mouseButtons.MIDDLE;break;case 2:n=this.mouseButtons.RIGHT;break;default:n=null}switch(n){case _v.PAN:case IP.PAN:this.state=Od.PAN;break;case _v.ROTATE:case IP.ROTATE:this.state=Od.ROTATE;break;default:this.state=Od.NONE}}getRaycaster(){return console.warn("THREE.DragControls: getRaycaster() has been deprecated. Use controls.raycaster instead."),this.raycaster}setObjects(e){console.warn("THREE.DragControls: setObjects() has been deprecated. Use controls.objects instead."),this.objects=e}getObjects(){return console.warn("THREE.DragControls: getObjects() has been deprecated. Use controls.objects instead."),this.objects}activate(){console.warn("THREE.DragControls: activate() has been renamed to connect()."),this.connect()}deactivate(){console.warn("THREE.DragControls: deactivate() has been renamed to disconnect()."),this.disconnect()}set mode(e){console.warn("THREE.DragControls: The .mode property has been removed. Define the type of transformation via the .mouseButtons or .touches properties.")}get mode(){console.warn("THREE.DragControls: The .mode property has been removed. Define the type of transformation via the .mouseButtons or .touches properties.")}}function JAe(r){const e=this.object,n=this.domElement,i=this.raycaster;if(this.enabled!==!1){if(this._updatePointer(r),i.setFromCamera(Vu,e),Wa)this.state===Od.PAN?i.ray.intersectPlane(Gg,eE)&&Wa.position.copy(eE.sub(gne).applyMatrix4(yne)):this.state===Od.ROTATE&&(KP.subVectors(Vu,hT).multiplyScalar(this.rotateSpeed),Wa.rotateOnWorldAxis(vne,KP.x),Wa.rotateOnWorldAxis(xne.normalize(),-KP.y)),this.dispatchEvent({type:"drag",object:Wa}),hT.copy(Vu);else if(r.pointerType==="mouse"||r.pointerType==="pen")if(Hu.length=0,i.setFromCamera(Vu,e),i.intersectObjects(this.objects,this.recursive,Hu),Hu.length>0){const s=Hu[0].object;Gg.setFromNormalAndCoplanarPoint(e.getWorldDirection(Gg.normal),B3.setFromMatrixPosition(s.matrixWorld)),wc!==s&&wc!==null&&(this.dispatchEvent({type:"hoveroff",object:wc}),n.style.cursor="auto",wc=null),wc!==s&&(this.dispatchEvent({type:"hoveron",object:s}),n.style.cursor="pointer",wc=s)}else wc!==null&&(this.dispatchEvent({type:"hoveroff",object:wc}),n.style.cursor="auto",wc=null);hT.copy(Vu)}}function eCe(r){const e=this.object,n=this.domElement,i=this.raycaster;this.enabled!==!1&&(this._updatePointer(r),this._updateState(r),Hu.length=0,i.setFromCamera(Vu,e),i.intersectObjects(this.objects,this.recursive,Hu),Hu.length>0&&(this.transformGroup===!0?Wa=bne(Hu[0].object):Wa=Hu[0].object,Gg.setFromNormalAndCoplanarPoint(e.getWorldDirection(Gg.normal),B3.setFromMatrixPosition(Wa.matrixWorld)),i.ray.intersectPlane(Gg,eE)&&(this.state===Od.PAN?(yne.copy(Wa.parent.matrixWorld).invert(),gne.copy(eE).sub(B3.setFromMatrixPosition(Wa.matrixWorld))):this.state===Od.ROTATE&&(vne.set(0,1,0).applyQuaternion(e.quaternion).normalize(),xne.set(1,0,0).applyQuaternion(e.quaternion).normalize())),n.style.cursor="move",this.dispatchEvent({type:"dragstart",object:Wa})),hT.copy(Vu))}function tCe(){this.enabled!==!1&&(Wa&&(this.dispatchEvent({type:"dragend",object:Wa}),Wa=null),this.domElement.style.cursor=wc?"pointer":"auto",this.state=Od.NONE)}function nCe(r){this.enabled!==!1&&r.preventDefault()}function bne(r,e=null){return r.isGroup&&(e=r),r.parent===null?e:bne(r.parent,e)}/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const rCe=["alphaMap","alphaTest","anisotropy","anisotropyMap","anisotropyRotation","aoMap","attenuationColor","attenuationDistance","bumpMap","clearcoat","clearcoatMap","clearcoatNormalMap","clearcoatNormalScale","clearcoatRoughness","color","dispersion","displacementMap","emissive","emissiveMap","envMap","gradientMap","ior","iridescence","iridescenceIOR","iridescenceMap","iridescenceThicknessMap","lightMap","map","matcap","metalness","metalnessMap","normalMap","normalScale","opacity","roughness","roughnessMap","sheen","sheenColor","sheenColorMap","sheenRoughnessMap","shininess","specular","specularColor","specularColorMap","specularIntensity","specularIntensityMap","specularMap","thickness","transmission","transmissionMap"];class iCe{constructor(e){this.renderObjects=new WeakMap,this.hasNode=this.containsNode(e),this.hasAnimation=e.object.isSkinnedMesh===!0,this.refreshUniforms=rCe,this.renderId=0}firstInitialization(e){return this.renderObjects.has(e)===!1?(this.getRenderObjectData(e),!0):!1}getRenderObjectData(e){let n=this.renderObjects.get(e);if(n===void 0){const{geometry:i,material:s,object:a}=e;if(n={material:this.getMaterialData(s),geometry:{id:i.id,attributes:this.getAttributesData(i.attributes),indexVersion:i.index?i.index.version:null,drawRange:{start:i.drawRange.start,count:i.drawRange.count}},worldMatrix:a.matrixWorld.clone()},a.center&&(n.center=a.center.clone()),a.morphTargetInfluences&&(n.morphTargetInfluences=a.morphTargetInfluences.slice()),e.bundle!==null&&(n.version=e.bundle.version),n.material.transmission>0){const{width:o,height:l}=e.context;n.bufferWidth=o,n.bufferHeight=l}this.renderObjects.set(e,n)}return n}getAttributesData(e){const n={};for(const i in e){const s=e[i];n[i]={version:s.version}}return n}containsNode(e){const n=e.material;for(const i in n)if(n[i]&&n[i].isNode)return!0;return e.renderer.nodes.modelViewMatrix!==null||e.renderer.nodes.modelNormalViewMatrix!==null}getMaterialData(e){const n={};for(const i of this.refreshUniforms){const s=e[i];s!=null&&(typeof s=="object"&&s.clone!==void 0?s.isTexture===!0?n[i]={id:s.id,version:s.version}:n[i]=s.clone():n[i]=s)}return n}equals(e){const{object:n,material:i,geometry:s}=e,a=this.getRenderObjectData(e);if(a.worldMatrix.equals(n.matrixWorld)!==!0)return a.worldMatrix.copy(n.matrixWorld),!1;const o=a.material;for(const v in o){const x=o[v],_=i[v];if(x.equals!==void 0){if(x.equals(_)===!1)return x.copy(_),!1}else if(_.isTexture===!0){if(x.id!==_.id||x.version!==_.version)return x.id=_.id,x.version=_.version,!1}else if(x!==_)return o[v]=_,!1}if(o.transmission>0){const{width:v,height:x}=e.context;if(a.bufferWidth!==v||a.bufferHeight!==x)return a.bufferWidth=v,a.bufferHeight=x,!1}const l=a.geometry,c=s.attributes,u=l.attributes,h=Object.keys(u),d=Object.keys(c);if(l.id!==s.id)return l.id=s.id,!1;if(h.length!==d.length)return a.geometry.attributes=this.getAttributesData(c),!1;for(const v of h){const x=u[v],_=c[v];if(_===void 0)return delete u[v],!1;if(x.version!==_.version)return x.version=_.version,!1}const f=s.index,p=l.indexVersion,g=f?f.version:null;if(p!==g)return l.indexVersion=g,!1;if(l.drawRange.start!==s.drawRange.start||l.drawRange.count!==s.drawRange.count)return l.drawRange.start=s.drawRange.start,l.drawRange.count=s.drawRange.count,!1;if(a.morphTargetInfluences){let v=!1;for(let x=0;x<a.morphTargetInfluences.length;x++)a.morphTargetInfluences[x]!==n.morphTargetInfluences[x]&&(v=!0);if(v)return!0}return a.center&&a.center.equals(n.center)===!1?(a.center.copy(n.center),!0):(e.bundle!==null&&(a.version=e.bundle.version),!0)}needsRefresh(e,n){if(this.hasNode||this.hasAnimation||this.firstInitialization(e))return!0;const{renderId:i}=n;if(this.renderId!==i)return this.renderId=i,!0;const s=e.object.static===!0,a=e.bundle!==null&&e.bundle.static===!0&&this.getRenderObjectData(e).version===e.bundle.version;return s||a?!1:this.equals(e)!==!0}}function wb(r,e=0){let n=3735928559^e,i=1103547991^e;if(r instanceof Array)for(let s=0,a;s<r.length;s++)a=r[s],n=Math.imul(n^a,2654435761),i=Math.imul(i^a,1597334677);else for(let s=0,a;s<r.length;s++)a=r.charCodeAt(s),n=Math.imul(n^a,2654435761),i=Math.imul(i^a,1597334677);return n=Math.imul(n^n>>>16,2246822507),n^=Math.imul(i^i>>>13,3266489909),i=Math.imul(i^i>>>16,2246822507),i^=Math.imul(n^n>>>13,3266489909),4294967296*(2097151&i)+(n>>>0)}const sCe=r=>wb(r),yU=r=>wb(r),Sb=(...r)=>wb(r);function _ne(r,e=!1){const n=[];r.isNode===!0&&(n.push(r.id),r=r.getSelf());for(const{property:i,childNode:s}of tE(r))n.push(wb(i.slice(0,-4)),s.getCacheKey(e));return wb(n)}function*tE(r,e=!1){for(const n in r){if(n.startsWith("_")===!0)continue;const i=r[n];if(Array.isArray(i)===!0)for(let s=0;s<i.length;s++){const a=i[s];a&&(a.isNode===!0||e&&typeof a.toJSON=="function")&&(yield{property:n,index:s,childNode:a})}else if(i&&i.isNode===!0)yield{property:n,childNode:i};else if(typeof i=="object")for(const s in i){const a=i[s];a&&(a.isNode===!0||e&&typeof a.toJSON=="function")&&(yield{property:n,index:s,childNode:a})}}}const aCe=new Map([[1,"float"],[2,"vec2"],[3,"vec3"],[4,"vec4"],[9,"mat3"],[16,"mat4"]]),oH=new WeakMap;function oCe(r){return aCe.get(r)}function nE(r){if(r==null)return null;const e=typeof r;return r.isNode===!0?"node":e==="number"?"float":e==="boolean"?"bool":e==="string"?"string":e==="function"?"shader":r.isVector2===!0?"vec2":r.isVector3===!0?"vec3":r.isVector4===!0?"vec4":r.isMatrix2===!0?"mat2":r.isMatrix3===!0?"mat3":r.isMatrix4===!0?"mat4":r.isColor===!0?"color":r instanceof ArrayBuffer?"ArrayBuffer":null}function wne(r,...e){const n=r?r.slice(-4):void 0;return e.length===1&&(n==="vec2"?e=[e[0],e[0]]:n==="vec3"?e=[e[0],e[0],e[0]]:n==="vec4"&&(e=[e[0],e[0],e[0],e[0]])),r==="color"?new ln(...e):n==="vec2"?new dt(...e):n==="vec3"?new pe(...e):n==="vec4"?new In(...e):n==="mat2"?new NM(...e):n==="mat3"?new zn(...e):n==="mat4"?new br(...e):r==="bool"?e[0]||!1:r==="float"||r==="int"||r==="uint"?e[0]||0:r==="string"?e[0]||"":r==="ArrayBuffer"?cCe(e[0]):null}function Sne(r){let e=oH.get(r);return e===void 0&&(e={},oH.set(r,e)),e}function lCe(r){let e="";const n=new Uint8Array(r);for(let i=0;i<n.length;i++)e+=String.fromCharCode(n[i]);return btoa(e)}function cCe(r){return Uint8Array.from(atob(r),e=>e.charCodeAt(0)).buffer}const lH={VERTEX:"vertex"},nr={NONE:"none",FRAME:"frame",RENDER:"render",OBJECT:"object"},Ju={READ_ONLY:"readOnly",WRITE_ONLY:"writeOnly",READ_WRITE:"readWrite"},uCe=["fragment","vertex"],cH=["setup","analyze","generate"],uH=[...uCe,"compute"],d0=["x","y","z","w"];let hCe=0,qn=class extends Sh{static get type(){return"Node"}constructor(e=null){super(),this.nodeType=e,this.updateType=nr.NONE,this.updateBeforeType=nr.NONE,this.updateAfterType=nr.NONE,this.uuid=BT.generateUUID(),this.version=0,this.global=!1,this.isNode=!0,this._cacheKey=null,this._cacheKeyVersion=0,Object.defineProperty(this,"id",{value:hCe++})}set needsUpdate(e){e===!0&&this.version++}get type(){return this.constructor.type}onUpdate(e,n){return this.updateType=n,this.update=e.bind(this.getSelf()),this}onFrameUpdate(e){return this.onUpdate(e,nr.FRAME)}onRenderUpdate(e){return this.onUpdate(e,nr.RENDER)}onObjectUpdate(e){return this.onUpdate(e,nr.OBJECT)}onReference(e){return this.updateReference=e.bind(this.getSelf()),this}getSelf(){return this.self||this}updateReference(){return this}isGlobal(){return this.global}*getChildren(){for(const{childNode:e}of tE(this))yield e}dispose(){this.dispatchEvent({type:"dispose"})}traverse(e){e(this);for(const n of this.getChildren())n.traverse(e)}getCacheKey(e=!1){return e=e||this.version!==this._cacheKeyVersion,(e===!0||this._cacheKey===null)&&(this._cacheKey=Sb(_ne(this,e),this.customCacheKey()),this._cacheKeyVersion=this.version),this._cacheKey}customCacheKey(){return 0}getScope(){return this}getHash(){return this.uuid}getUpdateType(){return this.updateType}getUpdateBeforeType(){return this.updateBeforeType}getUpdateAfterType(){return this.updateAfterType}getElementType(e){const n=this.getNodeType(e);return e.getElementType(n)}getMemberType(){return"void"}getNodeType(e){const n=e.getNodeProperties(this);return n.outputNode?n.outputNode.getNodeType(e):this.nodeType}getShared(e){const n=this.getHash(e);return e.getNodeFromHash(n)||this}setup(e){const n=e.getNodeProperties(this);let i=0;for(const s of this.getChildren())n["node"+i++]=s;return n.outputNode||null}analyze(e){if(e.increaseUsage(this)===1){const i=e.getNodeProperties(this);for(const s of Object.values(i))s&&s.isNode===!0&&s.build(e)}}generate(e,n){const{outputNode:i}=e.getNodeProperties(this);if(i&&i.isNode===!0)return i.build(e,n)}updateBefore(){console.warn("Abstract function.")}updateAfter(){console.warn("Abstract function.")}update(){console.warn("Abstract function.")}build(e,n=null){const i=this.getShared(e);if(this!==i)return i.build(e,n);e.addNode(this),e.addChain(this);let s=null;const a=e.getBuildStage();if(a==="setup"){this.updateReference(e);const o=e.getNodeProperties(this);if(o.initialized!==!0){o.initialized=!0;const l=this.setup(e),c=l&&l.isNode===!0;for(const u of Object.values(o))u&&u.isNode===!0&&u.build(e);c&&l.build(e),o.outputNode=l}}else if(a==="analyze")this.analyze(e);else if(a==="generate")if(this.generate.length===1){const l=this.getNodeType(e),c=e.getDataFromNode(this);s=c.snippet,s===void 0?c.generated===void 0?(c.generated=!0,s=this.generate(e)||"",c.snippet=s):(console.warn("THREE.Node: Recursion detected.",this),s=""):c.flowCodes!==void 0&&e.context.nodeBlock!==void 0&&e.addFlowCodeHierarchy(this,e.context.nodeBlock),s=e.format(s,l,n)}else s=this.generate(e,n)||"";return e.removeChain(this),e.addSequentialNode(this),s}getSerializeChildren(){return tE(this)}serialize(e){const n=this.getSerializeChildren(),i={};for(const{property:s,index:a,childNode:o}of n)a!==void 0?(i[s]===void 0&&(i[s]=Number.isInteger(a)?[]:{}),i[s][a]=o.toJSON(e.meta).uuid):i[s]=o.toJSON(e.meta).uuid;Object.keys(i).length>0&&(e.inputNodes=i)}deserialize(e){if(e.inputNodes!==void 0){const n=e.meta.nodes;for(const i in e.inputNodes)if(Array.isArray(e.inputNodes[i])){const s=[];for(const a of e.inputNodes[i])s.push(n[a]);this[i]=s}else if(typeof e.inputNodes[i]=="object"){const s={};for(const a in e.inputNodes[i]){const o=e.inputNodes[i][a];s[a]=n[o]}this[i]=s}else{const s=e.inputNodes[i];this[i]=n[s]}}}toJSON(e){const{uuid:n,type:i}=this,s=e===void 0||typeof e=="string";s&&(e={textures:{},images:{},nodes:{}});let a=e.nodes[n];a===void 0&&(a={uuid:n,type:i,meta:e,metadata:{version:4.6,type:"Node",generator:"Node.toJSON"}},s!==!0&&(e.nodes[a.uuid]=a),this.serialize(a),delete a.meta);function o(l){const c=[];for(const u in l){const h=l[u];delete h.metadata,c.push(h)}return c}if(s){const l=o(e.textures),c=o(e.images),u=o(e.nodes);l.length>0&&(a.textures=l),c.length>0&&(a.images=c),u.length>0&&(a.nodes=u)}return a}};class I_ extends qn{static get type(){return"ArrayElementNode"}constructor(e,n){super(),this.node=e,this.indexNode=n,this.isArrayElementNode=!0}getNodeType(e){return this.node.getElementType(e)}generate(e){const n=this.indexNode.getNodeType(e),i=this.node.build(e),s=this.indexNode.build(e,!e.isVector(n)&&e.isInteger(n)?n:"uint");return`${i}[ ${s} ]`}}class Tne extends qn{static get type(){return"ConvertNode"}constructor(e,n){super(),this.node=e,this.convertTo=n}getNodeType(e){const n=this.node.getNodeType(e);let i=null;for(const s of this.convertTo.split("|"))(i===null||e.getTypeLength(n)===e.getTypeLength(s))&&(i=s);return i}serialize(e){super.serialize(e),e.convertTo=this.convertTo}deserialize(e){super.deserialize(e),this.convertTo=e.convertTo}generate(e,n){const i=this.node,s=this.getNodeType(e),a=i.build(e,s);return e.format(a,s,n)}}class Hi extends qn{static get type(){return"TempNode"}constructor(e=null){super(e),this.isTempNode=!0}hasDependencies(e){return e.getDataFromNode(this).usageCount>1}build(e,n){if(e.getBuildStage()==="generate"){const s=e.getVectorType(this.getNodeType(e,n)),a=e.getDataFromNode(this);if(a.propertyName!==void 0)return e.format(a.propertyName,s,n);if(s!=="void"&&n!=="void"&&this.hasDependencies(e)){const o=super.build(e,s),l=e.getVarFromNode(this,null,s),c=e.getPropertyName(l);return e.addLineFlowCode(`${c} = ${o}`,this),a.snippet=o,a.propertyName=c,e.format(a.propertyName,s,n)}}return super.build(e,n)}}class dCe extends Hi{static get type(){return"JoinNode"}constructor(e=[],n=null){super(n),this.nodes=e}getNodeType(e){return this.nodeType!==null?e.getVectorType(this.nodeType):e.getTypeFromLength(this.nodes.reduce((n,i)=>n+e.getTypeLength(i.getNodeType(e)),0))}generate(e,n){const i=this.getNodeType(e),s=e.getTypeLength(i),a=this.nodes,o=e.getComponentType(i),l=[];let c=0;for(const h of a){if(c>=s){console.error(`THREE.TSL: Length of parameters exceeds maximum length of function '${i}()' type.`);break}let d=h.getNodeType(e),f=e.getTypeLength(d),p;c+f>s&&(console.error(`THREE.TSL: Length of '${i}()' data exceeds maximum length of output type.`),f=s-c,d=e.getTypeFromLength(f)),c+=f,p=h.build(e,d);const g=e.getComponentType(d);g!==o&&(p=e.format(p,g,o)),l.push(p)}const u=`${e.getType(i)}( ${l.join(", ")} )`;return e.format(u,i,n)}}const fCe=d0.join("");class hH extends qn{static get type(){return"SplitNode"}constructor(e,n="x"){super(),this.node=e,this.components=n,this.isSplitNode=!0}getVectorLength(){let e=this.components.length;for(const n of this.components)e=Math.max(d0.indexOf(n)+1,e);return e}getComponentType(e){return e.getComponentType(this.node.getNodeType(e))}getNodeType(e){return e.getTypeFromLength(this.components.length,this.getComponentType(e))}generate(e,n){const i=this.node,s=e.getTypeLength(i.getNodeType(e));let a=null;if(s>1){let o=null;this.getVectorLength()>=s&&(o=e.getTypeFromLength(this.getVectorLength(),this.getComponentType(e)));const c=i.build(e,o);this.components.length===s&&this.components===fCe.slice(0,this.components.length)?a=e.format(c,o,n):a=e.format(`${c}.${this.components}`,this.getNodeType(e),n)}else a=i.build(e,n);return a}serialize(e){super.serialize(e),e.components=this.components}deserialize(e){super.deserialize(e),this.components=e.components}}class pCe extends Hi{static get type(){return"SetNode"}constructor(e,n,i){super(),this.sourceNode=e,this.components=n,this.targetNode=i}getNodeType(e){return this.sourceNode.getNodeType(e)}generate(e){const{sourceNode:n,components:i,targetNode:s}=this,a=this.getNodeType(e),o=e.getComponentType(s.getNodeType(e)),l=e.getTypeFromLength(i.length,o),c=s.build(e,l),u=n.build(e,a),h=e.getTypeLength(a),d=[];for(let f=0;f<h;f++){const p=d0[f];p===i[0]?(d.push(c),f+=i.length-1):d.push(u+"."+p)}return`${e.getType(a)}( ${d.join(", ")} )`}}class mCe extends Hi{static get type(){return"FlipNode"}constructor(e,n){super(),this.sourceNode=e,this.components=n}getNodeType(e){return this.sourceNode.getNodeType(e)}generate(e){const{components:n,sourceNode:i}=this,s=this.getNodeType(e),a=i.build(e),o=e.getVarFromNode(this),l=e.getPropertyName(o);e.addLineFlowCode(l+" = "+a,this);const c=e.getTypeLength(s),u=[];let h=0;for(let d=0;d<c;d++){const f=d0[d];f===n[h]?(u.push("1.0 - "+(l+"."+f)),h++):u.push(l+"."+f)}return`${e.getType(s)}( ${u.join(", ")} )`}}class vU extends qn{static get type(){return"InputNode"}constructor(e,n=null){super(n),this.isInputNode=!0,this.value=e,this.precision=null}getNodeType(){return this.nodeType===null?nE(this.value):this.nodeType}getInputType(e){return this.getNodeType(e)}setPrecision(e){return this.precision=e,this}serialize(e){super.serialize(e),e.value=this.value,this.value&&this.value.toArray&&(e.value=this.value.toArray()),e.valueType=nE(this.value),e.nodeType=this.nodeType,e.valueType==="ArrayBuffer"&&(e.value=lCe(e.value)),e.precision=this.precision}deserialize(e){super.deserialize(e),this.nodeType=e.nodeType,this.value=Array.isArray(e.value)?wne(e.valueType,...e.value):e.value,this.precision=e.precision||null,this.value&&this.value.fromArray&&(this.value=this.value.fromArray(e.value))}generate(){console.warn("Abstract function.")}}const dH=/float|u?int/;class Mh extends vU{static get type(){return"ConstNode"}constructor(e,n=null){super(e,n),this.isConstNode=!0}generateConst(e){return e.generateConst(this.getNodeType(e),this.value)}generate(e,n){const i=this.getNodeType(e);return dH.test(i)&&dH.test(n)?e.generateConst(n,this.value):e.format(this.generateConst(e),i,n)}}class gCe extends qn{static get type(){return"MemberNode"}constructor(e,n){super(),this.node=e,this.property=n,this.isMemberNode=!0}getNodeType(e){return this.node.getMemberType(e,this.property)}generate(e){return this.node.build(e)+"."+this.property}}let Sy=null;const Ag=new Map;function Ve(r,e){if(Ag.has(r)){console.warn(`THREE.TSL: Redefinition of method chaining '${r}'.`);return}if(typeof e!="function")throw new Error(`THREE.TSL: Node element ${r} is not a function`);Ag.set(r,e)}const Ene=r=>r.replace(/r|s/g,"x").replace(/g|t/g,"y").replace(/b|p/g,"z").replace(/a|q/g,"w"),fH=r=>Ene(r).split("").sort().join(""),Mne={setup(r,e){const n=e.shift();return r(ZM(n),...e)},get(r,e,n){if(typeof e=="string"&&r[e]===void 0){if(r.isStackNode!==!0&&e==="assign")return(...i)=>(Sy.assign(n,...i),n);if(Ag.has(e)){const i=Ag.get(e);return r.isStackNode?(...s)=>n.add(i(...s)):(...s)=>i(n,...s)}else{if(e==="self")return r;if(e.endsWith("Assign")&&Ag.has(e.slice(0,e.length-6))){const i=Ag.get(e.slice(0,e.length-6));return r.isStackNode?(...s)=>n.assign(s[0],i(...s)):(...s)=>n.assign(i(n,...s))}else{if(/^[xyzwrgbastpq]{1,4}$/.test(e)===!0)return e=Ene(e),ct(new hH(n,e));if(/^set[XYZWRGBASTPQ]{1,4}$/.test(e)===!0)return e=fH(e.slice(3).toLowerCase()),i=>ct(new pCe(r,e,i));if(/^flip[XYZWRGBASTPQ]{1,4}$/.test(e)===!0)return e=fH(e.slice(4).toLowerCase()),()=>ct(new mCe(ct(r),e));if(e==="width"||e==="height"||e==="depth")return e==="width"?e="x":e==="height"?e="y":e==="depth"&&(e="z"),ct(new hH(r,e));if(/^\d+$/.test(e)===!0)return ct(new I_(n,new Mh(Number(e),"uint")));if(/^get$/.test(e)===!0)return i=>ct(new gCe(n,i))}}}return Reflect.get(r,e,n)},set(r,e,n,i){return typeof e=="string"&&r[e]===void 0&&(/^[xyzwrgbastpq]{1,4}$/.test(e)===!0||e==="width"||e==="height"||e==="depth"||/^\d+$/.test(e)===!0)?(i[e].assign(n),!0):Reflect.set(r,e,n,i)}},YP=new WeakMap,pH=new WeakMap,yCe=function(r,e=null){const n=nE(r);if(n==="node"){let i=YP.get(r);return i===void 0&&(i=new Proxy(r,Mne),YP.set(r,i),YP.set(i,i)),i}else{if(e===null&&(n==="float"||n==="boolean")||n&&n!=="shader"&&n!=="string")return ct(j3(r,e));if(n==="shader")return ut(r)}return r},vCe=function(r,e=null){for(const n in r)r[n]=ct(r[n],e);return r},xCe=function(r,e=null){const n=r.length;for(let i=0;i<n;i++)r[i]=ct(r[i],e);return r},bCe=function(r,e=null,n=null,i=null){const s=h=>ct(i!==null?Object.assign(h,i):h);let a,o=e,l,c;function u(h){let d;return o?d=/[a-z]/i.test(o)?o+"()":o:d=r.type,l!==void 0&&h.length<l?(console.error(`THREE.TSL: "${d}" parameter length is less than minimum required.`),h.concat(new Array(l-h.length).fill(0))):c!==void 0&&h.length>c?(console.error(`THREE.TSL: "${d}" parameter length exceeds limit.`),h.slice(0,c)):h}return e===null?a=(...h)=>s(new r(...Vg(u(h)))):n!==null?(n=ct(n),a=(...h)=>s(new r(e,...Vg(u(h)),n))):a=(...h)=>s(new r(e,...Vg(u(h)))),a.setParameterLength=(...h)=>(h.length===1?l=c=h[0]:h.length===2&&([l,c]=h),a),a.setName=h=>(o=h,a),a},_Ce=function(r,...e){return ct(new r(...Vg(e)))};class wCe extends qn{constructor(e,n){super(),this.shaderNode=e,this.inputNodes=n}getNodeType(e){return this.shaderNode.nodeType||this.getOutputNode(e).getNodeType(e)}getMemberType(e,n){return this.getOutputNode(e).getMemberType(e,n)}call(e){const{shaderNode:n,inputNodes:i}=this,s=e.getNodeProperties(n);if(s.onceOutput)return s.onceOutput;let a=null;if(n.layout){let o=pH.get(e.constructor);o===void 0&&(o=new WeakMap,pH.set(e.constructor,o));let l=o.get(n);l===void 0&&(l=ct(e.buildFunctionNode(n)),o.set(n,l)),e.addInclude(l),a=ct(l.call(i))}else{const o=n.jsFunc,l=i!==null||o.length>1?o(i||[],e):o(e);a=ct(l)}return n.once&&(s.onceOutput=a),a}getOutputNode(e){const n=e.getNodeProperties(this);return n.outputNode===null&&(n.outputNode=this.setupOutput(e)),n.outputNode}setup(e){return this.getOutputNode(e)}setupOutput(e){return e.addStack(),e.stack.outputNode=this.call(e),e.removeStack()}generate(e,n){return this.getOutputNode(e).build(e,n)}}class SCe extends qn{constructor(e,n){super(n),this.jsFunc=e,this.layout=null,this.global=!0,this.once=!1}setLayout(e){return this.layout=e,this}call(e=null){return ZM(e),ct(new wCe(this,e))}setup(){return this.call()}}const TCe=[!1,!0],ECe=[0,1,2,3],MCe=[-1,-2],Ane=[.5,1.5,1/3,1e-6,1e6,Math.PI,Math.PI*2,1/Math.PI,2/Math.PI,1/(Math.PI*2),Math.PI/2],xU=new Map;for(const r of TCe)xU.set(r,new Mh(r));const bU=new Map;for(const r of ECe)bU.set(r,new Mh(r,"uint"));const _U=new Map([...bU].map(r=>new Mh(r.value,"int")));for(const r of MCe)_U.set(r,new Mh(r,"int"));const KM=new Map([..._U].map(r=>new Mh(r.value)));for(const r of Ane)KM.set(r,new Mh(r));for(const r of Ane)KM.set(-r,new Mh(-r));const YM={bool:xU,uint:bU,ints:_U,float:KM},mH=new Map([...xU,...KM]),j3=(r,e)=>mH.has(r)?mH.get(r):r.isNode===!0?r:new Mh(r,e),ACe=r=>{try{return r.getNodeType()}catch{return}},is=function(r,e=null){return(...n)=>{if((n.length===0||!["bool","float","int","uint"].includes(r)&&n.every(s=>typeof s!="object"))&&(n=[wne(r,...n)]),n.length===1&&e!==null&&e.has(n[0]))return ct(e.get(n[0]));if(n.length===1){const s=j3(n[0],r);return ACe(s)===r?ct(s):ct(new Tne(s,r))}const i=n.map(s=>j3(s));return ct(new dCe(i,r))}},gH=r=>typeof r=="object"&&r!==null?r.value:r,CCe=r=>r!=null?r.nodeType||r.convertTo||(typeof r=="string"?r:null):null;function dT(r,e){return new Proxy(new SCe(r,e),Mne)}const ct=(r,e=null)=>yCe(r,e),ZM=(r,e=null)=>new vCe(r,e),Vg=(r,e=null)=>new xCe(r,e),rt=(...r)=>new bCe(...r),xt=(...r)=>new _Ce(...r);let NCe=0;const ut=(r,e=null)=>{let n=null;e!==null&&(typeof e=="object"?n=e.return:(typeof e=="string"?n=e:console.error("THREE.TSL: Invalid layout type."),e=null));const i=new dT(r,n),s=(...a)=>{let o;return ZM(a),a[0]&&a[0].isNode?o=[...a]:o=a[0],i.call(o)};if(s.shaderNode=i,s.setLayout=a=>(i.setLayout(a),s),s.once=()=>(i.once=!0,s),e!==null){if(typeof e.inputs!="object"){const a={name:"fn"+NCe++,type:n,inputs:[]};for(const o in e)o!=="return"&&a.inputs.push({name:o,type:e[o]});e=a}s.setLayout(e)}return s};Ve("toGlobal",r=>(r.global=!0,r));const rE=r=>{Sy=r},Cne=()=>Sy,Gi=(...r)=>Sy.If(...r);function PCe(r){return Sy&&Sy.add(r),r}Ve("append",PCe);const RCe=new is("color"),He=new is("float",YM.float),Si=new is("int",YM.ints),OCe=new is("uint",YM.uint),Nne=new is("bool",YM.bool),_t=new is("vec2"),$u=new is("ivec2"),kCe=new is("uvec2"),ICe=new is("bvec2"),Xe=new is("vec3"),DCe=new is("ivec3"),LCe=new is("uvec3"),FCe=new is("bvec3"),Bn=new is("vec4"),BCe=new is("ivec4"),jCe=new is("uvec4"),UCe=new is("bvec4"),wU=new is("mat2"),Pa=new is("mat3"),Hg=new is("mat4");Ve("toColor",RCe);Ve("toFloat",He);Ve("toInt",Si);Ve("toUint",OCe);Ve("toBool",Nne);Ve("toVec2",_t);Ve("toIVec2",$u);Ve("toUVec2",kCe);Ve("toBVec2",ICe);Ve("toVec3",Xe);Ve("toIVec3",DCe);Ve("toUVec3",LCe);Ve("toBVec3",FCe);Ve("toVec4",Bn);Ve("toIVec4",BCe);Ve("toUVec4",jCe);Ve("toBVec4",UCe);Ve("toMat2",wU);Ve("toMat3",Pa);Ve("toMat4",Hg);const zCe=rt(I_).setParameterLength(2),$Ce=(r,e)=>ct(new Tne(ct(r),e));Ve("element",zCe);Ve("convert",$Ce);class yH extends Hi{static get type(){return"ArrayNode"}constructor(e,n,i=null){super(e),this.count=n,this.values=i,this.isArrayNode=!0}getNodeType(e){return this.nodeType===null&&(this.nodeType=this.values[0].getNodeType(e)),this.nodeType}getElementType(e){return this.getNodeType(e)}generate(e){const n=this.getNodeType(e);return e.generateArray(n,this.count,this.values)}}const GCe=(...r)=>{let e;if(r.length===1){const n=r[0];e=new yH(null,n.length,n)}else{const n=r[0],i=r[1];e=new yH(n,i)}return ct(e)};Ve("toArray",(r,e)=>GCe(Array(e).fill(r)));class Pne extends qn{static get type(){return"UniformGroupNode"}constructor(e,n=!1,i=1){super("string"),this.name=e,this.shared=n,this.order=i,this.isUniformGroup=!0}serialize(e){super.serialize(e),e.name=this.name,e.version=this.version,e.shared=this.shared}deserialize(e){super.deserialize(e),this.name=e.name,this.version=e.version,this.shared=e.shared}}const VCe=r=>new Pne(r),SU=(r,e=0)=>new Pne(r,!0,e),HCe=SU("frame"),kn=SU("render"),Rne=VCe("object");class D_ extends vU{static get type(){return"UniformNode"}constructor(e,n=null){super(e,n),this.isUniformNode=!0,this.name="",this.groupNode=Rne}label(e){return this.name=e,this}setGroup(e){return this.groupNode=e,this}getGroup(){return this.groupNode}getUniformHash(e){return this.getHash(e)}onUpdate(e,n){const i=this.getSelf();return e=e.bind(i),super.onUpdate(s=>{const a=e(s,i);a!==void 0&&(this.value=a)},n)}generate(e,n){const i=this.getNodeType(e),s=this.getUniformHash(e);let a=e.getNodeFromHash(s);a===void 0&&(e.setHashNode(this,s),a=this);const o=a.getInputType(e),l=e.getUniformFromNode(a,o,e.shaderStage,this.name||e.context.label),c=e.getPropertyName(l);return e.context.label!==void 0&&delete e.context.label,e.format(c,i,n)}}const jn=(r,e)=>{const n=CCe(e||r),i=r&&r.isNode===!0?r.node&&r.node.value||r.value:r;return ct(new D_(i,n))};class Dr extends qn{static get type(){return"PropertyNode"}constructor(e,n=null,i=!1){super(e),this.name=n,this.varying=i,this.isPropertyNode=!0}getHash(e){return this.name||super.getHash(e)}isGlobal(){return!0}generate(e){let n;return this.varying===!0?(n=e.getVaryingFromNode(this,this.name),n.needsInterpolation=!0):n=e.getVarFromNode(this,this.name),e.getPropertyName(n)}}const L_=(r,e)=>ct(new Dr(r,e)),iE=(r,e)=>ct(new Dr(r,e,!0)),Cr=xt(Dr,"vec4","DiffuseColor"),vH=xt(Dr,"vec3","EmissiveColor"),Wu=xt(Dr,"float","Roughness"),sE=xt(Dr,"float","Metalness"),U3=xt(Dr,"float","Clearcoat"),aE=xt(Dr,"float","ClearcoatRoughness"),Cg=xt(Dr,"vec3","Sheen"),TU=xt(Dr,"float","SheenRoughness"),EU=xt(Dr,"float","Iridescence"),One=xt(Dr,"float","IridescenceIOR"),kne=xt(Dr,"float","IridescenceThickness"),z3=xt(Dr,"float","AlphaT"),qf=xt(Dr,"float","Anisotropy"),fT=xt(Dr,"vec3","AnisotropyT"),Wg=xt(Dr,"vec3","AnisotropyB"),Mo=xt(Dr,"color","SpecularColor"),oE=xt(Dr,"float","SpecularF90"),$3=xt(Dr,"float","Shininess"),_x=xt(Dr,"vec4","Output"),ZP=xt(Dr,"float","dashSize"),xH=xt(Dr,"float","gapSize"),pT=xt(Dr,"float","IOR"),G3=xt(Dr,"float","Transmission"),Ine=xt(Dr,"float","Thickness"),Dne=xt(Dr,"float","AttenuationDistance"),Lne=xt(Dr,"color","AttenuationColor"),Fne=xt(Dr,"float","Dispersion");class WCe extends Hi{static get type(){return"AssignNode"}constructor(e,n){super(),this.targetNode=e,this.sourceNode=n}hasDependencies(){return!1}getNodeType(e,n){return n!=="void"?this.targetNode.getNodeType(e):"void"}needsSplitAssign(e){const{targetNode:n}=this;if(e.isAvailable("swizzleAssign")===!1&&n.isSplitNode&&n.components.length>1){const i=e.getTypeLength(n.node.getNodeType(e));return d0.join("").slice(0,i)!==n.components}return!1}generate(e,n){const{targetNode:i,sourceNode:s}=this,a=this.needsSplitAssign(e),o=i.getNodeType(e),l=i.context({assign:!0}).build(e),c=s.build(e,o),u=s.getNodeType(e),h=e.getDataFromNode(this);let d;if(h.initialized===!0)n!=="void"&&(d=l);else if(a){const f=e.getVarFromNode(this,null,o),p=e.getPropertyName(f);e.addLineFlowCode(`${p} = ${c}`,this);const g=i.node.context({assign:!0}).build(e);for(let v=0;v<i.components.length;v++){const x=i.components[v];e.addLineFlowCode(`${g}.${x} = ${p}[ ${v} ]`,this)}n!=="void"&&(d=l)}else d=`${l} = ${c}`,(n==="void"||u==="void")&&(e.addLineFlowCode(d,this),n!=="void"&&(d=l));return h.initialized=!0,e.format(d,o,n)}}const qCe=rt(WCe).setParameterLength(2);Ve("assign",qCe);class XCe extends Hi{static get type(){return"FunctionCallNode"}constructor(e=null,n={}){super(),this.functionNode=e,this.parameters=n}setParameters(e){return this.parameters=e,this}getParameters(){return this.parameters}getNodeType(e){return this.functionNode.getNodeType(e)}generate(e){const n=[],i=this.functionNode,s=i.getInputs(e),a=this.parameters,o=(c,u)=>{const h=u.type,d=h==="pointer";let f;return d?f="&"+c.build(e):f=c.build(e,h),f};if(Array.isArray(a)){if(a.length>s.length)console.error("THREE.TSL: The number of provided parameters exceeds the expected number of inputs in 'Fn()'."),a.length=s.length;else if(a.length<s.length)for(console.error("THREE.TSL: The number of provided parameters is less than the expected number of inputs in 'Fn()'.");a.length<s.length;)a.push(He(0));for(let c=0;c<a.length;c++)n.push(o(a[c],s[c]))}else for(const c of s){const u=a[c.name];u!==void 0?n.push(o(u,c)):(console.error(`THREE.TSL: Input '${c.name}' not found in 'Fn()'.`),n.push(o(He(0),c)))}return`${i.build(e,"property")}( ${n.join(", ")} )`}}const KCe=(r,...e)=>(e=e.length>1||e[0]&&e[0].isNode===!0?Vg(e):ZM(e[0]),ct(new XCe(ct(r),e)));Ve("call",KCe);class yi extends Hi{static get type(){return"OperatorNode"}constructor(e,n,i,...s){if(super(),s.length>0){let a=new yi(e,n,i);for(let o=0;o<s.length-1;o++)a=new yi(e,a,s[o]);n=a,i=s[s.length-1]}this.op=e,this.aNode=n,this.bNode=i,this.isOperatorNode=!0}getNodeType(e,n){const i=this.op,s=this.aNode,a=this.bNode,o=s.getNodeType(e),l=typeof a<"u"?a.getNodeType(e):null;if(o==="void"||l==="void")return"void";if(i==="%")return o;if(i==="~"||i==="&"||i==="|"||i==="^"||i===">>"||i==="<<")return e.getIntegerType(o);if(i==="!"||i==="=="||i==="!="||i==="&&"||i==="||"||i==="^^")return"bool";if(i==="<"||i===">"||i==="<="||i===">="){const c=n?e.getTypeLength(n):Math.max(e.getTypeLength(o),e.getTypeLength(l));return c>1?`bvec${c}`:"bool"}else{if(e.isMatrix(o)){if(l==="float")return o;if(e.isVector(l))return e.getVectorFromMatrix(o);if(e.isMatrix(l))return o}else if(e.isMatrix(l)){if(o==="float")return l;if(e.isVector(o))return e.getVectorFromMatrix(l)}return e.getTypeLength(l)>e.getTypeLength(o)?l:o}}generate(e,n){const i=this.op,s=this.aNode,a=this.bNode,o=this.getNodeType(e,n);let l=null,c=null;o!=="void"?(l=s.getNodeType(e),c=typeof a<"u"?a.getNodeType(e):null,i==="<"||i===">"||i==="<="||i===">="||i==="=="||i==="!="?e.isVector(l)?c=l:l!==c&&(l=c="float"):i===">>"||i==="<<"?(l=o,c=e.changeComponentType(c,"uint")):i==="%"?(l=o,c=e.isInteger(l)&&e.isInteger(c)?c:l):e.isMatrix(l)?c==="float"?c="float":e.isVector(c)?c=e.getVectorFromMatrix(l):e.isMatrix(c)||(l=c=o):e.isMatrix(c)?l==="float"?l="float":e.isVector(l)?l=e.getVectorFromMatrix(c):l=c=o:l=c=o):l=c=o;const u=s.build(e,l),h=typeof a<"u"?a.build(e,c):null,d=e.getTypeLength(n),f=e.getFunctionOperator(i);if(n!=="void"){const p=e.renderer.coordinateSystem===Ka;if(i==="==")return p?d>1?e.format(`${e.getMethod("equal",n)}( ${u}, ${h} )`,o,n):e.format(`( ${u} ${i} ${h} )`,o,n):d>1||!e.isVector(l)?e.format(`( ${u} == ${h} )`,o,n):e.format(`all( ${u} == ${h} )`,o,n);if(i==="<"&&d>1)return p?e.format(`${e.getMethod("lessThan",n)}( ${u}, ${h} )`,o,n):e.format(`( ${u} < ${h} )`,o,n);if(i==="<="&&d>1)return p?e.format(`${e.getMethod("lessThanEqual",n)}( ${u}, ${h} )`,o,n):e.format(`( ${u} <= ${h} )`,o,n);if(i===">"&&d>1)return p?e.format(`${e.getMethod("greaterThan",n)}( ${u}, ${h} )`,o,n):e.format(`( ${u} > ${h} )`,o,n);if(i===">="&&d>1)return p?e.format(`${e.getMethod("greaterThanEqual",n)}( ${u}, ${h} )`,o,n):e.format(`( ${u} >= ${h} )`,o,n);if(i==="%")return e.isInteger(c)?e.format(`( ${u} % ${h} )`,o,n):e.format(`${e.getMethod("mod",o)}( ${u}, ${h} )`,o,n);if(i==="!"||i==="~")return e.format(`(${i}${u})`,l,n);if(f)return e.format(`${f}( ${u}, ${h} )`,o,n);if(e.isMatrix(l)&&c==="float")return e.format(`( ${h} ${i} ${u} )`,o,n);if(l==="float"&&e.isMatrix(c))return e.format(`${u} ${i} ${h}`,o,n);{let g=`( ${u} ${i} ${h} )`;return!p&&o==="bool"&&e.isVector(l)&&e.isVector(c)&&(g=`all${g}`),e.format(g,o,n)}}else if(l!=="void")return f?e.format(`${f}( ${u}, ${h} )`,o,n):e.isMatrix(l)&&c==="float"?e.format(`${h} ${i} ${u}`,o,n):e.format(`${u} ${i} ${h}`,o,n)}serialize(e){super.serialize(e),e.op=this.op}deserialize(e){super.deserialize(e),this.op=e.op}}const Ra=rt(yi,"+").setParameterLength(2,1/0).setName("add"),qa=rt(yi,"-").setParameterLength(2,1/0).setName("sub"),ur=rt(yi,"*").setParameterLength(2,1/0).setName("mul"),gh=rt(yi,"/").setParameterLength(2,1/0).setName("div"),QM=rt(yi,"%").setParameterLength(2).setName("mod"),Bne=rt(yi,"==").setParameterLength(2).setName("equal"),YCe=rt(yi,"!=").setParameterLength(2).setName("notEqual"),ZCe=rt(yi,"<").setParameterLength(2).setName("lessThan"),QCe=rt(yi,">").setParameterLength(2).setName("greaterThan"),JCe=rt(yi,"<=").setParameterLength(2).setName("lessThanEqual"),e2e=rt(yi,">=").setParameterLength(2).setName("greaterThanEqual"),t2e=rt(yi,"&&").setParameterLength(2,1/0).setName("and"),n2e=rt(yi,"||").setParameterLength(2,1/0).setName("or"),r2e=rt(yi,"!").setParameterLength(1).setName("not"),i2e=rt(yi,"^^").setParameterLength(2).setName("xor"),s2e=rt(yi,"&").setParameterLength(2).setName("bitAnd"),a2e=rt(yi,"~").setParameterLength(2).setName("bitNot"),o2e=rt(yi,"|").setParameterLength(2).setName("bitOr"),l2e=rt(yi,"^").setParameterLength(2).setName("bitXor"),c2e=rt(yi,"<<").setParameterLength(2).setName("shiftLeft"),u2e=rt(yi,">>").setParameterLength(2).setName("shiftRight");Ve("add",Ra);Ve("sub",qa);Ve("mul",ur);Ve("div",gh);Ve("mod",QM);Ve("equal",Bne);Ve("notEqual",YCe);Ve("lessThan",ZCe);Ve("greaterThan",QCe);Ve("lessThanEqual",JCe);Ve("greaterThanEqual",e2e);Ve("and",t2e);Ve("or",n2e);Ve("not",r2e);Ve("xor",i2e);Ve("bitAnd",s2e);Ve("bitNot",a2e);Ve("bitOr",o2e);Ve("bitXor",l2e);Ve("shiftLeft",c2e);Ve("shiftRight",u2e);const h2e=(r,e)=>(console.warn('THREE.TSL: "remainder()" is deprecated. Use "mod( int( ... ) )" instead.'),QM(r,e)),d2e=(r,e)=>(console.warn('THREE.TSL: "modInt()" is deprecated. Use "mod( int( ... ) )" instead.'),QM(Si(r),Si(e)));Ve("remainder",h2e);Ve("modInt",d2e);class Ce extends Hi{static get type(){return"MathNode"}constructor(e,n,i=null,s=null){if(super(),(e===Ce.MAX||e===Ce.MIN)&&arguments.length>3){let a=new Ce(e,n,i);for(let o=2;o<arguments.length-1;o++)a=new Ce(e,a,arguments[o]);n=a,i=arguments[arguments.length-1],s=null}this.method=e,this.aNode=n,this.bNode=i,this.cNode=s,this.isMathNode=!0}getInputType(e){const n=this.aNode.getNodeType(e),i=this.bNode?this.bNode.getNodeType(e):null,s=this.cNode?this.cNode.getNodeType(e):null,a=e.isMatrix(n)?0:e.getTypeLength(n),o=e.isMatrix(i)?0:e.getTypeLength(i),l=e.isMatrix(s)?0:e.getTypeLength(s);return a>o&&a>l?n:o>l?i:l>a?s:n}getNodeType(e){const n=this.method;return n===Ce.LENGTH||n===Ce.DISTANCE||n===Ce.DOT?"float":n===Ce.CROSS?"vec3":n===Ce.ALL||n===Ce.ANY?"bool":n===Ce.EQUALS?e.changeComponentType(this.aNode.getNodeType(e),"bool"):this.getInputType(e)}generate(e,n){let i=this.method;const s=this.getNodeType(e),a=this.getInputType(e),o=this.aNode,l=this.bNode,c=this.cNode,u=e.renderer.coordinateSystem;if(i===Ce.TRANSFORM_DIRECTION){let h=o,d=l;e.isMatrix(h.getNodeType(e))?d=Bn(Xe(d),0):h=Bn(Xe(h),0);const f=ur(h,d).xyz;return Eb(f).build(e,n)}else{if(i===Ce.NEGATE)return e.format("( - "+o.build(e,a)+" )",s,n);if(i===Ce.ONE_MINUS)return qa(1,o).build(e,n);if(i===Ce.RECIPROCAL)return gh(1,o).build(e,n);if(i===Ce.DIFFERENCE)return rl(qa(o,l)).build(e,n);{const h=[];return i===Ce.CROSS?h.push(o.build(e,s),l.build(e,s)):u===Ka&&i===Ce.STEP?h.push(o.build(e,e.getTypeLength(o.getNodeType(e))===1?"float":a),l.build(e,a)):u===Ka&&(i===Ce.MIN||i===Ce.MAX)?h.push(o.build(e,a),l.build(e,e.getTypeLength(l.getNodeType(e))===1?"float":a)):i===Ce.REFRACT?h.push(o.build(e,a),l.build(e,a),c.build(e,"float")):i===Ce.MIX?h.push(o.build(e,a),l.build(e,a),c.build(e,e.getTypeLength(c.getNodeType(e))===1?"float":a)):(u===Bd&&i===Ce.ATAN&&l!==null&&(i="atan2"),h.push(o.build(e,a)),l!==null&&h.push(l.build(e,a)),c!==null&&h.push(c.build(e,a))),e.format(`${e.getMethod(i,s)}( ${h.join(", ")} )`,s,n)}}}serialize(e){super.serialize(e),e.method=this.method}deserialize(e){super.deserialize(e),this.method=e.method}}Ce.ALL="all";Ce.ANY="any";Ce.RADIANS="radians";Ce.DEGREES="degrees";Ce.EXP="exp";Ce.EXP2="exp2";Ce.LOG="log";Ce.LOG2="log2";Ce.SQRT="sqrt";Ce.INVERSE_SQRT="inversesqrt";Ce.FLOOR="floor";Ce.CEIL="ceil";Ce.NORMALIZE="normalize";Ce.FRACT="fract";Ce.SIN="sin";Ce.COS="cos";Ce.TAN="tan";Ce.ASIN="asin";Ce.ACOS="acos";Ce.ATAN="atan";Ce.ABS="abs";Ce.SIGN="sign";Ce.LENGTH="length";Ce.NEGATE="negate";Ce.ONE_MINUS="oneMinus";Ce.DFDX="dFdx";Ce.DFDY="dFdy";Ce.ROUND="round";Ce.RECIPROCAL="reciprocal";Ce.TRUNC="trunc";Ce.FWIDTH="fwidth";Ce.TRANSPOSE="transpose";Ce.BITCAST="bitcast";Ce.EQUALS="equals";Ce.MIN="min";Ce.MAX="max";Ce.STEP="step";Ce.REFLECT="reflect";Ce.DISTANCE="distance";Ce.DIFFERENCE="difference";Ce.DOT="dot";Ce.CROSS="cross";Ce.POW="pow";Ce.TRANSFORM_DIRECTION="transformDirection";Ce.MIX="mix";Ce.CLAMP="clamp";Ce.REFRACT="refract";Ce.SMOOTHSTEP="smoothstep";Ce.FACEFORWARD="faceforward";const f2e=He(1e-6),p2e=He(Math.PI),m2e=rt(Ce,Ce.ALL).setParameterLength(1),g2e=rt(Ce,Ce.ANY).setParameterLength(1),y2e=rt(Ce,Ce.RADIANS).setParameterLength(1),v2e=rt(Ce,Ce.DEGREES).setParameterLength(1),jne=rt(Ce,Ce.EXP).setParameterLength(1),Tb=rt(Ce,Ce.EXP2).setParameterLength(1),Une=rt(Ce,Ce.LOG).setParameterLength(1),lh=rt(Ce,Ce.LOG2).setParameterLength(1),MU=rt(Ce,Ce.SQRT).setParameterLength(1),x2e=rt(Ce,Ce.INVERSE_SQRT).setParameterLength(1),mp=rt(Ce,Ce.FLOOR).setParameterLength(1),AU=rt(Ce,Ce.CEIL).setParameterLength(1),Eb=rt(Ce,Ce.NORMALIZE).setParameterLength(1),Qd=rt(Ce,Ce.FRACT).setParameterLength(1),Ql=rt(Ce,Ce.SIN).setParameterLength(1),yd=rt(Ce,Ce.COS).setParameterLength(1),b2e=rt(Ce,Ce.TAN).setParameterLength(1),_2e=rt(Ce,Ce.ASIN).setParameterLength(1),w2e=rt(Ce,Ce.ACOS).setParameterLength(1),zne=rt(Ce,Ce.ATAN).setParameterLength(1,2),rl=rt(Ce,Ce.ABS).setParameterLength(1),lE=rt(Ce,Ce.SIGN).setParameterLength(1),kd=rt(Ce,Ce.LENGTH).setParameterLength(1),S2e=rt(Ce,Ce.NEGATE).setParameterLength(1),T2e=rt(Ce,Ce.ONE_MINUS).setParameterLength(1),$ne=rt(Ce,Ce.DFDX).setParameterLength(1),Gne=rt(Ce,Ce.DFDY).setParameterLength(1),E2e=rt(Ce,Ce.ROUND).setParameterLength(1),M2e=rt(Ce,Ce.RECIPROCAL).setParameterLength(1),A2e=rt(Ce,Ce.TRUNC).setParameterLength(1),C2e=rt(Ce,Ce.FWIDTH).setParameterLength(1),N2e=rt(Ce,Ce.TRANSPOSE).setParameterLength(1),P2e=(r,e)=>(console.warn('THREE.TSL: "equals" is deprecated. Use "equal" inside a vector instead, like: "bvec*( equal( ... ) )"'),Bne(r,e)),Mb=rt(Ce,Ce.MIN).setParameterLength(2,1/0),io=rt(Ce,Ce.MAX).setParameterLength(2,1/0),Vne=rt(Ce,Ce.STEP).setParameterLength(2),R2e=rt(Ce,Ce.REFLECT).setParameterLength(2),O2e=rt(Ce,Ce.DISTANCE).setParameterLength(2),k2e=rt(Ce,Ce.DIFFERENCE).setParameterLength(2),CU=rt(Ce,Ce.DOT).setParameterLength(2),Hne=rt(Ce,Ce.CROSS).setParameterLength(2),JM=rt(Ce,Ce.POW).setParameterLength(2),Wne=rt(Ce,Ce.POW,2).setParameterLength(1),I2e=rt(Ce,Ce.POW,3).setParameterLength(1),D2e=rt(Ce,Ce.POW,4).setParameterLength(1),L2e=rt(Ce,Ce.TRANSFORM_DIRECTION).setParameterLength(2),F2e=r=>ur(lE(r),JM(rl(r),1/3)),qne=r=>CU(r,r),si=rt(Ce,Ce.MIX).setParameterLength(3),yh=(r,e=0,n=1)=>ct(new Ce(Ce.CLAMP,ct(r),ct(e),ct(n))),B2e=r=>yh(r),Xne=rt(Ce,Ce.REFRACT).setParameterLength(3),Ud=rt(Ce,Ce.SMOOTHSTEP).setParameterLength(3),j2e=rt(Ce,Ce.FACEFORWARD).setParameterLength(3),U2e=ut(([r])=>{const i=43758.5453,s=CU(r.xy,_t(12.9898,78.233)),a=QM(s,p2e);return Qd(Ql(a).mul(i))}),z2e=(r,e,n)=>si(e,n,r),$2e=(r,e,n)=>Ud(e,n,r),G2e=(r,e)=>(console.warn('THREE.TSL: "atan2" is overloaded. Use "atan" instead.'),zne(r,e));Ve("all",m2e);Ve("any",g2e);Ve("equals",P2e);Ve("radians",y2e);Ve("degrees",v2e);Ve("exp",jne);Ve("exp2",Tb);Ve("log",Une);Ve("log2",lh);Ve("sqrt",MU);Ve("inverseSqrt",x2e);Ve("floor",mp);Ve("ceil",AU);Ve("normalize",Eb);Ve("fract",Qd);Ve("sin",Ql);Ve("cos",yd);Ve("tan",b2e);Ve("asin",_2e);Ve("acos",w2e);Ve("atan",zne);Ve("abs",rl);Ve("sign",lE);Ve("length",kd);Ve("lengthSq",qne);Ve("negate",S2e);Ve("oneMinus",T2e);Ve("dFdx",$ne);Ve("dFdy",Gne);Ve("round",E2e);Ve("reciprocal",M2e);Ve("trunc",A2e);Ve("fwidth",C2e);Ve("atan2",G2e);Ve("min",Mb);Ve("max",io);Ve("step",Vne);Ve("reflect",R2e);Ve("distance",O2e);Ve("dot",CU);Ve("cross",Hne);Ve("pow",JM);Ve("pow2",Wne);Ve("pow3",I2e);Ve("pow4",D2e);Ve("transformDirection",L2e);Ve("mix",z2e);Ve("clamp",yh);Ve("refract",Xne);Ve("smoothstep",$2e);Ve("faceForward",j2e);Ve("difference",k2e);Ve("saturate",B2e);Ve("cbrt",F2e);Ve("transpose",N2e);Ve("rand",U2e);class V2e extends qn{static get type(){return"ConditionalNode"}constructor(e,n,i=null){super(),this.condNode=e,this.ifNode=n,this.elseNode=i}getNodeType(e){const{ifNode:n,elseNode:i}=e.getNodeProperties(this);if(n===void 0)return this.setup(e),this.getNodeType(e);const s=n.getNodeType(e);if(i!==null){const a=i.getNodeType(e);if(e.getTypeLength(a)>e.getTypeLength(s))return a}return s}setup(e){const n=this.condNode.cache(),i=this.ifNode.cache(),s=this.elseNode?this.elseNode.cache():null,a=e.context.nodeBlock;e.getDataFromNode(i).parentNodeBlock=a,s!==null&&(e.getDataFromNode(s).parentNodeBlock=a);const o=e.getNodeProperties(this);o.condNode=n,o.ifNode=i.context({nodeBlock:i}),o.elseNode=s?s.context({nodeBlock:s}):null}generate(e,n){const i=this.getNodeType(e),s=e.getDataFromNode(this);if(s.nodeProperty!==void 0)return s.nodeProperty;const{condNode:a,ifNode:o,elseNode:l}=e.getNodeProperties(this),c=e.currentFunctionNode,u=n!=="void",h=u?L_(i).build(e):"";s.nodeProperty=h;const d=a.build(e,"bool");e.addFlowCode(`
${e.tab}if ( ${d} ) {

`).addFlowTab();let f=o.build(e,i);if(f&&(u?f=h+" = "+f+";":(f="return "+f+";",c===null&&(console.warn("THREE.TSL: Return statement used in an inline 'Fn()'. Define a layout struct to allow return values."),f="// "+f))),e.removeFlowTab().addFlowCode(e.tab+"	"+f+`

`+e.tab+"}"),l!==null){e.addFlowCode(` else {

`).addFlowTab();let p=l.build(e,i);p&&(u?p=h+" = "+p+";":(p="return "+p+";",c===null&&(console.warn("THREE.TSL: Return statement used in an inline 'Fn()'. Define a layout struct to allow return values."),p="// "+p))),e.removeFlowTab().addFlowCode(e.tab+"	"+p+`

`+e.tab+`}

`)}else e.addFlowCode(`

`);return e.format(h,i,n)}}const Ya=rt(V2e).setParameterLength(2,3);Ve("select",Ya);const H2e=(...r)=>(console.warn("THREE.TSL: cond() has been renamed to select()."),Ya(...r));Ve("cond",H2e);class Kne extends qn{static get type(){return"ContextNode"}constructor(e,n={}){super(),this.isContextNode=!0,this.node=e,this.value=n}getScope(){return this.node.getScope()}getNodeType(e){return this.node.getNodeType(e)}analyze(e){this.node.build(e)}setup(e){const n=e.getContext();e.setContext({...e.context,...this.value});const i=this.node.build(e);return e.setContext(n),i}generate(e,n){const i=e.getContext();e.setContext({...e.context,...this.value});const s=this.node.build(e,n);return e.setContext(i),s}}const NU=rt(Kne).setParameterLength(1,2),W2e=(r,e)=>NU(r,{label:e});Ve("context",NU);Ve("label",W2e);class mT extends qn{static get type(){return"VarNode"}constructor(e,n=null,i=!1){super(),this.node=e,this.name=n,this.global=!0,this.isVarNode=!0,this.readOnly=i}getMemberType(e,n){return this.node.getMemberType(e,n)}getElementType(e){return this.node.getElementType(e)}getNodeType(e){return this.node.getNodeType(e)}generate(e){const{node:n,name:i,readOnly:s}=this,{renderer:a}=e,o=a.backend.isWebGPUBackend===!0;let l=!1,c=!1;s&&(l=e.isDeterministic(n),c=o?s:l);const u=e.getVectorType(this.getNodeType(e)),h=n.build(e,u),d=e.getVarFromNode(this,i,u,void 0,c),f=e.getPropertyName(d);let p=f;if(c)if(o)p=l?`const ${f}`:`let ${f}`;else{const g=e.getArrayCount(n);p=`const ${e.getVar(d.type,f,g)}`}return e.addLineFlowCode(`${p} = ${h}`,this),f}}const PU=rt(mT),q2e=(r,e=null)=>PU(r,e).append(),X2e=(r,e=null)=>PU(r,e,!0).append();Ve("toVar",q2e);Ve("toConst",X2e);const K2e=r=>(console.warn('TSL: "temp( node )" is deprecated. Use "Var( node )" or "node.toVar()" instead.'),PU(r));Ve("temp",K2e);class Y2e extends qn{static get type(){return"VaryingNode"}constructor(e,n=null){super(),this.node=e,this.name=n,this.isVaryingNode=!0}isGlobal(){return!0}getHash(e){return this.name||super.getHash(e)}getNodeType(e){return this.node.getNodeType(e)}setupVarying(e){const n=e.getNodeProperties(this);let i=n.varying;if(i===void 0){const s=this.name,a=this.getNodeType(e);n.varying=i=e.getVaryingFromNode(this,s,a),n.node=this.node}return i.needsInterpolation||(i.needsInterpolation=e.shaderStage==="fragment"),i}setup(e){this.setupVarying(e)}analyze(e){return this.setupVarying(e),this.node.analyze(e)}generate(e){const n=e.getNodeProperties(this),i=this.setupVarying(e),s=e.shaderStage==="fragment"&&n.reassignPosition===!0&&e.context.needsPositionReassign;if(n.propertyName===void 0||s){const a=this.getNodeType(e),o=e.getPropertyName(i,lH.VERTEX);e.flowNodeFromShaderStage(lH.VERTEX,this.node,a,o),n.propertyName=o,s?n.reassignPosition=!1:n.reassignPosition===void 0&&e.context.isPositionNodeInput&&(n.reassignPosition=!0)}return e.getPropertyName(i)}}const uc=rt(Y2e).setParameterLength(1,2),Z2e=r=>uc(r);Ve("toVarying",uc);Ve("toVertexStage",Z2e);Ve("varying",(...r)=>(console.warn("THREE.TSL: .varying() has been renamed to .toVarying()."),uc(...r)));Ve("vertexStage",(...r)=>(console.warn("THREE.TSL: .vertexStage() has been renamed to .toVertexStage()."),uc(...r)));const Q2e=ut(([r])=>{const e=r.mul(.9478672986).add(.0521327014).pow(2.4),n=r.mul(.0773993808),i=r.lessThanEqual(.04045);return si(e,n,i)}).setLayout({name:"sRGBTransferEOTF",type:"vec3",inputs:[{name:"color",type:"vec3"}]}),J2e=ut(([r])=>{const e=r.pow(.41666).mul(1.055).sub(.055),n=r.mul(12.92),i=r.lessThanEqual(.0031308);return si(e,n,i)}).setLayout({name:"sRGBTransferOETF",type:"vec3",inputs:[{name:"color",type:"vec3"}]}),F_="WorkingColorSpace",RU="OutputColorSpace";class eA extends Hi{static get type(){return"ColorSpaceNode"}constructor(e,n,i){super("vec4"),this.colorNode=e,this.source=n,this.target=i}resolveColorSpace(e,n){return n===F_?tr.workingColorSpace:n===RU?e.context.outputColorSpace||e.renderer.outputColorSpace:n}setup(e){const{colorNode:n}=this,i=this.resolveColorSpace(e,this.source),s=this.resolveColorSpace(e,this.target);let a=n;return tr.enabled===!1||i===s||!i||!s||(tr.getTransfer(i)===Ir&&(a=Bn(Q2e(a.rgb),a.a)),tr.getPrimaries(i)!==tr.getPrimaries(s)&&(a=Bn(Pa(tr._getMatrix(new zn,i,s)).mul(a.rgb),a.a)),tr.getTransfer(s)===Ir&&(a=Bn(J2e(a.rgb),a.a))),a}}const eNe=r=>ct(new eA(ct(r),F_,RU)),tNe=r=>ct(new eA(ct(r),RU,F_)),nNe=(r,e)=>ct(new eA(ct(r),F_,e)),OU=(r,e)=>ct(new eA(ct(r),e,F_));Ve("toOutputColorSpace",eNe);Ve("toWorkingColorSpace",tNe);Ve("workingToColorSpace",nNe);Ve("colorSpaceToWorking",OU);let rNe=class extends I_{static get type(){return"ReferenceElementNode"}constructor(e,n){super(e,n),this.referenceNode=e,this.isReferenceElementNode=!0}getNodeType(){return this.referenceNode.uniformType}generate(e){const n=super.generate(e),i=this.referenceNode.getNodeType(),s=this.getNodeType();return e.format(n,i,s)}};class Yne extends qn{static get type(){return"ReferenceBaseNode"}constructor(e,n,i=null,s=null){super(),this.property=e,this.uniformType=n,this.object=i,this.count=s,this.properties=e.split("."),this.reference=i,this.node=null,this.group=null,this.updateType=nr.OBJECT}setGroup(e){return this.group=e,this}element(e){return ct(new rNe(this,ct(e)))}setNodeType(e){const n=jn(null,e).getSelf();this.group!==null&&n.setGroup(this.group),this.node=n}getNodeType(e){return this.node===null&&(this.updateReference(e),this.updateValue()),this.node.getNodeType(e)}getValueFromReference(e=this.reference){const{properties:n}=this;let i=e[n[0]];for(let s=1;s<n.length;s++)i=i[n[s]];return i}updateReference(e){return this.reference=this.object!==null?this.object:e.object,this.reference}setup(){return this.updateValue(),this.node}update(){this.updateValue()}updateValue(){this.node===null&&this.setNodeType(this.uniformType);const e=this.getValueFromReference();Array.isArray(e)?this.node.array=e:this.node.value=e}}const iNe=(r,e,n)=>ct(new Yne(r,e,n));class sNe extends Yne{static get type(){return"RendererReferenceNode"}constructor(e,n,i=null){super(e,n,i),this.renderer=i,this.setGroup(kn)}updateReference(e){return this.reference=this.renderer!==null?this.renderer:e.renderer,this.reference}}const aNe=(r,e,n=null)=>ct(new sNe(r,e,n));class oNe extends Hi{static get type(){return"ToneMappingNode"}constructor(e,n=cNe,i=null){super("vec3"),this.toneMapping=e,this.exposureNode=n,this.colorNode=i}customCacheKey(){return Sb(this.toneMapping)}setup(e){const n=this.colorNode||e.context.color,i=this.toneMapping;if(i===to)return n;let s=null;const a=e.renderer.library.getToneMappingFunction(i);return a!==null?s=Bn(a(n.rgb,this.exposureNode),n.a):(console.error("ToneMappingNode: Unsupported Tone Mapping configuration.",i),s=n),s}}const lNe=(r,e,n)=>ct(new oNe(r,ct(e),ct(n))),cNe=aNe("toneMappingExposure","float");Ve("toneMapping",(r,e,n)=>lNe(e,n,r));class uNe extends vU{static get type(){return"BufferAttributeNode"}constructor(e,n=null,i=0,s=0){super(e,n),this.isBufferNode=!0,this.bufferType=n,this.bufferStride=i,this.bufferOffset=s,this.usage=FT,this.instanced=!1,this.attribute=null,this.global=!0,e&&e.isBufferAttribute===!0&&(this.attribute=e,this.usage=e.usage,this.instanced=e.isInstancedBufferAttribute)}getHash(e){if(this.bufferStride===0&&this.bufferOffset===0){let n=e.globalCache.getData(this.value);return n===void 0&&(n={node:this},e.globalCache.setData(this.value,n)),n.node.uuid}return this.uuid}getNodeType(e){return this.bufferType===null&&(this.bufferType=e.getTypeFromAttribute(this.attribute)),this.bufferType}setup(e){if(this.attribute!==null)return;const n=this.getNodeType(e),i=this.value,s=e.getTypeLength(n),a=this.bufferStride||s,o=this.bufferOffset,l=i.isInterleavedBuffer===!0?i:new pee(i,a),c=new Lj(l,s,o);l.setUsage(this.usage),this.attribute=c,this.attribute.isInstancedBufferAttribute=this.instanced}generate(e){const n=this.getNodeType(e),i=e.getBufferAttributeFromNode(this,n),s=e.getPropertyName(i);let a=null;return e.shaderStage==="vertex"||e.shaderStage==="compute"?(this.name=s,a=s):a=uc(this).build(e,n),a}getInputType(){return"bufferAttribute"}setUsage(e){return this.usage=e,this.attribute&&this.attribute.isBufferAttribute===!0&&(this.attribute.usage=e),this}setInstanced(e){return this.instanced=e,this}}const kU=(r,e=null,n=0,i=0)=>ct(new uNe(r,e,n,i)),hNe=(r,e=null,n=0,i=0)=>kU(r,e,n,i).setUsage(Sg),bH=(r,e=null,n=0,i=0)=>kU(r,e,n,i).setInstanced(!0),_H=(r,e=null,n=0,i=0)=>hNe(r,e,n,i).setInstanced(!0);Ve("toAttribute",r=>kU(r.value));class dNe extends qn{static get type(){return"ComputeNode"}constructor(e,n,i=[64]){super("void"),this.isComputeNode=!0,this.computeNode=e,this.count=n,this.workgroupSize=i,this.dispatchCount=0,this.version=1,this.name="",this.updateBeforeType=nr.OBJECT,this.onInitFunction=null,this.updateDispatchCount()}dispose(){this.dispatchEvent({type:"dispose"})}label(e){return this.name=e,this}updateDispatchCount(){const{count:e,workgroupSize:n}=this;let i=n[0];for(let s=1;s<n.length;s++)i*=n[s];this.dispatchCount=Math.ceil(e/i)}onInit(e){return this.onInitFunction=e,this}updateBefore({renderer:e}){e.compute(this)}setup(e){const n=this.computeNode.setup(e);if(n){const i=e.getNodeProperties(this);i.outputComputeNode=n.outputNode,n.outputNode=null}return n}generate(e,n){const{shaderStage:i}=e;if(i==="compute"){const s=this.computeNode.build(e,"void");s!==""&&e.addLineFlowCode(s,this)}else{const a=e.getNodeProperties(this).outputComputeNode;if(a)return a.build(e,n)}}}const fNe=(r,e,n)=>ct(new dNe(ct(r),e,n));Ve("compute",fNe);class pNe extends qn{static get type(){return"CacheNode"}constructor(e,n=!0){super(),this.node=e,this.parent=n,this.isCacheNode=!0}getNodeType(e){const n=e.getCache(),i=e.getCacheFromNode(this,this.parent);e.setCache(i);const s=this.node.getNodeType(e);return e.setCache(n),s}build(e,...n){const i=e.getCache(),s=e.getCacheFromNode(this,this.parent);e.setCache(s);const a=this.node.build(e,...n);return e.setCache(i),a}}const gT=(r,e)=>ct(new pNe(ct(r),e));Ve("cache",gT);class mNe extends qn{static get type(){return"BypassNode"}constructor(e,n){super(),this.isBypassNode=!0,this.outputNode=e,this.callNode=n}getNodeType(e){return this.outputNode.getNodeType(e)}generate(e){const n=this.callNode.build(e,"void");return n!==""&&e.addLineFlowCode(n,this),this.outputNode.build(e)}}const gNe=rt(mNe).setParameterLength(2);Ve("bypass",gNe);class Zne extends qn{static get type(){return"RemapNode"}constructor(e,n,i,s=He(0),a=He(1)){super(),this.node=e,this.inLowNode=n,this.inHighNode=i,this.outLowNode=s,this.outHighNode=a,this.doClamp=!0}setup(){const{node:e,inLowNode:n,inHighNode:i,outLowNode:s,outHighNode:a,doClamp:o}=this;let l=e.sub(n).div(i.sub(n));return o===!0&&(l=l.clamp()),l.mul(a.sub(s)).add(s)}}const yNe=rt(Zne,null,null,{doClamp:!1}).setParameterLength(3,5),vNe=rt(Zne).setParameterLength(3,5);Ve("remap",yNe);Ve("remapClamp",vNe);class yT extends qn{static get type(){return"ExpressionNode"}constructor(e="",n="void"){super(n),this.snippet=e}generate(e,n){const i=this.getNodeType(e),s=this.snippet;if(i==="void")e.addLineFlowCode(s,this);else return e.format(s,i,n)}}const Ab=rt(yT).setParameterLength(1,2),xNe=r=>(r?Ya(r,Ab("discard")):Ab("discard")).append();Ve("discard",xNe);class bNe extends Hi{static get type(){return"RenderOutputNode"}constructor(e,n,i){super("vec4"),this.colorNode=e,this.toneMapping=n,this.outputColorSpace=i,this.isRenderOutputNode=!0}setup({context:e}){let n=this.colorNode||e.color;const i=(this.toneMapping!==null?this.toneMapping:e.toneMapping)||to,s=(this.outputColorSpace!==null?this.outputColorSpace:e.outputColorSpace)||Po;return i!==to&&(n=n.toneMapping(i)),s!==Po&&s!==tr.workingColorSpace&&(n=n.workingToColorSpace(s)),n}}const _Ne=(r,e=null,n=null)=>ct(new bNe(ct(r),e,n));Ve("renderOutput",_Ne);class wNe extends Hi{static get type(){return"DebugNode"}constructor(e,n=null){super(),this.node=e,this.callback=n}getNodeType(e){return this.node.getNodeType(e)}setup(e){return this.node.build(e)}analyze(e){return this.node.build(e)}generate(e){const n=this.callback,i=this.node.build(e);let s="";return s+=`// #--- TSL Debug ---#
`,s+=e.flow.code.replace(/^\t/mg,"")+`
`,s+="/* ... */ "+i+` /* ... */
`,s+=`// #-----------------#
`,n!==null?n(s):console.log(s),i}}const SNe=(r,e=null)=>ct(new wNe(ct(r),e));Ve("debug",SNe);class TNe extends qn{static get type(){return"AttributeNode"}constructor(e,n=null){super(n),this.global=!0,this._attributeName=e}getHash(e){return this.getAttributeName(e)}getNodeType(e){let n=this.nodeType;if(n===null){const i=this.getAttributeName(e);if(e.hasGeometryAttribute(i)){const s=e.geometry.getAttribute(i);n=e.getTypeFromAttribute(s)}else n="float"}return n}setAttributeName(e){return this._attributeName=e,this}getAttributeName(){return this._attributeName}generate(e){const n=this.getAttributeName(e),i=this.getNodeType(e);if(e.hasGeometryAttribute(n)===!0){const a=e.geometry.getAttribute(n),o=e.getTypeFromAttribute(a),l=e.getAttribute(n,o);return e.shaderStage==="vertex"?e.format(l.name,o,i):uc(this).build(e,i)}else return console.warn(`AttributeNode: Vertex attribute "${n}" not found on geometry.`),e.generateConst(i)}serialize(e){super.serialize(e),e.global=this.global,e._attributeName=this._attributeName}deserialize(e){super.deserialize(e),this.global=e.global,this._attributeName=e._attributeName}}const vh=(r,e)=>ct(new TNe(r,e)),B_=(r=0)=>vh("uv"+(r>0?r:""),"vec2");class ENe extends qn{static get type(){return"TextureSizeNode"}constructor(e,n=null){super("uvec2"),this.isTextureSizeNode=!0,this.textureNode=e,this.levelNode=n}generate(e,n){const i=this.textureNode.build(e,"property"),s=this.levelNode===null?"0":this.levelNode.build(e,"int");return e.format(`${e.getMethod("textureDimensions")}( ${i}, ${s} )`,this.getNodeType(e),n)}}const wx=rt(ENe).setParameterLength(1,2);class MNe extends D_{static get type(){return"MaxMipLevelNode"}constructor(e){super(0),this._textureNode=e,this.updateType=nr.FRAME}get textureNode(){return this._textureNode}get texture(){return this._textureNode.value}update(){const e=this.texture,n=e.images,i=n&&n.length>0?n[0]&&n[0].image||n[0]:e.image;if(i&&i.width!==void 0){const{width:s,height:a}=i;this.value=Math.log2(Math.max(s,a))}}}const ANe=rt(MNe).setParameterLength(1);class j_ extends D_{static get type(){return"TextureNode"}constructor(e,n=null,i=null,s=null){super(e),this.isTextureNode=!0,this.uvNode=n,this.levelNode=i,this.biasNode=s,this.compareNode=null,this.depthNode=null,this.gradNode=null,this.sampler=!0,this.updateMatrix=!1,this.updateType=nr.NONE,this.referenceNode=null,this._value=e,this._matrixUniform=null,this.setUpdateMatrix(n===null)}set value(e){this.referenceNode?this.referenceNode.value=e:this._value=e}get value(){return this.referenceNode?this.referenceNode.value:this._value}getUniformHash(){return this.value.uuid}getNodeType(){return this.value.isDepthTexture===!0?"float":this.value.type===Vr?"uvec4":this.value.type===Cs?"ivec4":"vec4"}getInputType(){return"texture"}getDefaultUV(){return B_(this.value.channel)}updateReference(){return this.value}getTransformedUV(e){return this._matrixUniform===null&&(this._matrixUniform=jn(this.value.matrix)),this._matrixUniform.mul(Xe(e,1)).xy}setUpdateMatrix(e){return this.updateMatrix=e,this.updateType=e?nr.RENDER:nr.NONE,this}setupUV(e,n){const i=this.value;return e.isFlipY()&&(i.image instanceof ImageBitmap&&i.flipY===!0||i.isRenderTargetTexture===!0||i.isFramebufferTexture===!0||i.isDepthTexture===!0)&&(this.sampler?n=n.flipY():n=n.setY(Si(wx(this,this.levelNode).y).sub(n.y).sub(1))),n}setup(e){const n=e.getNodeProperties(this);n.referenceNode=this.referenceNode;const i=this.value;if(!i||i.isTexture!==!0)throw new Error("THREE.TSL: `texture( value )` function expects a valid instance of THREE.Texture().");let s=this.uvNode;(s===null||e.context.forceUVContext===!0)&&e.context.getUV&&(s=e.context.getUV(this)),s||(s=this.getDefaultUV()),this.updateMatrix===!0&&(s=this.getTransformedUV(s)),s=this.setupUV(e,s);let a=this.levelNode;a===null&&e.context.getTextureLevel&&(a=e.context.getTextureLevel(this)),n.uvNode=s,n.levelNode=a,n.biasNode=this.biasNode,n.compareNode=this.compareNode,n.gradNode=this.gradNode,n.depthNode=this.depthNode}generateUV(e,n){return n.build(e,this.sampler===!0?"vec2":"ivec2")}generateSnippet(e,n,i,s,a,o,l,c){const u=this.value;let h;return s?h=e.generateTextureLevel(u,n,i,s,o):a?h=e.generateTextureBias(u,n,i,a,o):c?h=e.generateTextureGrad(u,n,i,c,o):l?h=e.generateTextureCompare(u,n,i,l,o):this.sampler===!1?h=e.generateTextureLoad(u,n,i,o):h=e.generateTexture(u,n,i,o),h}generate(e,n){const i=this.value,s=e.getNodeProperties(this),a=super.generate(e,"property");if(/^sampler/.test(n))return a+"_sampler";if(e.isReference(n))return a;{const o=e.getDataFromNode(this);let l=o.propertyName;if(l===void 0){const{uvNode:h,levelNode:d,biasNode:f,compareNode:p,depthNode:g,gradNode:v}=s,x=this.generateUV(e,h),_=d?d.build(e,"float"):null,E=f?f.build(e,"float"):null,S=g?g.build(e,"int"):null,T=p?p.build(e,"float"):null,M=v?[v[0].build(e,"vec2"),v[1].build(e,"vec2")]:null,C=e.getVarFromNode(this);l=e.getPropertyName(C);const A=this.generateSnippet(e,a,x,_,E,S,T,M);e.addLineFlowCode(`${l} = ${A}`,this),o.snippet=A,o.propertyName=l}let c=l;const u=this.getNodeType(e);return e.needsToWorkingColorSpace(i)&&(c=OU(Ab(c,u),i.colorSpace).setup(e).build(e,u)),e.format(c,u,n)}}setSampler(e){return this.sampler=e,this}getSampler(){return this.sampler}uv(e){return console.warn("THREE.TextureNode: .uv() has been renamed. Use .sample() instead."),this.sample(e)}sample(e){const n=this.clone();return n.uvNode=ct(e),n.referenceNode=this.getSelf(),ct(n)}blur(e){const n=this.clone();n.biasNode=ct(e).mul(ANe(n)),n.referenceNode=this.getSelf();const i=n.value;return(i&&i.generateMipmaps===!1||i.minFilter===ei||i.magFilter===ei)&&(console.warn("THREE.TSL: texture().blur() requires mipmaps and sampling. Use .generateMipmaps=true and .minFilter/.magFilter=THREE.LinearFilter in the Texture."),n.biasNode=null),ct(n)}level(e){const n=this.clone();return n.levelNode=ct(e),n.referenceNode=this.getSelf(),ct(n)}size(e){return wx(this,e)}bias(e){const n=this.clone();return n.biasNode=ct(e),n.referenceNode=this.getSelf(),ct(n)}compare(e){const n=this.clone();return n.compareNode=ct(e),n.referenceNode=this.getSelf(),ct(n)}grad(e,n){const i=this.clone();return i.gradNode=[ct(e),ct(n)],i.referenceNode=this.getSelf(),ct(i)}depth(e){const n=this.clone();return n.depthNode=ct(e),n.referenceNode=this.getSelf(),ct(n)}serialize(e){super.serialize(e),e.value=this.value.toJSON(e.meta).uuid,e.sampler=this.sampler,e.updateMatrix=this.updateMatrix,e.updateType=this.updateType}deserialize(e){super.deserialize(e),this.value=e.meta.textures[e.value],this.sampler=e.sampler,this.updateMatrix=e.updateMatrix,this.updateType=e.updateType}update(){const e=this.value,n=this._matrixUniform;n!==null&&(n.value=e.matrix),e.matrixAutoUpdate===!0&&e.updateMatrix()}clone(){const e=new this.constructor(this.value,this.uvNode,this.levelNode,this.biasNode);return e.sampler=this.sampler,e}}const xr=rt(j_).setParameterLength(1,4),Hl=(...r)=>xr(...r).setSampler(!1);class Qne extends D_{static get type(){return"BufferNode"}constructor(e,n,i=0){super(e,n),this.isBufferNode=!0,this.bufferType=n,this.bufferCount=i}getElementType(e){return this.getNodeType(e)}getInputType(){return"buffer"}}const Jne=(r,e,n)=>ct(new Qne(r,e,n));class CNe extends I_{static get type(){return"UniformArrayElementNode"}constructor(e,n){super(e,n),this.isArrayBufferElementNode=!0}generate(e){const n=super.generate(e),i=this.getNodeType(),s=this.node.getPaddedType();return e.format(n,s,i)}}class NNe extends Qne{static get type(){return"UniformArrayNode"}constructor(e,n=null){super(null),this.array=e,this.elementType=n===null?nE(e[0]):n,this.paddedType=this.getPaddedType(),this.updateType=nr.RENDER,this.isArrayBufferNode=!0}getNodeType(){return this.paddedType}getElementType(){return this.elementType}getPaddedType(){const e=this.elementType;let n="vec4";return e==="mat2"?n="mat2":/mat/.test(e)===!0?n="mat4":e.charAt(0)==="i"?n="ivec4":e.charAt(0)==="u"&&(n="uvec4"),n}update(){const{array:e,value:n}=this,i=this.elementType;if(i==="float"||i==="int"||i==="uint")for(let s=0;s<e.length;s++){const a=s*4;n[a]=e[s]}else if(i==="color")for(let s=0;s<e.length;s++){const a=s*4,o=e[s];n[a]=o.r,n[a+1]=o.g,n[a+2]=o.b||0}else if(i==="mat2")for(let s=0;s<e.length;s++){const a=s*4,o=e[s];n[a]=o.elements[0],n[a+1]=o.elements[1],n[a+2]=o.elements[2],n[a+3]=o.elements[3]}else if(i==="mat3")for(let s=0;s<e.length;s++){const a=s*16,o=e[s];n[a]=o.elements[0],n[a+1]=o.elements[1],n[a+2]=o.elements[2],n[a+4]=o.elements[3],n[a+5]=o.elements[4],n[a+6]=o.elements[5],n[a+8]=o.elements[6],n[a+9]=o.elements[7],n[a+10]=o.elements[8],n[a+15]=1}else if(i==="mat4")for(let s=0;s<e.length;s++){const a=s*16,o=e[s];for(let l=0;l<o.elements.length;l++)n[a+l]=o.elements[l]}else for(let s=0;s<e.length;s++){const a=s*4,o=e[s];n[a]=o.x,n[a+1]=o.y,n[a+2]=o.z||0,n[a+3]=o.w||0}}setup(e){const n=this.array.length,i=this.elementType;let s=Float32Array;const a=this.paddedType,o=e.getTypeLength(a);return i.charAt(0)==="i"&&(s=Int32Array),i.charAt(0)==="u"&&(s=Uint32Array),this.value=new s(n*o),this.bufferCount=n,this.bufferType=a,super.setup(e)}element(e){return ct(new CNe(this,ct(e)))}}const Ac=(r,e)=>ct(new NNe(r,e)),ere=jn(0,"uint").setGroup(SU("cameraIndex")).toVarying("v_cameraIndex"),Qf=jn("float").label("cameraNear").setGroup(kn).onRenderUpdate(({camera:r})=>r.near),Jf=jn("float").label("cameraFar").setGroup(kn).onRenderUpdate(({camera:r})=>r.far),IU=ut(({camera:r})=>{let e;if(r.isArrayCamera&&r.cameras.length>0){const n=[];for(const s of r.cameras)n.push(s.projectionMatrix);e=Ac(n).setGroup(kn).label("cameraProjectionMatrices").element(ere).toVar("cameraProjectionMatrix")}else e=jn("mat4").label("cameraProjectionMatrix").setGroup(kn).onRenderUpdate(({camera:n})=>n.projectionMatrix);return e}).once()(),Ah=ut(({camera:r})=>{let e;if(r.isArrayCamera&&r.cameras.length>0){const n=[];for(const s of r.cameras)n.push(s.matrixWorldInverse);e=Ac(n).setGroup(kn).label("cameraViewMatrices").element(ere).toVar("cameraViewMatrix")}else e=jn("mat4").label("cameraViewMatrix").setGroup(kn).onRenderUpdate(({camera:n})=>n.matrixWorldInverse);return e}).once()(),PNe=jn(new pe).label("cameraPosition").setGroup(kn).onRenderUpdate(({camera:r},e)=>e.value.setFromMatrixPosition(r.matrixWorld)),wH=new b_;class Fr extends qn{static get type(){return"Object3DNode"}constructor(e,n=null){super(),this.scope=e,this.object3d=n,this.updateType=nr.OBJECT,this._uniformNode=new D_(null)}getNodeType(){const e=this.scope;if(e===Fr.WORLD_MATRIX)return"mat4";if(e===Fr.POSITION||e===Fr.VIEW_POSITION||e===Fr.DIRECTION||e===Fr.SCALE)return"vec3";if(e===Fr.RADIUS)return"float"}update(e){const n=this.object3d,i=this._uniformNode,s=this.scope;if(s===Fr.WORLD_MATRIX)i.value=n.matrixWorld;else if(s===Fr.POSITION)i.value=i.value||new pe,i.value.setFromMatrixPosition(n.matrixWorld);else if(s===Fr.SCALE)i.value=i.value||new pe,i.value.setFromMatrixScale(n.matrixWorld);else if(s===Fr.DIRECTION)i.value=i.value||new pe,n.getWorldDirection(i.value);else if(s===Fr.VIEW_POSITION){const a=e.camera;i.value=i.value||new pe,i.value.setFromMatrixPosition(n.matrixWorld),i.value.applyMatrix4(a.matrixWorldInverse)}else if(s===Fr.RADIUS){const a=e.object.geometry;a.boundingSphere===null&&a.computeBoundingSphere(),wH.copy(a.boundingSphere).applyMatrix4(n.matrixWorld),i.value=wH.radius}}generate(e){const n=this.scope;return n===Fr.WORLD_MATRIX?this._uniformNode.nodeType="mat4":n===Fr.POSITION||n===Fr.VIEW_POSITION||n===Fr.DIRECTION||n===Fr.SCALE?this._uniformNode.nodeType="vec3":n===Fr.RADIUS&&(this._uniformNode.nodeType="float"),this._uniformNode.build(e)}serialize(e){super.serialize(e),e.scope=this.scope}deserialize(e){super.deserialize(e),this.scope=e.scope}}Fr.WORLD_MATRIX="worldMatrix";Fr.POSITION="position";Fr.SCALE="scale";Fr.VIEW_POSITION="viewPosition";Fr.DIRECTION="direction";Fr.RADIUS="radius";const RNe=rt(Fr,Fr.POSITION).setParameterLength(1);class vl extends Fr{static get type(){return"ModelNode"}constructor(e){super(e)}update(e){this.object3d=e.object,super.update(e)}}vl.DIRECTION;const Pp=xt(vl,vl.WORLD_MATRIX);vl.POSITION;vl.SCALE;vl.VIEW_POSITION;vl.RADIUS;const ONe=jn(new zn).onObjectUpdate(({object:r},e)=>e.value.getNormalMatrix(r.matrixWorld)),tA=ut(r=>r.renderer.nodes.modelViewMatrix||kNe).once()().toVar("modelViewMatrix"),kNe=Ah.mul(Pp),nA=vh("position","vec3"),ha=nA.toVarying("positionLocal"),SH=nA.toVarying("positionPrevious"),Cb=Pp.mul(ha).xyz.toVarying("v_positionWorld").context({needsPositionReassign:!0}),tre=ha.transformDirection(Pp).toVarying("v_positionWorldDirection").normalize().toVar("positionWorldDirection").context({needsPositionReassign:!0}),es=ut(r=>r.context.setupPositionView(),"vec3").once()().toVarying("v_positionView").context({needsPositionReassign:!0}),wi=es.negate().toVarying("v_positionViewDirection").normalize().toVar("positionViewDirection");class INe extends qn{static get type(){return"FrontFacingNode"}constructor(){super("bool"),this.isFrontFacingNode=!0}generate(e){const{renderer:n,material:i}=e;return n.coordinateSystem===Ka&&i.side===Wr?"false":e.getFrontFacing()}}const DNe=xt(INe),rA=He(DNe).mul(2).sub(1),nre=vh("normal","vec3"),Kc=ut(r=>r.geometry.hasAttribute("normal")===!1?(console.warn('THREE.TSL: Vertex attribute "normal" not found on geometry.'),Xe(0,1,0)):nre,"vec3").once()().toVar("normalLocal"),LNe=es.dFdx().cross(es.dFdy()).normalize().toVar("normalFlat"),oc=ut(r=>{let e;return r.material.flatShading===!0?e=LNe:e=uc(ire(Kc),"v_normalView").normalize(),e},"vec3").once()().toVar("normalView"),rre=uc(oc.transformDirection(Ah),"v_normalWorld").normalize().toVar("normalWorld"),Ji=ut(r=>r.context.setupNormal().context({getUV:null}),"vec3").once()().mul(rA).toVar("transformedNormalView"),DU=Ji.transformDirection(Ah).toVar("transformedNormalWorld"),tx=ut(r=>r.context.setupClearcoatNormal().context({getUV:null}),"vec3").once()().mul(rA).toVar("transformedClearcoatNormalView"),FNe=ut(([r,e=Pp])=>{const n=Pa(e),i=r.div(Xe(n[0].dot(n[0]),n[1].dot(n[1]),n[2].dot(n[2])));return n.mul(i).xyz}),ire=ut(([r],e)=>{const n=e.renderer.nodes.modelNormalViewMatrix;if(n!==null)return n.transformDirection(r);const i=ONe.mul(r);return Ah.transformDirection(i)}),TH=new yl,QP=new br,BNe=jn(0).onReference(({material:r})=>r).onObjectUpdate(({material:r})=>r.refractionRatio),JP=jn(1).onReference(({material:r})=>r).onObjectUpdate(function({material:r,scene:e}){return r.envMap?r.envMapIntensity:e.environmentIntensity}),sre=jn(new br).onReference(function(r){return r.material}).onObjectUpdate(function({material:r,scene:e}){const n=e.environment!==null&&r.envMap===null?e.environmentRotation:r.envMapRotation;return n?(TH.copy(n),QP.makeRotationFromEuler(TH)):QP.identity(),QP}),jNe=wi.negate().reflect(Ji),UNe=wi.negate().refract(Ji,BNe),zNe=jNe.transformDirection(Ah).toVar("reflectVector"),$Ne=UNe.transformDirection(Ah).toVar("reflectVector");class GNe extends j_{static get type(){return"CubeTextureNode"}constructor(e,n=null,i=null,s=null){super(e,n,i,s),this.isCubeTextureNode=!0}getInputType(){return"cubeTexture"}getDefaultUV(){const e=this.value;return e.mapping===ml?zNe:e.mapping===gl?$Ne:(console.error('THREE.CubeTextureNode: Mapping "%s" not supported.',e.mapping),Xe(0,0,0))}setUpdateMatrix(){}setupUV(e,n){const i=this.value;return(e.renderer.coordinateSystem===Bd||!i.isRenderTargetTexture)&&(n=Xe(n.x.negate(),n.yz)),sre.mul(n)}generateUV(e,n){return n.build(e,"vec3")}}const Nb=rt(GNe).setParameterLength(1,4).setName("cubeTexture");class VNe extends I_{static get type(){return"ReferenceElementNode"}constructor(e,n){super(e,n),this.referenceNode=e,this.isReferenceElementNode=!0}getNodeType(){return this.referenceNode.uniformType}generate(e){const n=super.generate(e),i=this.referenceNode.getNodeType(),s=this.getNodeType();return e.format(n,i,s)}}class LU extends qn{static get type(){return"ReferenceNode"}constructor(e,n,i=null,s=null){super(),this.property=e,this.uniformType=n,this.object=i,this.count=s,this.properties=e.split("."),this.reference=i,this.node=null,this.group=null,this.name=null,this.updateType=nr.OBJECT}element(e){return ct(new VNe(this,ct(e)))}setGroup(e){return this.group=e,this}label(e){return this.name=e,this}setNodeType(e){let n=null;this.count!==null?n=Jne(null,e,this.count):Array.isArray(this.getValueFromReference())?n=Ac(null,e):e==="texture"?n=xr(null):e==="cubeTexture"?n=Nb(null):n=jn(null,e),this.group!==null&&n.setGroup(this.group),this.name!==null&&n.label(this.name),this.node=n.getSelf()}getNodeType(e){return this.node===null&&(this.updateReference(e),this.updateValue()),this.node.getNodeType(e)}getValueFromReference(e=this.reference){const{properties:n}=this;let i=e[n[0]];for(let s=1;s<n.length;s++)i=i[n[s]];return i}updateReference(e){return this.reference=this.object!==null?this.object:e.object,this.reference}setup(){return this.updateValue(),this.node}update(){this.updateValue()}updateValue(){this.node===null&&this.setNodeType(this.uniformType);const e=this.getValueFromReference();Array.isArray(e)?this.node.array=e:this.node.value=e}}const Gr=(r,e,n)=>ct(new LU(r,e,n)),EH=(r,e,n,i)=>ct(new LU(r,e,i,n));class HNe extends LU{static get type(){return"MaterialReferenceNode"}constructor(e,n,i=null){super(e,n,i),this.material=i,this.isMaterialReferenceNode=!0}updateReference(e){return this.reference=this.material!==null?this.material:e.material,this.reference}}const xd=(r,e,n=null)=>ct(new HNe(r,e,n)),are=ut(r=>(r.geometry.hasAttribute("tangent")===!1&&r.geometry.computeTangents(),vh("tangent","vec4")))(),FU=are.xyz.toVar("tangentLocal"),ore=tA.mul(Bn(FU,0)).xyz.toVarying("v_tangentView").normalize().toVar("tangentView"),WNe=r=>r.mul(are.w).xyz,qNe=uc(WNe(oc.cross(ore)),"v_bitangentView").normalize().toVar("bitangentView"),nx=Pa(ore,qNe,oc),XNe=(()=>{let r=Wg.cross(wi);return r=r.cross(Wg).normalize(),r=si(r,Ji,qf.mul(Wu.oneMinus()).oneMinus().pow2().pow2()).normalize(),r})(),KNe=ut(r=>{const{eye_pos:e,surf_norm:n,mapN:i,uv:s}=r,a=e.dFdx(),o=e.dFdy(),l=s.dFdx(),c=s.dFdy(),u=n,h=o.cross(u),d=u.cross(a),f=h.mul(l.x).add(d.mul(c.x)),p=h.mul(l.y).add(d.mul(c.y)),g=f.dot(f).max(p.dot(p)),v=rA.mul(g.inverseSqrt());return Ra(f.mul(i.x,v),p.mul(i.y,v),u.mul(i.z)).normalize()});class YNe extends Hi{static get type(){return"NormalMapNode"}constructor(e,n=null){super("vec3"),this.node=e,this.scaleNode=n,this.normalMapType=ph}setup(e){const{normalMapType:n,scaleNode:i}=this;let s=this.node.mul(2).sub(1);i!==null&&(s=Xe(s.xy.mul(i),s.z));let a=null;return n===tee?a=ire(s):n===ph&&(e.hasGeometryAttribute("tangent")===!0?a=nx.mul(s).normalize():a=KNe({eye_pos:es,surf_norm:oc,mapN:s,uv:B_()})),a}}const MH=rt(YNe).setParameterLength(1,2),ZNe=ut(({textureNode:r,bumpScale:e})=>{const n=s=>r.cache().context({getUV:a=>s(a.uvNode||B_()),forceUVContext:!0}),i=He(n(s=>s));return _t(He(n(s=>s.add(s.dFdx()))).sub(i),He(n(s=>s.add(s.dFdy()))).sub(i)).mul(e)}),QNe=ut(r=>{const{surf_pos:e,surf_norm:n,dHdxy:i}=r,s=e.dFdx().normalize(),a=e.dFdy().normalize(),o=n,l=a.cross(o),c=o.cross(s),u=s.dot(l).mul(rA),h=u.sign().mul(i.x.mul(l).add(i.y.mul(c)));return u.abs().mul(n).sub(h).normalize()});class JNe extends Hi{static get type(){return"BumpMapNode"}constructor(e,n=null){super("vec3"),this.textureNode=e,this.scaleNode=n}setup(){const e=this.scaleNode!==null?this.scaleNode:1,n=ZNe({textureNode:this.textureNode,bumpScale:e});return QNe({surf_pos:es,surf_norm:oc,dHdxy:n})}}const ePe=rt(JNe).setParameterLength(1,2),AH=new Map;class $e extends qn{static get type(){return"MaterialNode"}constructor(e){super(),this.scope=e}getCache(e,n){let i=AH.get(e);return i===void 0&&(i=xd(e,n),AH.set(e,i)),i}getFloat(e){return this.getCache(e,"float")}getColor(e){return this.getCache(e,"color")}getTexture(e){return this.getCache(e==="map"?"map":e+"Map","texture")}setup(e){const n=e.context.material,i=this.scope;let s=null;if(i===$e.COLOR){const a=n.color!==void 0?this.getColor(i):Xe();n.map&&n.map.isTexture===!0?s=a.mul(this.getTexture("map")):s=a}else if(i===$e.OPACITY){const a=this.getFloat(i);n.alphaMap&&n.alphaMap.isTexture===!0?s=a.mul(this.getTexture("alpha")):s=a}else if(i===$e.SPECULAR_STRENGTH)n.specularMap&&n.specularMap.isTexture===!0?s=this.getTexture("specular").r:s=He(1);else if(i===$e.SPECULAR_INTENSITY){const a=this.getFloat(i);n.specularIntensityMap&&n.specularIntensityMap.isTexture===!0?s=a.mul(this.getTexture(i).a):s=a}else if(i===$e.SPECULAR_COLOR){const a=this.getColor(i);n.specularColorMap&&n.specularColorMap.isTexture===!0?s=a.mul(this.getTexture(i).rgb):s=a}else if(i===$e.ROUGHNESS){const a=this.getFloat(i);n.roughnessMap&&n.roughnessMap.isTexture===!0?s=a.mul(this.getTexture(i).g):s=a}else if(i===$e.METALNESS){const a=this.getFloat(i);n.metalnessMap&&n.metalnessMap.isTexture===!0?s=a.mul(this.getTexture(i).b):s=a}else if(i===$e.EMISSIVE){const a=this.getFloat("emissiveIntensity"),o=this.getColor(i).mul(a);n.emissiveMap&&n.emissiveMap.isTexture===!0?s=o.mul(this.getTexture(i)):s=o}else if(i===$e.NORMAL)n.normalMap?(s=MH(this.getTexture("normal"),this.getCache("normalScale","vec2")),s.normalMapType=n.normalMapType):n.bumpMap?s=ePe(this.getTexture("bump").r,this.getFloat("bumpScale")):s=oc;else if(i===$e.CLEARCOAT){const a=this.getFloat(i);n.clearcoatMap&&n.clearcoatMap.isTexture===!0?s=a.mul(this.getTexture(i).r):s=a}else if(i===$e.CLEARCOAT_ROUGHNESS){const a=this.getFloat(i);n.clearcoatRoughnessMap&&n.clearcoatRoughnessMap.isTexture===!0?s=a.mul(this.getTexture(i).r):s=a}else if(i===$e.CLEARCOAT_NORMAL)n.clearcoatNormalMap?s=MH(this.getTexture(i),this.getCache(i+"Scale","vec2")):s=oc;else if(i===$e.SHEEN){const a=this.getColor("sheenColor").mul(this.getFloat("sheen"));n.sheenColorMap&&n.sheenColorMap.isTexture===!0?s=a.mul(this.getTexture("sheenColor").rgb):s=a}else if(i===$e.SHEEN_ROUGHNESS){const a=this.getFloat(i);n.sheenRoughnessMap&&n.sheenRoughnessMap.isTexture===!0?s=a.mul(this.getTexture(i).a):s=a,s=s.clamp(.07,1)}else if(i===$e.ANISOTROPY)if(n.anisotropyMap&&n.anisotropyMap.isTexture===!0){const a=this.getTexture(i);s=wU(Ev.x,Ev.y,Ev.y.negate(),Ev.x).mul(a.rg.mul(2).sub(_t(1)).normalize().mul(a.b))}else s=Ev;else if(i===$e.IRIDESCENCE_THICKNESS){const a=Gr("1","float",n.iridescenceThicknessRange);if(n.iridescenceThicknessMap){const o=Gr("0","float",n.iridescenceThicknessRange);s=a.sub(o).mul(this.getTexture(i).g).add(o)}else s=a}else if(i===$e.TRANSMISSION){const a=this.getFloat(i);n.transmissionMap?s=a.mul(this.getTexture(i).r):s=a}else if(i===$e.THICKNESS){const a=this.getFloat(i);n.thicknessMap?s=a.mul(this.getTexture(i).g):s=a}else if(i===$e.IOR)s=this.getFloat(i);else if(i===$e.LIGHT_MAP)s=this.getTexture(i).rgb.mul(this.getFloat("lightMapIntensity"));else if(i===$e.AO)s=this.getTexture(i).r.sub(1).mul(this.getFloat("aoMapIntensity")).add(1);else{const a=this.getNodeType(e);s=this.getCache(i,a)}return s}}$e.ALPHA_TEST="alphaTest";$e.COLOR="color";$e.OPACITY="opacity";$e.SHININESS="shininess";$e.SPECULAR="specular";$e.SPECULAR_STRENGTH="specularStrength";$e.SPECULAR_INTENSITY="specularIntensity";$e.SPECULAR_COLOR="specularColor";$e.REFLECTIVITY="reflectivity";$e.ROUGHNESS="roughness";$e.METALNESS="metalness";$e.NORMAL="normal";$e.CLEARCOAT="clearcoat";$e.CLEARCOAT_ROUGHNESS="clearcoatRoughness";$e.CLEARCOAT_NORMAL="clearcoatNormal";$e.EMISSIVE="emissive";$e.ROTATION="rotation";$e.SHEEN="sheen";$e.SHEEN_ROUGHNESS="sheenRoughness";$e.ANISOTROPY="anisotropy";$e.IRIDESCENCE="iridescence";$e.IRIDESCENCE_IOR="iridescenceIOR";$e.IRIDESCENCE_THICKNESS="iridescenceThickness";$e.IOR="ior";$e.TRANSMISSION="transmission";$e.THICKNESS="thickness";$e.ATTENUATION_DISTANCE="attenuationDistance";$e.ATTENUATION_COLOR="attenuationColor";$e.LINE_SCALE="scale";$e.LINE_DASH_SIZE="dashSize";$e.LINE_GAP_SIZE="gapSize";$e.LINE_WIDTH="linewidth";$e.LINE_DASH_OFFSET="dashOffset";$e.POINT_SIZE="size";$e.DISPERSION="dispersion";$e.LIGHT_MAP="light";$e.AO="ao";const tPe=xt($e,$e.ALPHA_TEST),nPe=xt($e,$e.COLOR),rPe=xt($e,$e.SHININESS),iPe=xt($e,$e.EMISSIVE),lre=xt($e,$e.OPACITY),sPe=xt($e,$e.SPECULAR),CH=xt($e,$e.SPECULAR_INTENSITY),aPe=xt($e,$e.SPECULAR_COLOR),vT=xt($e,$e.SPECULAR_STRENGTH),eR=xt($e,$e.REFLECTIVITY),oPe=xt($e,$e.ROUGHNESS),lPe=xt($e,$e.METALNESS),cPe=xt($e,$e.NORMAL),uPe=xt($e,$e.CLEARCOAT),hPe=xt($e,$e.CLEARCOAT_ROUGHNESS),dPe=xt($e,$e.CLEARCOAT_NORMAL),fPe=xt($e,$e.ROTATION),pPe=xt($e,$e.SHEEN),mPe=xt($e,$e.SHEEN_ROUGHNESS),gPe=xt($e,$e.ANISOTROPY),yPe=xt($e,$e.IRIDESCENCE),vPe=xt($e,$e.IRIDESCENCE_IOR),xPe=xt($e,$e.IRIDESCENCE_THICKNESS),bPe=xt($e,$e.TRANSMISSION),_Pe=xt($e,$e.THICKNESS),wPe=xt($e,$e.IOR),SPe=xt($e,$e.ATTENUATION_DISTANCE),TPe=xt($e,$e.ATTENUATION_COLOR),EPe=xt($e,$e.LINE_SCALE),MPe=xt($e,$e.LINE_DASH_SIZE),APe=xt($e,$e.LINE_GAP_SIZE);$e.LINE_WIDTH;const CPe=xt($e,$e.LINE_DASH_OFFSET),NPe=xt($e,$e.POINT_SIZE),PPe=xt($e,$e.DISPERSION),cre=xt($e,$e.LIGHT_MAP),RPe=xt($e,$e.AO),Ev=jn(new dt).onReference(function(r){return r.material}).onRenderUpdate(function({material:r}){this.value.set(r.anisotropy*Math.cos(r.anisotropyRotation),r.anisotropy*Math.sin(r.anisotropyRotation))}),ure=ut(r=>r.context.setupModelViewProjection(),"vec4").once()().toVarying("v_modelViewProjection");class ai extends qn{static get type(){return"IndexNode"}constructor(e){super("uint"),this.scope=e,this.isIndexNode=!0}generate(e){const n=this.getNodeType(e),i=this.scope;let s;if(i===ai.VERTEX)s=e.getVertexIndex();else if(i===ai.INSTANCE)s=e.getInstanceIndex();else if(i===ai.DRAW)s=e.getDrawIndex();else if(i===ai.INVOCATION_LOCAL)s=e.getInvocationLocalIndex();else if(i===ai.INVOCATION_SUBGROUP)s=e.getInvocationSubgroupIndex();else if(i===ai.SUBGROUP)s=e.getSubgroupIndex();else throw new Error("THREE.IndexNode: Unknown scope: "+i);let a;return e.shaderStage==="vertex"||e.shaderStage==="compute"?a=s:a=uc(this).build(e,n),a}}ai.VERTEX="vertex";ai.INSTANCE="instance";ai.SUBGROUP="subgroup";ai.INVOCATION_LOCAL="invocationLocal";ai.INVOCATION_SUBGROUP="invocationSubgroup";ai.DRAW="draw";const OPe=xt(ai,ai.VERTEX),BU=xt(ai,ai.INSTANCE);ai.SUBGROUP;ai.INVOCATION_SUBGROUP;ai.INVOCATION_LOCAL;const kPe=xt(ai,ai.DRAW);class IPe extends qn{static get type(){return"InstanceNode"}constructor(e,n,i){super("void"),this.count=e,this.instanceMatrix=n,this.instanceColor=i,this.instanceMatrixNode=null,this.instanceColorNode=null,this.updateType=nr.FRAME,this.buffer=null,this.bufferColor=null}setup(e){const{count:n,instanceMatrix:i,instanceColor:s}=this;let{instanceMatrixNode:a,instanceColorNode:o}=this;if(a===null){if(n<=1e3)a=Jne(i.array,"mat4",Math.max(n,1)).element(BU);else{const c=new Eye(i.array,16,1);this.buffer=c;const u=i.usage===Sg?_H:bH,h=[u(c,"vec4",16,0),u(c,"vec4",16,4),u(c,"vec4",16,8),u(c,"vec4",16,12)];a=Hg(...h)}this.instanceMatrixNode=a}if(s&&o===null){const c=new Lge(s.array,3),u=s.usage===Sg?_H:bH;this.bufferColor=c,o=Xe(u(c,"vec3",3,0)),this.instanceColorNode=o}const l=a.mul(ha).xyz;if(ha.assign(l),e.hasGeometryAttribute("normal")){const c=FNe(Kc,a);Kc.assign(c)}this.instanceColorNode!==null&&iE("vec3","vInstanceColor").assign(this.instanceColorNode)}update(){this.instanceMatrix.usage!==Sg&&this.buffer!==null&&this.instanceMatrix.version!==this.buffer.version&&(this.buffer.version=this.instanceMatrix.version),this.instanceColor&&this.instanceColor.usage!==Sg&&this.bufferColor!==null&&this.instanceColor.version!==this.bufferColor.version&&(this.bufferColor.version=this.instanceColor.version)}}class DPe extends IPe{static get type(){return"InstancedMeshNode"}constructor(e){const{count:n,instanceMatrix:i,instanceColor:s}=e;super(n,i,s),this.instancedMesh=e}}const LPe=rt(DPe).setParameterLength(1);class FPe extends qn{static get type(){return"BatchNode"}constructor(e){super("void"),this.batchMesh=e,this.batchingIdNode=null}setup(e){this.batchingIdNode===null&&(e.getDrawIndex()===null?this.batchingIdNode=BU:this.batchingIdNode=kPe);const i=ut(([g])=>{const v=Si(wx(Hl(this.batchMesh._indirectTexture),0).x),x=Si(g).mod(v),_=Si(g).div(v);return Hl(this.batchMesh._indirectTexture,$u(x,_)).x}).setLayout({name:"getIndirectIndex",type:"uint",inputs:[{name:"id",type:"int"}]})(Si(this.batchingIdNode)),s=this.batchMesh._matricesTexture,a=Si(wx(Hl(s),0).x),o=He(i).mul(4).toInt().toVar(),l=o.mod(a),c=o.div(a),u=Hg(Hl(s,$u(l,c)),Hl(s,$u(l.add(1),c)),Hl(s,$u(l.add(2),c)),Hl(s,$u(l.add(3),c))),h=this.batchMesh._colorsTexture;if(h!==null){const v=ut(([x])=>{const _=Si(wx(Hl(h),0).x),E=x,S=E.mod(_),T=E.div(_);return Hl(h,$u(S,T)).rgb}).setLayout({name:"getBatchingColor",type:"vec3",inputs:[{name:"id",type:"int"}]})(i);iE("vec3","vBatchColor").assign(v)}const d=Pa(u);ha.assign(u.mul(ha));const f=Kc.div(Xe(d[0].dot(d[0]),d[1].dot(d[1]),d[2].dot(d[2]))),p=d.mul(f).xyz;Kc.assign(p),e.hasGeometryAttribute("tangent")&&FU.mulAssign(d)}}const BPe=rt(FPe).setParameterLength(1),NH=new WeakMap;class jPe extends qn{static get type(){return"SkinningNode"}constructor(e){super("void"),this.skinnedMesh=e,this.updateType=nr.OBJECT,this.skinIndexNode=vh("skinIndex","uvec4"),this.skinWeightNode=vh("skinWeight","vec4"),this.bindMatrixNode=Gr("bindMatrix","mat4"),this.bindMatrixInverseNode=Gr("bindMatrixInverse","mat4"),this.boneMatricesNode=EH("skeleton.boneMatrices","mat4",e.skeleton.bones.length),this.positionNode=ha,this.toPositionNode=ha,this.previousBoneMatricesNode=null}getSkinnedPosition(e=this.boneMatricesNode,n=this.positionNode){const{skinIndexNode:i,skinWeightNode:s,bindMatrixNode:a,bindMatrixInverseNode:o}=this,l=e.element(i.x),c=e.element(i.y),u=e.element(i.z),h=e.element(i.w),d=a.mul(n),f=Ra(l.mul(s.x).mul(d),c.mul(s.y).mul(d),u.mul(s.z).mul(d),h.mul(s.w).mul(d));return o.mul(f).xyz}getSkinnedNormal(e=this.boneMatricesNode,n=Kc){const{skinIndexNode:i,skinWeightNode:s,bindMatrixNode:a,bindMatrixInverseNode:o}=this,l=e.element(i.x),c=e.element(i.y),u=e.element(i.z),h=e.element(i.w);let d=Ra(s.x.mul(l),s.y.mul(c),s.z.mul(u),s.w.mul(h));return d=o.mul(d).mul(a),d.transformDirection(n).xyz}getPreviousSkinnedPosition(e){const n=e.object;return this.previousBoneMatricesNode===null&&(n.skeleton.previousBoneMatrices=new Float32Array(n.skeleton.boneMatrices),this.previousBoneMatricesNode=EH("skeleton.previousBoneMatrices","mat4",n.skeleton.bones.length)),this.getSkinnedPosition(this.previousBoneMatricesNode,SH)}needsPreviousBoneMatrices(e){const n=e.renderer.getMRT();return n&&n.has("velocity")||Sne(e.object).useVelocity===!0}setup(e){this.needsPreviousBoneMatrices(e)&&SH.assign(this.getPreviousSkinnedPosition(e));const n=this.getSkinnedPosition();if(this.toPositionNode&&this.toPositionNode.assign(n),e.hasGeometryAttribute("normal")){const i=this.getSkinnedNormal();Kc.assign(i),e.hasGeometryAttribute("tangent")&&FU.assign(i)}return n}generate(e,n){if(n!=="void")return super.generate(e,n)}update(e){const n=e.object&&e.object.skeleton?e.object.skeleton:this.skinnedMesh.skeleton;NH.get(n)!==e.frameId&&(NH.set(n,e.frameId),this.previousBoneMatricesNode!==null&&n.previousBoneMatrices.set(n.boneMatrices),n.update())}}const UPe=r=>ct(new jPe(r));class zPe extends qn{static get type(){return"LoopNode"}constructor(e=[]){super(),this.params=e}getVarName(e){return String.fromCharCode(105+e)}getProperties(e){const n=e.getNodeProperties(this);if(n.stackNode!==void 0)return n;const i={};for(let a=0,o=this.params.length-1;a<o;a++){const l=this.params[a],c=l.isNode!==!0&&l.name||this.getVarName(a),u=l.isNode!==!0&&l.type||"int";i[c]=Ab(c,u)}const s=e.addStack();return n.returnsNode=this.params[this.params.length-1](i,s,e),n.stackNode=s,e.removeStack(),n}getNodeType(e){const{returnsNode:n}=this.getProperties(e);return n?n.getNodeType(e):"void"}setup(e){this.getProperties(e)}generate(e){const n=this.getProperties(e),i=this.params,s=n.stackNode;for(let l=0,c=i.length-1;l<c;l++){const u=i[l];let h=!1,d=null,f=null,p=null,g=null,v=null,x=null;u.isNode?u.getNodeType(e)==="bool"?(h=!0,g="bool",f=u.build(e,g)):(g="int",p=this.getVarName(l),d="0",f=u.build(e,g),v="<"):(g=u.type||"int",p=u.name||this.getVarName(l),d=u.start,f=u.end,v=u.condition,x=u.update,typeof d=="number"?d=e.generateConst(g,d):d&&d.isNode&&(d=d.build(e,g)),typeof f=="number"?f=e.generateConst(g,f):f&&f.isNode&&(f=f.build(e,g)),d!==void 0&&f===void 0?(d=d+" - 1",f="0",v=">="):f!==void 0&&d===void 0&&(d="0",v="<"),v===void 0&&(Number(d)>Number(f)?v=">=":v="<"));let _;if(h)_=`while ( ${f} )`;else{const E={start:d,end:f},S=E.start,T=E.end;let M="",C="",A="";x||(g==="int"||g==="uint"?v.includes("<")?x="++":x="--":v.includes("<")?x="+= 1.":x="-= 1."),M+=e.getVar(g,p)+" = "+S,C+=p+" "+v+" "+T,A+=p+" "+x,_=`for ( ${M}; ${C}; ${A} )`}e.addFlowCode((l===0?`
`:"")+e.tab+_+` {

`).addFlowTab()}const a=s.build(e,"void"),o=n.returnsNode?n.returnsNode.build(e):"";e.removeFlowTab().addFlowCode(`
`+e.tab+a);for(let l=0,c=this.params.length-1;l<c;l++)e.addFlowCode((l===0?"":e.tab)+`}

`).removeFlowTab();return e.addFlowTab(),o}}const ec=(...r)=>ct(new zPe(Vg(r,"int"))).append(),$Pe=()=>Ab("break").append(),tR=new WeakMap,wo=new In,PH=ut(({bufferMap:r,influence:e,stride:n,width:i,depth:s,offset:a})=>{const o=Si(OPe).mul(n).add(a),l=o.div(i),c=o.sub(l.mul(i));return Hl(r,$u(c,l)).depth(s).xyz.mul(e)});function GPe(r){const e=r.morphAttributes.position!==void 0,n=r.morphAttributes.normal!==void 0,i=r.morphAttributes.color!==void 0,s=r.morphAttributes.position||r.morphAttributes.normal||r.morphAttributes.color,a=s!==void 0?s.length:0;let o=tR.get(r);if(o===void 0||o.count!==a){let E=function(){x.dispose(),tR.delete(r),r.removeEventListener("dispose",E)};var l=E;o!==void 0&&o.texture.dispose();const c=r.morphAttributes.position||[],u=r.morphAttributes.normal||[],h=r.morphAttributes.color||[];let d=0;e===!0&&(d=1),n===!0&&(d=2),i===!0&&(d=3);let f=r.attributes.position.count*d,p=1;const g=4096;f>g&&(p=Math.ceil(f/g),f=g);const v=new Float32Array(f*p*4*a),x=new Rj(v,f,p,a);x.type=zi,x.needsUpdate=!0;const _=d*4;for(let S=0;S<a;S++){const T=c[S],M=u[S],C=h[S],A=f*p*4*S;for(let P=0;P<T.count;P++){const R=P*_;e===!0&&(wo.fromBufferAttribute(T,P),v[A+R+0]=wo.x,v[A+R+1]=wo.y,v[A+R+2]=wo.z,v[A+R+3]=0),n===!0&&(wo.fromBufferAttribute(M,P),v[A+R+4]=wo.x,v[A+R+5]=wo.y,v[A+R+6]=wo.z,v[A+R+7]=0),i===!0&&(wo.fromBufferAttribute(C,P),v[A+R+8]=wo.x,v[A+R+9]=wo.y,v[A+R+10]=wo.z,v[A+R+11]=C.itemSize===4?wo.w:1)}}o={count:a,texture:x,stride:d,size:new dt(f,p)},tR.set(r,o),r.addEventListener("dispose",E)}return o}class VPe extends qn{static get type(){return"MorphNode"}constructor(e){super("void"),this.mesh=e,this.morphBaseInfluence=jn(1),this.updateType=nr.OBJECT}setup(e){const{geometry:n}=e,i=n.morphAttributes.position!==void 0,s=n.hasAttribute("normal")&&n.morphAttributes.normal!==void 0,a=n.morphAttributes.position||n.morphAttributes.normal||n.morphAttributes.color,o=a!==void 0?a.length:0,{texture:l,stride:c,size:u}=GPe(n);i===!0&&ha.mulAssign(this.morphBaseInfluence),s===!0&&Kc.mulAssign(this.morphBaseInfluence);const h=Si(u.width);ec(o,({i:d})=>{const f=He(0).toVar();this.mesh.count>1&&this.mesh.morphTexture!==null&&this.mesh.morphTexture!==void 0?f.assign(Hl(this.mesh.morphTexture,$u(Si(d).add(1),Si(BU))).r):f.assign(Gr("morphTargetInfluences","float").element(d).toVar()),Gi(f.notEqual(0),()=>{i===!0&&ha.addAssign(PH({bufferMap:l,influence:f,stride:c,width:h,depth:d,offset:Si(0)})),s===!0&&Kc.addAssign(PH({bufferMap:l,influence:f,stride:c,width:h,depth:d,offset:Si(1)}))})})}update(){const e=this.morphBaseInfluence;this.mesh.geometry.morphTargetsRelative?e.value=1:e.value=1-this.mesh.morphTargetInfluences.reduce((n,i)=>n+i,0)}}const HPe=rt(VPe).setParameterLength(1);class f0 extends qn{static get type(){return"LightingNode"}constructor(){super("vec3"),this.isLightingNode=!0}}class WPe extends f0{static get type(){return"AONode"}constructor(e=null){super(),this.aoNode=e}setup(e){e.context.ambientOcclusion.mulAssign(this.aoNode)}}class qPe extends Kne{static get type(){return"LightingContextNode"}constructor(e,n=null,i=null,s=null){super(e),this.lightingModel=n,this.backdropNode=i,this.backdropAlphaNode=s,this._value=null}getContext(){const{backdropNode:e,backdropAlphaNode:n}=this,i=Xe().toVar("directDiffuse"),s=Xe().toVar("directSpecular"),a=Xe().toVar("indirectDiffuse"),o=Xe().toVar("indirectSpecular"),l={directDiffuse:i,directSpecular:s,indirectDiffuse:a,indirectSpecular:o};return{radiance:Xe().toVar("radiance"),irradiance:Xe().toVar("irradiance"),iblIrradiance:Xe().toVar("iblIrradiance"),ambientOcclusion:He(1).toVar("ambientOcclusion"),reflectedLight:l,backdrop:e,backdropAlpha:n}}setup(e){return this.value=this._value||(this._value=this.getContext()),this.value.lightingModel=this.lightingModel||e.context.lightingModel,super.setup(e)}}const XPe=rt(qPe);class KPe extends f0{static get type(){return"IrradianceNode"}constructor(e){super(),this.node=e}setup(e){e.context.irradiance.addAssign(this.node)}}let Mv,Av;class Qi extends qn{static get type(){return"ScreenNode"}constructor(e){super(),this.scope=e,this.isViewportNode=!0}getNodeType(){return this.scope===Qi.VIEWPORT?"vec4":"vec2"}getUpdateType(){let e=nr.NONE;return(this.scope===Qi.SIZE||this.scope===Qi.VIEWPORT)&&(e=nr.RENDER),this.updateType=e,e}update({renderer:e}){const n=e.getRenderTarget();this.scope===Qi.VIEWPORT?n!==null?Av.copy(n.viewport):(e.getViewport(Av),Av.multiplyScalar(e.getPixelRatio())):n!==null?(Mv.width=n.width,Mv.height=n.height):e.getDrawingBufferSize(Mv)}setup(){const e=this.scope;let n=null;return e===Qi.SIZE?n=jn(Mv||(Mv=new dt)):e===Qi.VIEWPORT?n=jn(Av||(Av=new In)):n=_t(iA.div(V3)),n}generate(e){if(this.scope===Qi.COORDINATE){let n=e.getFragCoord();if(e.isFlipY()){const i=e.getNodeProperties(V3).outputNode.build(e);n=`${e.getType("vec2")}( ${n}.x, ${i}.y - ${n}.y )`}return n}return super.generate(e)}}Qi.COORDINATE="coordinate";Qi.VIEWPORT="viewport";Qi.SIZE="size";Qi.UV="uv";const Pb=xt(Qi,Qi.UV),V3=xt(Qi,Qi.SIZE),iA=xt(Qi,Qi.COORDINATE),Sx=xt(Qi,Qi.VIEWPORT);Sx.zw;Sx.xy;const Cv=new dt;class hre extends j_{static get type(){return"ViewportTextureNode"}constructor(e=Pb,n=null,i=null){i===null&&(i=new Uge,i.minFilter=Xa),super(i,e,n),this.generateMipmaps=!1,this.isOutputTextureNode=!0,this.updateBeforeType=nr.FRAME}updateBefore(e){const n=e.renderer;n.getDrawingBufferSize(Cv);const i=this.value;(i.image.width!==Cv.width||i.image.height!==Cv.height)&&(i.image.width=Cv.width,i.image.height=Cv.height,i.needsUpdate=!0);const s=i.generateMipmaps;i.generateMipmaps=this.generateMipmaps,n.copyFramebufferToTexture(i),i.generateMipmaps=s}clone(){const e=new this.constructor(this.uvNode,this.levelNode,this.value);return e.generateMipmaps=this.generateMipmaps,e}}const dre=rt(hre,null,null,{generateMipmaps:!0}).setParameterLength(0,3);let nR=null;class YPe extends hre{static get type(){return"ViewportDepthTextureNode"}constructor(e=Pb,n=null){nR===null&&(nR=new dl),super(e,n,nR)}}const ZPe=rt(YPe).setParameterLength(0,2);class Za extends qn{static get type(){return"ViewportDepthNode"}constructor(e,n=null){super("float"),this.scope=e,this.valueNode=n,this.isViewportDepthNode=!0}generate(e){const{scope:n}=this;return n===Za.DEPTH_BASE?e.getFragDepth():super.generate(e)}setup({camera:e}){const{scope:n}=this,i=this.valueNode;let s=null;if(n===Za.DEPTH_BASE)i!==null&&(s=mre().assign(i));else if(n===Za.DEPTH)e.isPerspectiveCamera?s=QPe(es.z,Qf,Jf):s=Tx(es.z,Qf,Jf);else if(n===Za.LINEAR_DEPTH)if(i!==null)if(e.isPerspectiveCamera){const a=fre(i,Qf,Jf);s=Tx(a,Qf,Jf)}else s=i;else s=Tx(es.z,Qf,Jf);return s}}Za.DEPTH_BASE="depthBase";Za.DEPTH="depth";Za.LINEAR_DEPTH="linearDepth";const Tx=(r,e,n)=>r.add(e).div(e.sub(n)),QPe=(r,e,n)=>e.add(r).mul(n).div(n.sub(e).mul(r)),fre=(r,e,n)=>e.mul(n).div(n.sub(e).mul(r).sub(n)),pre=(r,e,n)=>{e=e.max(1e-6).toVar();const i=lh(r.negate().div(e)),s=lh(n.div(e));return i.div(s)},mre=rt(Za,Za.DEPTH_BASE),gre=xt(Za,Za.DEPTH),JPe=rt(Za,Za.LINEAR_DEPTH).setParameterLength(0,1);ZPe();gre.assign=r=>mre(r);class eRe extends qn{constructor(e){super("float"),this.name=e,this.isBuiltinNode=!0}generate(){return this.name}}const tRe=rt(eRe).setParameterLength(1);class fl extends qn{static get type(){return"ClippingNode"}constructor(e=fl.DEFAULT){super(),this.scope=e}setup(e){super.setup(e);const n=e.clippingContext,{intersectionPlanes:i,unionPlanes:s}=n;return this.hardwareClipping=e.material.hardwareClipping,this.scope===fl.ALPHA_TO_COVERAGE?this.setupAlphaToCoverage(i,s):this.scope===fl.HARDWARE?this.setupHardwareClipping(s,e):this.setupDefault(i,s)}setupAlphaToCoverage(e,n){return ut(()=>{const i=He().toVar("distanceToPlane"),s=He().toVar("distanceToGradient"),a=He(1).toVar("clipOpacity"),o=n.length;if(this.hardwareClipping===!1&&o>0){const c=Ac(n);ec(o,({i:u})=>{const h=c.element(u);i.assign(es.dot(h.xyz).negate().add(h.w)),s.assign(i.fwidth().div(2)),a.mulAssign(Ud(s.negate(),s,i))})}const l=e.length;if(l>0){const c=Ac(e),u=He(1).toVar("intersectionClipOpacity");ec(l,({i:h})=>{const d=c.element(h);i.assign(es.dot(d.xyz).negate().add(d.w)),s.assign(i.fwidth().div(2)),u.mulAssign(Ud(s.negate(),s,i).oneMinus())}),a.mulAssign(u.oneMinus())}Cr.a.mulAssign(a),Cr.a.equal(0).discard()})()}setupDefault(e,n){return ut(()=>{const i=n.length;if(this.hardwareClipping===!1&&i>0){const a=Ac(n);ec(i,({i:o})=>{const l=a.element(o);es.dot(l.xyz).greaterThan(l.w).discard()})}const s=e.length;if(s>0){const a=Ac(e),o=Nne(!0).toVar("clipped");ec(s,({i:l})=>{const c=a.element(l);o.assign(es.dot(c.xyz).greaterThan(c.w).and(o))}),o.discard()}})()}setupHardwareClipping(e,n){const i=e.length;return n.enableHardwareClipping(i),ut(()=>{const s=Ac(e),a=tRe(n.getClipDistance());ec(i,({i:o})=>{const l=s.element(o),c=es.dot(l.xyz).sub(l.w).negate();a.element(o).assign(c)})})()}}fl.ALPHA_TO_COVERAGE="alphaToCoverage";fl.DEFAULT="default";fl.HARDWARE="hardware";const nRe=()=>ct(new fl),rRe=()=>ct(new fl(fl.ALPHA_TO_COVERAGE)),iRe=()=>ct(new fl(fl.HARDWARE)),sRe=.05,RH=ut(([r])=>Qd(ur(1e4,Ql(ur(17,r.x).add(ur(.1,r.y)))).mul(Ra(.1,rl(Ql(ur(13,r.y).add(r.x))))))),OH=ut(([r])=>RH(_t(RH(r.xy),r.z))),aRe=ut(([r])=>{const e=io(kd($ne(r.xyz)),kd(Gne(r.xyz))),n=He(1).div(He(sRe).mul(e)).toVar("pixScale"),i=_t(Tb(mp(lh(n))),Tb(AU(lh(n)))),s=_t(OH(mp(i.x.mul(r.xyz))),OH(mp(i.y.mul(r.xyz)))),a=Qd(lh(n)),o=Ra(ur(a.oneMinus(),s.x),ur(a,s.y)),l=Mb(a,a.oneMinus()),c=Xe(o.mul(o).div(ur(2,l).mul(qa(1,l))),o.sub(ur(.5,l)).div(qa(1,l)),qa(1,qa(1,o).mul(qa(1,o)).div(ur(2,l).mul(qa(1,l))))),u=o.lessThan(l.oneMinus()).select(o.lessThan(l).select(c.x,c.y),c.z);return yh(u,1e-6,1)}).setLayout({name:"getAlphaHashThreshold",type:"float",inputs:[{name:"position",type:"vec3"}]});class xs extends pa{static get type(){return"NodeMaterial"}get type(){return this.constructor.type}set type(e){}constructor(){super(),this.isNodeMaterial=!0,this.fog=!0,this.lights=!1,this.hardwareClipping=!1,this.lightsNode=null,this.envNode=null,this.aoNode=null,this.colorNode=null,this.normalNode=null,this.opacityNode=null,this.backdropNode=null,this.backdropAlphaNode=null,this.alphaTestNode=null,this.positionNode=null,this.geometryNode=null,this.depthNode=null,this.shadowPositionNode=null,this.receivedShadowNode=null,this.castShadowNode=null,this.outputNode=null,this.mrtNode=null,this.fragmentNode=null,this.vertexNode=null}customProgramCacheKey(){return this.type+_ne(this)}build(e){this.setup(e)}setupObserver(e){return new iCe(e)}setup(e){e.context.setupNormal=()=>this.setupNormal(e),e.context.setupPositionView=()=>this.setupPositionView(e),e.context.setupModelViewProjection=()=>this.setupModelViewProjection(e);const n=e.renderer,i=n.getRenderTarget();e.addStack();const s=this.vertexNode||this.setupVertex(e);e.stack.outputNode=s,this.setupHardwareClipping(e),this.geometryNode!==null&&(e.stack.outputNode=e.stack.outputNode.bypass(this.geometryNode)),e.addFlow("vertex",e.removeStack()),e.addStack();let a;const o=this.setupClipping(e);if((this.depthWrite===!0||this.depthTest===!0)&&(i!==null?i.depthBuffer===!0&&this.setupDepth(e):n.depth===!0&&this.setupDepth(e)),this.fragmentNode===null){this.setupDiffuseColor(e),this.setupVariants(e);const l=this.setupLighting(e);o!==null&&e.stack.add(o);const c=Bn(l,Cr.a).max(0);a=this.setupOutput(e,c),_x.assign(a);const u=this.outputNode!==null;if(u&&(a=this.outputNode),i!==null){const h=n.getMRT(),d=this.mrtNode;h!==null?(u&&_x.assign(a),a=h,d!==null&&(a=h.merge(d))):d!==null&&(a=d)}}else{let l=this.fragmentNode;l.isOutputStructNode!==!0&&(l=Bn(l)),a=this.setupOutput(e,l)}e.stack.outputNode=a,e.addFlow("fragment",e.removeStack()),e.observer=this.setupObserver(e)}setupClipping(e){if(e.clippingContext===null)return null;const{unionPlanes:n,intersectionPlanes:i}=e.clippingContext;let s=null;if(n.length>0||i.length>0){const a=e.renderer.samples;this.alphaToCoverage&&a>1?s=rRe():e.stack.add(nRe())}return s}setupHardwareClipping(e){if(this.hardwareClipping=!1,e.clippingContext===null)return;const n=e.clippingContext.unionPlanes.length;n>0&&n<=8&&e.isAvailable("clipDistance")&&(e.stack.add(iRe()),this.hardwareClipping=!0)}setupDepth(e){const{renderer:n,camera:i}=e;let s=this.depthNode;if(s===null){const a=n.getMRT();a&&a.has("depth")?s=a.get("depth"):n.logarithmicDepthBuffer===!0&&(i.isPerspectiveCamera?s=pre(es.z,Qf,Jf):s=Tx(es.z,Qf,Jf))}s!==null&&gre.assign(s).append()}setupPositionView(){return tA.mul(ha).xyz}setupModelViewProjection(){return IU.mul(es)}setupVertex(e){return e.addStack(),this.setupPosition(e),e.context.vertex=e.removeStack(),ure}setupPosition(e){const{object:n,geometry:i}=e;if((i.morphAttributes.position||i.morphAttributes.normal||i.morphAttributes.color)&&HPe(n).append(),n.isSkinnedMesh===!0&&UPe(n).append(),this.displacementMap){const s=xd("displacementMap","texture"),a=xd("displacementScale","float"),o=xd("displacementBias","float");ha.addAssign(Kc.normalize().mul(s.x.mul(a).add(o)))}return n.isBatchedMesh&&BPe(n).append(),n.isInstancedMesh&&n.instanceMatrix&&n.instanceMatrix.isInstancedBufferAttribute===!0&&LPe(n).append(),this.positionNode!==null&&ha.assign(this.positionNode.context({isPositionNodeInput:!0})),ha}setupDiffuseColor({object:e,geometry:n}){let i=this.colorNode?Bn(this.colorNode):nPe;this.vertexColors===!0&&n.hasAttribute("color")&&(i=Bn(i.xyz.mul(vh("color","vec3")),i.a)),e.instanceColor&&(i=iE("vec3","vInstanceColor").mul(i)),e.isBatchedMesh&&e._colorsTexture&&(i=iE("vec3","vBatchColor").mul(i)),Cr.assign(i);const s=this.opacityNode?He(this.opacityNode):lre;if(Cr.a.assign(Cr.a.mul(s)),this.alphaTestNode!==null||this.alphaTest>0){const a=this.alphaTestNode!==null?He(this.alphaTestNode):tPe;Cr.a.lessThanEqual(a).discard()}this.alphaHash===!0&&Cr.a.lessThan(aRe(ha)).discard(),this.transparent===!1&&this.blending===hl&&this.alphaToCoverage===!1&&Cr.a.assign(1)}setupVariants(){}setupOutgoingLight(){return this.lights===!0?Xe(0):Cr.rgb}setupNormal(){return this.normalNode?Xe(this.normalNode):cPe}setupEnvironment(){let e=null;return this.envNode?e=this.envNode:this.envMap&&(e=this.envMap.isCubeTexture?xd("envMap","cubeTexture"):xd("envMap","texture")),e}setupLightMap(e){let n=null;return e.material.lightMap&&(n=new KPe(cre)),n}setupLights(e){const n=[],i=this.setupEnvironment(e);i&&i.isLightingNode&&n.push(i);const s=this.setupLightMap(e);if(s&&s.isLightingNode&&n.push(s),this.aoNode!==null||e.material.aoMap){const o=this.aoNode!==null?this.aoNode:RPe;n.push(new WPe(o))}let a=this.lightsNode||e.lightsNode;return n.length>0&&(a=e.renderer.lighting.createNode([...a.getLights(),...n])),a}setupLightingModel(){}setupLighting(e){const{material:n}=e,{backdropNode:i,backdropAlphaNode:s,emissiveNode:a}=this,l=this.lights===!0||this.lightsNode!==null?this.setupLights(e):null;let c=this.setupOutgoingLight(e);if(l&&l.getScope().hasLights){const u=this.setupLightingModel(e)||null;c=XPe(l,u,i,s)}else i!==null&&(c=Xe(s!==null?si(c,i,s):i));return(a&&a.isNode===!0||n.emissive&&n.emissive.isColor===!0)&&(vH.assign(Xe(a||iPe)),c=c.add(vH)),c}setupFog(e,n){const i=e.fogNode;return i&&(_x.assign(n),n=Bn(i)),n}setupOutput(e,n){return this.fog===!0&&(n=this.setupFog(e,n)),n}setDefaultValues(e){for(const i in e){const s=e[i];this[i]===void 0&&(this[i]=s,s&&s.clone&&(this[i]=s.clone()))}const n=Object.getOwnPropertyDescriptors(e.constructor.prototype);for(const i in n)Object.getOwnPropertyDescriptor(this.constructor.prototype,i)===void 0&&n[i].get!==void 0&&Object.defineProperty(this.constructor.prototype,i,n[i])}toJSON(e){const n=e===void 0||typeof e=="string";n&&(e={textures:{},images:{},nodes:{}});const i=pa.prototype.toJSON.call(this,e),s=tE(this);i.inputNodes={};for(const{property:o,childNode:l}of s)i.inputNodes[o]=l.toJSON(e).uuid;function a(o){const l=[];for(const c in o){const u=o[c];delete u.metadata,l.push(u)}return l}if(n){const o=a(e.textures),l=a(e.images),c=a(e.nodes);o.length>0&&(i.textures=o),l.length>0&&(i.images=l),c.length>0&&(i.nodes=c)}return i}copy(e){return this.lightsNode=e.lightsNode,this.envNode=e.envNode,this.colorNode=e.colorNode,this.normalNode=e.normalNode,this.opacityNode=e.opacityNode,this.backdropNode=e.backdropNode,this.backdropAlphaNode=e.backdropAlphaNode,this.alphaTestNode=e.alphaTestNode,this.positionNode=e.positionNode,this.geometryNode=e.geometryNode,this.depthNode=e.depthNode,this.shadowPositionNode=e.shadowPositionNode,this.receivedShadowNode=e.receivedShadowNode,this.castShadowNode=e.castShadowNode,this.outputNode=e.outputNode,this.mrtNode=e.mrtNode,this.fragmentNode=e.fragmentNode,this.vertexNode=e.vertexNode,super.copy(e)}}const oRe=new __;class lRe extends xs{static get type(){return"LineBasicNodeMaterial"}constructor(e){super(),this.isLineBasicNodeMaterial=!0,this.setDefaultValues(oRe),this.setValues(e)}}const cRe=new uye;class uRe extends xs{static get type(){return"LineDashedNodeMaterial"}constructor(e){super(),this.isLineDashedNodeMaterial=!0,this.setDefaultValues(cRe),this.dashOffset=0,this.offsetNode=null,this.dashScaleNode=null,this.dashSizeNode=null,this.gapSizeNode=null,this.setValues(e)}setupVariants(){const e=this.offsetNode?He(this.offsetNode):CPe,n=this.dashScaleNode?He(this.dashScaleNode):EPe,i=this.dashSizeNode?He(this.dashSizeNode):MPe,s=this.gapSizeNode?He(this.gapSizeNode):APe;ZP.assign(i),xH.assign(s);const a=uc(vh("lineDistance").mul(n));(e?a.add(e):a).mod(ZP.add(xH)).greaterThan(ZP).discard()}}const hRe=r=>ct(r).mul(.5).add(.5),dRe=new aye;class fRe extends xs{static get type(){return"MeshNormalNodeMaterial"}constructor(e){super(),this.isMeshNormalNodeMaterial=!0,this.setDefaultValues(dRe),this.setValues(e)}setupDiffuseColor(){const e=this.opacityNode?He(this.opacityNode):lre;Cr.assign(OU(Bn(hRe(Ji),e),dn))}}class pRe extends Hi{static get type(){return"EquirectUVNode"}constructor(e=tre){super("vec2"),this.dirNode=e}setup(){const e=this.dirNode,n=e.z.atan(e.x).mul(1/(Math.PI*2)).add(.5),i=e.y.clamp(-1,1).asin().mul(1/Math.PI).add(.5);return _t(n,i)}}const yre=rt(pRe).setParameterLength(0,1);class vre extends fee{constructor(e=1,n={}){super(e,n),this.isCubeRenderTarget=!0}fromEquirectangularTexture(e,n){const i=n.minFilter,s=n.generateMipmaps;n.generateMipmaps=!0,this.texture.type=n.type,this.texture.colorSpace=n.colorSpace,this.texture.generateMipmaps=n.generateMipmaps,this.texture.minFilter=n.minFilter,this.texture.magFilter=n.magFilter;const a=new Bc(5,5,5),o=yre(tre),l=new xs;l.colorNode=xr(n,o,0),l.side=Wr,l.blending=eo;const c=new li(a,l),u=new AM;u.add(c),n.minFilter===Xa&&(n.minFilter=ds);const h=new dee(1,10,this),d=e.getMRT();return e.setMRT(null),h.update(e,u),e.setMRT(d),n.minFilter=i,n.currentGenerateMipmaps=s,c.geometry.dispose(),c.material.dispose(),this}}const Ex=new WeakMap;class mRe extends Hi{static get type(){return"CubeMapNode"}constructor(e){super("vec3"),this.envNode=e,this._cubeTexture=null,this._cubeTextureNode=Nb(null);const n=new MM;n.isRenderTargetTexture=!0,this._defaultTexture=n,this.updateBeforeType=nr.RENDER}updateBefore(e){const{renderer:n,material:i}=e,s=this.envNode;if(s.isTextureNode||s.isMaterialReferenceNode){const a=s.isTextureNode?s.value:i[s.property];if(a&&a.isTexture){const o=a.mapping;if(o===Ld||o===Fd){if(Ex.has(a)){const l=Ex.get(a);kH(l,a.mapping),this._cubeTexture=l}else{const l=a.image;if(gRe(l)){const c=new vre(l.height);c.fromEquirectangularTexture(n,a),kH(c.texture,a.mapping),this._cubeTexture=c.texture,Ex.set(a,c.texture),a.addEventListener("dispose",xre)}else this._cubeTexture=this._defaultTexture}this._cubeTextureNode.value=this._cubeTexture}else this._cubeTextureNode=this.envNode}}}setup(e){return this.updateBefore(e),this._cubeTextureNode}}function gRe(r){return r==null?!1:r.height>0}function xre(r){const e=r.target;e.removeEventListener("dispose",xre);const n=Ex.get(e);n!==void 0&&(Ex.delete(e),n.dispose())}function kH(r,e){e===Ld?r.mapping=ml:e===Fd&&(r.mapping=gl)}const bre=rt(mRe).setParameterLength(1);class jU extends f0{static get type(){return"BasicEnvironmentNode"}constructor(e=null){super(),this.envNode=e}setup(e){e.context.environment=bre(this.envNode)}}class yRe extends f0{static get type(){return"BasicLightMapNode"}constructor(e=null){super(),this.lightMapNode=e}setup(e){const n=He(1/Math.PI);e.context.irradianceLightMap=this.lightMapNode.mul(n)}}class sA{start(e){e.lightsNode.setupLights(e,e.lightsNode.getLightNodes(e)),this.indirect(e)}finish(){}direct(){}directRectArea(){}indirect(){}ambientOcclusion(){}}class _re extends sA{constructor(){super()}indirect({context:e}){const n=e.ambientOcclusion,i=e.reflectedLight,s=e.irradianceLightMap;i.indirectDiffuse.assign(Bn(0)),s?i.indirectDiffuse.addAssign(s):i.indirectDiffuse.addAssign(Bn(1,1,1,0)),i.indirectDiffuse.mulAssign(n),i.indirectDiffuse.mulAssign(Cr.rgb)}finish(e){const{material:n,context:i}=e,s=i.outgoingLight,a=e.context.environment;if(a)switch(n.combine){case y_:s.rgb.assign(si(s.rgb,s.rgb.mul(a.rgb),vT.mul(eR)));break;case qJ:s.rgb.assign(si(s.rgb,a.rgb,vT.mul(eR)));break;case XJ:s.rgb.addAssign(a.rgb.mul(vT.mul(eR)));break;default:console.warn("THREE.BasicLightingModel: Unsupported .combine value:",n.combine);break}}}const vRe=new Aa;class xRe extends xs{static get type(){return"MeshBasicNodeMaterial"}constructor(e){super(),this.isMeshBasicNodeMaterial=!0,this.lights=!0,this.setDefaultValues(vRe),this.setValues(e)}setupNormal(){return oc}setupEnvironment(e){const n=super.setupEnvironment(e);return n?new jU(n):null}setupLightMap(e){let n=null;return e.material.lightMap&&(n=new yRe(cre)),n}setupOutgoingLight(){return Cr.rgb}setupLightingModel(){return new _re}}const Rb=ut(({f0:r,f90:e,dotVH:n})=>{const i=n.mul(-5.55473).sub(6.98316).mul(n).exp2();return r.mul(i.oneMinus()).add(e.mul(i))}),Ty=ut(r=>r.diffuseColor.mul(1/Math.PI)),bRe=()=>He(.25),_Re=ut(({dotNH:r})=>$3.mul(He(.5)).add(1).mul(He(1/Math.PI)).mul(r.pow($3))),wRe=ut(({lightDirection:r})=>{const e=r.add(wi).normalize(),n=Ji.dot(e).clamp(),i=wi.dot(e).clamp(),s=Rb({f0:Mo,f90:1,dotVH:i}),a=bRe(),o=_Re({dotNH:n});return s.mul(a).mul(o)});class wre extends _re{constructor(e=!0){super(),this.specular=e}direct({lightDirection:e,lightColor:n,reflectedLight:i}){const a=Ji.dot(e).clamp().mul(n);i.directDiffuse.addAssign(a.mul(Ty({diffuseColor:Cr.rgb}))),this.specular===!0&&i.directSpecular.addAssign(a.mul(wRe({lightDirection:e})).mul(vT))}indirect(e){const{ambientOcclusion:n,irradiance:i,reflectedLight:s}=e.context;s.indirectDiffuse.addAssign(i.mul(Ty({diffuseColor:Cr}))),s.indirectDiffuse.mulAssign(n)}}const SRe=new xee;class TRe extends xs{static get type(){return"MeshLambertNodeMaterial"}constructor(e){super(),this.isMeshLambertNodeMaterial=!0,this.lights=!0,this.setDefaultValues(SRe),this.setValues(e)}setupEnvironment(e){const n=super.setupEnvironment(e);return n?new jU(n):null}setupLightingModel(){return new wre(!1)}}const ERe=new iye;class MRe extends xs{static get type(){return"MeshPhongNodeMaterial"}constructor(e){super(),this.isMeshPhongNodeMaterial=!0,this.lights=!0,this.shininessNode=null,this.specularNode=null,this.setDefaultValues(ERe),this.setValues(e)}setupEnvironment(e){const n=super.setupEnvironment(e);return n?new jU(n):null}setupLightingModel(){return new wre}setupVariants(){const e=(this.shininessNode?He(this.shininessNode):rPe).max(1e-4);$3.assign(e);const n=this.specularNode||sPe;Mo.assign(n)}copy(e){return this.shininessNode=e.shininessNode,this.specularNode=e.specularNode,super.copy(e)}}const ARe=ut(r=>{if(r.geometry.hasAttribute("normal")===!1)return He(0);const e=oc.dFdx().abs().max(oc.dFdy().abs());return e.x.max(e.y).max(e.z)}),Sre=ut(r=>{const{roughness:e}=r,n=ARe();let i=e.max(.0525);return i=i.add(n),i=i.min(1),i}),CRe=ut(({alpha:r,dotNL:e,dotNV:n})=>{const i=r.pow2(),s=e.mul(i.add(i.oneMinus().mul(n.pow2())).sqrt()),a=n.mul(i.add(i.oneMinus().mul(e.pow2())).sqrt());return gh(.5,s.add(a).max(f2e))}).setLayout({name:"V_GGX_SmithCorrelated",type:"float",inputs:[{name:"alpha",type:"float"},{name:"dotNL",type:"float"},{name:"dotNV",type:"float"}]}),NRe=ut(({alphaT:r,alphaB:e,dotTV:n,dotBV:i,dotTL:s,dotBL:a,dotNV:o,dotNL:l})=>{const c=l.mul(Xe(r.mul(n),e.mul(i),o).length()),u=o.mul(Xe(r.mul(s),e.mul(a),l).length());return gh(.5,c.add(u)).saturate()}).setLayout({name:"V_GGX_SmithCorrelated_Anisotropic",type:"float",inputs:[{name:"alphaT",type:"float",qualifier:"in"},{name:"alphaB",type:"float",qualifier:"in"},{name:"dotTV",type:"float",qualifier:"in"},{name:"dotBV",type:"float",qualifier:"in"},{name:"dotTL",type:"float",qualifier:"in"},{name:"dotBL",type:"float",qualifier:"in"},{name:"dotNV",type:"float",qualifier:"in"},{name:"dotNL",type:"float",qualifier:"in"}]}),PRe=ut(({alpha:r,dotNH:e})=>{const n=r.pow2(),i=e.pow2().mul(n.oneMinus()).oneMinus();return n.div(i.pow2()).mul(1/Math.PI)}).setLayout({name:"D_GGX",type:"float",inputs:[{name:"alpha",type:"float"},{name:"dotNH",type:"float"}]}),RRe=He(1/Math.PI),ORe=ut(({alphaT:r,alphaB:e,dotNH:n,dotTH:i,dotBH:s})=>{const a=r.mul(e),o=Xe(e.mul(i),r.mul(s),a.mul(n)),l=o.dot(o),c=a.div(l);return RRe.mul(a.mul(c.pow2()))}).setLayout({name:"D_GGX_Anisotropic",type:"float",inputs:[{name:"alphaT",type:"float",qualifier:"in"},{name:"alphaB",type:"float",qualifier:"in"},{name:"dotNH",type:"float",qualifier:"in"},{name:"dotTH",type:"float",qualifier:"in"},{name:"dotBH",type:"float",qualifier:"in"}]}),IH=ut(r=>{const{lightDirection:e,f0:n,f90:i,roughness:s,f:a,USE_IRIDESCENCE:o,USE_ANISOTROPY:l}=r,c=r.normalView||Ji,u=s.pow2(),h=e.add(wi).normalize(),d=c.dot(e).clamp(),f=c.dot(wi).clamp(),p=c.dot(h).clamp(),g=wi.dot(h).clamp();let v=Rb({f0:n,f90:i,dotVH:g}),x,_;if(gH(o)&&(v=EU.mix(v,a)),gH(l)){const E=fT.dot(e),S=fT.dot(wi),T=fT.dot(h),M=Wg.dot(e),C=Wg.dot(wi),A=Wg.dot(h);x=NRe({alphaT:z3,alphaB:u,dotTV:S,dotBV:C,dotTL:E,dotBL:M,dotNV:f,dotNL:d}),_=ORe({alphaT:z3,alphaB:u,dotNH:p,dotTH:T,dotBH:A})}else x=CRe({alpha:u,dotNL:d,dotNV:f}),_=PRe({alpha:u,dotNH:p});return v.mul(x).mul(_)}),Tre=ut(({roughness:r,dotNV:e})=>{const n=Bn(-1,-.0275,-.572,.022),i=Bn(1,.0425,1.04,-.04),s=r.mul(n).add(i),a=s.x.mul(s.x).min(e.mul(-9.28).exp2()).mul(s.x).add(s.y);return _t(-1.04,1.04).mul(a).add(s.zw)}).setLayout({name:"DFGApprox",type:"vec2",inputs:[{name:"roughness",type:"float"},{name:"dotNV",type:"vec3"}]}),Ere=ut(r=>{const{dotNV:e,specularColor:n,specularF90:i,roughness:s}=r,a=Tre({dotNV:e,roughness:s});return n.mul(a.x).add(i.mul(a.y))}),kRe=ut(({f:r,f90:e,dotVH:n})=>{const i=n.oneMinus().saturate(),s=i.mul(i),a=i.mul(s,s).clamp(0,.9999);return r.sub(Xe(e).mul(a)).div(a.oneMinus())}).setLayout({name:"Schlick_to_F0",type:"vec3",inputs:[{name:"f",type:"vec3"},{name:"f90",type:"float"},{name:"dotVH",type:"float"}]}),IRe=ut(({roughness:r,dotNH:e})=>{const n=r.pow2(),i=He(1).div(n),a=e.pow2().oneMinus().max(.0078125);return He(2).add(i).mul(a.pow(i.mul(.5))).div(2*Math.PI)}).setLayout({name:"D_Charlie",type:"float",inputs:[{name:"roughness",type:"float"},{name:"dotNH",type:"float"}]}),DRe=ut(({dotNV:r,dotNL:e})=>He(1).div(He(4).mul(e.add(r).sub(e.mul(r))))).setLayout({name:"V_Neubelt",type:"float",inputs:[{name:"dotNV",type:"float"},{name:"dotNL",type:"float"}]}),LRe=ut(({lightDirection:r})=>{const e=r.add(wi).normalize(),n=Ji.dot(r).clamp(),i=Ji.dot(wi).clamp(),s=Ji.dot(e).clamp(),a=IRe({roughness:TU,dotNH:s}),o=DRe({dotNV:i,dotNL:n});return Cg.mul(a).mul(o)}),FRe=ut(({N:r,V:e,roughness:n})=>{const a=.0078125,o=r.dot(e).saturate(),l=_t(n,o.oneMinus().sqrt());return l.assign(l.mul(.984375).add(a)),l}).setLayout({name:"LTC_Uv",type:"vec2",inputs:[{name:"N",type:"vec3"},{name:"V",type:"vec3"},{name:"roughness",type:"float"}]}),BRe=ut(({f:r})=>{const e=r.length();return io(e.mul(e).add(r.z).div(e.add(1)),0)}).setLayout({name:"LTC_ClippedSphereFormFactor",type:"float",inputs:[{name:"f",type:"vec3"}]}),mS=ut(({v1:r,v2:e})=>{const n=r.dot(e),i=n.abs().toVar(),s=i.mul(.0145206).add(.4965155).mul(i).add(.8543985).toVar(),a=i.add(4.1616724).mul(i).add(3.417594).toVar(),o=s.div(a),l=n.greaterThan(0).select(o,io(n.mul(n).oneMinus(),1e-7).inverseSqrt().mul(.5).sub(o));return r.cross(e).mul(l)}).setLayout({name:"LTC_EdgeVectorFormFactor",type:"vec3",inputs:[{name:"v1",type:"vec3"},{name:"v2",type:"vec3"}]}),DH=ut(({N:r,V:e,P:n,mInv:i,p0:s,p1:a,p2:o,p3:l})=>{const c=a.sub(s).toVar(),u=l.sub(s).toVar(),h=c.cross(u),d=Xe().toVar();return Gi(h.dot(n.sub(s)).greaterThanEqual(0),()=>{const f=e.sub(r.mul(e.dot(r))).normalize(),p=r.cross(f).negate(),g=i.mul(Pa(f,p,r).transpose()).toVar(),v=g.mul(s.sub(n)).normalize().toVar(),x=g.mul(a.sub(n)).normalize().toVar(),_=g.mul(o.sub(n)).normalize().toVar(),E=g.mul(l.sub(n)).normalize().toVar(),S=Xe(0).toVar();S.addAssign(mS({v1:v,v2:x})),S.addAssign(mS({v1:x,v2:_})),S.addAssign(mS({v1:_,v2:E})),S.addAssign(mS({v1:E,v2:v})),d.assign(Xe(BRe({f:S})))}),d}).setLayout({name:"LTC_Evaluate",type:"vec3",inputs:[{name:"N",type:"vec3"},{name:"V",type:"vec3"},{name:"P",type:"vec3"},{name:"mInv",type:"mat3"},{name:"p0",type:"vec3"},{name:"p1",type:"vec3"},{name:"p2",type:"vec3"},{name:"p3",type:"vec3"}]}),aA=1/6,Mre=r=>ur(aA,ur(r,ur(r,r.negate().add(3)).sub(3)).add(1)),H3=r=>ur(aA,ur(r,ur(r,ur(3,r).sub(6))).add(4)),Are=r=>ur(aA,ur(r,ur(r,ur(-3,r).add(3)).add(3)).add(1)),W3=r=>ur(aA,JM(r,3)),LH=r=>Mre(r).add(H3(r)),FH=r=>Are(r).add(W3(r)),BH=r=>Ra(-1,H3(r).div(Mre(r).add(H3(r)))),jH=r=>Ra(1,W3(r).div(Are(r).add(W3(r)))),UH=(r,e,n)=>{const i=r.uvNode,s=ur(i,e.zw).add(.5),a=mp(s),o=Qd(s),l=LH(o.x),c=FH(o.x),u=BH(o.x),h=jH(o.x),d=BH(o.y),f=jH(o.y),p=_t(a.x.add(u),a.y.add(d)).sub(.5).mul(e.xy),g=_t(a.x.add(h),a.y.add(d)).sub(.5).mul(e.xy),v=_t(a.x.add(u),a.y.add(f)).sub(.5).mul(e.xy),x=_t(a.x.add(h),a.y.add(f)).sub(.5).mul(e.xy),_=LH(o.y).mul(Ra(l.mul(r.sample(p).level(n)),c.mul(r.sample(g).level(n)))),E=FH(o.y).mul(Ra(l.mul(r.sample(v).level(n)),c.mul(r.sample(x).level(n))));return _.add(E)},jRe=ut(([r,e=He(3)])=>{const n=_t(r.size(Si(e))),i=_t(r.size(Si(e.add(1)))),s=gh(1,n),a=gh(1,i),o=UH(r,Bn(s,n),mp(e)),l=UH(r,Bn(a,i),AU(e));return Qd(e).mix(o,l)}),zH=ut(([r,e,n,i,s])=>{const a=Xe(Xne(e.negate(),Eb(r),gh(1,i))),o=Xe(kd(s[0].xyz),kd(s[1].xyz),kd(s[2].xyz));return Eb(a).mul(n.mul(o))}).setLayout({name:"getVolumeTransmissionRay",type:"vec3",inputs:[{name:"n",type:"vec3"},{name:"v",type:"vec3"},{name:"thickness",type:"float"},{name:"ior",type:"float"},{name:"modelMatrix",type:"mat4"}]}),URe=ut(([r,e])=>r.mul(yh(e.mul(2).sub(2),0,1))).setLayout({name:"applyIorToRoughness",type:"float",inputs:[{name:"roughness",type:"float"},{name:"ior",type:"float"}]}),zRe=dre(),$Re=dre(),$H=ut(([r,e,n],{material:i})=>{const a=(i.side===Wr?zRe:$Re).sample(r),o=lh(V3.x).mul(URe(e,n));return jRe(a,o)}),GH=ut(([r,e,n])=>(Gi(n.notEqual(0),()=>{const i=Une(e).negate().div(n);return jne(i.negate().mul(r))}),Xe(1))).setLayout({name:"volumeAttenuation",type:"vec3",inputs:[{name:"transmissionDistance",type:"float"},{name:"attenuationColor",type:"vec3"},{name:"attenuationDistance",type:"float"}]}),GRe=ut(([r,e,n,i,s,a,o,l,c,u,h,d,f,p,g])=>{let v,x;if(g){v=Bn().toVar(),x=Xe().toVar();const M=h.sub(1).mul(g.mul(.025)),C=Xe(h.sub(M),h,h.add(M));ec({start:0,end:3},({i:A})=>{const P=C.element(A),R=zH(r,e,d,P,l),O=o.add(R),D=u.mul(c.mul(Bn(O,1))),F=_t(D.xy.div(D.w)).toVar();F.addAssign(1),F.divAssign(2),F.assign(_t(F.x,F.y.oneMinus()));const U=$H(F,n,P);v.element(A).assign(U.element(A)),v.a.addAssign(U.a),x.element(A).assign(i.element(A).mul(GH(kd(R),f,p).element(A)))}),v.a.divAssign(3)}else{const M=zH(r,e,d,h,l),C=o.add(M),A=u.mul(c.mul(Bn(C,1))),P=_t(A.xy.div(A.w)).toVar();P.addAssign(1),P.divAssign(2),P.assign(_t(P.x,P.y.oneMinus())),v=$H(P,n,h),x=i.mul(GH(kd(M),f,p))}const _=x.rgb.mul(v.rgb),E=r.dot(e).clamp(),S=Xe(Ere({dotNV:E,specularColor:s,specularF90:a,roughness:n})),T=x.r.add(x.g,x.b).div(3);return Bn(S.oneMinus().mul(_),v.a.oneMinus().mul(T).oneMinus())}),VRe=Pa(3.2404542,-.969266,.0556434,-1.5371385,1.8760108,-.2040259,-.4985314,.041556,1.0572252),HRe=r=>{const e=r.sqrt();return Xe(1).add(e).div(Xe(1).sub(e))},VH=(r,e)=>r.sub(e).div(r.add(e)).pow2(),WRe=(r,e)=>{const n=r.mul(2*Math.PI*1e-9),i=Xe(54856e-17,44201e-17,52481e-17),s=Xe(1681e3,1795300,2208400),a=Xe(43278e5,93046e5,66121e5),o=He(9747e-17*Math.sqrt(2*Math.PI*45282e5)).mul(n.mul(2239900).add(e.x).cos()).mul(n.pow2().mul(-45282e5).exp());let l=i.mul(a.mul(2*Math.PI).sqrt()).mul(s.mul(n).add(e).cos()).mul(n.pow2().negate().mul(a).exp());return l=Xe(l.x.add(o),l.y,l.z).div(10685e-11),VRe.mul(l)},qRe=ut(({outsideIOR:r,eta2:e,cosTheta1:n,thinFilmThickness:i,baseF0:s})=>{const a=si(r,e,Ud(0,.03,i)),l=r.div(a).pow2().mul(n.pow2().oneMinus()).oneMinus();Gi(l.lessThan(0),()=>Xe(1));const c=l.sqrt(),u=VH(a,r),h=Rb({f0:u,f90:1,dotVH:n}),d=h.oneMinus(),f=a.lessThan(r).select(Math.PI,0),p=He(Math.PI).sub(f),g=HRe(s.clamp(0,.9999)),v=VH(g,a.toVec3()),x=Rb({f0:v,f90:1,dotVH:c}),_=Xe(g.x.lessThan(a).select(Math.PI,0),g.y.lessThan(a).select(Math.PI,0),g.z.lessThan(a).select(Math.PI,0)),E=a.mul(i,c,2),S=Xe(p).add(_),T=h.mul(x).clamp(1e-5,.9999),M=T.sqrt(),C=d.pow2().mul(x).div(Xe(1).sub(T)),P=h.add(C).toVar(),R=C.sub(d).toVar();return ec({start:1,end:2,condition:"<=",name:"m"},({m:O})=>{R.mulAssign(M);const D=WRe(He(O).mul(E),He(O).mul(S)).mul(2);P.addAssign(R.mul(D))}),P.max(Xe(0))}).setLayout({name:"evalIridescence",type:"vec3",inputs:[{name:"outsideIOR",type:"float"},{name:"eta2",type:"float"},{name:"cosTheta1",type:"float"},{name:"thinFilmThickness",type:"float"},{name:"baseF0",type:"vec3"}]}),XRe=ut(({normal:r,viewDir:e,roughness:n})=>{const i=r.dot(e).saturate(),s=n.pow2(),a=Ya(n.lessThan(.25),He(-339.2).mul(s).add(He(161.4).mul(n)).sub(25.9),He(-8.48).mul(s).add(He(14.3).mul(n)).sub(9.95)),o=Ya(n.lessThan(.25),He(44).mul(s).sub(He(23.7).mul(n)).add(3.26),He(1.97).mul(s).sub(He(3.27).mul(n)).add(.72));return Ya(n.lessThan(.25),0,He(.1).mul(n).sub(.025)).add(a.mul(i).add(o).exp()).mul(1/Math.PI).saturate()}),rR=Xe(.04),iR=He(1);class Cre extends sA{constructor(e=!1,n=!1,i=!1,s=!1,a=!1,o=!1){super(),this.clearcoat=e,this.sheen=n,this.iridescence=i,this.anisotropy=s,this.transmission=a,this.dispersion=o,this.clearcoatRadiance=null,this.clearcoatSpecularDirect=null,this.clearcoatSpecularIndirect=null,this.sheenSpecularDirect=null,this.sheenSpecularIndirect=null,this.iridescenceFresnel=null,this.iridescenceF0=null}start(e){if(this.clearcoat===!0&&(this.clearcoatRadiance=Xe().toVar("clearcoatRadiance"),this.clearcoatSpecularDirect=Xe().toVar("clearcoatSpecularDirect"),this.clearcoatSpecularIndirect=Xe().toVar("clearcoatSpecularIndirect")),this.sheen===!0&&(this.sheenSpecularDirect=Xe().toVar("sheenSpecularDirect"),this.sheenSpecularIndirect=Xe().toVar("sheenSpecularIndirect")),this.iridescence===!0){const n=Ji.dot(wi).clamp();this.iridescenceFresnel=qRe({outsideIOR:He(1),eta2:One,cosTheta1:n,thinFilmThickness:kne,baseF0:Mo}),this.iridescenceF0=kRe({f:this.iridescenceFresnel,f90:1,dotVH:n})}if(this.transmission===!0){const n=Cb,i=PNe.sub(Cb).normalize(),s=DU,a=e.context;a.backdrop=GRe(s,i,Wu,Cr,Mo,oE,n,Pp,Ah,IU,pT,Ine,Lne,Dne,this.dispersion?Fne:null),a.backdropAlpha=G3,Cr.a.mulAssign(si(1,a.backdrop.a,G3))}super.start(e)}computeMultiscattering(e,n,i){const s=Ji.dot(wi).clamp(),a=Tre({roughness:Wu,dotNV:s}),l=(this.iridescenceF0?EU.mix(Mo,this.iridescenceF0):Mo).mul(a.x).add(i.mul(a.y)),u=a.x.add(a.y).oneMinus(),h=Mo.add(Mo.oneMinus().mul(.047619)),d=l.mul(h).div(u.mul(h).oneMinus());e.addAssign(l),n.addAssign(d.mul(u))}direct({lightDirection:e,lightColor:n,reflectedLight:i}){const a=Ji.dot(e).clamp().mul(n);if(this.sheen===!0&&this.sheenSpecularDirect.addAssign(a.mul(LRe({lightDirection:e}))),this.clearcoat===!0){const l=tx.dot(e).clamp().mul(n);this.clearcoatSpecularDirect.addAssign(l.mul(IH({lightDirection:e,f0:rR,f90:iR,roughness:aE,normalView:tx})))}i.directDiffuse.addAssign(a.mul(Ty({diffuseColor:Cr.rgb}))),i.directSpecular.addAssign(a.mul(IH({lightDirection:e,f0:Mo,f90:1,roughness:Wu,iridescence:this.iridescence,f:this.iridescenceFresnel,USE_IRIDESCENCE:this.iridescence,USE_ANISOTROPY:this.anisotropy})))}directRectArea({lightColor:e,lightPosition:n,halfWidth:i,halfHeight:s,reflectedLight:a,ltc_1:o,ltc_2:l}){const c=n.add(i).sub(s),u=n.sub(i).sub(s),h=n.sub(i).add(s),d=n.add(i).add(s),f=Ji,p=wi,g=es.toVar(),v=FRe({N:f,V:p,roughness:Wu}),x=o.sample(v).toVar(),_=l.sample(v).toVar(),E=Pa(Xe(x.x,0,x.y),Xe(0,1,0),Xe(x.z,0,x.w)).toVar(),S=Mo.mul(_.x).add(Mo.oneMinus().mul(_.y)).toVar();a.directSpecular.addAssign(e.mul(S).mul(DH({N:f,V:p,P:g,mInv:E,p0:c,p1:u,p2:h,p3:d}))),a.directDiffuse.addAssign(e.mul(Cr).mul(DH({N:f,V:p,P:g,mInv:Pa(1,0,0,0,1,0,0,0,1),p0:c,p1:u,p2:h,p3:d})))}indirect(e){this.indirectDiffuse(e),this.indirectSpecular(e),this.ambientOcclusion(e)}indirectDiffuse(e){const{irradiance:n,reflectedLight:i}=e.context;i.indirectDiffuse.addAssign(n.mul(Ty({diffuseColor:Cr})))}indirectSpecular(e){const{radiance:n,iblIrradiance:i,reflectedLight:s}=e.context;if(this.sheen===!0&&this.sheenSpecularIndirect.addAssign(i.mul(Cg,XRe({normal:Ji,viewDir:wi,roughness:TU}))),this.clearcoat===!0){const h=tx.dot(wi).clamp(),d=Ere({dotNV:h,specularColor:rR,specularF90:iR,roughness:aE});this.clearcoatSpecularIndirect.addAssign(this.clearcoatRadiance.mul(d))}const a=Xe().toVar("singleScattering"),o=Xe().toVar("multiScattering"),l=i.mul(1/Math.PI);this.computeMultiscattering(a,o,oE);const c=a.add(o),u=Cr.mul(c.r.max(c.g).max(c.b).oneMinus());s.indirectSpecular.addAssign(n.mul(a)),s.indirectSpecular.addAssign(o.mul(l)),s.indirectDiffuse.addAssign(u.mul(l))}ambientOcclusion(e){const{ambientOcclusion:n,reflectedLight:i}=e.context,a=Ji.dot(wi).clamp().add(n),o=Wu.mul(-16).oneMinus().negate().exp2(),l=n.sub(a.pow(o).oneMinus()).clamp();this.clearcoat===!0&&this.clearcoatSpecularIndirect.mulAssign(n),this.sheen===!0&&this.sheenSpecularIndirect.mulAssign(n),i.indirectDiffuse.mulAssign(n),i.indirectSpecular.mulAssign(l)}finish({context:e}){const{outgoingLight:n}=e;if(this.clearcoat===!0){const i=tx.dot(wi).clamp(),s=Rb({dotVH:i,f0:rR,f90:iR}),a=n.mul(U3.mul(s).oneMinus()).add(this.clearcoatSpecularDirect.add(this.clearcoatSpecularIndirect).mul(U3));n.assign(a)}if(this.sheen===!0){const i=Cg.r.max(Cg.g).max(Cg.b).mul(.157).oneMinus(),s=n.mul(i).add(this.sheenSpecularDirect,this.sheenSpecularIndirect);n.assign(s)}}}const HH=He(1),q3=He(-2),gS=He(.8),sR=He(-1),yS=He(.4),aR=He(2),vS=He(.305),oR=He(3),WH=He(.21),KRe=He(4),qH=He(4),YRe=He(16),ZRe=ut(([r])=>{const e=Xe(rl(r)).toVar(),n=He(-1).toVar();return Gi(e.x.greaterThan(e.z),()=>{Gi(e.x.greaterThan(e.y),()=>{n.assign(Ya(r.x.greaterThan(0),0,3))}).Else(()=>{n.assign(Ya(r.y.greaterThan(0),1,4))})}).Else(()=>{Gi(e.z.greaterThan(e.y),()=>{n.assign(Ya(r.z.greaterThan(0),2,5))}).Else(()=>{n.assign(Ya(r.y.greaterThan(0),1,4))})}),n}).setLayout({name:"getFace",type:"float",inputs:[{name:"direction",type:"vec3"}]}),QRe=ut(([r,e])=>{const n=_t().toVar();return Gi(e.equal(0),()=>{n.assign(_t(r.z,r.y).div(rl(r.x)))}).ElseIf(e.equal(1),()=>{n.assign(_t(r.x.negate(),r.z.negate()).div(rl(r.y)))}).ElseIf(e.equal(2),()=>{n.assign(_t(r.x.negate(),r.y).div(rl(r.z)))}).ElseIf(e.equal(3),()=>{n.assign(_t(r.z.negate(),r.y).div(rl(r.x)))}).ElseIf(e.equal(4),()=>{n.assign(_t(r.x.negate(),r.z).div(rl(r.y)))}).Else(()=>{n.assign(_t(r.x,r.y).div(rl(r.z)))}),ur(.5,n.add(1))}).setLayout({name:"getUV",type:"vec2",inputs:[{name:"direction",type:"vec3"},{name:"face",type:"float"}]}),JRe=ut(([r])=>{const e=He(0).toVar();return Gi(r.greaterThanEqual(gS),()=>{e.assign(HH.sub(r).mul(sR.sub(q3)).div(HH.sub(gS)).add(q3))}).ElseIf(r.greaterThanEqual(yS),()=>{e.assign(gS.sub(r).mul(aR.sub(sR)).div(gS.sub(yS)).add(sR))}).ElseIf(r.greaterThanEqual(vS),()=>{e.assign(yS.sub(r).mul(oR.sub(aR)).div(yS.sub(vS)).add(aR))}).ElseIf(r.greaterThanEqual(WH),()=>{e.assign(vS.sub(r).mul(KRe.sub(oR)).div(vS.sub(WH)).add(oR))}).Else(()=>{e.assign(He(-2).mul(lh(ur(1.16,r))))}),e}).setLayout({name:"roughnessToMip",type:"float",inputs:[{name:"roughness",type:"float"}]}),eOe=ut(([r,e])=>{const n=r.toVar();n.assign(ur(2,n).sub(1));const i=Xe(n,1).toVar();return Gi(e.equal(0),()=>{i.assign(i.zyx)}).ElseIf(e.equal(1),()=>{i.assign(i.xzy),i.xz.mulAssign(-1)}).ElseIf(e.equal(2),()=>{i.x.mulAssign(-1)}).ElseIf(e.equal(3),()=>{i.assign(i.zyx),i.xz.mulAssign(-1)}).ElseIf(e.equal(4),()=>{i.assign(i.xzy),i.xy.mulAssign(-1)}).ElseIf(e.equal(5),()=>{i.z.mulAssign(-1)}),i}).setLayout({name:"getDirection",type:"vec3",inputs:[{name:"uv",type:"vec2"},{name:"face",type:"float"}]}),tOe=ut(([r,e,n,i,s,a])=>{const o=He(n),l=Xe(e),c=yh(JRe(o),q3,a),u=Qd(c),h=mp(c),d=Xe(X3(r,l,h,i,s,a)).toVar();return Gi(u.notEqual(0),()=>{const f=Xe(X3(r,l,h.add(1),i,s,a)).toVar();d.assign(si(d,f,u))}),d}),X3=ut(([r,e,n,i,s,a])=>{const o=He(n).toVar(),l=Xe(e),c=He(ZRe(l)).toVar(),u=He(io(qH.sub(o),0)).toVar();o.assign(io(o,qH));const h=He(Tb(o)).toVar(),d=_t(QRe(l,c).mul(h.sub(2)).add(1)).toVar();return Gi(c.greaterThan(2),()=>{d.y.addAssign(h),c.subAssign(3)}),d.x.addAssign(c.mul(h)),d.x.addAssign(u.mul(ur(3,YRe))),d.y.addAssign(ur(4,Tb(a).sub(h))),d.x.mulAssign(i),d.y.mulAssign(s),r.sample(d).grad(_t(),_t())}),lR=ut(({envMap:r,mipInt:e,outputDirection:n,theta:i,axis:s,CUBEUV_TEXEL_WIDTH:a,CUBEUV_TEXEL_HEIGHT:o,CUBEUV_MAX_MIP:l})=>{const c=yd(i),u=n.mul(c).add(s.cross(n).mul(Ql(i))).add(s.mul(s.dot(n).mul(c.oneMinus())));return X3(r,u,e,a,o,l)}),nOe=ut(({n:r,latitudinal:e,poleAxis:n,outputDirection:i,weights:s,samples:a,dTheta:o,mipInt:l,envMap:c,CUBEUV_TEXEL_WIDTH:u,CUBEUV_TEXEL_HEIGHT:h,CUBEUV_MAX_MIP:d})=>{const f=Xe(Ya(e,n,Hne(n,i))).toVar();Gi(f.equal(Xe(0)),()=>{f.assign(Xe(i.z,0,i.x.negate()))}),f.assign(Eb(f));const p=Xe().toVar();return p.addAssign(s.element(0).mul(lR({theta:0,axis:f,outputDirection:i,mipInt:l,envMap:c,CUBEUV_TEXEL_WIDTH:u,CUBEUV_TEXEL_HEIGHT:h,CUBEUV_MAX_MIP:d}))),ec({start:Si(1),end:r},({i:g})=>{Gi(g.greaterThanEqual(a),()=>{$Pe()});const v=He(o.mul(He(g))).toVar();p.addAssign(s.element(g).mul(lR({theta:v.mul(-1),axis:f,outputDirection:i,mipInt:l,envMap:c,CUBEUV_TEXEL_WIDTH:u,CUBEUV_TEXEL_HEIGHT:h,CUBEUV_MAX_MIP:d}))),p.addAssign(s.element(g).mul(lR({theta:v,axis:f,outputDirection:i,mipInt:l,envMap:c,CUBEUV_TEXEL_WIDTH:u,CUBEUV_TEXEL_HEIGHT:h,CUBEUV_MAX_MIP:d})))}),Bn(p,1)}),Ng=4,XH=[.125,.215,.35,.446,.526,.582],ep=20,cR=new T_(-1,1,1,-1,0,1),rOe=new Ns(90,1),KH=new ln;let uR=null,hR=0,dR=0;const Xf=(1+Math.sqrt(5))/2,ig=1/Xf,YH=[new pe(-Xf,ig,0),new pe(Xf,ig,0),new pe(-ig,0,Xf),new pe(ig,0,Xf),new pe(0,Xf,-ig),new pe(0,Xf,ig),new pe(-1,1,-1),new pe(1,1,-1),new pe(-1,1,1),new pe(1,1,1)],iOe=new pe,Nre=new WeakMap,sOe=[3,1,5,0,4,2],fR=eOe(B_(),vh("faceIndex")).normalize(),UU=Xe(fR.x,fR.y,fR.z);class aOe{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._lodMeshes=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._backgroundBox=null}get _hasInitialized(){return this._renderer.hasInitialized()}fromScene(e,n=0,i=.1,s=100,a={}){const{size:o=256,position:l=iOe,renderTarget:c=null}=a;if(this._setSize(o),this._hasInitialized===!1){console.warn("THREE.PMREMGenerator: .fromScene() called before the backend is initialized. Try using .fromSceneAsync() instead.");const h=c||this._allocateTargets();return a.renderTarget=h,this.fromSceneAsync(e,n,i,s,a),h}uR=this._renderer.getRenderTarget(),hR=this._renderer.getActiveCubeFace(),dR=this._renderer.getActiveMipmapLevel();const u=c||this._allocateTargets();return u.depthBuffer=!0,this._sceneToCubeUV(e,i,s,u,l),n>0&&this._blur(u,0,0,n),this._applyPMREM(u),this._cleanup(u),u}async fromSceneAsync(e,n=0,i=.1,s=100,a={}){return this._hasInitialized===!1&&await this._renderer.init(),this.fromScene(e,n,i,s,a)}fromEquirectangular(e,n=null){if(this._hasInitialized===!1){console.warn("THREE.PMREMGenerator: .fromEquirectangular() called before the backend is initialized. Try using .fromEquirectangularAsync() instead."),this._setSizeFromTexture(e);const i=n||this._allocateTargets();return this.fromEquirectangularAsync(e,i),i}return this._fromTexture(e,n)}async fromEquirectangularAsync(e,n=null){return this._hasInitialized===!1&&await this._renderer.init(),this._fromTexture(e,n)}fromCubemap(e,n=null){if(this._hasInitialized===!1){console.warn("THREE.PMREMGenerator: .fromCubemap() called before the backend is initialized. Try using .fromCubemapAsync() instead."),this._setSizeFromTexture(e);const i=n||this._allocateTargets();return this.fromCubemapAsync(e,n),i}return this._fromTexture(e,n)}async fromCubemapAsync(e,n=null){return this._hasInitialized===!1&&await this._renderer.init(),this._fromTexture(e,n)}async compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=QH(),await this._compileMaterial(this._cubemapMaterial))}async compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=JH(),await this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose(),this._backgroundBox!==null&&(this._backgroundBox.geometry.dispose(),this._backgroundBox.material.dispose())}_setSizeFromTexture(e){e.mapping===ml||e.mapping===gl?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4)}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(uR,hR,dR),e.scissorTest=!1,xS(e,0,0,e.width,e.height)}_fromTexture(e,n){this._setSizeFromTexture(e),uR=this._renderer.getRenderTarget(),hR=this._renderer.getActiveCubeFace(),dR=this._renderer.getActiveMipmapLevel();const i=n||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),n=4*this._cubeSize,i={magFilter:ds,minFilter:ds,generateMipmaps:!1,type:da,format:Oi,colorSpace:Fc},s=ZH(e,n,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==n){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=ZH(e,n,i);const{_lodMax:a}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas,lodMeshes:this._lodMeshes}=oOe(a)),this._blurMaterial=lOe(a,e,n)}return s}async _compileMaterial(e){const n=new li(this._lodPlanes[0],e);await this._renderer.compile(n,cR)}_sceneToCubeUV(e,n,i,s,a){const o=rOe;o.near=n,o.far=i;const l=[1,1,1,1,-1,1],c=[1,-1,1,-1,1,-1],u=this._renderer,h=u.autoClear;u.getClearColor(KH),u.autoClear=!1;let d=this._backgroundBox;if(d===null){const g=new Aa({name:"PMREM.Background",side:Wr,depthWrite:!1,depthTest:!1});d=new li(new Bc,g)}let f=!1;const p=e.background;p?p.isColor&&(d.material.color.copy(p),e.background=null,f=!0):(d.material.color.copy(KH),f=!0),u.setRenderTarget(s),u.clear(),f&&u.render(d,o);for(let g=0;g<6;g++){const v=g%3;v===0?(o.up.set(0,l[g],0),o.position.set(a.x,a.y,a.z),o.lookAt(a.x+c[g],a.y,a.z)):v===1?(o.up.set(0,0,l[g]),o.position.set(a.x,a.y,a.z),o.lookAt(a.x,a.y+c[g],a.z)):(o.up.set(0,l[g],0),o.position.set(a.x,a.y,a.z),o.lookAt(a.x,a.y,a.z+c[g]));const x=this._cubeSize;xS(s,v*x,g>2?x:0,x,x),u.render(e,o)}u.autoClear=h,e.background=p}_textureToCubeUV(e,n){const i=this._renderer,s=e.mapping===ml||e.mapping===gl;s?this._cubemapMaterial===null&&(this._cubemapMaterial=QH(e)):this._equirectMaterial===null&&(this._equirectMaterial=JH(e));const a=s?this._cubemapMaterial:this._equirectMaterial;a.fragmentNode.value=e;const o=this._lodMeshes[0];o.material=a;const l=this._cubeSize;xS(n,0,0,3*l,2*l),i.setRenderTarget(n),i.render(o,cR)}_applyPMREM(e){const n=this._renderer,i=n.autoClear;n.autoClear=!1;const s=this._lodPlanes.length;for(let a=1;a<s;a++){const o=Math.sqrt(this._sigmas[a]*this._sigmas[a]-this._sigmas[a-1]*this._sigmas[a-1]),l=YH[(s-a-1)%YH.length];this._blur(e,a-1,a,o,l)}n.autoClear=i}_blur(e,n,i,s,a){const o=this._pingPongRenderTarget;this._halfBlur(e,o,n,i,s,"latitudinal",a),this._halfBlur(o,e,i,i,s,"longitudinal",a)}_halfBlur(e,n,i,s,a,o,l){const c=this._renderer,u=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const h=3,d=this._lodMeshes[s];d.material=u;const f=Nre.get(u),p=this._sizeLods[i]-1,g=isFinite(a)?Math.PI/(2*p):2*Math.PI/(2*ep-1),v=a/g,x=isFinite(a)?1+Math.floor(h*v):ep;x>ep&&console.warn(`sigmaRadians, ${a}, is too large and will clip, as it requested ${x} samples when the maximum is set to ${ep}`);const _=[];let E=0;for(let A=0;A<ep;++A){const P=A/v,R=Math.exp(-P*P/2);_.push(R),A===0?E+=R:A<x&&(E+=2*R)}for(let A=0;A<_.length;A++)_[A]=_[A]/E;e.texture.frame=(e.texture.frame||0)+1,f.envMap.value=e.texture,f.samples.value=x,f.weights.array=_,f.latitudinal.value=o==="latitudinal"?1:0,l&&(f.poleAxis.value=l);const{_lodMax:S}=this;f.dTheta.value=g,f.mipInt.value=S-i;const T=this._sizeLods[s],M=3*T*(s>S-Ng?s-S+Ng:0),C=4*(this._cubeSize-T);xS(n,M,C,3*T,2*T),c.setRenderTarget(n),c.render(d,cR)}}function oOe(r){const e=[],n=[],i=[],s=[];let a=r;const o=r-Ng+1+XH.length;for(let l=0;l<o;l++){const c=Math.pow(2,a);n.push(c);let u=1/c;l>r-Ng?u=XH[l-r+Ng-1]:l===0&&(u=0),i.push(u);const h=1/(c-2),d=-h,f=1+h,p=[d,d,f,d,f,f,d,d,f,f,d,f],g=6,v=6,x=3,_=2,E=1,S=new Float32Array(x*v*g),T=new Float32Array(_*v*g),M=new Float32Array(E*v*g);for(let A=0;A<g;A++){const P=A%3*2/3-1,R=A>2?0:-1,O=[P,R,0,P+2/3,R,0,P+2/3,R+1,0,P,R,0,P+2/3,R+1,0,P,R+1,0],D=sOe[A];S.set(O,x*v*D),T.set(p,_*v*D);const F=[D,D,D,D,D,D];M.set(F,E*v*D)}const C=new Ws;C.setAttribute("position",new ps(S,x)),C.setAttribute("uv",new ps(T,_)),C.setAttribute("faceIndex",new ps(M,E)),e.push(C),s.push(new li(C,null)),a>Ng&&a--}return{lodPlanes:e,sizeLods:n,sigmas:i,lodMeshes:s}}function ZH(r,e,n){const i=new Fp(r,e,n);return i.texture.mapping=bp,i.texture.name="PMREM.cubeUv",i.texture.isPMREMTexture=!0,i.scissorTest=!0,i}function xS(r,e,n,i,s){r.viewport.set(e,n,i,s),r.scissor.set(e,n,i,s)}function zU(r){const e=new xs;return e.depthTest=!1,e.depthWrite=!1,e.blending=eo,e.name=`PMREM_${r}`,e}function lOe(r,e,n){const i=Ac(new Array(ep).fill(0)),s=jn(new pe(0,1,0)),a=jn(0),o=He(ep),l=jn(0),c=jn(1),u=xr(null),h=jn(0),d=He(1/e),f=He(1/n),p=He(r),g={n:o,latitudinal:l,weights:i,poleAxis:s,outputDirection:UU,dTheta:a,samples:c,envMap:u,mipInt:h,CUBEUV_TEXEL_WIDTH:d,CUBEUV_TEXEL_HEIGHT:f,CUBEUV_MAX_MIP:p},v=zU("blur");return v.fragmentNode=nOe({...g,latitudinal:l.equal(1)}),Nre.set(v,g),v}function QH(r){const e=zU("cubemap");return e.fragmentNode=Nb(r,UU),e}function JH(r){const e=zU("equirect");return e.fragmentNode=xr(r,yre(UU),0),e}const eW=new WeakMap;function cOe(r){const e=Math.log2(r)-2,n=1/r;return{texelWidth:1/(3*Math.max(Math.pow(2,e),7*16)),texelHeight:n,maxMip:e}}function uOe(r,e,n){const i=hOe(e);let s=i.get(r);if((s!==void 0?s.pmremVersion:-1)!==r.pmremVersion){const o=r.image;if(r.isCubeTexture)if(fOe(o))s=n.fromCubemap(r,s);else return null;else if(pOe(o))s=n.fromEquirectangular(r,s);else return null;s.pmremVersion=r.pmremVersion,i.set(r,s)}return s.texture}function hOe(r){let e=eW.get(r);return e===void 0&&(e=new WeakMap,eW.set(r,e)),e}class dOe extends Hi{static get type(){return"PMREMNode"}constructor(e,n=null,i=null){super("vec3"),this._value=e,this._pmrem=null,this.uvNode=n,this.levelNode=i,this._generator=null;const s=new Oa;s.isRenderTargetTexture=!0,this._texture=xr(s),this._width=jn(0),this._height=jn(0),this._maxMip=jn(0),this.updateBeforeType=nr.RENDER}set value(e){this._value=e,this._pmrem=null}get value(){return this._value}updateFromTexture(e){const n=cOe(e.image.height);this._texture.value=e,this._width.value=n.texelWidth,this._height.value=n.texelHeight,this._maxMip.value=n.maxMip}updateBefore(e){let n=this._pmrem;const i=n?n.pmremVersion:-1,s=this._value;i!==s.pmremVersion&&(s.isPMREMTexture===!0?n=s:n=uOe(s,e.renderer,this._generator),n!==null&&(this._pmrem=n,this.updateFromTexture(n)))}setup(e){this._generator===null&&(this._generator=new aOe(e.renderer)),this.updateBefore(e);let n=this.uvNode;n===null&&e.context.getUV&&(n=e.context.getUV(this)),n=sre.mul(Xe(n.x,n.y.negate(),n.z));let i=this.levelNode;return i===null&&e.context.getTextureLevel&&(i=e.context.getTextureLevel(this)),tOe(this._texture,n,i,this._width,this._height,this._maxMip)}dispose(){super.dispose(),this._generator!==null&&this._generator.dispose()}}function fOe(r){if(r==null)return!1;let e=0;const n=6;for(let i=0;i<n;i++)r[i]!==void 0&&e++;return e===n}function pOe(r){return r==null?!1:r.height>0}const Pre=rt(dOe).setParameterLength(1,3),tW=new WeakMap;class mOe extends f0{static get type(){return"EnvironmentNode"}constructor(e=null){super(),this.envNode=e}setup(e){const{material:n}=e;let i=this.envNode;if(i.isTextureNode||i.isMaterialReferenceNode){const d=i.isTextureNode?i.value:n[i.property];let f=tW.get(d);f===void 0&&(f=Pre(d),tW.set(d,f)),i=f}const a=n.useAnisotropy===!0||n.anisotropy>0?XNe:Ji,o=i.context(nW(Wu,a)).mul(JP),l=i.context(gOe(DU)).mul(Math.PI).mul(JP),c=gT(o),u=gT(l);e.context.radiance.addAssign(c),e.context.iblIrradiance.addAssign(u);const h=e.context.lightingModel.clearcoatRadiance;if(h){const d=i.context(nW(aE,tx)).mul(JP),f=gT(d);h.addAssign(f)}}}const nW=(r,e)=>{let n=null;return{getUV:()=>(n===null&&(n=wi.negate().reflect(e),n=r.mul(r).mix(n,e).normalize(),n=n.transformDirection(Ah)),n),getTextureLevel:()=>r}},gOe=r=>({getUV:()=>r,getTextureLevel:()=>He(1)}),yOe=new vee;class Rre extends xs{static get type(){return"MeshStandardNodeMaterial"}constructor(e){super(),this.isMeshStandardNodeMaterial=!0,this.lights=!0,this.emissiveNode=null,this.metalnessNode=null,this.roughnessNode=null,this.setDefaultValues(yOe),this.setValues(e)}setupEnvironment(e){let n=super.setupEnvironment(e);return n===null&&e.environmentNode&&(n=e.environmentNode),n?new mOe(n):null}setupLightingModel(){return new Cre}setupSpecular(){const e=si(Xe(.04),Cr.rgb,sE);Mo.assign(e),oE.assign(1)}setupVariants(){const e=this.metalnessNode?He(this.metalnessNode):lPe;sE.assign(e);let n=this.roughnessNode?He(this.roughnessNode):oPe;n=Sre({roughness:n}),Wu.assign(n),this.setupSpecular(),Cr.assign(Bn(Cr.rgb.mul(e.oneMinus()),Cr.a))}copy(e){return this.emissiveNode=e.emissiveNode,this.metalnessNode=e.metalnessNode,this.roughnessNode=e.roughnessNode,super.copy(e)}}const vOe=new rye;class xOe extends Rre{static get type(){return"MeshPhysicalNodeMaterial"}constructor(e){super(),this.isMeshPhysicalNodeMaterial=!0,this.clearcoatNode=null,this.clearcoatRoughnessNode=null,this.clearcoatNormalNode=null,this.sheenNode=null,this.sheenRoughnessNode=null,this.iridescenceNode=null,this.iridescenceIORNode=null,this.iridescenceThicknessNode=null,this.specularIntensityNode=null,this.specularColorNode=null,this.iorNode=null,this.transmissionNode=null,this.thicknessNode=null,this.attenuationDistanceNode=null,this.attenuationColorNode=null,this.dispersionNode=null,this.anisotropyNode=null,this.setDefaultValues(vOe),this.setValues(e)}get useClearcoat(){return this.clearcoat>0||this.clearcoatNode!==null}get useIridescence(){return this.iridescence>0||this.iridescenceNode!==null}get useSheen(){return this.sheen>0||this.sheenNode!==null}get useAnisotropy(){return this.anisotropy>0||this.anisotropyNode!==null}get useTransmission(){return this.transmission>0||this.transmissionNode!==null}get useDispersion(){return this.dispersion>0||this.dispersionNode!==null}setupSpecular(){const e=this.iorNode?He(this.iorNode):wPe;pT.assign(e),Mo.assign(si(Mb(Wne(pT.sub(1).div(pT.add(1))).mul(aPe),Xe(1)).mul(CH),Cr.rgb,sE)),oE.assign(si(CH,1,sE))}setupLightingModel(){return new Cre(this.useClearcoat,this.useSheen,this.useIridescence,this.useAnisotropy,this.useTransmission,this.useDispersion)}setupVariants(e){if(super.setupVariants(e),this.useClearcoat){const n=this.clearcoatNode?He(this.clearcoatNode):uPe,i=this.clearcoatRoughnessNode?He(this.clearcoatRoughnessNode):hPe;U3.assign(n),aE.assign(Sre({roughness:i}))}if(this.useSheen){const n=this.sheenNode?Xe(this.sheenNode):pPe,i=this.sheenRoughnessNode?He(this.sheenRoughnessNode):mPe;Cg.assign(n),TU.assign(i)}if(this.useIridescence){const n=this.iridescenceNode?He(this.iridescenceNode):yPe,i=this.iridescenceIORNode?He(this.iridescenceIORNode):vPe,s=this.iridescenceThicknessNode?He(this.iridescenceThicknessNode):xPe;EU.assign(n),One.assign(i),kne.assign(s)}if(this.useAnisotropy){const n=(this.anisotropyNode?_t(this.anisotropyNode):gPe).toVar();qf.assign(n.length()),Gi(qf.equal(0),()=>{n.assign(_t(1,0))}).Else(()=>{n.divAssign(_t(qf)),qf.assign(qf.saturate())}),z3.assign(qf.pow2().mix(Wu.pow2(),1)),fT.assign(nx[0].mul(n.x).add(nx[1].mul(n.y))),Wg.assign(nx[1].mul(n.x).sub(nx[0].mul(n.y)))}if(this.useTransmission){const n=this.transmissionNode?He(this.transmissionNode):bPe,i=this.thicknessNode?He(this.thicknessNode):_Pe,s=this.attenuationDistanceNode?He(this.attenuationDistanceNode):SPe,a=this.attenuationColorNode?Xe(this.attenuationColorNode):TPe;if(G3.assign(n),Ine.assign(i),Dne.assign(s),Lne.assign(a),this.useDispersion){const o=this.dispersionNode?He(this.dispersionNode):PPe;Fne.assign(o)}}}setupClearcoatNormal(){return this.clearcoatNormalNode?Xe(this.clearcoatNormalNode):dPe}setup(e){e.context.setupClearcoatNormal=()=>this.setupClearcoatNormal(e),super.setup(e)}copy(e){return this.clearcoatNode=e.clearcoatNode,this.clearcoatRoughnessNode=e.clearcoatRoughnessNode,this.clearcoatNormalNode=e.clearcoatNormalNode,this.sheenNode=e.sheenNode,this.sheenRoughnessNode=e.sheenRoughnessNode,this.iridescenceNode=e.iridescenceNode,this.iridescenceIORNode=e.iridescenceIORNode,this.iridescenceThicknessNode=e.iridescenceThicknessNode,this.specularIntensityNode=e.specularIntensityNode,this.specularColorNode=e.specularColorNode,this.transmissionNode=e.transmissionNode,this.thicknessNode=e.thicknessNode,this.attenuationDistanceNode=e.attenuationDistanceNode,this.attenuationColorNode=e.attenuationColorNode,this.dispersionNode=e.dispersionNode,this.anisotropyNode=e.anisotropyNode,super.copy(e)}}const bOe=ut(({normal:r,lightDirection:e,builder:n})=>{const i=r.dot(e),s=_t(i.mul(.5).add(.5),0);if(n.material.gradientMap){const a=xd("gradientMap","texture").context({getUV:()=>s});return Xe(a.r)}else{const a=s.fwidth().mul(.5);return si(Xe(.7),Xe(1),Ud(He(.7).sub(a.x),He(.7).add(a.x),s.x))}});class _Oe extends sA{direct({lightDirection:e,lightColor:n,reflectedLight:i},s){const a=bOe({normal:nre,lightDirection:e,builder:s}).mul(n);i.directDiffuse.addAssign(a.mul(Ty({diffuseColor:Cr.rgb})))}indirect(e){const{ambientOcclusion:n,irradiance:i,reflectedLight:s}=e.context;s.indirectDiffuse.addAssign(i.mul(Ty({diffuseColor:Cr}))),s.indirectDiffuse.mulAssign(n)}}const wOe=new sye;class SOe extends xs{static get type(){return"MeshToonNodeMaterial"}constructor(e){super(),this.isMeshToonNodeMaterial=!0,this.lights=!0,this.setDefaultValues(wOe),this.setValues(e)}setupLightingModel(){return new _Oe}}class TOe extends Hi{static get type(){return"MatcapUVNode"}constructor(){super("vec2")}setup(){const e=Xe(wi.z,0,wi.x.negate()).normalize(),n=wi.cross(e);return _t(e.dot(Ji),n.dot(Ji)).mul(.495).add(.5)}}const EOe=xt(TOe),MOe=new cye;class AOe extends xs{static get type(){return"MeshMatcapNodeMaterial"}constructor(e){super(),this.isMeshMatcapNodeMaterial=!0,this.setDefaultValues(MOe),this.setValues(e)}setupVariants(e){const n=EOe;let i;e.material.matcap?i=xd("matcap","texture").context({getUV:()=>n}):i=Xe(si(.2,.8,n.y)),Cr.rgb.mulAssign(i.rgb)}}class COe extends Hi{static get type(){return"RotateNode"}constructor(e,n){super(),this.positionNode=e,this.rotationNode=n}getNodeType(e){return this.positionNode.getNodeType(e)}setup(e){const{rotationNode:n,positionNode:i}=this;if(this.getNodeType(e)==="vec2"){const a=n.cos(),o=n.sin();return wU(a,o,o.negate(),a).mul(i)}else{const a=n,o=Hg(Bn(1,0,0,0),Bn(0,yd(a.x),Ql(a.x).negate(),0),Bn(0,Ql(a.x),yd(a.x),0),Bn(0,0,0,1)),l=Hg(Bn(yd(a.y),0,Ql(a.y),0),Bn(0,1,0,0),Bn(Ql(a.y).negate(),0,yd(a.y),0),Bn(0,0,0,1)),c=Hg(Bn(yd(a.z),Ql(a.z).negate(),0,0),Bn(Ql(a.z),yd(a.z),0,0),Bn(0,0,1,0),Bn(0,0,0,1));return o.mul(l).mul(c).mul(Bn(i,1)).xyz}}}const Ore=rt(COe).setParameterLength(2),NOe=new Ige;class kre extends xs{static get type(){return"SpriteNodeMaterial"}constructor(e){super(),this.isSpriteNodeMaterial=!0,this._useSizeAttenuation=!0,this.positionNode=null,this.rotationNode=null,this.scaleNode=null,this.transparent=!0,this.setDefaultValues(NOe),this.setValues(e)}setupPositionView(e){const{object:n,camera:i}=e,s=this.sizeAttenuation,{positionNode:a,rotationNode:o,scaleNode:l}=this,c=tA.mul(Xe(a||0));let u=_t(Pp[0].xyz.length(),Pp[1].xyz.length());if(l!==null&&(u=u.mul(_t(l))),s===!1)if(i.isPerspectiveCamera)u=u.mul(c.z.negate());else{const p=He(2).div(IU.element(1).element(1));u=u.mul(p.mul(2))}let h=nA.xy;if(n.center&&n.center.isVector2===!0){const p=iNe("center","vec2",n);h=h.sub(p.sub(.5))}h=h.mul(u);const d=He(o||fPe),f=Ore(h,d);return Bn(c.xy.add(f),c.zw)}copy(e){return this.positionNode=e.positionNode,this.rotationNode=e.rotationNode,this.scaleNode=e.scaleNode,super.copy(e)}get sizeAttenuation(){return this._useSizeAttenuation}set sizeAttenuation(e){this._useSizeAttenuation!==e&&(this._useSizeAttenuation=e,this.needsUpdate=!0)}}const POe=new jge;class ROe extends kre{static get type(){return"PointsNodeMaterial"}constructor(e){super(),this.sizeNode=null,this.isPointsNodeMaterial=!0,this.setDefaultValues(POe),this.setValues(e)}setupPositionView(){const{positionNode:e}=this;return tA.mul(Xe(e||ha)).xyz}setupVertex(e){const n=super.setupVertex(e);if(e.material.isNodeMaterial!==!0)return n;const{rotationNode:i,scaleNode:s,sizeNode:a}=this,o=nA.xy.toVar(),l=Sx.z.div(Sx.w);if(i&&i.isNode){const u=He(i);o.assign(Ore(o,u))}let c=a!==null?_t(a):NPe;return this.sizeAttenuation===!0&&(c=c.mul(c.div(es.z.negate()))),s&&s.isNode&&(c=c.mul(_t(s))),o.mulAssign(c.mul(2)),o.assign(o.div(Sx.z)),o.y.assign(o.y.mul(l)),o.assign(o.mul(n.w)),n.addAssign(Bn(o,0,0)),n}get alphaToCoverage(){return this._useAlphaToCoverage}set alphaToCoverage(e){this._useAlphaToCoverage!==e&&(this._useAlphaToCoverage=e,this.needsUpdate=!0)}}class OOe extends sA{constructor(){super(),this.shadowNode=He(1).toVar("shadowMask")}direct({lightNode:e}){this.shadowNode.mulAssign(e.shadowNode)}finish({context:e}){Cr.a.mulAssign(this.shadowNode.oneMinus()),e.outgoingLight.rgb.assign(Cr.rgb)}}const kOe=new nye;class IOe extends xs{static get type(){return"ShadowNodeMaterial"}constructor(e){super(),this.isShadowNodeMaterial=!0,this.lights=!0,this.transparent=!0,this.setDefaultValues(kOe),this.setValues(e)}setupLightingModel(){return new OOe}}L_("vec3");L_("vec3");L_("vec3");class DOe{constructor(e,n){this.nodes=e,this.info=n,this._context=self,this._animationLoop=null,this._requestId=null}start(){const e=(n,i)=>{this._requestId=this._context.requestAnimationFrame(e),this.info.autoReset===!0&&this.info.reset(),this.nodes.nodeFrame.update(),this.info.frame=this.nodes.nodeFrame.frameId,this._animationLoop!==null&&this._animationLoop(n,i)};e()}stop(){this._context.cancelAnimationFrame(this._requestId),this._requestId=null}getAnimationLoop(){return this._animationLoop}setAnimationLoop(e){this._animationLoop=e}getContext(){return this._context}setContext(e){this._context=e}dispose(){this.stop()}}class Yc{constructor(){this.weakMap=new WeakMap}get(e){let n=this.weakMap;for(let i=0;i<e.length-1;i++)if(n=n.get(e[i]),n===void 0)return;return n.get(e[e.length-1])}set(e,n){let i=this.weakMap;for(let s=0;s<e.length-1;s++){const a=e[s];i.has(a)===!1&&i.set(a,new WeakMap),i=i.get(a)}return i.set(e[e.length-1],n),this}delete(e){let n=this.weakMap;for(let i=0;i<e.length-1;i++)if(n=n.get(e[i]),n===void 0)return!1;return n.delete(e[e.length-1])}}let LOe=0;function FOe(r){const e=Object.keys(r);let n=Object.getPrototypeOf(r);for(;n;){const i=Object.getOwnPropertyDescriptors(n);for(const s in i)if(i[s]!==void 0){const a=i[s];a&&typeof a.get=="function"&&e.push(s)}n=Object.getPrototypeOf(n)}return e}class BOe{constructor(e,n,i,s,a,o,l,c,u,h){this.id=LOe++,this._nodes=e,this._geometries=n,this.renderer=i,this.object=s,this.material=a,this.scene=o,this.camera=l,this.lightsNode=c,this.context=u,this.geometry=s.geometry,this.version=a.version,this.drawRange=null,this.attributes=null,this.pipeline=null,this.group=null,this.vertexBuffers=null,this.drawParams=null,this.bundle=null,this.clippingContext=h,this.clippingContextCacheKey=h!==null?h.cacheKey:"",this.initialNodesCacheKey=this.getDynamicCacheKey(),this.initialCacheKey=this.getCacheKey(),this._nodeBuilderState=null,this._bindings=null,this._monitor=null,this.onDispose=null,this.isRenderObject=!0,this.onMaterialDispose=()=>{this.dispose()},this.material.addEventListener("dispose",this.onMaterialDispose)}updateClipping(e){this.clippingContext=e}get clippingNeedsUpdate(){return this.clippingContext===null||this.clippingContext.cacheKey===this.clippingContextCacheKey?!1:(this.clippingContextCacheKey=this.clippingContext.cacheKey,!0)}get hardwareClippingPlanes(){return this.material.hardwareClipping===!0?this.clippingContext.unionClippingCount:0}getNodeBuilderState(){return this._nodeBuilderState||(this._nodeBuilderState=this._nodes.getForRender(this))}getMonitor(){return this._monitor||(this._monitor=this.getNodeBuilderState().observer)}getBindings(){return this._bindings||(this._bindings=this.getNodeBuilderState().createBindings())}getBindingGroup(e){for(const n of this.getBindings())if(n.name===e)return n}getIndex(){return this._geometries.getIndex(this)}getIndirect(){return this._geometries.getIndirect(this)}getChainArray(){return[this.object,this.material,this.context,this.lightsNode]}setGeometry(e){this.geometry=e,this.attributes=null}getAttributes(){if(this.attributes!==null)return this.attributes;const e=this.getNodeBuilderState().nodeAttributes,n=this.geometry,i=[],s=new Set;for(const a of e){const o=a.node&&a.node.attribute?a.node.attribute:n.getAttribute(a.name);if(o===void 0)continue;i.push(o);const l=o.isInterleavedBufferAttribute?o.data:o;s.add(l)}return this.attributes=i,this.vertexBuffers=Array.from(s.values()),i}getVertexBuffers(){return this.vertexBuffers===null&&this.getAttributes(),this.vertexBuffers}getDrawParameters(){const{object:e,material:n,geometry:i,group:s,drawRange:a}=this,o=this.drawParams||(this.drawParams={vertexCount:0,firstVertex:0,instanceCount:0,firstInstance:0}),l=this.getIndex(),c=l!==null,u=i.isInstancedBufferGeometry?i.instanceCount:e.count>1?e.count:1;if(u===0)return null;if(o.instanceCount=u,e.isBatchedMesh===!0)return o;let h=1;n.wireframe===!0&&!e.isPoints&&!e.isLineSegments&&!e.isLine&&!e.isLineLoop&&(h=2);let d=a.start*h,f=(a.start+a.count)*h;s!==null&&(d=Math.max(d,s.start*h),f=Math.min(f,(s.start+s.count)*h));const p=i.attributes.position;let g=1/0;c?g=l.count:p!=null&&(g=p.count),d=Math.max(d,0),f=Math.min(f,g);const v=f-d;return v<0||v===1/0?null:(o.vertexCount=v,o.firstVertex=d,o)}getGeometryCacheKey(){const{geometry:e}=this;let n="";for(const i of Object.keys(e.attributes).sort()){const s=e.attributes[i];n+=i+",",s.data&&(n+=s.data.stride+","),s.offset&&(n+=s.offset+","),s.itemSize&&(n+=s.itemSize+","),s.normalized&&(n+="n,")}for(const i of Object.keys(e.morphAttributes).sort()){const s=e.morphAttributes[i];n+="morph-"+i+",";for(let a=0,o=s.length;a<o;a++){const l=s[a];n+=l.id+","}}return e.index&&(n+="index,"),n}getMaterialCacheKey(){const{object:e,material:n}=this;let i=n.customProgramCacheKey();for(const s of FOe(n)){if(/^(is[A-Z]|_)|^(visible|version|uuid|name|opacity|userData)$/.test(s))continue;const a=n[s];let o;if(a!==null){const l=typeof a;l==="number"?o=a!==0?"1":"0":l==="object"?(o="{",a.isTexture&&(o+=a.mapping),o+="}"):o=String(a)}else o=String(a);i+=o+","}return i+=this.clippingContextCacheKey+",",e.geometry&&(i+=this.getGeometryCacheKey()),e.skeleton&&(i+=e.skeleton.bones.length+","),e.isBatchedMesh&&(i+=e._matricesTexture.uuid+",",e._colorsTexture!==null&&(i+=e._colorsTexture.uuid+",")),e.count>1&&(i+=e.uuid+","),i+=e.receiveShadow+",",sCe(i)}get needsGeometryUpdate(){return this.geometry.id!==this.object.geometry.id}get needsUpdate(){return this.initialNodesCacheKey!==this.getDynamicCacheKey()||this.clippingNeedsUpdate}getDynamicCacheKey(){let e=0;return this.material.isShadowPassMaterial!==!0&&(e=this._nodes.getCacheKey(this.scene,this.lightsNode)),this.camera.isArrayCamera&&(e=Sb(e,this.camera.cameras.length)),this.object.receiveShadow&&(e=Sb(e,1)),e}getCacheKey(){return this.getMaterialCacheKey()+this.getDynamicCacheKey()}dispose(){this.material.removeEventListener("dispose",this.onMaterialDispose),this.onDispose()}}const Bf=[];class jOe{constructor(e,n,i,s,a,o){this.renderer=e,this.nodes=n,this.geometries=i,this.pipelines=s,this.bindings=a,this.info=o,this.chainMaps={}}get(e,n,i,s,a,o,l,c){const u=this.getChainMap(c);Bf[0]=e,Bf[1]=n,Bf[2]=o,Bf[3]=a;let h=u.get(Bf);return h===void 0?(h=this.createRenderObject(this.nodes,this.geometries,this.renderer,e,n,i,s,a,o,l,c),u.set(Bf,h)):(h.updateClipping(l),h.needsGeometryUpdate&&h.setGeometry(e.geometry),(h.version!==n.version||h.needsUpdate)&&(h.initialCacheKey!==h.getCacheKey()?(h.dispose(),h=this.get(e,n,i,s,a,o,l,c)):h.version=n.version)),Bf.length=0,h}getChainMap(e="default"){return this.chainMaps[e]||(this.chainMaps[e]=new Yc)}dispose(){this.chainMaps={}}createRenderObject(e,n,i,s,a,o,l,c,u,h,d){const f=this.getChainMap(d),p=new BOe(e,n,i,s,a,o,l,c,u,h);return p.onDispose=()=>{this.pipelines.delete(p),this.bindings.delete(p),this.nodes.delete(p),f.delete(p.getChainArray())},p}}class Jd{constructor(){this.data=new WeakMap}get(e){let n=this.data.get(e);return n===void 0&&(n={},this.data.set(e,n)),n}delete(e){let n=null;return this.data.has(e)&&(n=this.data.get(e),this.data.delete(e)),n}has(e){return this.data.has(e)}dispose(){this.data=new WeakMap}}const cl={VERTEX:1,INDEX:2,STORAGE:3,INDIRECT:4},bd=16,UOe=211,zOe=212;class $Oe extends Jd{constructor(e){super(),this.backend=e}delete(e){const n=super.delete(e);return n!==null&&this.backend.destroyAttribute(e),n}update(e,n){const i=this.get(e);if(i.version===void 0)n===cl.VERTEX?this.backend.createAttribute(e):n===cl.INDEX?this.backend.createIndexAttribute(e):n===cl.STORAGE?this.backend.createStorageAttribute(e):n===cl.INDIRECT&&this.backend.createIndirectStorageAttribute(e),i.version=this._getBufferAttribute(e).version;else{const s=this._getBufferAttribute(e);(i.version<s.version||s.usage===Sg)&&(this.backend.updateAttribute(e),i.version=s.version)}}_getBufferAttribute(e){return e.isInterleavedBufferAttribute&&(e=e.data),e}}function Ire(r){return r.index!==null?r.index.version:r.attributes.position.version}function rW(r){const e=[],n=r.index,i=r.attributes.position;if(n!==null){const a=n.array;for(let o=0,l=a.length;o<l;o+=3){const c=a[o+0],u=a[o+1],h=a[o+2];e.push(c,u,u,h,h,c)}}else{const a=i.array;for(let o=0,l=a.length/3-1;o<l;o+=3){const c=o+0,u=o+1,h=o+2;e.push(c,u,u,h,h,c)}}const s=new(Nj(e)?Ij:kj)(e,1);return s.version=Ire(r),s}class GOe extends Jd{constructor(e,n){super(),this.attributes=e,this.info=n,this.wireframes=new WeakMap,this.attributeCall=new WeakMap}has(e){const n=e.geometry;return super.has(n)&&this.get(n).initialized===!0}updateForRender(e){this.has(e)===!1&&this.initGeometry(e),this.updateAttributes(e)}initGeometry(e){const n=e.geometry,i=this.get(n);i.initialized=!0,this.info.memory.geometries++;const s=()=>{this.info.memory.geometries--;const a=n.index,o=e.getAttributes();a!==null&&this.attributes.delete(a);for(const c of o)this.attributes.delete(c);const l=this.wireframes.get(n);l!==void 0&&this.attributes.delete(l),n.removeEventListener("dispose",s)};n.addEventListener("dispose",s)}updateAttributes(e){const n=e.getAttributes();for(const a of n)a.isStorageBufferAttribute||a.isStorageInstancedBufferAttribute?this.updateAttribute(a,cl.STORAGE):this.updateAttribute(a,cl.VERTEX);const i=this.getIndex(e);i!==null&&this.updateAttribute(i,cl.INDEX);const s=e.geometry.indirect;s!==null&&this.updateAttribute(s,cl.INDIRECT)}updateAttribute(e,n){const i=this.info.render.calls;e.isInterleavedBufferAttribute?this.attributeCall.get(e)===void 0?(this.attributes.update(e,n),this.attributeCall.set(e,i)):this.attributeCall.get(e.data)!==i&&(this.attributes.update(e,n),this.attributeCall.set(e.data,i),this.attributeCall.set(e,i)):this.attributeCall.get(e)!==i&&(this.attributes.update(e,n),this.attributeCall.set(e,i))}getIndirect(e){return e.geometry.indirect}getIndex(e){const{geometry:n,material:i}=e;let s=n.index;if(i.wireframe===!0){const a=this.wireframes;let o=a.get(n);o===void 0?(o=rW(n),a.set(n,o)):o.version!==Ire(n)&&(this.attributes.delete(o),o=rW(n),a.set(n,o)),s=o}return s}}class VOe{constructor(){this.autoReset=!0,this.frame=0,this.calls=0,this.render={calls:0,frameCalls:0,drawCalls:0,triangles:0,points:0,lines:0,timestamp:0},this.compute={calls:0,frameCalls:0,timestamp:0},this.memory={geometries:0,textures:0}}update(e,n,i){this.render.drawCalls++,e.isMesh||e.isSprite?this.render.triangles+=i*(n/3):e.isPoints?this.render.points+=i*n:e.isLineSegments?this.render.lines+=i*(n/2):e.isLine?this.render.lines+=i*(n-1):console.error("THREE.WebGPUInfo: Unknown object type.")}reset(){this.render.drawCalls=0,this.render.frameCalls=0,this.compute.frameCalls=0,this.render.triangles=0,this.render.points=0,this.render.lines=0}dispose(){this.reset(),this.calls=0,this.render.calls=0,this.compute.calls=0,this.render.timestamp=0,this.compute.timestamp=0,this.memory.geometries=0,this.memory.textures=0}}class Dre{constructor(e){this.cacheKey=e,this.usedTimes=0}}class HOe extends Dre{constructor(e,n,i){super(e),this.vertexProgram=n,this.fragmentProgram=i}}class WOe extends Dre{constructor(e,n){super(e),this.computeProgram=n,this.isComputePipeline=!0}}let qOe=0;class pR{constructor(e,n,i,s=null,a=null){this.id=qOe++,this.code=e,this.stage=n,this.name=i,this.transforms=s,this.attributes=a,this.usedTimes=0}}class XOe extends Jd{constructor(e,n){super(),this.backend=e,this.nodes=n,this.bindings=null,this.caches=new Map,this.programs={vertex:new Map,fragment:new Map,compute:new Map}}getForCompute(e,n){const{backend:i}=this,s=this.get(e);if(this._needsComputeUpdate(e)){const a=s.pipeline;a&&(a.usedTimes--,a.computeProgram.usedTimes--);const o=this.nodes.getForCompute(e);let l=this.programs.compute.get(o.computeShader);l===void 0&&(a&&a.computeProgram.usedTimes===0&&this._releaseProgram(a.computeProgram),l=new pR(o.computeShader,"compute",e.name,o.transforms,o.nodeAttributes),this.programs.compute.set(o.computeShader,l),i.createProgram(l));const c=this._getComputeCacheKey(e,l);let u=this.caches.get(c);u===void 0&&(a&&a.usedTimes===0&&this._releasePipeline(a),u=this._getComputePipeline(e,l,c,n)),u.usedTimes++,l.usedTimes++,s.version=e.version,s.pipeline=u}return s.pipeline}getForRender(e,n=null){const{backend:i}=this,s=this.get(e);if(this._needsRenderUpdate(e)){const a=s.pipeline;a&&(a.usedTimes--,a.vertexProgram.usedTimes--,a.fragmentProgram.usedTimes--);const o=e.getNodeBuilderState(),l=e.material?e.material.name:"";let c=this.programs.vertex.get(o.vertexShader);c===void 0&&(a&&a.vertexProgram.usedTimes===0&&this._releaseProgram(a.vertexProgram),c=new pR(o.vertexShader,"vertex",l),this.programs.vertex.set(o.vertexShader,c),i.createProgram(c));let u=this.programs.fragment.get(o.fragmentShader);u===void 0&&(a&&a.fragmentProgram.usedTimes===0&&this._releaseProgram(a.fragmentProgram),u=new pR(o.fragmentShader,"fragment",l),this.programs.fragment.set(o.fragmentShader,u),i.createProgram(u));const h=this._getRenderCacheKey(e,c,u);let d=this.caches.get(h);d===void 0?(a&&a.usedTimes===0&&this._releasePipeline(a),d=this._getRenderPipeline(e,c,u,h,n)):e.pipeline=d,d.usedTimes++,c.usedTimes++,u.usedTimes++,s.pipeline=d}return s.pipeline}delete(e){const n=this.get(e).pipeline;return n&&(n.usedTimes--,n.usedTimes===0&&this._releasePipeline(n),n.isComputePipeline?(n.computeProgram.usedTimes--,n.computeProgram.usedTimes===0&&this._releaseProgram(n.computeProgram)):(n.fragmentProgram.usedTimes--,n.vertexProgram.usedTimes--,n.vertexProgram.usedTimes===0&&this._releaseProgram(n.vertexProgram),n.fragmentProgram.usedTimes===0&&this._releaseProgram(n.fragmentProgram))),super.delete(e)}dispose(){super.dispose(),this.caches=new Map,this.programs={vertex:new Map,fragment:new Map,compute:new Map}}updateForRender(e){this.getForRender(e)}_getComputePipeline(e,n,i,s){i=i||this._getComputeCacheKey(e,n);let a=this.caches.get(i);return a===void 0&&(a=new WOe(i,n),this.caches.set(i,a),this.backend.createComputePipeline(a,s)),a}_getRenderPipeline(e,n,i,s,a){s=s||this._getRenderCacheKey(e,n,i);let o=this.caches.get(s);return o===void 0&&(o=new HOe(s,n,i),this.caches.set(s,o),e.pipeline=o,this.backend.createRenderPipeline(e,a)),o}_getComputeCacheKey(e,n){return e.id+","+n.id}_getRenderCacheKey(e,n,i){return n.id+","+i.id+","+this.backend.getRenderCacheKey(e)}_releasePipeline(e){this.caches.delete(e.cacheKey)}_releaseProgram(e){const n=e.code,i=e.stage;this.programs[i].delete(n)}_needsComputeUpdate(e){const n=this.get(e);return n.pipeline===void 0||n.version!==e.version}_needsRenderUpdate(e){return this.get(e).pipeline===void 0||this.backend.needsRenderUpdate(e)}}class KOe extends Jd{constructor(e,n,i,s,a,o){super(),this.backend=e,this.textures=i,this.pipelines=a,this.attributes=s,this.nodes=n,this.info=o,this.pipelines.bindings=this}getForRender(e){const n=e.getBindings();for(const i of n){const s=this.get(i);s.bindGroup===void 0&&(this._init(i),this.backend.createBindings(i,n,0),s.bindGroup=i)}return n}getForCompute(e){const n=this.nodes.getForCompute(e).bindings;for(const i of n){const s=this.get(i);s.bindGroup===void 0&&(this._init(i),this.backend.createBindings(i,n,0),s.bindGroup=i)}return n}updateForCompute(e){this._updateBindings(this.getForCompute(e))}updateForRender(e){this._updateBindings(this.getForRender(e))}_updateBindings(e){for(const n of e)this._update(n,e)}_init(e){for(const n of e.bindings)if(n.isSampledTexture)this.textures.updateTexture(n.texture);else if(n.isStorageBuffer){const i=n.attribute,s=i.isIndirectStorageBufferAttribute?cl.INDIRECT:cl.STORAGE;this.attributes.update(i,s)}}_update(e,n){const{backend:i}=this;let s=!1,a=!0,o=0,l=0;for(const c of e.bindings)if(!(c.isNodeUniformsGroup&&this.nodes.updateGroup(c)===!1)){if(c.isStorageBuffer){const u=c.attribute,h=u.isIndirectStorageBufferAttribute?cl.INDIRECT:cl.STORAGE;this.attributes.update(u,h)}if(c.isUniformBuffer)c.update()&&i.updateBinding(c);else if(c.isSampler)c.update();else if(c.isSampledTexture){const u=this.textures.get(c.texture);c.needsBindingsUpdate(u.generation)&&(s=!0);const h=c.update(),d=c.texture;h&&this.textures.updateTexture(d);const f=i.get(d);if(f.externalTexture!==void 0||u.isDefaultTexture?a=!1:(o=o*10+d.id,l+=d.version),i.isWebGPUBackend===!0&&f.texture===void 0&&f.externalTexture===void 0&&(console.error("Bindings._update: binding should be available:",c,h,d,c.textureNode.value,s),this.textures.updateTexture(d),s=!0),d.isStorageTexture===!0){const p=this.get(d);c.store===!0?p.needsMipmap=!0:this.textures.needsMipmaps(d)&&p.needsMipmap===!0&&(this.backend.generateMipmaps(d),p.needsMipmap=!1)}}}s===!0&&this.backend.updateBindings(e,n,a?o:0,l)}}function YOe(r,e){return r.groupOrder!==e.groupOrder?r.groupOrder-e.groupOrder:r.renderOrder!==e.renderOrder?r.renderOrder-e.renderOrder:r.material.id!==e.material.id?r.material.id-e.material.id:r.z!==e.z?r.z-e.z:r.id-e.id}function iW(r,e){return r.groupOrder!==e.groupOrder?r.groupOrder-e.groupOrder:r.renderOrder!==e.renderOrder?r.renderOrder-e.renderOrder:r.z!==e.z?e.z-r.z:r.id-e.id}function sW(r){return(r.transmission>0||r.transmissionNode)&&r.side===Ea&&r.forceSinglePass===!1}class ZOe{constructor(e,n,i){this.renderItems=[],this.renderItemsIndex=0,this.opaque=[],this.transparentDoublePass=[],this.transparent=[],this.bundles=[],this.lightsNode=e.getNode(n,i),this.lightsArray=[],this.scene=n,this.camera=i,this.occlusionQueryCount=0}begin(){return this.renderItemsIndex=0,this.opaque.length=0,this.transparentDoublePass.length=0,this.transparent.length=0,this.bundles.length=0,this.lightsArray.length=0,this.occlusionQueryCount=0,this}getNextRenderItem(e,n,i,s,a,o,l){let c=this.renderItems[this.renderItemsIndex];return c===void 0?(c={id:e.id,object:e,geometry:n,material:i,groupOrder:s,renderOrder:e.renderOrder,z:a,group:o,clippingContext:l},this.renderItems[this.renderItemsIndex]=c):(c.id=e.id,c.object=e,c.geometry=n,c.material=i,c.groupOrder=s,c.renderOrder=e.renderOrder,c.z=a,c.group=o,c.clippingContext=l),this.renderItemsIndex++,c}push(e,n,i,s,a,o,l){const c=this.getNextRenderItem(e,n,i,s,a,o,l);e.occlusionTest===!0&&this.occlusionQueryCount++,i.transparent===!0||i.transmission>0?(sW(i)&&this.transparentDoublePass.push(c),this.transparent.push(c)):this.opaque.push(c)}unshift(e,n,i,s,a,o,l){const c=this.getNextRenderItem(e,n,i,s,a,o,l);i.transparent===!0||i.transmission>0?(sW(i)&&this.transparentDoublePass.unshift(c),this.transparent.unshift(c)):this.opaque.unshift(c)}pushBundle(e){this.bundles.push(e)}pushLight(e){this.lightsArray.push(e)}sort(e,n){this.opaque.length>1&&this.opaque.sort(e||YOe),this.transparentDoublePass.length>1&&this.transparentDoublePass.sort(n||iW),this.transparent.length>1&&this.transparent.sort(n||iW)}finish(){this.lightsNode.setLights(this.lightsArray);for(let e=this.renderItemsIndex,n=this.renderItems.length;e<n;e++){const i=this.renderItems[e];if(i.id===null)break;i.id=null,i.object=null,i.geometry=null,i.material=null,i.groupOrder=null,i.renderOrder=null,i.z=null,i.group=null,i.clippingContext=null}}}const Nv=[];class QOe{constructor(e){this.lighting=e,this.lists=new Yc}get(e,n){const i=this.lists;Nv[0]=e,Nv[1]=n;let s=i.get(Nv);return s===void 0&&(s=new ZOe(this.lighting,e,n),i.set(Nv,s)),Nv.length=0,s}dispose(){this.lists=new Yc}}let JOe=0;class eke{constructor(){this.id=JOe++,this.color=!0,this.clearColor=!0,this.clearColorValue={r:0,g:0,b:0,a:1},this.depth=!0,this.clearDepth=!0,this.clearDepthValue=1,this.stencil=!1,this.clearStencil=!0,this.clearStencilValue=1,this.viewport=!1,this.viewportValue=new In,this.scissor=!1,this.scissorValue=new In,this.renderTarget=null,this.textures=null,this.depthTexture=null,this.activeCubeFace=0,this.activeMipmapLevel=0,this.sampleCount=1,this.width=0,this.height=0,this.occlusionQueryCount=0,this.clippingContext=null,this.isRenderContext=!0}getCacheKey(){return Lre(this)}}function Lre(r){const{textures:e,activeCubeFace:n}=r,i=[n];for(const s of e)i.push(s.id);return yU(i)}const Pv=[],tke=new AM,nke=new Dj;class rke{constructor(){this.chainMaps={}}get(e,n,i=null){Pv[0]=e,Pv[1]=n;let s;if(i===null)s="default";else{const l=i.texture.format;s=`${i.textures.length}:${l}:${i.samples}:${i.depthBuffer}:${i.stencilBuffer}`}const a=this._getChainMap(s);let o=a.get(Pv);return o===void 0&&(o=new eke,a.set(Pv,o)),Pv.length=0,i!==null&&(o.sampleCount=i.samples===0?1:i.samples),o}getForClear(e=null){return this.get(tke,nke,e)}_getChainMap(e){return this.chainMaps[e]||(this.chainMaps[e]=new Yc)}dispose(){this.chainMaps={}}}const ike=new pe;class ske extends Jd{constructor(e,n,i){super(),this.renderer=e,this.backend=n,this.info=i}updateRenderTarget(e,n=0){const i=this.get(e),s=e.samples===0?1:e.samples,a=i.depthTextureMips||(i.depthTextureMips={}),o=e.textures,l=this.getSize(o[0]),c=l.width>>n,u=l.height>>n;let h=e.depthTexture||a[n];const d=e.depthBuffer===!0||e.stencilBuffer===!0;let f=!1;h===void 0&&d&&(h=new dl,h.format=e.stencilBuffer?Do:Io,h.type=e.stencilBuffer?ko:Vr,h.image.width=c,h.image.height=u,a[n]=h),(i.width!==l.width||l.height!==i.height)&&(f=!0,h&&(h.needsUpdate=!0,h.image.width=c,h.image.height=u)),i.width=l.width,i.height=l.height,i.textures=o,i.depthTexture=h||null,i.depth=e.depthBuffer,i.stencil=e.stencilBuffer,i.renderTarget=e,i.sampleCount!==s&&(f=!0,h&&(h.needsUpdate=!0),i.sampleCount=s);const p={sampleCount:s};if(e.isXRRenderTarget!==!0){for(let g=0;g<o.length;g++){const v=o[g];f&&(v.needsUpdate=!0),this.updateTexture(v,p)}h&&this.updateTexture(h,p)}if(i.initialized!==!0){i.initialized=!0;const g=()=>{e.removeEventListener("dispose",g);for(let v=0;v<o.length;v++)this._destroyTexture(o[v]);h&&this._destroyTexture(h),this.delete(e)};e.addEventListener("dispose",g)}}updateTexture(e,n={}){const i=this.get(e);if(i.initialized===!0&&i.version===e.version)return;const s=e.isRenderTargetTexture||e.isDepthTexture||e.isFramebufferTexture,a=this.backend;if(s&&i.initialized===!0&&(a.destroySampler(e),a.destroyTexture(e)),e.isFramebufferTexture){const u=this.renderer.getRenderTarget();u?e.type=u.texture.type:e.type=Ri}const{width:o,height:l,depth:c}=this.getSize(e);if(n.width=o,n.height=l,n.depth=c,n.needsMipmaps=this.needsMipmaps(e),n.levels=n.needsMipmaps?this.getMipLevels(e,o,l):1,s||e.isStorageTexture===!0)a.createSampler(e),a.createTexture(e,n),i.generation=e.version;else if(i.initialized!==!0&&a.createSampler(e),e.version>0){const h=e.image;if(h===void 0)console.warn("THREE.Renderer: Texture marked for update but image is undefined.");else if(h.complete===!1)console.warn("THREE.Renderer: Texture marked for update but image is incomplete.");else{if(e.images){const d=[];for(const f of e.images)d.push(f);n.images=d}else n.image=h;(i.isDefaultTexture===void 0||i.isDefaultTexture===!0)&&(a.createTexture(e,n),i.isDefaultTexture=!1,i.generation=e.version),e.source.dataReady===!0&&a.updateTexture(e,n),n.needsMipmaps&&e.mipmaps.length===0&&a.generateMipmaps(e)}}else a.createDefaultTexture(e),i.isDefaultTexture=!0,i.generation=e.version;if(i.initialized!==!0){i.initialized=!0,i.generation=e.version,this.info.memory.textures++;const u=()=>{e.removeEventListener("dispose",u),this._destroyTexture(e),this.info.memory.textures--};e.addEventListener("dispose",u)}i.version=e.version}getSize(e,n=ike){let i=e.images?e.images[0]:e.image;return i?(i.image!==void 0&&(i=i.image),n.width=i.width||1,n.height=i.height||1,n.depth=e.isCubeTexture?6:i.depth||1):n.width=n.height=n.depth=1,n}getMipLevels(e,n,i){let s;return e.isCompressedTexture?e.mipmaps?s=e.mipmaps.length:s=1:s=Math.floor(Math.log2(Math.max(n,i)))+1,s}needsMipmaps(e){return this.isEnvironmentTexture(e)||e.isCompressedTexture===!0||e.generateMipmaps}isEnvironmentTexture(e){const n=e.mapping;return n===Ld||n===Fd||n===ml||n===gl}_destroyTexture(e){this.backend.destroySampler(e),this.backend.destroyTexture(e),this.delete(e)}}class $U extends ln{constructor(e,n,i,s=1){super(e,n,i),this.a=s}set(e,n,i,s=1){return this.a=s,super.set(e,n,i)}copy(e){return e.a!==void 0&&(this.a=e.a),super.copy(e)}clone(){return new this.constructor(this.r,this.g,this.b,this.a)}}class ake extends Dr{static get type(){return"ParameterNode"}constructor(e,n=null){super(e,n),this.isParameterNode=!0}getHash(){return this.uuid}generate(){return this.name}}class oke extends qn{static get type(){return"StackNode"}constructor(e=null){super(),this.nodes=[],this.outputNode=null,this.parent=e,this._currentCond=null,this.isStackNode=!0}getNodeType(e){return this.outputNode?this.outputNode.getNodeType(e):"void"}getMemberType(e,n){return this.outputNode?this.outputNode.getMemberType(e,n):"void"}add(e){return this.nodes.push(e),this}If(e,n){const i=new dT(n);return this._currentCond=Ya(e,i),this.add(this._currentCond)}ElseIf(e,n){const i=new dT(n),s=Ya(e,i);return this._currentCond.elseNode=s,this._currentCond=s,this}Else(e){return this._currentCond.elseNode=new dT(e),this}build(e,...n){const i=Cne();rE(this);for(const s of this.nodes)s.build(e,"void");return rE(i),this.outputNode?this.outputNode.build(e,...n):super.build(e,...n)}else(...e){return console.warn("THREE.TSL: .else() has been renamed to .Else()."),this.Else(...e)}elseif(...e){return console.warn("THREE.TSL: .elseif() has been renamed to .ElseIf()."),this.ElseIf(...e)}}const mR=rt(oke).setParameterLength(0,1);new nl;new pe;new pe;new pe;new br;new pe(0,0,-1);new In;new pe;new pe;new In;new dt;const lke=new Fp;Pb.flipX();lke.depthTexture=new dl(1,1);const gR=new T_(-1,1,1,-1,0,1);class cke extends Ws{constructor(e=!1){super();const n=e===!1?[0,-1,0,1,2,1]:[0,2,0,0,2,0];this.setAttribute("position",new $i([-1,3,0,-1,-1,0,3,-1,0],3)),this.setAttribute("uv",new $i(n,2))}}const uke=new cke;class Fre extends li{constructor(e=null){super(uke,e),this.camera=gR,this.isQuadMesh=!0}async renderAsync(e){return e.renderAsync(this,gR)}render(e){e.render(this,gR)}}const Rv=new yl,yR=new br;class Qa extends qn{static get type(){return"SceneNode"}constructor(e=Qa.BACKGROUND_BLURRINESS,n=null){super(),this.scope=e,this.scene=n}setup(e){const n=this.scope,i=this.scene!==null?this.scene:e.scene;let s;return n===Qa.BACKGROUND_BLURRINESS?s=Gr("backgroundBlurriness","float",i):n===Qa.BACKGROUND_INTENSITY?s=Gr("backgroundIntensity","float",i):n===Qa.BACKGROUND_ROTATION?s=jn("mat4").label("backgroundRotation").setGroup(kn).onRenderUpdate(()=>{const a=i.background;return a!==null&&a.isTexture&&a.mapping!==gj?(Rv.copy(i.backgroundRotation),Rv.x*=-1,Rv.y*=-1,Rv.z*=-1,yR.makeRotationFromEuler(Rv)):yR.identity(),yR}):console.error("THREE.SceneNode: Unknown scope:",n),s}}Qa.BACKGROUND_BLURRINESS="backgroundBlurriness";Qa.BACKGROUND_INTENSITY="backgroundIntensity";Qa.BACKGROUND_ROTATION="backgroundRotation";const hke=xt(Qa,Qa.BACKGROUND_BLURRINESS),aW=xt(Qa,Qa.BACKGROUND_INTENSITY),dke=xt(Qa,Qa.BACKGROUND_ROTATION);ut(({texture:r,uv:e})=>{const i=Xe().toVar();return Gi(e.x.lessThan(1e-4),()=>{i.assign(Xe(1,0,0))}).ElseIf(e.y.lessThan(1e-4),()=>{i.assign(Xe(0,1,0))}).ElseIf(e.z.lessThan(1e-4),()=>{i.assign(Xe(0,0,1))}).ElseIf(e.x.greaterThan(1-1e-4),()=>{i.assign(Xe(-1,0,0))}).ElseIf(e.y.greaterThan(1-1e-4),()=>{i.assign(Xe(0,-1,0))}).ElseIf(e.z.greaterThan(1-1e-4),()=>{i.assign(Xe(0,0,-1))}).Else(()=>{const a=r.sample(e.add(Xe(-.01,0,0))).r.sub(r.sample(e.add(Xe(.01,0,0))).r),o=r.sample(e.add(Xe(0,-.01,0))).r.sub(r.sample(e.add(Xe(0,.01,0))).r),l=r.sample(e.add(Xe(0,0,-.01))).r.sub(r.sample(e.add(Xe(0,0,.01))).r);i.assign(Xe(a,o,l))}),i.normalize()});const bS=new dt;class fke extends j_{static get type(){return"PassTextureNode"}constructor(e,n){super(n),this.passNode=e,this.setUpdateMatrix(!1)}setup(e){return e.object.isQuadMesh&&this.passNode.build(e),super.setup(e)}clone(){return new this.constructor(this.passNode,this.value)}}class oW extends fke{static get type(){return"PassMultipleTextureNode"}constructor(e,n,i=!1){super(e,null),this.textureName=n,this.previousTexture=i}updateTexture(){this.value=this.previousTexture?this.passNode.getPreviousTexture(this.textureName):this.passNode.getTexture(this.textureName)}setup(e){return this.updateTexture(),super.setup(e)}clone(){return new this.constructor(this.passNode,this.textureName,this.previousTexture)}}class oA extends Hi{static get type(){return"PassNode"}constructor(e,n,i,s={}){super("vec4"),this.scope=e,this.scene=n,this.camera=i,this.options=s,this._pixelRatio=1,this._width=1,this._height=1;const a=new dl;a.isRenderTargetTexture=!0,a.name="depth";const o=new Fp(this._width*this._pixelRatio,this._height*this._pixelRatio,{type:da,...s});o.texture.name="output",o.depthTexture=a,this.renderTarget=o,this._textures={output:o.texture,depth:a},this._textureNodes={},this._linearDepthNodes={},this._viewZNodes={},this._previousTextures={},this._previousTextureNodes={},this._cameraNear=jn(0),this._cameraFar=jn(0),this._mrt=null,this._layers=null,this._resolution=1,this.isPassNode=!0,this.updateBeforeType=nr.FRAME}setResolution(e){return this._resolution=e,this}getResolution(){return this._resolution}setLayers(e){return this._layers=e,this}getLayers(){return this._layers}setMRT(e){return this._mrt=e,this}getMRT(){return this._mrt}isGlobal(){return!0}getTexture(e){let n=this._textures[e];return n===void 0&&(n=this.renderTarget.texture.clone(),n.name=e,this._textures[e]=n,this.renderTarget.textures.push(n)),n}getPreviousTexture(e){let n=this._previousTextures[e];return n===void 0&&(n=this.getTexture(e).clone(),this._previousTextures[e]=n),n}toggleTexture(e){const n=this._previousTextures[e];if(n!==void 0){const i=this._textures[e],s=this.renderTarget.textures.indexOf(i);this.renderTarget.textures[s]=n,this._textures[e]=n,this._previousTextures[e]=i,this._textureNodes[e].updateTexture(),this._previousTextureNodes[e].updateTexture()}}getTextureNode(e="output"){let n=this._textureNodes[e];return n===void 0&&(n=ct(new oW(this,e)),n.updateTexture(),this._textureNodes[e]=n),n}getPreviousTextureNode(e="output"){let n=this._previousTextureNodes[e];return n===void 0&&(this._textureNodes[e]===void 0&&this.getTextureNode(e),n=ct(new oW(this,e,!0)),n.updateTexture(),this._previousTextureNodes[e]=n),n}getViewZNode(e="depth"){let n=this._viewZNodes[e];if(n===void 0){const i=this._cameraNear,s=this._cameraFar;this._viewZNodes[e]=n=fre(this.getTextureNode(e),i,s)}return n}getLinearDepthNode(e="depth"){let n=this._linearDepthNodes[e];if(n===void 0){const i=this._cameraNear,s=this._cameraFar,a=this.getViewZNode(e);this._linearDepthNodes[e]=n=Tx(a,i,s)}return n}setup({renderer:e}){return this.renderTarget.samples=this.options.samples===void 0?e.samples:this.options.samples,e.backend.isWebGLBackend===!0&&(this.renderTarget.samples=0),this.renderTarget.texture.type=e.getColorBufferType(),this.scope===oA.COLOR?this.getTextureNode():this.getLinearDepthNode()}updateBefore(e){const{renderer:n}=e,{scene:i}=this;let s,a;const o=n.getOutputRenderTarget();o&&o.isXRRenderTarget===!0?(a=1,s=n.xr.getCamera(),n.xr.updateCamera(s),bS.set(o.width,o.height)):(s=this.camera,a=n.getPixelRatio(),n.getSize(bS)),this._pixelRatio=a,this.setSize(bS.width,bS.height);const l=n.getRenderTarget(),c=n.getMRT(),u=s.layers.mask;this._cameraNear.value=s.near,this._cameraFar.value=s.far,this._layers!==null&&(s.layers.mask=this._layers.mask);for(const h in this._previousTextures)this.toggleTexture(h);n.setRenderTarget(this.renderTarget),n.setMRT(this._mrt),n.render(i,s),n.setRenderTarget(l),n.setMRT(c),s.layers.mask=u}setSize(e,n){this._width=e,this._height=n;const i=this._width*this._pixelRatio*this._resolution,s=this._height*this._pixelRatio*this._resolution;this.renderTarget.setSize(i,s)}setPixelRatio(e){this._pixelRatio=e,this.setSize(this._width,this._height)}dispose(){this.renderTarget.dispose()}}oA.COLOR="color";oA.DEPTH="depth";const pke=ut(([r,e])=>r.mul(e).clamp()).setLayout({name:"linearToneMapping",type:"vec3",inputs:[{name:"color",type:"vec3"},{name:"exposure",type:"float"}]}),mke=ut(([r,e])=>(r=r.mul(e),r.div(r.add(1)).clamp())).setLayout({name:"reinhardToneMapping",type:"vec3",inputs:[{name:"color",type:"vec3"},{name:"exposure",type:"float"}]}),gke=ut(([r,e])=>{r=r.mul(e),r=r.sub(.004).max(0);const n=r.mul(r.mul(6.2).add(.5)),i=r.mul(r.mul(6.2).add(1.7)).add(.06);return n.div(i).pow(2.2)}).setLayout({name:"cineonToneMapping",type:"vec3",inputs:[{name:"color",type:"vec3"},{name:"exposure",type:"float"}]}),yke=ut(([r])=>{const e=r.mul(r.add(.0245786)).sub(90537e-9),n=r.mul(r.add(.432951).mul(.983729)).add(.238081);return e.div(n)}),vke=ut(([r,e])=>{const n=Pa(.59719,.35458,.04823,.076,.90834,.01566,.0284,.13383,.83777),i=Pa(1.60475,-.53108,-.07367,-.10208,1.10813,-.00605,-.00327,-.07276,1.07602);return r=r.mul(e).div(.6),r=n.mul(r),r=yke(r),r=i.mul(r),r.clamp()}).setLayout({name:"acesFilmicToneMapping",type:"vec3",inputs:[{name:"color",type:"vec3"},{name:"exposure",type:"float"}]}),xke=Pa(Xe(1.6605,-.1246,-.0182),Xe(-.5876,1.1329,-.1006),Xe(-.0728,-.0083,1.1187)),bke=Pa(Xe(.6274,.0691,.0164),Xe(.3293,.9195,.088),Xe(.0433,.0113,.8956)),_ke=ut(([r])=>{const e=Xe(r).toVar(),n=Xe(e.mul(e)).toVar(),i=Xe(n.mul(n)).toVar();return He(15.5).mul(i.mul(n)).sub(ur(40.14,i.mul(e))).add(ur(31.96,i).sub(ur(6.868,n.mul(e))).add(ur(.4298,n).add(ur(.1191,e).sub(.00232))))}),wke=ut(([r,e])=>{const n=Xe(r).toVar(),i=Pa(Xe(.856627153315983,.137318972929847,.11189821299995),Xe(.0951212405381588,.761241990602591,.0767994186031903),Xe(.0482516061458583,.101439036467562,.811302368396859)),s=Pa(Xe(1.1271005818144368,-.1413297634984383,-.14132976349843826),Xe(-.11060664309660323,1.157823702216272,-.11060664309660294),Xe(-.016493938717834573,-.016493938717834257,1.2519364065950405)),a=He(-12.47393),o=He(4.026069);return n.mulAssign(e),n.assign(bke.mul(n)),n.assign(i.mul(n)),n.assign(io(n,1e-10)),n.assign(lh(n)),n.assign(n.sub(a).div(o.sub(a))),n.assign(yh(n,0,1)),n.assign(_ke(n)),n.assign(s.mul(n)),n.assign(JM(io(Xe(0),n),Xe(2.2))),n.assign(xke.mul(n)),n.assign(yh(n,0,1)),n}).setLayout({name:"agxToneMapping",type:"vec3",inputs:[{name:"color",type:"vec3"},{name:"exposure",type:"float"}]}),Ske=ut(([r,e])=>{const n=He(.76),i=He(.15);r=r.mul(e);const s=Mb(r.r,Mb(r.g,r.b)),a=Ya(s.lessThan(.08),s.sub(ur(6.25,s.mul(s))),.04);r.subAssign(a);const o=io(r.r,io(r.g,r.b));Gi(o.lessThan(n),()=>r);const l=qa(1,n),c=qa(1,l.mul(l).div(o.add(l.sub(n))));r.mulAssign(c.div(o));const u=qa(1,gh(1,i.mul(o.sub(c)).add(1)));return si(r,Xe(c),u)}).setLayout({name:"neutralToneMapping",type:"vec3",inputs:[{name:"color",type:"vec3"},{name:"exposure",type:"float"}]});class hs extends qn{static get type(){return"CodeNode"}constructor(e="",n=[],i=""){super("code"),this.isCodeNode=!0,this.code=e,this.includes=n,this.language=i}isGlobal(){return!0}setIncludes(e){return this.includes=e,this}getIncludes(){return this.includes}generate(e){const n=this.getIncludes(e);for(const s of n)s.build(e);const i=e.getCodeFromNode(this,this.getNodeType(e));return i.code=this.code,i.code}serialize(e){super.serialize(e),e.code=this.code,e.language=this.language}deserialize(e){super.deserialize(e),this.code=e.code,this.language=e.language}}class Tke extends hs{static get type(){return"FunctionNode"}constructor(e="",n=[],i=""){super(e,n,i)}getNodeType(e){return this.getNodeFunction(e).type}getInputs(e){return this.getNodeFunction(e).inputs}getNodeFunction(e){const n=e.getDataFromNode(this);let i=n.nodeFunction;return i===void 0&&(i=e.parser.parseFunction(this.code),n.nodeFunction=i),i}generate(e,n){super.generate(e);const i=this.getNodeFunction(e),s=i.name,a=i.type,o=e.getCodeFromNode(this,a);s!==""&&(o.name=s);const l=e.getPropertyName(o),c=this.getNodeFunction(e).getCode(l);return o.code=c+`
`,n==="property"?l:e.format(`${l}()`,a,n)}}function Bre(r){let e;const n=r.context.getViewZ;return n!==void 0&&(e=n(this)),(e||es.z).negate()}const Eke=ut(([r,e],n)=>{const i=Bre(n);return Ud(r,e,i)}),Mke=ut(([r],e)=>{const n=Bre(e);return r.mul(r,n,n).negate().exp().oneMinus()}),lW=ut(([r,e])=>Bn(e.toFloat().mix(_x.rgb,r.toVec3()),_x.a));class Ake extends qn{constructor(e){super(),this.scope=e}generate(e){const{scope:n}=this,{renderer:i}=e;i.backend.isWebGLBackend===!0?e.addFlowCode(`	// ${n}Barrier 
`):e.addLineFlowCode(`${n}Barrier()`,this)}}rt(Ake);class nu extends Hi{static get type(){return"AtomicFunctionNode"}constructor(e,n,i){super("uint"),this.method=e,this.pointerNode=n,this.valueNode=i}getInputType(e){return this.pointerNode.getNodeType(e)}getNodeType(e){return this.getInputType(e)}generate(e){const n=this.method,i=this.getNodeType(e),s=this.getInputType(e),a=this.pointerNode,o=this.valueNode,l=[];l.push(`&${a.build(e,s)}`),o!==null&&l.push(o.build(e,s));const c=`${e.getMethod(n,i)}( ${l.join(", ")} )`;return o!==null&&e.addLineFlowCode(c,this),c}}nu.ATOMIC_LOAD="atomicLoad";nu.ATOMIC_STORE="atomicStore";nu.ATOMIC_ADD="atomicAdd";nu.ATOMIC_SUB="atomicSub";nu.ATOMIC_MAX="atomicMax";nu.ATOMIC_MIN="atomicMin";nu.ATOMIC_AND="atomicAnd";nu.ATOMIC_OR="atomicOr";nu.ATOMIC_XOR="atomicXor";rt(nu);let _S;function lA(r){_S=_S||new WeakMap;let e=_S.get(r);return e===void 0&&_S.set(r,e={}),e}function jre(r){const e=lA(r);return e.shadowMatrix||(e.shadowMatrix=jn("mat4").setGroup(kn).onRenderUpdate(()=>(r.castShadow!==!0&&r.shadow.updateMatrices(r),r.shadow.matrix)))}function Cke(r,e=Cb){const n=jre(r).mul(e);return n.xyz.div(n.w)}function Ure(r){const e=lA(r);return e.position||(e.position=jn(new pe).setGroup(kn).onRenderUpdate((n,i)=>i.value.setFromMatrixPosition(r.matrixWorld)))}function Nke(r){const e=lA(r);return e.targetPosition||(e.targetPosition=jn(new pe).setGroup(kn).onRenderUpdate((n,i)=>i.value.setFromMatrixPosition(r.target.matrixWorld)))}function zre(r){const e=lA(r);return e.viewPosition||(e.viewPosition=jn(new pe).setGroup(kn).onRenderUpdate(({camera:n},i)=>{i.value=i.value||new pe,i.value.setFromMatrixPosition(r.matrixWorld),i.value.applyMatrix4(n.matrixWorldInverse)}))}const $re=r=>Ah.transformDirection(Ure(r).sub(Nke(r))),Pke=r=>r.sort((e,n)=>e.id-n.id),Rke=(r,e)=>{for(const n of e)if(n.isAnalyticLightNode&&n.light.id===r)return n;return null},vR=new WeakMap;class Gre extends qn{static get type(){return"LightsNode"}constructor(){super("vec3"),this.totalDiffuseNode=Xe().toVar(),this.totalSpecularNode=Xe().toVar(),this.outgoingLightNode=Xe().toVar(),this._lights=[],this._lightNodes=null,this._lightNodesHash=null,this.global=!0}customCacheKey(){const e=[],n=this._lights;for(let i=0;i<n.length;i++)e.push(n[i].id);return yU(e)}getHash(e){if(this._lightNodesHash===null){this._lightNodes===null&&this.setupLightsNode(e);const n=[];for(const i of this._lightNodes)n.push(i.getSelf().getHash());this._lightNodesHash="lights-"+n.join(",")}return this._lightNodesHash}analyze(e){const n=e.getDataFromNode(this);for(const i of n.nodes)i.build(e)}setupLightsNode(e){const n=[],i=this._lightNodes,s=Pke(this._lights),a=e.renderer.library;for(const o of s)if(o.isNode)n.push(ct(o));else{let l=null;if(i!==null&&(l=Rke(o.id,i)),l===null){const c=a.getLightNodeClass(o.constructor);if(c===null){console.warn(`LightsNode.setupNodeLights: Light node not found for ${o.constructor.name}`);continue}let u=null;vR.has(o)?u=vR.get(o):(u=ct(new c(o)),vR.set(o,u)),n.push(u)}}this._lightNodes=n}setupDirectLight(e,n,i){const{lightingModel:s,reflectedLight:a}=e.context;s.direct({...i,lightNode:n,reflectedLight:a},e)}setupDirectRectAreaLight(e,n,i){const{lightingModel:s,reflectedLight:a}=e.context;s.directRectArea({...i,lightNode:n,reflectedLight:a},e)}setupLights(e,n){for(const i of n)i.build(e)}getLightNodes(e){return this._lightNodes===null&&this.setupLightsNode(e),this._lightNodes}setup(e){const n=e.lightsNode;e.lightsNode=this;let i=this.outgoingLightNode;const s=e.context,a=s.lightingModel,o=e.getDataFromNode(this);if(a){const{totalDiffuseNode:l,totalSpecularNode:c}=this;s.outgoingLight=i;const u=e.addStack();o.nodes=u.nodes,a.start(e);const{backdrop:h,backdropAlpha:d}=s,{directDiffuse:f,directSpecular:p,indirectDiffuse:g,indirectSpecular:v}=s.reflectedLight;let x=f.add(g);h!==null&&(d!==null?x=Xe(d.mix(x,h)):x=Xe(h),s.material.transparent=!0),l.assign(x),c.assign(p.add(v)),i.assign(l.add(c)),a.finish(e),i=i.bypass(e.removeStack())}else o.nodes=[];return e.lightsNode=n,i}setLights(e){return this._lights=e,this._lightNodes=null,this._lightNodesHash=null,this}getLights(){return this._lights}get hasLights(){return this._lights.length>0}}class Oke extends qn{static get type(){return"ShadowBaseNode"}constructor(e){super(),this.light=e,this.updateBeforeType=nr.RENDER,this.isShadowBaseNode=!0}setupShadowPosition({context:e,material:n}){Vre.assign(n.shadowPositionNode||e.shadowPositionWorld||Cb)}dispose(){this.updateBeforeType=nr.NONE}}const Vre=L_("vec3","shadowPositionWorld");function kke(r,e={}){return e.toneMapping=r.toneMapping,e.toneMappingExposure=r.toneMappingExposure,e.outputColorSpace=r.outputColorSpace,e.renderTarget=r.getRenderTarget(),e.activeCubeFace=r.getActiveCubeFace(),e.activeMipmapLevel=r.getActiveMipmapLevel(),e.renderObjectFunction=r.getRenderObjectFunction(),e.pixelRatio=r.getPixelRatio(),e.mrt=r.getMRT(),e.clearColor=r.getClearColor(e.clearColor||new ln),e.clearAlpha=r.getClearAlpha(),e.autoClear=r.autoClear,e.scissorTest=r.getScissorTest(),e}function Ike(r,e){return e=kke(r,e),r.setMRT(null),r.setRenderObjectFunction(null),r.setClearColor(0,1),r.autoClear=!0,e}function Dke(r,e){r.toneMapping=e.toneMapping,r.toneMappingExposure=e.toneMappingExposure,r.outputColorSpace=e.outputColorSpace,r.setRenderTarget(e.renderTarget,e.activeCubeFace,e.activeMipmapLevel),r.setRenderObjectFunction(e.renderObjectFunction),r.setPixelRatio(e.pixelRatio),r.setMRT(e.mrt),r.setClearColor(e.clearColor,e.clearAlpha),r.autoClear=e.autoClear,r.setScissorTest(e.scissorTest)}function Lke(r,e={}){return e.background=r.background,e.backgroundNode=r.backgroundNode,e.overrideMaterial=r.overrideMaterial,e}function Fke(r,e){return e=Lke(r,e),r.background=null,r.backgroundNode=null,r.overrideMaterial=null,e}function Bke(r,e){r.background=e.background,r.backgroundNode=e.backgroundNode,r.overrideMaterial=e.overrideMaterial}function jke(r,e,n){return n=Ike(r,n),n=Fke(e,n),n}function Uke(r,e,n){Dke(r,n),Bke(e,n)}const cW=new WeakMap,zke=ut(([r,e,n])=>{let i=Cb.sub(r).length();return i=i.sub(e).div(n.sub(e)),i=i.saturate(),i}),$ke=r=>{const e=r.shadow.camera,n=Gr("near","float",e).setGroup(kn),i=Gr("far","float",e).setGroup(kn),s=RNe(r);return zke(s,n,i)},Gke=r=>{let e=cW.get(r);if(e===void 0){const n=r.isPointLight?$ke(r):null;e=new xs,e.colorNode=Bn(0,0,0,1),e.depthNode=n,e.isShadowPassMaterial=!0,e.name="ShadowMaterial",e.fog=!1,cW.set(r,e)}return e},Vke=ut(({depthTexture:r,shadowCoord:e})=>xr(r,e.xy).compare(e.z)),Hke=ut(({depthTexture:r,shadowCoord:e,shadow:n})=>{const i=(v,x)=>xr(r,v).compare(x),s=Gr("mapSize","vec2",n).setGroup(kn),a=Gr("radius","float",n).setGroup(kn),o=_t(1).div(s),l=o.x.negate().mul(a),c=o.y.negate().mul(a),u=o.x.mul(a),h=o.y.mul(a),d=l.div(2),f=c.div(2),p=u.div(2),g=h.div(2);return Ra(i(e.xy.add(_t(l,c)),e.z),i(e.xy.add(_t(0,c)),e.z),i(e.xy.add(_t(u,c)),e.z),i(e.xy.add(_t(d,f)),e.z),i(e.xy.add(_t(0,f)),e.z),i(e.xy.add(_t(p,f)),e.z),i(e.xy.add(_t(l,0)),e.z),i(e.xy.add(_t(d,0)),e.z),i(e.xy,e.z),i(e.xy.add(_t(p,0)),e.z),i(e.xy.add(_t(u,0)),e.z),i(e.xy.add(_t(d,g)),e.z),i(e.xy.add(_t(0,g)),e.z),i(e.xy.add(_t(p,g)),e.z),i(e.xy.add(_t(l,h)),e.z),i(e.xy.add(_t(0,h)),e.z),i(e.xy.add(_t(u,h)),e.z)).mul(1/17)}),Wke=ut(({depthTexture:r,shadowCoord:e,shadow:n})=>{const i=(h,d)=>xr(r,h).compare(d),s=Gr("mapSize","vec2",n).setGroup(kn),a=_t(1).div(s),o=a.x,l=a.y,c=e.xy,u=Qd(c.mul(s).add(.5));return c.subAssign(u.mul(a)),Ra(i(c,e.z),i(c.add(_t(o,0)),e.z),i(c.add(_t(0,l)),e.z),i(c.add(a),e.z),si(i(c.add(_t(o.negate(),0)),e.z),i(c.add(_t(o.mul(2),0)),e.z),u.x),si(i(c.add(_t(o.negate(),l)),e.z),i(c.add(_t(o.mul(2),l)),e.z),u.x),si(i(c.add(_t(0,l.negate())),e.z),i(c.add(_t(0,l.mul(2))),e.z),u.y),si(i(c.add(_t(o,l.negate())),e.z),i(c.add(_t(o,l.mul(2))),e.z),u.y),si(si(i(c.add(_t(o.negate(),l.negate())),e.z),i(c.add(_t(o.mul(2),l.negate())),e.z),u.x),si(i(c.add(_t(o.negate(),l.mul(2))),e.z),i(c.add(_t(o.mul(2),l.mul(2))),e.z),u.x),u.y)).mul(1/9)}),qke=ut(({depthTexture:r,shadowCoord:e})=>{const n=He(1).toVar(),i=xr(r).sample(e.xy).rg,s=Vne(e.z,i.x);return Gi(s.notEqual(He(1)),()=>{const a=e.z.sub(i.x),o=io(0,i.y.mul(i.y));let l=o.div(o.add(a.mul(a)));l=yh(qa(l,.3).div(.95-.3)),n.assign(yh(io(s,l)))}),n}),Xke=ut(({samples:r,radius:e,size:n,shadowPass:i})=>{const s=He(0).toVar(),a=He(0).toVar(),o=r.lessThanEqual(He(1)).select(He(0),He(2).div(r.sub(1))),l=r.lessThanEqual(He(1)).select(He(0),He(-1));ec({start:Si(0),end:Si(r),type:"int",condition:"<"},({i:u})=>{const h=l.add(He(u).mul(o)),d=i.sample(Ra(iA.xy,_t(0,h).mul(e)).div(n)).x;s.addAssign(d),a.addAssign(d.mul(d))}),s.divAssign(r),a.divAssign(r);const c=MU(a.sub(s.mul(s)));return _t(s,c)}),Kke=ut(({samples:r,radius:e,size:n,shadowPass:i})=>{const s=He(0).toVar(),a=He(0).toVar(),o=r.lessThanEqual(He(1)).select(He(0),He(2).div(r.sub(1))),l=r.lessThanEqual(He(1)).select(He(0),He(-1));ec({start:Si(0),end:Si(r),type:"int",condition:"<"},({i:u})=>{const h=l.add(He(u).mul(o)),d=i.sample(Ra(iA.xy,_t(h,0).mul(e)).div(n));s.addAssign(d.x),a.addAssign(Ra(d.y.mul(d.y),d.x.mul(d.x)))}),s.divAssign(r),a.divAssign(r);const c=MU(a.sub(s.mul(s)));return _t(s,c)}),Yke=[Vke,Hke,Wke,qke];let xR;const wS=new Fre;class Hre extends Oke{static get type(){return"ShadowNode"}constructor(e,n=null){super(e),this.shadow=n||e.shadow,this.shadowMap=null,this.vsmShadowMapVertical=null,this.vsmShadowMapHorizontal=null,this.vsmMaterialVertical=null,this.vsmMaterialHorizontal=null,this._node=null,this._cameraFrameId=new WeakMap,this.isShadowNode=!0}setupShadowFilter(e,{filterFn:n,depthTexture:i,shadowCoord:s,shadow:a}){const o=s.x.greaterThanEqual(0).and(s.x.lessThanEqual(1)).and(s.y.greaterThanEqual(0)).and(s.y.lessThanEqual(1)).and(s.z.lessThanEqual(1)),l=n({depthTexture:i,shadowCoord:s,shadow:a});return o.select(l,He(1))}setupShadowCoord(e,n){const{shadow:i}=this,{renderer:s}=e,a=Gr("bias","float",i).setGroup(kn);let o=n,l;if(i.camera.isOrthographicCamera||s.logarithmicDepthBuffer!==!0)o=o.xyz.div(o.w),l=o.z,s.coordinateSystem===Bd&&(l=l.mul(2).sub(1));else{const c=o.w;o=o.xy.div(c);const u=Gr("near","float",i.camera).setGroup(kn),h=Gr("far","float",i.camera).setGroup(kn);l=pre(c.negate(),u,h)}return o=Xe(o.x,o.y.oneMinus(),l.add(a)),o}getShadowFilterFn(e){return Yke[e]}setupShadow(e){const{renderer:n}=e,{light:i,shadow:s}=this,a=n.shadowMap.type,o=new dl(s.mapSize.width,s.mapSize.height);o.compareFunction=SM;const l=e.createRenderTarget(s.mapSize.width,s.mapSize.height);if(l.depthTexture=o,s.camera.updateProjectionMatrix(),a===Ao){o.compareFunction=null,this.vsmShadowMapVertical=e.createRenderTarget(s.mapSize.width,s.mapSize.height,{format:Sp,type:da}),this.vsmShadowMapHorizontal=e.createRenderTarget(s.mapSize.width,s.mapSize.height,{format:Sp,type:da});const _=xr(o),E=xr(this.vsmShadowMapVertical.texture),S=Gr("blurSamples","float",s).setGroup(kn),T=Gr("radius","float",s).setGroup(kn),M=Gr("mapSize","vec2",s).setGroup(kn);let C=this.vsmMaterialVertical||(this.vsmMaterialVertical=new xs);C.fragmentNode=Xke({samples:S,radius:T,size:M,shadowPass:_}).context(e.getSharedContext()),C.name="VSMVertical",C=this.vsmMaterialHorizontal||(this.vsmMaterialHorizontal=new xs),C.fragmentNode=Kke({samples:S,radius:T,size:M,shadowPass:E}).context(e.getSharedContext()),C.name="VSMHorizontal"}const c=Gr("intensity","float",s).setGroup(kn),u=Gr("normalBias","float",s).setGroup(kn),h=jre(i).mul(Vre.add(DU.mul(u))),d=this.setupShadowCoord(e,h),f=s.filterNode||this.getShadowFilterFn(n.shadowMap.type)||null;if(f===null)throw new Error("THREE.WebGPURenderer: Shadow map type not supported yet.");const p=a===Ao?this.vsmShadowMapHorizontal.texture:o,g=this.setupShadowFilter(e,{filterFn:f,shadowTexture:l.texture,depthTexture:p,shadowCoord:d,shadow:s}),v=xr(l.texture,d),x=si(1,g.rgb.mix(v,1),c.mul(v.a)).toVar();return this.shadowMap=l,this.shadow.map=l,x}setup(e){if(e.renderer.shadowMap.enabled!==!1)return ut(()=>{let n=this._node;return this.setupShadowPosition(e),n===null&&(this._node=n=this.setupShadow(e)),e.material.shadowNode&&console.warn('THREE.NodeMaterial: ".shadowNode" is deprecated. Use ".castShadowNode" instead.'),e.material.receivedShadowNode&&(n=e.material.receivedShadowNode(n)),n})()}renderShadow(e){const{shadow:n,shadowMap:i,light:s}=this,{renderer:a,scene:o}=e;n.updateMatrices(s),i.setSize(n.mapSize.width,n.mapSize.height),a.render(o,n.camera)}updateShadow(e){const{shadowMap:n,light:i,shadow:s}=this,{renderer:a,scene:o,camera:l}=e,c=a.shadowMap.type,u=n.depthTexture.version;this._depthVersionCached=u,s.camera.layers.mask=l.layers.mask;const h=a.getRenderObjectFunction(),d=a.getMRT(),f=d?d.has("velocity"):!1;xR=jke(a,o,xR),o.overrideMaterial=Gke(i),a.setRenderObjectFunction((p,g,v,x,_,E,...S)=>{(p.castShadow===!0||p.receiveShadow&&c===Ao)&&(f&&(Sne(p).useVelocity=!0),p.onBeforeShadow(a,p,l,s.camera,x,g.overrideMaterial,E),a.renderObject(p,g,v,x,_,E,...S),p.onAfterShadow(a,p,l,s.camera,x,g.overrideMaterial,E))}),a.setRenderTarget(n),this.renderShadow(e),a.setRenderObjectFunction(h),i.isPointLight!==!0&&c===Ao&&this.vsmPass(a),Uke(a,o,xR)}vsmPass(e){const{shadow:n}=this;this.vsmShadowMapVertical.setSize(n.mapSize.width,n.mapSize.height),this.vsmShadowMapHorizontal.setSize(n.mapSize.width,n.mapSize.height),e.setRenderTarget(this.vsmShadowMapVertical),wS.material=this.vsmMaterialVertical,wS.render(e),e.setRenderTarget(this.vsmShadowMapHorizontal),wS.material=this.vsmMaterialHorizontal,wS.render(e)}dispose(){this.shadowMap.dispose(),this.shadowMap=null,this.vsmShadowMapVertical!==null&&(this.vsmShadowMapVertical.dispose(),this.vsmShadowMapVertical=null,this.vsmMaterialVertical.dispose(),this.vsmMaterialVertical=null),this.vsmShadowMapHorizontal!==null&&(this.vsmShadowMapHorizontal.dispose(),this.vsmShadowMapHorizontal=null,this.vsmMaterialHorizontal.dispose(),this.vsmMaterialHorizontal=null),super.dispose()}updateBefore(e){const{shadow:n}=this;let i=n.needsUpdate||n.autoUpdate;i&&(this._cameraFrameId[e.camera]===e.frameId&&(i=!1),this._cameraFrameId[e.camera]=e.frameId),i&&(this.updateShadow(e),this.shadowMap.depthTexture.version===this._depthVersionCached&&(n.needsUpdate=!1))}}const Zke=(r,e)=>ct(new Hre(r,e)),Qke=new ln,Sc=ut(([r,e])=>{const n=r.toVar(),i=rl(n),s=gh(1,io(i.x,io(i.y,i.z)));i.mulAssign(s),n.mulAssign(s.mul(e.mul(2).oneMinus()));const a=_t(n.xy).toVar(),l=e.mul(1.5).oneMinus();return Gi(i.z.greaterThanEqual(l),()=>{Gi(n.z.greaterThan(0),()=>{a.x.assign(qa(4,n.x))})}).ElseIf(i.x.greaterThanEqual(l),()=>{const c=lE(n.x);a.x.assign(n.z.mul(c).add(c.mul(2)))}).ElseIf(i.y.greaterThanEqual(l),()=>{const c=lE(n.y);a.x.assign(n.x.add(c.mul(2)).add(2)),a.y.assign(n.z.mul(c).sub(2))}),_t(.125,.25).mul(a).add(_t(.375,.75)).flipY()}).setLayout({name:"cubeToUV",type:"vec2",inputs:[{name:"pos",type:"vec3"},{name:"texelSizeY",type:"float"}]}),Jke=ut(({depthTexture:r,bd3D:e,dp:n,texelSize:i})=>xr(r,Sc(e,i.y)).compare(n)),eIe=ut(({depthTexture:r,bd3D:e,dp:n,texelSize:i,shadow:s})=>{const a=Gr("radius","float",s).setGroup(kn),o=_t(-1,1).mul(a).mul(i.y);return xr(r,Sc(e.add(o.xyy),i.y)).compare(n).add(xr(r,Sc(e.add(o.yyy),i.y)).compare(n)).add(xr(r,Sc(e.add(o.xyx),i.y)).compare(n)).add(xr(r,Sc(e.add(o.yyx),i.y)).compare(n)).add(xr(r,Sc(e,i.y)).compare(n)).add(xr(r,Sc(e.add(o.xxy),i.y)).compare(n)).add(xr(r,Sc(e.add(o.yxy),i.y)).compare(n)).add(xr(r,Sc(e.add(o.xxx),i.y)).compare(n)).add(xr(r,Sc(e.add(o.yxx),i.y)).compare(n)).mul(1/9)}),tIe=ut(({filterFn:r,depthTexture:e,shadowCoord:n,shadow:i})=>{const s=n.xyz.toVar(),a=s.length(),o=jn("float").setGroup(kn).onRenderUpdate(()=>i.camera.near),l=jn("float").setGroup(kn).onRenderUpdate(()=>i.camera.far),c=Gr("bias","float",i).setGroup(kn),u=jn(i.mapSize).setGroup(kn),h=He(1).toVar();return Gi(a.sub(l).lessThanEqual(0).and(a.sub(o).greaterThanEqual(0)),()=>{const d=a.sub(o).div(l.sub(o)).toVar();d.addAssign(c);const f=s.normalize(),p=_t(1).div(u.mul(_t(4,2)));h.assign(r({depthTexture:e,bd3D:f,dp:d,texelSize:p,shadow:i}))}),h}),uW=new In,sg=new dt,Ov=new dt;class nIe extends Hre{static get type(){return"PointShadowNode"}constructor(e,n=null){super(e,n)}getShadowFilterFn(e){return e===Tme?Jke:eIe}setupShadowCoord(e,n){return n}setupShadowFilter(e,{filterFn:n,shadowTexture:i,depthTexture:s,shadowCoord:a,shadow:o}){return tIe({filterFn:n,shadowTexture:i,depthTexture:s,shadowCoord:a,shadow:o})}renderShadow(e){const{shadow:n,shadowMap:i,light:s}=this,{renderer:a,scene:o}=e,l=n.getFrameExtents();Ov.copy(n.mapSize),Ov.multiply(l),i.setSize(Ov.width,Ov.height),sg.copy(n.mapSize);const c=a.autoClear,u=a.getClearColor(Qke),h=a.getClearAlpha();a.autoClear=!1,a.setClearColor(n.clearColor,n.clearAlpha),a.clear();const d=n.getViewportCount();for(let f=0;f<d;f++){const p=n.getViewport(f),g=sg.x*p.x,v=Ov.y-sg.y-sg.y*p.y;uW.set(g,v,sg.x*p.z,sg.y*p.w),i.viewport.copy(uW),n.updateMatrices(s,f),a.render(o,n.camera)}a.autoClear=c,a.setClearColor(u,h)}}const rIe=(r,e)=>ct(new nIe(r,e));class $p extends f0{static get type(){return"AnalyticLightNode"}constructor(e=null){super(),this.light=e,this.color=new ln,this.colorNode=e&&e.colorNode||jn(this.color).setGroup(kn),this.baseColorNode=null,this.shadowNode=null,this.shadowColorNode=null,this.isAnalyticLightNode=!0,this.updateType=nr.FRAME}customCacheKey(){return Sb(this.light.id,this.light.castShadow?1:0)}getHash(){return this.light.uuid}getLightVector(e){return zre(this.light).sub(e.context.positionView||es)}setupDirect(){}setupDirectRectArea(){}setupShadowNode(){return Zke(this.light)}setupShadow(e){const{renderer:n}=e;if(n.shadowMap.enabled===!1)return;let i=this.shadowColorNode;if(i===null){const s=this.light.shadow.shadowNode;let a;s!==void 0?a=ct(s):a=this.setupShadowNode(),this.shadowNode=a,this.shadowColorNode=i=this.colorNode.mul(a),this.baseColorNode=this.colorNode}this.colorNode=i}setup(e){this.colorNode=this.baseColorNode||this.colorNode,this.light.castShadow?e.object.receiveShadow&&this.setupShadow(e):this.shadowNode!==null&&(this.shadowNode.dispose(),this.shadowNode=null,this.shadowColorNode=null);const n=this.setupDirect(e),i=this.setupDirectRectArea(e);n&&e.lightsNode.setupDirectLight(e,this,n),i&&e.lightsNode.setupDirectRectAreaLight(e,this,i)}update(){const{light:e}=this;this.color.copy(e.color).multiplyScalar(e.intensity)}}const Wre=ut(({lightDistance:r,cutoffDistance:e,decayExponent:n})=>{const i=r.pow(n).max(.01).reciprocal();return e.greaterThan(0).select(i.mul(r.div(e).pow4().oneMinus().clamp().pow2()),i)}),iIe=({color:r,lightVector:e,cutoffDistance:n,decayExponent:i})=>{const s=e.normalize(),a=e.length(),o=Wre({lightDistance:a,cutoffDistance:n,decayExponent:i}),l=r.mul(o);return{lightDirection:s,lightColor:l}};class sIe extends $p{static get type(){return"PointLightNode"}constructor(e=null){super(e),this.cutoffDistanceNode=jn(0).setGroup(kn),this.decayExponentNode=jn(2).setGroup(kn)}update(e){const{light:n}=this;super.update(e),this.cutoffDistanceNode.value=n.distance,this.decayExponentNode.value=n.decay}setupShadowNode(){return rIe(this.light)}setupDirect(e){return iIe({color:this.colorNode,lightVector:this.getLightVector(e),cutoffDistance:this.cutoffDistanceNode,decayExponent:this.decayExponentNode})}}ut(([r=B_()],{renderer:e,material:n})=>{const i=He(1).toVar(),s=qne(r.mul(2).sub(1));if(n.alphaToCoverage&&e.samples>1){const a=He(s.fwidth()).toVar();i.assign(Ud(a.oneMinus(),a.add(1),s).oneMinus())}else s.greaterThan(1).discard();return i});const aIe=ut(([r,e])=>{const n=r.x,i=r.y,s=r.z;let a=e.element(0).mul(.886227);return a=a.add(e.element(1).mul(2*.511664).mul(i)),a=a.add(e.element(2).mul(2*.511664).mul(s)),a=a.add(e.element(3).mul(2*.511664).mul(n)),a=a.add(e.element(4).mul(2*.429043).mul(n).mul(i)),a=a.add(e.element(5).mul(2*.429043).mul(i).mul(s)),a=a.add(e.element(6).mul(s.mul(s).mul(.743125).sub(.247708))),a=a.add(e.element(7).mul(2*.429043).mul(n).mul(s)),a=a.add(e.element(8).mul(.429043).mul(ur(n,n).sub(ur(i,i)))),a}),Ul=new $U;let oIe=class extends Jd{constructor(e,n){super(),this.renderer=e,this.nodes=n}update(e,n,i){const s=this.renderer,a=this.nodes.getBackgroundNode(e)||e.background;let o=!1;if(a===null)s._clearColor.getRGB(Ul),Ul.a=s._clearColor.a;else if(a.isColor===!0)a.getRGB(Ul),Ul.a=1,o=!0;else if(a.isNode===!0){const c=this.get(e),u=a;Ul.copy(s._clearColor);let h=c.backgroundMesh;if(h===void 0){const f=NU(Bn(u).mul(aW),{getUV:()=>dke.mul(rre),getTextureLevel:()=>hke});let p=ure;p=p.setZ(p.w);const g=new xs;g.name="Background.material",g.side=Wr,g.depthTest=!1,g.depthWrite=!1,g.allowOverride=!1,g.fog=!1,g.lights=!1,g.vertexNode=p,g.colorNode=f,c.backgroundMeshNode=f,c.backgroundMesh=h=new li(new Ep(1,32,32),g),h.frustumCulled=!1,h.name="Background.mesh",h.onBeforeRender=function(v,x,_){this.matrixWorld.copyPosition(_.matrixWorld)}}const d=u.getCacheKey();c.backgroundCacheKey!==d&&(c.backgroundMeshNode.node=Bn(u).mul(aW),c.backgroundMeshNode.needsUpdate=!0,h.material.needsUpdate=!0,c.backgroundCacheKey=d),n.unshift(h,h.geometry,h.material,0,0,null,null)}else console.error("THREE.Renderer: Unsupported background configuration.",a);const l=s.xr.getEnvironmentBlendMode();if(l==="additive"?Ul.set(0,0,0,1):l==="alpha-blend"&&Ul.set(0,0,0,0),s.autoClear===!0||o===!0){const c=i.clearColorValue;c.r=Ul.r,c.g=Ul.g,c.b=Ul.b,c.a=Ul.a,(s.backend.isWebGLBackend===!0||s.alpha===!0)&&(c.r*=c.a,c.g*=c.a,c.b*=c.a),i.depthClearValue=s._clearDepth,i.stencilClearValue=s._clearStencil,i.clearColor=s.autoClearColor===!0,i.clearDepth=s.autoClearDepth===!0,i.clearStencil=s.autoClearStencil===!0}else i.clearColor=!1,i.clearDepth=!1,i.clearStencil=!1}},lIe=0;class K3{constructor(e="",n=[],i=0,s=[]){this.name=e,this.bindings=n,this.index=i,this.bindingsReference=s,this.id=lIe++}}class cIe{constructor(e,n,i,s,a,o,l,c,u,h=[]){this.vertexShader=e,this.fragmentShader=n,this.computeShader=i,this.transforms=h,this.nodeAttributes=s,this.bindings=a,this.updateNodes=o,this.updateBeforeNodes=l,this.updateAfterNodes=c,this.observer=u,this.usedTimes=0}createBindings(){const e=[];for(const n of this.bindings)if(n.bindings[0].groupNode.shared!==!0){const s=new K3(n.name,[],n.index,n);e.push(s);for(const a of n.bindings)s.bindings.push(a.clone())}else e.push(n);return e}}class hW{constructor(e,n,i=null){this.isNodeAttribute=!0,this.name=e,this.type=n,this.node=i}}class uIe{constructor(e,n,i){this.isNodeUniform=!0,this.name=e,this.type=n,this.node=i.getSelf()}get value(){return this.node.value}set value(e){this.node.value=e}get id(){return this.node.id}get groupNode(){return this.node.groupNode}}class qre{constructor(e,n,i=!1,s=null){this.isNodeVar=!0,this.name=e,this.type=n,this.readOnly=i,this.count=s}}class hIe extends qre{constructor(e,n){super(e,n),this.needsInterpolation=!1,this.isNodeVarying=!0}}class dIe{constructor(e,n,i=""){this.name=e,this.type=n,this.code=i,Object.defineProperty(this,"isNodeCode",{value:!0})}}let fIe=0;class bR{constructor(e=null){this.id=fIe++,this.nodesData=new WeakMap,this.parent=e}getData(e){let n=this.nodesData.get(e);return n===void 0&&this.parent!==null&&(n=this.parent.getData(e)),n}setData(e,n){this.nodesData.set(e,n)}}class pIe{constructor(e,n){this.name=e,this.members=n,this.output=!1}}class ef{constructor(e,n){this.name=e,this.value=n,this.boundary=0,this.itemSize=0,this.offset=0}setValue(e){this.value=e}getValue(){return this.value}}class mIe extends ef{constructor(e,n=0){super(e,n),this.isNumberUniform=!0,this.boundary=4,this.itemSize=1}}class gIe extends ef{constructor(e,n=new dt){super(e,n),this.isVector2Uniform=!0,this.boundary=8,this.itemSize=2}}class yIe extends ef{constructor(e,n=new pe){super(e,n),this.isVector3Uniform=!0,this.boundary=16,this.itemSize=3}}class vIe extends ef{constructor(e,n=new In){super(e,n),this.isVector4Uniform=!0,this.boundary=16,this.itemSize=4}}class xIe extends ef{constructor(e,n=new ln){super(e,n),this.isColorUniform=!0,this.boundary=16,this.itemSize=3}}class bIe extends ef{constructor(e,n=new NM){super(e,n),this.isMatrix2Uniform=!0,this.boundary=16,this.itemSize=4}}class _Ie extends ef{constructor(e,n=new zn){super(e,n),this.isMatrix3Uniform=!0,this.boundary=48,this.itemSize=12}}class wIe extends ef{constructor(e,n=new br){super(e,n),this.isMatrix4Uniform=!0,this.boundary=64,this.itemSize=16}}class SIe extends mIe{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}getType(){return this.nodeUniform.type}}class TIe extends gIe{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}getType(){return this.nodeUniform.type}}class EIe extends yIe{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}getType(){return this.nodeUniform.type}}class MIe extends vIe{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}getType(){return this.nodeUniform.type}}class AIe extends xIe{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}getType(){return this.nodeUniform.type}}class CIe extends bIe{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}getType(){return this.nodeUniform.type}}class NIe extends _Ie{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}getType(){return this.nodeUniform.type}}class PIe extends wIe{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}getType(){return this.nodeUniform.type}}const dW=new WeakMap,RIe=new Map([[Int8Array,"int"],[Int16Array,"int"],[Int32Array,"int"],[Uint8Array,"uint"],[Uint16Array,"uint"],[Uint32Array,"uint"],[Float32Array,"float"]]),SS=r=>/e/g.test(r)?String(r).replace(/\+/g,""):(r=Number(r),r+(r%1?"":".0"));class Xre{constructor(e,n,i){this.object=e,this.material=e&&e.material||null,this.geometry=e&&e.geometry||null,this.renderer=n,this.parser=i,this.scene=null,this.camera=null,this.nodes=[],this.sequentialNodes=[],this.updateNodes=[],this.updateBeforeNodes=[],this.updateAfterNodes=[],this.hashNodes={},this.observer=null,this.lightsNode=null,this.environmentNode=null,this.fogNode=null,this.clippingContext=null,this.vertexShader=null,this.fragmentShader=null,this.computeShader=null,this.flowNodes={vertex:[],fragment:[],compute:[]},this.flowCode={vertex:"",fragment:"",compute:""},this.uniforms={vertex:[],fragment:[],compute:[],index:0},this.structs={vertex:[],fragment:[],compute:[],index:0},this.bindings={vertex:{},fragment:{},compute:{}},this.bindingsIndexes={},this.bindGroups=null,this.attributes=[],this.bufferAttributes=[],this.varyings=[],this.codes={},this.vars={},this.declarations={},this.flow={code:""},this.chaining=[],this.stack=mR(),this.stacks=[],this.tab="	",this.currentFunctionNode=null,this.context={material:this.material},this.cache=new bR,this.globalCache=this.cache,this.flowsData=new WeakMap,this.shaderStage=null,this.buildStage=null}getBindGroupsCache(){let e=dW.get(this.renderer);return e===void 0&&(e=new Yc,dW.set(this.renderer,e)),e}createRenderTarget(e,n,i){return new Fp(e,n,i)}createCubeRenderTarget(e,n){return new vre(e,n)}includes(e){return this.nodes.includes(e)}getOutputStructName(){}_getBindGroup(e,n){const i=this.getBindGroupsCache(),s=[];let a=!0;for(const l of n)s.push(l),a=a&&l.groupNode.shared!==!0;let o;return a?(o=i.get(s),o===void 0&&(o=new K3(e,s,this.bindingsIndexes[e].group,s),i.set(s,o))):o=new K3(e,s,this.bindingsIndexes[e].group,s),o}getBindGroupArray(e,n){const i=this.bindings[n];let s=i[e];return s===void 0&&(this.bindingsIndexes[e]===void 0&&(this.bindingsIndexes[e]={binding:0,group:Object.keys(this.bindingsIndexes).length}),i[e]=s=[]),s}getBindings(){let e=this.bindGroups;if(e===null){const n={},i=this.bindings;for(const s of uH)for(const a in i[s]){const o=i[s][a];(n[a]||(n[a]=[])).push(...o)}e=[];for(const s in n){const a=n[s],o=this._getBindGroup(s,a);e.push(o)}this.bindGroups=e}return e}sortBindingGroups(){const e=this.getBindings();e.sort((n,i)=>n.bindings[0].groupNode.order-i.bindings[0].groupNode.order);for(let n=0;n<e.length;n++){const i=e[n];this.bindingsIndexes[i.name].group=n,i.index=n}}setHashNode(e,n){this.hashNodes[n]=e}addNode(e){this.nodes.includes(e)===!1&&(this.nodes.push(e),this.setHashNode(e,e.getHash(this)))}addSequentialNode(e){this.sequentialNodes.includes(e)===!1&&this.sequentialNodes.push(e)}buildUpdateNodes(){for(const e of this.nodes)e.getUpdateType()!==nr.NONE&&this.updateNodes.push(e.getSelf());for(const e of this.sequentialNodes){const n=e.getUpdateBeforeType(),i=e.getUpdateAfterType();n!==nr.NONE&&this.updateBeforeNodes.push(e.getSelf()),i!==nr.NONE&&this.updateAfterNodes.push(e.getSelf())}}get currentNode(){return this.chaining[this.chaining.length-1]}isFilteredTexture(e){return e.magFilter===ds||e.magFilter===Bg||e.magFilter===qu||e.magFilter===Xa||e.minFilter===ds||e.minFilter===Bg||e.minFilter===qu||e.minFilter===Xa}addChain(e){this.chaining.push(e)}removeChain(e){if(this.chaining.pop()!==e)throw new Error("NodeBuilder: Invalid node chaining!")}getMethod(e){return e}getNodeFromHash(e){return this.hashNodes[e]}addFlow(e,n){return this.flowNodes[e].push(n),n}setContext(e){this.context=e}getContext(){return this.context}getSharedContext(){return{...this.context},this.context}setCache(e){this.cache=e}getCache(){return this.cache}getCacheFromNode(e,n=!0){const i=this.getDataFromNode(e);return i.cache===void 0&&(i.cache=new bR(n?this.getCache():null)),i.cache}isAvailable(){return!1}getVertexIndex(){console.warn("Abstract function.")}getInstanceIndex(){console.warn("Abstract function.")}getDrawIndex(){console.warn("Abstract function.")}getFrontFacing(){console.warn("Abstract function.")}getFragCoord(){console.warn("Abstract function.")}isFlipY(){return!1}increaseUsage(e){const n=this.getDataFromNode(e);return n.usageCount=n.usageCount===void 0?1:n.usageCount+1,n.usageCount}generateTexture(){console.warn("Abstract function.")}generateTextureLod(){console.warn("Abstract function.")}generateArrayDeclaration(e,n){return this.getType(e)+"[ "+n+" ]"}generateArray(e,n,i=null){let s=this.generateArrayDeclaration(e,n)+"( ";for(let a=0;a<n;a++){const o=i?i[a]:null;o!==null?s+=o.build(this,e):s+=this.generateConst(e),a<n-1&&(s+=", ")}return s+=" )",s}generateStruct(e,n,i=null){const s=[];for(const a of n){const{name:o,type:l}=a;i&&i[o]&&i[o].isNode?s.push(i[o].build(this,l)):s.push(this.generateConst(l))}return e+"( "+s.join(", ")+" )"}generateConst(e,n=null){if(n===null&&(e==="float"||e==="int"||e==="uint"?n=0:e==="bool"?n=!1:e==="color"?n=new ln:e==="vec2"?n=new dt:e==="vec3"?n=new pe:e==="vec4"&&(n=new In)),e==="float")return SS(n);if(e==="int")return`${Math.round(n)}`;if(e==="uint")return n>=0?`${Math.round(n)}u`:"0u";if(e==="bool")return n?"true":"false";if(e==="color")return`${this.getType("vec3")}( ${SS(n.r)}, ${SS(n.g)}, ${SS(n.b)} )`;const i=this.getTypeLength(e),s=this.getComponentType(e),a=o=>this.generateConst(s,o);if(i===2)return`${this.getType(e)}( ${a(n.x)}, ${a(n.y)} )`;if(i===3)return`${this.getType(e)}( ${a(n.x)}, ${a(n.y)}, ${a(n.z)} )`;if(i===4&&e!=="mat2")return`${this.getType(e)}( ${a(n.x)}, ${a(n.y)}, ${a(n.z)}, ${a(n.w)} )`;if(i>=4&&n&&(n.isMatrix2||n.isMatrix3||n.isMatrix4))return`${this.getType(e)}( ${n.elements.map(a).join(", ")} )`;if(i>4)return`${this.getType(e)}()`;throw new Error(`NodeBuilder: Type '${e}' not found in generate constant attempt.`)}getType(e){return e==="color"?"vec3":e}hasGeometryAttribute(e){return this.geometry&&this.geometry.getAttribute(e)!==void 0}getAttribute(e,n){const i=this.attributes;for(const a of i)if(a.name===e)return a;const s=new hW(e,n);return this.registerDeclaration(s),i.push(s),s}getPropertyName(e){return e.name}isVector(e){return/vec\d/.test(e)}isMatrix(e){return/mat\d/.test(e)}isReference(e){return e==="void"||e==="property"||e==="sampler"||e==="samplerComparison"||e==="texture"||e==="cubeTexture"||e==="storageTexture"||e==="depthTexture"||e==="texture3D"}needsToWorkingColorSpace(){return!1}getComponentTypeFromTexture(e){const n=e.type;if(e.isDataTexture){if(n===Cs)return"int";if(n===Vr)return"uint"}return"float"}getElementType(e){return e==="mat2"?"vec2":e==="mat3"?"vec3":e==="mat4"?"vec4":this.getComponentType(e)}getComponentType(e){if(e=this.getVectorType(e),e==="float"||e==="bool"||e==="int"||e==="uint")return e;const n=/(b|i|u|)(vec|mat)([2-4])/.exec(e);return n===null?null:n[1]==="b"?"bool":n[1]==="i"?"int":n[1]==="u"?"uint":"float"}getVectorType(e){return e==="color"?"vec3":e==="texture"||e==="cubeTexture"||e==="storageTexture"||e==="texture3D"?"vec4":e}getTypeFromLength(e,n="float"){if(e===1)return n;let i=oCe(e);const s=n==="float"?"":n[0];return/mat2/.test(n)===!0&&(i=i.replace("vec","mat")),s+i}getTypeFromArray(e){return RIe.get(e.constructor)}isInteger(e){return/int|uint|(i|u)vec/.test(e)}getTypeFromAttribute(e){let n=e;e.isInterleavedBufferAttribute&&(n=e.data);const i=n.array,s=e.itemSize,a=e.normalized;let o;return!(e instanceof cee)&&a!==!0&&(o=this.getTypeFromArray(i)),this.getTypeFromLength(s,o)}getTypeLength(e){const n=this.getVectorType(e),i=/vec([2-4])/.exec(n);return i!==null?Number(i[1]):n==="float"||n==="bool"||n==="int"||n==="uint"?1:/mat2/.test(e)===!0?4:/mat3/.test(e)===!0?9:/mat4/.test(e)===!0?16:0}getVectorFromMatrix(e){return e.replace("mat","vec")}changeComponentType(e,n){return this.getTypeFromLength(this.getTypeLength(e),n)}getIntegerType(e){const n=this.getComponentType(e);return n==="int"||n==="uint"?e:this.changeComponentType(e,"int")}addStack(){return this.stack=mR(this.stack),this.stacks.push(Cne()||this.stack),rE(this.stack),this.stack}removeStack(){const e=this.stack;return this.stack=e.parent,rE(this.stacks.pop()),e}getDataFromNode(e,n=this.shaderStage,i=null){i=i===null?e.isGlobal(this)?this.globalCache:this.cache:i;let s=i.getData(e);return s===void 0&&(s={},i.setData(e,s)),s[n]===void 0&&(s[n]={}),s[n]}getNodeProperties(e,n="any"){const i=this.getDataFromNode(e,n);return i.properties||(i.properties={outputNode:null})}getBufferAttributeFromNode(e,n){const i=this.getDataFromNode(e);let s=i.bufferAttribute;if(s===void 0){const a=this.uniforms.index++;s=new hW("nodeAttribute"+a,n,e),this.bufferAttributes.push(s),i.bufferAttribute=s}return s}getStructTypeFromNode(e,n,i=null,s=this.shaderStage){const a=this.getDataFromNode(e,s,this.globalCache);let o=a.structType;if(o===void 0){const l=this.structs.index++;i===null&&(i="StructType"+l),o=new pIe(i,n),this.structs[s].push(o),a.structType=o}return o}getOutputStructTypeFromNode(e,n){const i=this.getStructTypeFromNode(e,n,"OutputType","fragment");return i.output=!0,i}getUniformFromNode(e,n,i=this.shaderStage,s=null){const a=this.getDataFromNode(e,i,this.globalCache);let o=a.uniform;if(o===void 0){const l=this.uniforms.index++;o=new uIe(s||"nodeUniform"+l,n,e),this.uniforms[i].push(o),this.registerDeclaration(o),a.uniform=o}return o}getArrayCount(e){let n=null;return e.isArrayNode?n=e.count:e.isVarNode&&e.node.isArrayNode&&(n=e.node.count),n}getVarFromNode(e,n=null,i=e.getNodeType(this),s=this.shaderStage,a=!1){const o=this.getDataFromNode(e,s);let l=o.variable;if(l===void 0){const c=a?"_const":"_var",u=this.vars[s]||(this.vars[s]=[]),h=this.vars[c]||(this.vars[c]=0);n===null&&(n=(a?"nodeConst":"nodeVar")+h,this.vars[c]++);const d=this.getArrayCount(e);l=new qre(n,i,a,d),a||u.push(l),this.registerDeclaration(l),o.variable=l}return l}isDeterministic(e){if(e.isMathNode)return this.isDeterministic(e.aNode)&&(e.bNode?this.isDeterministic(e.bNode):!0)&&(e.cNode?this.isDeterministic(e.cNode):!0);if(e.isOperatorNode)return this.isDeterministic(e.aNode)&&(e.bNode?this.isDeterministic(e.bNode):!0);if(e.isArrayNode){if(e.values!==null){for(const n of e.values)if(!this.isDeterministic(n))return!1}return!0}else if(e.isConstNode)return!0;return!1}getVaryingFromNode(e,n=null,i=e.getNodeType(this)){const s=this.getDataFromNode(e,"any");let a=s.varying;if(a===void 0){const o=this.varyings,l=o.length;n===null&&(n="nodeVarying"+l),a=new hIe(n,i),o.push(a),this.registerDeclaration(a),s.varying=a}return a}registerDeclaration(e){const n=this.shaderStage,i=this.declarations[n]||(this.declarations[n]={}),s=this.getPropertyName(e);let a=1,o=s;for(;i[o]!==void 0;)o=s+"_"+a++;i[o]=e,a>1&&(e.name=o,console.warn(`THREE.TSL: Declaration name '${s}' of '${e.type}' already in use. Renamed to '${o}'.`))}getCodeFromNode(e,n,i=this.shaderStage){const s=this.getDataFromNode(e);let a=s.code;if(a===void 0){const o=this.codes[i]||(this.codes[i]=[]),l=o.length;a=new dIe("nodeCode"+l,n),o.push(a),s.code=a}return a}addFlowCodeHierarchy(e,n){const{flowCodes:i,flowCodeBlock:s}=this.getDataFromNode(e);let a=!0,o=n;for(;o;){if(s.get(o)===!0){a=!1;break}o=this.getDataFromNode(o).parentNodeBlock}if(a)for(const l of i)this.addLineFlowCode(l)}addLineFlowCodeBlock(e,n,i){const s=this.getDataFromNode(e),a=s.flowCodes||(s.flowCodes=[]),o=s.flowCodeBlock||(s.flowCodeBlock=new WeakMap);a.push(n),o.set(i,!0)}addLineFlowCode(e,n=null){return e===""?this:(n!==null&&this.context.nodeBlock&&this.addLineFlowCodeBlock(n,e,this.context.nodeBlock),e=this.tab+e,/;\s*$/.test(e)||(e=e+`;
`),this.flow.code+=e,this)}addFlowCode(e){return this.flow.code+=e,this}addFlowTab(){return this.tab+="	",this}removeFlowTab(){return this.tab=this.tab.slice(0,-1),this}getFlowData(e){return this.flowsData.get(e)}flowNode(e){const n=e.getNodeType(this),i=this.flowChildNode(e,n);return this.flowsData.set(e,i),i}addInclude(e){this.currentFunctionNode!==null&&this.currentFunctionNode.includes.push(e)}buildFunctionNode(e){const n=new Tke,i=this.currentFunctionNode;return this.currentFunctionNode=n,n.code=this.buildFunctionCode(e),this.currentFunctionNode=i,n}flowShaderNode(e){const n=e.layout,i={[Symbol.iterator](){let o=0;const l=Object.values(this);return{next:()=>({value:l[o],done:o++>=l.length})}}};for(const o of n.inputs)i[o.name]=new ake(o.type,o.name);e.layout=null;const s=e.call(i),a=this.flowStagesNode(s,n.type);return e.layout=n,a}flowStagesNode(e,n=null){const i=this.flow,s=this.vars,a=this.declarations,o=this.cache,l=this.buildStage,c=this.stack,u={code:""};this.flow=u,this.vars={},this.declarations={},this.cache=new bR,this.stack=mR();for(const h of cH)this.setBuildStage(h),u.result=e.build(this,n);return u.vars=this.getVars(this.shaderStage),this.flow=i,this.vars=s,this.declarations=a,this.cache=o,this.stack=c,this.setBuildStage(l),u}getFunctionOperator(){return null}buildFunctionCode(){console.warn("Abstract function.")}flowChildNode(e,n=null){const i=this.flow,s={code:""};return this.flow=s,s.result=e.build(this,n),this.flow=i,s}flowNodeFromShaderStage(e,n,i=null,s=null){const a=this.shaderStage;this.setShaderStage(e);const o=this.flowChildNode(n,i);return s!==null&&(o.code+=`${this.tab+s} = ${o.result};
`),this.flowCode[e]=this.flowCode[e]+o.code,this.setShaderStage(a),o}getAttributesArray(){return this.attributes.concat(this.bufferAttributes)}getAttributes(){console.warn("Abstract function.")}getVaryings(){console.warn("Abstract function.")}getVar(e,n,i=null){return`${i!==null?this.generateArrayDeclaration(e,i):this.getType(e)} ${n}`}getVars(e){let n="";const i=this.vars[e];if(i!==void 0)for(const s of i)n+=`${this.getVar(s.type,s.name)}; `;return n}getUniforms(){console.warn("Abstract function.")}getCodes(e){const n=this.codes[e];let i="";if(n!==void 0)for(const s of n)i+=s.code+`
`;return i}getHash(){return this.vertexShader+this.fragmentShader+this.computeShader}setShaderStage(e){this.shaderStage=e}getShaderStage(){return this.shaderStage}setBuildStage(e){this.buildStage=e}getBuildStage(){return this.buildStage}buildCode(){console.warn("Abstract function.")}build(){const{object:e,material:n,renderer:i}=this;if(n!==null){let s=i.library.fromMaterial(n);s===null&&(console.error(`NodeMaterial: Material "${n.type}" is not compatible.`),s=new xs),s.build(this)}else this.addFlow("compute",e);for(const s of cH){this.setBuildStage(s),this.context.vertex&&this.context.vertex.isNode&&this.flowNodeFromShaderStage("vertex",this.context.vertex);for(const a of uH){this.setShaderStage(a);const o=this.flowNodes[a];for(const l of o)s==="generate"?this.flowNode(l):l.build(this)}}return this.setBuildStage(null),this.setShaderStage(null),this.buildCode(),this.buildUpdateNodes(),this}getNodeUniform(e,n){if(n==="float"||n==="int"||n==="uint")return new SIe(e);if(n==="vec2"||n==="ivec2"||n==="uvec2")return new TIe(e);if(n==="vec3"||n==="ivec3"||n==="uvec3")return new EIe(e);if(n==="vec4"||n==="ivec4"||n==="uvec4")return new MIe(e);if(n==="color")return new AIe(e);if(n==="mat2")return new CIe(e);if(n==="mat3")return new NIe(e);if(n==="mat4")return new PIe(e);throw new Error(`Uniform "${n}" not declared.`)}format(e,n,i){if(n=this.getVectorType(n),i=this.getVectorType(i),n===i||i===null||this.isReference(i))return e;const s=this.getTypeLength(n),a=this.getTypeLength(i);return s===16&&a===9?`${this.getType(i)}( ${e}[ 0 ].xyz, ${e}[ 1 ].xyz, ${e}[ 2 ].xyz )`:s===9&&a===4?`${this.getType(i)}( ${e}[ 0 ].xy, ${e}[ 1 ].xy )`:s>4||a>4||a===0?e:s===a?`${this.getType(i)}( ${e} )`:s>a?this.format(`${e}.${"xyz".slice(0,a)}`,this.getTypeFromLength(a,this.getComponentType(n)),i):a===4&&s>1?`${this.getType(i)}( ${this.format(e,n,"vec3")}, 1.0 )`:s===2?`${this.getType(i)}( ${this.format(e,n,"vec2")}, 0.0 )`:(s===1&&a>1&&n!==this.getComponentType(i)&&(e=`${this.getType(this.getComponentType(i))}( ${e} )`),`${this.getType(i)}( ${e} )`)}getSignature(){return`// Three.js r${g_} - Node System
`}createNodeMaterial(e="NodeMaterial"){throw new Error(`THREE.NodeBuilder: createNodeMaterial() was deprecated. Use new ${e}() instead.`)}}class fW{constructor(){this.time=0,this.deltaTime=0,this.frameId=0,this.renderId=0,this.updateMap=new WeakMap,this.updateBeforeMap=new WeakMap,this.updateAfterMap=new WeakMap,this.renderer=null,this.material=null,this.camera=null,this.object=null,this.scene=null}_getMaps(e,n){let i=e.get(n);return i===void 0&&(i={renderMap:new WeakMap,frameMap:new WeakMap},e.set(n,i)),i}updateBeforeNode(e){const n=e.getUpdateBeforeType(),i=e.updateReference(this);if(n===nr.FRAME){const{frameMap:s}=this._getMaps(this.updateBeforeMap,i);s.get(i)!==this.frameId&&e.updateBefore(this)!==!1&&s.set(i,this.frameId)}else if(n===nr.RENDER){const{renderMap:s}=this._getMaps(this.updateBeforeMap,i);s.get(i)!==this.renderId&&e.updateBefore(this)!==!1&&s.set(i,this.renderId)}else n===nr.OBJECT&&e.updateBefore(this)}updateAfterNode(e){const n=e.getUpdateAfterType(),i=e.updateReference(this);if(n===nr.FRAME){const{frameMap:s}=this._getMaps(this.updateAfterMap,i);s.get(i)!==this.frameId&&e.updateAfter(this)!==!1&&s.set(i,this.frameId)}else if(n===nr.RENDER){const{renderMap:s}=this._getMaps(this.updateAfterMap,i);s.get(i)!==this.renderId&&e.updateAfter(this)!==!1&&s.set(i,this.renderId)}else n===nr.OBJECT&&e.updateAfter(this)}updateNode(e){const n=e.getUpdateType(),i=e.updateReference(this);if(n===nr.FRAME){const{frameMap:s}=this._getMaps(this.updateMap,i);s.get(i)!==this.frameId&&e.update(this)!==!1&&s.set(i,this.frameId)}else if(n===nr.RENDER){const{renderMap:s}=this._getMaps(this.updateMap,i);s.get(i)!==this.renderId&&e.update(this)!==!1&&s.set(i,this.renderId)}else n===nr.OBJECT&&e.update(this)}update(){this.frameId++,this.lastTime===void 0&&(this.lastTime=performance.now()),this.deltaTime=(performance.now()-this.lastTime)/1e3,this.lastTime=performance.now(),this.time+=this.deltaTime}}class GU{constructor(e,n,i=null,s="",a=!1){this.type=e,this.name=n,this.count=i,this.qualifier=s,this.isConst=a}}GU.isNodeFunctionInput=!0;class OIe extends $p{static get type(){return"DirectionalLightNode"}constructor(e=null){super(e)}setupDirect(){const e=this.colorNode;return{lightDirection:$re(this.light),lightColor:e}}}const _R=new br,TS=new br;let kv=null;class kIe extends $p{static get type(){return"RectAreaLightNode"}constructor(e=null){super(e),this.halfHeight=jn(new pe).setGroup(kn),this.halfWidth=jn(new pe).setGroup(kn),this.updateType=nr.RENDER}update(e){super.update(e);const{light:n}=this,i=e.camera.matrixWorldInverse;TS.identity(),_R.copy(n.matrixWorld),_R.premultiply(i),TS.extractRotation(_R),this.halfWidth.value.set(n.width*.5,0,0),this.halfHeight.value.set(0,n.height*.5,0),this.halfWidth.value.applyMatrix4(TS),this.halfHeight.value.applyMatrix4(TS)}setupDirectRectArea(e){let n,i;e.isAvailable("float32Filterable")?(n=xr(kv.LTC_FLOAT_1),i=xr(kv.LTC_FLOAT_2)):(n=xr(kv.LTC_HALF_1),i=xr(kv.LTC_HALF_2));const{colorNode:s,light:a}=this,o=zre(a);return{lightColor:s,lightPosition:o,halfWidth:this.halfWidth,halfHeight:this.halfHeight,ltc_1:n,ltc_2:i}}static setLTC(e){kv=e}}class Kre extends $p{static get type(){return"SpotLightNode"}constructor(e=null){super(e),this.coneCosNode=jn(0).setGroup(kn),this.penumbraCosNode=jn(0).setGroup(kn),this.cutoffDistanceNode=jn(0).setGroup(kn),this.decayExponentNode=jn(0).setGroup(kn)}update(e){super.update(e);const{light:n}=this;this.coneCosNode.value=Math.cos(n.angle),this.penumbraCosNode.value=Math.cos(n.angle*(1-n.penumbra)),this.cutoffDistanceNode.value=n.distance,this.decayExponentNode.value=n.decay}getSpotAttenuation(e){const{coneCosNode:n,penumbraCosNode:i}=this;return Ud(n,i,e)}setupDirect(e){const{colorNode:n,cutoffDistanceNode:i,decayExponentNode:s,light:a}=this,o=this.getLightVector(e),l=o.normalize(),c=l.dot($re(a)),u=this.getSpotAttenuation(c),h=o.length(),d=Wre({lightDistance:h,cutoffDistance:i,decayExponent:s});let f=n.mul(u).mul(d);if(a.map){const p=Cke(a,e.context.positionWorld),g=xr(a.map,p.xy).onRenderUpdate(()=>a.map);f=p.mul(2).sub(1).abs().lessThan(1).all().select(f.mul(g),f)}return{lightColor:f,lightDirection:l}}}class IIe extends Kre{static get type(){return"IESSpotLightNode"}getSpotAttenuation(e){const n=this.light.iesMap;let i=null;if(n&&n.isTexture===!0){const s=e.acos().mul(1/Math.PI);i=xr(n,_t(s,0),0).r}else i=super.getSpotAttenuation(e);return i}}class DIe extends $p{static get type(){return"AmbientLightNode"}constructor(e=null){super(e)}setup({context:e}){e.irradiance.addAssign(this.colorNode)}}class LIe extends $p{static get type(){return"HemisphereLightNode"}constructor(e=null){super(e),this.lightPositionNode=Ure(e),this.lightDirectionNode=this.lightPositionNode.normalize(),this.groundColorNode=jn(new ln).setGroup(kn)}update(e){const{light:n}=this;super.update(e),this.lightPositionNode.object3d=n,this.groundColorNode.value.copy(n.groundColor).multiplyScalar(n.intensity)}setup(e){const{colorNode:n,groundColorNode:i,lightDirectionNode:s}=this,o=oc.dot(s).mul(.5).add(.5),l=si(i,n,o);e.context.irradiance.addAssign(l)}}class FIe extends $p{static get type(){return"LightProbeNode"}constructor(e=null){super(e);const n=[];for(let i=0;i<9;i++)n.push(new pe);this.lightProbe=Ac(n)}update(e){const{light:n}=this;super.update(e);for(let i=0;i<9;i++)this.lightProbe.array[i].copy(n.sh.coefficients[i]).multiplyScalar(n.intensity)}setup(e){const n=aIe(rre,this.lightProbe);e.context.irradiance.addAssign(n)}}class Yre{parseFunction(){console.warn("Abstract function.")}}class VU{constructor(e,n,i="",s=""){this.type=e,this.inputs=n,this.name=i,this.precision=s}getCode(){console.warn("Abstract function.")}}VU.isNodeFunction=!0;const BIe=/^\s*(highp|mediump|lowp)?\s*([a-z_0-9]+)\s*([a-z_0-9]+)?\s*\(([\s\S]*?)\)/i,jIe=/[a-z_0-9]+/ig,pW="#pragma main",UIe=r=>{r=r.trim();const e=r.indexOf(pW),n=e!==-1?r.slice(e+pW.length):r,i=n.match(BIe);if(i!==null&&i.length===5){const s=i[4],a=[];let o=null;for(;(o=jIe.exec(s))!==null;)a.push(o);const l=[];let c=0;for(;c<a.length;){const g=a[c][0]==="const";g===!0&&c++;let v=a[c][0];v==="in"||v==="out"||v==="inout"?c++:v="";const x=a[c++][0];let _=Number.parseInt(a[c][0]);Number.isNaN(_)===!1?c++:_=null;const E=a[c++][0];l.push(new GU(x,E,_,v,g))}const u=n.substring(i[0].length),h=i[3]!==void 0?i[3]:"",d=i[2],f=i[1]!==void 0?i[1]:"",p=e!==-1?r.slice(0,e):"";return{type:d,inputs:l,name:h,precision:f,inputsCode:s,blockCode:u,headerCode:p}}else throw new Error("FunctionNode: Function is not a GLSL code.")};class zIe extends VU{constructor(e){const{type:n,inputs:i,name:s,precision:a,inputsCode:o,blockCode:l,headerCode:c}=UIe(e);super(n,i,s,a),this.inputsCode=o,this.blockCode=l,this.headerCode=c}getCode(e=this.name){let n;const i=this.blockCode;if(i!==""){const{type:s,inputsCode:a,headerCode:o,precision:l}=this;let c=`${s} ${e} ( ${a.trim()} )`;l!==""&&(c=`${l} ${c}`),n=o+c+i}else n="";return n}}class $Ie extends Yre{parseFunction(e){return new zIe(e)}}const mW=new WeakMap,_c=[],ag=[];class GIe extends Jd{constructor(e,n){super(),this.renderer=e,this.backend=n,this.nodeFrame=new fW,this.nodeBuilderCache=new Map,this.callHashCache=new Yc,this.groupsData=new Yc,this.cacheLib={}}updateGroup(e){const n=e.groupNode,i=n.name;if(i===Rne.name)return!0;if(i===kn.name){const a=this.get(e),o=this.nodeFrame.renderId;return a.renderId!==o?(a.renderId=o,!0):!1}if(i===HCe.name){const a=this.get(e),o=this.nodeFrame.frameId;return a.frameId!==o?(a.frameId=o,!0):!1}_c[0]=n,_c[1]=e;let s=this.groupsData.get(_c);return s===void 0&&this.groupsData.set(_c,s={}),_c.length=0,s.version!==n.version?(s.version=n.version,!0):!1}getForRenderCacheKey(e){return e.initialCacheKey}getForRender(e){const n=this.get(e);let i=n.nodeBuilderState;if(i===void 0){const{nodeBuilderCache:s}=this,a=this.getForRenderCacheKey(e);if(i=s.get(a),i===void 0){const o=this.backend.createNodeBuilder(e.object,this.renderer);o.scene=e.scene,o.material=e.material,o.camera=e.camera,o.context.material=e.material,o.lightsNode=e.lightsNode,o.environmentNode=this.getEnvironmentNode(e.scene),o.fogNode=this.getFogNode(e.scene),o.clippingContext=e.clippingContext,o.build(),i=this._createNodeBuilderState(o),s.set(a,i)}i.usedTimes++,n.nodeBuilderState=i}return i}delete(e){if(e.isRenderObject){const n=this.get(e).nodeBuilderState;n.usedTimes--,n.usedTimes===0&&this.nodeBuilderCache.delete(this.getForRenderCacheKey(e))}return super.delete(e)}getForCompute(e){const n=this.get(e);let i=n.nodeBuilderState;if(i===void 0){const s=this.backend.createNodeBuilder(e,this.renderer);s.build(),i=this._createNodeBuilderState(s),n.nodeBuilderState=i}return i}_createNodeBuilderState(e){return new cIe(e.vertexShader,e.fragmentShader,e.computeShader,e.getAttributesArray(),e.getBindings(),e.updateNodes,e.updateBeforeNodes,e.updateAfterNodes,e.observer,e.transforms)}getEnvironmentNode(e){this.updateEnvironment(e);let n=null;if(e.environmentNode&&e.environmentNode.isNode)n=e.environmentNode;else{const i=this.get(e);i.environmentNode&&(n=i.environmentNode)}return n}getBackgroundNode(e){this.updateBackground(e);let n=null;if(e.backgroundNode&&e.backgroundNode.isNode)n=e.backgroundNode;else{const i=this.get(e);i.backgroundNode&&(n=i.backgroundNode)}return n}getFogNode(e){return this.updateFog(e),e.fogNode||this.get(e).fogNode||null}getCacheKey(e,n){_c[0]=e,_c[1]=n;const i=this.renderer.info.calls,s=this.callHashCache.get(_c)||{};if(s.callId!==i){const a=this.getEnvironmentNode(e),o=this.getFogNode(e);n&&ag.push(n.getCacheKey(!0)),a&&ag.push(a.getCacheKey()),o&&ag.push(o.getCacheKey()),ag.push(this.renderer.shadowMap.enabled?1:0),s.callId=i,s.cacheKey=yU(ag),this.callHashCache.set(_c,s),ag.length=0}return _c.length=0,s.cacheKey}get isToneMappingState(){return!this.renderer.getRenderTarget()}updateBackground(e){const n=this.get(e),i=e.background;if(i){const s=e.backgroundBlurriness===0&&n.backgroundBlurriness>0||e.backgroundBlurriness>0&&n.backgroundBlurriness===0;if(n.background!==i||s){const a=this.getCacheNode("background",i,()=>{if(i.isCubeTexture===!0||i.mapping===Ld||i.mapping===Fd||i.mapping===bp){if(e.backgroundBlurriness>0||i.mapping===bp)return Pre(i);{let o;return i.isCubeTexture===!0?o=Nb(i):o=xr(i),bre(o)}}else{if(i.isTexture===!0)return xr(i,Pb.flipY()).setUpdateMatrix(!0);i.isColor!==!0&&console.error("WebGPUNodes: Unsupported background configuration.",i)}},s);n.backgroundNode=a,n.background=i,n.backgroundBlurriness=e.backgroundBlurriness}}else n.backgroundNode&&(delete n.backgroundNode,delete n.background)}getCacheNode(e,n,i,s=!1){const a=this.cacheLib[e]||(this.cacheLib[e]=new WeakMap);let o=a.get(n);return(o===void 0||s)&&(o=i(),a.set(n,o)),o}updateFog(e){const n=this.get(e),i=e.fog;if(i){if(n.fog!==i){const s=this.getCacheNode("fog",i,()=>{if(i.isFogExp2){const a=Gr("color","color",i).setGroup(kn),o=Gr("density","float",i).setGroup(kn);return lW(a,Mke(o))}else if(i.isFog){const a=Gr("color","color",i).setGroup(kn),o=Gr("near","float",i).setGroup(kn),l=Gr("far","float",i).setGroup(kn);return lW(a,Eke(o,l))}else console.error("THREE.Renderer: Unsupported fog configuration.",i)});n.fogNode=s,n.fog=i}}else delete n.fogNode,delete n.fog}updateEnvironment(e){const n=this.get(e),i=e.environment;if(i){if(n.environment!==i){const s=this.getCacheNode("environment",i,()=>{if(i.isCubeTexture===!0)return Nb(i);if(i.isTexture===!0)return xr(i);console.error("Nodes: Unsupported environment configuration.",i)});n.environmentNode=s,n.environment=i}}else n.environmentNode&&(delete n.environmentNode,delete n.environment)}getNodeFrame(e=this.renderer,n=null,i=null,s=null,a=null){const o=this.nodeFrame;return o.renderer=e,o.scene=n,o.object=i,o.camera=s,o.material=a,o}getNodeFrameForRender(e){return this.getNodeFrame(e.renderer,e.scene,e.object,e.camera,e.material)}getOutputCacheKey(){const e=this.renderer;return e.toneMapping+","+e.currentColorSpace}hasOutputChange(e){return mW.get(e)!==this.getOutputCacheKey()}getOutputNode(e){const n=this.renderer,i=this.getOutputCacheKey(),s=xr(e,Pb).renderOutput(n.toneMapping,n.currentColorSpace);return mW.set(e,i),s}updateBefore(e){const n=e.getNodeBuilderState();for(const i of n.updateBeforeNodes)this.getNodeFrameForRender(e).updateBeforeNode(i)}updateAfter(e){const n=e.getNodeBuilderState();for(const i of n.updateAfterNodes)this.getNodeFrameForRender(e).updateAfterNode(i)}updateForCompute(e){const n=this.getNodeFrame(),i=this.getForCompute(e);for(const s of i.updateNodes)n.updateNode(s)}updateForRender(e){const n=this.getNodeFrameForRender(e),i=e.getNodeBuilderState();for(const s of i.updateNodes)n.updateNode(s)}needsRefresh(e){const n=this.getNodeFrameForRender(e);return e.getMonitor().needsRefresh(e,n)}dispose(){super.dispose(),this.nodeFrame=new fW,this.nodeBuilderCache=new Map,this.cacheLib={}}}const wR=new nl;class cE{constructor(e=null){this.version=0,this.clipIntersection=null,this.cacheKey="",this.shadowPass=!1,this.viewNormalMatrix=new zn,this.clippingGroupContexts=new WeakMap,this.intersectionPlanes=[],this.unionPlanes=[],this.parentVersion=null,e!==null&&(this.viewNormalMatrix=e.viewNormalMatrix,this.clippingGroupContexts=e.clippingGroupContexts,this.shadowPass=e.shadowPass,this.viewMatrix=e.viewMatrix)}projectPlanes(e,n,i){const s=e.length;for(let a=0;a<s;a++){wR.copy(e[a]).applyMatrix4(this.viewMatrix,this.viewNormalMatrix);const o=n[i+a],l=wR.normal;o.x=-l.x,o.y=-l.y,o.z=-l.z,o.w=wR.constant}}updateGlobal(e,n){this.shadowPass=e.overrideMaterial!==null&&e.overrideMaterial.isShadowPassMaterial,this.viewMatrix=n.matrixWorldInverse,this.viewNormalMatrix.getNormalMatrix(this.viewMatrix)}update(e,n){let i=!1;e.version!==this.parentVersion&&(this.intersectionPlanes=Array.from(e.intersectionPlanes),this.unionPlanes=Array.from(e.unionPlanes),this.parentVersion=e.version),this.clipIntersection!==n.clipIntersection&&(this.clipIntersection=n.clipIntersection,this.clipIntersection?this.unionPlanes.length=e.unionPlanes.length:this.intersectionPlanes.length=e.intersectionPlanes.length);const s=n.clippingPlanes,a=s.length;let o,l;if(this.clipIntersection?(o=this.intersectionPlanes,l=e.intersectionPlanes.length):(o=this.unionPlanes,l=e.unionPlanes.length),o.length!==l+a){o.length=l+a;for(let c=0;c<a;c++)o[l+c]=new In;i=!0}this.projectPlanes(s,o,l),i&&(this.version++,this.cacheKey=`${this.intersectionPlanes.length}:${this.unionPlanes.length}`)}getGroupContext(e){if(this.shadowPass&&!e.clipShadows)return this;let n=this.clippingGroupContexts.get(e);return n===void 0&&(n=new cE(this),this.clippingGroupContexts.set(e,n)),n.update(this,e),n}get unionClippingCount(){return this.unionPlanes.length}}class VIe{constructor(e,n){this.bundleGroup=e,this.camera=n}}const Iv=[];class HIe{constructor(){this.bundles=new Yc}get(e,n){const i=this.bundles;Iv[0]=e,Iv[1]=n;let s=i.get(Iv);return s===void 0&&(s=new VIe(e,n),i.set(Iv,s)),Iv.length=0,s}dispose(){this.bundles=new Yc}}class Zre{constructor(){this.lightNodes=new WeakMap,this.materialNodes=new Map,this.toneMappingNodes=new Map}fromMaterial(e){if(e.isNodeMaterial)return e;let n=null;const i=this.getMaterialNodeClass(e.type);if(i!==null){n=new i;for(const s in e)n[s]=e[s]}return n}addToneMapping(e,n){this.addType(e,n,this.toneMappingNodes)}getToneMappingFunction(e){return this.toneMappingNodes.get(e)||null}getMaterialNodeClass(e){return this.materialNodes.get(e)||null}addMaterial(e,n){this.addType(e,n,this.materialNodes)}getLightNodeClass(e){return this.lightNodes.get(e)||null}addLight(e,n){this.addClass(e,n,this.lightNodes)}addType(e,n,i){if(i.has(n)){console.warn(`Redefinition of node ${n}`);return}if(typeof e!="function")throw new Error(`Node class ${e.name} is not a class.`);if(typeof n=="function"||typeof n=="object")throw new Error(`Base class ${n} is not a class.`);i.set(n,e)}addClass(e,n,i){if(i.has(n)){console.warn(`Redefinition of node ${n.name}`);return}if(typeof e!="function")throw new Error(`Node class ${e.name} is not a class.`);if(typeof n!="function")throw new Error(`Base class ${n.name} is not a class.`);i.set(n,e)}}const WIe=new Gre,Dv=[];class qIe extends Yc{constructor(){super()}createNode(e=[]){return new Gre().setLights(e)}getNode(e,n){if(e.isQuadMesh)return WIe;Dv[0]=e,Dv[1]=n;let i=this.get(Dv);return i===void 0&&(i=this.createNode(),this.set(Dv,i)),Dv.length=0,i}}class rx extends Fp{constructor(e=1,n=1,i={}){super(e,n,i),this.isXRRenderTarget=!0,this.hasExternalTextures=!1,this.autoAllocateDepthBuffer=!0}copy(e){return super.copy(e),this.hasExternalTextures=e.hasExternalTextures,this.autoAllocateDepthBuffer=e.autoAllocateDepthBuffer,this}}const gW=new pe,yW=new pe;class XIe extends Sh{constructor(e){super(),this.enabled=!1,this.isPresenting=!1,this.cameraAutoUpdate=!0,this._renderer=e,this._cameraL=new Ns,this._cameraL.viewport=new In,this._cameraR=new Ns,this._cameraR.viewport=new In,this._cameras=[this._cameraL,this._cameraR],this._cameraXR=new _ee,this._currentDepthNear=null,this._currentDepthFar=null,this._controllers=[],this._controllerInputSources=[],this._xrRenderTarget=null,this._layers=[],this._supportsLayers=!1,this._createXRLayer=eDe.bind(this),this._gl=null,this._currentAnimationContext=null,this._currentAnimationLoop=null,this._currentPixelRatio=null,this._currentSize=new dt,this._onSessionEvent=ZIe.bind(this),this._onSessionEnd=QIe.bind(this),this._onInputSourcesChange=JIe.bind(this),this._onAnimationFrame=tDe.bind(this),this._referenceSpace=null,this._referenceSpaceType="local-floor",this._customReferenceSpace=null,this._framebufferScaleFactor=1,this._foveation=1,this._session=null,this._glBaseLayer=null,this._glBinding=null,this._glProjLayer=null,this._xrFrame=null,this._useLayers=typeof XRWebGLBinding<"u"&&"createProjectionLayer"in XRWebGLBinding.prototype}getController(e){return this._getController(e).getTargetRaySpace()}getControllerGrip(e){return this._getController(e).getGripSpace()}getHand(e){return this._getController(e).getHandSpace()}getFoveation(){if(!(this._glProjLayer===null&&this._glBaseLayer===null))return this._foveation}setFoveation(e){this._foveation=e,this._glProjLayer!==null&&(this._glProjLayer.fixedFoveation=e),this._glBaseLayer!==null&&this._glBaseLayer.fixedFoveation!==void 0&&(this._glBaseLayer.fixedFoveation=e)}getFramebufferScaleFactor(){return this._framebufferScaleFactor}setFramebufferScaleFactor(e){this._framebufferScaleFactor=e,this.isPresenting===!0&&console.warn("THREE.XRManager: Cannot change framebuffer scale while presenting.")}getReferenceSpaceType(){return this._referenceSpaceType}setReferenceSpaceType(e){this._referenceSpaceType=e,this.isPresenting===!0&&console.warn("THREE.XRManager: Cannot change reference space type while presenting.")}getReferenceSpace(){return this._customReferenceSpace||this._referenceSpace}setReferenceSpace(e){this._customReferenceSpace=e}getCamera(){return this._cameraXR}getEnvironmentBlendMode(){if(this._session!==null)return this._session.environmentBlendMode}getFrame(){return this._xrFrame}createQuadLayer(e,n,i,s,a,o,l,c=[]){const u=new S_(e,n),h=new rx(a,o,{format:Oi,type:Ri,depthTexture:new dl(a,o,c.stencil?ko:Vr,void 0,void 0,void 0,void 0,void 0,void 0,c.stencil?Do:Io),stencilBuffer:c.stencil,resolveDepthBuffer:!1,resolveStencilBuffer:!1}),d=new Aa({color:16777215,side:Ja});d.map=h.texture,d.map.offset.y=1,d.map.repeat.y=-1;const f=new li(u,d);f.position.copy(i),f.quaternion.copy(s);const p={type:"quad",width:e,height:n,translation:i,quaternion:s,pixelwidth:a,pixelheight:o,plane:f,material:d,rendercall:l,renderTarget:h};if(this._layers.push(p),this._session!==null){p.plane.material=new Aa({color:16777215,side:Ja}),p.plane.material.blending=Fg,p.plane.material.blendEquation=ua,p.plane.material.blendSrc=Uu,p.plane.material.blendDst=Uu,p.xrlayer=this._createXRLayer(p);const g=this._session.renderState.layers;g.unshift(p.xrlayer),this._session.updateRenderState({layers:g})}else h.isXRRenderTarget=!1;return f}createCylinderLayer(e,n,i,s,a,o,l,c,u=[]){const h=new w_(e,e,e*n/i,64,64,!0,Math.PI-n/2,n),d=new rx(o,l,{format:Oi,type:Ri,depthTexture:new dl(o,l,u.stencil?ko:Vr,void 0,void 0,void 0,void 0,void 0,void 0,u.stencil?Do:Io),stencilBuffer:u.stencil,resolveDepthBuffer:!1,resolveStencilBuffer:!1}),f=new Aa({color:16777215,side:Wr});f.map=d.texture,f.map.offset.y=1,f.map.repeat.y=-1;const p=new li(h,f);p.position.copy(s),p.quaternion.copy(a);const g={type:"cylinder",radius:e,centralAngle:n,aspectratio:i,translation:s,quaternion:a,pixelwidth:o,pixelheight:l,plane:p,material:f,rendercall:c,renderTarget:d};if(this._layers.push(g),this._session!==null){g.plane.material=new Aa({color:16777215,side:Wr}),g.plane.material.blending=Fg,g.plane.material.blendEquation=ua,g.plane.material.blendSrc=Uu,g.plane.material.blendDst=Uu,g.xrlayer=this._createXRLayer(g);const v=this._session.renderState.layers;v.unshift(g.xrlayer),this._session.updateRenderState({layers:v})}else d.isXRRenderTarget=!1;return p}renderLayers(){const e=new pe,n=new ac,i=this.isPresenting;this.isPresenting=!1;for(const s of this._layers){if(s.renderTarget.isXRRenderTarget=this._session!==null,s.renderTarget.hasExternalTextures=s.renderTarget.isXRRenderTarget,s.renderTarget.autoAllocateDepthBuffer=!s.renderTarget.isXRRenderTarget,s.renderTarget.isXRRenderTarget&&this._supportsLayers){s.xrlayer.transform=new XRRigidTransform(s.plane.getWorldPosition(e),s.plane.getWorldQuaternion(n));const a=this._glBinding.getSubImage(s.xrlayer,this._xrFrame);this._renderer.backend.setXRRenderTargetTextures(s.renderTarget,a.colorTexture,a.depthStencilTexture)}this._renderer.setRenderTarget(s.renderTarget),s.rendercall()}this.isPresenting=i,this._renderer.setRenderTarget(null)}getSession(){return this._session}async setSession(e){const n=this._renderer,i=n.backend;this._gl=n.getContext();const s=this._gl,a=s.getContextAttributes();if(this._session=e,e!==null){if(i.isWebGPUBackend===!0)throw new Error('THREE.XRManager: XR is currently not supported with a WebGPU backend. Use WebGL by passing "{ forceWebGL: true }" to the constructor of the renderer.');if(e.addEventListener("select",this._onSessionEvent),e.addEventListener("selectstart",this._onSessionEvent),e.addEventListener("selectend",this._onSessionEvent),e.addEventListener("squeeze",this._onSessionEvent),e.addEventListener("squeezestart",this._onSessionEvent),e.addEventListener("squeezeend",this._onSessionEvent),e.addEventListener("end",this._onSessionEnd),e.addEventListener("inputsourceschange",this._onInputSourcesChange),await i.makeXRCompatible(),this._currentPixelRatio=n.getPixelRatio(),n.getSize(this._currentSize),this._currentAnimationContext=n._animation.getContext(),this._currentAnimationLoop=n._animation.getAnimationLoop(),n._animation.stop(),this._useLayers===!0){let o=null,l=null,c=null;n.depth&&(c=n.stencil?s.DEPTH24_STENCIL8:s.DEPTH_COMPONENT24,o=n.stencil?Do:Io,l=n.stencil?ko:Vr);const u={colorFormat:s.RGBA8,depthFormat:c,scaleFactor:this._framebufferScaleFactor},h=new XRWebGLBinding(e,s),d=h.createProjectionLayer(u),f=[d];if(this._glBinding=h,this._glProjLayer=d,n.setPixelRatio(1),n.setSize(d.textureWidth,d.textureHeight,!1),this._xrRenderTarget=new rx(d.textureWidth,d.textureHeight,{format:Oi,type:Ri,colorSpace:n.outputColorSpace,depthTexture:new dl(d.textureWidth,d.textureHeight,l,void 0,void 0,void 0,void 0,void 0,void 0,o),stencilBuffer:n.stencil,samples:a.antialias?4:0,resolveDepthBuffer:d.ignoreDepthValues===!1,resolveStencilBuffer:d.ignoreDepthValues===!1}),this._xrRenderTarget.hasExternalTextures=!0,this._referenceSpace=await e.requestReferenceSpace(this.getReferenceSpaceType()),this._supportsLayers=e.enabledFeatures.includes("layers"),this._supportsLayers)for(const p of this._layers)p.plane.material=new Aa({color:16777215,side:p.type==="cylinder"?Wr:Ja}),p.plane.material.blending=Fg,p.plane.material.blendEquation=ua,p.plane.material.blendSrc=Uu,p.plane.material.blendDst=Uu,p.xrlayer=this._createXRLayer(p),f.unshift(p.xrlayer);e.updateRenderState({layers:f})}else{const o={antialias:n.samples>0,alpha:!0,depth:n.depth,stencil:n.stencil,framebufferScaleFactor:this.getFramebufferScaleFactor()},l=new XRWebGLLayer(e,s,o);this._glBaseLayer=l,e.updateRenderState({baseLayer:l}),n.setPixelRatio(1),n.setSize(l.framebufferWidth,l.framebufferHeight,!1),this._xrRenderTarget=new rx(l.framebufferWidth,l.framebufferHeight,{format:Oi,type:Ri,colorSpace:n.outputColorSpace,stencilBuffer:n.stencil,resolveDepthBuffer:l.ignoreDepthValues===!1,resolveStencilBuffer:l.ignoreDepthValues===!1})}this.setFoveation(this.getFoveation()),n._animation.setAnimationLoop(this._onAnimationFrame),n._animation.setContext(e),n._animation.start(),this.isPresenting=!0,this.dispatchEvent({type:"sessionstart"})}}updateCamera(e){const n=this._session;if(n===null)return;const i=e.near,s=e.far,a=this._cameraXR,o=this._cameraL,l=this._cameraR;a.near=l.near=o.near=i,a.far=l.far=o.far=s,(this._currentDepthNear!==a.near||this._currentDepthFar!==a.far)&&(n.updateRenderState({depthNear:a.near,depthFar:a.far}),this._currentDepthNear=a.near,this._currentDepthFar=a.far),o.layers.mask=e.layers.mask|2,l.layers.mask=e.layers.mask|4,a.layers.mask=o.layers.mask|l.layers.mask;const c=e.parent,u=a.cameras;vW(a,c);for(let h=0;h<u.length;h++)vW(u[h],c);u.length===2?KIe(a,o,l):a.projectionMatrix.copy(o.projectionMatrix),YIe(e,a,c)}_getController(e){let n=this._controllers[e];return n===void 0&&(n=new oT,this._controllers[e]=n),n}}function KIe(r,e,n){gW.setFromMatrixPosition(e.matrixWorld),yW.setFromMatrixPosition(n.matrixWorld);const i=gW.distanceTo(yW),s=e.projectionMatrix.elements,a=n.projectionMatrix.elements,o=s[14]/(s[10]-1),l=s[14]/(s[10]+1),c=(s[9]+1)/s[5],u=(s[9]-1)/s[5],h=(s[8]-1)/s[0],d=(a[8]+1)/a[0],f=o*h,p=o*d,g=i/(-h+d),v=g*-h;if(e.matrixWorld.decompose(r.position,r.quaternion,r.scale),r.translateX(v),r.translateZ(g),r.matrixWorld.compose(r.position,r.quaternion,r.scale),r.matrixWorldInverse.copy(r.matrixWorld).invert(),s[10]===-1)r.projectionMatrix.copy(e.projectionMatrix),r.projectionMatrixInverse.copy(e.projectionMatrixInverse);else{const x=o+g,_=l+g,E=f-v,S=p+(i-v),T=c*l/_*x,M=u*l/_*x;r.projectionMatrix.makePerspective(E,S,T,M,x,_),r.projectionMatrixInverse.copy(r.projectionMatrix).invert()}}function vW(r,e){e===null?r.matrixWorld.copy(r.matrix):r.matrixWorld.multiplyMatrices(e.matrixWorld,r.matrix),r.matrixWorldInverse.copy(r.matrixWorld).invert()}function YIe(r,e,n){n===null?r.matrix.copy(e.matrixWorld):(r.matrix.copy(n.matrixWorld),r.matrix.invert(),r.matrix.multiply(e.matrixWorld)),r.matrix.decompose(r.position,r.quaternion,r.scale),r.updateMatrixWorld(!0),r.projectionMatrix.copy(e.projectionMatrix),r.projectionMatrixInverse.copy(e.projectionMatrixInverse),r.isPerspectiveCamera&&(r.fov=Tp*2*Math.atan(1/r.projectionMatrix.elements[5]),r.zoom=1)}function ZIe(r){const e=this._controllerInputSources.indexOf(r.inputSource);if(e===-1)return;const n=this._controllers[e];if(n!==void 0){const i=this.getReferenceSpace();n.update(r.inputSource,r.frame,i),n.dispatchEvent({type:r.type,data:r.inputSource})}}function QIe(){const r=this._session,e=this._renderer;r.removeEventListener("select",this._onSessionEvent),r.removeEventListener("selectstart",this._onSessionEvent),r.removeEventListener("selectend",this._onSessionEvent),r.removeEventListener("squeeze",this._onSessionEvent),r.removeEventListener("squeezestart",this._onSessionEvent),r.removeEventListener("squeezeend",this._onSessionEvent),r.removeEventListener("end",this._onSessionEnd),r.removeEventListener("inputsourceschange",this._onInputSourcesChange);for(let n=0;n<this._controllers.length;n++){const i=this._controllerInputSources[n];i!==null&&(this._controllerInputSources[n]=null,this._controllers[n].disconnect(i))}if(this._currentDepthNear=null,this._currentDepthFar=null,e.backend.setXRTarget(null),e.setOutputRenderTarget(null),e.setRenderTarget(null),this._session=null,this._xrRenderTarget=null,this._supportsLayers===!0)for(const n of this._layers)n.renderTarget=new rx(n.pixelwidth,n.pixelheight,{format:Oi,type:Ri,depthTexture:new dl(n.pixelwidth,n.pixelheight,n.stencilBuffer?ko:Vr,void 0,void 0,void 0,void 0,void 0,void 0,n.stencilBuffer?Do:Io),stencilBuffer:n.stencilBuffer,resolveDepthBuffer:!1,resolveStencilBuffer:!1}),n.renderTarget.isXRRenderTarget=!1,n.plane.material=n.material,n.material.map=n.renderTarget.texture,delete n.xrlayer;this.isPresenting=!1,e._animation.stop(),e._animation.setAnimationLoop(this._currentAnimationLoop),e._animation.setContext(this._currentAnimationContext),e._animation.start(),e.setPixelRatio(this._currentPixelRatio),e.setSize(this._currentSize.width,this._currentSize.height,!1),this.dispatchEvent({type:"sessionend"})}function JIe(r){const e=this._controllers,n=this._controllerInputSources;for(let i=0;i<r.removed.length;i++){const s=r.removed[i],a=n.indexOf(s);a>=0&&(n[a]=null,e[a].disconnect(s))}for(let i=0;i<r.added.length;i++){const s=r.added[i];let a=n.indexOf(s);if(a===-1){for(let l=0;l<e.length;l++)if(l>=n.length){n.push(s),a=l;break}else if(n[l]===null){n[l]=s,a=l;break}if(a===-1)break}const o=e[a];o&&o.connect(s)}}function eDe(r){return r.type==="quad"?this._glBinding.createQuadLayer({transform:new XRRigidTransform(r.translation,r.quaternion),depthFormat:this._gl.DEPTH_COMPONENT,width:r.width/2,height:r.height/2,space:this._referenceSpace,viewPixelWidth:r.pixelwidth,viewPixelHeight:r.pixelheight}):this._glBinding.createCylinderLayer({transform:new XRRigidTransform(r.translation,r.quaternion),depthFormat:this._gl.DEPTH_COMPONENT,radius:r.radius,centralAngle:r.centralAngle,aspectRatio:r.aspectRatio,space:this._referenceSpace,viewPixelWidth:r.pixelwidth,viewPixelHeight:r.pixelheight})}function tDe(r,e){if(e===void 0)return;const n=this._cameraXR,i=this._renderer,s=i.backend,a=this._glBaseLayer,o=this.getReferenceSpace(),l=e.getViewerPose(o);if(this._xrFrame=e,l!==null){const c=l.views;this._glBaseLayer!==null&&s.setXRTarget(a.framebuffer);let u=!1;c.length!==n.cameras.length&&(n.cameras.length=0,u=!0);for(let h=0;h<c.length;h++){const d=c[h];let f;if(this._useLayers===!0){const g=this._glBinding.getViewSubImage(this._glProjLayer,d);f=g.viewport,h===0&&s.setXRRenderTargetTextures(this._xrRenderTarget,g.colorTexture,this._glProjLayer.ignoreDepthValues?void 0:g.depthStencilTexture)}else f=a.getViewport(d);let p=this._cameras[h];p===void 0&&(p=new Ns,p.layers.enable(h),p.viewport=new In,this._cameras[h]=p),p.matrix.fromArray(d.transform.matrix),p.matrix.decompose(p.position,p.quaternion,p.scale),p.projectionMatrix.fromArray(d.projectionMatrix),p.projectionMatrixInverse.copy(p.projectionMatrix).invert(),p.viewport.set(f.x,f.y,f.width,f.height),h===0&&(n.matrix.copy(p.matrix),n.matrix.decompose(n.position,n.quaternion,n.scale)),u===!0&&n.cameras.push(p)}i.setOutputRenderTarget(this._xrRenderTarget)}for(let c=0;c<this._controllers.length;c++){const u=this._controllerInputSources[c],h=this._controllers[c];u!==null&&h!==void 0&&h.update(u,e,o)}this._currentAnimationLoop&&this._currentAnimationLoop(r,e),e.detectedPlanes&&this.dispatchEvent({type:"planesdetected",data:e}),this._xrFrame=null}const xW=new AM,ES=new dt,SR=new In,TR=new CM,MS=new br,hd=new In;class nDe{constructor(e,n={}){this.isRenderer=!0;const{logarithmicDepthBuffer:i=!1,alpha:s=!0,depth:a=!0,stencil:o=!1,antialias:l=!1,samples:c=0,getFallback:u=null,colorBufferType:h=da}=n;this.domElement=e.getDomElement(),this.backend=e,this.samples=c||l===!0?4:0,this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.alpha=s,this.logarithmicDepthBuffer=i,this.outputColorSpace=dn,this.toneMapping=to,this.toneMappingExposure=1,this.sortObjects=!0,this.depth=a,this.stencil=o,this.info=new VOe,this.nodes={modelViewMatrix:null,modelNormalViewMatrix:null},this.library=new Zre,this.lighting=new qIe,this._getFallback=u,this._pixelRatio=1,this._width=this.domElement.width,this._height=this.domElement.height,this._viewport=new In(0,0,this._width,this._height),this._scissor=new In(0,0,this._width,this._height),this._scissorTest=!1,this._attributes=null,this._geometries=null,this._nodes=null,this._animation=null,this._bindings=null,this._objects=null,this._pipelines=null,this._bundles=null,this._renderLists=null,this._renderContexts=null,this._textures=null,this._background=null,this._quad=new Fre(new xs),this._quad.material.name="Renderer_output",this._currentRenderContext=null,this._opaqueSort=null,this._transparentSort=null,this._frameBufferTarget=null;const d=this.alpha===!0?0:1;this._clearColor=new $U(0,0,0,d),this._clearDepth=1,this._clearStencil=0,this._renderTarget=null,this._activeCubeFace=0,this._activeMipmapLevel=0,this._outputRenderTarget=null,this._mrt=null,this._renderObjectFunction=null,this._currentRenderObjectFunction=null,this._currentRenderBundle=null,this._handleObjectFunction=this._renderObjectDirect,this._isDeviceLost=!1,this.onDeviceLost=this._onDeviceLost,this._colorBufferType=h,this._initialized=!1,this._initPromise=null,this._compilationPromises=null,this.transparent=!0,this.opaque=!0,this.shadowMap={enabled:!1,type:sj},this.xr=new XIe(this),this.debug={checkShaderErrors:!0,onShaderError:null,getShaderAsync:async(f,p,g)=>{await this.compileAsync(f,p);const v=this._renderLists.get(f,p),x=this._renderContexts.get(f,p,this._renderTarget),_=f.overrideMaterial||g.material,E=this._objects.get(g,_,f,p,v.lightsNode,x,x.clippingContext),{fragmentShader:S,vertexShader:T}=E.getNodeBuilderState();return{fragmentShader:S,vertexShader:T}}}}async init(){if(this._initialized)throw new Error("Renderer: Backend has already been initialized.");return this._initPromise!==null?this._initPromise:(this._initPromise=new Promise(async(e,n)=>{let i=this.backend;try{await i.init(this)}catch(s){if(this._getFallback!==null)try{this.backend=i=this._getFallback(s),await i.init(this)}catch(a){n(a);return}else{n(s);return}}this._nodes=new GIe(this,i),this._animation=new DOe(this._nodes,this.info),this._attributes=new $Oe(i),this._background=new oIe(this,this._nodes),this._geometries=new GOe(this._attributes,this.info),this._textures=new ske(this,i,this.info),this._pipelines=new XOe(i,this._nodes),this._bindings=new KOe(i,this._nodes,this._textures,this._attributes,this._pipelines,this.info),this._objects=new jOe(this,this._nodes,this._geometries,this._pipelines,this._bindings,this.info),this._renderLists=new QOe(this.lighting),this._bundles=new HIe,this._renderContexts=new rke,this._animation.start(),this._initialized=!0,e(this)}),this._initPromise)}get coordinateSystem(){return this.backend.coordinateSystem}async compileAsync(e,n,i=null){if(this._isDeviceLost===!0)return;this._initialized===!1&&await this.init();const s=this._nodes.nodeFrame,a=s.renderId,o=this._currentRenderContext,l=this._currentRenderObjectFunction,c=this._compilationPromises,u=e.isScene===!0?e:xW;i===null&&(i=e);const h=this._renderTarget,d=this._renderContexts.get(i,n,h),f=this._activeMipmapLevel,p=[];this._currentRenderContext=d,this._currentRenderObjectFunction=this.renderObject,this._handleObjectFunction=this._createObjectPipeline,this._compilationPromises=p,s.renderId++,s.update(),d.depth=this.depth,d.stencil=this.stencil,d.clippingContext||(d.clippingContext=new cE),d.clippingContext.updateGlobal(u,n),u.onBeforeRender(this,e,n,h);const g=this._renderLists.get(e,n);if(g.begin(),this._projectObject(e,n,0,g,d.clippingContext),i!==e&&i.traverseVisible(function(S){S.isLight&&S.layers.test(n.layers)&&g.pushLight(S)}),g.finish(),h!==null){this._textures.updateRenderTarget(h,f);const S=this._textures.get(h);d.textures=S.textures,d.depthTexture=S.depthTexture}else d.textures=null,d.depthTexture=null;this._background.update(u,g,d);const v=g.opaque,x=g.transparent,_=g.transparentDoublePass,E=g.lightsNode;this.opaque===!0&&v.length>0&&this._renderObjects(v,n,u,E),this.transparent===!0&&x.length>0&&this._renderTransparents(x,_,n,u,E),s.renderId=a,this._currentRenderContext=o,this._currentRenderObjectFunction=l,this._compilationPromises=c,this._handleObjectFunction=this._renderObjectDirect,await Promise.all(p)}async renderAsync(e,n){this._initialized===!1&&await this.init(),this._renderScene(e,n)}async waitForGPU(){await this.backend.waitForGPU()}setMRT(e){return this._mrt=e,this}getMRT(){return this._mrt}getColorBufferType(){return this._colorBufferType}_onDeviceLost(e){let n=`THREE.WebGPURenderer: ${e.api} Device Lost:

Message: ${e.message}`;e.reason&&(n+=`
Reason: ${e.reason}`),console.error(n),this._isDeviceLost=!0}_renderBundle(e,n,i){const{bundleGroup:s,camera:a,renderList:o}=e,l=this._currentRenderContext,c=this._bundles.get(s,a),u=this.backend.get(c);u.renderContexts===void 0&&(u.renderContexts=new Set);const h=s.version!==u.version,d=u.renderContexts.has(l)===!1||h;if(u.renderContexts.add(l),d){this.backend.beginBundle(l),(u.renderObjects===void 0||h)&&(u.renderObjects=[]),this._currentRenderBundle=c;const{transparentDoublePass:f,transparent:p,opaque:g}=o;this.opaque===!0&&g.length>0&&this._renderObjects(g,a,n,i),this.transparent===!0&&p.length>0&&this._renderTransparents(p,f,a,n,i),this._currentRenderBundle=null,this.backend.finishBundle(l,c),u.version=s.version}else{const{renderObjects:f}=u;for(let p=0,g=f.length;p<g;p++){const v=f[p];this._nodes.needsRefresh(v)&&(this._nodes.updateBefore(v),this._nodes.updateForRender(v),this._bindings.updateForRender(v),this._nodes.updateAfter(v))}}this.backend.addBundle(l,c)}render(e,n){if(this._initialized===!1)return console.warn("THREE.Renderer: .render() called before the backend is initialized. Try using .renderAsync() instead."),this.renderAsync(e,n);this._renderScene(e,n)}_getFrameBufferTarget(){const{currentToneMapping:e,currentColorSpace:n}=this;if(e!==to===!1&&n!==Fc===!1)return null;const{width:a,height:o}=this.getDrawingBufferSize(ES),{depth:l,stencil:c}=this;let u=this._frameBufferTarget;return u===null&&(u=new Fp(a,o,{depthBuffer:l,stencilBuffer:c,type:this._colorBufferType,format:Oi,colorSpace:Fc,generateMipmaps:!1,minFilter:ds,magFilter:ds,samples:this.samples}),u.isPostProcessingRenderTarget=!0,this._frameBufferTarget=u),u.depthBuffer=l,u.stencilBuffer=c,u.setSize(a,o),u.viewport.copy(this._viewport),u.scissor.copy(this._scissor),u.viewport.multiplyScalar(this._pixelRatio),u.scissor.multiplyScalar(this._pixelRatio),u.scissorTest=this._scissorTest,u}_renderScene(e,n,i=!0){if(this._isDeviceLost===!0)return;const s=i?this._getFrameBufferTarget():null,a=this._nodes.nodeFrame,o=a.renderId,l=this._currentRenderContext,c=this._currentRenderObjectFunction,u=e.isScene===!0?e:xW,h=this._renderTarget||this._outputRenderTarget,d=this._activeCubeFace,f=this._activeMipmapLevel;let p;s!==null?(p=s,this.setRenderTarget(p)):p=h;const g=this._renderContexts.get(e,n,p);this._currentRenderContext=g,this._currentRenderObjectFunction=this._renderObjectFunction||this.renderObject,this.info.calls++,this.info.render.calls++,this.info.render.frameCalls++,a.renderId=this.info.calls;const v=this.coordinateSystem,x=this.xr;if(n.coordinateSystem!==v&&x.isPresenting===!1&&(n.coordinateSystem=v,n.updateProjectionMatrix(),n.isArrayCamera))for(const F of n.cameras)F.coordinateSystem=v,F.updateProjectionMatrix();e.matrixWorldAutoUpdate===!0&&e.updateMatrixWorld(),n.parent===null&&n.matrixWorldAutoUpdate===!0&&n.updateMatrixWorld(),x.enabled===!0&&x.isPresenting===!0&&(x.cameraAutoUpdate===!0&&x.updateCamera(n),n=x.getCamera());let _=this._viewport,E=this._scissor,S=this._pixelRatio;p!==null&&(_=p.viewport,E=p.scissor,S=1),this.getDrawingBufferSize(ES),SR.set(0,0,ES.width,ES.height);const T=_.minDepth===void 0?0:_.minDepth,M=_.maxDepth===void 0?1:_.maxDepth;g.viewportValue.copy(_).multiplyScalar(S).floor(),g.viewportValue.width>>=f,g.viewportValue.height>>=f,g.viewportValue.minDepth=T,g.viewportValue.maxDepth=M,g.viewport=g.viewportValue.equals(SR)===!1,g.scissorValue.copy(E).multiplyScalar(S).floor(),g.scissor=this._scissorTest&&g.scissorValue.equals(SR)===!1,g.scissorValue.width>>=f,g.scissorValue.height>>=f,g.clippingContext||(g.clippingContext=new cE),g.clippingContext.updateGlobal(u,n),u.onBeforeRender(this,e,n,p),MS.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),TR.setFromProjectionMatrix(MS,v);const C=this._renderLists.get(e,n);if(C.begin(),this._projectObject(e,n,0,C,g.clippingContext),C.finish(),this.sortObjects===!0&&C.sort(this._opaqueSort,this._transparentSort),p!==null){this._textures.updateRenderTarget(p,f);const F=this._textures.get(p);g.textures=F.textures,g.depthTexture=F.depthTexture,g.width=F.width,g.height=F.height,g.renderTarget=p,g.depth=p.depthBuffer,g.stencil=p.stencilBuffer}else g.textures=null,g.depthTexture=null,g.width=this.domElement.width,g.height=this.domElement.height,g.depth=this.depth,g.stencil=this.stencil;g.width>>=f,g.height>>=f,g.activeCubeFace=d,g.activeMipmapLevel=f,g.occlusionQueryCount=C.occlusionQueryCount,this._background.update(u,C,g),this.backend.beginRender(g);const{bundles:A,lightsNode:P,transparentDoublePass:R,transparent:O,opaque:D}=C;return A.length>0&&this._renderBundles(A,u,P),this.opaque===!0&&D.length>0&&this._renderObjects(D,n,u,P),this.transparent===!0&&O.length>0&&this._renderTransparents(O,R,n,u,P),this.backend.finishRender(g),a.renderId=o,this._currentRenderContext=l,this._currentRenderObjectFunction=c,s!==null&&(this.setRenderTarget(h,d,f),this._renderOutput(p)),u.onAfterRender(this,e,n,p),g}_renderOutput(e){const n=this._quad;this._nodes.hasOutputChange(e.texture)&&(n.material.fragmentNode=this._nodes.getOutputNode(e.texture),n.material.needsUpdate=!0);const i=this.autoClear,s=this.xr.enabled;this.autoClear=!1,this.xr.enabled=!1,this._renderScene(n,n.camera,!1),this.autoClear=i,this.xr.enabled=s}getMaxAnisotropy(){return this.backend.getMaxAnisotropy()}getActiveCubeFace(){return this._activeCubeFace}getActiveMipmapLevel(){return this._activeMipmapLevel}async setAnimationLoop(e){this._initialized===!1&&await this.init(),this._animation.setAnimationLoop(e)}async getArrayBufferAsync(e){return await this.backend.getArrayBufferAsync(e)}getContext(){return this.backend.getContext()}getPixelRatio(){return this._pixelRatio}getDrawingBufferSize(e){return e.set(this._width*this._pixelRatio,this._height*this._pixelRatio).floor()}getSize(e){return e.set(this._width,this._height)}setPixelRatio(e=1){this._pixelRatio!==e&&(this._pixelRatio=e,this.setSize(this._width,this._height,!1))}setDrawingBufferSize(e,n,i){this.xr&&this.xr.isPresenting||(this._width=e,this._height=n,this._pixelRatio=i,this.domElement.width=Math.floor(e*i),this.domElement.height=Math.floor(n*i),this.setViewport(0,0,e,n),this._initialized&&this.backend.updateSize())}setSize(e,n,i=!0){this.xr&&this.xr.isPresenting||(this._width=e,this._height=n,this.domElement.width=Math.floor(e*this._pixelRatio),this.domElement.height=Math.floor(n*this._pixelRatio),i===!0&&(this.domElement.style.width=e+"px",this.domElement.style.height=n+"px"),this.setViewport(0,0,e,n),this._initialized&&this.backend.updateSize())}setOpaqueSort(e){this._opaqueSort=e}setTransparentSort(e){this._transparentSort=e}getScissor(e){const n=this._scissor;return e.x=n.x,e.y=n.y,e.width=n.width,e.height=n.height,e}setScissor(e,n,i,s){const a=this._scissor;e.isVector4?a.copy(e):a.set(e,n,i,s)}getScissorTest(){return this._scissorTest}setScissorTest(e){this._scissorTest=e,this.backend.setScissorTest(e)}getViewport(e){return e.copy(this._viewport)}setViewport(e,n,i,s,a=0,o=1){const l=this._viewport;e.isVector4?l.copy(e):l.set(e,n,i,s),l.minDepth=a,l.maxDepth=o}getClearColor(e){return e.copy(this._clearColor)}setClearColor(e,n=1){this._clearColor.set(e),this._clearColor.a=n}getClearAlpha(){return this._clearColor.a}setClearAlpha(e){this._clearColor.a=e}getClearDepth(){return this._clearDepth}setClearDepth(e){this._clearDepth=e}getClearStencil(){return this._clearStencil}setClearStencil(e){this._clearStencil=e}isOccluded(e){const n=this._currentRenderContext;return n&&this.backend.isOccluded(n,e)}clear(e=!0,n=!0,i=!0){if(this._initialized===!1)return console.warn("THREE.Renderer: .clear() called before the backend is initialized. Try using .clearAsync() instead."),this.clearAsync(e,n,i);const s=this._renderTarget||this._getFrameBufferTarget();let a=null;if(s!==null){this._textures.updateRenderTarget(s);const o=this._textures.get(s);a=this._renderContexts.getForClear(s),a.textures=o.textures,a.depthTexture=o.depthTexture,a.width=o.width,a.height=o.height,a.renderTarget=s,a.depth=s.depthBuffer,a.stencil=s.stencilBuffer,a.clearColorValue=this.backend.getClearColor(),a.activeCubeFace=this.getActiveCubeFace(),a.activeMipmapLevel=this.getActiveMipmapLevel()}this.backend.clear(e,n,i,a),s!==null&&this._renderTarget===null&&this._renderOutput(s)}clearColor(){return this.clear(!0,!1,!1)}clearDepth(){return this.clear(!1,!0,!1)}clearStencil(){return this.clear(!1,!1,!0)}async clearAsync(e=!0,n=!0,i=!0){this._initialized===!1&&await this.init(),this.clear(e,n,i)}async clearColorAsync(){this.clearAsync(!0,!1,!1)}async clearDepthAsync(){this.clearAsync(!1,!0,!1)}async clearStencilAsync(){this.clearAsync(!1,!1,!0)}get currentToneMapping(){return this.isOutputTarget?this.toneMapping:to}get currentColorSpace(){return this.isOutputTarget?this.outputColorSpace:Fc}get isOutputTarget(){return this._renderTarget===this._outputRenderTarget||this._renderTarget===null}dispose(){this.info.dispose(),this.backend.dispose(),this._animation.dispose(),this._objects.dispose(),this._pipelines.dispose(),this._nodes.dispose(),this._bindings.dispose(),this._renderLists.dispose(),this._renderContexts.dispose(),this._textures.dispose(),this._frameBufferTarget!==null&&this._frameBufferTarget.dispose(),Object.values(this.backend.timestampQueryPool).forEach(e=>{e!==null&&e.dispose()}),this.setRenderTarget(null),this.setAnimationLoop(null)}setRenderTarget(e,n=0,i=0){this._renderTarget=e,this._activeCubeFace=n,this._activeMipmapLevel=i}getRenderTarget(){return this._renderTarget}setOutputRenderTarget(e){this._outputRenderTarget=e}getOutputRenderTarget(){return this._outputRenderTarget}setRenderObjectFunction(e){this._renderObjectFunction=e}getRenderObjectFunction(){return this._renderObjectFunction}compute(e){if(this._isDeviceLost===!0)return;if(this._initialized===!1)return console.warn("THREE.Renderer: .compute() called before the backend is initialized. Try using .computeAsync() instead."),this.computeAsync(e);const n=this._nodes.nodeFrame,i=n.renderId;this.info.calls++,this.info.compute.calls++,this.info.compute.frameCalls++,n.renderId=this.info.calls;const s=this.backend,a=this._pipelines,o=this._bindings,l=this._nodes,c=Array.isArray(e)?e:[e];if(c[0]===void 0||c[0].isComputeNode!==!0)throw new Error("THREE.Renderer: .compute() expects a ComputeNode.");s.beginCompute(e);for(const u of c){if(a.has(u)===!1){const f=()=>{u.removeEventListener("dispose",f),a.delete(u),o.delete(u),l.delete(u)};u.addEventListener("dispose",f);const p=u.onInitFunction;p!==null&&p.call(u,{renderer:this})}l.updateForCompute(u),o.updateForCompute(u);const h=o.getForCompute(u),d=a.getForCompute(u,h);s.compute(e,u,h,d)}s.finishCompute(e),n.renderId=i}async computeAsync(e){this._initialized===!1&&await this.init(),this.compute(e)}async hasFeatureAsync(e){return this._initialized===!1&&await this.init(),this.backend.hasFeature(e)}async resolveTimestampsAsync(e="render"){return this._initialized===!1&&await this.init(),this.backend.resolveTimestampsAsync(e)}hasFeature(e){return this._initialized===!1?(console.warn("THREE.Renderer: .hasFeature() called before the backend is initialized. Try using .hasFeatureAsync() instead."),!1):this.backend.hasFeature(e)}hasInitialized(){return this._initialized}async initTextureAsync(e){this._initialized===!1&&await this.init(),this._textures.updateTexture(e)}initTexture(e){this._initialized===!1&&console.warn("THREE.Renderer: .initTexture() called before the backend is initialized. Try using .initTextureAsync() instead."),this._textures.updateTexture(e)}copyFramebufferToTexture(e,n=null){if(n!==null)if(n.isVector2)n=hd.set(n.x,n.y,e.image.width,e.image.height).floor();else if(n.isVector4)n=hd.copy(n).floor();else{console.error("THREE.Renderer.copyFramebufferToTexture: Invalid rectangle.");return}else n=hd.set(0,0,e.image.width,e.image.height);let i=this._currentRenderContext,s;i!==null?s=i.renderTarget:(s=this._renderTarget||this._getFrameBufferTarget(),s!==null&&(this._textures.updateRenderTarget(s),i=this._textures.get(s))),this._textures.updateTexture(e,{renderTarget:s}),this.backend.copyFramebufferToTexture(e,i,n)}copyTextureToTexture(e,n,i=null,s=null,a=0,o=0){this._textures.updateTexture(e),this._textures.updateTexture(n),this.backend.copyTextureToTexture(e,n,i,s,a,o)}async readRenderTargetPixelsAsync(e,n,i,s,a,o=0,l=0){return this.backend.copyTextureToBuffer(e.textures[o],n,i,s,a,l)}_projectObject(e,n,i,s,a){if(e.visible===!1)return;if(e.layers.test(n.layers)){if(e.isGroup)i=e.renderOrder,e.isClippingGroup&&e.enabled&&(a=a.getGroupContext(e));else if(e.isLOD)e.autoUpdate===!0&&e.update(n);else if(e.isLight)s.pushLight(e);else if(e.isSprite){if(!e.frustumCulled||TR.intersectsSprite(e)){this.sortObjects===!0&&hd.setFromMatrixPosition(e.matrixWorld).applyMatrix4(MS);const{geometry:c,material:u}=e;u.visible&&s.push(e,c,u,i,hd.z,null,a)}}else if(e.isLineLoop)console.error("THREE.Renderer: Objects of type THREE.LineLoop are not supported. Please use THREE.Line or THREE.LineSegments.");else if((e.isMesh||e.isLine||e.isPoints)&&(!e.frustumCulled||TR.intersectsObject(e))){const{geometry:c,material:u}=e;if(this.sortObjects===!0&&(c.boundingSphere===null&&c.computeBoundingSphere(),hd.copy(c.boundingSphere.center).applyMatrix4(e.matrixWorld).applyMatrix4(MS)),Array.isArray(u)){const h=c.groups;for(let d=0,f=h.length;d<f;d++){const p=h[d],g=u[p.materialIndex];g&&g.visible&&s.push(e,c,g,i,hd.z,p,a)}}else u.visible&&s.push(e,c,u,i,hd.z,null,a)}}if(e.isBundleGroup===!0&&this.backend.beginBundle!==void 0){const c=s;s=this._renderLists.get(e,n),s.begin(),c.pushBundle({bundleGroup:e,camera:n,renderList:s}),s.finish()}const l=e.children;for(let c=0,u=l.length;c<u;c++)this._projectObject(l[c],n,i,s,a)}_renderBundles(e,n,i){for(const s of e)this._renderBundle(s,n,i)}_renderTransparents(e,n,i,s,a){if(n.length>0){for(const{material:o}of n)o.side=Wr;this._renderObjects(n,i,s,a,"backSide");for(const{material:o}of n)o.side=Ja;this._renderObjects(e,i,s,a);for(const{material:o}of n)o.side=Ea}else this._renderObjects(e,i,s,a)}_renderObjects(e,n,i,s,a=null){for(let o=0,l=e.length;o<l;o++){const{object:c,geometry:u,material:h,group:d,clippingContext:f}=e[o];this._currentRenderObjectFunction(c,i,n,u,h,d,s,f,a)}}renderObject(e,n,i,s,a,o,l,c=null,u=null){let h,d,f;if(e.onBeforeRender(this,n,i,s,a,o),a.allowOverride===!0&&n.overrideMaterial!==null){const p=n.overrideMaterial;a.positionNode&&a.positionNode.isNode&&(h=p.positionNode,p.positionNode=a.positionNode),p.alphaTest=a.alphaTest,p.alphaMap=a.alphaMap,p.transparent=a.transparent||a.transmission>0,p.isShadowPassMaterial&&(p.side=a.shadowSide===null?a.side:a.shadowSide,a.depthNode&&a.depthNode.isNode&&(f=p.depthNode,p.depthNode=a.depthNode),a.castShadowNode&&a.castShadowNode.isNode&&(d=p.colorNode,p.colorNode=a.castShadowNode)),a=p}a.transparent===!0&&a.side===Ea&&a.forceSinglePass===!1?(a.side=Wr,this._handleObjectFunction(e,a,n,i,l,o,c,"backSide"),a.side=Ja,this._handleObjectFunction(e,a,n,i,l,o,c,u),a.side=Ea):this._handleObjectFunction(e,a,n,i,l,o,c,u),h!==void 0&&(n.overrideMaterial.positionNode=h),f!==void 0&&(n.overrideMaterial.depthNode=f),d!==void 0&&(n.overrideMaterial.colorNode=d),e.onAfterRender(this,n,i,s,a,o)}_renderObjectDirect(e,n,i,s,a,o,l,c){const u=this._objects.get(e,n,i,s,a,this._currentRenderContext,l,c);u.drawRange=e.geometry.drawRange,u.group=o;const h=this._nodes.needsRefresh(u);h&&(this._nodes.updateBefore(u),this._geometries.updateForRender(u),this._nodes.updateForRender(u),this._bindings.updateForRender(u)),this._pipelines.updateForRender(u),this._currentRenderBundle!==null&&(this.backend.get(this._currentRenderBundle).renderObjects.push(u),u.bundle=this._currentRenderBundle.bundleGroup),this.backend.draw(u,this.info),h&&this._nodes.updateAfter(u)}_createObjectPipeline(e,n,i,s,a,o,l,c){const u=this._objects.get(e,n,i,s,a,this._currentRenderContext,l,c);u.drawRange=e.geometry.drawRange,u.group=o,this._nodes.updateBefore(u),this._geometries.updateForRender(u),this._nodes.updateForRender(u),this._bindings.updateForRender(u),this._pipelines.getForRender(u,this._compilationPromises),this._nodes.updateAfter(u)}get compile(){return this.compileAsync}}class HU{constructor(e=""){this.name=e,this.visibility=0}setVisibility(e){this.visibility|=e}clone(){return Object.assign(new this.constructor,this)}}function rDe(r){return r+(bd-r%bd)%bd}class Qre extends HU{constructor(e,n=null){super(e),this.isBuffer=!0,this.bytesPerElement=Float32Array.BYTES_PER_ELEMENT,this._buffer=n}get byteLength(){return rDe(this._buffer.byteLength)}get buffer(){return this._buffer}update(){return!0}}class Jre extends Qre{constructor(e,n=null){super(e,n),this.isUniformBuffer=!0}}let iDe=0;class eie extends Jre{constructor(e,n){super("UniformBuffer_"+iDe++,e?e.value:null),this.nodeUniform=e,this.groupNode=n}get buffer(){return this.nodeUniform.value}}class sDe extends Jre{constructor(e){super(e),this.isUniformsGroup=!0,this._values=null,this.uniforms=[]}addUniform(e){return this.uniforms.push(e),this}removeUniform(e){const n=this.uniforms.indexOf(e);return n!==-1&&this.uniforms.splice(n,1),this}get values(){return this._values===null&&(this._values=Array.from(this.buffer)),this._values}get buffer(){let e=this._buffer;if(e===null){const n=this.byteLength;e=new Float32Array(new ArrayBuffer(n)),this._buffer=e}return e}get byteLength(){let e=0;for(let n=0,i=this.uniforms.length;n<i;n++){const s=this.uniforms[n],{boundary:a,itemSize:o}=s,l=e%bd,c=bd-l;l!==0&&c-a<0?e+=bd-l:l%a!==0&&(e+=l%a),s.offset=e/this.bytesPerElement,e+=o*this.bytesPerElement}return Math.ceil(e/bd)*bd}update(){let e=!1;for(const n of this.uniforms)this.updateByType(n)===!0&&(e=!0);return e}updateByType(e){if(e.isNumberUniform)return this.updateNumber(e);if(e.isVector2Uniform)return this.updateVector2(e);if(e.isVector3Uniform)return this.updateVector3(e);if(e.isVector4Uniform)return this.updateVector4(e);if(e.isColorUniform)return this.updateColor(e);if(e.isMatrix3Uniform)return this.updateMatrix3(e);if(e.isMatrix4Uniform)return this.updateMatrix4(e);console.error("THREE.WebGPUUniformsGroup: Unsupported uniform type.",e)}updateNumber(e){let n=!1;const i=this.values,s=e.getValue(),a=e.offset,o=e.getType();if(i[a]!==s){const l=this._getBufferForType(o);l[a]=i[a]=s,n=!0}return n}updateVector2(e){let n=!1;const i=this.values,s=e.getValue(),a=e.offset,o=e.getType();if(i[a+0]!==s.x||i[a+1]!==s.y){const l=this._getBufferForType(o);l[a+0]=i[a+0]=s.x,l[a+1]=i[a+1]=s.y,n=!0}return n}updateVector3(e){let n=!1;const i=this.values,s=e.getValue(),a=e.offset,o=e.getType();if(i[a+0]!==s.x||i[a+1]!==s.y||i[a+2]!==s.z){const l=this._getBufferForType(o);l[a+0]=i[a+0]=s.x,l[a+1]=i[a+1]=s.y,l[a+2]=i[a+2]=s.z,n=!0}return n}updateVector4(e){let n=!1;const i=this.values,s=e.getValue(),a=e.offset,o=e.getType();if(i[a+0]!==s.x||i[a+1]!==s.y||i[a+2]!==s.z||i[a+4]!==s.w){const l=this._getBufferForType(o);l[a+0]=i[a+0]=s.x,l[a+1]=i[a+1]=s.y,l[a+2]=i[a+2]=s.z,l[a+3]=i[a+3]=s.w,n=!0}return n}updateColor(e){let n=!1;const i=this.values,s=e.getValue(),a=e.offset;if(i[a+0]!==s.r||i[a+1]!==s.g||i[a+2]!==s.b){const o=this.buffer;o[a+0]=i[a+0]=s.r,o[a+1]=i[a+1]=s.g,o[a+2]=i[a+2]=s.b,n=!0}return n}updateMatrix3(e){let n=!1;const i=this.values,s=e.getValue().elements,a=e.offset;if(i[a+0]!==s[0]||i[a+1]!==s[1]||i[a+2]!==s[2]||i[a+4]!==s[3]||i[a+5]!==s[4]||i[a+6]!==s[5]||i[a+8]!==s[6]||i[a+9]!==s[7]||i[a+10]!==s[8]){const o=this.buffer;o[a+0]=i[a+0]=s[0],o[a+1]=i[a+1]=s[1],o[a+2]=i[a+2]=s[2],o[a+4]=i[a+4]=s[3],o[a+5]=i[a+5]=s[4],o[a+6]=i[a+6]=s[5],o[a+8]=i[a+8]=s[6],o[a+9]=i[a+9]=s[7],o[a+10]=i[a+10]=s[8],n=!0}return n}updateMatrix4(e){let n=!1;const i=this.values,s=e.getValue().elements,a=e.offset;return oDe(i,s,a)===!1&&(this.buffer.set(s,a),aDe(i,s,a),n=!0),n}_getBufferForType(e){return e==="int"||e==="ivec2"||e==="ivec3"||e==="ivec4"?new Int32Array(this.buffer.buffer):e==="uint"||e==="uvec2"||e==="uvec3"||e==="uvec4"?new Uint32Array(this.buffer.buffer):this.buffer}}function aDe(r,e,n){for(let i=0,s=e.length;i<s;i++)r[n+i]=e[i]}function oDe(r,e,n){for(let i=0,s=e.length;i<s;i++)if(r[n+i]!==e[i])return!1;return!0}let lDe=0;class tie extends sDe{constructor(e,n){super(e),this.id=lDe++,this.groupNode=n,this.isNodeUniformsGroup=!0}}let cDe=0;class uDe extends HU{constructor(e,n){super(e),this.id=cDe++,this.texture=n,this.version=n?n.version:0,this.store=!1,this.generation=null,this.isSampledTexture=!0}needsBindingsUpdate(e){const{texture:n}=this;return e!==this.generation?(this.generation=e,!0):n.isVideoTexture}update(){const{texture:e,version:n}=this;return n!==e.version?(this.version=e.version,!0):!1}}class cA extends uDe{constructor(e,n,i,s=null){super(e,n?n.value:null),this.textureNode=n,this.groupNode=i,this.access=s}needsBindingsUpdate(e){return this.textureNode.value!==this.texture||super.needsBindingsUpdate(e)}update(){const{textureNode:e}=this;return this.texture!==e.value?(this.texture=e.value,!0):super.update()}}class nie extends cA{constructor(e,n,i,s=null){super(e,n,i,s),this.isSampledCubeTexture=!0}}class rie extends cA{constructor(e,n,i,s=null){super(e,n,i,s),this.isSampledTexture3D=!0}}const hDe={textureDimensions:"textureSize",equals:"equal"},dDe={low:"lowp",medium:"mediump",high:"highp"},bW={swizzleAssign:!0,storageBuffer:!1},_W=`
precision highp float;
precision highp int;
precision highp sampler2D;
precision highp sampler3D;
precision highp samplerCube;
precision highp sampler2DArray;

precision highp usampler2D;
precision highp usampler3D;
precision highp usamplerCube;
precision highp usampler2DArray;

precision highp isampler2D;
precision highp isampler3D;
precision highp isamplerCube;
precision highp isampler2DArray;

precision lowp sampler2DShadow;
`;class fDe extends Xre{constructor(e,n){super(e,n,new $Ie),this.uniformGroups={},this.transforms=[],this.extensions={},this.builtins={vertex:[],fragment:[],compute:[]}}needsToWorkingColorSpace(e){return e.isVideoTexture===!0&&e.colorSpace!==Po}getMethod(e){return hDe[e]||e}getOutputStructName(){return""}buildFunctionCode(e){const n=e.layout,i=this.flowShaderNode(e),s=[];for(const o of n.inputs)s.push(this.getType(o.type)+" "+o.name);return`${this.getType(n.type)} ${n.name}( ${s.join(", ")} ) {

	${i.vars}

${i.code}
	return ${i.result};

}`}setupPBO(e){const n=e.value;if(n.pbo===void 0){const i=n.array,s=n.count*n.itemSize,{itemSize:a}=n,o=n.array.constructor.name.toLowerCase().includes("int");let l=o?r0:x_;a===2?l=o?i0:Sp:a===3?l=o?Rme:v_:a===4&&(l=o?s0:Oi);const c={Float32Array:zi,Uint8Array:Ri,Uint16Array:tc,Uint32Array:Vr,Int8Array:cp,Int16Array:up,Int32Array:Cs,Uint8ClampedArray:Ri},u=Math.pow(2,Math.ceil(Math.log2(Math.sqrt(s/a))));let h=Math.ceil(s/a/u);u*h*a<s&&h++;const d=u*h*a,f=new i.constructor(d);f.set(i,0),n.array=f;const p=new Dge(n.array,u,h,l,c[n.array.constructor.name]||zi);p.needsUpdate=!0,p.isPBOTexture=!0;const g=new j_(p,null,null);g.setPrecision("high"),n.pboNode=g,n.pbo=g.value,this.getUniformFromNode(n.pboNode,"texture",this.shaderStage,this.context.label)}}getPropertyName(e,n=this.shaderStage){return e.isNodeUniform&&e.node.isTextureNode!==!0&&e.node.isBufferNode!==!0?n.charAt(0)+"_"+e.name:super.getPropertyName(e,n)}generatePBO(e){const{node:n,indexNode:i}=e,s=n.value;if(this.renderer.backend.has(s)){const h=this.renderer.backend.get(s);h.pbo=s.pbo}const a=this.getUniformFromNode(s.pboNode,"texture",this.shaderStage,this.context.label),o=this.getPropertyName(a);this.increaseUsage(i);const l=i.build(this,"uint"),c=this.getDataFromNode(e);let u=c.propertyName;if(u===void 0){const h=this.getVarFromNode(e);u=this.getPropertyName(h);const d=this.getDataFromNode(n);let f=d.propertySizeName;f===void 0&&(f=u+"Size",this.getVarFromNode(n,f,"uint"),this.addLineFlowCode(`${f} = uint( textureSize( ${o}, 0 ).x )`,e),d.propertySizeName=f);const{itemSize:p}=s,g="."+d0.join("").slice(0,p),v=`ivec2(${l} % ${f}, ${l} / ${f})`,x=this.generateTextureLoad(null,o,v,null,"0");let _="vec4";s.pbo.type===Vr?_="uvec4":s.pbo.type===Cs&&(_="ivec4"),this.addLineFlowCode(`${u} = ${_}(${x})${g}`,e),c.propertyName=u}return u}generateTextureLoad(e,n,i,s,a="0"){return s?`texelFetch( ${n}, ivec3( ${i}, ${s} ), ${a} )`:`texelFetch( ${n}, ${i}, ${a} )`}generateTexture(e,n,i,s){return e.isDepthTexture?`texture( ${n}, ${i} ).x`:(s&&(i=`vec3( ${i}, ${s} )`),`texture( ${n}, ${i} )`)}generateTextureLevel(e,n,i,s){return`textureLod( ${n}, ${i}, ${s} )`}generateTextureBias(e,n,i,s){return`texture( ${n}, ${i}, ${s} )`}generateTextureGrad(e,n,i,s){return`textureGrad( ${n}, ${i}, ${s[0]}, ${s[1]} )`}generateTextureCompare(e,n,i,s,a,o=this.shaderStage){if(o==="fragment")return`texture( ${n}, vec3( ${i}, ${s} ) )`;console.error(`WebGPURenderer: THREE.DepthTexture.compareFunction() does not support ${o} shader.`)}getVars(e){const n=[],i=this.vars[e];if(i!==void 0)for(const s of i)n.push(`${this.getVar(s.type,s.name,s.count)};`);return n.join(`
	`)}getUniforms(e){const n=this.uniforms[e],i=[],s={};for(const o of n){let l=null,c=!1;if(o.type==="texture"||o.type==="texture3D"){const h=o.node.value;let d="";(h.isDataTexture===!0||h.isData3DTexture===!0)&&(h.type===Vr?d="u":h.type===Cs&&(d="i")),o.type==="texture3D"?l=`${d}sampler3D ${o.name};`:h.compareFunction?l=`sampler2DShadow ${o.name};`:h.isDataArrayTexture===!0||h.isCompressedArrayTexture===!0?l=`${d}sampler2DArray ${o.name};`:l=`${d}sampler2D ${o.name};`}else if(o.type==="cubeTexture")l=`samplerCube ${o.name};`;else if(o.type==="buffer"){const h=o.node,d=this.getType(h.bufferType),f=h.bufferCount,p=f>0?f:"";l=`${h.name} {
	${d} ${o.name}[${p}];
};
`}else l=`${this.getVectorType(o.type)} ${this.getPropertyName(o,e)};`,c=!0;const u=o.node.precision;if(u!==null&&(l=dDe[u]+" "+l),c){l="	"+l;const h=o.groupNode.name;(s[h]||(s[h]=[])).push(l)}else l="uniform "+l,i.push(l)}let a="";for(const o in s){const l=s[o];a+=this._getGLSLUniformStruct(e+"_"+o,l.join(`
`))+`
`}return a+=i.join(`
`),a}getTypeFromAttribute(e){let n=super.getTypeFromAttribute(e);if(/^[iu]/.test(n)&&e.gpuType!==Cs){let i=e;e.isInterleavedBufferAttribute&&(i=e.data);const s=i.array;s instanceof Uint32Array||s instanceof Int32Array||(n=n.slice(1))}return n}getAttributes(e){let n="";if(e==="vertex"||e==="compute"){const i=this.getAttributesArray();let s=0;for(const a of i)n+=`layout( location = ${s++} ) in ${a.type} ${a.name};
`}return n}getStructMembers(e){const n=[];for(const i of e.members)n.push(`	${i.type} ${i.name};`);return n.join(`
`)}getStructs(e){const n=[],i=this.structs[e],s=[];for(const a of i)if(a.output)for(const o of a.members)s.push(`layout( location = ${o.index} ) out ${o.type} ${o.name};`);else{let o="struct "+a.name+` {
`;o+=this.getStructMembers(a),o+=`
};
`,n.push(o)}return s.length===0&&s.push("layout( location = 0 ) out vec4 fragColor;"),`
`+s.join(`
`)+`

`+n.join(`
`)}getVaryings(e){let n="";const i=this.varyings;if(e==="vertex"||e==="compute")for(const s of i){e==="compute"&&(s.needsInterpolation=!0);const a=this.getType(s.type);if(s.needsInterpolation){const o=a.includes("int")||a.includes("uv")||a.includes("iv")?"flat ":"";n+=`${o}out ${a} ${s.name};
`}else n+=`${a} ${s.name};
`}else if(e==="fragment"){for(const s of i)if(s.needsInterpolation){const a=this.getType(s.type),o=a.includes("int")||a.includes("uv")||a.includes("iv")?"flat ":"";n+=`${o}in ${a} ${s.name};
`}}for(const s of this.builtins[e])n+=`${s};
`;return n}getVertexIndex(){return"uint( gl_VertexID )"}getInstanceIndex(){return"uint( gl_InstanceID )"}getInvocationLocalIndex(){return`uint( gl_InstanceID ) % ${this.object.workgroupSize.reduce((i,s)=>i*s,1)}u`}getDrawIndex(){return this.renderer.backend.extensions.has("WEBGL_multi_draw")?"uint( gl_DrawID )":null}getFrontFacing(){return"gl_FrontFacing"}getFragCoord(){return"gl_FragCoord.xy"}getFragDepth(){return"gl_FragDepth"}enableExtension(e,n,i=this.shaderStage){const s=this.extensions[i]||(this.extensions[i]=new Map);s.has(e)===!1&&s.set(e,{name:e,behavior:n})}getExtensions(e){const n=[];if(e==="vertex"){const s=this.renderer.backend.extensions;this.object.isBatchedMesh&&s.has("WEBGL_multi_draw")&&this.enableExtension("GL_ANGLE_multi_draw","require",e)}const i=this.extensions[e];if(i!==void 0)for(const{name:s,behavior:a}of i.values())n.push(`#extension ${s} : ${a}`);return n.join(`
`)}getClipDistance(){return"gl_ClipDistance"}isAvailable(e){let n=bW[e];if(n===void 0){let i;switch(n=!1,e){case"float32Filterable":i="OES_texture_float_linear";break;case"clipDistance":i="WEBGL_clip_cull_distance";break}if(i!==void 0){const s=this.renderer.backend.extensions;s.has(i)&&(s.get(i),n=!0)}bW[e]=n}return n}isFlipY(){return!0}enableHardwareClipping(e){this.enableExtension("GL_ANGLE_clip_cull_distance","require"),this.builtins.vertex.push(`out float gl_ClipDistance[ ${e} ]`)}registerTransform(e,n){this.transforms.push({varyingName:e,attributeNode:n})}getTransforms(){const e=this.transforms;let n="";for(let i=0;i<e.length;i++){const s=e[i],a=this.getPropertyName(s.attributeNode);a&&(n+=`${s.varyingName} = ${a};
	`)}return n}_getGLSLUniformStruct(e,n){return`
layout( std140 ) uniform ${e} {
${n}
};`}_getGLSLVertexCode(e){return`#version 300 es

${this.getSignature()}

// extensions
${e.extensions}

// precision
${_W}

// uniforms
${e.uniforms}

// varyings
${e.varyings}

// attributes
${e.attributes}

// codes
${e.codes}

void main() {

	// vars
	${e.vars}

	// transforms
	${e.transforms}

	// flow
	${e.flow}

	gl_PointSize = 1.0;

}
`}_getGLSLFragmentCode(e){return`#version 300 es

${this.getSignature()}

// precision
${_W}

// uniforms
${e.uniforms}

// varyings
${e.varyings}

// codes
${e.codes}

// structs
${e.structs}

void main() {

	// vars
	${e.vars}

	// flow
	${e.flow}

}
`}buildCode(){const e=this.material!==null?{fragment:{},vertex:{}}:{compute:{}};this.sortBindingGroups();for(const n in e){let i=`// code

`;i+=this.flowCode[n];const s=this.flowNodes[n],a=s[s.length-1];for(const l of s){const c=this.getFlowData(l),u=l.name;u&&(i.length>0&&(i+=`
`),i+=`	// flow -> ${u}
	`),i+=`${c.code}
	`,l===a&&n!=="compute"&&(i+=`// result
	`,n==="vertex"?(i+="gl_Position = ",i+=`${c.result};`):n==="fragment"&&(l.outputNode.isOutputStructNode||(i+="fragColor = ",i+=`${c.result};`)))}const o=e[n];o.extensions=this.getExtensions(n),o.uniforms=this.getUniforms(n),o.attributes=this.getAttributes(n),o.varyings=this.getVaryings(n),o.vars=this.getVars(n),o.structs=this.getStructs(n),o.codes=this.getCodes(n),o.transforms=this.getTransforms(n),o.flow=i}this.material!==null?(this.vertexShader=this._getGLSLVertexCode(e.vertex),this.fragmentShader=this._getGLSLFragmentCode(e.fragment)):this.computeShader=this._getGLSLVertexCode(e.compute)}getUniformFromNode(e,n,i,s=null){const a=super.getUniformFromNode(e,n,i,s),o=this.getDataFromNode(e,i,this.globalCache);let l=o.uniformGPU;if(l===void 0){const c=e.groupNode,u=c.name,h=this.getBindGroupArray(u,i);if(n==="texture")l=new cA(a.name,a.node,c),h.push(l);else if(n==="cubeTexture")l=new nie(a.name,a.node,c),h.push(l);else if(n==="texture3D")l=new rie(a.name,a.node,c),h.push(l);else if(n==="buffer"){e.name=`NodeBuffer_${e.id}`,a.name=`buffer${e.id}`;const d=new eie(e,c);d.name=e.name,h.push(d),l=d}else{const d=this.uniformGroups[i]||(this.uniformGroups[i]={});let f=d[u];f===void 0&&(f=new tie(i+"_"+u,c),d[u]=f,h.push(f)),l=this.getNodeUniform(a,n),f.addUniform(l)}o.uniformGPU=l}return a}}let ER=null,og=null;class iie{constructor(e={}){this.parameters=Object.assign({},e),this.data=new WeakMap,this.renderer=null,this.domElement=null,this.timestampQueryPool={render:null,compute:null},this.trackTimestamp=e.trackTimestamp===!0}async init(e){this.renderer=e}get coordinateSystem(){}beginRender(){}finishRender(){}beginCompute(){}finishCompute(){}draw(){}compute(){}createProgram(){}destroyProgram(){}createBindings(){}updateBindings(){}updateBinding(){}createRenderPipeline(){}createComputePipeline(){}needsRenderUpdate(){}getRenderCacheKey(){}createNodeBuilder(){}createSampler(){}destroySampler(){}createDefaultTexture(){}createTexture(){}updateTexture(){}generateMipmaps(){}destroyTexture(){}async copyTextureToBuffer(){}copyTextureToTexture(){}copyFramebufferToTexture(){}createAttribute(){}createIndexAttribute(){}createStorageAttribute(){}updateAttribute(){}destroyAttribute(){}getContext(){}updateSize(){}updateViewport(){}isOccluded(){}async resolveTimestampsAsync(e="render"){if(!this.trackTimestamp){ic("WebGPURenderer: Timestamp tracking is disabled.");return}const n=this.timestampQueryPool[e];if(!n){ic(`WebGPURenderer: No timestamp query pool for type '${e}' found.`);return}const i=await n.resolveQueriesAsync();return this.renderer.info[e].timestamp=i,i}async waitForGPU(){}async getArrayBufferAsync(){}async hasFeatureAsync(){}hasFeature(){}getMaxAnisotropy(){}getDrawingBufferSize(){return ER=ER||new dt,this.renderer.getDrawingBufferSize(ER)}setScissorTest(){}getClearColor(){const e=this.renderer;return og=og||new $U,e.getClearColor(og),og.getRGB(og),og}getDomElement(){let e=this.domElement;return e===null&&(e=this.parameters.canvas!==void 0?this.parameters.canvas:iee(),"setAttribute"in e&&e.setAttribute("data-engine",`three.js r${g_} webgpu`),this.domElement=e),e}set(e,n){this.data.set(e,n)}get(e){let n=this.data.get(e);return n===void 0&&(n={},this.data.set(e,n)),n}has(e){return this.data.has(e)}delete(e){this.data.delete(e)}dispose(){}}let pDe=0;class mDe{constructor(e,n){this.buffers=[e.bufferGPU,n],this.type=e.type,this.bufferType=e.bufferType,this.pbo=e.pbo,this.byteLength=e.byteLength,this.bytesPerElement=e.BYTES_PER_ELEMENT,this.version=e.version,this.isInteger=e.isInteger,this.activeBufferIndex=0,this.baseId=e.id}get id(){return`${this.baseId}|${this.activeBufferIndex}`}get bufferGPU(){return this.buffers[this.activeBufferIndex]}get transformBuffer(){return this.buffers[this.activeBufferIndex^1]}switchBuffers(){this.activeBufferIndex^=1}}class gDe{constructor(e){this.backend=e}createAttribute(e,n){const i=this.backend,{gl:s}=i,a=e.array,o=e.usage||s.STATIC_DRAW,l=e.isInterleavedBufferAttribute?e.data:e,c=i.get(l);let u=c.bufferGPU;u===void 0&&(u=this._createBuffer(s,n,a,o),c.bufferGPU=u,c.bufferType=n,c.version=l.version);let h;if(a instanceof Float32Array)h=s.FLOAT;else if(a instanceof Uint16Array)e.isFloat16BufferAttribute?h=s.HALF_FLOAT:h=s.UNSIGNED_SHORT;else if(a instanceof Int16Array)h=s.SHORT;else if(a instanceof Uint32Array)h=s.UNSIGNED_INT;else if(a instanceof Int32Array)h=s.INT;else if(a instanceof Int8Array)h=s.BYTE;else if(a instanceof Uint8Array)h=s.UNSIGNED_BYTE;else if(a instanceof Uint8ClampedArray)h=s.UNSIGNED_BYTE;else throw new Error("THREE.WebGLBackend: Unsupported buffer data format: "+a);let d={bufferGPU:u,bufferType:n,type:h,byteLength:a.byteLength,bytesPerElement:a.BYTES_PER_ELEMENT,version:e.version,pbo:e.pbo,isInteger:h===s.INT||h===s.UNSIGNED_INT||e.gpuType===Cs,id:pDe++};if(e.isStorageBufferAttribute||e.isStorageInstancedBufferAttribute){const f=this._createBuffer(s,n,a,o);d=new mDe(d,f)}i.set(e,d)}updateAttribute(e){const n=this.backend,{gl:i}=n,s=e.array,a=e.isInterleavedBufferAttribute?e.data:e,o=n.get(a),l=o.bufferType,c=e.isInterleavedBufferAttribute?e.data.updateRanges:e.updateRanges;if(i.bindBuffer(l,o.bufferGPU),c.length===0)i.bufferSubData(l,0,s);else{for(let u=0,h=c.length;u<h;u++){const d=c[u];i.bufferSubData(l,d.start*s.BYTES_PER_ELEMENT,s,d.start,d.count)}a.clearUpdateRanges()}i.bindBuffer(l,null),o.version=a.version}destroyAttribute(e){const n=this.backend,{gl:i}=n;e.isInterleavedBufferAttribute&&n.delete(e.data);const s=n.get(e);i.deleteBuffer(s.bufferGPU),n.delete(e)}async getArrayBufferAsync(e){const n=this.backend,{gl:i}=n,s=e.isInterleavedBufferAttribute?e.data:e,{bufferGPU:a}=n.get(s),o=e.array,l=o.byteLength;i.bindBuffer(i.COPY_READ_BUFFER,a);const c=i.createBuffer();i.bindBuffer(i.COPY_WRITE_BUFFER,c),i.bufferData(i.COPY_WRITE_BUFFER,l,i.STREAM_READ),i.copyBufferSubData(i.COPY_READ_BUFFER,i.COPY_WRITE_BUFFER,0,0,l),await n.utils._clientWaitAsync();const u=new e.array.constructor(o.length);return i.bindBuffer(i.COPY_WRITE_BUFFER,c),i.getBufferSubData(i.COPY_WRITE_BUFFER,0,u),i.deleteBuffer(c),i.bindBuffer(i.COPY_READ_BUFFER,null),i.bindBuffer(i.COPY_WRITE_BUFFER,null),u.buffer}_createBuffer(e,n,i,s){const a=e.createBuffer();return e.bindBuffer(n,a),e.bufferData(n,i,s),e.bindBuffer(n,null),a}}let MR,Lv;class yDe{constructor(e){this.backend=e,this.gl=this.backend.gl,this.enabled={},this.currentFlipSided=null,this.currentCullFace=null,this.currentProgram=null,this.currentBlendingEnabled=!1,this.currentBlending=null,this.currentBlendSrc=null,this.currentBlendDst=null,this.currentBlendSrcAlpha=null,this.currentBlendDstAlpha=null,this.currentPremultipledAlpha=null,this.currentPolygonOffsetFactor=null,this.currentPolygonOffsetUnits=null,this.currentColorMask=null,this.currentDepthFunc=null,this.currentDepthMask=null,this.currentStencilFunc=null,this.currentStencilRef=null,this.currentStencilFuncMask=null,this.currentStencilFail=null,this.currentStencilZFail=null,this.currentStencilZPass=null,this.currentStencilMask=null,this.currentLineWidth=null,this.currentClippingPlanes=0,this.currentVAO=null,this.currentIndex=null,this.currentBoundFramebuffers={},this.currentDrawbuffers=new WeakMap,this.maxTextures=this.gl.getParameter(this.gl.MAX_TEXTURE_IMAGE_UNITS),this.currentTextureSlot=null,this.currentBoundTextures={},this.currentBoundBufferBases={},this._init()}_init(){const e=this.gl;MR={[ua]:e.FUNC_ADD,[aj]:e.FUNC_SUBTRACT,[oj]:e.FUNC_REVERSE_SUBTRACT},Lv={[Uu]:e.ZERO,[lj]:e.ONE,[cj]:e.SRC_COLOR,[qx]:e.SRC_ALPHA,[mj]:e.SRC_ALPHA_SATURATE,[fj]:e.DST_COLOR,[hj]:e.DST_ALPHA,[uj]:e.ONE_MINUS_SRC_COLOR,[Xx]:e.ONE_MINUS_SRC_ALPHA,[pj]:e.ONE_MINUS_DST_COLOR,[dj]:e.ONE_MINUS_DST_ALPHA};const n=e.getParameter(e.SCISSOR_BOX),i=e.getParameter(e.VIEWPORT);this.currentScissor=new In().fromArray(n),this.currentViewport=new In().fromArray(i),this._tempVec4=new In}enable(e){const{enabled:n}=this;n[e]!==!0&&(this.gl.enable(e),n[e]=!0)}disable(e){const{enabled:n}=this;n[e]!==!1&&(this.gl.disable(e),n[e]=!1)}setFlipSided(e){if(this.currentFlipSided!==e){const{gl:n}=this;e?n.frontFace(n.CW):n.frontFace(n.CCW),this.currentFlipSided=e}}setCullFace(e){const{gl:n}=this;e!==GJ?(this.enable(n.CULL_FACE),e!==this.currentCullFace&&(e===e3?n.cullFace(n.BACK):e===VJ?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):this.disable(n.CULL_FACE),this.currentCullFace=e}setLineWidth(e){const{currentLineWidth:n,gl:i}=this;e!==n&&(i.lineWidth(e),this.currentLineWidth=e)}setBlending(e,n,i,s,a,o,l,c){const{gl:u}=this;if(e===eo){this.currentBlendingEnabled===!0&&(this.disable(u.BLEND),this.currentBlendingEnabled=!1);return}if(this.currentBlendingEnabled===!1&&(this.enable(u.BLEND),this.currentBlendingEnabled=!0),e!==Fg){if(e!==this.currentBlending||c!==this.currentPremultipledAlpha){if((this.currentBlendEquation!==ua||this.currentBlendEquationAlpha!==ua)&&(u.blendEquation(u.FUNC_ADD),this.currentBlendEquation=ua,this.currentBlendEquationAlpha=ua),c)switch(e){case hl:u.blendFuncSeparate(u.ONE,u.ONE_MINUS_SRC_ALPHA,u.ONE,u.ONE_MINUS_SRC_ALPHA);break;case Zg:u.blendFunc(u.ONE,u.ONE);break;case Qg:u.blendFuncSeparate(u.ZERO,u.ONE_MINUS_SRC_COLOR,u.ZERO,u.ONE);break;case Jg:u.blendFuncSeparate(u.ZERO,u.SRC_COLOR,u.ZERO,u.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",e);break}else switch(e){case hl:u.blendFuncSeparate(u.SRC_ALPHA,u.ONE_MINUS_SRC_ALPHA,u.ONE,u.ONE_MINUS_SRC_ALPHA);break;case Zg:u.blendFunc(u.SRC_ALPHA,u.ONE);break;case Qg:u.blendFuncSeparate(u.ZERO,u.ONE_MINUS_SRC_COLOR,u.ZERO,u.ONE);break;case Jg:u.blendFunc(u.ZERO,u.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",e);break}this.currentBlendSrc=null,this.currentBlendDst=null,this.currentBlendSrcAlpha=null,this.currentBlendDstAlpha=null,this.currentBlending=e,this.currentPremultipledAlpha=c}return}a=a||n,o=o||i,l=l||s,(n!==this.currentBlendEquation||a!==this.currentBlendEquationAlpha)&&(u.blendEquationSeparate(MR[n],MR[a]),this.currentBlendEquation=n,this.currentBlendEquationAlpha=a),(i!==this.currentBlendSrc||s!==this.currentBlendDst||o!==this.currentBlendSrcAlpha||l!==this.currentBlendDstAlpha)&&(u.blendFuncSeparate(Lv[i],Lv[s],Lv[o],Lv[l]),this.currentBlendSrc=i,this.currentBlendDst=s,this.currentBlendSrcAlpha=o,this.currentBlendDstAlpha=l),this.currentBlending=e,this.currentPremultipledAlpha=!1}setColorMask(e){this.currentColorMask!==e&&(this.gl.colorMask(e,e,e,e),this.currentColorMask=e)}setDepthTest(e){const{gl:n}=this;e?this.enable(n.DEPTH_TEST):this.disable(n.DEPTH_TEST)}setDepthMask(e){this.currentDepthMask!==e&&(this.gl.depthMask(e),this.currentDepthMask=e)}setDepthFunc(e){if(this.currentDepthFunc!==e){const{gl:n}=this;switch(e){case Kx:n.depthFunc(n.NEVER);break;case Yx:n.depthFunc(n.ALWAYS);break;case Zx:n.depthFunc(n.LESS);break;case Dd:n.depthFunc(n.LEQUAL);break;case Qx:n.depthFunc(n.EQUAL);break;case Jx:n.depthFunc(n.GEQUAL);break;case eb:n.depthFunc(n.GREATER);break;case tb:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}this.currentDepthFunc=e}}scissor(e,n,i,s){const a=this._tempVec4.set(e,n,i,s);if(this.currentScissor.equals(a)===!1){const{gl:o}=this;o.scissor(a.x,a.y,a.z,a.w),this.currentScissor.copy(a)}}viewport(e,n,i,s){const a=this._tempVec4.set(e,n,i,s);if(this.currentViewport.equals(a)===!1){const{gl:o}=this;o.viewport(a.x,a.y,a.z,a.w),this.currentViewport.copy(a)}}setScissorTest(e){const n=this.gl;e?n.enable(n.SCISSOR_TEST):n.disable(n.SCISSOR_TEST)}setStencilTest(e){const{gl:n}=this;e?this.enable(n.STENCIL_TEST):this.disable(n.STENCIL_TEST)}setStencilMask(e){this.currentStencilMask!==e&&(this.gl.stencilMask(e),this.currentStencilMask=e)}setStencilFunc(e,n,i){(this.currentStencilFunc!==e||this.currentStencilRef!==n||this.currentStencilFuncMask!==i)&&(this.gl.stencilFunc(e,n,i),this.currentStencilFunc=e,this.currentStencilRef=n,this.currentStencilFuncMask=i)}setStencilOp(e,n,i){(this.currentStencilFail!==e||this.currentStencilZFail!==n||this.currentStencilZPass!==i)&&(this.gl.stencilOp(e,n,i),this.currentStencilFail=e,this.currentStencilZFail=n,this.currentStencilZPass=i)}setMaterial(e,n,i){const{gl:s}=this;e.side===Ea?this.disable(s.CULL_FACE):this.enable(s.CULL_FACE);let a=e.side===Wr;n&&(a=!a),this.setFlipSided(a),e.blending===hl&&e.transparent===!1?this.setBlending(eo):this.setBlending(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha),this.setDepthFunc(e.depthFunc),this.setDepthTest(e.depthTest),this.setDepthMask(e.depthWrite),this.setColorMask(e.colorWrite);const o=e.stencilWrite;if(this.setStencilTest(o),o&&(this.setStencilMask(e.stencilWriteMask),this.setStencilFunc(e.stencilFunc,e.stencilRef,e.stencilFuncMask),this.setStencilOp(e.stencilFail,e.stencilZFail,e.stencilZPass)),this.setPolygonOffset(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits),e.alphaToCoverage===!0&&this.backend.renderer.samples>1?this.enable(s.SAMPLE_ALPHA_TO_COVERAGE):this.disable(s.SAMPLE_ALPHA_TO_COVERAGE),i>0&&this.currentClippingPlanes!==i)for(let c=0;c<8;c++)c<i?this.enable(12288+c):this.disable(12288+c)}setPolygonOffset(e,n,i){const{gl:s}=this;e?(this.enable(s.POLYGON_OFFSET_FILL),(this.currentPolygonOffsetFactor!==n||this.currentPolygonOffsetUnits!==i)&&(s.polygonOffset(n,i),this.currentPolygonOffsetFactor=n,this.currentPolygonOffsetUnits=i)):this.disable(s.POLYGON_OFFSET_FILL)}useProgram(e){return this.currentProgram!==e?(this.gl.useProgram(e),this.currentProgram=e,!0):!1}setVertexState(e,n=null){const i=this.gl;return this.currentVAO!==e||this.currentIndex!==n?(i.bindVertexArray(e),n!==null&&i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,n),this.currentVAO=e,this.currentIndex=n,!0):!1}resetVertexState(){const e=this.gl;e.bindVertexArray(null),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null),this.currentVAO=null,this.currentIndex=null}bindFramebuffer(e,n){const{gl:i,currentBoundFramebuffers:s}=this;return s[e]!==n?(i.bindFramebuffer(e,n),s[e]=n,e===i.DRAW_FRAMEBUFFER&&(s[i.FRAMEBUFFER]=n),e===i.FRAMEBUFFER&&(s[i.DRAW_FRAMEBUFFER]=n),!0):!1}drawBuffers(e,n){const{gl:i}=this;let s=[],a=!1;if(e.textures!==null){s=this.currentDrawbuffers.get(n),s===void 0&&(s=[],this.currentDrawbuffers.set(n,s));const o=e.textures;if(s.length!==o.length||s[0]!==i.COLOR_ATTACHMENT0){for(let l=0,c=o.length;l<c;l++)s[l]=i.COLOR_ATTACHMENT0+l;s.length=o.length,a=!0}}else s[0]!==i.BACK&&(s[0]=i.BACK,a=!0);a&&i.drawBuffers(s)}activeTexture(e){const{gl:n,currentTextureSlot:i,maxTextures:s}=this;e===void 0&&(e=n.TEXTURE0+s-1),i!==e&&(n.activeTexture(e),this.currentTextureSlot=e)}bindTexture(e,n,i){const{gl:s,currentTextureSlot:a,currentBoundTextures:o,maxTextures:l}=this;i===void 0&&(a===null?i=s.TEXTURE0+l-1:i=a);let c=o[i];c===void 0&&(c={type:void 0,texture:void 0},o[i]=c),(c.type!==e||c.texture!==n)&&(a!==i&&(s.activeTexture(i),this.currentTextureSlot=i),s.bindTexture(e,n),c.type=e,c.texture=n)}bindBufferBase(e,n,i){const{gl:s}=this,a=`${e}-${n}`;return this.currentBoundBufferBases[a]!==i?(s.bindBufferBase(e,n,i),this.currentBoundBufferBases[a]=i,!0):!1}unbindTexture(){const{gl:e,currentTextureSlot:n,currentBoundTextures:i}=this,s=i[n];s!==void 0&&s.type!==void 0&&(e.bindTexture(s.type,null),s.type=void 0,s.texture=void 0)}}class vDe{constructor(e){this.backend=e,this.gl=this.backend.gl,this.extensions=e.extensions}convert(e,n=Po){const{gl:i,extensions:s}=this;let a;if(e===Ri)return i.UNSIGNED_BYTE;if(e===bM)return i.UNSIGNED_SHORT_4_4_4_4;if(e===_M)return i.UNSIGNED_SHORT_5_5_5_1;if(e===wM)return i.UNSIGNED_INT_5_9_9_9_REV;if(e===cp)return i.BYTE;if(e===up)return i.SHORT;if(e===tc)return i.UNSIGNED_SHORT;if(e===Cs)return i.INT;if(e===Vr)return i.UNSIGNED_INT;if(e===zi)return i.FLOAT;if(e===da)return i.HALF_FLOAT;if(e===vj)return i.ALPHA;if(e===v_)return i.RGB;if(e===Oi)return i.RGBA;if(e===xj)return i.LUMINANCE;if(e===bj)return i.LUMINANCE_ALPHA;if(e===Io)return i.DEPTH_COMPONENT;if(e===Do)return i.DEPTH_STENCIL;if(e===x_)return i.RED;if(e===r0)return i.RED_INTEGER;if(e===Sp)return i.RG;if(e===i0)return i.RG_INTEGER;if(e===s0)return i.RGBA_INTEGER;if(e===hp||e===Ad||e===Cd||e===Nd)if(n===dn)if(a=s.get("WEBGL_compressed_texture_s3tc_srgb"),a!==null){if(e===hp)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(e===Ad)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(e===Cd)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(e===Nd)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(a=s.get("WEBGL_compressed_texture_s3tc"),a!==null){if(e===hp)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(e===Ad)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(e===Cd)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(e===Nd)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(e===nb||e===rb||e===ib||e===sb)if(a=s.get("WEBGL_compressed_texture_pvrtc"),a!==null){if(e===nb)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(e===rb)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(e===ib)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(e===sb)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(e===ab||e===ey||e===ty)if(a=s.get("WEBGL_compressed_texture_etc"),a!==null){if(e===ab||e===ey)return n===dn?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(e===ty)return n===dn?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(e===ny||e===ry||e===iy||e===sy||e===ay||e===oy||e===ly||e===cy||e===uy||e===hy||e===dy||e===fy||e===py||e===my)if(a=s.get("WEBGL_compressed_texture_astc"),a!==null){if(e===ny)return n===dn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(e===ry)return n===dn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(e===iy)return n===dn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(e===sy)return n===dn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(e===ay)return n===dn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(e===oy)return n===dn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(e===ly)return n===dn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(e===cy)return n===dn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(e===uy)return n===dn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(e===hy)return n===dn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(e===dy)return n===dn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(e===fy)return n===dn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(e===py)return n===dn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(e===my)return n===dn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(e===dp)if(a=s.get("EXT_texture_compression_bptc"),a!==null){if(e===dp)return n===dn?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;if(e===_j||e===ob||e===lb||e===cb)if(a=s.get("EXT_texture_compression_rgtc"),a!==null){if(e===dp)return a.COMPRESSED_RED_RGTC1_EXT;if(e===ob)return a.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(e===lb)return a.COMPRESSED_RED_GREEN_RGTC2_EXT;if(e===cb)return a.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return e===ko?i.UNSIGNED_INT_24_8:i[e]!==void 0?i[e]:null}_clientWaitAsync(){const{gl:e}=this,n=e.fenceSync(e.SYNC_GPU_COMMANDS_COMPLETE,0);return e.flush(),new Promise((i,s)=>{function a(){const o=e.clientWaitSync(n,e.SYNC_FLUSH_COMMANDS_BIT,0);if(o===e.WAIT_FAILED){e.deleteSync(n),s();return}if(o===e.TIMEOUT_EXPIRED){requestAnimationFrame(a);return}e.deleteSync(n),i()}a()})}}let wW=!1,AS,AR,SW;class xDe{constructor(e){this.backend=e,this.gl=e.gl,this.extensions=e.extensions,this.defaultTextures={},wW===!1&&(this._init(),wW=!0)}_init(){const e=this.gl;AS={[_p]:e.REPEAT,[Nc]:e.CLAMP_TO_EDGE,[wp]:e.MIRRORED_REPEAT},AR={[ei]:e.NEAREST,[yj]:e.NEAREST_MIPMAP_NEAREST,[qu]:e.NEAREST_MIPMAP_LINEAR,[ds]:e.LINEAR,[Bg]:e.LINEAR_MIPMAP_NEAREST,[Xa]:e.LINEAR_MIPMAP_LINEAR},SW={[wj]:e.NEVER,[Aj]:e.ALWAYS,[SM]:e.LESS,[TM]:e.LEQUAL,[Sj]:e.EQUAL,[Mj]:e.GEQUAL,[Tj]:e.GREATER,[Ej]:e.NOTEQUAL}}getGLTextureType(e){const{gl:n}=this;let i;return e.isCubeTexture===!0?i=n.TEXTURE_CUBE_MAP:e.isDataArrayTexture===!0||e.isCompressedArrayTexture===!0?i=n.TEXTURE_2D_ARRAY:e.isData3DTexture===!0?i=n.TEXTURE_3D:i=n.TEXTURE_2D,i}getInternalFormat(e,n,i,s,a=!1){const{gl:o,extensions:l}=this;if(e!==null){if(o[e]!==void 0)return o[e];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+e+"'")}let c=n;return n===o.RED&&(i===o.FLOAT&&(c=o.R32F),i===o.HALF_FLOAT&&(c=o.R16F),i===o.UNSIGNED_BYTE&&(c=o.R8),i===o.UNSIGNED_SHORT&&(c=o.R16),i===o.UNSIGNED_INT&&(c=o.R32UI),i===o.BYTE&&(c=o.R8I),i===o.SHORT&&(c=o.R16I),i===o.INT&&(c=o.R32I)),n===o.RED_INTEGER&&(i===o.UNSIGNED_BYTE&&(c=o.R8UI),i===o.UNSIGNED_SHORT&&(c=o.R16UI),i===o.UNSIGNED_INT&&(c=o.R32UI),i===o.BYTE&&(c=o.R8I),i===o.SHORT&&(c=o.R16I),i===o.INT&&(c=o.R32I)),n===o.RG&&(i===o.FLOAT&&(c=o.RG32F),i===o.HALF_FLOAT&&(c=o.RG16F),i===o.UNSIGNED_BYTE&&(c=o.RG8),i===o.UNSIGNED_SHORT&&(c=o.RG16),i===o.UNSIGNED_INT&&(c=o.RG32UI),i===o.BYTE&&(c=o.RG8I),i===o.SHORT&&(c=o.RG16I),i===o.INT&&(c=o.RG32I)),n===o.RG_INTEGER&&(i===o.UNSIGNED_BYTE&&(c=o.RG8UI),i===o.UNSIGNED_SHORT&&(c=o.RG16UI),i===o.UNSIGNED_INT&&(c=o.RG32UI),i===o.BYTE&&(c=o.RG8I),i===o.SHORT&&(c=o.RG16I),i===o.INT&&(c=o.RG32I)),n===o.RGB&&(i===o.FLOAT&&(c=o.RGB32F),i===o.HALF_FLOAT&&(c=o.RGB16F),i===o.UNSIGNED_BYTE&&(c=o.RGB8),i===o.UNSIGNED_SHORT&&(c=o.RGB16),i===o.UNSIGNED_INT&&(c=o.RGB32UI),i===o.BYTE&&(c=o.RGB8I),i===o.SHORT&&(c=o.RGB16I),i===o.INT&&(c=o.RGB32I),i===o.UNSIGNED_BYTE&&(c=s===dn&&a===!1?o.SRGB8:o.RGB8),i===o.UNSIGNED_SHORT_5_6_5&&(c=o.RGB565),i===o.UNSIGNED_SHORT_5_5_5_1&&(c=o.RGB5_A1),i===o.UNSIGNED_SHORT_4_4_4_4&&(c=o.RGB4),i===o.UNSIGNED_INT_5_9_9_9_REV&&(c=o.RGB9_E5)),n===o.RGB_INTEGER&&(i===o.UNSIGNED_BYTE&&(c=o.RGB8UI),i===o.UNSIGNED_SHORT&&(c=o.RGB16UI),i===o.UNSIGNED_INT&&(c=o.RGB32UI),i===o.BYTE&&(c=o.RGB8I),i===o.SHORT&&(c=o.RGB16I),i===o.INT&&(c=o.RGB32I)),n===o.RGBA&&(i===o.FLOAT&&(c=o.RGBA32F),i===o.HALF_FLOAT&&(c=o.RGBA16F),i===o.UNSIGNED_BYTE&&(c=o.RGBA8),i===o.UNSIGNED_SHORT&&(c=o.RGBA16),i===o.UNSIGNED_INT&&(c=o.RGBA32UI),i===o.BYTE&&(c=o.RGBA8I),i===o.SHORT&&(c=o.RGBA16I),i===o.INT&&(c=o.RGBA32I),i===o.UNSIGNED_BYTE&&(c=s===dn&&a===!1?o.SRGB8_ALPHA8:o.RGBA8),i===o.UNSIGNED_SHORT_4_4_4_4&&(c=o.RGBA4),i===o.UNSIGNED_SHORT_5_5_5_1&&(c=o.RGB5_A1)),n===o.RGBA_INTEGER&&(i===o.UNSIGNED_BYTE&&(c=o.RGBA8UI),i===o.UNSIGNED_SHORT&&(c=o.RGBA16UI),i===o.UNSIGNED_INT&&(c=o.RGBA32UI),i===o.BYTE&&(c=o.RGBA8I),i===o.SHORT&&(c=o.RGBA16I),i===o.INT&&(c=o.RGBA32I)),n===o.DEPTH_COMPONENT&&(i===o.UNSIGNED_SHORT&&(c=o.DEPTH_COMPONENT16),i===o.UNSIGNED_INT&&(c=o.DEPTH_COMPONENT24),i===o.FLOAT&&(c=o.DEPTH_COMPONENT32F)),n===o.DEPTH_STENCIL&&i===o.UNSIGNED_INT_24_8&&(c=o.DEPTH24_STENCIL8),(c===o.R16F||c===o.R32F||c===o.RG16F||c===o.RG32F||c===o.RGBA16F||c===o.RGBA32F)&&l.get("EXT_color_buffer_float"),c}setTextureParameters(e,n){const{gl:i,extensions:s,backend:a}=this;i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,n.flipY),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.premultiplyAlpha),i.pixelStorei(i.UNPACK_ALIGNMENT,n.unpackAlignment),i.pixelStorei(i.UNPACK_COLORSPACE_CONVERSION_WEBGL,i.NONE),i.texParameteri(e,i.TEXTURE_WRAP_S,AS[n.wrapS]),i.texParameteri(e,i.TEXTURE_WRAP_T,AS[n.wrapT]),(e===i.TEXTURE_3D||e===i.TEXTURE_2D_ARRAY)&&i.texParameteri(e,i.TEXTURE_WRAP_R,AS[n.wrapR]),i.texParameteri(e,i.TEXTURE_MAG_FILTER,AR[n.magFilter]);const o=n.mipmaps!==void 0&&n.mipmaps.length>0,l=n.minFilter===ds&&o?Xa:n.minFilter;if(i.texParameteri(e,i.TEXTURE_MIN_FILTER,AR[l]),n.compareFunction&&(i.texParameteri(e,i.TEXTURE_COMPARE_MODE,i.COMPARE_REF_TO_TEXTURE),i.texParameteri(e,i.TEXTURE_COMPARE_FUNC,SW[n.compareFunction])),s.has("EXT_texture_filter_anisotropic")===!0){if(n.magFilter===ei||n.minFilter!==qu&&n.minFilter!==Xa||n.type===zi&&s.has("OES_texture_float_linear")===!1)return;if(n.anisotropy>1){const c=s.get("EXT_texture_filter_anisotropic");i.texParameterf(e,c.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(n.anisotropy,a.getMaxAnisotropy()))}}}createDefaultTexture(e){const{gl:n,backend:i,defaultTextures:s}=this,a=this.getGLTextureType(e);let o=s[a];o===void 0&&(o=n.createTexture(),i.state.bindTexture(a,o),n.texParameteri(a,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(a,n.TEXTURE_MAG_FILTER,n.NEAREST),s[a]=o),i.set(e,{textureGPU:o,glTextureType:a,isDefault:!0})}createTexture(e,n){const{gl:i,backend:s}=this,{levels:a,width:o,height:l,depth:c}=n,u=s.utils.convert(e.format,e.colorSpace),h=s.utils.convert(e.type),d=this.getInternalFormat(e.internalFormat,u,h,e.colorSpace,e.isVideoTexture),f=i.createTexture(),p=this.getGLTextureType(e);s.state.bindTexture(p,f),this.setTextureParameters(p,e),e.isDataArrayTexture||e.isCompressedArrayTexture?i.texStorage3D(i.TEXTURE_2D_ARRAY,a,d,o,l,c):e.isData3DTexture?i.texStorage3D(i.TEXTURE_3D,a,d,o,l,c):e.isVideoTexture||i.texStorage2D(p,a,d,o,l),s.set(e,{textureGPU:f,glTextureType:p,glFormat:u,glType:h,glInternalFormat:d})}copyBufferToTexture(e,n){const{gl:i,backend:s}=this,{textureGPU:a,glTextureType:o,glFormat:l,glType:c}=s.get(n),{width:u,height:h}=n.source.data;i.bindBuffer(i.PIXEL_UNPACK_BUFFER,e),s.state.bindTexture(o,a),i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,!1),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),i.texSubImage2D(o,0,0,0,u,h,l,c,0),i.bindBuffer(i.PIXEL_UNPACK_BUFFER,null),s.state.unbindTexture()}updateTexture(e,n){const{gl:i}=this,{width:s,height:a}=n,{textureGPU:o,glTextureType:l,glFormat:c,glType:u,glInternalFormat:h}=this.backend.get(e);if(e.isRenderTargetTexture||o===void 0)return;const d=f=>f.isDataTexture?f.image.data:typeof HTMLImageElement<"u"&&f instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&f instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&f instanceof ImageBitmap||f instanceof OffscreenCanvas?f:f.data;if(this.backend.state.bindTexture(l,o),this.setTextureParameters(l,e),e.isCompressedTexture){const f=e.mipmaps,p=n.image;for(let g=0;g<f.length;g++){const v=f[g];e.isCompressedArrayTexture?e.format!==i.RGBA?c!==null?i.compressedTexSubImage3D(i.TEXTURE_2D_ARRAY,g,0,0,0,v.width,v.height,p.depth,c,v.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):i.texSubImage3D(i.TEXTURE_2D_ARRAY,g,0,0,0,v.width,v.height,p.depth,c,u,v.data):c!==null?i.compressedTexSubImage2D(i.TEXTURE_2D,g,0,0,v.width,v.height,c,v.data):console.warn("Unsupported compressed texture format")}}else if(e.isCubeTexture){const f=n.images;for(let p=0;p<6;p++){const g=d(f[p]);i.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+p,0,0,0,s,a,c,u,g)}}else if(e.isDataArrayTexture){const f=n.image;i.texSubImage3D(i.TEXTURE_2D_ARRAY,0,0,0,0,f.width,f.height,f.depth,c,u,f.data)}else if(e.isData3DTexture){const f=n.image;i.texSubImage3D(i.TEXTURE_3D,0,0,0,0,f.width,f.height,f.depth,c,u,f.data)}else if(e.isVideoTexture)e.update(),i.texImage2D(l,0,h,c,u,n.image);else{const f=d(n.image);i.texSubImage2D(l,0,0,0,s,a,c,u,f)}}generateMipmaps(e){const{gl:n,backend:i}=this,{textureGPU:s,glTextureType:a}=i.get(e);i.state.bindTexture(a,s),n.generateMipmap(a)}deallocateRenderBuffers(e){const{gl:n,backend:i}=this;if(e){const s=i.get(e);if(s.renderBufferStorageSetup=void 0,s.framebuffers){for(const a in s.framebuffers)n.deleteFramebuffer(s.framebuffers[a]);delete s.framebuffers}if(s.depthRenderbuffer&&(n.deleteRenderbuffer(s.depthRenderbuffer),delete s.depthRenderbuffer),s.stencilRenderbuffer&&(n.deleteRenderbuffer(s.stencilRenderbuffer),delete s.stencilRenderbuffer),s.msaaFrameBuffer&&(n.deleteFramebuffer(s.msaaFrameBuffer),delete s.msaaFrameBuffer),s.msaaRenderbuffers){for(let a=0;a<s.msaaRenderbuffers.length;a++)n.deleteRenderbuffer(s.msaaRenderbuffers[a]);delete s.msaaRenderbuffers}}}destroyTexture(e){const{gl:n,backend:i}=this,{textureGPU:s,renderTarget:a}=i.get(e);this.deallocateRenderBuffers(a),n.deleteTexture(s),i.delete(e)}copyTextureToTexture(e,n,i=null,s=null,a=0,o=0){const{gl:l,backend:c}=this,{state:u}=this.backend,{textureGPU:h,glTextureType:d,glType:f,glFormat:p}=c.get(n);u.bindTexture(d,h);let g,v,x,_,E,S,T,M,C;const A=e.isCompressedTexture?e.mipmaps[o]:e.image;if(i!==null)g=i.max.x-i.min.x,v=i.max.y-i.min.y,x=i.isBox3?i.max.z-i.min.z:1,_=i.min.x,E=i.min.y,S=i.isBox3?i.min.z:0;else{const B=Math.pow(2,-a);g=Math.floor(A.width*B),v=Math.floor(A.height*B),e.isDataArrayTexture?x=A.depth:e.isData3DTexture?x=Math.floor(A.depth*B):x=1,_=0,E=0,S=0}s!==null?(T=s.x,M=s.y,C=s.z):(T=0,M=0,C=0),l.pixelStorei(l.UNPACK_FLIP_Y_WEBGL,n.flipY),l.pixelStorei(l.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.premultiplyAlpha),l.pixelStorei(l.UNPACK_ALIGNMENT,n.unpackAlignment);const P=l.getParameter(l.UNPACK_ROW_LENGTH),R=l.getParameter(l.UNPACK_IMAGE_HEIGHT),O=l.getParameter(l.UNPACK_SKIP_PIXELS),D=l.getParameter(l.UNPACK_SKIP_ROWS),F=l.getParameter(l.UNPACK_SKIP_IMAGES);l.pixelStorei(l.UNPACK_ROW_LENGTH,A.width),l.pixelStorei(l.UNPACK_IMAGE_HEIGHT,A.height),l.pixelStorei(l.UNPACK_SKIP_PIXELS,_),l.pixelStorei(l.UNPACK_SKIP_ROWS,E),l.pixelStorei(l.UNPACK_SKIP_IMAGES,S);const U=n.isDataArrayTexture||n.isData3DTexture;if(e.isRenderTargetTexture||e.isDepthTexture){const B=c.get(e),W=c.get(n),j=c.get(B.renderTarget),$=c.get(W.renderTarget),z=j.framebuffers[B.cacheKey],Z=$.framebuffers[W.cacheKey];u.bindFramebuffer(l.READ_FRAMEBUFFER,z),u.bindFramebuffer(l.DRAW_FRAMEBUFFER,Z);let se=l.COLOR_BUFFER_BIT;e.isDepthTexture&&(se=l.DEPTH_BUFFER_BIT),l.blitFramebuffer(_,E,g,v,T,M,g,v,se,l.NEAREST),u.bindFramebuffer(l.READ_FRAMEBUFFER,null),u.bindFramebuffer(l.DRAW_FRAMEBUFFER,null)}else U?e.isDataTexture||e.isData3DTexture?l.texSubImage3D(d,o,T,M,C,g,v,x,p,f,A.data):n.isCompressedArrayTexture?l.compressedTexSubImage3D(d,o,T,M,C,g,v,x,p,A.data):l.texSubImage3D(d,o,T,M,C,g,v,x,p,f,A):e.isDataTexture?l.texSubImage2D(d,o,T,M,g,v,p,f,A.data):e.isCompressedTexture?l.compressedTexSubImage2D(d,o,T,M,A.width,A.height,p,A.data):l.texSubImage2D(d,o,T,M,g,v,p,f,A);l.pixelStorei(l.UNPACK_ROW_LENGTH,P),l.pixelStorei(l.UNPACK_IMAGE_HEIGHT,R),l.pixelStorei(l.UNPACK_SKIP_PIXELS,O),l.pixelStorei(l.UNPACK_SKIP_ROWS,D),l.pixelStorei(l.UNPACK_SKIP_IMAGES,F),o===0&&n.generateMipmaps&&l.generateMipmap(d),u.unbindTexture()}copyFramebufferToTexture(e,n,i){const{gl:s}=this,{state:a}=this.backend,{textureGPU:o}=this.backend.get(e),{x:l,y:c,z:u,w:h}=i,d=e.isDepthTexture===!0||n.renderTarget&&n.renderTarget.samples>0,f=n.renderTarget?n.renderTarget.height:this.backend.getDrawingBufferSize().y;if(d){const p=l!==0||c!==0;let g,v;if(e.isDepthTexture===!0?(g=s.DEPTH_BUFFER_BIT,v=s.DEPTH_ATTACHMENT,n.stencil&&(g|=s.STENCIL_BUFFER_BIT)):(g=s.COLOR_BUFFER_BIT,v=s.COLOR_ATTACHMENT0),p){const x=this.backend.get(n.renderTarget),_=x.framebuffers[n.getCacheKey()],E=x.msaaFrameBuffer;a.bindFramebuffer(s.DRAW_FRAMEBUFFER,_),a.bindFramebuffer(s.READ_FRAMEBUFFER,E);const S=f-c-h;s.blitFramebuffer(l,S,l+u,S+h,l,S,l+u,S+h,g,s.NEAREST),a.bindFramebuffer(s.READ_FRAMEBUFFER,_),a.bindTexture(s.TEXTURE_2D,o),s.copyTexSubImage2D(s.TEXTURE_2D,0,0,0,l,S,u,h),a.unbindTexture()}else{const x=s.createFramebuffer();a.bindFramebuffer(s.DRAW_FRAMEBUFFER,x),s.framebufferTexture2D(s.DRAW_FRAMEBUFFER,v,s.TEXTURE_2D,o,0),s.blitFramebuffer(0,0,u,h,0,0,u,h,g,s.NEAREST),s.deleteFramebuffer(x)}}else a.bindTexture(s.TEXTURE_2D,o),s.copyTexSubImage2D(s.TEXTURE_2D,0,0,0,l,f-h-c,u,h),a.unbindTexture();e.generateMipmaps&&this.generateMipmaps(e),this.backend._setFramebuffer(n)}setupRenderBufferStorage(e,n,i,s=!1){const{gl:a}=this,o=n.renderTarget,{depthTexture:l,depthBuffer:c,stencilBuffer:u,width:h,height:d}=o;if(a.bindRenderbuffer(a.RENDERBUFFER,e),c&&!u){let f=a.DEPTH_COMPONENT24;s===!0?this.extensions.get("WEBGL_multisampled_render_to_texture").renderbufferStorageMultisampleEXT(a.RENDERBUFFER,o.samples,f,h,d):i>0?(l&&l.isDepthTexture&&l.type===a.FLOAT&&(f=a.DEPTH_COMPONENT32F),a.renderbufferStorageMultisample(a.RENDERBUFFER,i,f,h,d)):a.renderbufferStorage(a.RENDERBUFFER,f,h,d),a.framebufferRenderbuffer(a.FRAMEBUFFER,a.DEPTH_ATTACHMENT,a.RENDERBUFFER,e)}else c&&u&&(i>0?a.renderbufferStorageMultisample(a.RENDERBUFFER,i,a.DEPTH24_STENCIL8,h,d):a.renderbufferStorage(a.RENDERBUFFER,a.DEPTH_STENCIL,h,d),a.framebufferRenderbuffer(a.FRAMEBUFFER,a.DEPTH_STENCIL_ATTACHMENT,a.RENDERBUFFER,e))}async copyTextureToBuffer(e,n,i,s,a,o){const{backend:l,gl:c}=this,{textureGPU:u,glFormat:h,glType:d}=this.backend.get(e),f=c.createFramebuffer();c.bindFramebuffer(c.READ_FRAMEBUFFER,f);const p=e.isCubeTexture?c.TEXTURE_CUBE_MAP_POSITIVE_X+o:c.TEXTURE_2D;c.framebufferTexture2D(c.READ_FRAMEBUFFER,c.COLOR_ATTACHMENT0,p,u,0);const g=this._getTypedArrayType(d),v=this._getBytesPerTexel(d,h),_=s*a*v,E=c.createBuffer();c.bindBuffer(c.PIXEL_PACK_BUFFER,E),c.bufferData(c.PIXEL_PACK_BUFFER,_,c.STREAM_READ),c.readPixels(n,i,s,a,h,d,0),c.bindBuffer(c.PIXEL_PACK_BUFFER,null),await l.utils._clientWaitAsync();const S=new g(_/g.BYTES_PER_ELEMENT);return c.bindBuffer(c.PIXEL_PACK_BUFFER,E),c.getBufferSubData(c.PIXEL_PACK_BUFFER,0,S),c.bindBuffer(c.PIXEL_PACK_BUFFER,null),c.deleteFramebuffer(f),S}_getTypedArrayType(e){const{gl:n}=this;if(e===n.UNSIGNED_BYTE)return Uint8Array;if(e===n.UNSIGNED_SHORT_4_4_4_4||e===n.UNSIGNED_SHORT_5_5_5_1||e===n.UNSIGNED_SHORT_5_6_5||e===n.UNSIGNED_SHORT)return Uint16Array;if(e===n.UNSIGNED_INT)return Uint32Array;if(e===n.HALF_FLOAT)return Uint16Array;if(e===n.FLOAT)return Float32Array;throw new Error(`Unsupported WebGL type: ${e}`)}_getBytesPerTexel(e,n){const{gl:i}=this;let s=0;if(e===i.UNSIGNED_BYTE&&(s=1),(e===i.UNSIGNED_SHORT_4_4_4_4||e===i.UNSIGNED_SHORT_5_5_5_1||e===i.UNSIGNED_SHORT_5_6_5||e===i.UNSIGNED_SHORT||e===i.HALF_FLOAT)&&(s=2),(e===i.UNSIGNED_INT||e===i.FLOAT)&&(s=4),n===i.RGBA)return s*4;if(n===i.RGB)return s*3;if(n===i.ALPHA)return s}}class bDe{constructor(e){this.backend=e,this.gl=this.backend.gl,this.availableExtensions=this.gl.getSupportedExtensions(),this.extensions={}}get(e){let n=this.extensions[e];return n===void 0&&(n=this.gl.getExtension(e),this.extensions[e]=n),n}has(e){return this.availableExtensions.includes(e)}}class _De{constructor(e){this.backend=e,this.maxAnisotropy=null}getMaxAnisotropy(){if(this.maxAnisotropy!==null)return this.maxAnisotropy;const e=this.backend.gl,n=this.backend.extensions;if(n.has("EXT_texture_filter_anisotropic")===!0){const i=n.get("EXT_texture_filter_anisotropic");this.maxAnisotropy=e.getParameter(i.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else this.maxAnisotropy=0;return this.maxAnisotropy}}const TW={WEBGL_multi_draw:"WEBGL_multi_draw",WEBGL_compressed_texture_astc:"texture-compression-astc",WEBGL_compressed_texture_etc:"texture-compression-etc2",WEBGL_compressed_texture_etc1:"texture-compression-etc1",WEBGL_compressed_texture_pvrtc:"texture-compression-pvrtc",WEBKIT_WEBGL_compressed_texture_pvrtc:"texture-compression-pvrtc",WEBGL_compressed_texture_s3tc:"texture-compression-bc",EXT_texture_compression_bptc:"texture-compression-bptc",EXT_disjoint_timer_query_webgl2:"timestamp-query"};class wDe{constructor(e){this.gl=e.gl,this.extensions=e.extensions,this.info=e.renderer.info,this.mode=null,this.index=0,this.type=null,this.object=null}render(e,n){const{gl:i,mode:s,object:a,type:o,info:l,index:c}=this;c!==0?i.drawElements(s,n,o,e):i.drawArrays(s,e,n),l.update(a,n,1)}renderInstances(e,n,i){const{gl:s,mode:a,type:o,index:l,object:c,info:u}=this;i!==0&&(l!==0?s.drawElementsInstanced(a,n,o,e,i):s.drawArraysInstanced(a,e,n,i),u.update(c,n,i))}renderMultiDraw(e,n,i){const{extensions:s,mode:a,object:o,info:l}=this;if(i===0)return;const c=s.get("WEBGL_multi_draw");if(c===null)for(let u=0;u<i;u++)this.render(e[u],n[u]);else{this.index!==0?c.multiDrawElementsWEBGL(a,n,0,this.type,e,0,i):c.multiDrawArraysWEBGL(a,e,0,n,0,i);let u=0;for(let h=0;h<i;h++)u+=n[h];l.update(o,u,1)}}renderMultiDrawInstances(e,n,i,s){const{extensions:a,mode:o,object:l,info:c}=this;if(i===0)return;const u=a.get("WEBGL_multi_draw");if(u===null)for(let h=0;h<i;h++)this.renderInstances(e[h],n[h],s[h]);else{this.index!==0?u.multiDrawElementsInstancedWEBGL(o,n,0,this.type,e,0,s,0,i):u.multiDrawArraysInstancedWEBGL(o,e,0,n,0,s,0,i);let h=0;for(let d=0;d<i;d++)h+=n[d]*s[d];c.update(l,h,1)}}}class sie{constructor(e=256){this.trackTimestamp=!0,this.maxQueries=e,this.currentQueryIndex=0,this.queryOffsets=new Map,this.isDisposed=!1,this.lastValue=0,this.pendingResolve=!1}allocateQueriesForContext(){}async resolveQueriesAsync(){}dispose(){}}class SDe extends sie{constructor(e,n,i=2048){if(super(i),this.gl=e,this.type=n,this.ext=e.getExtension("EXT_disjoint_timer_query_webgl2")||e.getExtension("EXT_disjoint_timer_query"),!this.ext){console.warn("EXT_disjoint_timer_query not supported; timestamps will be disabled."),this.trackTimestamp=!1;return}this.queries=[];for(let s=0;s<this.maxQueries;s++)this.queries.push(e.createQuery());this.activeQuery=null,this.queryStates=new Map}allocateQueriesForContext(e){if(!this.trackTimestamp)return null;if(this.currentQueryIndex+2>this.maxQueries)return ic(`WebGPUTimestampQueryPool [${this.type}]: Maximum number of queries exceeded, when using trackTimestamp it is necessary to resolves the queries via renderer.resolveTimestampsAsync( THREE.TimestampQuery.${this.type.toUpperCase()} ).`),null;const n=this.currentQueryIndex;return this.currentQueryIndex+=2,this.queryStates.set(n,"inactive"),this.queryOffsets.set(e.id,n),n}beginQuery(e){if(!this.trackTimestamp||this.isDisposed)return;const n=this.queryOffsets.get(e.id);if(n==null||this.activeQuery!==null)return;const i=this.queries[n];if(i)try{this.queryStates.get(n)==="inactive"&&(this.gl.beginQuery(this.ext.TIME_ELAPSED_EXT,i),this.activeQuery=n,this.queryStates.set(n,"started"))}catch(s){console.error("Error in beginQuery:",s),this.activeQuery=null,this.queryStates.set(n,"inactive")}}endQuery(e){if(!this.trackTimestamp||this.isDisposed)return;const n=this.queryOffsets.get(e.id);if(n!=null&&this.activeQuery===n)try{this.gl.endQuery(this.ext.TIME_ELAPSED_EXT),this.queryStates.set(n,"ended"),this.activeQuery=null}catch(i){console.error("Error in endQuery:",i),this.queryStates.set(n,"inactive"),this.activeQuery=null}}async resolveQueriesAsync(){if(!this.trackTimestamp||this.pendingResolve)return this.lastValue;this.pendingResolve=!0;try{const e=[];for(const[s,a]of this.queryStates)if(a==="ended"){const o=this.queries[s];e.push(this.resolveQuery(o))}if(e.length===0)return this.lastValue;const i=(await Promise.all(e)).reduce((s,a)=>s+a,0);return this.lastValue=i,this.currentQueryIndex=0,this.queryOffsets.clear(),this.queryStates.clear(),this.activeQuery=null,i}catch(e){return console.error("Error resolving queries:",e),this.lastValue}finally{this.pendingResolve=!1}}async resolveQuery(e){return new Promise(n=>{if(this.isDisposed){n(this.lastValue);return}let i,s=!1;const a=()=>{i&&(clearTimeout(i),i=null)},o=c=>{s||(s=!0,a(),n(c))},l=()=>{if(this.isDisposed){o(this.lastValue);return}try{if(this.gl.getParameter(this.ext.GPU_DISJOINT_EXT)){o(this.lastValue);return}if(!this.gl.getQueryParameter(e,this.gl.QUERY_RESULT_AVAILABLE)){i=setTimeout(l,1);return}const h=this.gl.getQueryParameter(e,this.gl.QUERY_RESULT);n(Number(h)/1e6)}catch(c){console.error("Error checking query:",c),n(this.lastValue)}};l()})}dispose(){if(!this.isDisposed&&(this.isDisposed=!0,!!this.trackTimestamp)){for(const e of this.queries)this.gl.deleteQuery(e);this.queries=[],this.queryStates.clear(),this.queryOffsets.clear(),this.lastValue=0,this.activeQuery=null}}}class EW extends iie{constructor(e={}){super(e),this.isWebGLBackend=!0,this.attributeUtils=null,this.extensions=null,this.capabilities=null,this.textureUtils=null,this.bufferRenderer=null,this.gl=null,this.state=null,this.utils=null,this.vaoCache={},this.transformFeedbackCache={},this.discard=!1,this.disjoint=null,this.parallel=null,this._currentContext=null,this._knownBindings=new WeakSet,this._supportsInvalidateFramebuffer=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),this._xrFramebuffer=null}init(e){super.init(e);const n=this.parameters,i={antialias:e.samples>0,alpha:!0,depth:e.depth,stencil:e.stencil},s=n.context!==void 0?n.context:e.domElement.getContext("webgl2",i);function a(o){o.preventDefault();const l={api:"WebGL",message:o.statusMessage||"Unknown reason",reason:null,originalEvent:o};e.onDeviceLost(l)}this._onContextLost=a,e.domElement.addEventListener("webglcontextlost",a,!1),this.gl=s,this.extensions=new bDe(this),this.capabilities=new _De(this),this.attributeUtils=new gDe(this),this.textureUtils=new xDe(this),this.bufferRenderer=new wDe(this),this.state=new yDe(this),this.utils=new vDe(this),this.extensions.get("EXT_color_buffer_float"),this.extensions.get("WEBGL_clip_cull_distance"),this.extensions.get("OES_texture_float_linear"),this.extensions.get("EXT_color_buffer_half_float"),this.extensions.get("WEBGL_multisampled_render_to_texture"),this.extensions.get("WEBGL_render_shared_exponent"),this.extensions.get("WEBGL_multi_draw"),this.disjoint=this.extensions.get("EXT_disjoint_timer_query_webgl2"),this.parallel=this.extensions.get("KHR_parallel_shader_compile")}get coordinateSystem(){return Ka}async getArrayBufferAsync(e){return await this.attributeUtils.getArrayBufferAsync(e)}async waitForGPU(){await this.utils._clientWaitAsync()}async makeXRCompatible(){this.gl.getContextAttributes().xrCompatible!==!0&&await this.gl.makeXRCompatible()}setXRTarget(e){this._xrFramebuffer=e}setXRRenderTargetTextures(e,n,i=null){const s=this.gl;if(this.set(e.texture,{textureGPU:n,glInternalFormat:s.RGBA8}),i!==null){const a=e.stencilBuffer?s.DEPTH24_STENCIL8:s.DEPTH_COMPONENT24;this.set(e.depthTexture,{textureGPU:i,glInternalFormat:a}),this.extensions.has("WEBGL_multisampled_render_to_texture")===!0&&e.autoAllocateDepthBuffer&&console.warn("THREE.WebGLBackend: Render-to-texture extension was disabled because an external texture was provided"),e.autoAllocateDepthBuffer=!1}}initTimestampQuery(e){if(!this.disjoint||!this.trackTimestamp)return;const n=e.isComputeNode?"compute":"render";this.timestampQueryPool[n]||(this.timestampQueryPool[n]=new SDe(this.gl,n,2048));const i=this.timestampQueryPool[n];i.allocateQueriesForContext(e)!==null&&i.beginQuery(e)}prepareTimestampBuffer(e){if(!this.disjoint||!this.trackTimestamp)return;const n=e.isComputeNode?"compute":"render";this.timestampQueryPool[n].endQuery(e)}getContext(){return this.gl}beginRender(e){const{state:n,gl:i}=this,s=this.get(e);if(e.viewport?this.updateViewport(e):n.viewport(0,0,i.drawingBufferWidth,i.drawingBufferHeight),e.scissor){const{x:o,y:l,width:c,height:u}=e.scissorValue;n.scissor(o,e.height-u-l,c,u)}this.initTimestampQuery(e),s.previousContext=this._currentContext,this._currentContext=e,this._setFramebuffer(e),this.clear(e.clearColor,e.clearDepth,e.clearStencil,e,!1);const a=e.occlusionQueryCount;a>0&&(s.currentOcclusionQueries=s.occlusionQueries,s.currentOcclusionQueryObjects=s.occlusionQueryObjects,s.lastOcclusionObject=null,s.occlusionQueries=new Array(a),s.occlusionQueryObjects=new Array(a),s.occlusionQueryIndex=0)}finishRender(e){const{gl:n,state:i}=this,s=this.get(e),a=s.previousContext;i.resetVertexState();const o=e.occlusionQueryCount;o>0&&(o>s.occlusionQueryIndex&&n.endQuery(n.ANY_SAMPLES_PASSED),this.resolveOccludedAsync(e));const l=e.textures;if(l!==null)for(let c=0;c<l.length;c++){const u=l[c];u.generateMipmaps&&this.generateMipmaps(u)}if(this._currentContext=a,e.textures!==null&&e.renderTarget){const c=this.get(e.renderTarget),{samples:u}=e.renderTarget;if(u>0&&this._useMultisampledRTT(e.renderTarget)===!1){const h=c.framebuffers[e.getCacheKey()],d=n.COLOR_BUFFER_BIT,f=c.msaaFrameBuffer,p=e.textures;i.bindFramebuffer(n.READ_FRAMEBUFFER,f),i.bindFramebuffer(n.DRAW_FRAMEBUFFER,h);for(let g=0;g<p.length;g++)if(e.scissor){const{x:v,y:x,width:_,height:E}=e.scissorValue,S=e.height-E-x;n.blitFramebuffer(v,S,v+_,S+E,v,S,v+_,S+E,d,n.NEAREST),this._supportsInvalidateFramebuffer===!0&&n.invalidateSubFramebuffer(n.READ_FRAMEBUFFER,c.invalidationArray,v,S,_,E)}else n.blitFramebuffer(0,0,e.width,e.height,0,0,e.width,e.height,d,n.NEAREST),this._supportsInvalidateFramebuffer===!0&&n.invalidateFramebuffer(n.READ_FRAMEBUFFER,c.invalidationArray)}}a!==null&&(this._setFramebuffer(a),a.viewport?this.updateViewport(a):i.viewport(0,0,n.drawingBufferWidth,n.drawingBufferHeight)),this.prepareTimestampBuffer(e)}resolveOccludedAsync(e){const n=this.get(e),{currentOcclusionQueries:i,currentOcclusionQueryObjects:s}=n;if(i&&s){const a=new WeakSet,{gl:o}=this;n.currentOcclusionQueryObjects=null,n.currentOcclusionQueries=null;const l=()=>{let c=0;for(let u=0;u<i.length;u++){const h=i[u];h!==null&&o.getQueryParameter(h,o.QUERY_RESULT_AVAILABLE)&&(o.getQueryParameter(h,o.QUERY_RESULT)===0&&a.add(s[u]),i[u]=null,o.deleteQuery(h),c++)}c<i.length?requestAnimationFrame(l):n.occluded=a};l()}}isOccluded(e,n){const i=this.get(e);return i.occluded&&i.occluded.has(n)}updateViewport(e){const{state:n}=this,{x:i,y:s,width:a,height:o}=e.viewportValue;n.viewport(i,e.height-o-s,a,o)}setScissorTest(e){this.state.setScissorTest(e)}getClearColor(){const e=super.getClearColor();return e.r*=e.a,e.g*=e.a,e.b*=e.a,e}clear(e,n,i,s=null,a=!0){const{gl:o,renderer:l}=this;s===null&&(s={textures:null,clearColorValue:this.getClearColor()});let c=0;if(e&&(c|=o.COLOR_BUFFER_BIT),n&&(c|=o.DEPTH_BUFFER_BIT),i&&(c|=o.STENCIL_BUFFER_BIT),c!==0){let u;s.clearColorValue?u=s.clearColorValue:u=this.getClearColor();const h=l.getClearDepth(),d=l.getClearStencil();if(n&&this.state.setDepthMask(!0),s.textures===null)o.clearColor(u.r,u.g,u.b,u.a),o.clear(c);else{if(a&&this._setFramebuffer(s),e)for(let f=0;f<s.textures.length;f++)f===0?o.clearBufferfv(o.COLOR,f,[u.r,u.g,u.b,u.a]):o.clearBufferfv(o.COLOR,f,[0,0,0,1]);n&&i?o.clearBufferfi(o.DEPTH_STENCIL,0,h,d):n?o.clearBufferfv(o.DEPTH,0,[h]):i&&o.clearBufferiv(o.STENCIL,0,[d])}}}beginCompute(e){const{state:n,gl:i}=this;n.bindFramebuffer(i.FRAMEBUFFER,null),this.initTimestampQuery(e)}compute(e,n,i,s){const{state:a,gl:o}=this;this.discard===!1&&(o.enable(o.RASTERIZER_DISCARD),this.discard=!0);const{programGPU:l,transformBuffers:c,attributes:u}=this.get(s),h=this._getVaoKey(u),d=this.vaoCache[h];d===void 0?this._createVao(u):a.setVertexState(d),a.useProgram(l),this._bindUniforms(i);const f=this._getTransformFeedback(c);o.bindTransformFeedback(o.TRANSFORM_FEEDBACK,f),o.beginTransformFeedback(o.POINTS),u[0].isStorageInstancedBufferAttribute?o.drawArraysInstanced(o.POINTS,0,1,n.count):o.drawArrays(o.POINTS,0,n.count),o.endTransformFeedback(),o.bindTransformFeedback(o.TRANSFORM_FEEDBACK,null);for(let p=0;p<c.length;p++){const g=c[p];g.pbo&&this.textureUtils.copyBufferToTexture(g.transformBuffer,g.pbo),g.switchBuffers()}}finishCompute(e){const n=this.gl;this.discard=!1,n.disable(n.RASTERIZER_DISCARD),this.prepareTimestampBuffer(e),this._currentContext&&this._setFramebuffer(this._currentContext)}draw(e){const{object:n,pipeline:i,material:s,context:a,hardwareClippingPlanes:o}=e,{programGPU:l}=this.get(i),{gl:c,state:u}=this,h=this.get(a),d=e.getDrawParameters();if(d===null)return;this._bindUniforms(e.getBindings());const f=n.isMesh&&n.matrixWorld.determinant()<0;u.setMaterial(s,f,o),u.useProgram(l);const p=this.get(e);let g=p.staticVao;if(g===void 0||p.geometryId!==e.geometry.id){const A=this._getVaoKey(e.getAttributes());if(g=this.vaoCache[A],g===void 0){let P;({vaoGPU:g,staticVao:P}=this._createVao(e.getAttributes())),P&&(p.staticVao=g,p.geometryId=e.geometry.id)}}const v=e.getIndex(),x=v!==null?this.get(v).bufferGPU:null;u.setVertexState(g,x);const _=h.lastOcclusionObject;if(_!==n&&_!==void 0){if(_!==null&&_.occlusionTest===!0&&(c.endQuery(c.ANY_SAMPLES_PASSED),h.occlusionQueryIndex++),n.occlusionTest===!0){const A=c.createQuery();c.beginQuery(c.ANY_SAMPLES_PASSED,A),h.occlusionQueries[h.occlusionQueryIndex]=A,h.occlusionQueryObjects[h.occlusionQueryIndex]=n}h.lastOcclusionObject=n}const E=this.bufferRenderer;n.isPoints?E.mode=c.POINTS:n.isLineSegments?E.mode=c.LINES:n.isLine?E.mode=c.LINE_STRIP:n.isLineLoop?E.mode=c.LINE_LOOP:s.wireframe===!0?(u.setLineWidth(s.wireframeLinewidth*this.renderer.getPixelRatio()),E.mode=c.LINES):E.mode=c.TRIANGLES;const{vertexCount:S,instanceCount:T}=d;let{firstVertex:M}=d;if(E.object=n,v!==null){M*=v.array.BYTES_PER_ELEMENT;const A=this.get(v);E.index=v.count,E.type=A.type}else E.index=0;const C=()=>{n.isBatchedMesh?n._multiDrawInstances!==null?(ic("THREE.WebGLBackend: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),E.renderMultiDrawInstances(n._multiDrawStarts,n._multiDrawCounts,n._multiDrawCount,n._multiDrawInstances)):this.hasFeature("WEBGL_multi_draw")?E.renderMultiDraw(n._multiDrawStarts,n._multiDrawCounts,n._multiDrawCount):ic("THREE.WebGLRenderer: WEBGL_multi_draw not supported."):T>1?E.renderInstances(M,S,T):E.render(M,S)};if(e.camera.isArrayCamera&&e.camera.cameras.length>0){const A=this.get(e.camera),P=e.camera.cameras,R=e.getBindingGroup("cameraIndex").bindings[0];if(A.indexesGPU===void 0||A.indexesGPU.length!==P.length){const F=new Uint32Array([0,0,0,0]),U=[];for(let B=0,W=P.length;B<W;B++){const j=c.createBuffer();F[0]=B,c.bindBuffer(c.UNIFORM_BUFFER,j),c.bufferData(c.UNIFORM_BUFFER,F,c.STATIC_DRAW),U.push(j)}A.indexesGPU=U}const O=this.get(R),D=this.renderer.getPixelRatio();for(let F=0,U=P.length;F<U;F++){const B=P[F];if(n.layers.test(B.layers)){const W=B.viewport,j=W.x*D,$=W.y*D,z=W.width*D,Z=W.height*D;u.viewport(Math.floor(j),Math.floor(e.context.height-Z-$),Math.floor(z),Math.floor(Z)),u.bindBufferBase(c.UNIFORM_BUFFER,O.index,A.indexesGPU[F]),C()}}}else C()}needsRenderUpdate(){return!1}getRenderCacheKey(){return""}createDefaultTexture(e){this.textureUtils.createDefaultTexture(e)}createTexture(e,n){this.textureUtils.createTexture(e,n)}updateTexture(e,n){this.textureUtils.updateTexture(e,n)}generateMipmaps(e){this.textureUtils.generateMipmaps(e)}destroyTexture(e){this.textureUtils.destroyTexture(e)}async copyTextureToBuffer(e,n,i,s,a,o){return this.textureUtils.copyTextureToBuffer(e,n,i,s,a,o)}createSampler(){}destroySampler(){}createNodeBuilder(e,n){return new fDe(e,n)}createProgram(e){const n=this.gl,{stage:i,code:s}=e,a=i==="fragment"?n.createShader(n.FRAGMENT_SHADER):n.createShader(n.VERTEX_SHADER);n.shaderSource(a,s),n.compileShader(a),this.set(e,{shaderGPU:a})}destroyProgram(e){this.delete(e)}createRenderPipeline(e,n){const i=this.gl,s=e.pipeline,{fragmentProgram:a,vertexProgram:o}=s,l=i.createProgram(),c=this.get(a).shaderGPU,u=this.get(o).shaderGPU;if(i.attachShader(l,c),i.attachShader(l,u),i.linkProgram(l),this.set(s,{programGPU:l,fragmentShader:c,vertexShader:u}),n!==null&&this.parallel){const h=new Promise(d=>{const f=this.parallel,p=()=>{i.getProgramParameter(l,f.COMPLETION_STATUS_KHR)?(this._completeCompile(e,s),d()):requestAnimationFrame(p)};p()});n.push(h);return}this._completeCompile(e,s)}_handleSource(e,n){const i=e.split(`
`),s=[],a=Math.max(n-6,0),o=Math.min(n+6,i.length);for(let l=a;l<o;l++){const c=l+1;s.push(`${c===n?">":" "} ${c}: ${i[l]}`)}return s.join(`
`)}_getShaderErrors(e,n,i){const s=e.getShaderParameter(n,e.COMPILE_STATUS),a=e.getShaderInfoLog(n).trim();if(s&&a==="")return"";const o=/ERROR: 0:(\d+)/.exec(a);if(o){const l=parseInt(o[1]);return i.toUpperCase()+`

`+a+`

`+this._handleSource(e.getShaderSource(n),l)}else return a}_logProgramError(e,n,i){if(this.renderer.debug.checkShaderErrors){const s=this.gl,a=s.getProgramInfoLog(e).trim();if(s.getProgramParameter(e,s.LINK_STATUS)===!1)if(typeof this.renderer.debug.onShaderError=="function")this.renderer.debug.onShaderError(s,e,i,n);else{const o=this._getShaderErrors(s,i,"vertex"),l=this._getShaderErrors(s,n,"fragment");console.error("THREE.WebGLProgram: Shader Error "+s.getError()+" - VALIDATE_STATUS "+s.getProgramParameter(e,s.VALIDATE_STATUS)+`

Program Info Log: `+a+`
`+o+`
`+l)}else a!==""&&console.warn("THREE.WebGLProgram: Program Info Log:",a)}}_completeCompile(e,n){const{state:i,gl:s}=this,a=this.get(n),{programGPU:o,fragmentShader:l,vertexShader:c}=a;s.getProgramParameter(o,s.LINK_STATUS)===!1&&this._logProgramError(o,l,c),i.useProgram(o);const u=e.getBindings();this._setupBindings(u,o),this.set(n,{programGPU:o})}createComputePipeline(e,n){const{state:i,gl:s}=this,a={stage:"fragment",code:`#version 300 es
precision highp float;
void main() {}`};this.createProgram(a);const{computeProgram:o}=e,l=s.createProgram(),c=this.get(a).shaderGPU,u=this.get(o).shaderGPU,h=o.transforms,d=[],f=[];for(let x=0;x<h.length;x++){const _=h[x];d.push(_.varyingName),f.push(_.attributeNode)}s.attachShader(l,c),s.attachShader(l,u),s.transformFeedbackVaryings(l,d,s.SEPARATE_ATTRIBS),s.linkProgram(l),s.getProgramParameter(l,s.LINK_STATUS)===!1&&this._logProgramError(l,c,u),i.useProgram(l),this._setupBindings(n,l);const p=o.attributes,g=[],v=[];for(let x=0;x<p.length;x++){const _=p[x].node.attribute;g.push(_),this.has(_)||this.attributeUtils.createAttribute(_,s.ARRAY_BUFFER)}for(let x=0;x<f.length;x++){const _=f[x].attribute;this.has(_)||this.attributeUtils.createAttribute(_,s.ARRAY_BUFFER);const E=this.get(_);v.push(E)}this.set(e,{programGPU:l,transformBuffers:v,attributes:g})}createBindings(e,n){if(this._knownBindings.has(n)===!1){this._knownBindings.add(n);let i=0,s=0;for(const a of n){this.set(a,{textures:s,uniformBuffers:i});for(const o of a.bindings)o.isUniformBuffer&&i++,o.isSampledTexture&&s++}}this.updateBindings(e,n)}updateBindings(e){const{gl:n}=this,i=this.get(e);let s=i.uniformBuffers,a=i.textures;for(const o of e.bindings)if(o.isUniformsGroup||o.isUniformBuffer){const l=o.buffer,c=n.createBuffer();n.bindBuffer(n.UNIFORM_BUFFER,c),n.bufferData(n.UNIFORM_BUFFER,l,n.DYNAMIC_DRAW),this.set(o,{index:s++,bufferGPU:c})}else if(o.isSampledTexture){const{textureGPU:l,glTextureType:c}=this.get(o.texture);this.set(o,{index:a++,textureGPU:l,glTextureType:c})}}updateBinding(e){const n=this.gl;if(e.isUniformsGroup||e.isUniformBuffer){const s=this.get(e).bufferGPU,a=e.buffer;n.bindBuffer(n.UNIFORM_BUFFER,s),n.bufferData(n.UNIFORM_BUFFER,a,n.DYNAMIC_DRAW)}}createIndexAttribute(e){const n=this.gl;this.attributeUtils.createAttribute(e,n.ELEMENT_ARRAY_BUFFER)}createAttribute(e){if(this.has(e))return;const n=this.gl;this.attributeUtils.createAttribute(e,n.ARRAY_BUFFER)}createStorageAttribute(e){if(this.has(e))return;const n=this.gl;this.attributeUtils.createAttribute(e,n.ARRAY_BUFFER)}updateAttribute(e){this.attributeUtils.updateAttribute(e)}destroyAttribute(e){this.attributeUtils.destroyAttribute(e)}hasFeature(e){const n=Object.keys(TW).filter(s=>TW[s]===e),i=this.extensions;for(let s=0;s<n.length;s++)if(i.has(n[s]))return!0;return!1}getMaxAnisotropy(){return this.capabilities.getMaxAnisotropy()}copyTextureToTexture(e,n,i=null,s=null,a=0,o=0){this.textureUtils.copyTextureToTexture(e,n,i,s,a,o)}copyFramebufferToTexture(e,n,i){this.textureUtils.copyFramebufferToTexture(e,n,i)}_setFramebuffer(e){const{gl:n,state:i}=this;let s=null;if(e.textures!==null){const a=e.renderTarget,o=this.get(a),{samples:l,depthBuffer:c,stencilBuffer:u}=a,h=a.isWebGLCubeRenderTarget===!0,d=a.isRenderTarget3D===!0,f=a.isRenderTargetArray===!0,p=a.isXRRenderTarget===!0,g=p===!0&&a.hasExternalTextures===!0;let v=o.msaaFrameBuffer,x=o.depthRenderbuffer;const _=this.extensions.get("WEBGL_multisampled_render_to_texture"),E=this._useMultisampledRTT(a),S=Lre(e);let T;if(h?(o.cubeFramebuffers||(o.cubeFramebuffers={}),T=o.cubeFramebuffers[S]):p&&g===!1?T=this._xrFramebuffer:(o.framebuffers||(o.framebuffers={}),T=o.framebuffers[S]),T===void 0){T=n.createFramebuffer(),i.bindFramebuffer(n.FRAMEBUFFER,T);const M=e.textures;if(h){o.cubeFramebuffers[S]=T;const{textureGPU:C}=this.get(M[0]),A=this.renderer._activeCubeFace;n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+A,C,0)}else{o.framebuffers[S]=T;for(let C=0;C<M.length;C++){const A=M[C],P=this.get(A);P.renderTarget=e.renderTarget,P.cacheKey=S;const R=n.COLOR_ATTACHMENT0+C;if(d||f){const O=this.renderer._activeCubeFace;n.framebufferTextureLayer(n.FRAMEBUFFER,R,P.textureGPU,0,O)}else g&&E?_.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,R,n.TEXTURE_2D,P.textureGPU,0,l):n.framebufferTexture2D(n.FRAMEBUFFER,R,n.TEXTURE_2D,P.textureGPU,0)}i.drawBuffers(e,T)}if(a.isXRRenderTarget&&a.autoAllocateDepthBuffer===!0){const C=n.createRenderbuffer();this.textureUtils.setupRenderBufferStorage(C,e,0,E),o.xrDepthRenderbuffer=C}else if(e.depthTexture!==null){const C=this.get(e.depthTexture),A=u?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;C.renderTarget=e.renderTarget,C.cacheKey=S,g&&E?_.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,A,n.TEXTURE_2D,C.textureGPU,0,l):n.framebufferTexture2D(n.FRAMEBUFFER,A,n.TEXTURE_2D,C.textureGPU,0)}}else if(p&&g){i.bindFramebuffer(n.FRAMEBUFFER,T);const M=this.get(e.textures[0]);E?_.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,M.textureGPU,0,l):n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,M.textureGPU,0);const C=u?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;if(a.autoAllocateDepthBuffer===!0){const A=o.xrDepthRenderbuffer;n.bindRenderbuffer(n.RENDERBUFFER,A),n.framebufferRenderbuffer(n.FRAMEBUFFER,C,n.RENDERBUFFER,A)}else{const A=this.get(e.depthTexture);E?_.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,C,n.TEXTURE_2D,A.textureGPU,0,l):n.framebufferTexture2D(n.FRAMEBUFFER,C,n.TEXTURE_2D,A.textureGPU,0)}}if(l>0&&E===!1){if(v===void 0){const M=[];v=n.createFramebuffer(),i.bindFramebuffer(n.FRAMEBUFFER,v);const C=[],A=e.textures;for(let P=0;P<A.length;P++){if(C[P]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,C[P]),M.push(n.COLOR_ATTACHMENT0+P),c){const D=u?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;M.push(D)}const R=e.textures[P],O=this.get(R);n.renderbufferStorageMultisample(n.RENDERBUFFER,l,O.glInternalFormat,e.width,e.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+P,n.RENDERBUFFER,C[P])}if(o.msaaFrameBuffer=v,o.msaaRenderbuffers=C,x===void 0){x=n.createRenderbuffer(),this.textureUtils.setupRenderBufferStorage(x,e,l),o.depthRenderbuffer=x;const P=u?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;M.push(P)}o.invalidationArray=M}s=o.msaaFrameBuffer}else s=T}i.bindFramebuffer(n.FRAMEBUFFER,s)}_getVaoKey(e){let n="";for(let i=0;i<e.length;i++){const s=this.get(e[i]);n+=":"+s.id}return n}_createVao(e){const{gl:n}=this,i=n.createVertexArray();let s="",a=!0;n.bindVertexArray(i);for(let o=0;o<e.length;o++){const l=e[o],c=this.get(l);s+=":"+c.id,n.bindBuffer(n.ARRAY_BUFFER,c.bufferGPU),n.enableVertexAttribArray(o),(l.isStorageBufferAttribute||l.isStorageInstancedBufferAttribute)&&(a=!1);let u,h;l.isInterleavedBufferAttribute===!0?(u=l.data.stride*c.bytesPerElement,h=l.offset*c.bytesPerElement):(u=0,h=0),c.isInteger?n.vertexAttribIPointer(o,l.itemSize,c.type,u,h):n.vertexAttribPointer(o,l.itemSize,c.type,l.normalized,u,h),l.isInstancedBufferAttribute&&!l.isInterleavedBufferAttribute?n.vertexAttribDivisor(o,l.meshPerAttribute):l.isInterleavedBufferAttribute&&l.data.isInstancedInterleavedBuffer&&n.vertexAttribDivisor(o,l.data.meshPerAttribute)}return n.bindBuffer(n.ARRAY_BUFFER,null),this.vaoCache[s]=i,{vaoGPU:i,staticVao:a}}_getTransformFeedback(e){let n="";for(let a=0;a<e.length;a++)n+=":"+e[a].id;let i=this.transformFeedbackCache[n];if(i!==void 0)return i;const{gl:s}=this;i=s.createTransformFeedback(),s.bindTransformFeedback(s.TRANSFORM_FEEDBACK,i);for(let a=0;a<e.length;a++){const o=e[a];s.bindBufferBase(s.TRANSFORM_FEEDBACK_BUFFER,a,o.transformBuffer)}return s.bindTransformFeedback(s.TRANSFORM_FEEDBACK,null),this.transformFeedbackCache[n]=i,i}_setupBindings(e,n){const i=this.gl;for(const s of e)for(const a of s.bindings){const l=this.get(a).index;if(a.isUniformsGroup||a.isUniformBuffer){const c=i.getUniformBlockIndex(n,a.name);i.uniformBlockBinding(n,c,l)}else if(a.isSampledTexture){const c=i.getUniformLocation(n,a.name);i.uniform1i(c,l)}}}_bindUniforms(e){const{gl:n,state:i}=this;for(const s of e)for(const a of s.bindings){const o=this.get(a),l=o.index;a.isUniformsGroup||a.isUniformBuffer?i.bindBufferBase(n.UNIFORM_BUFFER,l,o.bufferGPU):a.isSampledTexture&&i.bindTexture(o.glTextureType,o.textureGPU,n.TEXTURE0+l)}}_useMultisampledRTT(e){return e.samples>0&&this.extensions.has("WEBGL_multisampled_render_to_texture")===!0&&e.autoAllocateDepthBuffer!==!1}dispose(){const e=this.extensions.get("WEBGL_lose_context");e&&e.loseContext(),this.renderer.domElement.removeEventListener("webglcontextlost",this._onContextLost)}}const Pg={PointList:"point-list",LineList:"line-list",LineStrip:"line-strip",TriangleList:"triangle-list",TriangleStrip:"triangle-strip"},zs={Never:"never",Less:"less",Equal:"equal",LessEqual:"less-equal",Greater:"greater",NotEqual:"not-equal",GreaterEqual:"greater-equal",Always:"always"},Ms={Store:"store"},Qr={Load:"load",Clear:"clear"},CR={CCW:"ccw"},NR={None:"none",Front:"front",Back:"back"},Ey={Uint16:"uint16",Uint32:"uint32"},xe={R8Unorm:"r8unorm",R8Snorm:"r8snorm",R8Uint:"r8uint",R8Sint:"r8sint",R16Uint:"r16uint",R16Sint:"r16sint",R16Float:"r16float",RG8Unorm:"rg8unorm",RG8Snorm:"rg8snorm",RG8Uint:"rg8uint",RG8Sint:"rg8sint",R32Uint:"r32uint",R32Sint:"r32sint",R32Float:"r32float",RG16Uint:"rg16uint",RG16Sint:"rg16sint",RG16Float:"rg16float",RGBA8Unorm:"rgba8unorm",RGBA8UnormSRGB:"rgba8unorm-srgb",RGBA8Snorm:"rgba8snorm",RGBA8Uint:"rgba8uint",RGBA8Sint:"rgba8sint",BGRA8Unorm:"bgra8unorm",BGRA8UnormSRGB:"bgra8unorm-srgb",RGB9E5UFloat:"rgb9e5ufloat",RGB10A2Unorm:"rgb10a2unorm",RG11B10UFloat:"rgb10a2unorm",RG32Uint:"rg32uint",RG32Sint:"rg32sint",RG32Float:"rg32float",RGBA16Uint:"rgba16uint",RGBA16Sint:"rgba16sint",RGBA16Float:"rgba16float",RGBA32Uint:"rgba32uint",RGBA32Sint:"rgba32sint",RGBA32Float:"rgba32float",Depth16Unorm:"depth16unorm",Depth24Plus:"depth24plus",Depth24PlusStencil8:"depth24plus-stencil8",Depth32Float:"depth32float",Depth32FloatStencil8:"depth32float-stencil8",BC1RGBAUnorm:"bc1-rgba-unorm",BC1RGBAUnormSRGB:"bc1-rgba-unorm-srgb",BC2RGBAUnorm:"bc2-rgba-unorm",BC2RGBAUnormSRGB:"bc2-rgba-unorm-srgb",BC3RGBAUnorm:"bc3-rgba-unorm",BC3RGBAUnormSRGB:"bc3-rgba-unorm-srgb",BC4RUnorm:"bc4-r-unorm",BC4RSnorm:"bc4-r-snorm",BC5RGUnorm:"bc5-rg-unorm",BC5RGSnorm:"bc5-rg-snorm",BC6HRGBUFloat:"bc6h-rgb-ufloat",BC6HRGBFloat:"bc6h-rgb-float",BC7RGBAUnorm:"bc7-rgba-unorm",BC7RGBAUnormSRGB:"bc7-rgba-srgb",ETC2RGB8Unorm:"etc2-rgb8unorm",ETC2RGB8UnormSRGB:"etc2-rgb8unorm-srgb",ETC2RGB8A1Unorm:"etc2-rgb8a1unorm",ETC2RGB8A1UnormSRGB:"etc2-rgb8a1unorm-srgb",ETC2RGBA8Unorm:"etc2-rgba8unorm",ETC2RGBA8UnormSRGB:"etc2-rgba8unorm-srgb",EACR11Unorm:"eac-r11unorm",EACR11Snorm:"eac-r11snorm",EACRG11Unorm:"eac-rg11unorm",EACRG11Snorm:"eac-rg11snorm",ASTC4x4Unorm:"astc-4x4-unorm",ASTC4x4UnormSRGB:"astc-4x4-unorm-srgb",ASTC5x4Unorm:"astc-5x4-unorm",ASTC5x4UnormSRGB:"astc-5x4-unorm-srgb",ASTC5x5Unorm:"astc-5x5-unorm",ASTC5x5UnormSRGB:"astc-5x5-unorm-srgb",ASTC6x5Unorm:"astc-6x5-unorm",ASTC6x5UnormSRGB:"astc-6x5-unorm-srgb",ASTC6x6Unorm:"astc-6x6-unorm",ASTC6x6UnormSRGB:"astc-6x6-unorm-srgb",ASTC8x5Unorm:"astc-8x5-unorm",ASTC8x5UnormSRGB:"astc-8x5-unorm-srgb",ASTC8x6Unorm:"astc-8x6-unorm",ASTC8x6UnormSRGB:"astc-8x6-unorm-srgb",ASTC8x8Unorm:"astc-8x8-unorm",ASTC8x8UnormSRGB:"astc-8x8-unorm-srgb",ASTC10x5Unorm:"astc-10x5-unorm",ASTC10x5UnormSRGB:"astc-10x5-unorm-srgb",ASTC10x6Unorm:"astc-10x6-unorm",ASTC10x6UnormSRGB:"astc-10x6-unorm-srgb",ASTC10x8Unorm:"astc-10x8-unorm",ASTC10x8UnormSRGB:"astc-10x8-unorm-srgb",ASTC10x10Unorm:"astc-10x10-unorm",ASTC10x10UnormSRGB:"astc-10x10-unorm-srgb",ASTC12x10Unorm:"astc-12x10-unorm",ASTC12x10UnormSRGB:"astc-12x10-unorm-srgb",ASTC12x12Unorm:"astc-12x12-unorm",ASTC12x12UnormSRGB:"astc-12x12-unorm-srgb"},PR={ClampToEdge:"clamp-to-edge",Repeat:"repeat",MirrorRepeat:"mirror-repeat"},tp={Linear:"linear",Nearest:"nearest"},Fn={Zero:"zero",One:"one",Src:"src",OneMinusSrc:"one-minus-src",SrcAlpha:"src-alpha",OneMinusSrcAlpha:"one-minus-src-alpha",Dst:"dst",OneMinusDstColor:"one-minus-dst",DstAlpha:"dst-alpha",OneMinusDstAlpha:"one-minus-dst-alpha",SrcAlphaSaturated:"src-alpha-saturated",Constant:"constant",OneMinusConstant:"one-minus-constant"},jf={Add:"add",Subtract:"subtract",ReverseSubtract:"reverse-subtract",Min:"min",Max:"max"},MW={None:0,All:15},dd={Keep:"keep",Zero:"zero",Replace:"replace",Invert:"invert",IncrementClamp:"increment-clamp",DecrementClamp:"decrement-clamp",IncrementWrap:"increment-wrap",DecrementWrap:"decrement-wrap"},RR={Storage:"storage",ReadOnlyStorage:"read-only-storage"},OR={WriteOnly:"write-only",ReadOnly:"read-only",ReadWrite:"read-write"},lg={Float:"float",UnfilterableFloat:"unfilterable-float",Depth:"depth",SInt:"sint",UInt:"uint"},AW={TwoD:"2d",ThreeD:"3d"},Va={TwoD:"2d",TwoDArray:"2d-array",Cube:"cube",ThreeD:"3d"},TDe={All:"all"},CS={Vertex:"vertex",Instance:"instance"},Y3={DepthClipControl:"depth-clip-control",Depth32FloatStencil8:"depth32float-stencil8",TextureCompressionBC:"texture-compression-bc",TextureCompressionETC2:"texture-compression-etc2",TextureCompressionASTC:"texture-compression-astc",TimestampQuery:"timestamp-query",IndirectFirstInstance:"indirect-first-instance",ShaderF16:"shader-f16",RG11B10UFloat:"rg11b10ufloat-renderable",BGRA8UNormStorage:"bgra8unorm-storage",Float32Filterable:"float32-filterable",ClipDistances:"clip-distances",DualSourceBlending:"dual-source-blending",Subgroups:"subgroups"};class EDe extends HU{constructor(e,n){super(e),this.texture=n,this.version=n?n.version:0,this.isSampler=!0}}class MDe extends EDe{constructor(e,n,i){super(e,n?n.value:null),this.textureNode=n,this.groupNode=i}update(){this.texture=this.textureNode.value}}class ADe extends Qre{constructor(e,n){super(e,n?n.array:null),this.attribute=n,this.isStorageBuffer=!0}}let CDe=0;class NDe extends ADe{constructor(e,n){super("StorageBuffer_"+CDe++,e?e.value:null),this.nodeUniform=e,this.access=e?e.access:Ju.READ_WRITE,this.groupNode=n}get buffer(){return this.nodeUniform.value}}class PDe extends Jd{constructor(e){super(),this.device=e;const n=`
struct VarysStruct {
	@builtin( position ) Position: vec4<f32>,
	@location( 0 ) vTex : vec2<f32>
};

@vertex
fn main( @builtin( vertex_index ) vertexIndex : u32 ) -> VarysStruct {

	var Varys : VarysStruct;

	var pos = array< vec2<f32>, 4 >(
		vec2<f32>( -1.0,  1.0 ),
		vec2<f32>(  1.0,  1.0 ),
		vec2<f32>( -1.0, -1.0 ),
		vec2<f32>(  1.0, -1.0 )
	);

	var tex = array< vec2<f32>, 4 >(
		vec2<f32>( 0.0, 0.0 ),
		vec2<f32>( 1.0, 0.0 ),
		vec2<f32>( 0.0, 1.0 ),
		vec2<f32>( 1.0, 1.0 )
	);

	Varys.vTex = tex[ vertexIndex ];
	Varys.Position = vec4<f32>( pos[ vertexIndex ], 0.0, 1.0 );

	return Varys;

}
`,i=`
@group( 0 ) @binding( 0 )
var imgSampler : sampler;

@group( 0 ) @binding( 1 )
var img : texture_2d<f32>;

@fragment
fn main( @location( 0 ) vTex : vec2<f32> ) -> @location( 0 ) vec4<f32> {

	return textureSample( img, imgSampler, vTex );

}
`,s=`
@group( 0 ) @binding( 0 )
var imgSampler : sampler;

@group( 0 ) @binding( 1 )
var img : texture_2d<f32>;

@fragment
fn main( @location( 0 ) vTex : vec2<f32> ) -> @location( 0 ) vec4<f32> {

	return textureSample( img, imgSampler, vec2( vTex.x, 1.0 - vTex.y ) );

}
`;this.mipmapSampler=e.createSampler({minFilter:tp.Linear}),this.flipYSampler=e.createSampler({minFilter:tp.Nearest}),this.transferPipelines={},this.flipYPipelines={},this.mipmapVertexShaderModule=e.createShaderModule({label:"mipmapVertex",code:n}),this.mipmapFragmentShaderModule=e.createShaderModule({label:"mipmapFragment",code:i}),this.flipYFragmentShaderModule=e.createShaderModule({label:"flipYFragment",code:s})}getTransferPipeline(e){let n=this.transferPipelines[e];return n===void 0&&(n=this.device.createRenderPipeline({label:`mipmap-${e}`,vertex:{module:this.mipmapVertexShaderModule,entryPoint:"main"},fragment:{module:this.mipmapFragmentShaderModule,entryPoint:"main",targets:[{format:e}]},primitive:{topology:Pg.TriangleStrip,stripIndexFormat:Ey.Uint32},layout:"auto"}),this.transferPipelines[e]=n),n}getFlipYPipeline(e){let n=this.flipYPipelines[e];return n===void 0&&(n=this.device.createRenderPipeline({label:`flipY-${e}`,vertex:{module:this.mipmapVertexShaderModule,entryPoint:"main"},fragment:{module:this.flipYFragmentShaderModule,entryPoint:"main",targets:[{format:e}]},primitive:{topology:Pg.TriangleStrip,stripIndexFormat:Ey.Uint32},layout:"auto"}),this.flipYPipelines[e]=n),n}flipY(e,n,i=0){const s=n.format,{width:a,height:o}=n.size,l=this.getTransferPipeline(s),c=this.getFlipYPipeline(s),u=this.device.createTexture({size:{width:a,height:o,depthOrArrayLayers:1},format:s,usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.TEXTURE_BINDING}),h=e.createView({baseMipLevel:0,mipLevelCount:1,dimension:Va.TwoD,baseArrayLayer:i}),d=u.createView({baseMipLevel:0,mipLevelCount:1,dimension:Va.TwoD,baseArrayLayer:0}),f=this.device.createCommandEncoder({}),p=(g,v,x)=>{const _=g.getBindGroupLayout(0),E=this.device.createBindGroup({layout:_,entries:[{binding:0,resource:this.flipYSampler},{binding:1,resource:v}]}),S=f.beginRenderPass({colorAttachments:[{view:x,loadOp:Qr.Clear,storeOp:Ms.Store,clearValue:[0,0,0,0]}]});S.setPipeline(g),S.setBindGroup(0,E),S.draw(4,1,0,0),S.end()};p(l,h,d),p(c,d,h),this.device.queue.submit([f.finish()]),u.destroy()}generateMipmaps(e,n,i=0){const s=this.get(e);s.useCount===void 0&&(s.useCount=0,s.layers=[]);const a=s.layers[i]||this._mipmapCreateBundles(e,n,i),o=this.device.createCommandEncoder({});this._mipmapRunBundles(o,a),this.device.queue.submit([o.finish()]),s.useCount!==0&&(s.layers[i]=a),s.useCount++}_mipmapCreateBundles(e,n,i){const s=this.getTransferPipeline(n.format),a=s.getBindGroupLayout(0);let o=e.createView({baseMipLevel:0,mipLevelCount:1,dimension:Va.TwoD,baseArrayLayer:i});const l=[];for(let c=1;c<n.mipLevelCount;c++){const u=this.device.createBindGroup({layout:a,entries:[{binding:0,resource:this.mipmapSampler},{binding:1,resource:o}]}),h=e.createView({baseMipLevel:c,mipLevelCount:1,dimension:Va.TwoD,baseArrayLayer:i}),d={colorAttachments:[{view:h,loadOp:Qr.Clear,storeOp:Ms.Store,clearValue:[0,0,0,0]}]},f=this.device.createRenderBundleEncoder({colorFormats:[n.format]});f.setPipeline(s),f.setBindGroup(0,u),f.draw(4,1,0,0),l.push({renderBundles:[f.finish()],passDescriptor:d}),o=h}return l}_mipmapRunBundles(e,n){const i=n.length;for(let s=0;s<i;s++){const a=n[s],o=e.beginRenderPass(a.passDescriptor);o.executeBundles(a.renderBundles),o.end()}}}const RDe={[wj]:"never",[SM]:"less",[Sj]:"equal",[TM]:"less-equal",[Tj]:"greater",[Mj]:"greater-equal",[Aj]:"always",[Ej]:"not-equal"},ODe=[0,1,3,2,4,5];class kDe{constructor(e){this.backend=e,this._passUtils=null,this.defaultTexture={},this.defaultCubeTexture={},this.defaultVideoFrame=null,this.colorBuffer=null,this.depthTexture=new dl,this.depthTexture.name="depthBuffer"}createSampler(e){const n=this.backend,i=n.device,s=n.get(e),a={addressModeU:this._convertAddressMode(e.wrapS),addressModeV:this._convertAddressMode(e.wrapT),addressModeW:this._convertAddressMode(e.wrapR),magFilter:this._convertFilterMode(e.magFilter),minFilter:this._convertFilterMode(e.minFilter),mipmapFilter:this._convertFilterMode(e.minFilter),maxAnisotropy:1};a.magFilter===tp.Linear&&a.minFilter===tp.Linear&&a.mipmapFilter===tp.Linear&&(a.maxAnisotropy=e.anisotropy),e.isDepthTexture&&e.compareFunction!==null&&(a.compare=RDe[e.compareFunction]),s.sampler=i.createSampler(a)}createDefaultTexture(e){let n;const i=Z3(e);e.isCubeTexture?n=this._getDefaultCubeTextureGPU(i):e.isVideoTexture?this.backend.get(e).externalTexture=this._getDefaultVideoFrame():n=this._getDefaultTextureGPU(i),this.backend.get(e).texture=n}createTexture(e,n={}){const i=this.backend,s=i.get(e);if(s.initialized)throw new Error("WebGPUTextureUtils: Texture already initialized.");n.needsMipmaps===void 0&&(n.needsMipmaps=!1),n.levels===void 0&&(n.levels=1),n.depth===void 0&&(n.depth=1);const{width:a,height:o,depth:l,levels:c}=n;e.isFramebufferTexture&&(n.renderTarget?n.format=this.backend.utils.getCurrentColorFormat(n.renderTarget):n.format=this.backend.utils.getPreferredCanvasFormat());const u=this._getDimension(e),h=e.internalFormat||n.format||Z3(e,i.device);s.format=h;const{samples:d,primarySamples:f,isMSAA:p}=i.utils.getTextureSampleData(e);let g=GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST|GPUTextureUsage.COPY_SRC;e.isStorageTexture===!0&&(g|=GPUTextureUsage.STORAGE_BINDING),e.isCompressedTexture!==!0&&e.isCompressedArrayTexture!==!0&&(g|=GPUTextureUsage.RENDER_ATTACHMENT);const v={label:e.name,size:{width:a,height:o,depthOrArrayLayers:l},mipLevelCount:c,sampleCount:f,dimension:u,format:h,usage:g};if(e.isVideoTexture){const x=e.source.data,_=new VideoFrame(x);v.size.width=_.displayWidth,v.size.height=_.displayHeight,_.close(),s.externalTexture=x}else{if(h===void 0){console.warn("WebGPURenderer: Texture format not supported."),this.createDefaultTexture(e);return}s.texture=i.device.createTexture(v)}if(p){const x=Object.assign({},v);x.label=x.label+"-msaa",x.sampleCount=d,s.msaaTexture=i.device.createTexture(x)}s.initialized=!0,s.textureDescriptorGPU=v}destroyTexture(e){const n=this.backend,i=n.get(e);i.texture!==void 0&&i.texture.destroy(),i.msaaTexture!==void 0&&i.msaaTexture.destroy(),n.delete(e)}destroySampler(e){const i=this.backend.get(e);delete i.sampler}generateMipmaps(e){const n=this.backend.get(e);if(e.isCubeTexture)for(let i=0;i<6;i++)this._generateMipmaps(n.texture,n.textureDescriptorGPU,i);else{const i=e.image.depth||1;for(let s=0;s<i;s++)this._generateMipmaps(n.texture,n.textureDescriptorGPU,s)}}getColorBuffer(){this.colorBuffer&&this.colorBuffer.destroy();const e=this.backend,{width:n,height:i}=e.getDrawingBufferSize();return this.colorBuffer=e.device.createTexture({label:"colorBuffer",size:{width:n,height:i,depthOrArrayLayers:1},sampleCount:e.utils.getSampleCount(e.renderer.samples),format:e.utils.getPreferredCanvasFormat(),usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.COPY_SRC}),this.colorBuffer}getDepthBuffer(e=!0,n=!1){const i=this.backend,{width:s,height:a}=i.getDrawingBufferSize(),o=this.depthTexture,l=i.get(o).texture;let c,u;if(n?(c=Do,u=ko):e&&(c=Io,u=Vr),l!==void 0){if(o.image.width===s&&o.image.height===a&&o.format===c&&o.type===u)return l;this.destroyTexture(o)}return o.name="depthBuffer",o.format=c,o.type=u,o.image.width=s,o.image.height=a,this.createTexture(o,{width:s,height:a}),i.get(o).texture}updateTexture(e,n){const i=this.backend.get(e),{textureDescriptorGPU:s}=i;if(!(e.isRenderTargetTexture||s===void 0)){if(e.isDataTexture)this._copyBufferToTexture(n.image,i.texture,s,0,e.flipY);else if(e.isDataArrayTexture||e.isData3DTexture)for(let a=0;a<n.image.depth;a++)this._copyBufferToTexture(n.image,i.texture,s,a,e.flipY,a);else if(e.isCompressedTexture||e.isCompressedArrayTexture)this._copyCompressedBufferToTexture(e.mipmaps,i.texture,s);else if(e.isCubeTexture)this._copyCubeMapToTexture(n.images,i.texture,s,e.flipY);else if(e.isVideoTexture){const a=e.source.data;i.externalTexture=a}else this._copyImageToTexture(n.image,i.texture,s,0,e.flipY);i.version=e.version,e.onUpdate&&e.onUpdate(e)}}async copyTextureToBuffer(e,n,i,s,a,o){const l=this.backend.device,c=this.backend.get(e),u=c.texture,h=c.textureDescriptorGPU.format,d=this._getBytesPerTexel(h);let f=s*d;f=Math.ceil(f/256)*256;const p=l.createBuffer({size:s*a*d,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ}),g=l.createCommandEncoder();g.copyTextureToBuffer({texture:u,origin:{x:n,y:i,z:o}},{buffer:p,bytesPerRow:f},{width:s,height:a});const v=this._getTypedArrayType(h);l.queue.submit([g.finish()]),await p.mapAsync(GPUMapMode.READ);const x=p.getMappedRange();return new v(x)}_isEnvironmentTexture(e){const n=e.mapping;return n===Ld||n===Fd||n===ml||n===gl}_getDefaultTextureGPU(e){let n=this.defaultTexture[e];if(n===void 0){const i=new Oa;i.minFilter=ei,i.magFilter=ei,this.createTexture(i,{width:1,height:1,format:e}),this.defaultTexture[e]=n=i}return this.backend.get(n).texture}_getDefaultCubeTextureGPU(e){let n=this.defaultTexture[e];if(n===void 0){const i=new MM;i.minFilter=ei,i.magFilter=ei,this.createTexture(i,{width:1,height:1,depth:6}),this.defaultCubeTexture[e]=n=i}return this.backend.get(n).texture}_getDefaultVideoFrame(){let e=this.defaultVideoFrame;if(e===null){const n={timestamp:0,codedWidth:1,codedHeight:1,format:"RGBA"};this.defaultVideoFrame=e=new VideoFrame(new Uint8Array([0,0,0,255]),n)}return e}_copyCubeMapToTexture(e,n,i,s){for(let a=0;a<6;a++){const o=e[a],l=s===!0?ODe[a]:a;o.isDataTexture?this._copyBufferToTexture(o.image,n,i,l,s):this._copyImageToTexture(o,n,i,l,s)}}_copyImageToTexture(e,n,i,s,a){this.backend.device.queue.copyExternalImageToTexture({source:e,flipY:a},{texture:n,mipLevel:0,origin:{x:0,y:0,z:s}},{width:e.width,height:e.height,depthOrArrayLayers:1})}_getPassUtils(){let e=this._passUtils;return e===null&&(this._passUtils=e=new PDe(this.backend.device)),e}_generateMipmaps(e,n,i=0){this._getPassUtils().generateMipmaps(e,n,i)}_flipY(e,n,i=0){this._getPassUtils().flipY(e,n,i)}_copyBufferToTexture(e,n,i,s,a,o=0){const l=this.backend.device,c=e.data,u=this._getBytesPerTexel(i.format),h=e.width*u;l.queue.writeTexture({texture:n,mipLevel:0,origin:{x:0,y:0,z:s}},c,{offset:e.width*e.height*u*o,bytesPerRow:h},{width:e.width,height:e.height,depthOrArrayLayers:1}),a===!0&&this._flipY(n,i,s)}_copyCompressedBufferToTexture(e,n,i){const s=this.backend.device,a=this._getBlockData(i.format),o=i.size.depthOrArrayLayers>1;for(let l=0;l<e.length;l++){const c=e[l],u=c.width,h=c.height,d=o?i.size.depthOrArrayLayers:1,f=Math.ceil(u/a.width)*a.byteLength,p=f*Math.ceil(h/a.height);for(let g=0;g<d;g++)s.queue.writeTexture({texture:n,mipLevel:l,origin:{x:0,y:0,z:g}},c.data,{offset:g*p,bytesPerRow:f,rowsPerImage:Math.ceil(h/a.height)},{width:Math.ceil(u/a.width)*a.width,height:Math.ceil(h/a.height)*a.height,depthOrArrayLayers:1})}}_getBlockData(e){if(e===xe.BC1RGBAUnorm||e===xe.BC1RGBAUnormSRGB)return{byteLength:8,width:4,height:4};if(e===xe.BC2RGBAUnorm||e===xe.BC2RGBAUnormSRGB)return{byteLength:16,width:4,height:4};if(e===xe.BC3RGBAUnorm||e===xe.BC3RGBAUnormSRGB)return{byteLength:16,width:4,height:4};if(e===xe.BC4RUnorm||e===xe.BC4RSnorm)return{byteLength:8,width:4,height:4};if(e===xe.BC5RGUnorm||e===xe.BC5RGSnorm)return{byteLength:16,width:4,height:4};if(e===xe.BC6HRGBUFloat||e===xe.BC6HRGBFloat)return{byteLength:16,width:4,height:4};if(e===xe.BC7RGBAUnorm||e===xe.BC7RGBAUnormSRGB)return{byteLength:16,width:4,height:4};if(e===xe.ETC2RGB8Unorm||e===xe.ETC2RGB8UnormSRGB)return{byteLength:8,width:4,height:4};if(e===xe.ETC2RGB8A1Unorm||e===xe.ETC2RGB8A1UnormSRGB)return{byteLength:8,width:4,height:4};if(e===xe.ETC2RGBA8Unorm||e===xe.ETC2RGBA8UnormSRGB)return{byteLength:16,width:4,height:4};if(e===xe.EACR11Unorm)return{byteLength:8,width:4,height:4};if(e===xe.EACR11Snorm)return{byteLength:8,width:4,height:4};if(e===xe.EACRG11Unorm)return{byteLength:16,width:4,height:4};if(e===xe.EACRG11Snorm)return{byteLength:16,width:4,height:4};if(e===xe.ASTC4x4Unorm||e===xe.ASTC4x4UnormSRGB)return{byteLength:16,width:4,height:4};if(e===xe.ASTC5x4Unorm||e===xe.ASTC5x4UnormSRGB)return{byteLength:16,width:5,height:4};if(e===xe.ASTC5x5Unorm||e===xe.ASTC5x5UnormSRGB)return{byteLength:16,width:5,height:5};if(e===xe.ASTC6x5Unorm||e===xe.ASTC6x5UnormSRGB)return{byteLength:16,width:6,height:5};if(e===xe.ASTC6x6Unorm||e===xe.ASTC6x6UnormSRGB)return{byteLength:16,width:6,height:6};if(e===xe.ASTC8x5Unorm||e===xe.ASTC8x5UnormSRGB)return{byteLength:16,width:8,height:5};if(e===xe.ASTC8x6Unorm||e===xe.ASTC8x6UnormSRGB)return{byteLength:16,width:8,height:6};if(e===xe.ASTC8x8Unorm||e===xe.ASTC8x8UnormSRGB)return{byteLength:16,width:8,height:8};if(e===xe.ASTC10x5Unorm||e===xe.ASTC10x5UnormSRGB)return{byteLength:16,width:10,height:5};if(e===xe.ASTC10x6Unorm||e===xe.ASTC10x6UnormSRGB)return{byteLength:16,width:10,height:6};if(e===xe.ASTC10x8Unorm||e===xe.ASTC10x8UnormSRGB)return{byteLength:16,width:10,height:8};if(e===xe.ASTC10x10Unorm||e===xe.ASTC10x10UnormSRGB)return{byteLength:16,width:10,height:10};if(e===xe.ASTC12x10Unorm||e===xe.ASTC12x10UnormSRGB)return{byteLength:16,width:12,height:10};if(e===xe.ASTC12x12Unorm||e===xe.ASTC12x12UnormSRGB)return{byteLength:16,width:12,height:12}}_convertAddressMode(e){let n=PR.ClampToEdge;return e===_p?n=PR.Repeat:e===wp&&(n=PR.MirrorRepeat),n}_convertFilterMode(e){let n=tp.Linear;return(e===ei||e===yj||e===qu)&&(n=tp.Nearest),n}_getBytesPerTexel(e){if(e===xe.R8Unorm||e===xe.R8Snorm||e===xe.R8Uint||e===xe.R8Sint)return 1;if(e===xe.R16Uint||e===xe.R16Sint||e===xe.R16Float||e===xe.RG8Unorm||e===xe.RG8Snorm||e===xe.RG8Uint||e===xe.RG8Sint)return 2;if(e===xe.R32Uint||e===xe.R32Sint||e===xe.R32Float||e===xe.RG16Uint||e===xe.RG16Sint||e===xe.RG16Float||e===xe.RGBA8Unorm||e===xe.RGBA8UnormSRGB||e===xe.RGBA8Snorm||e===xe.RGBA8Uint||e===xe.RGBA8Sint||e===xe.BGRA8Unorm||e===xe.BGRA8UnormSRGB||e===xe.RGB9E5UFloat||e===xe.RGB10A2Unorm||e===xe.RG11B10UFloat||e===xe.Depth32Float||e===xe.Depth24Plus||e===xe.Depth24PlusStencil8||e===xe.Depth32FloatStencil8)return 4;if(e===xe.RG32Uint||e===xe.RG32Sint||e===xe.RG32Float||e===xe.RGBA16Uint||e===xe.RGBA16Sint||e===xe.RGBA16Float)return 8;if(e===xe.RGBA32Uint||e===xe.RGBA32Sint||e===xe.RGBA32Float)return 16}_getTypedArrayType(e){if(e===xe.R8Uint)return Uint8Array;if(e===xe.R8Sint)return Int8Array;if(e===xe.R8Unorm)return Uint8Array;if(e===xe.R8Snorm)return Int8Array;if(e===xe.RG8Uint)return Uint8Array;if(e===xe.RG8Sint)return Int8Array;if(e===xe.RG8Unorm)return Uint8Array;if(e===xe.RG8Snorm)return Int8Array;if(e===xe.RGBA8Uint)return Uint8Array;if(e===xe.RGBA8Sint)return Int8Array;if(e===xe.RGBA8Unorm)return Uint8Array;if(e===xe.RGBA8Snorm)return Int8Array;if(e===xe.R16Uint)return Uint16Array;if(e===xe.R16Sint)return Int16Array;if(e===xe.RG16Uint)return Uint16Array;if(e===xe.RG16Sint)return Int16Array;if(e===xe.RGBA16Uint)return Uint16Array;if(e===xe.RGBA16Sint)return Int16Array;if(e===xe.R16Float||e===xe.RG16Float||e===xe.RGBA16Float)return Uint16Array;if(e===xe.R32Uint)return Uint32Array;if(e===xe.R32Sint)return Int32Array;if(e===xe.R32Float)return Float32Array;if(e===xe.RG32Uint)return Uint32Array;if(e===xe.RG32Sint)return Int32Array;if(e===xe.RG32Float)return Float32Array;if(e===xe.RGBA32Uint)return Uint32Array;if(e===xe.RGBA32Sint)return Int32Array;if(e===xe.RGBA32Float)return Float32Array;if(e===xe.BGRA8Unorm||e===xe.BGRA8UnormSRGB)return Uint8Array;if(e===xe.RGB10A2Unorm||e===xe.RGB9E5UFloat||e===xe.RG11B10UFloat)return Uint32Array;if(e===xe.Depth32Float)return Float32Array;if(e===xe.Depth24Plus||e===xe.Depth24PlusStencil8)return Uint32Array;if(e===xe.Depth32FloatStencil8)return Float32Array}_getDimension(e){let n;return e.isData3DTexture?n=AW.ThreeD:n=AW.TwoD,n}}function Z3(r,e=null){const n=r.format,i=r.type,s=r.colorSpace;let a;if(r.isCompressedTexture===!0||r.isCompressedArrayTexture===!0)switch(n){case Ad:a=s===dn?xe.BC1RGBAUnormSRGB:xe.BC1RGBAUnorm;break;case Cd:a=s===dn?xe.BC2RGBAUnormSRGB:xe.BC2RGBAUnorm;break;case Nd:a=s===dn?xe.BC3RGBAUnormSRGB:xe.BC3RGBAUnorm;break;case ey:a=s===dn?xe.ETC2RGB8UnormSRGB:xe.ETC2RGB8Unorm;break;case ty:a=s===dn?xe.ETC2RGBA8UnormSRGB:xe.ETC2RGBA8Unorm;break;case ny:a=s===dn?xe.ASTC4x4UnormSRGB:xe.ASTC4x4Unorm;break;case ry:a=s===dn?xe.ASTC5x4UnormSRGB:xe.ASTC5x4Unorm;break;case iy:a=s===dn?xe.ASTC5x5UnormSRGB:xe.ASTC5x5Unorm;break;case sy:a=s===dn?xe.ASTC6x5UnormSRGB:xe.ASTC6x5Unorm;break;case ay:a=s===dn?xe.ASTC6x6UnormSRGB:xe.ASTC6x6Unorm;break;case oy:a=s===dn?xe.ASTC8x5UnormSRGB:xe.ASTC8x5Unorm;break;case ly:a=s===dn?xe.ASTC8x6UnormSRGB:xe.ASTC8x6Unorm;break;case cy:a=s===dn?xe.ASTC8x8UnormSRGB:xe.ASTC8x8Unorm;break;case uy:a=s===dn?xe.ASTC10x5UnormSRGB:xe.ASTC10x5Unorm;break;case hy:a=s===dn?xe.ASTC10x6UnormSRGB:xe.ASTC10x6Unorm;break;case dy:a=s===dn?xe.ASTC10x8UnormSRGB:xe.ASTC10x8Unorm;break;case fy:a=s===dn?xe.ASTC10x10UnormSRGB:xe.ASTC10x10Unorm;break;case py:a=s===dn?xe.ASTC12x10UnormSRGB:xe.ASTC12x10Unorm;break;case my:a=s===dn?xe.ASTC12x12UnormSRGB:xe.ASTC12x12Unorm;break;case Oi:a=s===dn?xe.RGBA8UnormSRGB:xe.RGBA8Unorm;break;default:console.error("WebGPURenderer: Unsupported texture format.",n)}else switch(n){case Oi:switch(i){case cp:a=xe.RGBA8Snorm;break;case up:a=xe.RGBA16Sint;break;case tc:a=xe.RGBA16Uint;break;case Vr:a=xe.RGBA32Uint;break;case Cs:a=xe.RGBA32Sint;break;case Ri:a=s===dn?xe.RGBA8UnormSRGB:xe.RGBA8Unorm;break;case da:a=xe.RGBA16Float;break;case zi:a=xe.RGBA32Float;break;default:console.error("WebGPURenderer: Unsupported texture type with RGBAFormat.",i)}break;case v_:switch(i){case wM:a=xe.RGB9E5UFloat;break;default:console.error("WebGPURenderer: Unsupported texture type with RGBFormat.",i)}break;case x_:switch(i){case cp:a=xe.R8Snorm;break;case up:a=xe.R16Sint;break;case tc:a=xe.R16Uint;break;case Vr:a=xe.R32Uint;break;case Cs:a=xe.R32Sint;break;case Ri:a=xe.R8Unorm;break;case da:a=xe.R16Float;break;case zi:a=xe.R32Float;break;default:console.error("WebGPURenderer: Unsupported texture type with RedFormat.",i)}break;case Sp:switch(i){case cp:a=xe.RG8Snorm;break;case up:a=xe.RG16Sint;break;case tc:a=xe.RG16Uint;break;case Vr:a=xe.RG32Uint;break;case Cs:a=xe.RG32Sint;break;case Ri:a=xe.RG8Unorm;break;case da:a=xe.RG16Float;break;case zi:a=xe.RG32Float;break;default:console.error("WebGPURenderer: Unsupported texture type with RGFormat.",i)}break;case Io:switch(i){case tc:a=xe.Depth16Unorm;break;case Vr:a=xe.Depth24Plus;break;case zi:a=xe.Depth32Float;break;default:console.error("WebGPURenderer: Unsupported texture type with DepthFormat.",i)}break;case Do:switch(i){case ko:a=xe.Depth24PlusStencil8;break;case zi:e&&e.features.has(Y3.Depth32FloatStencil8)===!1&&console.error('WebGPURenderer: Depth textures with DepthStencilFormat + FloatType can only be used with the "depth32float-stencil8" GPU feature.'),a=xe.Depth32FloatStencil8;break;default:console.error("WebGPURenderer: Unsupported texture type with DepthStencilFormat.",i)}break;case r0:switch(i){case Cs:a=xe.R32Sint;break;case Vr:a=xe.R32Uint;break;default:console.error("WebGPURenderer: Unsupported texture type with RedIntegerFormat.",i)}break;case i0:switch(i){case Cs:a=xe.RG32Sint;break;case Vr:a=xe.RG32Uint;break;default:console.error("WebGPURenderer: Unsupported texture type with RGIntegerFormat.",i)}break;case s0:switch(i){case Cs:a=xe.RGBA32Sint;break;case Vr:a=xe.RGBA32Uint;break;default:console.error("WebGPURenderer: Unsupported texture type with RGBAIntegerFormat.",i)}break;default:console.error("WebGPURenderer: Unsupported texture format.",n)}return a}const IDe=/^[fn]*\s*([a-z_0-9]+)?\s*\(([\s\S]*?)\)\s*[\-\>]*\s*([a-z_0-9]+(?:<[\s\S]+?>)?)/i,DDe=/([a-z_0-9]+)\s*:\s*([a-z_0-9]+(?:<[\s\S]+?>)?)/ig,CW={f32:"float",i32:"int",u32:"uint",bool:"bool","vec2<f32>":"vec2","vec2<i32>":"ivec2","vec2<u32>":"uvec2","vec2<bool>":"bvec2",vec2f:"vec2",vec2i:"ivec2",vec2u:"uvec2",vec2b:"bvec2","vec3<f32>":"vec3","vec3<i32>":"ivec3","vec3<u32>":"uvec3","vec3<bool>":"bvec3",vec3f:"vec3",vec3i:"ivec3",vec3u:"uvec3",vec3b:"bvec3","vec4<f32>":"vec4","vec4<i32>":"ivec4","vec4<u32>":"uvec4","vec4<bool>":"bvec4",vec4f:"vec4",vec4i:"ivec4",vec4u:"uvec4",vec4b:"bvec4","mat2x2<f32>":"mat2",mat2x2f:"mat2","mat3x3<f32>":"mat3",mat3x3f:"mat3","mat4x4<f32>":"mat4",mat4x4f:"mat4",sampler:"sampler",texture_1d:"texture",texture_2d:"texture",texture_2d_array:"texture",texture_multisampled_2d:"cubeTexture",texture_depth_2d:"depthTexture",texture_depth_multisampled_2d:"depthTexture",texture_3d:"texture3D",texture_cube:"cubeTexture",texture_cube_array:"cubeTexture",texture_storage_1d:"storageTexture",texture_storage_2d:"storageTexture",texture_storage_2d_array:"storageTexture",texture_storage_3d:"storageTexture"},LDe=r=>{r=r.trim();const e=r.match(IDe);if(e!==null&&e.length===4){const n=e[2],i=[];let s=null;for(;(s=DDe.exec(n))!==null;)i.push({name:s[1],type:s[2]});const a=[];for(let h=0;h<i.length;h++){const{name:d,type:f}=i[h];let p=f;p.startsWith("ptr")?p="pointer":(p.startsWith("texture")&&(p=f.split("<")[0]),p=CW[p]),a.push(new GU(p,d))}const o=r.substring(e[0].length),l=e[3]||"void",c=e[1]!==void 0?e[1]:"";return{type:CW[l]||l,inputs:a,name:c,inputsCode:n,blockCode:o,outputType:l}}else throw new Error("FunctionNode: Function is not a WGSL code.")};class FDe extends VU{constructor(e){const{type:n,inputs:i,name:s,inputsCode:a,blockCode:o,outputType:l}=LDe(e);super(n,i,s),this.inputsCode=a,this.blockCode=o,this.outputType=l}getCode(e=this.name){const n=this.outputType!=="void"?"-> "+this.outputType:"";return`fn ${e} ( ${this.inputsCode.trim()} ) ${n}`+this.blockCode}}class BDe extends Yre{parseFunction(e){return new FDe(e)}}const cg=typeof self<"u"?self.GPUShaderStage:{VERTEX:1,FRAGMENT:2,COMPUTE:4},jDe={[Ju.READ_ONLY]:"read",[Ju.WRITE_ONLY]:"write",[Ju.READ_WRITE]:"read_write"},NW={[_p]:"repeat",[Nc]:"clamp",[wp]:"mirror"},NS={vertex:cg?cg.VERTEX:1,fragment:cg?cg.FRAGMENT:2,compute:cg?cg.COMPUTE:4},PW={instance:!0,swizzleAssign:!1,storageBuffer:!0},UDe={"^^":"tsl_xor"},zDe={float:"f32",int:"i32",uint:"u32",bool:"bool",color:"vec3<f32>",vec2:"vec2<f32>",ivec2:"vec2<i32>",uvec2:"vec2<u32>",bvec2:"vec2<bool>",vec3:"vec3<f32>",ivec3:"vec3<i32>",uvec3:"vec3<u32>",bvec3:"vec3<bool>",vec4:"vec4<f32>",ivec4:"vec4<i32>",uvec4:"vec4<u32>",bvec4:"vec4<bool>",mat2:"mat2x2<f32>",mat3:"mat3x3<f32>",mat4:"mat4x4<f32>"},RW={},tl={tsl_xor:new hs("fn tsl_xor( a : bool, b : bool ) -> bool { return ( a || b ) && !( a && b ); }"),mod_float:new hs("fn tsl_mod_float( x : f32, y : f32 ) -> f32 { return x - y * floor( x / y ); }"),mod_vec2:new hs("fn tsl_mod_vec2( x : vec2f, y : vec2f ) -> vec2f { return x - y * floor( x / y ); }"),mod_vec3:new hs("fn tsl_mod_vec3( x : vec3f, y : vec3f ) -> vec3f { return x - y * floor( x / y ); }"),mod_vec4:new hs("fn tsl_mod_vec4( x : vec4f, y : vec4f ) -> vec4f { return x - y * floor( x / y ); }"),equals_bool:new hs("fn tsl_equals_bool( a : bool, b : bool ) -> bool { return a == b; }"),equals_bvec2:new hs("fn tsl_equals_bvec2( a : vec2f, b : vec2f ) -> vec2<bool> { return vec2<bool>( a.x == b.x, a.y == b.y ); }"),equals_bvec3:new hs("fn tsl_equals_bvec3( a : vec3f, b : vec3f ) -> vec3<bool> { return vec3<bool>( a.x == b.x, a.y == b.y, a.z == b.z ); }"),equals_bvec4:new hs("fn tsl_equals_bvec4( a : vec4f, b : vec4f ) -> vec4<bool> { return vec4<bool>( a.x == b.x, a.y == b.y, a.z == b.z, a.w == b.w ); }"),repeatWrapping_float:new hs("fn tsl_repeatWrapping_float( coord: f32 ) -> f32 { return fract( coord ); }"),mirrorWrapping_float:new hs("fn tsl_mirrorWrapping_float( coord: f32 ) -> f32 { let mirrored = fract( coord * 0.5 ) * 2.0; return 1.0 - abs( 1.0 - mirrored ); }"),clampWrapping_float:new hs("fn tsl_clampWrapping_float( coord: f32 ) -> f32 { return clamp( coord, 0.0, 1.0 ); }"),biquadraticTexture:new hs(`
fn tsl_biquadraticTexture( map : texture_2d<f32>, coord : vec2f, iRes : vec2u, level : u32 ) -> vec4f {

	let res = vec2f( iRes );

	let uvScaled = coord * res;
	let uvWrapping = ( ( uvScaled % res ) + res ) % res;

	// https://www.shadertoy.com/view/WtyXRy

	let uv = uvWrapping - 0.5;
	let iuv = floor( uv );
	let f = fract( uv );

	let rg1 = textureLoad( map, vec2u( iuv + vec2( 0.5, 0.5 ) ) % iRes, level );
	let rg2 = textureLoad( map, vec2u( iuv + vec2( 1.5, 0.5 ) ) % iRes, level );
	let rg3 = textureLoad( map, vec2u( iuv + vec2( 0.5, 1.5 ) ) % iRes, level );
	let rg4 = textureLoad( map, vec2u( iuv + vec2( 1.5, 1.5 ) ) % iRes, level );

	return mix( mix( rg1, rg2, f.x ), mix( rg3, rg4, f.x ), f.y );

}
`)},ix={dFdx:"dpdx",dFdy:"- dpdy",mod_float:"tsl_mod_float",mod_vec2:"tsl_mod_vec2",mod_vec3:"tsl_mod_vec3",mod_vec4:"tsl_mod_vec4",equals_bool:"tsl_equals_bool",equals_bvec2:"tsl_equals_bvec2",equals_bvec3:"tsl_equals_bvec3",equals_bvec4:"tsl_equals_bvec4",inversesqrt:"inverseSqrt",bitcast:"bitcast<f32>"};typeof navigator<"u"&&/Windows/g.test(navigator.userAgent)&&(tl.pow_float=new hs("fn tsl_pow_float( a : f32, b : f32 ) -> f32 { return select( -pow( -a, b ), pow( a, b ), a > 0.0 ); }"),tl.pow_vec2=new hs("fn tsl_pow_vec2( a : vec2f, b : vec2f ) -> vec2f { return vec2f( tsl_pow_float( a.x, b.x ), tsl_pow_float( a.y, b.y ) ); }",[tl.pow_float]),tl.pow_vec3=new hs("fn tsl_pow_vec3( a : vec3f, b : vec3f ) -> vec3f { return vec3f( tsl_pow_float( a.x, b.x ), tsl_pow_float( a.y, b.y ), tsl_pow_float( a.z, b.z ) ); }",[tl.pow_float]),tl.pow_vec4=new hs("fn tsl_pow_vec4( a : vec4f, b : vec4f ) -> vec4f { return vec4f( tsl_pow_float( a.x, b.x ), tsl_pow_float( a.y, b.y ), tsl_pow_float( a.z, b.z ), tsl_pow_float( a.w, b.w ) ); }",[tl.pow_float]),ix.pow_float="tsl_pow_float",ix.pow_vec2="tsl_pow_vec2",ix.pow_vec3="tsl_pow_vec3",ix.pow_vec4="tsl_pow_vec4");let aie="";(typeof navigator<"u"&&/Firefox|Deno/g.test(navigator.userAgent))!==!0&&(aie+=`diagnostic( off, derivative_uniformity );
`);class $De extends Xre{constructor(e,n){super(e,n,new BDe),this.uniformGroups={},this.builtins={},this.directives={},this.scopedArrays=new Map}needsToWorkingColorSpace(e){return e.isVideoTexture===!0&&e.colorSpace!==Po}_generateTextureSample(e,n,i,s,a=this.shaderStage){return a==="fragment"?s?`textureSample( ${n}, ${n}_sampler, ${i}, ${s} )`:`textureSample( ${n}, ${n}_sampler, ${i} )`:this.isFilteredTexture(e)?this.generateFilteredTexture(e,n,i):this.generateTextureLod(e,n,i,s,"0")}_generateVideoSample(e,n,i=this.shaderStage){if(i==="fragment")return`textureSampleBaseClampToEdge( ${e}, ${e}_sampler, vec2<f32>( ${n}.x, 1.0 - ${n}.y ) )`;console.error(`WebGPURenderer: THREE.VideoTexture does not support ${i} shader.`)}_generateTextureSampleLevel(e,n,i,s,a,o=this.shaderStage){return(o==="fragment"||o==="compute")&&this.isUnfilterable(e)===!1?`textureSampleLevel( ${n}, ${n}_sampler, ${i}, ${s} )`:this.isFilteredTexture(e)?this.generateFilteredTexture(e,n,i,s):this.generateTextureLod(e,n,i,a,s)}generateWrapFunction(e){const n=`tsl_coord_${NW[e.wrapS]}S_${NW[e.wrapT]}_${e.isData3DTexture?"3d":"2d"}T`;let i=RW[n];if(i===void 0){const s=[],a=e.isData3DTexture?"vec3f":"vec2f";let o=`fn ${n}( coord : ${a} ) -> ${a} {

	return ${a}(
`;const l=(c,u)=>{c===_p?(s.push(tl.repeatWrapping_float),o+=`		tsl_repeatWrapping_float( coord.${u} )`):c===Nc?(s.push(tl.clampWrapping_float),o+=`		tsl_clampWrapping_float( coord.${u} )`):c===wp?(s.push(tl.mirrorWrapping_float),o+=`		tsl_mirrorWrapping_float( coord.${u} )`):(o+=`		coord.${u}`,console.warn(`WebGPURenderer: Unsupported texture wrap type "${c}" for vertex shader.`))};l(e.wrapS,"x"),o+=`,
`,l(e.wrapT,"y"),e.isData3DTexture&&(o+=`,
`,l(e.wrapR,"z")),o+=`
	);

}
`,RW[n]=i=new hs(o,s)}return i.build(this),n}generateArrayDeclaration(e,n){return`array< ${this.getType(e)}, ${n} >`}generateTextureDimension(e,n,i){const s=this.getDataFromNode(e,this.shaderStage,this.globalCache);s.dimensionsSnippet===void 0&&(s.dimensionsSnippet={});let a=s.dimensionsSnippet[i];if(s.dimensionsSnippet[i]===void 0){let o,l;const{primarySamples:c}=this.renderer.backend.utils.getTextureSampleData(e),u=c>1;e.isData3DTexture?l="vec3<u32>":l="vec2<u32>",u||e.isVideoTexture||e.isStorageTexture?o=n:o=`${n}${i?`, u32( ${i} )`:""}`,a=new mT(new yT(`textureDimensions( ${o} )`,l)),s.dimensionsSnippet[i]=a,(e.isDataArrayTexture||e.isData3DTexture)&&(s.arrayLayerCount=new mT(new yT(`textureNumLayers(${n})`,"u32"))),e.isTextureCube&&(s.cubeFaceCount=new mT(new yT("6u","u32")))}return a.build(this)}generateFilteredTexture(e,n,i,s="0u"){this._include("biquadraticTexture");const a=this.generateWrapFunction(e),o=this.generateTextureDimension(e,n,s);return`tsl_biquadraticTexture( ${n}, ${a}( ${i} ), ${o}, u32( ${s} ) )`}generateTextureLod(e,n,i,s,a="0u"){const o=this.generateWrapFunction(e),l=this.generateTextureDimension(e,n,a),c=e.isData3DTexture?"vec3":"vec2",u=`${c}<u32>(${o}(${i}) * ${c}<f32>(${l}))`;return this.generateTextureLoad(e,n,u,s,a)}generateTextureLoad(e,n,i,s,a="0u"){return e.isVideoTexture===!0||e.isStorageTexture===!0?`textureLoad( ${n}, ${i} )`:s?`textureLoad( ${n}, ${i}, ${s}, u32( ${a} ) )`:`textureLoad( ${n}, ${i}, u32( ${a} ) )`}generateTextureStore(e,n,i,s){return`textureStore( ${n}, ${i}, ${s} )`}isSampleCompare(e){return e.isDepthTexture===!0&&e.compareFunction!==null}isUnfilterable(e){return this.getComponentTypeFromTexture(e)!=="float"||!this.isAvailable("float32Filterable")&&e.isDataTexture===!0&&e.type===zi||this.isSampleCompare(e)===!1&&e.minFilter===ei&&e.magFilter===ei||this.renderer.backend.utils.getTextureSampleData(e).primarySamples>1}generateTexture(e,n,i,s,a=this.shaderStage){let o=null;return e.isVideoTexture===!0?o=this._generateVideoSample(n,i,a):this.isUnfilterable(e)?o=this.generateTextureLod(e,n,i,s,"0",a):o=this._generateTextureSample(e,n,i,s,a),o}generateTextureGrad(e,n,i,s,a,o=this.shaderStage){if(o==="fragment")return`textureSampleGrad( ${n}, ${n}_sampler, ${i},  ${s[0]}, ${s[1]} )`;console.error(`WebGPURenderer: THREE.TextureNode.gradient() does not support ${o} shader.`)}generateTextureCompare(e,n,i,s,a,o=this.shaderStage){if(o==="fragment")return`textureSampleCompare( ${n}, ${n}_sampler, ${i}, ${s} )`;console.error(`WebGPURenderer: THREE.DepthTexture.compareFunction() does not support ${o} shader.`)}generateTextureLevel(e,n,i,s,a,o=this.shaderStage){let l=null;return e.isVideoTexture===!0?l=this._generateVideoSample(n,i,o):l=this._generateTextureSampleLevel(e,n,i,s,a,o),l}generateTextureBias(e,n,i,s,a,o=this.shaderStage){if(o==="fragment")return`textureSampleBias( ${n}, ${n}_sampler, ${i}, ${s} )`;console.error(`WebGPURenderer: THREE.TextureNode.biasNode does not support ${o} shader.`)}getPropertyName(e,n=this.shaderStage){if(e.isNodeVarying===!0&&e.needsInterpolation===!0){if(n==="vertex")return`varyings.${e.name}`}else if(e.isNodeUniform===!0){const i=e.name,s=e.type;return s==="texture"||s==="cubeTexture"||s==="storageTexture"||s==="texture3D"?i:s==="buffer"||s==="storageBuffer"||s==="indirectStorageBuffer"?this.isCustomStruct(e)?i:i+".value":e.groupNode.name+"."+i}return super.getPropertyName(e)}getOutputStructName(){return"output"}getFunctionOperator(e){const n=UDe[e];return n!==void 0?(this._include(n),n):null}getNodeAccess(e,n){return n!=="compute"?Ju.READ_ONLY:e.access}getStorageAccess(e,n){return jDe[this.getNodeAccess(e,n)]}getUniformFromNode(e,n,i,s=null){const a=super.getUniformFromNode(e,n,i,s),o=this.getDataFromNode(e,i,this.globalCache);if(o.uniformGPU===void 0){let l;const c=e.groupNode,u=c.name,h=this.getBindGroupArray(u,i);if(n==="texture"||n==="cubeTexture"||n==="storageTexture"||n==="texture3D"){let d=null;const f=this.getNodeAccess(e,i);if(n==="texture"||n==="storageTexture"?d=new cA(a.name,a.node,c,f):n==="cubeTexture"?d=new nie(a.name,a.node,c,f):n==="texture3D"&&(d=new rie(a.name,a.node,c,f)),d.store=e.isStorageTextureNode===!0,d.setVisibility(NS[i]),(i==="fragment"||i==="compute")&&this.isUnfilterable(e.value)===!1&&d.store===!1){const p=new MDe(`${a.name}_sampler`,a.node,c);p.setVisibility(NS[i]),h.push(p,d),l=[p,d]}else h.push(d),l=[d]}else if(n==="buffer"||n==="storageBuffer"||n==="indirectStorageBuffer"){const d=n==="buffer"?eie:NDe,f=new d(e,c);f.setVisibility(NS[i]),h.push(f),l=f,a.name=s||"NodeBuffer_"+a.id}else{const d=this.uniformGroups[i]||(this.uniformGroups[i]={});let f=d[u];f===void 0&&(f=new tie(u,c),f.setVisibility(NS[i]),d[u]=f,h.push(f)),l=this.getNodeUniform(a,n),f.addUniform(l)}o.uniformGPU=l}return a}getBuiltin(e,n,i,s=this.shaderStage){const a=this.builtins[s]||(this.builtins[s]=new Map);return a.has(e)===!1&&a.set(e,{name:e,property:n,type:i}),n}hasBuiltin(e,n=this.shaderStage){return this.builtins[n]!==void 0&&this.builtins[n].has(e)}getVertexIndex(){return this.shaderStage==="vertex"?this.getBuiltin("vertex_index","vertexIndex","u32","attribute"):"vertexIndex"}buildFunctionCode(e){const n=e.layout,i=this.flowShaderNode(e),s=[];for(const o of n.inputs)s.push(o.name+" : "+this.getType(o.type));let a=`fn ${n.name}( ${s.join(", ")} ) -> ${this.getType(n.type)} {
${i.vars}
${i.code}
`;return i.result&&(a+=`	return ${i.result};
`),a+=`
}
`,a}getInstanceIndex(){return this.shaderStage==="vertex"?this.getBuiltin("instance_index","instanceIndex","u32","attribute"):"instanceIndex"}getInvocationLocalIndex(){return this.getBuiltin("local_invocation_index","invocationLocalIndex","u32","attribute")}getSubgroupSize(){return this.enableSubGroups(),this.getBuiltin("subgroup_size","subgroupSize","u32","attribute")}getInvocationSubgroupIndex(){return this.enableSubGroups(),this.getBuiltin("subgroup_invocation_id","invocationSubgroupIndex","u32","attribute")}getSubgroupIndex(){return this.enableSubGroups(),this.getBuiltin("subgroup_id","subgroupIndex","u32","attribute")}getDrawIndex(){return null}getFrontFacing(){return this.getBuiltin("front_facing","isFront","bool")}getFragCoord(){return this.getBuiltin("position","fragCoord","vec4<f32>")+".xy"}getFragDepth(){return"output."+this.getBuiltin("frag_depth","depth","f32","output")}getClipDistance(){return"varyings.hw_clip_distances"}isFlipY(){return!1}enableDirective(e,n=this.shaderStage){(this.directives[n]||(this.directives[n]=new Set)).add(e)}getDirectives(e){const n=[],i=this.directives[e];if(i!==void 0)for(const s of i)n.push(`enable ${s};`);return n.join(`
`)}enableSubGroups(){this.enableDirective("subgroups")}enableSubgroupsF16(){this.enableDirective("subgroups-f16")}enableClipDistances(){this.enableDirective("clip_distances")}enableShaderF16(){this.enableDirective("f16")}enableDualSourceBlending(){this.enableDirective("dual_source_blending")}enableHardwareClipping(e){this.enableClipDistances(),this.getBuiltin("clip_distances","hw_clip_distances",`array<f32, ${e} >`,"vertex")}getBuiltins(e){const n=[],i=this.builtins[e];if(i!==void 0)for(const{name:s,property:a,type:o}of i.values())n.push(`@builtin( ${s} ) ${a} : ${o}`);return n.join(`,
	`)}getScopedArray(e,n,i,s){return this.scopedArrays.has(e)===!1&&this.scopedArrays.set(e,{name:e,scope:n,bufferType:i,bufferCount:s}),e}getScopedArrays(e){if(e!=="compute")return;const n=[];for(const{name:i,scope:s,bufferType:a,bufferCount:o}of this.scopedArrays.values()){const l=this.getType(a);n.push(`var<${s}> ${i}: array< ${l}, ${o} >;`)}return n.join(`
`)}getAttributes(e){const n=[];if(e==="compute"&&(this.getBuiltin("global_invocation_id","globalId","vec3<u32>","attribute"),this.getBuiltin("workgroup_id","workgroupId","vec3<u32>","attribute"),this.getBuiltin("local_invocation_id","localId","vec3<u32>","attribute"),this.getBuiltin("num_workgroups","numWorkgroups","vec3<u32>","attribute"),this.renderer.hasFeature("subgroups")&&(this.enableDirective("subgroups",e),this.getBuiltin("subgroup_size","subgroupSize","u32","attribute"))),e==="vertex"||e==="compute"){const i=this.getBuiltins("attribute");i&&n.push(i);const s=this.getAttributesArray();for(let a=0,o=s.length;a<o;a++){const l=s[a],c=l.name,u=this.getType(l.type);n.push(`@location( ${a} ) ${c} : ${u}`)}}return n.join(`,
	`)}getStructMembers(e){const n=[];for(const i of e.members){const s=e.output?"@location( "+i.index+" ) ":"";let a=this.getType(i.type);i.atomic&&(a="atomic< "+a+" >"),n.push(`	${s+i.name} : ${a}`)}return e.output&&n.push(`	${this.getBuiltins("output")}`),n.join(`,
`)}getStructs(e){let n="";const i=this.structs[e];if(i.length>0){const s=[];for(const a of i){let o=`struct ${a.name} {
`;o+=this.getStructMembers(a),o+=`
};`,s.push(o)}n=`
`+s.join(`

`)+`
`}return n}getVar(e,n,i=null){let s=`var ${n} : `;return i!==null?s+=this.generateArrayDeclaration(e,i):s+=this.getType(e),s}getVars(e){const n=[],i=this.vars[e];if(i!==void 0)for(const s of i)n.push(`	${this.getVar(s.type,s.name,s.count)};`);return`
${n.join(`
`)}
`}getVaryings(e){const n=[];if(e==="vertex"&&this.getBuiltin("position","Vertex","vec4<f32>","vertex"),e==="vertex"||e==="fragment"){const a=this.varyings,o=this.vars[e];for(let l=0;l<a.length;l++){const c=a[l];if(c.needsInterpolation){let u=`@location( ${l} )`;/^(int|uint|ivec|uvec)/.test(c.type)&&(u+=" @interpolate( flat )"),n.push(`${u} ${c.name} : ${this.getType(c.type)}`)}else e==="vertex"&&o.includes(c)===!1&&o.push(c)}}const i=this.getBuiltins(e);i&&n.push(i);const s=n.join(`,
	`);return e==="vertex"?this._getWGSLStruct("VaryingsStruct","	"+s):s}isCustomStruct(e){return e.value.isStorageBufferAttribute&&e.node.structTypeNode!==null}getUniforms(e){const n=this.uniforms[e],i=[],s=[],a=[],o={};for(const c of n){const u=c.groupNode.name,h=this.bindingsIndexes[u];if(c.type==="texture"||c.type==="cubeTexture"||c.type==="storageTexture"||c.type==="texture3D"){const d=c.node.value;(e==="fragment"||e==="compute")&&this.isUnfilterable(d)===!1&&c.node.isStorageTextureNode!==!0&&(this.isSampleCompare(d)?i.push(`@binding( ${h.binding++} ) @group( ${h.group} ) var ${c.name}_sampler : sampler_comparison;`):i.push(`@binding( ${h.binding++} ) @group( ${h.group} ) var ${c.name}_sampler : sampler;`));let f,p="";const{primarySamples:g}=this.renderer.backend.utils.getTextureSampleData(d);if(g>1&&(p="_multisampled"),d.isCubeTexture===!0)f="texture_cube<f32>";else if(d.isDataArrayTexture===!0||d.isCompressedArrayTexture===!0)f="texture_2d_array<f32>";else if(d.isDepthTexture===!0)f=`texture_depth${p}_2d`;else if(d.isVideoTexture===!0)f="texture_external";else if(d.isData3DTexture===!0)f="texture_3d<f32>";else if(c.node.isStorageTextureNode===!0){const v=Z3(d),x=this.getStorageAccess(c.node,e);f=`texture_storage_2d<${v}, ${x}>`}else{const v=this.getComponentTypeFromTexture(d).charAt(0);f=`texture${p}_2d<${v}32>`}i.push(`@binding( ${h.binding++} ) @group( ${h.group} ) var ${c.name} : ${f};`)}else if(c.type==="buffer"||c.type==="storageBuffer"||c.type==="indirectStorageBuffer"){const d=c.node,f=this.getType(d.getNodeType(this)),p=d.bufferCount,g=p>0&&c.type==="buffer"?", "+p:"",v=d.isStorageBufferNode?`storage, ${this.getStorageAccess(d,e)}`:"uniform";if(this.isCustomStruct(c))s.push(`@binding( ${h.binding++} ) @group( ${h.group} ) var<${v}> ${c.name} : ${f};`);else{const _=`	value : array< ${d.isAtomic?`atomic<${f}>`:`${f}`}${g} >`;s.push(this._getWGSLStructBinding(c.name,_,v,h.binding++,h.group))}}else{const d=this.getType(this.getVectorType(c.type)),f=c.groupNode.name;(o[f]||(o[f]={index:h.binding++,id:h.group,snippets:[]})).snippets.push(`	${c.name} : ${d}`)}}for(const c in o){const u=o[c];a.push(this._getWGSLStructBinding(c,u.snippets.join(`,
`),"uniform",u.index,u.id))}let l=i.join(`
`);return l+=s.join(`
`),l+=a.join(`
`),l}buildCode(){const e=this.material!==null?{fragment:{},vertex:{}}:{compute:{}};this.sortBindingGroups();for(const n in e){this.shaderStage=n;const i=e[n];i.uniforms=this.getUniforms(n),i.attributes=this.getAttributes(n),i.varyings=this.getVaryings(n),i.structs=this.getStructs(n),i.vars=this.getVars(n),i.codes=this.getCodes(n),i.directives=this.getDirectives(n),i.scopedArrays=this.getScopedArrays(n);let s=`// code

`;s+=this.flowCode[n];const a=this.flowNodes[n],o=a[a.length-1],l=o.outputNode,c=l!==void 0&&l.isOutputStructNode===!0;for(const u of a){const h=this.getFlowData(u),d=u.name;if(d&&(s.length>0&&(s+=`
`),s+=`	// flow -> ${d}
`),s+=`${h.code}
	`,u===o&&n!=="compute"){if(s+=`// result

	`,n==="vertex")s+=`varyings.Vertex = ${h.result};`;else if(n==="fragment")if(c)i.returnType=l.getNodeType(this),i.structs+="var<private> output : "+i.returnType+";",s+=`return ${h.result};`;else{let f="	@location(0) color: vec4<f32>";const p=this.getBuiltins("output");p&&(f+=`,
	`+p),i.returnType="OutputStruct",i.structs+=this._getWGSLStruct("OutputStruct",f),i.structs+=`
var<private> output : OutputStruct;`,s+=`output.color = ${h.result};

	return output;`}}}i.flow=s}this.shaderStage=null,this.material!==null?(this.vertexShader=this._getWGSLVertexCode(e.vertex),this.fragmentShader=this._getWGSLFragmentCode(e.fragment)):this.computeShader=this._getWGSLComputeCode(e.compute,(this.object.workgroupSize||[64]).join(", "))}getMethod(e,n=null){let i;return n!==null&&(i=this._getWGSLMethod(e+"_"+n)),i===void 0&&(i=this._getWGSLMethod(e)),i||e}getType(e){return zDe[e]||e}isAvailable(e){let n=PW[e];return n===void 0&&(e==="float32Filterable"?n=this.renderer.hasFeature("float32-filterable"):e==="clipDistance"&&(n=this.renderer.hasFeature("clip-distances")),PW[e]=n),n}_getWGSLMethod(e){return tl[e]!==void 0&&this._include(e),ix[e]}_include(e){const n=tl[e];return n.build(this),this.currentFunctionNode!==null&&this.currentFunctionNode.includes.push(n),n}_getWGSLVertexCode(e){return`${this.getSignature()}
// directives
${e.directives}

// structs
${e.structs}

// uniforms
${e.uniforms}

// varyings
${e.varyings}
var<private> varyings : VaryingsStruct;

// codes
${e.codes}

@vertex
fn main( ${e.attributes} ) -> VaryingsStruct {

	// vars
	${e.vars}

	// flow
	${e.flow}

	return varyings;

}
`}_getWGSLFragmentCode(e){return`${this.getSignature()}
// global
${aie}

// structs
${e.structs}

// uniforms
${e.uniforms}

// codes
${e.codes}

@fragment
fn main( ${e.varyings} ) -> ${e.returnType} {

	// vars
	${e.vars}

	// flow
	${e.flow}

}
`}_getWGSLComputeCode(e,n){return`${this.getSignature()}
// directives
${e.directives}

// system
var<private> instanceIndex : u32;

// locals
${e.scopedArrays}

// structs
${e.structs}

// uniforms
${e.uniforms}

// codes
${e.codes}

@compute @workgroup_size( ${n} )
fn main( ${e.attributes} ) {

	// system
	instanceIndex = globalId.x + globalId.y * numWorkgroups.x * u32(${n}) + globalId.z * numWorkgroups.x * numWorkgroups.y * u32(${n});

	// vars
	${e.vars}

	// flow
	${e.flow}

}
`}_getWGSLStruct(e,n){return`
struct ${e} {
${n}
};`}_getWGSLStructBinding(e,n,i,s=0,a=0){const o=e+"Struct";return`${this._getWGSLStruct(o,n)}
@binding( ${s} ) @group( ${a} )
var<${i}> ${e} : ${o};`}}class GDe{constructor(e){this.backend=e}getCurrentDepthStencilFormat(e){let n;return e.depthTexture!==null?n=this.getTextureFormatGPU(e.depthTexture):e.depth&&e.stencil?n=xe.Depth24PlusStencil8:e.depth&&(n=xe.Depth24Plus),n}getTextureFormatGPU(e){return this.backend.get(e).format}getTextureSampleData(e){let n;if(e.isFramebufferTexture)n=1;else if(e.isDepthTexture&&!e.renderTarget){const a=this.backend.renderer,o=a.getRenderTarget();n=o?o.samples:a.samples}else e.renderTarget&&(n=e.renderTarget.samples);n=n||1;const i=n>1&&e.renderTarget!==null&&e.isDepthTexture!==!0&&e.isFramebufferTexture!==!0;return{samples:n,primarySamples:i?1:n,isMSAA:i}}getCurrentColorFormat(e){let n;return e.textures!==null?n=this.getTextureFormatGPU(e.textures[0]):n=this.getPreferredCanvasFormat(),n}getCurrentColorSpace(e){return e.textures!==null?e.textures[0].colorSpace:this.backend.renderer.outputColorSpace}getPrimitiveTopology(e,n){if(e.isPoints)return Pg.PointList;if(e.isLineSegments||e.isMesh&&n.wireframe===!0)return Pg.LineList;if(e.isLine)return Pg.LineStrip;if(e.isMesh)return Pg.TriangleList}getSampleCount(e){let n=1;return e>1&&(n=Math.pow(2,Math.floor(Math.log2(e))),n===2&&(n=4)),n}getSampleCountRenderContext(e){return e.textures!==null?this.getSampleCount(e.sampleCount):this.getSampleCount(this.backend.renderer.samples)}getPreferredCanvasFormat(){const e=this.backend.parameters.outputType;if(e===void 0)return navigator.gpu.getPreferredCanvasFormat();if(e===Ri)return xe.BGRA8Unorm;if(e===da)return xe.RGBA16Float;throw new Error("Unsupported outputType")}}const VDe=new Map([[Int8Array,["sint8","snorm8"]],[Uint8Array,["uint8","unorm8"]],[Int16Array,["sint16","snorm16"]],[Uint16Array,["uint16","unorm16"]],[Int32Array,["sint32","snorm32"]],[Uint32Array,["uint32","unorm32"]],[Float32Array,["float32"]]]),HDe=new Map([[cee,["float16"]]]),WDe=new Map([[Int32Array,"sint32"],[Int16Array,"sint32"],[Uint32Array,"uint32"],[Uint16Array,"uint32"],[Float32Array,"float32"]]);class qDe{constructor(e){this.backend=e}createAttribute(e,n){const i=this._getBufferAttribute(e),s=this.backend,a=s.get(i);let o=a.buffer;if(o===void 0){const l=s.device;let c=i.array;if(e.normalized===!1){if(c.constructor===Int16Array||c.constructor===Int8Array)c=new Int32Array(c);else if((c.constructor===Uint16Array||c.constructor===Uint8Array)&&(c=new Uint32Array(c),n&GPUBufferUsage.INDEX))for(let h=0;h<c.length;h++)c[h]===65535&&(c[h]=4294967295)}if(i.array=c,(i.isStorageBufferAttribute||i.isStorageInstancedBufferAttribute)&&i.itemSize===3){c=new c.constructor(i.count*4);for(let h=0;h<i.count;h++)c.set(i.array.subarray(h*3,h*3+3),h*4);i.itemSize=4,i.array=c,a._force3to4BytesAlignment=!0}const u=c.byteLength+(4-c.byteLength%4)%4;o=l.createBuffer({label:i.name,size:u,usage:n,mappedAtCreation:!0}),new c.constructor(o.getMappedRange()).set(c),o.unmap(),a.buffer=o}}updateAttribute(e){const n=this._getBufferAttribute(e),i=this.backend,s=i.device,a=i.get(n),o=i.get(n).buffer;let l=n.array;if(a._force3to4BytesAlignment===!0){l=new l.constructor(n.count*4);for(let h=0;h<n.count;h++)l.set(n.array.subarray(h*3,h*3+3),h*4);n.array=l}const c=this._isTypedArray(l),u=n.updateRanges;if(u.length===0)s.queue.writeBuffer(o,0,l,0);else{const h=c?1:l.BYTES_PER_ELEMENT;for(let d=0,f=u.length;d<f;d++){const p=u[d];let g,v;if(a._force3to4BytesAlignment===!0){const _=Math.floor(p.start/3),E=Math.ceil(p.count/3);g=_*4*h,v=E*4*h}else g=p.start*h,v=p.count*h;const x=g*(c?l.BYTES_PER_ELEMENT:1);s.queue.writeBuffer(o,x,l,g,v)}n.clearUpdateRanges()}}createShaderVertexBuffers(e){const n=e.getAttributes(),i=new Map;for(let s=0;s<n.length;s++){const a=n[s],o=a.array.BYTES_PER_ELEMENT,l=this._getBufferAttribute(a);let c=i.get(l);if(c===void 0){let d,f;a.isInterleavedBufferAttribute===!0?(d=a.data.stride*o,f=a.data.isInstancedInterleavedBuffer?CS.Instance:CS.Vertex):(d=a.itemSize*o,f=a.isInstancedBufferAttribute?CS.Instance:CS.Vertex),a.normalized===!1&&(a.array.constructor===Int16Array||a.array.constructor===Uint16Array)&&(d=4),c={arrayStride:d,attributes:[],stepMode:f},i.set(l,c)}const u=this._getVertexFormat(a),h=a.isInterleavedBufferAttribute===!0?a.offset*o:0;c.attributes.push({shaderLocation:s,offset:h,format:u})}return Array.from(i.values())}destroyAttribute(e){const n=this.backend;n.get(this._getBufferAttribute(e)).buffer.destroy(),n.delete(e)}async getArrayBufferAsync(e){const n=this.backend,i=n.device,a=n.get(this._getBufferAttribute(e)).buffer,o=a.size,l=i.createBuffer({label:`${e.name}_readback`,size:o,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ}),c=i.createCommandEncoder({label:`readback_encoder_${e.name}`});c.copyBufferToBuffer(a,0,l,0,o);const u=c.finish();i.queue.submit([u]),await l.mapAsync(GPUMapMode.READ);const h=l.getMappedRange(),d=new e.array.constructor(h.slice(0));return l.unmap(),d.buffer}_getVertexFormat(e){const{itemSize:n,normalized:i}=e,s=e.array.constructor,a=e.constructor;let o;if(n===1)o=WDe.get(s);else{const c=(HDe.get(a)||VDe.get(s))[i?1:0];if(c){const u=s.BYTES_PER_ELEMENT*n,d=Math.floor((u+3)/4)*4/s.BYTES_PER_ELEMENT;if(d%1)throw new Error("THREE.WebGPUAttributeUtils: Bad vertex format item size.");o=`${c}x${d}`}}return o||console.error("THREE.WebGPUAttributeUtils: Vertex format not supported yet."),o}_isTypedArray(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}_getBufferAttribute(e){return e.isInterleavedBufferAttribute&&(e=e.data),e}}class XDe{constructor(e){this.backend=e,this.bindGroupLayoutCache=new WeakMap}createBindingsLayout(e){const n=this.backend,i=n.device,s=[];let a=0;for(const o of e.bindings){const l={binding:a++,visibility:o.visibility};if(o.isUniformBuffer||o.isStorageBuffer){const c={};o.isStorageBuffer&&(o.visibility&4&&(o.access===Ju.READ_WRITE||o.access===Ju.WRITE_ONLY)?c.type=RR.Storage:c.type=RR.ReadOnlyStorage),l.buffer=c}else if(o.isSampler){const c={};o.texture.isDepthTexture&&o.texture.compareFunction!==null&&(c.type="comparison"),l.sampler=c}else if(o.isSampledTexture&&o.texture.isVideoTexture)l.externalTexture={};else if(o.isSampledTexture&&o.store){const c={};c.format=this.backend.get(o.texture).texture.format;const u=o.access;u===Ju.READ_WRITE?c.access=OR.ReadWrite:u===Ju.WRITE_ONLY?c.access=OR.WriteOnly:c.access=OR.ReadOnly,l.storageTexture=c}else if(o.isSampledTexture){const c={},{primarySamples:u}=n.utils.getTextureSampleData(o.texture);if(u>1&&(c.multisampled=!0,o.texture.isDepthTexture||(c.sampleType=lg.UnfilterableFloat)),o.texture.isDepthTexture)c.sampleType=lg.Depth;else if(o.texture.isDataTexture||o.texture.isDataArrayTexture||o.texture.isData3DTexture){const h=o.texture.type;h===Cs?c.sampleType=lg.SInt:h===Vr?c.sampleType=lg.UInt:h===zi&&(this.backend.hasFeature("float32-filterable")?c.sampleType=lg.Float:c.sampleType=lg.UnfilterableFloat)}o.isSampledCubeTexture?c.viewDimension=Va.Cube:o.texture.isDataArrayTexture||o.texture.isCompressedArrayTexture?c.viewDimension=Va.TwoDArray:o.isSampledTexture3D&&(c.viewDimension=Va.ThreeD),l.texture=c}else console.error(`WebGPUBindingUtils: Unsupported binding "${o}".`);s.push(l)}return i.createBindGroupLayout({entries:s})}createBindings(e,n,i,s=0){const{backend:a,bindGroupLayoutCache:o}=this,l=a.get(e);let c=o.get(e.bindingsReference);c===void 0&&(c=this.createBindingsLayout(e),o.set(e.bindingsReference,c));let u;i>0&&(l.groups===void 0&&(l.groups=[],l.versions=[]),l.versions[i]===s&&(u=l.groups[i])),u===void 0&&(u=this.createBindGroup(e,c),i>0&&(l.groups[i]=u,l.versions[i]=s)),l.group=u,l.layout=c}updateBinding(e){const n=this.backend,i=n.device,s=e.buffer,a=n.get(e).buffer;i.queue.writeBuffer(a,0,s,0)}createBindGroupIndex(e,n){const s=this.backend.device,a=GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST,o=e[0],l=s.createBuffer({label:"bindingCameraIndex_"+o,size:16,usage:a});s.queue.writeBuffer(l,0,e,0);const c=[{binding:0,resource:{buffer:l}}];return s.createBindGroup({label:"bindGroupCameraIndex_"+o,layout:n,entries:c})}createBindGroup(e,n){const i=this.backend,s=i.device;let a=0;const o=[];for(const l of e.bindings){if(l.isUniformBuffer){const c=i.get(l);if(c.buffer===void 0){const u=l.byteLength,h=GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST,d=s.createBuffer({label:"bindingBuffer_"+l.name,size:u,usage:h});c.buffer=d}o.push({binding:a,resource:{buffer:c.buffer}})}else if(l.isStorageBuffer){const c=i.get(l);if(c.buffer===void 0){const u=l.attribute;c.buffer=i.get(u).buffer}o.push({binding:a,resource:{buffer:c.buffer}})}else if(l.isSampler){const c=i.get(l.texture);o.push({binding:a,resource:c.sampler})}else if(l.isSampledTexture){const c=i.get(l.texture);let u;if(c.externalTexture!==void 0)u=s.importExternalTexture({source:c.externalTexture});else{const h=l.store?1:c.texture.mipLevelCount,d=`view-${c.texture.width}-${c.texture.height}-${h}`;if(u=c[d],u===void 0){const f=TDe.All;let p;l.isSampledCubeTexture?p=Va.Cube:l.isSampledTexture3D?p=Va.ThreeD:l.texture.isDataArrayTexture||l.texture.isCompressedArrayTexture?p=Va.TwoDArray:p=Va.TwoD,u=c[d]=c.texture.createView({aspect:f,dimension:p,mipLevelCount:h})}}o.push({binding:a,resource:u})}a++}return s.createBindGroup({label:"bindGroup_"+e.name,layout:n,entries:o})}}class KDe{constructor(e){this.backend=e}_getSampleCount(e){return this.backend.utils.getSampleCountRenderContext(e)}createRenderPipeline(e,n){const{object:i,material:s,geometry:a,pipeline:o}=e,{vertexProgram:l,fragmentProgram:c}=o,u=this.backend,h=u.device,d=u.utils,f=u.get(o),p=[];for(const U of e.getBindings()){const B=u.get(U);p.push(B.layout)}const g=u.attributeUtils.createShaderVertexBuffers(e);let v;s.transparent===!0&&s.blending!==eo&&(v=this._getBlending(s));let x={};s.stencilWrite===!0&&(x={compare:this._getStencilCompare(s),failOp:this._getStencilOperation(s.stencilFail),depthFailOp:this._getStencilOperation(s.stencilZFail),passOp:this._getStencilOperation(s.stencilZPass)});const _=this._getColorWriteMask(s),E=[];if(e.context.textures!==null){const U=e.context.textures;for(let B=0;B<U.length;B++){const W=d.getTextureFormatGPU(U[B]);E.push({format:W,blend:v,writeMask:_})}}else{const U=d.getCurrentColorFormat(e.context);E.push({format:U,blend:v,writeMask:_})}const S=u.get(l).module,T=u.get(c).module,M=this._getPrimitiveState(i,a,s),C=this._getDepthCompare(s),A=d.getCurrentDepthStencilFormat(e.context),P=this._getSampleCount(e.context),R={label:`renderPipeline_${s.name||s.type}_${s.id}`,vertex:Object.assign({},S,{buffers:g}),fragment:Object.assign({},T,{targets:E}),primitive:M,multisample:{count:P,alphaToCoverageEnabled:s.alphaToCoverage&&P>1},layout:h.createPipelineLayout({bindGroupLayouts:p})},O={},D=e.context.depth,F=e.context.stencil;if((D===!0||F===!0)&&(D===!0&&(O.format=A,O.depthWriteEnabled=s.depthWrite,O.depthCompare=C),F===!0&&(O.stencilFront=x,O.stencilBack={},O.stencilReadMask=s.stencilFuncMask,O.stencilWriteMask=s.stencilWriteMask),s.polygonOffset===!0&&(O.depthBias=s.polygonOffsetUnits,O.depthBiasSlopeScale=s.polygonOffsetFactor,O.depthBiasClamp=0),R.depthStencil=O),n===null)f.pipeline=h.createRenderPipeline(R);else{const U=new Promise(B=>{h.createRenderPipelineAsync(R).then(W=>{f.pipeline=W,B()})});n.push(U)}}createBundleEncoder(e){const n=this.backend,{utils:i,device:s}=n,a=i.getCurrentDepthStencilFormat(e),o=i.getCurrentColorFormat(e),l=this._getSampleCount(e),c={label:"renderBundleEncoder",colorFormats:[o],depthStencilFormat:a,sampleCount:l};return s.createRenderBundleEncoder(c)}createComputePipeline(e,n){const i=this.backend,s=i.device,a=i.get(e.computeProgram).module,o=i.get(e),l=[];for(const c of n){const u=i.get(c);l.push(u.layout)}o.pipeline=s.createComputePipeline({compute:a,layout:s.createPipelineLayout({bindGroupLayouts:l})})}_getBlending(e){let n,i;const s=e.blending,a=e.blendSrc,o=e.blendDst,l=e.blendEquation;if(s===Fg){const c=e.blendSrcAlpha!==null?e.blendSrcAlpha:a,u=e.blendDstAlpha!==null?e.blendDstAlpha:o,h=e.blendEquationAlpha!==null?e.blendEquationAlpha:l;n={srcFactor:this._getBlendFactor(a),dstFactor:this._getBlendFactor(o),operation:this._getBlendOperation(l)},i={srcFactor:this._getBlendFactor(c),dstFactor:this._getBlendFactor(u),operation:this._getBlendOperation(h)}}else{const c=e.premultipliedAlpha,u=(h,d,f,p)=>{n={srcFactor:h,dstFactor:d,operation:jf.Add},i={srcFactor:f,dstFactor:p,operation:jf.Add}};if(c)switch(s){case hl:u(Fn.One,Fn.OneMinusSrcAlpha,Fn.One,Fn.OneMinusSrcAlpha);break;case Zg:u(Fn.One,Fn.One,Fn.One,Fn.One);break;case Qg:u(Fn.Zero,Fn.OneMinusSrc,Fn.Zero,Fn.One);break;case Jg:u(Fn.Zero,Fn.Src,Fn.Zero,Fn.SrcAlpha);break}else switch(s){case hl:u(Fn.SrcAlpha,Fn.OneMinusSrcAlpha,Fn.One,Fn.OneMinusSrcAlpha);break;case Zg:u(Fn.SrcAlpha,Fn.One,Fn.SrcAlpha,Fn.One);break;case Qg:u(Fn.Zero,Fn.OneMinusSrc,Fn.Zero,Fn.One);break;case Jg:u(Fn.Zero,Fn.Src,Fn.Zero,Fn.Src);break}}if(n!==void 0&&i!==void 0)return{color:n,alpha:i};console.error("THREE.WebGPURenderer: Invalid blending: ",s)}_getBlendFactor(e){let n;switch(e){case Uu:n=Fn.Zero;break;case lj:n=Fn.One;break;case cj:n=Fn.Src;break;case uj:n=Fn.OneMinusSrc;break;case qx:n=Fn.SrcAlpha;break;case Xx:n=Fn.OneMinusSrcAlpha;break;case fj:n=Fn.Dst;break;case pj:n=Fn.OneMinusDstColor;break;case hj:n=Fn.DstAlpha;break;case dj:n=Fn.OneMinusDstAlpha;break;case mj:n=Fn.SrcAlphaSaturated;break;case UOe:n=Fn.Constant;break;case zOe:n=Fn.OneMinusConstant;break;default:console.error("THREE.WebGPURenderer: Blend factor not supported.",e)}return n}_getStencilCompare(e){let n;const i=e.stencilFunc;switch(i){case zme:n=zs.Never;break;case r3:n=zs.Always;break;case $me:n=zs.Less;break;case Vme:n=zs.LessEqual;break;case Gme:n=zs.Equal;break;case qme:n=zs.GreaterEqual;break;case Hme:n=zs.Greater;break;case Wme:n=zs.NotEqual;break;default:console.error("THREE.WebGPURenderer: Invalid stencil function.",i)}return n}_getStencilOperation(e){let n;switch(e){case Gf:n=dd.Keep;break;case Ime:n=dd.Zero;break;case Dme:n=dd.Replace;break;case Ume:n=dd.Invert;break;case Lme:n=dd.IncrementClamp;break;case Fme:n=dd.DecrementClamp;break;case Bme:n=dd.IncrementWrap;break;case jme:n=dd.DecrementWrap;break;default:console.error("THREE.WebGPURenderer: Invalid stencil operation.",n)}return n}_getBlendOperation(e){let n;switch(e){case ua:n=jf.Add;break;case aj:n=jf.Subtract;break;case oj:n=jf.ReverseSubtract;break;case HJ:n=jf.Min;break;case WJ:n=jf.Max;break;default:console.error("THREE.WebGPUPipelineUtils: Blend equation not supported.",e)}return n}_getPrimitiveState(e,n,i){const s={},a=this.backend.utils;switch(s.topology=a.getPrimitiveTopology(e,i),n.index!==null&&e.isLine===!0&&e.isLineSegments!==!0&&(s.stripIndexFormat=n.index.array instanceof Uint16Array?Ey.Uint16:Ey.Uint32),i.side){case Ja:s.frontFace=CR.CCW,s.cullMode=NR.Back;break;case Wr:s.frontFace=CR.CCW,s.cullMode=NR.Front;break;case Ea:s.frontFace=CR.CCW,s.cullMode=NR.None;break;default:console.error("THREE.WebGPUPipelineUtils: Unknown material.side value.",i.side);break}return s}_getColorWriteMask(e){return e.colorWrite===!0?MW.All:MW.None}_getDepthCompare(e){let n;if(e.depthTest===!1)n=zs.Always;else{const i=e.depthFunc;switch(i){case Kx:n=zs.Never;break;case Yx:n=zs.Always;break;case Zx:n=zs.Less;break;case Dd:n=zs.LessEqual;break;case Qx:n=zs.Equal;break;case Jx:n=zs.GreaterEqual;break;case eb:n=zs.Greater;break;case tb:n=zs.NotEqual;break;default:console.error("THREE.WebGPUPipelineUtils: Invalid depth function.",i)}}return n}}class YDe extends sie{constructor(e,n,i=2048){super(i),this.device=e,this.type=n,this.querySet=this.device.createQuerySet({type:"timestamp",count:this.maxQueries,label:`queryset_global_timestamp_${n}`});const s=this.maxQueries*8;this.resolveBuffer=this.device.createBuffer({label:`buffer_timestamp_resolve_${n}`,size:s,usage:GPUBufferUsage.QUERY_RESOLVE|GPUBufferUsage.COPY_SRC}),this.resultBuffer=this.device.createBuffer({label:`buffer_timestamp_result_${n}`,size:s,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ})}allocateQueriesForContext(e){if(!this.trackTimestamp||this.isDisposed)return null;if(this.currentQueryIndex+2>this.maxQueries)return ic(`WebGPUTimestampQueryPool [${this.type}]: Maximum number of queries exceeded, when using trackTimestamp it is necessary to resolves the queries via renderer.resolveTimestampsAsync( THREE.TimestampQuery.${this.type.toUpperCase()} ).`),null;const n=this.currentQueryIndex;return this.currentQueryIndex+=2,this.queryOffsets.set(e.id,n),n}async resolveQueriesAsync(){if(!this.trackTimestamp||this.currentQueryIndex===0||this.isDisposed)return this.lastValue;if(this.pendingResolve)return this.pendingResolve;this.pendingResolve=this._resolveQueries();try{return await this.pendingResolve}finally{this.pendingResolve=null}}async _resolveQueries(){if(this.isDisposed)return this.lastValue;try{if(this.resultBuffer.mapState!=="unmapped")return this.lastValue;const e=new Map(this.queryOffsets),n=this.currentQueryIndex,i=n*8;this.currentQueryIndex=0,this.queryOffsets.clear();const s=this.device.createCommandEncoder();s.resolveQuerySet(this.querySet,0,n,this.resolveBuffer,0),s.copyBufferToBuffer(this.resolveBuffer,0,this.resultBuffer,0,i);const a=s.finish();if(this.device.queue.submit([a]),this.resultBuffer.mapState!=="unmapped")return this.lastValue;if(await this.resultBuffer.mapAsync(GPUMapMode.READ,0,i),this.isDisposed)return this.resultBuffer.mapState==="mapped"&&this.resultBuffer.unmap(),this.lastValue;const o=new BigUint64Array(this.resultBuffer.getMappedRange(0,i));let l=0;for(const[,c]of e){const u=o[c],h=o[c+1],d=Number(h-u)/1e6;l+=d}return this.resultBuffer.unmap(),this.lastValue=l,l}catch(e){return console.error("Error resolving queries:",e),this.resultBuffer.mapState==="mapped"&&this.resultBuffer.unmap(),this.lastValue}}async dispose(){if(!this.isDisposed){if(this.isDisposed=!0,this.pendingResolve)try{await this.pendingResolve}catch(e){console.error("Error waiting for pending resolve:",e)}if(this.resultBuffer&&this.resultBuffer.mapState==="mapped")try{this.resultBuffer.unmap()}catch(e){console.error("Error unmapping buffer:",e)}this.querySet&&(this.querySet.destroy(),this.querySet=null),this.resolveBuffer&&(this.resolveBuffer.destroy(),this.resolveBuffer=null),this.resultBuffer&&(this.resultBuffer.destroy(),this.resultBuffer=null),this.queryOffsets.clear(),this.pendingResolve=null}}}class ZDe extends iie{constructor(e={}){super(e),this.isWebGPUBackend=!0,this.parameters.alpha=e.alpha===void 0?!0:e.alpha,this.parameters.requiredLimits=e.requiredLimits===void 0?{}:e.requiredLimits,this.device=null,this.context=null,this.colorBuffer=null,this.defaultRenderPassdescriptor=null,this.utils=new GDe(this),this.attributeUtils=new qDe(this),this.bindingUtils=new XDe(this),this.pipelineUtils=new KDe(this),this.textureUtils=new kDe(this),this.occludedResolveCache=new Map}async init(e){await super.init(e);const n=this.parameters;let i;if(n.device===void 0){const o={powerPreference:n.powerPreference},l=typeof navigator<"u"?await navigator.gpu.requestAdapter(o):null;if(l===null)throw new Error("WebGPUBackend: Unable to create WebGPU adapter.");const c=Object.values(Y3),u=[];for(const d of c)l.features.has(d)&&u.push(d);const h={requiredFeatures:u,requiredLimits:n.requiredLimits};i=await l.requestDevice(h)}else i=n.device;i.lost.then(o=>{const l={api:"WebGPU",message:o.message||"Unknown reason",reason:o.reason||null,originalEvent:o};e.onDeviceLost(l)});const s=n.context!==void 0?n.context:e.domElement.getContext("webgpu");this.device=i,this.context=s;const a=n.alpha?"premultiplied":"opaque";this.trackTimestamp=this.trackTimestamp&&this.hasFeature(Y3.TimestampQuery),this.context.configure({device:this.device,format:this.utils.getPreferredCanvasFormat(),usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.COPY_SRC,alphaMode:a}),this.updateSize()}get coordinateSystem(){return Bd}async getArrayBufferAsync(e){return await this.attributeUtils.getArrayBufferAsync(e)}getContext(){return this.context}_getDefaultRenderPassDescriptor(){let e=this.defaultRenderPassdescriptor;if(e===null){const i=this.renderer;e={colorAttachments:[{view:null}]},(this.renderer.depth===!0||this.renderer.stencil===!0)&&(e.depthStencilAttachment={view:this.textureUtils.getDepthBuffer(i.depth,i.stencil).createView()});const s=e.colorAttachments[0];this.renderer.samples>0?s.view=this.colorBuffer.createView():s.resolveTarget=void 0,this.defaultRenderPassdescriptor=e}const n=e.colorAttachments[0];return this.renderer.samples>0?n.resolveTarget=this.context.getCurrentTexture().createView():n.view=this.context.getCurrentTexture().createView(),e}_getRenderPassDescriptor(e,n={}){const i=e.renderTarget,s=this.get(i);let a=s.descriptors;if(a===void 0||s.width!==i.width||s.height!==i.height||s.dimensions!==i.dimensions||s.activeMipmapLevel!==e.activeMipmapLevel||s.activeCubeFace!==e.activeCubeFace||s.samples!==i.samples){a={},s.descriptors=a;const u=()=>{i.removeEventListener("dispose",u),this.delete(i)};i.hasEventListener("dispose",u)===!1&&i.addEventListener("dispose",u)}const o=e.getCacheKey();let l=a[o];if(l===void 0){const u=e.textures,h=[];let d;for(let f=0;f<u.length;f++){const p=this.get(u[f]),g={label:`colorAttachment_${f}`,baseMipLevel:e.activeMipmapLevel,mipLevelCount:1,baseArrayLayer:e.activeCubeFace,arrayLayerCount:1,dimension:Va.TwoD};i.isRenderTarget3D?(d=e.activeCubeFace,g.baseArrayLayer=0,g.dimension=Va.ThreeD,g.depthOrArrayLayers=u[f].image.depth):i.isRenderTargetArray&&(g.dimension=Va.TwoDArray,g.depthOrArrayLayers=u[f].image.depth);const v=p.texture.createView(g);let x,_;p.msaaTexture!==void 0?(x=p.msaaTexture.createView(),_=v):(x=v,_=void 0),h.push({view:x,resolveTarget:_,depthSlice:d})}if(l={textureViews:h},e.depth){const f=this.get(e.depthTexture);l.depthStencilView=f.texture.createView()}a[o]=l,s.width=i.width,s.height=i.height,s.samples=i.samples,s.activeMipmapLevel=e.activeMipmapLevel,s.activeCubeFace=e.activeCubeFace,s.dimensions=i.dimensions}const c={colorAttachments:[]};for(let u=0;u<l.textureViews.length;u++){const h=l.textureViews[u];let d={r:0,g:0,b:0,a:1};u===0&&n.clearValue&&(d=n.clearValue),c.colorAttachments.push({view:h.view,depthSlice:h.depthSlice,resolveTarget:h.resolveTarget,loadOp:n.loadOp||Qr.Load,storeOp:n.storeOp||Ms.Store,clearValue:d})}return l.depthStencilView&&(c.depthStencilAttachment={view:l.depthStencilView}),c}beginRender(e){const n=this.get(e),i=this.device,s=e.occlusionQueryCount;let a;s>0&&(n.currentOcclusionQuerySet&&n.currentOcclusionQuerySet.destroy(),n.currentOcclusionQueryBuffer&&n.currentOcclusionQueryBuffer.destroy(),n.currentOcclusionQuerySet=n.occlusionQuerySet,n.currentOcclusionQueryBuffer=n.occlusionQueryBuffer,n.currentOcclusionQueryObjects=n.occlusionQueryObjects,a=i.createQuerySet({type:"occlusion",count:s,label:`occlusionQuerySet_${e.id}`}),n.occlusionQuerySet=a,n.occlusionQueryIndex=0,n.occlusionQueryObjects=new Array(s),n.lastOcclusionObject=null);let o;e.textures===null?o=this._getDefaultRenderPassDescriptor():o=this._getRenderPassDescriptor(e,{loadOp:Qr.Load}),this.initTimestampQuery(e,o),o.occlusionQuerySet=a;const l=o.depthStencilAttachment;if(e.textures!==null){const h=o.colorAttachments;for(let d=0;d<h.length;d++){const f=h[d];e.clearColor?(f.clearValue=d===0?e.clearColorValue:{r:0,g:0,b:0,a:1},f.loadOp=Qr.Clear,f.storeOp=Ms.Store):(f.loadOp=Qr.Load,f.storeOp=Ms.Store)}}else{const h=o.colorAttachments[0];e.clearColor?(h.clearValue=e.clearColorValue,h.loadOp=Qr.Clear,h.storeOp=Ms.Store):(h.loadOp=Qr.Load,h.storeOp=Ms.Store)}e.depth&&(e.clearDepth?(l.depthClearValue=e.clearDepthValue,l.depthLoadOp=Qr.Clear,l.depthStoreOp=Ms.Store):(l.depthLoadOp=Qr.Load,l.depthStoreOp=Ms.Store)),e.stencil&&(e.clearStencil?(l.stencilClearValue=e.clearStencilValue,l.stencilLoadOp=Qr.Clear,l.stencilStoreOp=Ms.Store):(l.stencilLoadOp=Qr.Load,l.stencilStoreOp=Ms.Store));const c=i.createCommandEncoder({label:"renderContext_"+e.id}),u=c.beginRenderPass(o);if(n.descriptor=o,n.encoder=c,n.currentPass=u,n.currentSets={attributes:{},bindingGroups:[],pipeline:null,index:null},n.renderBundles=[],e.viewport&&this.updateViewport(e),e.scissor){const{x:h,y:d,width:f,height:p}=e.scissorValue;u.setScissorRect(h,d,f,p)}}finishRender(e){const n=this.get(e),i=e.occlusionQueryCount;if(n.renderBundles.length>0&&n.currentPass.executeBundles(n.renderBundles),i>n.occlusionQueryIndex&&n.currentPass.endOcclusionQuery(),n.currentPass.end(),i>0){const s=i*8;let a=this.occludedResolveCache.get(s);a===void 0&&(a=this.device.createBuffer({size:s,usage:GPUBufferUsage.QUERY_RESOLVE|GPUBufferUsage.COPY_SRC}),this.occludedResolveCache.set(s,a));const o=this.device.createBuffer({size:s,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ});n.encoder.resolveQuerySet(n.occlusionQuerySet,0,i,a,0),n.encoder.copyBufferToBuffer(a,0,o,0,s),n.occlusionQueryBuffer=o,this.resolveOccludedAsync(e)}if(this.device.queue.submit([n.encoder.finish()]),e.textures!==null){const s=e.textures;for(let a=0;a<s.length;a++){const o=s[a];o.generateMipmaps===!0&&this.textureUtils.generateMipmaps(o)}}}isOccluded(e,n){const i=this.get(e);return i.occluded&&i.occluded.has(n)}async resolveOccludedAsync(e){const n=this.get(e),{currentOcclusionQueryBuffer:i,currentOcclusionQueryObjects:s}=n;if(i&&s){const a=new WeakSet;n.currentOcclusionQueryObjects=null,n.currentOcclusionQueryBuffer=null,await i.mapAsync(GPUMapMode.READ);const o=i.getMappedRange(),l=new BigUint64Array(o);for(let c=0;c<s.length;c++)l[c]===BigInt(0)&&a.add(s[c]);i.destroy(),n.occluded=a}}updateViewport(e){const{currentPass:n}=this.get(e),{x:i,y:s,width:a,height:o,minDepth:l,maxDepth:c}=e.viewportValue;n.setViewport(i,s,a,o,l,c)}getClearColor(){const e=super.getClearColor();return this.renderer.alpha===!0&&(e.r*=e.a,e.g*=e.a,e.b*=e.a),e}clear(e,n,i,s=null){const a=this.device,o=this.renderer;let l=[],c,u,h,d;if(e){const g=this.getClearColor();u={r:g.r,g:g.g,b:g.b,a:g.a}}if(s===null){h=o.depth,d=o.stencil;const g=this._getDefaultRenderPassDescriptor();if(e){l=g.colorAttachments;const v=l[0];v.clearValue=u,v.loadOp=Qr.Clear,v.storeOp=Ms.Store}(h||d)&&(c=g.depthStencilAttachment)}else{h=s.depth,d=s.stencil;const g={loadOp:e?Qr.Clear:Qr.Load,clearValue:e?u:void 0};h&&(g.depthLoadOp=n?Qr.Clear:Qr.Load,g.depthClearValue=n?o.getClearDepth():void 0,g.depthStoreOp=Ms.Store),d&&(g.stencilLoadOp=i?Qr.Clear:Qr.Load,g.stencilClearValue=i?o.getClearStencil():void 0,g.stencilStoreOp=Ms.Store);const v=this._getRenderPassDescriptor(s,g);l=v.colorAttachments,c=v.depthStencilAttachment}h&&c&&c.depthLoadOp===void 0&&(n?(c.depthLoadOp=Qr.Clear,c.depthClearValue=o.getClearDepth(),c.depthStoreOp=Ms.Store):(c.depthLoadOp=Qr.Load,c.depthStoreOp=Ms.Store)),d&&c&&c.stencilLoadOp===void 0&&(i?(c.stencilLoadOp=Qr.Clear,c.stencilClearValue=o.getClearStencil(),c.stencilStoreOp=Ms.Store):(c.stencilLoadOp=Qr.Load,c.stencilStoreOp=Ms.Store));const f=a.createCommandEncoder({label:"clear"});f.beginRenderPass({colorAttachments:l,depthStencilAttachment:c}).end(),a.queue.submit([f.finish()])}beginCompute(e){const n=this.get(e),i={label:"computeGroup_"+e.id};this.initTimestampQuery(e,i),n.cmdEncoderGPU=this.device.createCommandEncoder({label:"computeGroup_"+e.id}),n.passEncoderGPU=n.cmdEncoderGPU.beginComputePass(i)}compute(e,n,i,s){const{passEncoderGPU:a}=this.get(e),o=this.get(s).pipeline;a.setPipeline(o);for(let h=0,d=i.length;h<d;h++){const f=i[h],p=this.get(f);a.setBindGroup(h,p.group)}const l=this.device.limits.maxComputeWorkgroupsPerDimension,c=this.get(n);c.dispatchSize===void 0&&(c.dispatchSize={x:0,y:1,z:1});const{dispatchSize:u}=c;n.dispatchCount>l?(u.x=Math.min(n.dispatchCount,l),u.y=Math.ceil(n.dispatchCount/l)):u.x=n.dispatchCount,a.dispatchWorkgroups(u.x,u.y,u.z)}finishCompute(e){const n=this.get(e);n.passEncoderGPU.end(),this.device.queue.submit([n.cmdEncoderGPU.finish()])}async waitForGPU(){await this.device.queue.onSubmittedWorkDone()}draw(e,n){const{object:i,material:s,context:a,pipeline:o}=e,l=e.getBindings(),c=this.get(a),u=this.get(o).pipeline,h=c.currentSets,d=c.currentPass,f=e.getDrawParameters();if(f===null)return;h.pipeline!==u&&(d.setPipeline(u),h.pipeline=u);const p=h.bindingGroups;for(let E=0,S=l.length;E<S;E++){const T=l[E],M=this.get(T);p[T.index]!==T.id&&(d.setBindGroup(T.index,M.group),p[T.index]=T.id)}const g=e.getIndex(),v=g!==null;if(v===!0&&h.index!==g){const E=this.get(g).buffer,S=g.array instanceof Uint16Array?Ey.Uint16:Ey.Uint32;d.setIndexBuffer(E,S),h.index=g}const x=e.getVertexBuffers();for(let E=0,S=x.length;E<S;E++){const T=x[E];if(h.attributes[E]!==T){const M=this.get(T).buffer;d.setVertexBuffer(E,M),h.attributes[E]=T}}if(c.occlusionQuerySet!==void 0){const E=c.lastOcclusionObject;E!==i&&(E!==null&&E.occlusionTest===!0&&(d.endOcclusionQuery(),c.occlusionQueryIndex++),i.occlusionTest===!0&&(d.beginOcclusionQuery(c.occlusionQueryIndex),c.occlusionQueryObjects[c.occlusionQueryIndex]=i),c.lastOcclusionObject=i)}a.stencil===!0&&s.stencilWrite===!0&&c.currentStencilRef!==s.stencilRef&&(d.setStencilReference(s.stencilRef),c.currentStencilRef=s.stencilRef);const _=()=>{if(i.isBatchedMesh===!0){const E=i._multiDrawStarts,S=i._multiDrawCounts,T=i._multiDrawCount,M=i._multiDrawInstances;M!==null&&ic("THREE.WebGPUBackend: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection.");for(let C=0;C<T;C++){const A=M?M[C]:1,P=A>1?0:C;v===!0?d.drawIndexed(S[C],A,E[C]/g.array.BYTES_PER_ELEMENT,0,P):d.draw(S[C],A,E[C],P),n.update(i,S[C],A)}}else if(v===!0){const{vertexCount:E,instanceCount:S,firstVertex:T}=f,M=e.getIndirect();if(M!==null){const C=this.get(M).buffer;d.drawIndexedIndirect(C,0)}else d.drawIndexed(E,S,T,0,0);n.update(i,E,S)}else{const{vertexCount:E,instanceCount:S,firstVertex:T}=f,M=e.getIndirect();if(M!==null){const C=this.get(M).buffer;d.drawIndirect(C,0)}else d.draw(E,S,T,0);n.update(i,E,S)}};if(e.camera.isArrayCamera&&e.camera.cameras.length>0){const E=this.get(e.camera),S=e.camera.cameras,T=e.getBindingGroup("cameraIndex");if(E.indexesGPU===void 0||E.indexesGPU.length!==S.length){const C=this.get(T),A=[],P=new Uint32Array([0,0,0,0]);for(let R=0,O=S.length;R<O;R++){P[0]=R;const D=this.bindingUtils.createBindGroupIndex(P,C.layout);A.push(D)}E.indexesGPU=A}const M=this.renderer.getPixelRatio();for(let C=0,A=S.length;C<A;C++){const P=S[C];if(i.layers.test(P.layers)){const R=P.viewport;d.setViewport(Math.floor(R.x*M),Math.floor(R.y*M),Math.floor(R.width*M),Math.floor(R.height*M),a.viewportValue.minDepth,a.viewportValue.maxDepth),d.setBindGroup(T.index,E.indexesGPU[C]),_()}}}else _()}needsRenderUpdate(e){const n=this.get(e),{object:i,material:s}=e,a=this.utils,o=a.getSampleCountRenderContext(e.context),l=a.getCurrentColorSpace(e.context),c=a.getCurrentColorFormat(e.context),u=a.getCurrentDepthStencilFormat(e.context),h=a.getPrimitiveTopology(i,s);let d=!1;return(n.material!==s||n.materialVersion!==s.version||n.transparent!==s.transparent||n.blending!==s.blending||n.premultipliedAlpha!==s.premultipliedAlpha||n.blendSrc!==s.blendSrc||n.blendDst!==s.blendDst||n.blendEquation!==s.blendEquation||n.blendSrcAlpha!==s.blendSrcAlpha||n.blendDstAlpha!==s.blendDstAlpha||n.blendEquationAlpha!==s.blendEquationAlpha||n.colorWrite!==s.colorWrite||n.depthWrite!==s.depthWrite||n.depthTest!==s.depthTest||n.depthFunc!==s.depthFunc||n.stencilWrite!==s.stencilWrite||n.stencilFunc!==s.stencilFunc||n.stencilFail!==s.stencilFail||n.stencilZFail!==s.stencilZFail||n.stencilZPass!==s.stencilZPass||n.stencilFuncMask!==s.stencilFuncMask||n.stencilWriteMask!==s.stencilWriteMask||n.side!==s.side||n.alphaToCoverage!==s.alphaToCoverage||n.sampleCount!==o||n.colorSpace!==l||n.colorFormat!==c||n.depthStencilFormat!==u||n.primitiveTopology!==h||n.clippingContextCacheKey!==e.clippingContextCacheKey)&&(n.material=s,n.materialVersion=s.version,n.transparent=s.transparent,n.blending=s.blending,n.premultipliedAlpha=s.premultipliedAlpha,n.blendSrc=s.blendSrc,n.blendDst=s.blendDst,n.blendEquation=s.blendEquation,n.blendSrcAlpha=s.blendSrcAlpha,n.blendDstAlpha=s.blendDstAlpha,n.blendEquationAlpha=s.blendEquationAlpha,n.colorWrite=s.colorWrite,n.depthWrite=s.depthWrite,n.depthTest=s.depthTest,n.depthFunc=s.depthFunc,n.stencilWrite=s.stencilWrite,n.stencilFunc=s.stencilFunc,n.stencilFail=s.stencilFail,n.stencilZFail=s.stencilZFail,n.stencilZPass=s.stencilZPass,n.stencilFuncMask=s.stencilFuncMask,n.stencilWriteMask=s.stencilWriteMask,n.side=s.side,n.alphaToCoverage=s.alphaToCoverage,n.sampleCount=o,n.colorSpace=l,n.colorFormat=c,n.depthStencilFormat=u,n.primitiveTopology=h,n.clippingContextCacheKey=e.clippingContextCacheKey,d=!0),d}getRenderCacheKey(e){const{object:n,material:i}=e,s=this.utils,a=e.context;return[i.transparent,i.blending,i.premultipliedAlpha,i.blendSrc,i.blendDst,i.blendEquation,i.blendSrcAlpha,i.blendDstAlpha,i.blendEquationAlpha,i.colorWrite,i.depthWrite,i.depthTest,i.depthFunc,i.stencilWrite,i.stencilFunc,i.stencilFail,i.stencilZFail,i.stencilZPass,i.stencilFuncMask,i.stencilWriteMask,i.side,s.getSampleCountRenderContext(a),s.getCurrentColorSpace(a),s.getCurrentColorFormat(a),s.getCurrentDepthStencilFormat(a),s.getPrimitiveTopology(n,i),e.getGeometryCacheKey(),e.clippingContextCacheKey].join()}createSampler(e){this.textureUtils.createSampler(e)}destroySampler(e){this.textureUtils.destroySampler(e)}createDefaultTexture(e){this.textureUtils.createDefaultTexture(e)}createTexture(e,n){this.textureUtils.createTexture(e,n)}updateTexture(e,n){this.textureUtils.updateTexture(e,n)}generateMipmaps(e){this.textureUtils.generateMipmaps(e)}destroyTexture(e){this.textureUtils.destroyTexture(e)}async copyTextureToBuffer(e,n,i,s,a,o){return this.textureUtils.copyTextureToBuffer(e,n,i,s,a,o)}initTimestampQuery(e,n){if(!this.trackTimestamp)return;const i=e.isComputeNode?"compute":"render";this.timestampQueryPool[i]||(this.timestampQueryPool[i]=new YDe(this.device,i,2048));const s=this.timestampQueryPool[i],a=s.allocateQueriesForContext(e);n.timestampWrites={querySet:s.querySet,beginningOfPassWriteIndex:a,endOfPassWriteIndex:a+1}}createNodeBuilder(e,n){return new $De(e,n)}createProgram(e){const n=this.get(e);n.module={module:this.device.createShaderModule({code:e.code,label:e.stage+(e.name!==""?`_${e.name}`:"")}),entryPoint:"main"}}destroyProgram(e){this.delete(e)}createRenderPipeline(e,n){this.pipelineUtils.createRenderPipeline(e,n)}createComputePipeline(e,n){this.pipelineUtils.createComputePipeline(e,n)}beginBundle(e){const n=this.get(e);n._currentPass=n.currentPass,n._currentSets=n.currentSets,n.currentSets={attributes:{},bindingGroups:[],pipeline:null,index:null},n.currentPass=this.pipelineUtils.createBundleEncoder(e)}finishBundle(e,n){const i=this.get(e),a=i.currentPass.finish();this.get(n).bundleGPU=a,i.currentSets=i._currentSets,i.currentPass=i._currentPass}addBundle(e,n){this.get(e).renderBundles.push(this.get(n).bundleGPU)}createBindings(e,n,i,s){this.bindingUtils.createBindings(e,n,i,s)}updateBindings(e,n,i,s){this.bindingUtils.createBindings(e,n,i,s)}updateBinding(e){this.bindingUtils.updateBinding(e)}createIndexAttribute(e){this.attributeUtils.createAttribute(e,GPUBufferUsage.INDEX|GPUBufferUsage.COPY_SRC|GPUBufferUsage.COPY_DST)}createAttribute(e){this.attributeUtils.createAttribute(e,GPUBufferUsage.VERTEX|GPUBufferUsage.COPY_SRC|GPUBufferUsage.COPY_DST)}createStorageAttribute(e){this.attributeUtils.createAttribute(e,GPUBufferUsage.STORAGE|GPUBufferUsage.VERTEX|GPUBufferUsage.COPY_SRC|GPUBufferUsage.COPY_DST)}createIndirectStorageAttribute(e){this.attributeUtils.createAttribute(e,GPUBufferUsage.STORAGE|GPUBufferUsage.INDIRECT|GPUBufferUsage.COPY_SRC|GPUBufferUsage.COPY_DST)}updateAttribute(e){this.attributeUtils.updateAttribute(e)}destroyAttribute(e){this.attributeUtils.destroyAttribute(e)}updateSize(){this.colorBuffer=this.textureUtils.getColorBuffer(),this.defaultRenderPassdescriptor=null}getMaxAnisotropy(){return 16}hasFeature(e){return this.device.features.has(e)}copyTextureToTexture(e,n,i=null,s=null,a=0,o=0){let l=0,c=0,u=0,h=0,d=0,f=0,p=e.image.width,g=e.image.height,v=1;i!==null&&(i.isBox3===!0?(h=i.min.x,d=i.min.y,f=i.min.z,p=i.max.x-i.min.x,g=i.max.y-i.min.y,v=i.max.z-i.min.z):(h=i.min.x,d=i.min.y,p=i.max.x-i.min.x,g=i.max.y-i.min.y,v=1)),s!==null&&(l=s.x,c=s.y,u=s.z||0);const x=this.device.createCommandEncoder({label:"copyTextureToTexture_"+e.id+"_"+n.id}),_=this.get(e).texture,E=this.get(n).texture;x.copyTextureToTexture({texture:_,mipLevel:a,origin:{x:h,y:d,z:f}},{texture:E,mipLevel:o,origin:{x:l,y:c,z:u}},[p,g,v]),this.device.queue.submit([x.finish()]),o===0&&n.generateMipmaps&&this.textureUtils.generateMipmaps(n)}copyFramebufferToTexture(e,n,i){const s=this.get(n);let a=null;n.renderTarget?e.isDepthTexture?a=this.get(n.depthTexture).texture:a=this.get(n.textures[0]).texture:e.isDepthTexture?a=this.textureUtils.getDepthBuffer(n.depth,n.stencil):a=this.context.getCurrentTexture();const o=this.get(e).texture;if(a.format!==o.format){console.error("WebGPUBackend: copyFramebufferToTexture: Source and destination formats do not match.",a.format,o.format);return}let l;if(s.currentPass?(s.currentPass.end(),l=s.encoder):l=this.device.createCommandEncoder({label:"copyFramebufferToTexture_"+e.id}),l.copyTextureToTexture({texture:a,origin:[i.x,i.y,0]},{texture:o},[i.z,i.w]),e.generateMipmaps&&this.textureUtils.generateMipmaps(e),s.currentPass){const{descriptor:c}=s;for(let u=0;u<c.colorAttachments.length;u++)c.colorAttachments[u].loadOp=Qr.Load;if(n.depth&&(c.depthStencilAttachment.depthLoadOp=Qr.Load),n.stencil&&(c.depthStencilAttachment.stencilLoadOp=Qr.Load),s.currentPass=l.beginRenderPass(c),s.currentSets={attributes:{},bindingGroups:[],pipeline:null,index:null},n.viewport&&this.updateViewport(n),n.scissor){const{x:u,y:h,width:d,height:f}=n.scissorValue;s.currentPass.setScissorRect(u,h,d,f)}}else this.device.queue.submit([l.finish()])}}class QDe extends bee{constructor(e,n,i,s,a,o){super(e,n,i,s,a,o),this.iesMap=null}copy(e,n){return super.copy(e,n),this.iesMap=e.iesMap,this}}class JDe extends Zre{constructor(){super(),this.addMaterial(MRe,"MeshPhongMaterial"),this.addMaterial(Rre,"MeshStandardMaterial"),this.addMaterial(xOe,"MeshPhysicalMaterial"),this.addMaterial(SOe,"MeshToonMaterial"),this.addMaterial(xRe,"MeshBasicMaterial"),this.addMaterial(TRe,"MeshLambertMaterial"),this.addMaterial(fRe,"MeshNormalMaterial"),this.addMaterial(AOe,"MeshMatcapMaterial"),this.addMaterial(lRe,"LineBasicMaterial"),this.addMaterial(uRe,"LineDashedMaterial"),this.addMaterial(ROe,"PointsMaterial"),this.addMaterial(kre,"SpriteMaterial"),this.addMaterial(IOe,"ShadowMaterial"),this.addLight(sIe,vye),this.addLight(OIe,bye),this.addLight(kIe,wye),this.addLight(Kre,bee),this.addLight(DIe,_ye),this.addLight(LIe,mye),this.addLight(FIe,Tye),this.addLight(IIe,QDe),this.addToneMapping(pke,KJ),this.addToneMapping(mke,YJ),this.addToneMapping(gke,ZJ),this.addToneMapping(vke,QJ),this.addToneMapping(wke,JJ),this.addToneMapping(Ske,eee)}}class eLe extends nDe{constructor(e={}){let n;e.forceWebGL?n=EW:(n=ZDe,e.getFallback=()=>(console.warn("THREE.WebGPURenderer: WebGPU is not available, running under WebGL2 backend."),new EW(e)));const i=new n(e);super(i,e),this.library=new JDe,this.isWebGPURenderer=!0}}const kR={type:"change"},WU={type:"start"},qU={type:"end"},OW=1e-6,Nr={NONE:-1,ROTATE:0,ZOOM:1,PAN:2,TOUCH_ROTATE:3,TOUCH_ZOOM_PAN:4},PS=new dt,fd=new dt,tLe=new pe,RS=new pe,IR=new pe,ug=new ac,kW=new pe,OS=new pe,DR=new pe,kS=new pe;class nLe extends Gj{constructor(e,n=null){super(e,n),this.screen={left:0,top:0,width:0,height:0},this.rotateSpeed=1,this.zoomSpeed=1.2,this.panSpeed=.3,this.noRotate=!1,this.noZoom=!1,this.noPan=!1,this.staticMoving=!1,this.dynamicDampingFactor=.2,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.keys=["KeyA","KeyS","KeyD"],this.mouseButtons={LEFT:ul.ROTATE,MIDDLE:ul.DOLLY,RIGHT:ul.PAN},this.target=new pe,this.state=Nr.NONE,this.keyState=Nr.NONE,this._lastPosition=new pe,this._lastZoom=1,this._touchZoomDistanceStart=0,this._touchZoomDistanceEnd=0,this._lastAngle=0,this._eye=new pe,this._movePrev=new dt,this._moveCurr=new dt,this._lastAxis=new pe,this._zoomStart=new dt,this._zoomEnd=new dt,this._panStart=new dt,this._panEnd=new dt,this._pointers=[],this._pointerPositions={},this._onPointerMove=iLe.bind(this),this._onPointerDown=rLe.bind(this),this._onPointerUp=sLe.bind(this),this._onPointerCancel=aLe.bind(this),this._onContextMenu=fLe.bind(this),this._onMouseWheel=dLe.bind(this),this._onKeyDown=lLe.bind(this),this._onKeyUp=oLe.bind(this),this._onTouchStart=pLe.bind(this),this._onTouchMove=mLe.bind(this),this._onTouchEnd=gLe.bind(this),this._onMouseDown=cLe.bind(this),this._onMouseMove=uLe.bind(this),this._onMouseUp=hLe.bind(this),this._target0=this.target.clone(),this._position0=this.object.position.clone(),this._up0=this.object.up.clone(),this._zoom0=this.object.zoom,n!==null&&(this.connect(n),this.handleResize()),this.update()}connect(e){super.connect(e),window.addEventListener("keydown",this._onKeyDown),window.addEventListener("keyup",this._onKeyUp),this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointercancel",this._onPointerCancel),this.domElement.addEventListener("wheel",this._onMouseWheel,{passive:!1}),this.domElement.addEventListener("contextmenu",this._onContextMenu),this.domElement.style.touchAction="none"}disconnect(){window.removeEventListener("keydown",this._onKeyDown),window.removeEventListener("keyup",this._onKeyUp),this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.domElement.removeEventListener("pointercancel",this._onPointerCancel),this.domElement.removeEventListener("wheel",this._onMouseWheel),this.domElement.removeEventListener("contextmenu",this._onContextMenu),this.domElement.style.touchAction="auto"}dispose(){this.disconnect()}handleResize(){const e=this.domElement.getBoundingClientRect(),n=this.domElement.ownerDocument.documentElement;this.screen.left=e.left+window.pageXOffset-n.clientLeft,this.screen.top=e.top+window.pageYOffset-n.clientTop,this.screen.width=e.width,this.screen.height=e.height}update(){this._eye.subVectors(this.object.position,this.target),this.noRotate||this._rotateCamera(),this.noZoom||this._zoomCamera(),this.noPan||this._panCamera(),this.object.position.addVectors(this.target,this._eye),this.object.isPerspectiveCamera?(this._checkDistances(),this.object.lookAt(this.target),this._lastPosition.distanceToSquared(this.object.position)>OW&&(this.dispatchEvent(kR),this._lastPosition.copy(this.object.position))):this.object.isOrthographicCamera?(this.object.lookAt(this.target),(this._lastPosition.distanceToSquared(this.object.position)>OW||this._lastZoom!==this.object.zoom)&&(this.dispatchEvent(kR),this._lastPosition.copy(this.object.position),this._lastZoom=this.object.zoom)):console.warn("THREE.TrackballControls: Unsupported camera type.")}reset(){this.state=Nr.NONE,this.keyState=Nr.NONE,this.target.copy(this._target0),this.object.position.copy(this._position0),this.object.up.copy(this._up0),this.object.zoom=this._zoom0,this.object.updateProjectionMatrix(),this._eye.subVectors(this.object.position,this.target),this.object.lookAt(this.target),this.dispatchEvent(kR),this._lastPosition.copy(this.object.position),this._lastZoom=this.object.zoom}_panCamera(){if(fd.copy(this._panEnd).sub(this._panStart),fd.lengthSq()){if(this.object.isOrthographicCamera){const e=(this.object.right-this.object.left)/this.object.zoom/this.domElement.clientWidth,n=(this.object.top-this.object.bottom)/this.object.zoom/this.domElement.clientWidth;fd.x*=e,fd.y*=n}fd.multiplyScalar(this._eye.length()*this.panSpeed),RS.copy(this._eye).cross(this.object.up).setLength(fd.x),RS.add(tLe.copy(this.object.up).setLength(fd.y)),this.object.position.add(RS),this.target.add(RS),this.staticMoving?this._panStart.copy(this._panEnd):this._panStart.add(fd.subVectors(this._panEnd,this._panStart).multiplyScalar(this.dynamicDampingFactor))}}_rotateCamera(){kS.set(this._moveCurr.x-this._movePrev.x,this._moveCurr.y-this._movePrev.y,0);let e=kS.length();e?(this._eye.copy(this.object.position).sub(this.target),kW.copy(this._eye).normalize(),OS.copy(this.object.up).normalize(),DR.crossVectors(OS,kW).normalize(),OS.setLength(this._moveCurr.y-this._movePrev.y),DR.setLength(this._moveCurr.x-this._movePrev.x),kS.copy(OS.add(DR)),IR.crossVectors(kS,this._eye).normalize(),e*=this.rotateSpeed,ug.setFromAxisAngle(IR,e),this._eye.applyQuaternion(ug),this.object.up.applyQuaternion(ug),this._lastAxis.copy(IR),this._lastAngle=e):!this.staticMoving&&this._lastAngle&&(this._lastAngle*=Math.sqrt(1-this.dynamicDampingFactor),this._eye.copy(this.object.position).sub(this.target),ug.setFromAxisAngle(this._lastAxis,this._lastAngle),this._eye.applyQuaternion(ug),this.object.up.applyQuaternion(ug)),this._movePrev.copy(this._moveCurr)}_zoomCamera(){let e;this.state===Nr.TOUCH_ZOOM_PAN?(e=this._touchZoomDistanceStart/this._touchZoomDistanceEnd,this._touchZoomDistanceStart=this._touchZoomDistanceEnd,this.object.isPerspectiveCamera?this._eye.multiplyScalar(e):this.object.isOrthographicCamera?(this.object.zoom=BT.clamp(this.object.zoom/e,this.minZoom,this.maxZoom),this._lastZoom!==this.object.zoom&&this.object.updateProjectionMatrix()):console.warn("THREE.TrackballControls: Unsupported camera type")):(e=1+(this._zoomEnd.y-this._zoomStart.y)*this.zoomSpeed,e!==1&&e>0&&(this.object.isPerspectiveCamera?this._eye.multiplyScalar(e):this.object.isOrthographicCamera?(this.object.zoom=BT.clamp(this.object.zoom/e,this.minZoom,this.maxZoom),this._lastZoom!==this.object.zoom&&this.object.updateProjectionMatrix()):console.warn("THREE.TrackballControls: Unsupported camera type")),this.staticMoving?this._zoomStart.copy(this._zoomEnd):this._zoomStart.y+=(this._zoomEnd.y-this._zoomStart.y)*this.dynamicDampingFactor)}_getMouseOnScreen(e,n){return PS.set((e-this.screen.left)/this.screen.width,(n-this.screen.top)/this.screen.height),PS}_getMouseOnCircle(e,n){return PS.set((e-this.screen.width*.5-this.screen.left)/(this.screen.width*.5),(this.screen.height+2*(this.screen.top-n))/this.screen.width),PS}_addPointer(e){this._pointers.push(e)}_removePointer(e){delete this._pointerPositions[e.pointerId];for(let n=0;n<this._pointers.length;n++)if(this._pointers[n].pointerId==e.pointerId){this._pointers.splice(n,1);return}}_trackPointer(e){let n=this._pointerPositions[e.pointerId];n===void 0&&(n=new dt,this._pointerPositions[e.pointerId]=n),n.set(e.pageX,e.pageY)}_getSecondPointerPosition(e){const n=e.pointerId===this._pointers[0].pointerId?this._pointers[1]:this._pointers[0];return this._pointerPositions[n.pointerId]}_checkDistances(){(!this.noZoom||!this.noPan)&&(this._eye.lengthSq()>this.maxDistance*this.maxDistance&&(this.object.position.addVectors(this.target,this._eye.setLength(this.maxDistance)),this._zoomStart.copy(this._zoomEnd)),this._eye.lengthSq()<this.minDistance*this.minDistance&&(this.object.position.addVectors(this.target,this._eye.setLength(this.minDistance)),this._zoomStart.copy(this._zoomEnd)))}}function rLe(r){this.enabled!==!1&&(this._pointers.length===0&&(this.domElement.setPointerCapture(r.pointerId),this.domElement.addEventListener("pointermove",this._onPointerMove),this.domElement.addEventListener("pointerup",this._onPointerUp)),this._addPointer(r),r.pointerType==="touch"?this._onTouchStart(r):this._onMouseDown(r))}function iLe(r){this.enabled!==!1&&(r.pointerType==="touch"?this._onTouchMove(r):this._onMouseMove(r))}function sLe(r){this.enabled!==!1&&(r.pointerType==="touch"?this._onTouchEnd(r):this._onMouseUp(),this._removePointer(r),this._pointers.length===0&&(this.domElement.releasePointerCapture(r.pointerId),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp)))}function aLe(r){this._removePointer(r)}function oLe(){this.enabled!==!1&&(this.keyState=Nr.NONE,window.addEventListener("keydown",this._onKeyDown))}function lLe(r){this.enabled!==!1&&(window.removeEventListener("keydown",this._onKeyDown),this.keyState===Nr.NONE&&(r.code===this.keys[Nr.ROTATE]&&!this.noRotate?this.keyState=Nr.ROTATE:r.code===this.keys[Nr.ZOOM]&&!this.noZoom?this.keyState=Nr.ZOOM:r.code===this.keys[Nr.PAN]&&!this.noPan&&(this.keyState=Nr.PAN)))}function cLe(r){let e;switch(r.button){case 0:e=this.mouseButtons.LEFT;break;case 1:e=this.mouseButtons.MIDDLE;break;case 2:e=this.mouseButtons.RIGHT;break;default:e=-1}switch(e){case ul.DOLLY:this.state=Nr.ZOOM;break;case ul.ROTATE:this.state=Nr.ROTATE;break;case ul.PAN:this.state=Nr.PAN;break;default:this.state=Nr.NONE}const n=this.keyState!==Nr.NONE?this.keyState:this.state;n===Nr.ROTATE&&!this.noRotate?(this._moveCurr.copy(this._getMouseOnCircle(r.pageX,r.pageY)),this._movePrev.copy(this._moveCurr)):n===Nr.ZOOM&&!this.noZoom?(this._zoomStart.copy(this._getMouseOnScreen(r.pageX,r.pageY)),this._zoomEnd.copy(this._zoomStart)):n===Nr.PAN&&!this.noPan&&(this._panStart.copy(this._getMouseOnScreen(r.pageX,r.pageY)),this._panEnd.copy(this._panStart)),this.dispatchEvent(WU)}function uLe(r){const e=this.keyState!==Nr.NONE?this.keyState:this.state;e===Nr.ROTATE&&!this.noRotate?(this._movePrev.copy(this._moveCurr),this._moveCurr.copy(this._getMouseOnCircle(r.pageX,r.pageY))):e===Nr.ZOOM&&!this.noZoom?this._zoomEnd.copy(this._getMouseOnScreen(r.pageX,r.pageY)):e===Nr.PAN&&!this.noPan&&this._panEnd.copy(this._getMouseOnScreen(r.pageX,r.pageY))}function hLe(){this.state=Nr.NONE,this.dispatchEvent(qU)}function dLe(r){if(this.enabled!==!1&&this.noZoom!==!0){switch(r.preventDefault(),r.deltaMode){case 2:this._zoomStart.y-=r.deltaY*.025;break;case 1:this._zoomStart.y-=r.deltaY*.01;break;default:this._zoomStart.y-=r.deltaY*25e-5;break}this.dispatchEvent(WU),this.dispatchEvent(qU)}}function fLe(r){this.enabled!==!1&&r.preventDefault()}function pLe(r){switch(this._trackPointer(r),this._pointers.length){case 1:this.state=Nr.TOUCH_ROTATE,this._moveCurr.copy(this._getMouseOnCircle(this._pointers[0].pageX,this._pointers[0].pageY)),this._movePrev.copy(this._moveCurr);break;default:this.state=Nr.TOUCH_ZOOM_PAN;const e=this._pointers[0].pageX-this._pointers[1].pageX,n=this._pointers[0].pageY-this._pointers[1].pageY;this._touchZoomDistanceEnd=this._touchZoomDistanceStart=Math.sqrt(e*e+n*n);const i=(this._pointers[0].pageX+this._pointers[1].pageX)/2,s=(this._pointers[0].pageY+this._pointers[1].pageY)/2;this._panStart.copy(this._getMouseOnScreen(i,s)),this._panEnd.copy(this._panStart);break}this.dispatchEvent(WU)}function mLe(r){switch(this._trackPointer(r),this._pointers.length){case 1:this._movePrev.copy(this._moveCurr),this._moveCurr.copy(this._getMouseOnCircle(r.pageX,r.pageY));break;default:const e=this._getSecondPointerPosition(r),n=r.pageX-e.x,i=r.pageY-e.y;this._touchZoomDistanceEnd=Math.sqrt(n*n+i*i);const s=(r.pageX+e.x)/2,a=(r.pageY+e.y)/2;this._panEnd.copy(this._getMouseOnScreen(s,a));break}}function gLe(r){switch(this._pointers.length){case 0:this.state=Nr.NONE;break;case 1:this.state=Nr.TOUCH_ROTATE,this._moveCurr.copy(this._getMouseOnCircle(r.pageX,r.pageY)),this._movePrev.copy(this._moveCurr);break;case 2:this.state=Nr.TOUCH_ZOOM_PAN;for(let e=0;e<this._pointers.length;e++)if(this._pointers[e].pointerId!==r.pointerId){const n=this._pointerPositions[this._pointers[e].pointerId];this._moveCurr.copy(this._getMouseOnCircle(n.x,n.y)),this._movePrev.copy(this._moveCurr);break}break}this.dispatchEvent(qU)}const IW={type:"change"},XU={type:"start"},oie={type:"end"},IS=new EM,DW=new nl,yLe=Math.cos(70*BT.DEG2RAD),cs=new pe,Ga=2*Math.PI,jr={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},LR=1e-6;class vLe extends Gj{constructor(e,n=null){super(e,n),this.state=jr.NONE,this.target=new pe,this.cursor=new pe,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minTargetRadius=0,this.maxTargetRadius=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.keyRotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:ul.ROTATE,MIDDLE:ul.DOLLY,RIGHT:ul.PAN},this.touches={ONE:wg.ROTATE,TWO:wg.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this._lastPosition=new pe,this._lastQuaternion=new ac,this._lastTargetPosition=new pe,this._quat=new ac().setFromUnitVectors(e.up,new pe(0,1,0)),this._quatInverse=this._quat.clone().invert(),this._spherical=new RG,this._sphericalDelta=new RG,this._scale=1,this._panOffset=new pe,this._rotateStart=new dt,this._rotateEnd=new dt,this._rotateDelta=new dt,this._panStart=new dt,this._panEnd=new dt,this._panDelta=new dt,this._dollyStart=new dt,this._dollyEnd=new dt,this._dollyDelta=new dt,this._dollyDirection=new pe,this._mouse=new dt,this._performCursorZoom=!1,this._pointers=[],this._pointerPositions={},this._controlActive=!1,this._onPointerMove=bLe.bind(this),this._onPointerDown=xLe.bind(this),this._onPointerUp=_Le.bind(this),this._onContextMenu=CLe.bind(this),this._onMouseWheel=TLe.bind(this),this._onKeyDown=ELe.bind(this),this._onTouchStart=MLe.bind(this),this._onTouchMove=ALe.bind(this),this._onMouseDown=wLe.bind(this),this._onMouseMove=SLe.bind(this),this._interceptControlDown=NLe.bind(this),this._interceptControlUp=PLe.bind(this),this.domElement!==null&&this.connect(this.domElement),this.update()}connect(e){super.connect(e),this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointercancel",this._onPointerUp),this.domElement.addEventListener("contextmenu",this._onContextMenu),this.domElement.addEventListener("wheel",this._onMouseWheel,{passive:!1}),this.domElement.getRootNode().addEventListener("keydown",this._interceptControlDown,{passive:!0,capture:!0}),this.domElement.style.touchAction="none"}disconnect(){this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.domElement.removeEventListener("pointercancel",this._onPointerUp),this.domElement.removeEventListener("wheel",this._onMouseWheel),this.domElement.removeEventListener("contextmenu",this._onContextMenu),this.stopListenToKeyEvents(),this.domElement.getRootNode().removeEventListener("keydown",this._interceptControlDown,{capture:!0}),this.domElement.style.touchAction="auto"}dispose(){this.disconnect()}getPolarAngle(){return this._spherical.phi}getAzimuthalAngle(){return this._spherical.theta}getDistance(){return this.object.position.distanceTo(this.target)}listenToKeyEvents(e){e.addEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=e}stopListenToKeyEvents(){this._domElementKeyEvents!==null&&(this._domElementKeyEvents.removeEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=null)}saveState(){this.target0.copy(this.target),this.position0.copy(this.object.position),this.zoom0=this.object.zoom}reset(){this.target.copy(this.target0),this.object.position.copy(this.position0),this.object.zoom=this.zoom0,this.object.updateProjectionMatrix(),this.dispatchEvent(IW),this.update(),this.state=jr.NONE}update(e=null){const n=this.object.position;cs.copy(n).sub(this.target),cs.applyQuaternion(this._quat),this._spherical.setFromVector3(cs),this.autoRotate&&this.state===jr.NONE&&this._rotateLeft(this._getAutoRotationAngle(e)),this.enableDamping?(this._spherical.theta+=this._sphericalDelta.theta*this.dampingFactor,this._spherical.phi+=this._sphericalDelta.phi*this.dampingFactor):(this._spherical.theta+=this._sphericalDelta.theta,this._spherical.phi+=this._sphericalDelta.phi);let i=this.minAzimuthAngle,s=this.maxAzimuthAngle;isFinite(i)&&isFinite(s)&&(i<-Math.PI?i+=Ga:i>Math.PI&&(i-=Ga),s<-Math.PI?s+=Ga:s>Math.PI&&(s-=Ga),i<=s?this._spherical.theta=Math.max(i,Math.min(s,this._spherical.theta)):this._spherical.theta=this._spherical.theta>(i+s)/2?Math.max(i,this._spherical.theta):Math.min(s,this._spherical.theta)),this._spherical.phi=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,this._spherical.phi)),this._spherical.makeSafe(),this.enableDamping===!0?this.target.addScaledVector(this._panOffset,this.dampingFactor):this.target.add(this._panOffset),this.target.sub(this.cursor),this.target.clampLength(this.minTargetRadius,this.maxTargetRadius),this.target.add(this.cursor);let a=!1;if(this.zoomToCursor&&this._performCursorZoom||this.object.isOrthographicCamera)this._spherical.radius=this._clampDistance(this._spherical.radius);else{const o=this._spherical.radius;this._spherical.radius=this._clampDistance(this._spherical.radius*this._scale),a=o!=this._spherical.radius}if(cs.setFromSpherical(this._spherical),cs.applyQuaternion(this._quatInverse),n.copy(this.target).add(cs),this.object.lookAt(this.target),this.enableDamping===!0?(this._sphericalDelta.theta*=1-this.dampingFactor,this._sphericalDelta.phi*=1-this.dampingFactor,this._panOffset.multiplyScalar(1-this.dampingFactor)):(this._sphericalDelta.set(0,0,0),this._panOffset.set(0,0,0)),this.zoomToCursor&&this._performCursorZoom){let o=null;if(this.object.isPerspectiveCamera){const l=cs.length();o=this._clampDistance(l*this._scale);const c=l-o;this.object.position.addScaledVector(this._dollyDirection,c),this.object.updateMatrixWorld(),a=!!c}else if(this.object.isOrthographicCamera){const l=new pe(this._mouse.x,this._mouse.y,0);l.unproject(this.object);const c=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),this.object.updateProjectionMatrix(),a=c!==this.object.zoom;const u=new pe(this._mouse.x,this._mouse.y,0);u.unproject(this.object),this.object.position.sub(u).add(l),this.object.updateMatrixWorld(),o=cs.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),this.zoomToCursor=!1;o!==null&&(this.screenSpacePanning?this.target.set(0,0,-1).transformDirection(this.object.matrix).multiplyScalar(o).add(this.object.position):(IS.origin.copy(this.object.position),IS.direction.set(0,0,-1).transformDirection(this.object.matrix),Math.abs(this.object.up.dot(IS.direction))<yLe?this.object.lookAt(this.target):(DW.setFromNormalAndCoplanarPoint(this.object.up,this.target),IS.intersectPlane(DW,this.target))))}else if(this.object.isOrthographicCamera){const o=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),o!==this.object.zoom&&(this.object.updateProjectionMatrix(),a=!0)}return this._scale=1,this._performCursorZoom=!1,a||this._lastPosition.distanceToSquared(this.object.position)>LR||8*(1-this._lastQuaternion.dot(this.object.quaternion))>LR||this._lastTargetPosition.distanceToSquared(this.target)>LR?(this.dispatchEvent(IW),this._lastPosition.copy(this.object.position),this._lastQuaternion.copy(this.object.quaternion),this._lastTargetPosition.copy(this.target),!0):!1}_getAutoRotationAngle(e){return e!==null?Ga/60*this.autoRotateSpeed*e:Ga/60/60*this.autoRotateSpeed}_getZoomScale(e){const n=Math.abs(e*.01);return Math.pow(.95,this.zoomSpeed*n)}_rotateLeft(e){this._sphericalDelta.theta-=e}_rotateUp(e){this._sphericalDelta.phi-=e}_panLeft(e,n){cs.setFromMatrixColumn(n,0),cs.multiplyScalar(-e),this._panOffset.add(cs)}_panUp(e,n){this.screenSpacePanning===!0?cs.setFromMatrixColumn(n,1):(cs.setFromMatrixColumn(n,0),cs.crossVectors(this.object.up,cs)),cs.multiplyScalar(e),this._panOffset.add(cs)}_pan(e,n){const i=this.domElement;if(this.object.isPerspectiveCamera){const s=this.object.position;cs.copy(s).sub(this.target);let a=cs.length();a*=Math.tan(this.object.fov/2*Math.PI/180),this._panLeft(2*e*a/i.clientHeight,this.object.matrix),this._panUp(2*n*a/i.clientHeight,this.object.matrix)}else this.object.isOrthographicCamera?(this._panLeft(e*(this.object.right-this.object.left)/this.object.zoom/i.clientWidth,this.object.matrix),this._panUp(n*(this.object.top-this.object.bottom)/this.object.zoom/i.clientHeight,this.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),this.enablePan=!1)}_dollyOut(e){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale/=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_dollyIn(e){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale*=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_updateZoomParameters(e,n){if(!this.zoomToCursor)return;this._performCursorZoom=!0;const i=this.domElement.getBoundingClientRect(),s=e-i.left,a=n-i.top,o=i.width,l=i.height;this._mouse.x=s/o*2-1,this._mouse.y=-(a/l)*2+1,this._dollyDirection.set(this._mouse.x,this._mouse.y,1).unproject(this.object).sub(this.object.position).normalize()}_clampDistance(e){return Math.max(this.minDistance,Math.min(this.maxDistance,e))}_handleMouseDownRotate(e){this._rotateStart.set(e.clientX,e.clientY)}_handleMouseDownDolly(e){this._updateZoomParameters(e.clientX,e.clientX),this._dollyStart.set(e.clientX,e.clientY)}_handleMouseDownPan(e){this._panStart.set(e.clientX,e.clientY)}_handleMouseMoveRotate(e){this._rotateEnd.set(e.clientX,e.clientY),this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);const n=this.domElement;this._rotateLeft(Ga*this._rotateDelta.x/n.clientHeight),this._rotateUp(Ga*this._rotateDelta.y/n.clientHeight),this._rotateStart.copy(this._rotateEnd),this.update()}_handleMouseMoveDolly(e){this._dollyEnd.set(e.clientX,e.clientY),this._dollyDelta.subVectors(this._dollyEnd,this._dollyStart),this._dollyDelta.y>0?this._dollyOut(this._getZoomScale(this._dollyDelta.y)):this._dollyDelta.y<0&&this._dollyIn(this._getZoomScale(this._dollyDelta.y)),this._dollyStart.copy(this._dollyEnd),this.update()}_handleMouseMovePan(e){this._panEnd.set(e.clientX,e.clientY),this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd),this.update()}_handleMouseWheel(e){this._updateZoomParameters(e.clientX,e.clientY),e.deltaY<0?this._dollyIn(this._getZoomScale(e.deltaY)):e.deltaY>0&&this._dollyOut(this._getZoomScale(e.deltaY)),this.update()}_handleKeyDown(e){let n=!1;switch(e.code){case this.keys.UP:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateUp(Ga*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(0,this.keyPanSpeed),n=!0;break;case this.keys.BOTTOM:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateUp(-Ga*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(0,-this.keyPanSpeed),n=!0;break;case this.keys.LEFT:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateLeft(Ga*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(this.keyPanSpeed,0),n=!0;break;case this.keys.RIGHT:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateLeft(-Ga*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(-this.keyPanSpeed,0),n=!0;break}n&&(e.preventDefault(),this.update())}_handleTouchStartRotate(e){if(this._pointers.length===1)this._rotateStart.set(e.pageX,e.pageY);else{const n=this._getSecondPointerPosition(e),i=.5*(e.pageX+n.x),s=.5*(e.pageY+n.y);this._rotateStart.set(i,s)}}_handleTouchStartPan(e){if(this._pointers.length===1)this._panStart.set(e.pageX,e.pageY);else{const n=this._getSecondPointerPosition(e),i=.5*(e.pageX+n.x),s=.5*(e.pageY+n.y);this._panStart.set(i,s)}}_handleTouchStartDolly(e){const n=this._getSecondPointerPosition(e),i=e.pageX-n.x,s=e.pageY-n.y,a=Math.sqrt(i*i+s*s);this._dollyStart.set(0,a)}_handleTouchStartDollyPan(e){this.enableZoom&&this._handleTouchStartDolly(e),this.enablePan&&this._handleTouchStartPan(e)}_handleTouchStartDollyRotate(e){this.enableZoom&&this._handleTouchStartDolly(e),this.enableRotate&&this._handleTouchStartRotate(e)}_handleTouchMoveRotate(e){if(this._pointers.length==1)this._rotateEnd.set(e.pageX,e.pageY);else{const i=this._getSecondPointerPosition(e),s=.5*(e.pageX+i.x),a=.5*(e.pageY+i.y);this._rotateEnd.set(s,a)}this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);const n=this.domElement;this._rotateLeft(Ga*this._rotateDelta.x/n.clientHeight),this._rotateUp(Ga*this._rotateDelta.y/n.clientHeight),this._rotateStart.copy(this._rotateEnd)}_handleTouchMovePan(e){if(this._pointers.length===1)this._panEnd.set(e.pageX,e.pageY);else{const n=this._getSecondPointerPosition(e),i=.5*(e.pageX+n.x),s=.5*(e.pageY+n.y);this._panEnd.set(i,s)}this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd)}_handleTouchMoveDolly(e){const n=this._getSecondPointerPosition(e),i=e.pageX-n.x,s=e.pageY-n.y,a=Math.sqrt(i*i+s*s);this._dollyEnd.set(0,a),this._dollyDelta.set(0,Math.pow(this._dollyEnd.y/this._dollyStart.y,this.zoomSpeed)),this._dollyOut(this._dollyDelta.y),this._dollyStart.copy(this._dollyEnd);const o=(e.pageX+n.x)*.5,l=(e.pageY+n.y)*.5;this._updateZoomParameters(o,l)}_handleTouchMoveDollyPan(e){this.enableZoom&&this._handleTouchMoveDolly(e),this.enablePan&&this._handleTouchMovePan(e)}_handleTouchMoveDollyRotate(e){this.enableZoom&&this._handleTouchMoveDolly(e),this.enableRotate&&this._handleTouchMoveRotate(e)}_addPointer(e){this._pointers.push(e.pointerId)}_removePointer(e){delete this._pointerPositions[e.pointerId];for(let n=0;n<this._pointers.length;n++)if(this._pointers[n]==e.pointerId){this._pointers.splice(n,1);return}}_isTrackingPointer(e){for(let n=0;n<this._pointers.length;n++)if(this._pointers[n]==e.pointerId)return!0;return!1}_trackPointer(e){let n=this._pointerPositions[e.pointerId];n===void 0&&(n=new dt,this._pointerPositions[e.pointerId]=n),n.set(e.pageX,e.pageY)}_getSecondPointerPosition(e){const n=e.pointerId===this._pointers[0]?this._pointers[1]:this._pointers[0];return this._pointerPositions[n]}_customWheelEvent(e){const n=e.deltaMode,i={clientX:e.clientX,clientY:e.clientY,deltaY:e.deltaY};switch(n){case 1:i.deltaY*=16;break;case 2:i.deltaY*=100;break}return e.ctrlKey&&!this._controlActive&&(i.deltaY*=10),i}}function xLe(r){this.enabled!==!1&&(this._pointers.length===0&&(this.domElement.setPointerCapture(r.pointerId),this.domElement.addEventListener("pointermove",this._onPointerMove),this.domElement.addEventListener("pointerup",this._onPointerUp)),!this._isTrackingPointer(r)&&(this._addPointer(r),r.pointerType==="touch"?this._onTouchStart(r):this._onMouseDown(r)))}function bLe(r){this.enabled!==!1&&(r.pointerType==="touch"?this._onTouchMove(r):this._onMouseMove(r))}function _Le(r){switch(this._removePointer(r),this._pointers.length){case 0:this.domElement.releasePointerCapture(r.pointerId),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.dispatchEvent(oie),this.state=jr.NONE;break;case 1:const e=this._pointers[0],n=this._pointerPositions[e];this._onTouchStart({pointerId:e,pageX:n.x,pageY:n.y});break}}function wLe(r){let e;switch(r.button){case 0:e=this.mouseButtons.LEFT;break;case 1:e=this.mouseButtons.MIDDLE;break;case 2:e=this.mouseButtons.RIGHT;break;default:e=-1}switch(e){case ul.DOLLY:if(this.enableZoom===!1)return;this._handleMouseDownDolly(r),this.state=jr.DOLLY;break;case ul.ROTATE:if(r.ctrlKey||r.metaKey||r.shiftKey){if(this.enablePan===!1)return;this._handleMouseDownPan(r),this.state=jr.PAN}else{if(this.enableRotate===!1)return;this._handleMouseDownRotate(r),this.state=jr.ROTATE}break;case ul.PAN:if(r.ctrlKey||r.metaKey||r.shiftKey){if(this.enableRotate===!1)return;this._handleMouseDownRotate(r),this.state=jr.ROTATE}else{if(this.enablePan===!1)return;this._handleMouseDownPan(r),this.state=jr.PAN}break;default:this.state=jr.NONE}this.state!==jr.NONE&&this.dispatchEvent(XU)}function SLe(r){switch(this.state){case jr.ROTATE:if(this.enableRotate===!1)return;this._handleMouseMoveRotate(r);break;case jr.DOLLY:if(this.enableZoom===!1)return;this._handleMouseMoveDolly(r);break;case jr.PAN:if(this.enablePan===!1)return;this._handleMouseMovePan(r);break}}function TLe(r){this.enabled===!1||this.enableZoom===!1||this.state!==jr.NONE||(r.preventDefault(),this.dispatchEvent(XU),this._handleMouseWheel(this._customWheelEvent(r)),this.dispatchEvent(oie))}function ELe(r){this.enabled!==!1&&this._handleKeyDown(r)}function MLe(r){switch(this._trackPointer(r),this._pointers.length){case 1:switch(this.touches.ONE){case wg.ROTATE:if(this.enableRotate===!1)return;this._handleTouchStartRotate(r),this.state=jr.TOUCH_ROTATE;break;case wg.PAN:if(this.enablePan===!1)return;this._handleTouchStartPan(r),this.state=jr.TOUCH_PAN;break;default:this.state=jr.NONE}break;case 2:switch(this.touches.TWO){case wg.DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;this._handleTouchStartDollyPan(r),this.state=jr.TOUCH_DOLLY_PAN;break;case wg.DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;this._handleTouchStartDollyRotate(r),this.state=jr.TOUCH_DOLLY_ROTATE;break;default:this.state=jr.NONE}break;default:this.state=jr.NONE}this.state!==jr.NONE&&this.dispatchEvent(XU)}function ALe(r){switch(this._trackPointer(r),this.state){case jr.TOUCH_ROTATE:if(this.enableRotate===!1)return;this._handleTouchMoveRotate(r),this.update();break;case jr.TOUCH_PAN:if(this.enablePan===!1)return;this._handleTouchMovePan(r),this.update();break;case jr.TOUCH_DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;this._handleTouchMoveDollyPan(r),this.update();break;case jr.TOUCH_DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;this._handleTouchMoveDollyRotate(r),this.update();break;default:this.state=jr.NONE}}function CLe(r){this.enabled!==!1&&r.preventDefault()}function NLe(r){r.key==="Control"&&(this._controlActive=!0,this.domElement.getRootNode().addEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}function PLe(r){r.key==="Control"&&(this._controlActive=!1,this.domElement.getRootNode().removeEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}const RLe={type:"change"},LW=1e-6,FW=new ac;class OLe extends Gj{constructor(e,n=null){super(e,n),this.movementSpeed=1,this.rollSpeed=.005,this.dragToLook=!1,this.autoForward=!1,this._moveState={up:0,down:0,left:0,right:0,forward:0,back:0,pitchUp:0,pitchDown:0,yawLeft:0,yawRight:0,rollLeft:0,rollRight:0},this._moveVector=new pe(0,0,0),this._rotationVector=new pe(0,0,0),this._lastQuaternion=new ac,this._lastPosition=new pe,this._status=0,this._onKeyDown=kLe.bind(this),this._onKeyUp=ILe.bind(this),this._onPointerMove=LLe.bind(this),this._onPointerDown=DLe.bind(this),this._onPointerUp=FLe.bind(this),this._onPointerCancel=BLe.bind(this),this._onContextMenu=jLe.bind(this),n!==null&&this.connect(n)}connect(e){super.connect(e),window.addEventListener("keydown",this._onKeyDown),window.addEventListener("keyup",this._onKeyUp),this.domElement.addEventListener("pointermove",this._onPointerMove),this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointerup",this._onPointerUp),this.domElement.addEventListener("pointercancel",this._onPointerCancel),this.domElement.addEventListener("contextmenu",this._onContextMenu)}disconnect(){window.removeEventListener("keydown",this._onKeyDown),window.removeEventListener("keyup",this._onKeyUp),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.domElement.removeEventListener("pointercancel",this._onPointerCancel),this.domElement.removeEventListener("contextmenu",this._onContextMenu)}dispose(){this.disconnect()}update(e){if(this.enabled===!1)return;const n=this.object,i=e*this.movementSpeed,s=e*this.rollSpeed;n.translateX(this._moveVector.x*i),n.translateY(this._moveVector.y*i),n.translateZ(this._moveVector.z*i),FW.set(this._rotationVector.x*s,this._rotationVector.y*s,this._rotationVector.z*s,1).normalize(),n.quaternion.multiply(FW),(this._lastPosition.distanceToSquared(n.position)>LW||8*(1-this._lastQuaternion.dot(n.quaternion))>LW)&&(this.dispatchEvent(RLe),this._lastQuaternion.copy(n.quaternion),this._lastPosition.copy(n.position))}_updateMovementVector(){const e=this._moveState.forward||this.autoForward&&!this._moveState.back?1:0;this._moveVector.x=-this._moveState.left+this._moveState.right,this._moveVector.y=-this._moveState.down+this._moveState.up,this._moveVector.z=-e+this._moveState.back}_updateRotationVector(){this._rotationVector.x=-this._moveState.pitchDown+this._moveState.pitchUp,this._rotationVector.y=-this._moveState.yawRight+this._moveState.yawLeft,this._rotationVector.z=-this._moveState.rollRight+this._moveState.rollLeft}_getContainerDimensions(){return this.domElement!=document?{size:[this.domElement.offsetWidth,this.domElement.offsetHeight],offset:[this.domElement.offsetLeft,this.domElement.offsetTop]}:{size:[window.innerWidth,window.innerHeight],offset:[0,0]}}}function kLe(r){if(!(r.altKey||this.enabled===!1)){switch(r.code){case"ShiftLeft":case"ShiftRight":this.movementSpeedMultiplier=.1;break;case"KeyW":this._moveState.forward=1;break;case"KeyS":this._moveState.back=1;break;case"KeyA":this._moveState.left=1;break;case"KeyD":this._moveState.right=1;break;case"KeyR":this._moveState.up=1;break;case"KeyF":this._moveState.down=1;break;case"ArrowUp":this._moveState.pitchUp=1;break;case"ArrowDown":this._moveState.pitchDown=1;break;case"ArrowLeft":this._moveState.yawLeft=1;break;case"ArrowRight":this._moveState.yawRight=1;break;case"KeyQ":this._moveState.rollLeft=1;break;case"KeyE":this._moveState.rollRight=1;break}this._updateMovementVector(),this._updateRotationVector()}}function ILe(r){if(this.enabled!==!1){switch(r.code){case"ShiftLeft":case"ShiftRight":this.movementSpeedMultiplier=1;break;case"KeyW":this._moveState.forward=0;break;case"KeyS":this._moveState.back=0;break;case"KeyA":this._moveState.left=0;break;case"KeyD":this._moveState.right=0;break;case"KeyR":this._moveState.up=0;break;case"KeyF":this._moveState.down=0;break;case"ArrowUp":this._moveState.pitchUp=0;break;case"ArrowDown":this._moveState.pitchDown=0;break;case"ArrowLeft":this._moveState.yawLeft=0;break;case"ArrowRight":this._moveState.yawRight=0;break;case"KeyQ":this._moveState.rollLeft=0;break;case"KeyE":this._moveState.rollRight=0;break}this._updateMovementVector(),this._updateRotationVector()}}function DLe(r){if(this.enabled!==!1)if(this.dragToLook)this._status++;else{switch(r.button){case 0:this._moveState.forward=1;break;case 2:this._moveState.back=1;break}this._updateMovementVector()}}function LLe(r){if(this.enabled!==!1&&(!this.dragToLook||this._status>0)){const e=this._getContainerDimensions(),n=e.size[0]/2,i=e.size[1]/2;this._moveState.yawLeft=-(r.pageX-e.offset[0]-n)/n,this._moveState.pitchDown=(r.pageY-e.offset[1]-i)/i,this._updateRotationVector()}}function FLe(r){if(this.enabled!==!1){if(this.dragToLook)this._status--,this._moveState.yawLeft=this._moveState.pitchDown=0;else{switch(r.button){case 0:this._moveState.forward=0;break;case 2:this._moveState.back=0;break}this._updateMovementVector()}this._updateRotationVector()}}function BLe(){this.enabled!==!1&&(this.dragToLook?(this._status=0,this._moveState.yawLeft=this._moveState.pitchDown=0):(this._moveState.forward=0,this._moveState.back=0,this._updateMovementVector()),this._updateRotationVector())}function jLe(r){this.enabled!==!1&&r.preventDefault()}const ULe={name:"CopyShader",uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform float opacity;

		uniform sampler2D tDiffuse;

		varying vec2 vUv;

		void main() {

			vec4 texel = texture2D( tDiffuse, vUv );
			gl_FragColor = opacity * texel;


		}`};class uA{constructor(){this.isPass=!0,this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}dispose(){}}const zLe=new T_(-1,1,1,-1,0,1);class $Le extends Ws{constructor(){super(),this.setAttribute("position",new $i([-1,3,0,-1,-1,0,3,-1,0],3)),this.setAttribute("uv",new $i([0,2,0,0,2,0],2))}}const GLe=new $Le;class VLe{constructor(e){this._mesh=new li(GLe,e)}dispose(){this._mesh.geometry.dispose()}render(e){e.render(this._mesh,zLe)}get material(){return this._mesh.material}set material(e){this._mesh.material=e}}class HLe extends uA{constructor(e,n="tDiffuse"){super(),this.textureID=n,this.uniforms=null,this.material=null,e instanceof Wc?(this.uniforms=e.uniforms,this.material=e):e&&(this.uniforms=hee.clone(e.uniforms),this.material=new Wc({name:e.name!==void 0?e.name:"unspecified",defines:Object.assign({},e.defines),uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this._fsQuad=new VLe(this.material)}render(e,n,i){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=i.texture),this._fsQuad.material=this.material,this.renderToScreen?(e.setRenderTarget(null),this._fsQuad.render(e)):(e.setRenderTarget(n),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),this._fsQuad.render(e))}dispose(){this.material.dispose(),this._fsQuad.dispose()}}class BW extends uA{constructor(e,n){super(),this.scene=e,this.camera=n,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(e,n,i){const s=e.getContext(),a=e.state;a.buffers.color.setMask(!1),a.buffers.depth.setMask(!1),a.buffers.color.setLocked(!0),a.buffers.depth.setLocked(!0);let o,l;this.inverse?(o=0,l=1):(o=1,l=0),a.buffers.stencil.setTest(!0),a.buffers.stencil.setOp(s.REPLACE,s.REPLACE,s.REPLACE),a.buffers.stencil.setFunc(s.ALWAYS,o,4294967295),a.buffers.stencil.setClear(l),a.buffers.stencil.setLocked(!0),e.setRenderTarget(i),this.clear&&e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(n),this.clear&&e.clear(),e.render(this.scene,this.camera),a.buffers.color.setLocked(!1),a.buffers.depth.setLocked(!1),a.buffers.color.setMask(!0),a.buffers.depth.setMask(!0),a.buffers.stencil.setLocked(!1),a.buffers.stencil.setFunc(s.EQUAL,1,4294967295),a.buffers.stencil.setOp(s.KEEP,s.KEEP,s.KEEP),a.buffers.stencil.setLocked(!0)}}class WLe extends uA{constructor(){super(),this.needsSwap=!1}render(e){e.state.buffers.stencil.setLocked(!1),e.state.buffers.stencil.setTest(!1)}}class qLe{constructor(e,n){if(this.renderer=e,this._pixelRatio=e.getPixelRatio(),n===void 0){const i=e.getSize(new dt);this._width=i.width,this._height=i.height,n=new jd(this._width*this._pixelRatio,this._height*this._pixelRatio,{type:da}),n.texture.name="EffectComposer.rt1"}else this._width=n.width,this._height=n.height;this.renderTarget1=n,this.renderTarget2=n.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],this.copyPass=new HLe(ULe),this.copyPass.material.blending=eo,this.clock=new wee}swapBuffers(){const e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e}addPass(e){this.passes.push(e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(e,n){this.passes.splice(n,0,e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(e){const n=this.passes.indexOf(e);n!==-1&&this.passes.splice(n,1)}isLastEnabledPass(e){for(let n=e+1;n<this.passes.length;n++)if(this.passes[n].enabled)return!1;return!0}render(e){e===void 0&&(e=this.clock.getDelta());const n=this.renderer.getRenderTarget();let i=!1;for(let s=0,a=this.passes.length;s<a;s++){const o=this.passes[s];if(o.enabled!==!1){if(o.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(s),o.render(this.renderer,this.writeBuffer,this.readBuffer,e,i),o.needsSwap){if(i){const l=this.renderer.getContext(),c=this.renderer.state.buffers.stencil;c.setFunc(l.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),c.setFunc(l.EQUAL,1,4294967295)}this.swapBuffers()}BW!==void 0&&(o instanceof BW?i=!0:o instanceof WLe&&(i=!1))}}this.renderer.setRenderTarget(n)}reset(e){if(e===void 0){const n=this.renderer.getSize(new dt);this._pixelRatio=this.renderer.getPixelRatio(),this._width=n.width,this._height=n.height,e=this.renderTarget1.clone(),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(e,n){this._width=e,this._height=n;const i=this._width*this._pixelRatio,s=this._height*this._pixelRatio;this.renderTarget1.setSize(i,s),this.renderTarget2.setSize(i,s);for(let a=0;a<this.passes.length;a++)this.passes[a].setSize(i,s)}setPixelRatio(e){this._pixelRatio=e,this.setSize(this._width,this._height)}dispose(){this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.copyPass.dispose()}}class XLe extends uA{constructor(e,n,i=null,s=null,a=null){super(),this.scene=e,this.camera=n,this.overrideMaterial=i,this.clearColor=s,this.clearAlpha=a,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1,this._oldClearColor=new ln}render(e,n,i){const s=e.autoClear;e.autoClear=!1;let a,o;this.overrideMaterial!==null&&(o=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor!==null&&(e.getClearColor(this._oldClearColor),e.setClearColor(this.clearColor,e.getClearAlpha())),this.clearAlpha!==null&&(a=e.getClearAlpha(),e.setClearAlpha(this.clearAlpha)),this.clearDepth==!0&&e.clearDepth(),e.setRenderTarget(this.renderToScreen?null:i),this.clear===!0&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),e.render(this.scene,this.camera),this.clearColor!==null&&e.setClearColor(this._oldClearColor),this.clearAlpha!==null&&e.setClearAlpha(a),this.overrideMaterial!==null&&(this.scene.overrideMaterial=o),e.autoClear=s}}var ch=Object.freeze({Linear:Object.freeze({None:function(r){return r},In:function(r){return r},Out:function(r){return r},InOut:function(r){return r}}),Quadratic:Object.freeze({In:function(r){return r*r},Out:function(r){return r*(2-r)},InOut:function(r){return(r*=2)<1?.5*r*r:-.5*(--r*(r-2)-1)}}),Cubic:Object.freeze({In:function(r){return r*r*r},Out:function(r){return--r*r*r+1},InOut:function(r){return(r*=2)<1?.5*r*r*r:.5*((r-=2)*r*r+2)}}),Quartic:Object.freeze({In:function(r){return r*r*r*r},Out:function(r){return 1- --r*r*r*r},InOut:function(r){return(r*=2)<1?.5*r*r*r*r:-.5*((r-=2)*r*r*r-2)}}),Quintic:Object.freeze({In:function(r){return r*r*r*r*r},Out:function(r){return--r*r*r*r*r+1},InOut:function(r){return(r*=2)<1?.5*r*r*r*r*r:.5*((r-=2)*r*r*r*r+2)}}),Sinusoidal:Object.freeze({In:function(r){return 1-Math.sin((1-r)*Math.PI/2)},Out:function(r){return Math.sin(r*Math.PI/2)},InOut:function(r){return .5*(1-Math.sin(Math.PI*(.5-r)))}}),Exponential:Object.freeze({In:function(r){return r===0?0:Math.pow(1024,r-1)},Out:function(r){return r===1?1:1-Math.pow(2,-10*r)},InOut:function(r){return r===0?0:r===1?1:(r*=2)<1?.5*Math.pow(1024,r-1):.5*(-Math.pow(2,-10*(r-1))+2)}}),Circular:Object.freeze({In:function(r){return 1-Math.sqrt(1-r*r)},Out:function(r){return Math.sqrt(1- --r*r)},InOut:function(r){return(r*=2)<1?-.5*(Math.sqrt(1-r*r)-1):.5*(Math.sqrt(1-(r-=2)*r)+1)}}),Elastic:Object.freeze({In:function(r){return r===0?0:r===1?1:-Math.pow(2,10*(r-1))*Math.sin((r-1.1)*5*Math.PI)},Out:function(r){return r===0?0:r===1?1:Math.pow(2,-10*r)*Math.sin((r-.1)*5*Math.PI)+1},InOut:function(r){return r===0?0:r===1?1:(r*=2,r<1?-.5*Math.pow(2,10*(r-1))*Math.sin((r-1.1)*5*Math.PI):.5*Math.pow(2,-10*(r-1))*Math.sin((r-1.1)*5*Math.PI)+1)}}),Back:Object.freeze({In:function(r){var e=1.70158;return r===1?1:r*r*((e+1)*r-e)},Out:function(r){var e=1.70158;return r===0?0:--r*r*((e+1)*r+e)+1},InOut:function(r){var e=2.5949095;return(r*=2)<1?.5*(r*r*((e+1)*r-e)):.5*((r-=2)*r*((e+1)*r+e)+2)}}),Bounce:Object.freeze({In:function(r){return 1-ch.Bounce.Out(1-r)},Out:function(r){return r<1/2.75?7.5625*r*r:r<2/2.75?7.5625*(r-=1.5/2.75)*r+.75:r<2.5/2.75?7.5625*(r-=2.25/2.75)*r+.9375:7.5625*(r-=2.625/2.75)*r+.984375},InOut:function(r){return r<.5?ch.Bounce.In(r*2)*.5:ch.Bounce.Out(r*2-1)*.5+.5}}),generatePow:function(r){return r===void 0&&(r=4),r=r<Number.EPSILON?Number.EPSILON:r,r=r>1e4?1e4:r,{In:function(e){return Math.pow(e,r)},Out:function(e){return 1-Math.pow(1-e,r)},InOut:function(e){return e<.5?Math.pow(e*2,r)/2:(1-Math.pow(2-e*2,r))/2+.5}}}}),sx=function(){return performance.now()},KU=function(){function r(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this._tweens={},this._tweensAddedDuringUpdate={},this.add.apply(this,e)}return r.prototype.getAll=function(){var e=this;return Object.keys(this._tweens).map(function(n){return e._tweens[n]})},r.prototype.removeAll=function(){this._tweens={}},r.prototype.add=function(){for(var e,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];for(var s=0,a=n;s<a.length;s++){var o=a[s];(e=o._group)===null||e===void 0||e.remove(o),o._group=this,this._tweens[o.getId()]=o,this._tweensAddedDuringUpdate[o.getId()]=o}},r.prototype.remove=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];for(var i=0,s=e;i<s.length;i++){var a=s[i];a._group=void 0,delete this._tweens[a.getId()],delete this._tweensAddedDuringUpdate[a.getId()]}},r.prototype.allStopped=function(){return this.getAll().every(function(e){return!e.isPlaying()})},r.prototype.update=function(e,n){e===void 0&&(e=sx()),n===void 0&&(n=!0);var i=Object.keys(this._tweens);if(i.length!==0)for(;i.length>0;){this._tweensAddedDuringUpdate={};for(var s=0;s<i.length;s++){var a=this._tweens[i[s]],o=!n;a&&a.update(e,o)===!1&&!n&&this.remove(a)}i=Object.keys(this._tweensAddedDuringUpdate)}},r}(),Q3={Linear:function(r,e){var n=r.length-1,i=n*e,s=Math.floor(i),a=Q3.Utils.Linear;return e<0?a(r[0],r[1],i):e>1?a(r[n],r[n-1],n-i):a(r[s],r[s+1>n?n:s+1],i-s)},Utils:{Linear:function(r,e,n){return(e-r)*n+r}}},lie=function(){function r(){}return r.nextId=function(){return r._nextId++},r._nextId=0,r}(),J3=new KU,uE=function(){function r(e,n){this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._isDynamic=!1,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=ch.Linear.None,this._interpolationFunction=Q3.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._id=lie.nextId(),this._isChainStopped=!1,this._propertiesAreSetUp=!1,this._goToEnd=!1,this._object=e,typeof n=="object"?(this._group=n,n.add(this)):n===!0&&(this._group=J3,J3.add(this))}return r.prototype.getId=function(){return this._id},r.prototype.isPlaying=function(){return this._isPlaying},r.prototype.isPaused=function(){return this._isPaused},r.prototype.getDuration=function(){return this._duration},r.prototype.to=function(e,n){if(n===void 0&&(n=1e3),this._isPlaying)throw new Error("Can not call Tween.to() while Tween is already started or paused. Stop the Tween first.");return this._valuesEnd=e,this._propertiesAreSetUp=!1,this._duration=n<0?0:n,this},r.prototype.duration=function(e){return e===void 0&&(e=1e3),this._duration=e<0?0:e,this},r.prototype.dynamic=function(e){return e===void 0&&(e=!1),this._isDynamic=e,this},r.prototype.start=function(e,n){if(e===void 0&&(e=sx()),n===void 0&&(n=!1),this._isPlaying)return this;if(this._repeat=this._initialRepeat,this._reversed){this._reversed=!1;for(var i in this._valuesStartRepeat)this._swapEndStartRepeatValues(i),this._valuesStart[i]=this._valuesStartRepeat[i]}if(this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=e,this._startTime+=this._delayTime,!this._propertiesAreSetUp||n){if(this._propertiesAreSetUp=!0,!this._isDynamic){var s={};for(var a in this._valuesEnd)s[a]=this._valuesEnd[a];this._valuesEnd=s}this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat,n)}return this},r.prototype.startFromCurrentValues=function(e){return this.start(e,!0)},r.prototype._setupProperties=function(e,n,i,s,a){for(var o in i){var l=e[o],c=Array.isArray(l),u=c?"array":typeof l,h=!c&&Array.isArray(i[o]);if(!(u==="undefined"||u==="function")){if(h){var d=i[o];if(d.length===0)continue;for(var f=[l],p=0,g=d.length;p<g;p+=1){var v=this._handleRelativeValue(l,d[p]);if(isNaN(v)){h=!1,console.warn("Found invalid interpolation list. Skipping.");break}f.push(v)}h&&(i[o]=f)}if((u==="object"||c)&&l&&!h){n[o]=c?[]:{};var x=l;for(var _ in x)n[o][_]=x[_];s[o]=c?[]:{};var d=i[o];if(!this._isDynamic){var E={};for(var _ in d)E[_]=d[_];i[o]=d=E}this._setupProperties(x,n[o],d,s[o],a)}else(typeof n[o]>"u"||a)&&(n[o]=l),c||(n[o]*=1),h?s[o]=i[o].slice().reverse():s[o]=n[o]||0}}},r.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying?(this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object),this):this},r.prototype.end=function(){return this._goToEnd=!0,this.update(this._startTime+this._duration),this},r.prototype.pause=function(e){return e===void 0&&(e=sx()),this._isPaused||!this._isPlaying?this:(this._isPaused=!0,this._pauseStart=e,this)},r.prototype.resume=function(e){return e===void 0&&(e=sx()),!this._isPaused||!this._isPlaying?this:(this._isPaused=!1,this._startTime+=e-this._pauseStart,this._pauseStart=0,this)},r.prototype.stopChainedTweens=function(){for(var e=0,n=this._chainedTweens.length;e<n;e++)this._chainedTweens[e].stop();return this},r.prototype.group=function(e){return e?(e.add(this),this):(console.warn("tween.group() without args has been removed, use group.add(tween) instead."),this)},r.prototype.remove=function(){var e;return(e=this._group)===null||e===void 0||e.remove(this),this},r.prototype.delay=function(e){return e===void 0&&(e=0),this._delayTime=e,this},r.prototype.repeat=function(e){return e===void 0&&(e=0),this._initialRepeat=e,this._repeat=e,this},r.prototype.repeatDelay=function(e){return this._repeatDelayTime=e,this},r.prototype.yoyo=function(e){return e===void 0&&(e=!1),this._yoyo=e,this},r.prototype.easing=function(e){return e===void 0&&(e=ch.Linear.None),this._easingFunction=e,this},r.prototype.interpolation=function(e){return e===void 0&&(e=Q3.Linear),this._interpolationFunction=e,this},r.prototype.chain=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return this._chainedTweens=e,this},r.prototype.onStart=function(e){return this._onStartCallback=e,this},r.prototype.onEveryStart=function(e){return this._onEveryStartCallback=e,this},r.prototype.onUpdate=function(e){return this._onUpdateCallback=e,this},r.prototype.onRepeat=function(e){return this._onRepeatCallback=e,this},r.prototype.onComplete=function(e){return this._onCompleteCallback=e,this},r.prototype.onStop=function(e){return this._onStopCallback=e,this},r.prototype.update=function(e,n){var i=this,s;if(e===void 0&&(e=sx()),n===void 0&&(n=r.autoStartOnUpdate),this._isPaused)return!0;var a;if(!this._goToEnd&&!this._isPlaying)if(n)this.start(e,!0);else return!1;if(this._goToEnd=!1,e<this._startTime)return!0;this._onStartCallbackFired===!1&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),this._onEveryStartCallbackFired===!1&&(this._onEveryStartCallback&&this._onEveryStartCallback(this._object),this._onEveryStartCallbackFired=!0);var o=e-this._startTime,l=this._duration+((s=this._repeatDelayTime)!==null&&s!==void 0?s:this._delayTime),c=this._duration+this._repeat*l,u=function(){if(i._duration===0||o>c)return 1;var v=Math.trunc(o/l),x=o-v*l,_=Math.min(x/i._duration,1);return _===0&&o===i._duration?1:_},h=u(),d=this._easingFunction(h);if(this._updateProperties(this._object,this._valuesStart,this._valuesEnd,d),this._onUpdateCallback&&this._onUpdateCallback(this._object,h),this._duration===0||o>=this._duration)if(this._repeat>0){var f=Math.min(Math.trunc((o-this._duration)/l)+1,this._repeat);isFinite(this._repeat)&&(this._repeat-=f);for(a in this._valuesStartRepeat)!this._yoyo&&typeof this._valuesEnd[a]=="string"&&(this._valuesStartRepeat[a]=this._valuesStartRepeat[a]+parseFloat(this._valuesEnd[a])),this._yoyo&&this._swapEndStartRepeatValues(a),this._valuesStart[a]=this._valuesStartRepeat[a];return this._yoyo&&(this._reversed=!this._reversed),this._startTime+=l*f,this._onRepeatCallback&&this._onRepeatCallback(this._object),this._onEveryStartCallbackFired=!1,!0}else{this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var p=0,g=this._chainedTweens.length;p<g;p++)this._chainedTweens[p].start(this._startTime+this._duration,!1);return this._isPlaying=!1,!1}return!0},r.prototype._updateProperties=function(e,n,i,s){for(var a in i)if(n[a]!==void 0){var o=n[a]||0,l=i[a],c=Array.isArray(e[a]),u=Array.isArray(l),h=!c&&u;h?e[a]=this._interpolationFunction(l,s):typeof l=="object"&&l?this._updateProperties(e[a],o,l,s):(l=this._handleRelativeValue(o,l),typeof l=="number"&&(e[a]=o+(l-o)*s))}},r.prototype._handleRelativeValue=function(e,n){return typeof n!="string"?n:n.charAt(0)==="+"||n.charAt(0)==="-"?e+parseFloat(n):parseFloat(n)},r.prototype._swapEndStartRepeatValues=function(e){var n=this._valuesStartRepeat[e],i=this._valuesEnd[e];typeof i=="string"?this._valuesStartRepeat[e]=this._valuesStartRepeat[e]+parseFloat(i):this._valuesStartRepeat[e]=this._valuesEnd[e],this._valuesEnd[e]=n},r.autoStartOnUpdate=!1,r}();lie.nextId;var Zc=J3;Zc.getAll.bind(Zc);Zc.removeAll.bind(Zc);Zc.add.bind(Zc);Zc.remove.bind(Zc);Zc.update.bind(Zc);var eF="http://www.w3.org/1999/xhtml";const jW={svg:"http://www.w3.org/2000/svg",xhtml:eF,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function hA(r){var e=r+="",n=e.indexOf(":");return n>=0&&(e=r.slice(0,n))!=="xmlns"&&(r=r.slice(n+1)),jW.hasOwnProperty(e)?{space:jW[e],local:r}:r}function KLe(r){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===eF&&e.documentElement.namespaceURI===eF?e.createElement(r):e.createElementNS(n,r)}}function YLe(r){return function(){return this.ownerDocument.createElementNS(r.space,r.local)}}function cie(r){var e=hA(r);return(e.local?YLe:KLe)(e)}function ZLe(){}function YU(r){return r==null?ZLe:function(){return this.querySelector(r)}}function QLe(r){typeof r!="function"&&(r=YU(r));for(var e=this._groups,n=e.length,i=new Array(n),s=0;s<n;++s)for(var a=e[s],o=a.length,l=i[s]=new Array(o),c,u,h=0;h<o;++h)(c=a[h])&&(u=r.call(c,c.__data__,h,a))&&("__data__"in c&&(u.__data__=c.__data__),l[h]=u);return new Lo(i,this._parents)}function JLe(r){return r==null?[]:Array.isArray(r)?r:Array.from(r)}function e3e(){return[]}function uie(r){return r==null?e3e:function(){return this.querySelectorAll(r)}}function t3e(r){return function(){return JLe(r.apply(this,arguments))}}function n3e(r){typeof r=="function"?r=t3e(r):r=uie(r);for(var e=this._groups,n=e.length,i=[],s=[],a=0;a<n;++a)for(var o=e[a],l=o.length,c,u=0;u<l;++u)(c=o[u])&&(i.push(r.call(c,c.__data__,u,o)),s.push(c));return new Lo(i,s)}function hie(r){return function(){return this.matches(r)}}function die(r){return function(e){return e.matches(r)}}var r3e=Array.prototype.find;function i3e(r){return function(){return r3e.call(this.children,r)}}function s3e(){return this.firstElementChild}function a3e(r){return this.select(r==null?s3e:i3e(typeof r=="function"?r:die(r)))}var o3e=Array.prototype.filter;function l3e(){return Array.from(this.children)}function c3e(r){return function(){return o3e.call(this.children,r)}}function u3e(r){return this.selectAll(r==null?l3e:c3e(typeof r=="function"?r:die(r)))}function h3e(r){typeof r!="function"&&(r=hie(r));for(var e=this._groups,n=e.length,i=new Array(n),s=0;s<n;++s)for(var a=e[s],o=a.length,l=i[s]=[],c,u=0;u<o;++u)(c=a[u])&&r.call(c,c.__data__,u,a)&&l.push(c);return new Lo(i,this._parents)}function fie(r){return new Array(r.length)}function d3e(){return new Lo(this._enter||this._groups.map(fie),this._parents)}function hE(r,e){this.ownerDocument=r.ownerDocument,this.namespaceURI=r.namespaceURI,this._next=null,this._parent=r,this.__data__=e}hE.prototype={constructor:hE,appendChild:function(r){return this._parent.insertBefore(r,this._next)},insertBefore:function(r,e){return this._parent.insertBefore(r,e)},querySelector:function(r){return this._parent.querySelector(r)},querySelectorAll:function(r){return this._parent.querySelectorAll(r)}};function f3e(r){return function(){return r}}function p3e(r,e,n,i,s,a){for(var o=0,l,c=e.length,u=a.length;o<u;++o)(l=e[o])?(l.__data__=a[o],i[o]=l):n[o]=new hE(r,a[o]);for(;o<c;++o)(l=e[o])&&(s[o]=l)}function m3e(r,e,n,i,s,a,o){var l,c,u=new Map,h=e.length,d=a.length,f=new Array(h),p;for(l=0;l<h;++l)(c=e[l])&&(f[l]=p=o.call(c,c.__data__,l,e)+"",u.has(p)?s[l]=c:u.set(p,c));for(l=0;l<d;++l)p=o.call(r,a[l],l,a)+"",(c=u.get(p))?(i[l]=c,c.__data__=a[l],u.delete(p)):n[l]=new hE(r,a[l]);for(l=0;l<h;++l)(c=e[l])&&u.get(f[l])===c&&(s[l]=c)}function g3e(r){return r.__data__}function y3e(r,e){if(!arguments.length)return Array.from(this,g3e);var n=e?m3e:p3e,i=this._parents,s=this._groups;typeof r!="function"&&(r=f3e(r));for(var a=s.length,o=new Array(a),l=new Array(a),c=new Array(a),u=0;u<a;++u){var h=i[u],d=s[u],f=d.length,p=v3e(r.call(h,h&&h.__data__,u,i)),g=p.length,v=l[u]=new Array(g),x=o[u]=new Array(g),_=c[u]=new Array(f);n(h,d,v,x,_,p,e);for(var E=0,S=0,T,M;E<g;++E)if(T=v[E]){for(E>=S&&(S=E+1);!(M=x[S])&&++S<g;);T._next=M||null}}return o=new Lo(o,i),o._enter=l,o._exit=c,o}function v3e(r){return typeof r=="object"&&"length"in r?r:Array.from(r)}function x3e(){return new Lo(this._exit||this._groups.map(fie),this._parents)}function b3e(r,e,n){var i=this.enter(),s=this,a=this.exit();return typeof r=="function"?(i=r(i),i&&(i=i.selection())):i=i.append(r+""),e!=null&&(s=e(s),s&&(s=s.selection())),n==null?a.remove():n(a),i&&s?i.merge(s).order():s}function _3e(r){for(var e=r.selection?r.selection():r,n=this._groups,i=e._groups,s=n.length,a=i.length,o=Math.min(s,a),l=new Array(s),c=0;c<o;++c)for(var u=n[c],h=i[c],d=u.length,f=l[c]=new Array(d),p,g=0;g<d;++g)(p=u[g]||h[g])&&(f[g]=p);for(;c<s;++c)l[c]=n[c];return new Lo(l,this._parents)}function w3e(){for(var r=this._groups,e=-1,n=r.length;++e<n;)for(var i=r[e],s=i.length-1,a=i[s],o;--s>=0;)(o=i[s])&&(a&&o.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(o,a),a=o);return this}function S3e(r){r||(r=T3e);function e(d,f){return d&&f?r(d.__data__,f.__data__):!d-!f}for(var n=this._groups,i=n.length,s=new Array(i),a=0;a<i;++a){for(var o=n[a],l=o.length,c=s[a]=new Array(l),u,h=0;h<l;++h)(u=o[h])&&(c[h]=u);c.sort(e)}return new Lo(s,this._parents).order()}function T3e(r,e){return r<e?-1:r>e?1:r>=e?0:NaN}function E3e(){var r=arguments[0];return arguments[0]=this,r.apply(null,arguments),this}function M3e(){return Array.from(this)}function A3e(){for(var r=this._groups,e=0,n=r.length;e<n;++e)for(var i=r[e],s=0,a=i.length;s<a;++s){var o=i[s];if(o)return o}return null}function C3e(){let r=0;for(const e of this)++r;return r}function N3e(){return!this.node()}function P3e(r){for(var e=this._groups,n=0,i=e.length;n<i;++n)for(var s=e[n],a=0,o=s.length,l;a<o;++a)(l=s[a])&&r.call(l,l.__data__,a,s);return this}function R3e(r){return function(){this.removeAttribute(r)}}function O3e(r){return function(){this.removeAttributeNS(r.space,r.local)}}function k3e(r,e){return function(){this.setAttribute(r,e)}}function I3e(r,e){return function(){this.setAttributeNS(r.space,r.local,e)}}function D3e(r,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(r):this.setAttribute(r,n)}}function L3e(r,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(r.space,r.local):this.setAttributeNS(r.space,r.local,n)}}function F3e(r,e){var n=hA(r);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((e==null?n.local?O3e:R3e:typeof e=="function"?n.local?L3e:D3e:n.local?I3e:k3e)(n,e))}function pie(r){return r.ownerDocument&&r.ownerDocument.defaultView||r.document&&r||r.defaultView}function B3e(r){return function(){this.style.removeProperty(r)}}function j3e(r,e,n){return function(){this.style.setProperty(r,e,n)}}function U3e(r,e,n){return function(){var i=e.apply(this,arguments);i==null?this.style.removeProperty(r):this.style.setProperty(r,i,n)}}function z3e(r,e,n){return arguments.length>1?this.each((e==null?B3e:typeof e=="function"?U3e:j3e)(r,e,n??"")):My(this.node(),r)}function My(r,e){return r.style.getPropertyValue(e)||pie(r).getComputedStyle(r,null).getPropertyValue(e)}function $3e(r){return function(){delete this[r]}}function G3e(r,e){return function(){this[r]=e}}function V3e(r,e){return function(){var n=e.apply(this,arguments);n==null?delete this[r]:this[r]=n}}function H3e(r,e){return arguments.length>1?this.each((e==null?$3e:typeof e=="function"?V3e:G3e)(r,e)):this.node()[r]}function mie(r){return r.trim().split(/^|\s+/)}function ZU(r){return r.classList||new gie(r)}function gie(r){this._node=r,this._names=mie(r.getAttribute("class")||"")}gie.prototype={add:function(r){var e=this._names.indexOf(r);e<0&&(this._names.push(r),this._node.setAttribute("class",this._names.join(" ")))},remove:function(r){var e=this._names.indexOf(r);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(r){return this._names.indexOf(r)>=0}};function yie(r,e){for(var n=ZU(r),i=-1,s=e.length;++i<s;)n.add(e[i])}function vie(r,e){for(var n=ZU(r),i=-1,s=e.length;++i<s;)n.remove(e[i])}function W3e(r){return function(){yie(this,r)}}function q3e(r){return function(){vie(this,r)}}function X3e(r,e){return function(){(e.apply(this,arguments)?yie:vie)(this,r)}}function K3e(r,e){var n=mie(r+"");if(arguments.length<2){for(var i=ZU(this.node()),s=-1,a=n.length;++s<a;)if(!i.contains(n[s]))return!1;return!0}return this.each((typeof e=="function"?X3e:e?W3e:q3e)(n,e))}function Y3e(){this.textContent=""}function Z3e(r){return function(){this.textContent=r}}function Q3e(r){return function(){var e=r.apply(this,arguments);this.textContent=e??""}}function J3e(r){return arguments.length?this.each(r==null?Y3e:(typeof r=="function"?Q3e:Z3e)(r)):this.node().textContent}function eFe(){this.innerHTML=""}function tFe(r){return function(){this.innerHTML=r}}function nFe(r){return function(){var e=r.apply(this,arguments);this.innerHTML=e??""}}function rFe(r){return arguments.length?this.each(r==null?eFe:(typeof r=="function"?nFe:tFe)(r)):this.node().innerHTML}function iFe(){this.nextSibling&&this.parentNode.appendChild(this)}function sFe(){return this.each(iFe)}function aFe(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function oFe(){return this.each(aFe)}function lFe(r){var e=typeof r=="function"?r:cie(r);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function cFe(){return null}function uFe(r,e){var n=typeof r=="function"?r:cie(r),i=e==null?cFe:typeof e=="function"?e:YU(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})}function hFe(){var r=this.parentNode;r&&r.removeChild(this)}function dFe(){return this.each(hFe)}function fFe(){var r=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(r,this.nextSibling):r}function pFe(){var r=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(r,this.nextSibling):r}function mFe(r){return this.select(r?pFe:fFe)}function gFe(r){return arguments.length?this.property("__data__",r):this.node().__data__}function yFe(r){return function(e){r.call(this,e,this.__data__)}}function vFe(r){return r.trim().split(/^|\s+/).map(function(e){var n="",i=e.indexOf(".");return i>=0&&(n=e.slice(i+1),e=e.slice(0,i)),{type:e,name:n}})}function xFe(r){return function(){var e=this.__on;if(e){for(var n=0,i=-1,s=e.length,a;n<s;++n)a=e[n],(!r.type||a.type===r.type)&&a.name===r.name?this.removeEventListener(a.type,a.listener,a.options):e[++i]=a;++i?e.length=i:delete this.__on}}}function bFe(r,e,n){return function(){var i=this.__on,s,a=yFe(e);if(i){for(var o=0,l=i.length;o<l;++o)if((s=i[o]).type===r.type&&s.name===r.name){this.removeEventListener(s.type,s.listener,s.options),this.addEventListener(s.type,s.listener=a,s.options=n),s.value=e;return}}this.addEventListener(r.type,a,n),s={type:r.type,name:r.name,value:e,listener:a,options:n},i?i.push(s):this.__on=[s]}}function _Fe(r,e,n){var i=vFe(r+""),s,a=i.length,o;if(arguments.length<2){var l=this.node().__on;if(l){for(var c=0,u=l.length,h;c<u;++c)for(s=0,h=l[c];s<a;++s)if((o=i[s]).type===h.type&&o.name===h.name)return h.value}return}for(l=e?bFe:xFe,s=0;s<a;++s)this.each(l(i[s],e,n));return this}function xie(r,e,n){var i=pie(r),s=i.CustomEvent;typeof s=="function"?s=new s(e,n):(s=i.document.createEvent("Event"),n?(s.initEvent(e,n.bubbles,n.cancelable),s.detail=n.detail):s.initEvent(e,!1,!1)),r.dispatchEvent(s)}function wFe(r,e){return function(){return xie(this,r,e)}}function SFe(r,e){return function(){return xie(this,r,e.apply(this,arguments))}}function TFe(r,e){return this.each((typeof e=="function"?SFe:wFe)(r,e))}function*EFe(){for(var r=this._groups,e=0,n=r.length;e<n;++e)for(var i=r[e],s=0,a=i.length,o;s<a;++s)(o=i[s])&&(yield o)}var bie=[null];function Lo(r,e){this._groups=r,this._parents=e}function U_(){return new Lo([[document.documentElement]],bie)}function MFe(){return this}Lo.prototype=U_.prototype={constructor:Lo,select:QLe,selectAll:n3e,selectChild:a3e,selectChildren:u3e,filter:h3e,data:y3e,enter:d3e,exit:x3e,join:b3e,merge:_3e,selection:MFe,order:w3e,sort:S3e,call:E3e,nodes:M3e,node:A3e,size:C3e,empty:N3e,each:P3e,attr:F3e,style:z3e,property:H3e,classed:K3e,text:J3e,html:rFe,raise:sFe,lower:oFe,append:lFe,insert:uFe,remove:dFe,clone:mFe,datum:gFe,on:_Fe,dispatch:TFe,[Symbol.iterator]:EFe};function al(r){return typeof r=="string"?new Lo([[document.querySelector(r)]],[document.documentElement]):new Lo([[r]],bie)}function AFe(r){let e;for(;e=r.sourceEvent;)r=e;return r}function Ec(r,e){if(r=AFe(r),e===void 0&&(e=r.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=r.clientX,i.y=r.clientY,i=i.matrixTransform(e.getScreenCTM().inverse()),[i.x,i.y]}if(e.getBoundingClientRect){var s=e.getBoundingClientRect();return[r.clientX-s.left-e.clientLeft,r.clientY-s.top-e.clientTop]}}return[r.pageX,r.pageY]}var z_,mi,_ie,wie,np,UW,Sie,Tie,Eie,QU,tF,nF,Ob={},Mie=[],CFe=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,dA=Array.isArray;function Rc(r,e){for(var n in e)r[n]=e[n];return r}function JU(r){r&&r.parentNode&&r.parentNode.removeChild(r)}function NFe(r,e,n){var i,s,a,o={};for(a in e)a=="key"?i=e[a]:a=="ref"?s=e[a]:o[a]=e[a];if(arguments.length>2&&(o.children=arguments.length>3?z_.call(arguments,2):n),typeof r=="function"&&r.defaultProps!=null)for(a in r.defaultProps)o[a]==null&&(o[a]=r.defaultProps[a]);return Mx(r,o,i,s,null)}function Mx(r,e,n,i,s){var a={type:r,props:e,key:n,ref:i,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:s??++_ie,__i:-1,__u:0};return s==null&&mi.vnode!=null&&mi.vnode(a),a}function fA(r){return r.children}function xT(r,e){this.props=r,this.context=e}function Ay(r,e){if(e==null)return r.__?Ay(r.__,r.__i+1):null;for(var n;e<r.__k.length;e++)if((n=r.__k[e])!=null&&n.__e!=null)return n.__e;return typeof r.type=="function"?Ay(r):null}function Aie(r){var e,n;if((r=r.__)!=null&&r.__c!=null){for(r.__e=r.__c.base=null,e=0;e<r.__k.length;e++)if((n=r.__k[e])!=null&&n.__e!=null){r.__e=r.__c.base=n.__e;break}return Aie(r)}}function zW(r){(!r.__d&&(r.__d=!0)&&np.push(r)&&!dE.__r++||UW!=mi.debounceRendering)&&((UW=mi.debounceRendering)||Sie)(dE)}function dE(){for(var r,e,n,i,s,a,o,l=1;np.length;)np.length>l&&np.sort(Tie),r=np.shift(),l=np.length,r.__d&&(n=void 0,s=(i=(e=r).__v).__e,a=[],o=[],e.__P&&((n=Rc({},i)).__v=i.__v+1,mi.vnode&&mi.vnode(n),ez(e.__P,n,i,e.__n,e.__P.namespaceURI,32&i.__u?[s]:null,a,s??Ay(i),!!(32&i.__u),o),n.__v=i.__v,n.__.__k[n.__i]=n,Pie(a,n,o),n.__e!=s&&Aie(n)));dE.__r=0}function Cie(r,e,n,i,s,a,o,l,c,u,h){var d,f,p,g,v,x,_=i&&i.__k||Mie,E=e.length;for(c=PFe(n,e,_,c,E),d=0;d<E;d++)(p=n.__k[d])!=null&&(f=p.__i==-1?Ob:_[p.__i]||Ob,p.__i=d,x=ez(r,p,f,s,a,o,l,c,u,h),g=p.__e,p.ref&&f.ref!=p.ref&&(f.ref&&tz(f.ref,null,p),h.push(p.ref,p.__c||g,p)),v==null&&g!=null&&(v=g),4&p.__u||f.__k===p.__k?c=Nie(p,c,r):typeof p.type=="function"&&x!==void 0?c=x:g&&(c=g.nextSibling),p.__u&=-7);return n.__e=v,c}function PFe(r,e,n,i,s){var a,o,l,c,u,h=n.length,d=h,f=0;for(r.__k=new Array(s),a=0;a<s;a++)(o=e[a])!=null&&typeof o!="boolean"&&typeof o!="function"?(c=a+f,(o=r.__k[a]=typeof o=="string"||typeof o=="number"||typeof o=="bigint"||o.constructor==String?Mx(null,o,null,null,null):dA(o)?Mx(fA,{children:o},null,null,null):o.constructor==null&&o.__b>0?Mx(o.type,o.props,o.key,o.ref?o.ref:null,o.__v):o).__=r,o.__b=r.__b+1,l=null,(u=o.__i=RFe(o,n,c,d))!=-1&&(d--,(l=n[u])&&(l.__u|=2)),l==null||l.__v==null?(u==-1&&(s>h?f--:s<h&&f++),typeof o.type!="function"&&(o.__u|=4)):u!=c&&(u==c-1?f--:u==c+1?f++:(u>c?f--:f++,o.__u|=4))):r.__k[a]=null;if(d)for(a=0;a<h;a++)(l=n[a])!=null&&(2&l.__u)==0&&(l.__e==i&&(i=Ay(l)),Oie(l,l));return i}function Nie(r,e,n){var i,s;if(typeof r.type=="function"){for(i=r.__k,s=0;i&&s<i.length;s++)i[s]&&(i[s].__=r,e=Nie(i[s],e,n));return e}r.__e!=e&&(e&&r.type&&!n.contains(e)&&(e=Ay(r)),n.insertBefore(r.__e,e||null),e=r.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType==8);return e}function RFe(r,e,n,i){var s,a,o=r.key,l=r.type,c=e[n];if(c===null&&r.key==null||c&&o==c.key&&l==c.type&&(2&c.__u)==0)return n;if(i>(c!=null&&(2&c.__u)==0?1:0))for(s=n-1,a=n+1;s>=0||a<e.length;){if(s>=0){if((c=e[s])&&(2&c.__u)==0&&o==c.key&&l==c.type)return s;s--}if(a<e.length){if((c=e[a])&&(2&c.__u)==0&&o==c.key&&l==c.type)return a;a++}}return-1}function $W(r,e,n){e[0]=="-"?r.setProperty(e,n??""):r[e]=n==null?"":typeof n!="number"||CFe.test(e)?n:n+"px"}function DS(r,e,n,i,s){var a;e:if(e=="style")if(typeof n=="string")r.style.cssText=n;else{if(typeof i=="string"&&(r.style.cssText=i=""),i)for(e in i)n&&e in n||$W(r.style,e,"");if(n)for(e in n)i&&n[e]==i[e]||$W(r.style,e,n[e])}else if(e[0]=="o"&&e[1]=="n")a=e!=(e=e.replace(Eie,"$1")),e=e.toLowerCase()in r||e=="onFocusOut"||e=="onFocusIn"?e.toLowerCase().slice(2):e.slice(2),r.l||(r.l={}),r.l[e+a]=n,n?i?n.u=i.u:(n.u=QU,r.addEventListener(e,a?nF:tF,a)):r.removeEventListener(e,a?nF:tF,a);else{if(s=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in r)try{r[e]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&e[4]!="-"?r.removeAttribute(e):r.setAttribute(e,e=="popover"&&n==1?"":n))}}function GW(r){return function(e){if(this.l){var n=this.l[e.type+r];if(e.t==null)e.t=QU++;else if(e.t<n.u)return;return n(mi.event?mi.event(e):e)}}}function ez(r,e,n,i,s,a,o,l,c,u){var h,d,f,p,g,v,x,_,E,S,T,M,C,A,P,R,O,D=e.type;if(e.constructor!=null)return null;128&n.__u&&(c=!!(32&n.__u),a=[l=e.__e=n.__e]),(h=mi.__b)&&h(e);e:if(typeof D=="function")try{if(_=e.props,E="prototype"in D&&D.prototype.render,S=(h=D.contextType)&&i[h.__c],T=h?S?S.props.value:h.__:i,n.__c?x=(d=e.__c=n.__c).__=d.__E:(E?e.__c=d=new D(_,T):(e.__c=d=new xT(_,T),d.constructor=D,d.render=kFe),S&&S.sub(d),d.props=_,d.state||(d.state={}),d.context=T,d.__n=i,f=d.__d=!0,d.__h=[],d._sb=[]),E&&d.__s==null&&(d.__s=d.state),E&&D.getDerivedStateFromProps!=null&&(d.__s==d.state&&(d.__s=Rc({},d.__s)),Rc(d.__s,D.getDerivedStateFromProps(_,d.__s))),p=d.props,g=d.state,d.__v=e,f)E&&D.getDerivedStateFromProps==null&&d.componentWillMount!=null&&d.componentWillMount(),E&&d.componentDidMount!=null&&d.__h.push(d.componentDidMount);else{if(E&&D.getDerivedStateFromProps==null&&_!==p&&d.componentWillReceiveProps!=null&&d.componentWillReceiveProps(_,T),!d.__e&&d.shouldComponentUpdate!=null&&d.shouldComponentUpdate(_,d.__s,T)===!1||e.__v==n.__v){for(e.__v!=n.__v&&(d.props=_,d.state=d.__s,d.__d=!1),e.__e=n.__e,e.__k=n.__k,e.__k.some(function(F){F&&(F.__=e)}),M=0;M<d._sb.length;M++)d.__h.push(d._sb[M]);d._sb=[],d.__h.length&&o.push(d);break e}d.componentWillUpdate!=null&&d.componentWillUpdate(_,d.__s,T),E&&d.componentDidUpdate!=null&&d.__h.push(function(){d.componentDidUpdate(p,g,v)})}if(d.context=T,d.props=_,d.__P=r,d.__e=!1,C=mi.__r,A=0,E){for(d.state=d.__s,d.__d=!1,C&&C(e),h=d.render(d.props,d.state,d.context),P=0;P<d._sb.length;P++)d.__h.push(d._sb[P]);d._sb=[]}else do d.__d=!1,C&&C(e),h=d.render(d.props,d.state,d.context),d.state=d.__s;while(d.__d&&++A<25);d.state=d.__s,d.getChildContext!=null&&(i=Rc(Rc({},i),d.getChildContext())),E&&!f&&d.getSnapshotBeforeUpdate!=null&&(v=d.getSnapshotBeforeUpdate(p,g)),R=h,h!=null&&h.type===fA&&h.key==null&&(R=Rie(h.props.children)),l=Cie(r,dA(R)?R:[R],e,n,i,s,a,o,l,c,u),d.base=e.__e,e.__u&=-161,d.__h.length&&o.push(d),x&&(d.__E=d.__=null)}catch(F){if(e.__v=null,c||a!=null)if(F.then){for(e.__u|=c?160:128;l&&l.nodeType==8&&l.nextSibling;)l=l.nextSibling;a[a.indexOf(l)]=null,e.__e=l}else for(O=a.length;O--;)JU(a[O]);else e.__e=n.__e,e.__k=n.__k;mi.__e(F,e,n)}else a==null&&e.__v==n.__v?(e.__k=n.__k,e.__e=n.__e):l=e.__e=OFe(n.__e,e,n,i,s,a,o,c,u);return(h=mi.diffed)&&h(e),128&e.__u?void 0:l}function Pie(r,e,n){for(var i=0;i<n.length;i++)tz(n[i],n[++i],n[++i]);mi.__c&&mi.__c(e,r),r.some(function(s){try{r=s.__h,s.__h=[],r.some(function(a){a.call(s)})}catch(a){mi.__e(a,s.__v)}})}function Rie(r){return typeof r!="object"||r==null||r.__b&&r.__b>0?r:dA(r)?r.map(Rie):Rc({},r)}function OFe(r,e,n,i,s,a,o,l,c){var u,h,d,f,p,g,v,x=n.props,_=e.props,E=e.type;if(E=="svg"?s="http://www.w3.org/2000/svg":E=="math"?s="http://www.w3.org/1998/Math/MathML":s||(s="http://www.w3.org/1999/xhtml"),a!=null){for(u=0;u<a.length;u++)if((p=a[u])&&"setAttribute"in p==!!E&&(E?p.localName==E:p.nodeType==3)){r=p,a[u]=null;break}}if(r==null){if(E==null)return document.createTextNode(_);r=document.createElementNS(s,E,_.is&&_),l&&(mi.__m&&mi.__m(e,a),l=!1),a=null}if(E==null)x===_||l&&r.data==_||(r.data=_);else{if(a=a&&z_.call(r.childNodes),x=n.props||Ob,!l&&a!=null)for(x={},u=0;u<r.attributes.length;u++)x[(p=r.attributes[u]).name]=p.value;for(u in x)if(p=x[u],u!="children"){if(u=="dangerouslySetInnerHTML")d=p;else if(!(u in _)){if(u=="value"&&"defaultValue"in _||u=="checked"&&"defaultChecked"in _)continue;DS(r,u,null,p,s)}}for(u in _)p=_[u],u=="children"?f=p:u=="dangerouslySetInnerHTML"?h=p:u=="value"?g=p:u=="checked"?v=p:l&&typeof p!="function"||x[u]===p||DS(r,u,p,x[u],s);if(h)l||d&&(h.__html==d.__html||h.__html==r.innerHTML)||(r.innerHTML=h.__html),e.__k=[];else if(d&&(r.innerHTML=""),Cie(e.type=="template"?r.content:r,dA(f)?f:[f],e,n,i,E=="foreignObject"?"http://www.w3.org/1999/xhtml":s,a,o,a?a[0]:n.__k&&Ay(n,0),l,c),a!=null)for(u=a.length;u--;)JU(a[u]);l||(u="value",E=="progress"&&g==null?r.removeAttribute("value"):g!=null&&(g!==r[u]||E=="progress"&&!g||E=="option"&&g!=x[u])&&DS(r,u,g,x[u],s),u="checked",v!=null&&v!=r[u]&&DS(r,u,v,x[u],s))}return r}function tz(r,e,n){try{if(typeof r=="function"){var i=typeof r.__u=="function";i&&r.__u(),i&&e==null||(r.__u=r(e))}else r.current=e}catch(s){mi.__e(s,n)}}function Oie(r,e,n){var i,s;if(mi.unmount&&mi.unmount(r),(i=r.ref)&&(i.current&&i.current!=r.__e||tz(i,null,e)),(i=r.__c)!=null){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(a){mi.__e(a,e)}i.base=i.__P=null}if(i=r.__k)for(s=0;s<i.length;s++)i[s]&&Oie(i[s],e,n||typeof r.type!="function");n||JU(r.__e),r.__c=r.__=r.__e=void 0}function kFe(r,e,n){return this.constructor(r,n)}function IFe(r,e,n){var i,s,a,o;e==document&&(e=document.documentElement),mi.__&&mi.__(r,e),s=(i=!1)?null:e.__k,a=[],o=[],ez(e,r=e.__k=NFe(fA,null,[r]),s||Ob,Ob,e.namespaceURI,s?null:e.firstChild?z_.call(e.childNodes):null,a,s?s.__e:e.firstChild,i,o),Pie(a,r,o)}function kie(r,e,n){var i,s,a,o,l=Rc({},r.props);for(a in r.type&&r.type.defaultProps&&(o=r.type.defaultProps),e)a=="key"?i=e[a]:a=="ref"?s=e[a]:l[a]=e[a]==null&&o!=null?o[a]:e[a];return arguments.length>2&&(l.children=arguments.length>3?z_.call(arguments,2):n),Mx(r.type,l,i||r.key,s||r.ref,null)}z_=Mie.slice,mi={__e:function(r,e,n,i){for(var s,a,o;e=e.__;)if((s=e.__c)&&!s.__)try{if((a=s.constructor)&&a.getDerivedStateFromError!=null&&(s.setState(a.getDerivedStateFromError(r)),o=s.__d),s.componentDidCatch!=null&&(s.componentDidCatch(r,i||{}),o=s.__d),o)return s.__E=s}catch(l){r=l}throw r}},_ie=0,wie=function(r){return r!=null&&r.constructor==null},xT.prototype.setState=function(r,e){var n;n=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=Rc({},this.state),typeof r=="function"&&(r=r(Rc({},n),this.props)),r&&Rc(n,r),r!=null&&this.__v&&(e&&this._sb.push(e),zW(this))},xT.prototype.forceUpdate=function(r){this.__v&&(this.__e=!0,r&&this.__h.push(r),zW(this))},xT.prototype.render=fA,np=[],Sie=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Tie=function(r,e){return r.__v.__b-e.__v.__b},dE.__r=0,Eie=/(PointerCapture)$|Capture$/i,QU=0,tF=GW(!1),nF=GW(!0);function VW(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,i=Array(e);n<e;n++)i[n]=r[n];return i}function DFe(r){if(Array.isArray(r))return r}function LFe(r,e,n){return(e=$Fe(e))in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function FFe(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var i,s,a,o,l=[],c=!0,u=!1;try{if(a=(n=n.call(r)).next,e!==0)for(;!(c=(i=a.call(n)).done)&&(l.push(i.value),l.length!==e);c=!0);}catch(h){u=!0,s=h}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function BFe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function HW(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable})),n.push.apply(n,i)}return n}function jFe(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?HW(Object(n),!0).forEach(function(i){LFe(r,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):HW(Object(n)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(n,i))})}return r}function UFe(r,e){return DFe(r)||FFe(r,e)||GFe(r,e)||BFe()}function zFe(r,e){if(typeof r!="object"||!r)return r;var n=r[Symbol.toPrimitive];if(n!==void 0){var i=n.call(r,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function $Fe(r){var e=zFe(r,"string");return typeof e=="symbol"?e:e+""}function fE(r){"@babel/helpers - typeof";return fE=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fE(r)}function GFe(r,e){if(r){if(typeof r=="string")return VW(r,e);var n={}.toString.call(r).slice(8,-1);return n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set"?Array.from(r):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?VW(r,e):void 0}}var rF=function(e){if(fE(e)!=="object")return e;var n=kie(e);if(n.props){var i;n.props=jFe({},n.props),n!=null&&(i=n.props)!==null&&i!==void 0&&i.children&&(n.props.children=Array.isArray(n.props.children)?n.props.children.map(rF):rF(n.props.children))}return n},VFe=function(e){return wie(kie(e))},HFe=function(e,n){delete n.__k,IFe(rF(e),n)};function WFe(r,e){e===void 0&&(e={});var n=e.insertAt;if(!(typeof document>"u")){var i=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css",n==="top"&&i.firstChild?i.insertBefore(s,i.firstChild):i.appendChild(s),s.styleSheet?s.styleSheet.cssText=r:s.appendChild(document.createTextNode(r))}}var qFe=`.float-tooltip-kap {
  position: absolute;
  width: max-content; /* prevent shrinking near right edge */
  max-width: max(50%, 150px);
  padding: 3px 5px;
  border-radius: 3px;
  font: 12px sans-serif;
  color: #eee;
  background: rgba(0,0,0,0.6);
  pointer-events: none;
}
`;WFe(qFe);var Iie=Hd({props:{content:{default:!1},offsetX:{triggerUpdate:!1},offsetY:{triggerUpdate:!1}},init:function(e,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=i.style,a=s===void 0?{}:s,o=!!e&&fE(e)==="object"&&!!e.node&&typeof e.node=="function",l=al(o?e.node():e);l.style("position")==="static"&&l.style("position","relative"),n.tooltipEl=l.append("div").attr("class","float-tooltip-kap"),Object.entries(a).forEach(function(u){var h=UFe(u,2),d=h[0],f=h[1];return n.tooltipEl.style(d,f)}),n.tooltipEl.style("left","-10000px").style("display","none");var c="tooltip-".concat(Math.round(Math.random()*1e12));n.mouseInside=!1,l.on("mousemove.".concat(c),function(u){n.mouseInside=!0;var h=Ec(u),d=l.node(),f=d.offsetWidth,p=d.offsetHeight,g=[n.offsetX===null||n.offsetX===void 0?"-".concat(h[0]/f*100,"%"):typeof n.offsetX=="number"?"calc(-50% + ".concat(n.offsetX,"px)"):n.offsetX,n.offsetY===null||n.offsetY===void 0?p>130&&p-h[1]<100?"calc(-100% - 6px)":"21px":typeof n.offsetY=="number"?n.offsetY<0?"calc(-100% - ".concat(Math.abs(n.offsetY),"px)"):"".concat(n.offsetY,"px"):n.offsetY];n.tooltipEl.style("left",h[0]+"px").style("top",h[1]+"px").style("transform","translate(".concat(g.join(","),")")),n.content&&n.tooltipEl.style("display","inline")}),l.on("mouseover.".concat(c),function(){n.mouseInside=!0,n.content&&n.tooltipEl.style("display","inline")}),l.on("mouseout.".concat(c),function(){n.mouseInside=!1,n.tooltipEl.style("display","none")})},update:function(e){e.tooltipEl.style("display",e.content&&e.mouseInside?"inline":"none"),e.content?e.content instanceof HTMLElement?(e.tooltipEl.text(""),e.tooltipEl.append(function(){return e.content})):typeof e.content=="string"?e.tooltipEl.html(e.content):VFe(e.content)?(e.tooltipEl.text(""),HFe(e.content,e.tooltipEl.node())):(e.tooltipEl.style("display","none"),console.warn("Tooltip content is invalid, skipping.",e.content,e.content.toString())):e.tooltipEl.text("")}});function XFe(r,e){e===void 0&&(e={});var n=e.insertAt;if(!(typeof document>"u")){var i=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css",n==="top"&&i.firstChild?i.insertBefore(s,i.firstChild):i.appendChild(s),s.styleSheet?s.styleSheet.cssText=r:s.appendChild(document.createTextNode(r))}}var KFe=`.scene-nav-info {
  position: absolute;
  bottom: 5px;
  width: 100%;
  text-align: center;
  color: slategrey;
  opacity: 0.7;
  font-size: 10px;
  font-family: sans-serif;
  pointer-events: none;
  user-select: none;
}

.scene-container canvas:focus {
  outline: none;
}`;XFe(KFe);function iF(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,i=Array(e);n<e;n++)i[n]=r[n];return i}function YFe(r){if(Array.isArray(r))return r}function ZFe(r){if(Array.isArray(r))return iF(r)}function QFe(r,e,n){return(e=sBe(e))in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function JFe(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function eBe(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var i,s,a,o,l=[],c=!0,u=!1;try{if(a=(n=n.call(r)).next,e!==0)for(;!(c=(i=a.call(n)).done)&&(l.push(i.value),l.length!==e);c=!0);}catch(h){u=!0,s=h}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function tBe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nBe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rBe(r,e){return YFe(r)||eBe(r,e)||Die(r,e)||tBe()}function Uf(r){return ZFe(r)||JFe(r)||Die(r)||nBe()}function iBe(r,e){if(typeof r!="object"||!r)return r;var n=r[Symbol.toPrimitive];if(n!==void 0){var i=n.call(r,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function sBe(r){var e=iBe(r,"string");return typeof e=="symbol"?e:e+""}function Die(r,e){if(r){if(typeof r=="string")return iF(r,e);var n={}.toString.call(r).slice(8,-1);return n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set"?Array.from(r):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?iF(r,e):void 0}}var fi=window.THREE?window.THREE:{WebGLRenderer:c_e,Scene:AM,PerspectiveCamera:Ns,Raycaster:Mye,SRGBColorSpace:dn,TextureLoader:pye,Vector2:dt,Vector3:pe,Box3:Bp,Color:ln,Mesh:li,SphereGeometry:Ep,MeshBasicMaterial:Aa,BackSide:Wr,Clock:wee},Lie=Hd({props:{width:{default:window.innerWidth,onChange:function(e,n,i){isNaN(e)&&(n.width=i)}},height:{default:window.innerHeight,onChange:function(e,n,i){isNaN(e)&&(n.height=i)}},viewOffset:{default:[0,0]},backgroundColor:{default:"#000011"},backgroundImageUrl:{},onBackgroundImageLoaded:{},showNavInfo:{default:!0},skyRadius:{default:5e4},objects:{default:[]},lights:{default:[]},enablePointerInteraction:{default:!0,onChange:function(e,n){n.hoverObj=null,n.tooltip&&n.tooltip.content(null)},triggerUpdate:!1},pointerRaycasterThrottleMs:{default:50,triggerUpdate:!1},lineHoverPrecision:{default:1,triggerUpdate:!1},pointsHoverPrecision:{default:1,triggerUpdate:!1},hoverOrderComparator:{triggerUpdate:!1},hoverFilter:{default:function(){return!0},triggerUpdate:!1},tooltipContent:{triggerUpdate:!1},hoverDuringDrag:{default:!1,triggerUpdate:!1},clickAfterDrag:{default:!1,triggerUpdate:!1},onHover:{default:function(){},triggerUpdate:!1},onClick:{default:function(){},triggerUpdate:!1},onRightClick:{triggerUpdate:!1}},methods:{tick:function(e){if(e.initialised){e.controls.update&&e.controls.update(Math.min(1,e.clock.getDelta())),e.postProcessingComposer?e.postProcessingComposer.render():e.renderer.render(e.scene,e.camera),e.extraRenderers.forEach(function(o){return o.render(e.scene,e.camera)});var n=+new Date;if(e.enablePointerInteraction&&n-e.lastRaycasterCheck>=e.pointerRaycasterThrottleMs){e.lastRaycasterCheck=n;var i=null;if(e.hoverDuringDrag||!e.isPointerDragging){var s=this.intersectingObjects(e.pointerPos.x,e.pointerPos.y);e.hoverOrderComparator&&s.sort(function(o,l){return e.hoverOrderComparator(o.object,l.object)});var a=s.find(function(o){return e.hoverFilter(o.object)})||null;i=a?a.object:null,e.intersection=a||null}i!==e.hoverObj&&(e.onHover(i,e.hoverObj,e.intersection),e.tooltip.content(i&&Zt(e.tooltipContent)(i,e.intersection)||null),e.hoverObj=i)}e.tweenGroup.update()}return this},getPointerPos:function(e){var n=e.pointerPos,i=n.x,s=n.y;return{x:i,y:s}},cameraPosition:function(e,n,i,s){var a=e.camera;if(n&&e.initialised){var o=n,l=i||{x:0,y:0,z:0};if(!s)h(o),d(l);else{var c=Object.assign({},a.position),u=f();e.tweenGroup.add(new uE(c).to(o,s).easing(ch.Quadratic.Out).onUpdate(h).start()),e.tweenGroup.add(new uE(u).to(l,s/3).easing(ch.Quadratic.Out).onUpdate(d).start())}return this}return Object.assign({},a.position,{lookAt:f()});function h(p){var g=p.x,v=p.y,x=p.z;g!==void 0&&(a.position.x=g),v!==void 0&&(a.position.y=v),x!==void 0&&(a.position.z=x)}function d(p){var g=new fi.Vector3(p.x,p.y,p.z);e.controls.target?e.controls.target=g:a.lookAt(g)}function f(){return Object.assign(new fi.Vector3(0,0,-1e3).applyQuaternion(a.quaternion).add(a.position))}},zoomToFit:function(e){for(var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:10,s=arguments.length,a=new Array(s>3?s-3:0),o=3;o<s;o++)a[o-3]=arguments[o];return this.fitToBbox(this.getBbox.apply(this,a),n,i)},fitToBbox:function(e,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:10,a=e.camera;if(n){var o=new fi.Vector3(0,0,0),l=Math.max.apply(Math,Uf(Object.entries(n).map(function(p){var g=rBe(p,2),v=g[0],x=g[1];return Math.max.apply(Math,Uf(x.map(function(_){return Math.abs(o[v]-_)})))})))*2,c=(1-s*2/e.height)*a.fov,u=l/Math.atan(c*Math.PI/180),h=u/a.aspect,d=Math.max(u,h);if(d>0){var f=o.clone().sub(a.position).normalize().multiplyScalar(-d);this.cameraPosition(f,o,i)}}return this},getBbox:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){return!0},i=new fi.Box3(new fi.Vector3(0,0,0),new fi.Vector3(0,0,0)),s=e.objects.filter(n);return s.length?(s.forEach(function(a){return i.expandByObject(a)}),Object.assign.apply(Object,Uf(["x","y","z"].map(function(a){return QFe({},a,[i.min[a],i.max[a]])})))):null},getScreenCoords:function(e,n,i,s){var a=new fi.Vector3(n,i,s);return a.project(this.camera()),{x:(a.x+1)*e.width/2,y:-(a.y-1)*e.height/2}},getSceneCoords:function(e,n,i){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,a=new fi.Vector2(n/e.width*2-1,-(i/e.height)*2+1),o=new fi.Raycaster;return o.setFromCamera(a,e.camera),Object.assign({},o.ray.at(s,new fi.Vector3))},intersectingObjects:function(e,n,i){var s=new fi.Vector2(n/e.width*2-1,-(i/e.height)*2+1),a=new fi.Raycaster;return a.params.Line.threshold=e.lineHoverPrecision,a.params.Points.threshold=e.pointsHoverPrecision,a.setFromCamera(s,e.camera),a.intersectObjects(e.objects,!0)},renderer:function(e){return e.renderer},scene:function(e){return e.scene},camera:function(e){return e.camera},postProcessingComposer:function(e){return e.postProcessingComposer},controls:function(e){return e.controls},tbControls:function(e){return e.controls}},stateInit:function(){return{scene:new fi.Scene,camera:new fi.PerspectiveCamera,clock:new fi.Clock,tweenGroup:new KU,lastRaycasterCheck:0}},init:function(e,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=i.controlType,a=s===void 0?"trackball":s,o=i.useWebGPU,l=o===void 0?!1:o,c=i.rendererConfig,u=c===void 0?{}:c,h=i.extraRenderers,d=h===void 0?[]:h,f=i.waitForLoadComplete,p=f===void 0?!0:f;e.innerHTML="",e.appendChild(n.container=document.createElement("div")),n.container.className="scene-container",n.container.style.position="relative",n.container.appendChild(n.navInfo=document.createElement("div")),n.navInfo.className="scene-nav-info",n.navInfo.textContent={orbit:"Left-click: rotate, Mouse-wheel/middle-click: zoom, Right-click: pan",trackball:"Left-click: rotate, Mouse-wheel/middle-click: zoom, Right-click: pan",fly:"WASD: move, R|F: up | down, Q|E: roll, up|down: pitch, left|right: yaw"}[a]||"",n.navInfo.style.display=n.showNavInfo?null:"none",n.tooltip=new Iie(n.container),n.pointerPos=new fi.Vector2,n.pointerPos.x=-2,n.pointerPos.y=-2,["pointermove","pointerdown"].forEach(function(g){return n.container.addEventListener(g,function(v){if(g==="pointerdown"&&(n.isPointerPressed=!0),!n.isPointerDragging&&v.type==="pointermove"&&(v.pressure>0||n.isPointerPressed)&&(v.pointerType!=="touch"||v.movementX===void 0||[v.movementX,v.movementY].some(function(E){return Math.abs(E)>1}))&&(n.isPointerDragging=!0),n.enablePointerInteraction){var x=_(n.container);n.pointerPos.x=v.pageX-x.left,n.pointerPos.y=v.pageY-x.top}function _(E){var S=E.getBoundingClientRect(),T=window.pageXOffset||document.documentElement.scrollLeft,M=window.pageYOffset||document.documentElement.scrollTop;return{top:S.top+M,left:S.left+T}}},{passive:!0})}),n.container.addEventListener("pointerup",function(g){n.isPointerPressed=!1,!(n.isPointerDragging&&(n.isPointerDragging=!1,!n.clickAfterDrag))&&requestAnimationFrame(function(){g.button===0&&n.onClick(n.hoverObj||null,g,n.intersection),g.button===2&&n.onRightClick&&n.onRightClick(n.hoverObj||null,g,n.intersection)})},{passive:!0,capture:!0}),n.container.addEventListener("contextmenu",function(g){n.onRightClick&&g.preventDefault()}),n.renderer=new(l?eLe:fi.WebGLRenderer)(Object.assign({antialias:!0,alpha:!0},u)),n.renderer.setPixelRatio(Math.min(2,window.devicePixelRatio)),n.container.appendChild(n.renderer.domElement),n.extraRenderers=d,n.extraRenderers.forEach(function(g){g.domElement.style.position="absolute",g.domElement.style.top="0px",g.domElement.style.pointerEvents="none",n.container.appendChild(g.domElement)}),n.postProcessingComposer=new qLe(n.renderer),n.postProcessingComposer.addPass(new XLe(n.scene,n.camera)),n.controls=new{trackball:nLe,orbit:vLe,fly:OLe}[a](n.camera,n.renderer.domElement),a==="fly"&&(n.controls.movementSpeed=300,n.controls.rollSpeed=Math.PI/6,n.controls.dragToLook=!0),(a==="trackball"||a==="orbit")&&(n.controls.minDistance=.1,n.controls.maxDistance=n.skyRadius,n.controls.addEventListener("start",function(){n.controlsEngaged=!0}),n.controls.addEventListener("change",function(){n.controlsEngaged&&(n.controlsDragging=!0)}),n.controls.addEventListener("end",function(){n.controlsEngaged=!1,n.controlsDragging=!1})),[n.renderer,n.postProcessingComposer].concat(Uf(n.extraRenderers)).forEach(function(g){return g.setSize(n.width,n.height)}),n.camera.aspect=n.width/n.height,n.camera.updateProjectionMatrix(),n.camera.position.z=1e3,n.scene.add(n.skysphere=new fi.Mesh),n.skysphere.visible=!1,n.loadComplete=n.scene.visible=!p,window.scene=n.scene},update:function(e,n){if(e.width&&e.height&&(n.hasOwnProperty("width")||n.hasOwnProperty("height"))){var i,s=e.width,a=e.height;e.container.style.width="".concat(s,"px"),e.container.style.height="".concat(a,"px"),[e.renderer,e.postProcessingComposer].concat(Uf(e.extraRenderers)).forEach(function(p){return p.setSize(s,a)}),e.camera.aspect=s/a;var o=e.viewOffset.slice(0,2);o.some(function(p){return p})&&(i=e.camera).setViewOffset.apply(i,[s,a].concat(Uf(o),[s,a])),e.camera.updateProjectionMatrix()}if(n.hasOwnProperty("viewOffset")){var l,c=e.width,u=e.height,h=e.viewOffset.slice(0,2);h.some(function(p){return p})?(l=e.camera).setViewOffset.apply(l,[c,u].concat(Uf(h),[c,u])):e.camera.clearViewOffset()}if(n.hasOwnProperty("skyRadius")&&e.skyRadius&&(e.controls.hasOwnProperty("maxDistance")&&n.skyRadius&&(e.controls.maxDistance=Math.min(e.controls.maxDistance,e.skyRadius)),e.camera.far=e.skyRadius*2.5,e.camera.updateProjectionMatrix(),e.skysphere.geometry=new fi.SphereGeometry(e.skyRadius)),n.hasOwnProperty("backgroundColor")){var d=Np(e.backgroundColor).alpha;d===void 0&&(d=1),e.renderer.setClearColor(new fi.Color(sne(1,e.backgroundColor)),d)}n.hasOwnProperty("backgroundImageUrl")&&(e.backgroundImageUrl?new fi.TextureLoader().load(e.backgroundImageUrl,function(p){p.colorSpace=fi.SRGBColorSpace,e.skysphere.material=new fi.MeshBasicMaterial({map:p,side:fi.BackSide}),e.skysphere.visible=!0,e.onBackgroundImageLoaded&&setTimeout(e.onBackgroundImageLoaded),!e.loadComplete&&f()}):(e.skysphere.visible=!1,e.skysphere.material.map=null,!e.loadComplete&&f())),n.hasOwnProperty("showNavInfo")&&(e.navInfo.style.display=e.showNavInfo?null:"none"),n.hasOwnProperty("lights")&&((n.lights||[]).forEach(function(p){return e.scene.remove(p)}),e.lights.forEach(function(p){return e.scene.add(p)})),n.hasOwnProperty("objects")&&((n.objects||[]).forEach(function(p){return e.scene.remove(p)}),e.objects.forEach(function(p){return e.scene.add(p)}));function f(){e.loadComplete=e.scene.visible=!0}}});function aBe(r,e){e===void 0&&(e={});var n=e.insertAt;if(!(typeof document>"u")){var i=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css",n==="top"&&i.firstChild?i.insertBefore(s,i.firstChild):i.appendChild(s),s.styleSheet?s.styleSheet.cssText=r:s.appendChild(document.createTextNode(r))}}var oBe=`.graph-info-msg {
  top: 50%;
  width: 100%;
  text-align: center;
  color: lavender;
  opacity: 0.7;
  font-size: 22px;
  position: absolute;
  font-family: Sans-serif;
}

.scene-container .clickable {
  cursor: pointer;
}

.scene-container .grabbable {
  cursor: move;
  cursor: grab;
  cursor: -moz-grab;
  cursor: -webkit-grab;
}

.scene-container .grabbable:active {
  cursor: grabbing;
  cursor: -moz-grabbing;
  cursor: -webkit-grabbing;
}`;aBe(oBe);function sF(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,i=Array(e);n<e;n++)i[n]=r[n];return i}function lBe(r){if(Array.isArray(r))return sF(r)}function $_(r,e,n){return(e=dBe(e))in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function cBe(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function uBe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function WW(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable})),n.push.apply(n,i)}return n}function LS(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?WW(Object(n),!0).forEach(function(i){$_(r,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):WW(Object(n)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(n,i))})}return r}function pA(r){return lBe(r)||cBe(r)||fBe(r)||uBe()}function hBe(r,e){if(typeof r!="object"||!r)return r;var n=r[Symbol.toPrimitive];if(n!==void 0){var i=n.call(r,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function dBe(r){var e=hBe(r,"string");return typeof e=="symbol"?e:e+""}function fBe(r,e){if(r){if(typeof r=="string")return sF(r,e);var n={}.toString.call(r).slice(8,-1);return n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set"?Array.from(r):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?sF(r,e):void 0}}function Fie(r,e){var n=new e;return n._destructor&&n._destructor(),{linkProp:function(s){return{default:n[s](),onChange:function(o,l){l[r][s](o)},triggerUpdate:!1}},linkMethod:function(s){return function(a){for(var o=a[r],l=arguments.length,c=new Array(l>1?l-1:0),u=1;u<l;u++)c[u-1]=arguments[u];var h=o[s].apply(o,c);return h===o?this:h}}}}var FR=window.THREE?window.THREE:{AmbientLight:XAe,DirectionalLight:qAe,REVISION:pU},pBe=170,Bie=Fie("forceGraph",Mg),mBe=Object.assign.apply(Object,pA(["jsonUrl","graphData","numDimensions","dagMode","dagLevelDistance","dagNodeFilter","onDagError","nodeRelSize","nodeId","nodeVal","nodeResolution","nodeColor","nodeAutoColorBy","nodeOpacity","nodeVisibility","nodeThreeObject","nodeThreeObjectExtend","nodePositionUpdate","linkSource","linkTarget","linkVisibility","linkColor","linkAutoColorBy","linkOpacity","linkWidth","linkResolution","linkCurvature","linkCurveRotation","linkMaterial","linkThreeObject","linkThreeObjectExtend","linkPositionUpdate","linkDirectionalArrowLength","linkDirectionalArrowColor","linkDirectionalArrowRelPos","linkDirectionalArrowResolution","linkDirectionalParticles","linkDirectionalParticleSpeed","linkDirectionalParticleWidth","linkDirectionalParticleColor","linkDirectionalParticleResolution","forceEngine","d3AlphaDecay","d3VelocityDecay","d3AlphaMin","ngraphPhysics","warmupTicks","cooldownTicks","cooldownTime","onEngineTick","onEngineStop"].map(function(r){return $_({},r,Bie.linkProp(r))}))),gBe=Object.assign.apply(Object,pA(["refresh","getGraphBbox","d3Force","d3ReheatSimulation","emitParticle"].map(function(r){return $_({},r,Bie.linkMethod(r))}))),bT=Fie("renderObjs",Lie),yBe=Object.assign.apply(Object,pA(["width","height","backgroundColor","showNavInfo","enablePointerInteraction"].map(function(r){return $_({},r,bT.linkProp(r))}))),vBe=Object.assign.apply(Object,pA(["lights","cameraPosition","postProcessingComposer"].map(function(r){return $_({},r,bT.linkMethod(r))})).concat([{graph2ScreenCoords:bT.linkMethod("getScreenCoords"),screen2GraphCoords:bT.linkMethod("getSceneCoords")}])),xBe=Hd({props:LS(LS({nodeLabel:{default:"name",triggerUpdate:!1},linkLabel:{default:"name",triggerUpdate:!1},linkHoverPrecision:{default:1,onChange:function(e,n){return n.renderObjs.lineHoverPrecision(e)},triggerUpdate:!1},enableNavigationControls:{default:!0,onChange:function(e,n){var i=n.renderObjs.controls();i&&(i.enabled=e,e&&i.domElement&&i.domElement.dispatchEvent(new PointerEvent("pointerup")))},triggerUpdate:!1},enableNodeDrag:{default:!0,triggerUpdate:!1},onNodeDrag:{default:function(){},triggerUpdate:!1},onNodeDragEnd:{default:function(){},triggerUpdate:!1},onNodeClick:{triggerUpdate:!1},onNodeRightClick:{triggerUpdate:!1},onNodeHover:{triggerUpdate:!1},onLinkClick:{triggerUpdate:!1},onLinkRightClick:{triggerUpdate:!1},onLinkHover:{triggerUpdate:!1},onBackgroundClick:{triggerUpdate:!1},onBackgroundRightClick:{triggerUpdate:!1}},mBe),yBe),methods:LS(LS({zoomToFit:function(e,n,i){for(var s,a=arguments.length,o=new Array(a>3?a-3:0),l=3;l<a;l++)o[l-3]=arguments[l];return e.renderObjs.fitToBbox((s=e.forceGraph).getGraphBbox.apply(s,o),n,i),this},pauseAnimation:function(e){return e.animationFrameRequestId!==null&&(cancelAnimationFrame(e.animationFrameRequestId),e.animationFrameRequestId=null),this},resumeAnimation:function(e){return e.animationFrameRequestId===null&&this._animationCycle(),this},_animationCycle:function(e){e.enablePointerInteraction&&(this.renderer().domElement.style.cursor=null),e.forceGraph.tickFrame(),e.renderObjs.tick(),e.animationFrameRequestId=requestAnimationFrame(this._animationCycle)},scene:function(e){return e.renderObjs.scene()},camera:function(e){return e.renderObjs.camera()},renderer:function(e){return e.renderObjs.renderer()},controls:function(e){return e.renderObjs.controls()},tbControls:function(e){return e.renderObjs.tbControls()},_destructor:function(){this.pauseAnimation(),this.graphData({nodes:[],links:[]})}},gBe),vBe),stateInit:function(e){var n=e.controlType,i=e.rendererConfig,s=e.extraRenderers,a=new Mg;return{forceGraph:a,renderObjs:Lie({controlType:n,rendererConfig:i,extraRenderers:s}).objects([a]).lights([new FR.AmbientLight(13421772,Math.PI),new FR.DirectionalLight(16777215,.6*Math.PI)])}},init:function(e,n){e.innerHTML="",e.appendChild(n.container=document.createElement("div")),n.container.style.position="relative";var i=document.createElement("div");n.container.appendChild(i),n.renderObjs(i);var s=n.renderObjs.camera(),a=n.renderObjs.renderer(),o=n.renderObjs.controls();o.enabled=!!n.enableNavigationControls,n.lastSetCameraZ=s.position.z;var l;n.container.appendChild(l=document.createElement("div")),l.className="graph-info-msg",l.textContent="",n.forceGraph.onLoading(function(){l.textContent="Loading..."}).onFinishLoading(function(){l.textContent=""}).onUpdate(function(){n.graphData=n.forceGraph.graphData(),s.position.x===0&&s.position.y===0&&s.position.z===n.lastSetCameraZ&&n.graphData.nodes.length&&(s.lookAt(n.forceGraph.position),n.lastSetCameraZ=s.position.z=Math.cbrt(n.graphData.nodes.length)*pBe)}).onFinishUpdate(function(){if(n._dragControls){var c=n.graphData.nodes.find(function(h){return h.__initialFixedPos&&!h.__disposeControlsAfterDrag});c?c.__disposeControlsAfterDrag=!0:n._dragControls.dispose(),n._dragControls=void 0}if(n.enableNodeDrag&&n.enablePointerInteraction&&n.forceEngine==="d3"){var u=n._dragControls=new QAe(n.graphData.nodes.map(function(h){return h.__threeObj}).filter(function(h){return h}),s,a.domElement);u.addEventListener("dragstart",function(h){var d=Du(h.object);if(d){o.enabled=!1,h.object.__initialPos=h.object.position.clone(),h.object.__prevPos=h.object.position.clone();var f=d.__data;!f.__initialFixedPos&&(f.__initialFixedPos={fx:f.fx,fy:f.fy,fz:f.fz}),!f.__initialPos&&(f.__initialPos={x:f.x,y:f.y,z:f.z}),["x","y","z"].forEach(function(p){return f["f".concat(p)]=f[p]}),a.domElement.classList.add("grabbable")}}),u.addEventListener("drag",function(h){var d=Du(h.object);if(d){if(!h.object.hasOwnProperty("__graphObjType")){var f=h.object.__initialPos,p=h.object.__prevPos,g=h.object.position;d.position.add(g.clone().sub(p)),p.copy(g),g.copy(f)}var v=d.__data,x=d.position,_={x:x.x-v.x,y:x.y-v.y,z:x.z-v.z};["x","y","z"].forEach(function(E){return v["f".concat(E)]=v[E]=x[E]}),n.forceGraph.d3AlphaTarget(.3).resetCountdown(),v.__dragged=!0,n.onNodeDrag(v,_)}}),u.addEventListener("dragend",function(h){var d=Du(h.object);if(d){delete h.object.__initialPos,delete h.object.__prevPos;var f=d.__data;f.__disposeControlsAfterDrag&&(u.dispose(),delete f.__disposeControlsAfterDrag);var p=f.__initialFixedPos,g=f.__initialPos,v={x:g.x-f.x,y:g.y-f.y,z:g.z-f.z};p&&(["x","y","z"].forEach(function(x){var _="f".concat(x);p[_]===void 0&&delete f[_]}),delete f.__initialFixedPos,delete f.__initialPos,f.__dragged&&(delete f.__dragged,n.onNodeDragEnd(f,v))),n.forceGraph.d3AlphaTarget(0).resetCountdown(),n.enableNavigationControls&&(o.enabled=!0,o.domElement&&o.domElement.ownerDocument&&o.domElement.ownerDocument.dispatchEvent(new PointerEvent("pointerup",{pointerType:"touch"}))),a.domElement.classList.remove("grabbable")}})}}),FR.REVISION<155&&(n.renderObjs.renderer().useLegacyLights=!1),n.renderObjs.hoverOrderComparator(function(c,u){var h=Du(c);if(!h)return 1;var d=Du(u);if(!d)return-1;var f=function(g){return g.__graphObjType==="node"};return f(d)-f(h)}).tooltipContent(function(c){var u=Du(c);return u&&Zt(n["".concat(u.__graphObjType,"Label")])(u.__data)||""}).hoverDuringDrag(!1).onHover(function(c){var u=Du(c);if(u!==n.hoverObj){var h=n.hoverObj?n.hoverObj.__graphObjType:null,d=n.hoverObj?n.hoverObj.__data:null,f=u?u.__graphObjType:null,p=u?u.__data:null;if(h&&h!==f){var g=n["on".concat(h==="node"?"Node":"Link","Hover")];g&&g(null,d)}if(f){var v=n["on".concat(f==="node"?"Node":"Link","Hover")];v&&v(p,h===f?d:null)}a.domElement.classList[u&&n["on".concat(f==="node"?"Node":"Link","Click")]||!u&&n.onBackgroundClick?"add":"remove"]("clickable"),n.hoverObj=u}}).clickAfterDrag(!1).onClick(function(c,u){var h=Du(c);if(h){var d=n["on".concat(h.__graphObjType==="node"?"Node":"Link","Click")];d&&d(h.__data,u)}else n.onBackgroundClick&&n.onBackgroundClick(u)}).onRightClick(function(c,u){var h=Du(c);if(h){var d=n["on".concat(h.__graphObjType==="node"?"Node":"Link","RightClick")];d&&d(h.__data,u)}else n.onBackgroundRightClick&&n.onBackgroundRightClick(u)}),this._animationCycle()}});function Du(r){for(var e=r;e&&!e.hasOwnProperty("__graphObjType");)e=e.parent;return e}const bBe={passive:!1},kb={capture:!0,passive:!1};function BR(r){r.stopImmediatePropagation()}function qg(r){r.preventDefault(),r.stopImmediatePropagation()}function jie(r){var e=r.document.documentElement,n=al(r).on("dragstart.drag",qg,kb);"onselectstart"in e?n.on("selectstart.drag",qg,kb):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function Uie(r,e){var n=r.document.documentElement,i=al(r).on("dragstart.drag",null);e&&(i.on("click.drag",qg,kb),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in n?i.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const FS=r=>()=>r;function aF(r,{sourceEvent:e,subject:n,target:i,identifier:s,active:a,x:o,y:l,dx:c,dy:u,dispatch:h}){Object.defineProperties(this,{type:{value:r,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:s,enumerable:!0,configurable:!0},active:{value:a,enumerable:!0,configurable:!0},x:{value:o,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:h}})}aF.prototype.on=function(){var r=this._.on.apply(this._,arguments);return r===this._?this:r};function _Be(r){return!r.ctrlKey&&!r.button}function wBe(){return this.parentNode}function SBe(r,e){return e??{x:r.x,y:r.y}}function TBe(){return navigator.maxTouchPoints||"ontouchstart"in this}function EBe(){var r=_Be,e=wBe,n=SBe,i=TBe,s={},a=E_("start","drag","end"),o=0,l,c,u,h,d=0;function f(T){T.on("mousedown.drag",p).filter(i).on("touchstart.drag",x).on("touchmove.drag",_,bBe).on("touchend.drag touchcancel.drag",E).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function p(T,M){if(!(h||!r.call(this,T,M))){var C=S(this,e.call(this,T,M),T,M,"mouse");C&&(al(T.view).on("mousemove.drag",g,kb).on("mouseup.drag",v,kb),jie(T.view),BR(T),u=!1,l=T.clientX,c=T.clientY,C("start",T))}}function g(T){if(qg(T),!u){var M=T.clientX-l,C=T.clientY-c;u=M*M+C*C>d}s.mouse("drag",T)}function v(T){al(T.view).on("mousemove.drag mouseup.drag",null),Uie(T.view,u),qg(T),s.mouse("end",T)}function x(T,M){if(r.call(this,T,M)){var C=T.changedTouches,A=e.call(this,T,M),P=C.length,R,O;for(R=0;R<P;++R)(O=S(this,A,T,M,C[R].identifier,C[R]))&&(BR(T),O("start",T,C[R]))}}function _(T){var M=T.changedTouches,C=M.length,A,P;for(A=0;A<C;++A)(P=s[M[A].identifier])&&(qg(T),P("drag",T,M[A]))}function E(T){var M=T.changedTouches,C=M.length,A,P;for(h&&clearTimeout(h),h=setTimeout(function(){h=null},500),A=0;A<C;++A)(P=s[M[A].identifier])&&(BR(T),P("end",T,M[A]))}function S(T,M,C,A,P,R){var O=a.copy(),D=Ec(R||C,M),F,U,B;if((B=n.call(T,new aF("beforestart",{sourceEvent:C,target:f,identifier:P,active:o,x:D[0],y:D[1],dx:0,dy:0,dispatch:O}),A))!=null)return F=B.x-D[0]||0,U=B.y-D[1]||0,function W(j,$,z){var Z=D,se;switch(j){case"start":s[P]=W,se=o++;break;case"end":delete s[P],--o;case"drag":D=Ec(z||$,M),se=o;break}O.call(j,T,new aF(j,{sourceEvent:$,subject:B,target:f,identifier:P,active:se,x:D[0]+F,y:D[1]+U,dx:D[0]-Z[0],dy:D[1]-Z[1],dispatch:O}),A)}}return f.filter=function(T){return arguments.length?(r=typeof T=="function"?T:FS(!!T),f):r},f.container=function(T){return arguments.length?(e=typeof T=="function"?T:FS(T),f):e},f.subject=function(T){return arguments.length?(n=typeof T=="function"?T:FS(T),f):n},f.touchable=function(T){return arguments.length?(i=typeof T=="function"?T:FS(!!T),f):i},f.on=function(){var T=a.on.apply(a,arguments);return T===a?f:T},f.clickDistance=function(T){return arguments.length?(d=(T=+T)*T,f):Math.sqrt(d)},f}var MBe=E_("start","end","cancel","interrupt"),ABe=[],zie=0,qW=1,oF=2,_T=3,XW=4,lF=5,wT=6;function mA(r,e,n,i,s,a){var o=r.__transition;if(!o)r.__transition={};else if(n in o)return;CBe(r,n,{name:e,index:i,group:s,on:MBe,tween:ABe,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:zie})}function nz(r,e){var n=hc(r,e);if(n.state>zie)throw new Error("too late; already scheduled");return n}function ru(r,e){var n=hc(r,e);if(n.state>_T)throw new Error("too late; already running");return n}function hc(r,e){var n=r.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function CBe(r,e,n){var i=r.__transition,s;i[e]=n,n.timer=Kj(a,0,n.time);function a(u){n.state=qW,n.timer.restart(o,n.delay,n.time),n.delay<=u&&o(u-n.delay)}function o(u){var h,d,f,p;if(n.state!==qW)return c();for(h in i)if(p=i[h],p.name===n.name){if(p.state===_T)return yV(o);p.state===XW?(p.state=wT,p.timer.stop(),p.on.call("interrupt",r,r.__data__,p.index,p.group),delete i[h]):+h<e&&(p.state=wT,p.timer.stop(),p.on.call("cancel",r,r.__data__,p.index,p.group),delete i[h])}if(yV(function(){n.state===_T&&(n.state=XW,n.timer.restart(l,n.delay,n.time),l(u))}),n.state=oF,n.on.call("start",r,r.__data__,n.index,n.group),n.state===oF){for(n.state=_T,s=new Array(f=n.tween.length),h=0,d=-1;h<f;++h)(p=n.tween[h].value.call(r,r.__data__,n.index,n.group))&&(s[++d]=p);s.length=d+1}}function l(u){for(var h=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(c),n.state=lF,1),d=-1,f=s.length;++d<f;)s[d].call(r,h);n.state===lF&&(n.on.call("end",r,r.__data__,n.index,n.group),c())}function c(){n.state=wT,n.timer.stop(),delete i[e];for(var u in i)return;delete r.__transition}}function ST(r,e){var n=r.__transition,i,s,a=!0,o;if(n){e=e==null?null:e+"";for(o in n){if((i=n[o]).name!==e){a=!1;continue}s=i.state>oF&&i.state<lF,i.state=wT,i.timer.stop(),i.on.call(s?"interrupt":"cancel",r,r.__data__,i.index,i.group),delete n[o]}a&&delete r.__transition}}function NBe(r){return this.each(function(){ST(this,r)})}function PBe(r,e){var n,i;return function(){var s=ru(this,r),a=s.tween;if(a!==n){i=n=a;for(var o=0,l=i.length;o<l;++o)if(i[o].name===e){i=i.slice(),i.splice(o,1);break}}s.tween=i}}function RBe(r,e,n){var i,s;if(typeof n!="function")throw new Error;return function(){var a=ru(this,r),o=a.tween;if(o!==i){s=(i=o).slice();for(var l={name:e,value:n},c=0,u=s.length;c<u;++c)if(s[c].name===e){s[c]=l;break}c===u&&s.push(l)}a.tween=s}}function OBe(r,e){var n=this._id;if(r+="",arguments.length<2){for(var i=hc(this.node(),n).tween,s=0,a=i.length,o;s<a;++s)if((o=i[s]).name===r)return o.value;return null}return this.each((e==null?PBe:RBe)(n,r,e))}function rz(r,e,n){var i=r._id;return r.each(function(){var s=ru(this,i);(s.value||(s.value={}))[e]=n.apply(this,arguments)}),function(s){return hc(s,i).value[e]}}function $ie(r,e){var n;return(typeof e=="number"?Zl:e instanceof Cp?yb:(n=Cp(e))?(e=n,yb):cte)(r,e)}function kBe(r){return function(){this.removeAttribute(r)}}function IBe(r){return function(){this.removeAttributeNS(r.space,r.local)}}function DBe(r,e,n){var i,s=n+"",a;return function(){var o=this.getAttribute(r);return o===s?null:o===i?a:a=e(i=o,n)}}function LBe(r,e,n){var i,s=n+"",a;return function(){var o=this.getAttributeNS(r.space,r.local);return o===s?null:o===i?a:a=e(i=o,n)}}function FBe(r,e,n){var i,s,a;return function(){var o,l=n(this),c;return l==null?void this.removeAttribute(r):(o=this.getAttribute(r),c=l+"",o===c?null:o===i&&c===s?a:(s=c,a=e(i=o,l)))}}function BBe(r,e,n){var i,s,a;return function(){var o,l=n(this),c;return l==null?void this.removeAttributeNS(r.space,r.local):(o=this.getAttributeNS(r.space,r.local),c=l+"",o===c?null:o===i&&c===s?a:(s=c,a=e(i=o,l)))}}function jBe(r,e){var n=hA(r),i=n==="transform"?MSe:$ie;return this.attrTween(r,typeof e=="function"?(n.local?BBe:FBe)(n,i,rz(this,"attr."+r,e)):e==null?(n.local?IBe:kBe)(n):(n.local?LBe:DBe)(n,i,e))}function UBe(r,e){return function(n){this.setAttribute(r,e.call(this,n))}}function zBe(r,e){return function(n){this.setAttributeNS(r.space,r.local,e.call(this,n))}}function $Be(r,e){var n,i;function s(){var a=e.apply(this,arguments);return a!==i&&(n=(i=a)&&zBe(r,a)),n}return s._value=e,s}function GBe(r,e){var n,i;function s(){var a=e.apply(this,arguments);return a!==i&&(n=(i=a)&&UBe(r,a)),n}return s._value=e,s}function VBe(r,e){var n="attr."+r;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var i=hA(r);return this.tween(n,(i.local?$Be:GBe)(i,e))}function HBe(r,e){return function(){nz(this,r).delay=+e.apply(this,arguments)}}function WBe(r,e){return e=+e,function(){nz(this,r).delay=e}}function qBe(r){var e=this._id;return arguments.length?this.each((typeof r=="function"?HBe:WBe)(e,r)):hc(this.node(),e).delay}function XBe(r,e){return function(){ru(this,r).duration=+e.apply(this,arguments)}}function KBe(r,e){return e=+e,function(){ru(this,r).duration=e}}function YBe(r){var e=this._id;return arguments.length?this.each((typeof r=="function"?XBe:KBe)(e,r)):hc(this.node(),e).duration}function ZBe(r,e){if(typeof e!="function")throw new Error;return function(){ru(this,r).ease=e}}function QBe(r){var e=this._id;return arguments.length?this.each(ZBe(e,r)):hc(this.node(),e).ease}function JBe(r,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;ru(this,r).ease=n}}function eje(r){if(typeof r!="function")throw new Error;return this.each(JBe(this._id,r))}function tje(r){typeof r!="function"&&(r=hie(r));for(var e=this._groups,n=e.length,i=new Array(n),s=0;s<n;++s)for(var a=e[s],o=a.length,l=i[s]=[],c,u=0;u<o;++u)(c=a[u])&&r.call(c,c.__data__,u,a)&&l.push(c);return new xh(i,this._parents,this._name,this._id)}function nje(r){if(r._id!==this._id)throw new Error;for(var e=this._groups,n=r._groups,i=e.length,s=n.length,a=Math.min(i,s),o=new Array(i),l=0;l<a;++l)for(var c=e[l],u=n[l],h=c.length,d=o[l]=new Array(h),f,p=0;p<h;++p)(f=c[p]||u[p])&&(d[p]=f);for(;l<i;++l)o[l]=e[l];return new xh(o,this._parents,this._name,this._id)}function rje(r){return(r+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function ije(r,e,n){var i,s,a=rje(e)?nz:ru;return function(){var o=a(this,r),l=o.on;l!==i&&(s=(i=l).copy()).on(e,n),o.on=s}}function sje(r,e){var n=this._id;return arguments.length<2?hc(this.node(),n).on.on(r):this.each(ije(n,r,e))}function aje(r){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==r)return;e&&e.removeChild(this)}}function oje(){return this.on("end.remove",aje(this._id))}function lje(r){var e=this._name,n=this._id;typeof r!="function"&&(r=YU(r));for(var i=this._groups,s=i.length,a=new Array(s),o=0;o<s;++o)for(var l=i[o],c=l.length,u=a[o]=new Array(c),h,d,f=0;f<c;++f)(h=l[f])&&(d=r.call(h,h.__data__,f,l))&&("__data__"in h&&(d.__data__=h.__data__),u[f]=d,mA(u[f],e,n,f,u,hc(h,n)));return new xh(a,this._parents,e,n)}function cje(r){var e=this._name,n=this._id;typeof r!="function"&&(r=uie(r));for(var i=this._groups,s=i.length,a=[],o=[],l=0;l<s;++l)for(var c=i[l],u=c.length,h,d=0;d<u;++d)if(h=c[d]){for(var f=r.call(h,h.__data__,d,c),p,g=hc(h,n),v=0,x=f.length;v<x;++v)(p=f[v])&&mA(p,e,n,v,f,g);a.push(f),o.push(h)}return new xh(a,o,e,n)}var uje=U_.prototype.constructor;function hje(){return new uje(this._groups,this._parents)}function dje(r,e){var n,i,s;return function(){var a=My(this,r),o=(this.style.removeProperty(r),My(this,r));return a===o?null:a===n&&o===i?s:s=e(n=a,i=o)}}function Gie(r){return function(){this.style.removeProperty(r)}}function fje(r,e,n){var i,s=n+"",a;return function(){var o=My(this,r);return o===s?null:o===i?a:a=e(i=o,n)}}function pje(r,e,n){var i,s,a;return function(){var o=My(this,r),l=n(this),c=l+"";return l==null&&(c=l=(this.style.removeProperty(r),My(this,r))),o===c?null:o===i&&c===s?a:(s=c,a=e(i=o,l))}}function mje(r,e){var n,i,s,a="style."+e,o="end."+a,l;return function(){var c=ru(this,r),u=c.on,h=c.value[a]==null?l||(l=Gie(e)):void 0;(u!==n||s!==h)&&(i=(n=u).copy()).on(o,s=h),c.on=i}}function gje(r,e,n){var i=(r+="")=="transform"?ESe:$ie;return e==null?this.styleTween(r,dje(r,i)).on("end.style."+r,Gie(r)):typeof e=="function"?this.styleTween(r,pje(r,i,rz(this,"style."+r,e))).each(mje(this._id,r)):this.styleTween(r,fje(r,i,e),n).on("end.style."+r,null)}function yje(r,e,n){return function(i){this.style.setProperty(r,e.call(this,i),n)}}function vje(r,e,n){var i,s;function a(){var o=e.apply(this,arguments);return o!==s&&(i=(s=o)&&yje(r,o,n)),i}return a._value=e,a}function xje(r,e,n){var i="style."+(r+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(e==null)return this.tween(i,null);if(typeof e!="function")throw new Error;return this.tween(i,vje(r,e,n??""))}function bje(r){return function(){this.textContent=r}}function _je(r){return function(){var e=r(this);this.textContent=e??""}}function wje(r){return this.tween("text",typeof r=="function"?_je(rz(this,"text",r)):bje(r==null?"":r+""))}function Sje(r){return function(e){this.textContent=r.call(this,e)}}function Tje(r){var e,n;function i(){var s=r.apply(this,arguments);return s!==n&&(e=(n=s)&&Sje(s)),e}return i._value=r,i}function Eje(r){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(r==null)return this.tween(e,null);if(typeof r!="function")throw new Error;return this.tween(e,Tje(r))}function Mje(){for(var r=this._name,e=this._id,n=Vie(),i=this._groups,s=i.length,a=0;a<s;++a)for(var o=i[a],l=o.length,c,u=0;u<l;++u)if(c=o[u]){var h=hc(c,e);mA(c,r,n,u,o,{time:h.time+h.delay+h.duration,delay:0,duration:h.duration,ease:h.ease})}return new xh(i,this._parents,r,n)}function Aje(){var r,e,n=this,i=n._id,s=n.size();return new Promise(function(a,o){var l={value:o},c={value:function(){--s===0&&a()}};n.each(function(){var u=ru(this,i),h=u.on;h!==r&&(e=(r=h).copy(),e._.cancel.push(l),e._.interrupt.push(l),e._.end.push(c)),u.on=e}),s===0&&a()})}var Cje=0;function xh(r,e,n,i){this._groups=r,this._parents=e,this._name=n,this._id=i}function Vie(){return++Cje}var Lu=U_.prototype;xh.prototype={constructor:xh,select:lje,selectAll:cje,selectChild:Lu.selectChild,selectChildren:Lu.selectChildren,filter:tje,merge:nje,selection:hje,transition:Mje,call:Lu.call,nodes:Lu.nodes,node:Lu.node,size:Lu.size,empty:Lu.empty,each:Lu.each,on:sje,attr:jBe,attrTween:VBe,style:gje,styleTween:xje,text:wje,textTween:Eje,remove:oje,tween:OBe,delay:qBe,duration:YBe,ease:QBe,easeVarying:eje,end:Aje,[Symbol.iterator]:Lu[Symbol.iterator]};function Nje(r){return((r*=2)<=1?r*r*r:(r-=2)*r*r+2)/2}var Pje={time:null,delay:0,duration:250,ease:Nje};function Rje(r,e){for(var n;!(n=r.__transition)||!(n=n[e]);)if(!(r=r.parentNode))throw new Error(`transition ${e} not found`);return n}function Oje(r){var e,n;r instanceof xh?(e=r._id,r=r._name):(e=Vie(),(n=Pje).time=Xj(),r=r==null?null:r+"");for(var i=this._groups,s=i.length,a=0;a<s;++a)for(var o=i[a],l=o.length,c,u=0;u<l;++u)(c=o[u])&&mA(c,r,e,u,o,n||Rje(c,e));return new xh(i,this._parents,r,e)}U_.prototype.interrupt=NBe;U_.prototype.transition=Oje;const BS=r=>()=>r;function kje(r,{sourceEvent:e,target:n,transform:i,dispatch:s}){Object.defineProperties(this,{type:{value:r,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:s}})}function eh(r,e,n){this.k=r,this.x=e,this.y=n}eh.prototype={constructor:eh,scale:function(r){return r===1?this:new eh(this.k*r,this.x,this.y)},translate:function(r,e){return r===0&e===0?this:new eh(this.k,this.x+this.k*r,this.y+this.k*e)},apply:function(r){return[r[0]*this.k+this.x,r[1]*this.k+this.y]},applyX:function(r){return r*this.k+this.x},applyY:function(r){return r*this.k+this.y},invert:function(r){return[(r[0]-this.x)/this.k,(r[1]-this.y)/this.k]},invertX:function(r){return(r-this.x)/this.k},invertY:function(r){return(r-this.y)/this.k},rescaleX:function(r){return r.copy().domain(r.range().map(this.invertX,this).map(r.invert,r))},rescaleY:function(r){return r.copy().domain(r.range().map(this.invertY,this).map(r.invert,r))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var iz=new eh(1,0,0);Tc.prototype=eh.prototype;function Tc(r){for(;!r.__zoom;)if(!(r=r.parentNode))return iz;return r.__zoom}function jR(r){r.stopImmediatePropagation()}function Fv(r){r.preventDefault(),r.stopImmediatePropagation()}function Ije(r){return(!r.ctrlKey||r.type==="wheel")&&!r.button}function Dje(){var r=this;return r instanceof SVGElement?(r=r.ownerSVGElement||r,r.hasAttribute("viewBox")?(r=r.viewBox.baseVal,[[r.x,r.y],[r.x+r.width,r.y+r.height]]):[[0,0],[r.width.baseVal.value,r.height.baseVal.value]]):[[0,0],[r.clientWidth,r.clientHeight]]}function KW(){return this.__zoom||iz}function Lje(r){return-r.deltaY*(r.deltaMode===1?.05:r.deltaMode?1:.002)*(r.ctrlKey?10:1)}function Fje(){return navigator.maxTouchPoints||"ontouchstart"in this}function Bje(r,e,n){var i=r.invertX(e[0][0])-n[0][0],s=r.invertX(e[1][0])-n[1][0],a=r.invertY(e[0][1])-n[0][1],o=r.invertY(e[1][1])-n[1][1];return r.translate(s>i?(i+s)/2:Math.min(0,i)||Math.max(0,s),o>a?(a+o)/2:Math.min(0,a)||Math.max(0,o))}function jje(){var r=Ije,e=Dje,n=Bje,i=Lje,s=Fje,a=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],l=250,c=PSe,u=E_("start","zoom","end"),h,d,f,p=500,g=150,v=0,x=10;function _(B){B.property("__zoom",KW).on("wheel.zoom",P,{passive:!1}).on("mousedown.zoom",R).on("dblclick.zoom",O).filter(s).on("touchstart.zoom",D).on("touchmove.zoom",F).on("touchend.zoom touchcancel.zoom",U).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}_.transform=function(B,W,j,$){var z=B.selection?B.selection():B;z.property("__zoom",KW),B!==z?M(B,W,j,$):z.interrupt().each(function(){C(this,arguments).event($).start().zoom(null,typeof W=="function"?W.apply(this,arguments):W).end()})},_.scaleBy=function(B,W,j,$){_.scaleTo(B,function(){var z=this.__zoom.k,Z=typeof W=="function"?W.apply(this,arguments):W;return z*Z},j,$)},_.scaleTo=function(B,W,j,$){_.transform(B,function(){var z=e.apply(this,arguments),Z=this.__zoom,se=j==null?T(z):typeof j=="function"?j.apply(this,arguments):j,q=Z.invert(se),ue=typeof W=="function"?W.apply(this,arguments):W;return n(S(E(Z,ue),se,q),z,o)},j,$)},_.translateBy=function(B,W,j,$){_.transform(B,function(){return n(this.__zoom.translate(typeof W=="function"?W.apply(this,arguments):W,typeof j=="function"?j.apply(this,arguments):j),e.apply(this,arguments),o)},null,$)},_.translateTo=function(B,W,j,$,z){_.transform(B,function(){var Z=e.apply(this,arguments),se=this.__zoom,q=$==null?T(Z):typeof $=="function"?$.apply(this,arguments):$;return n(iz.translate(q[0],q[1]).scale(se.k).translate(typeof W=="function"?-W.apply(this,arguments):-W,typeof j=="function"?-j.apply(this,arguments):-j),Z,o)},$,z)};function E(B,W){return W=Math.max(a[0],Math.min(a[1],W)),W===B.k?B:new eh(W,B.x,B.y)}function S(B,W,j){var $=W[0]-j[0]*B.k,z=W[1]-j[1]*B.k;return $===B.x&&z===B.y?B:new eh(B.k,$,z)}function T(B){return[(+B[0][0]+ +B[1][0])/2,(+B[0][1]+ +B[1][1])/2]}function M(B,W,j,$){B.on("start.zoom",function(){C(this,arguments).event($).start()}).on("interrupt.zoom end.zoom",function(){C(this,arguments).event($).end()}).tween("zoom",function(){var z=this,Z=arguments,se=C(z,Z).event($),q=e.apply(z,Z),ue=j==null?T(q):typeof j=="function"?j.apply(z,Z):j,be=Math.max(q[1][0]-q[0][0],q[1][1]-q[0][1]),ee=z.__zoom,le=typeof W=="function"?W.apply(z,Z):W,oe=c(ee.invert(ue).concat(be/ee.k),le.invert(ue).concat(be/le.k));return function(fe){if(fe===1)fe=le;else{var Se=oe(fe),we=be/Se[2];fe=new eh(we,ue[0]-Se[0]*we,ue[1]-Se[1]*we)}se.zoom(null,fe)}})}function C(B,W,j){return!j&&B.__zooming||new A(B,W)}function A(B,W){this.that=B,this.args=W,this.active=0,this.sourceEvent=null,this.extent=e.apply(B,W),this.taps=0}A.prototype={event:function(B){return B&&(this.sourceEvent=B),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(B,W){return this.mouse&&B!=="mouse"&&(this.mouse[1]=W.invert(this.mouse[0])),this.touch0&&B!=="touch"&&(this.touch0[1]=W.invert(this.touch0[0])),this.touch1&&B!=="touch"&&(this.touch1[1]=W.invert(this.touch1[0])),this.that.__zoom=W,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(B){var W=al(this.that).datum();u.call(B,this.that,new kje(B,{sourceEvent:this.sourceEvent,target:_,transform:this.that.__zoom,dispatch:u}),W)}};function P(B,...W){if(!r.apply(this,arguments))return;var j=C(this,W).event(B),$=this.__zoom,z=Math.max(a[0],Math.min(a[1],$.k*Math.pow(2,i.apply(this,arguments)))),Z=Ec(B);if(j.wheel)(j.mouse[0][0]!==Z[0]||j.mouse[0][1]!==Z[1])&&(j.mouse[1]=$.invert(j.mouse[0]=Z)),clearTimeout(j.wheel);else{if($.k===z)return;j.mouse=[Z,$.invert(Z)],ST(this),j.start()}Fv(B),j.wheel=setTimeout(se,g),j.zoom("mouse",n(S(E($,z),j.mouse[0],j.mouse[1]),j.extent,o));function se(){j.wheel=null,j.end()}}function R(B,...W){if(f||!r.apply(this,arguments))return;var j=B.currentTarget,$=C(this,W,!0).event(B),z=al(B.view).on("mousemove.zoom",ue,!0).on("mouseup.zoom",be,!0),Z=Ec(B,j),se=B.clientX,q=B.clientY;jie(B.view),jR(B),$.mouse=[Z,this.__zoom.invert(Z)],ST(this),$.start();function ue(ee){if(Fv(ee),!$.moved){var le=ee.clientX-se,oe=ee.clientY-q;$.moved=le*le+oe*oe>v}$.event(ee).zoom("mouse",n(S($.that.__zoom,$.mouse[0]=Ec(ee,j),$.mouse[1]),$.extent,o))}function be(ee){z.on("mousemove.zoom mouseup.zoom",null),Uie(ee.view,$.moved),Fv(ee),$.event(ee).end()}}function O(B,...W){if(r.apply(this,arguments)){var j=this.__zoom,$=Ec(B.changedTouches?B.changedTouches[0]:B,this),z=j.invert($),Z=j.k*(B.shiftKey?.5:2),se=n(S(E(j,Z),$,z),e.apply(this,W),o);Fv(B),l>0?al(this).transition().duration(l).call(M,se,$,B):al(this).call(_.transform,se,$,B)}}function D(B,...W){if(r.apply(this,arguments)){var j=B.touches,$=j.length,z=C(this,W,B.changedTouches.length===$).event(B),Z,se,q,ue;for(jR(B),se=0;se<$;++se)q=j[se],ue=Ec(q,this),ue=[ue,this.__zoom.invert(ue),q.identifier],z.touch0?!z.touch1&&z.touch0[2]!==ue[2]&&(z.touch1=ue,z.taps=0):(z.touch0=ue,Z=!0,z.taps=1+!!h);h&&(h=clearTimeout(h)),Z&&(z.taps<2&&(d=ue[0],h=setTimeout(function(){h=null},p)),ST(this),z.start())}}function F(B,...W){if(this.__zooming){var j=C(this,W).event(B),$=B.changedTouches,z=$.length,Z,se,q,ue;for(Fv(B),Z=0;Z<z;++Z)se=$[Z],q=Ec(se,this),j.touch0&&j.touch0[2]===se.identifier?j.touch0[0]=q:j.touch1&&j.touch1[2]===se.identifier&&(j.touch1[0]=q);if(se=j.that.__zoom,j.touch1){var be=j.touch0[0],ee=j.touch0[1],le=j.touch1[0],oe=j.touch1[1],fe=(fe=le[0]-be[0])*fe+(fe=le[1]-be[1])*fe,Se=(Se=oe[0]-ee[0])*Se+(Se=oe[1]-ee[1])*Se;se=E(se,Math.sqrt(fe/Se)),q=[(be[0]+le[0])/2,(be[1]+le[1])/2],ue=[(ee[0]+oe[0])/2,(ee[1]+oe[1])/2]}else if(j.touch0)q=j.touch0[0],ue=j.touch0[1];else return;j.zoom("touch",n(S(se,q,ue),j.extent,o))}}function U(B,...W){if(this.__zooming){var j=C(this,W).event(B),$=B.changedTouches,z=$.length,Z,se;for(jR(B),f&&clearTimeout(f),f=setTimeout(function(){f=null},p),Z=0;Z<z;++Z)se=$[Z],j.touch0&&j.touch0[2]===se.identifier?delete j.touch0:j.touch1&&j.touch1[2]===se.identifier&&delete j.touch1;if(j.touch1&&!j.touch0&&(j.touch0=j.touch1,delete j.touch1),j.touch0)j.touch0[1]=this.__zoom.invert(j.touch0[0]);else if(j.end(),j.taps===2&&(se=Ec(se,this),Math.hypot(d[0]-se[0],d[1]-se[1])<x)){var q=al(this).on("dblclick.zoom");q&&q.apply(this,arguments)}}}return _.wheelDelta=function(B){return arguments.length?(i=typeof B=="function"?B:BS(+B),_):i},_.filter=function(B){return arguments.length?(r=typeof B=="function"?B:BS(!!B),_):r},_.touchable=function(B){return arguments.length?(s=typeof B=="function"?B:BS(!!B),_):s},_.extent=function(B){return arguments.length?(e=typeof B=="function"?B:BS([[+B[0][0],+B[0][1]],[+B[1][0],+B[1][1]]]),_):e},_.scaleExtent=function(B){return arguments.length?(a[0]=+B[0],a[1]=+B[1],_):[a[0],a[1]]},_.translateExtent=function(B){return arguments.length?(o[0][0]=+B[0][0],o[1][0]=+B[1][0],o[0][1]=+B[0][1],o[1][1]=+B[1][1],_):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},_.constrain=function(B){return arguments.length?(n=B,_):n},_.duration=function(B){return arguments.length?(l=+B,_):l},_.interpolate=function(B){return arguments.length?(c=B,_):c},_.on=function(){var B=u.on.apply(u,arguments);return B===u?_:B},_.clickDistance=function(B){return arguments.length?(v=(B=+B)*B,_):Math.sqrt(v)},_.tapDistance=function(B){return arguments.length?(x=+B,_):x},_}var Uje=typeof global=="object"&&global&&global.Object===Object&&global,zje=typeof self=="object"&&self&&self.Object===Object&&self,Hie=Uje||zje||Function("return this")(),pE=Hie.Symbol,Wie=Object.prototype,$je=Wie.hasOwnProperty,Gje=Wie.toString,Bv=pE?pE.toStringTag:void 0;function Vje(r){var e=$je.call(r,Bv),n=r[Bv];try{r[Bv]=void 0;var i=!0}catch{}var s=Gje.call(r);return i&&(e?r[Bv]=n:delete r[Bv]),s}var Hje=Object.prototype,Wje=Hje.toString;function qje(r){return Wje.call(r)}var Xje="[object Null]",Kje="[object Undefined]",YW=pE?pE.toStringTag:void 0;function Yje(r){return r==null?r===void 0?Kje:Xje:YW&&YW in Object(r)?Vje(r):qje(r)}function Zje(r){return r!=null&&typeof r=="object"}var Qje="[object Symbol]";function Jje(r){return typeof r=="symbol"||Zje(r)&&Yje(r)==Qje}var eUe=/\s/;function tUe(r){for(var e=r.length;e--&&eUe.test(r.charAt(e)););return e}var nUe=/^\s+/;function rUe(r){return r&&r.slice(0,tUe(r)+1).replace(nUe,"")}function mE(r){var e=typeof r;return r!=null&&(e=="object"||e=="function")}var ZW=NaN,iUe=/^[-+]0x[0-9a-f]+$/i,sUe=/^0b[01]+$/i,aUe=/^0o[0-7]+$/i,oUe=parseInt;function QW(r){if(typeof r=="number")return r;if(Jje(r))return ZW;if(mE(r)){var e=typeof r.valueOf=="function"?r.valueOf():r;r=mE(e)?e+"":e}if(typeof r!="string")return r===0?r:+r;r=rUe(r);var n=sUe.test(r);return n||aUe.test(r)?oUe(r.slice(2),n?2:8):iUe.test(r)?ZW:+r}var UR=function(){return Hie.Date.now()},lUe="Expected a function",cUe=Math.max,uUe=Math.min;function hUe(r,e,n){var i,s,a,o,l,c,u=0,h=!1,d=!1,f=!0;if(typeof r!="function")throw new TypeError(lUe);e=QW(e)||0,mE(n)&&(h=!!n.leading,d="maxWait"in n,a=d?cUe(QW(n.maxWait)||0,e):a,f="trailing"in n?!!n.trailing:f);function p(C){var A=i,P=s;return i=s=void 0,u=C,o=r.apply(P,A),o}function g(C){return u=C,l=setTimeout(_,e),h?p(C):o}function v(C){var A=C-c,P=C-u,R=e-A;return d?uUe(R,a-P):R}function x(C){var A=C-c,P=C-u;return c===void 0||A>=e||A<0||d&&P>=a}function _(){var C=UR();if(x(C))return E(C);l=setTimeout(_,v(C))}function E(C){return l=void 0,f&&i?p(C):(i=s=void 0,o)}function S(){l!==void 0&&clearTimeout(l),u=0,i=c=s=l=void 0}function T(){return l===void 0?o:E(UR())}function M(){var C=UR(),A=x(C);if(i=arguments,s=this,c=C,A){if(l===void 0)return g(c);if(d)return clearTimeout(l),l=setTimeout(_,e),p(c)}return l===void 0&&(l=setTimeout(_,e)),o}return M.cancel=S,M.flush=T,M}var dUe="Expected a function";function fUe(r,e,n){var i=!0,s=!0;if(typeof r!="function")throw new TypeError(dUe);return mE(n)&&(i="leading"in n?!!n.leading:i,s="trailing"in n?!!n.trailing:s),hUe(r,e,{leading:i,maxWait:e,trailing:s})}function cF(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,i=Array(e);n<e;n++)i[n]=r[n];return i}function pUe(r){if(Array.isArray(r))return cF(r)}function qie(r,e,n){if(typeof r=="function"?r===e:r.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}function mUe(r,e){if(e.has(r))throw new TypeError("Cannot initialize the same private elements twice on an object")}function gUe(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function Yo(r,e){return r.get(qie(r,e))}function JW(r,e,n){mUe(r,e),e.set(r,n)}function e9(r,e,n){return r.set(qie(r,e),n),n}function yUe(r,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(r,SUe(i.key),i)}}function vUe(r,e,n){return e&&yUe(r.prototype,e),Object.defineProperty(r,"prototype",{writable:!1}),r}function xUe(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function bUe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _Ue(r){return pUe(r)||xUe(r)||TUe(r)||bUe()}function wUe(r,e){if(typeof r!="object"||!r)return r;var n=r[Symbol.toPrimitive];if(n!==void 0){var i=n.call(r,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(r)}function SUe(r){var e=wUe(r,"string");return typeof e=="symbol"?e:e+""}function TUe(r,e){if(r){if(typeof r=="string")return cF(r,e);var n={}.toString.call(r).slice(8,-1);return n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set"?Array.from(r):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?cF(r,e):void 0}}var EUe=123,MUe=function(e){return"#".concat(Math.min(e,Math.pow(2,24)).toString(16).padStart(6,"0"))},Xie=function(e,n,i){return(e<<16)+(n<<8)+i},AUe=function(e){var n=cn(e).toRgb(),i=n.r,s=n.g,a=n.b;return Xie(i,s,a)},t9=function(e,n){return e*EUe%Math.pow(2,n)},zf=new WeakMap,Fu=new WeakMap,CUe=function(){function r(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:6;gUe(this,r),JW(this,zf,void 0),JW(this,Fu,void 0),e9(Fu,this,e),this.reset()}return vUe(r,[{key:"reset",value:function(){e9(zf,this,["__reserved for background__"])}},{key:"register",value:function(n){if(Yo(zf,this).length>=Math.pow(2,24-Yo(Fu,this)))return null;var i=Yo(zf,this).length,s=t9(i,Yo(Fu,this)),a=MUe(i+(s<<24-Yo(Fu,this)));return Yo(zf,this).push(n),a}},{key:"lookup",value:function(n){if(!n)return null;var i=typeof n=="string"?AUe(n):Xie.apply(void 0,_Ue(n));if(!i)return null;var s=i&Math.pow(2,24-Yo(Fu,this))-1,a=i>>24-Yo(Fu,this)&Math.pow(2,Yo(Fu,this))-1;return t9(s,Yo(Fu,this))!==a||s>=Yo(zf,this).length?null:Yo(zf,this)[s]}}])}();const{abs:jv,cos:Bu,sin:hg,acos:NUe,atan2:Uv,sqrt:pd,pow:Jo}=Math;function zv(r){return r<0?-Jo(-r,1/3):Jo(r,1/3)}const Kie=Math.PI,jS=2*Kie,md=Kie/2,PUe=1e-6,zR=Number.MAX_SAFE_INTEGER||9007199254740991,$R=Number.MIN_SAFE_INTEGER||-9007199254740991,RUe={x:0,y:0,z:0},gt={Tvalues:[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213],Cvalues:[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872],arcfn:function(r,e){const n=e(r);let i=n.x*n.x+n.y*n.y;return typeof n.z<"u"&&(i+=n.z*n.z),pd(i)},compute:function(r,e,n){if(r===0)return e[0].t=0,e[0];const i=e.length-1;if(r===1)return e[i].t=1,e[i];const s=1-r;let a=e;if(i===0)return e[0].t=r,e[0];if(i===1){const l={x:s*a[0].x+r*a[1].x,y:s*a[0].y+r*a[1].y,t:r};return n&&(l.z=s*a[0].z+r*a[1].z),l}if(i<4){let l=s*s,c=r*r,u,h,d,f=0;i===2?(a=[a[0],a[1],a[2],RUe],u=l,h=s*r*2,d=c):i===3&&(u=l*s,h=l*r*3,d=s*c*3,f=r*c);const p={x:u*a[0].x+h*a[1].x+d*a[2].x+f*a[3].x,y:u*a[0].y+h*a[1].y+d*a[2].y+f*a[3].y,t:r};return n&&(p.z=u*a[0].z+h*a[1].z+d*a[2].z+f*a[3].z),p}const o=JSON.parse(JSON.stringify(e));for(;o.length>1;){for(let l=0;l<o.length-1;l++)o[l]={x:o[l].x+(o[l+1].x-o[l].x)*r,y:o[l].y+(o[l+1].y-o[l].y)*r},typeof o[l].z<"u"&&(o[l].z=o[l].z+(o[l+1].z-o[l].z)*r);o.splice(o.length-1,1)}return o[0].t=r,o[0]},computeWithRatios:function(r,e,n,i){const s=1-r,a=n,o=e;let l=a[0],c=a[1],u=a[2],h=a[3],d;if(l*=s,c*=r,o.length===2)return d=l+c,{x:(l*o[0].x+c*o[1].x)/d,y:(l*o[0].y+c*o[1].y)/d,z:i?(l*o[0].z+c*o[1].z)/d:!1,t:r};if(l*=s,c*=2*s,u*=r*r,o.length===3)return d=l+c+u,{x:(l*o[0].x+c*o[1].x+u*o[2].x)/d,y:(l*o[0].y+c*o[1].y+u*o[2].y)/d,z:i?(l*o[0].z+c*o[1].z+u*o[2].z)/d:!1,t:r};if(l*=s,c*=1.5*s,u*=3*s,h*=r*r*r,o.length===4)return d=l+c+u+h,{x:(l*o[0].x+c*o[1].x+u*o[2].x+h*o[3].x)/d,y:(l*o[0].y+c*o[1].y+u*o[2].y+h*o[3].y)/d,z:i?(l*o[0].z+c*o[1].z+u*o[2].z+h*o[3].z)/d:!1,t:r}},derive:function(r,e){const n=[];for(let i=r,s=i.length,a=s-1;s>1;s--,a--){const o=[];for(let l=0,c;l<a;l++)c={x:a*(i[l+1].x-i[l].x),y:a*(i[l+1].y-i[l].y)},e&&(c.z=a*(i[l+1].z-i[l].z)),o.push(c);n.push(o),i=o}return n},between:function(r,e,n){return e<=r&&r<=n||gt.approximately(r,e)||gt.approximately(r,n)},approximately:function(r,e,n){return jv(r-e)<=(n||PUe)},length:function(r){const n=gt.Tvalues.length;let i=0;for(let s=0,a;s<n;s++)a=.5*gt.Tvalues[s]+.5,i+=gt.Cvalues[s]*gt.arcfn(a,r);return .5*i},map:function(r,e,n,i,s){const a=n-e,o=s-i,l=r-e,c=l/a;return i+o*c},lerp:function(r,e,n){const i={x:e.x+r*(n.x-e.x),y:e.y+r*(n.y-e.y)};return e.z!==void 0&&n.z!==void 0&&(i.z=e.z+r*(n.z-e.z)),i},pointToString:function(r){let e=r.x+"/"+r.y;return typeof r.z<"u"&&(e+="/"+r.z),e},pointsToString:function(r){return"["+r.map(gt.pointToString).join(", ")+"]"},copy:function(r){return JSON.parse(JSON.stringify(r))},angle:function(r,e,n){const i=e.x-r.x,s=e.y-r.y,a=n.x-r.x,o=n.y-r.y,l=i*o-s*a,c=i*a+s*o;return Uv(l,c)},round:function(r,e){const n=""+r,i=n.indexOf(".");return parseFloat(n.substring(0,i+1+e))},dist:function(r,e){const n=r.x-e.x,i=r.y-e.y;return pd(n*n+i*i)},closest:function(r,e){let n=Jo(2,63),i,s;return r.forEach(function(a,o){s=gt.dist(e,a),s<n&&(n=s,i=o)}),{mdist:n,mpos:i}},abcratio:function(r,e){if(e!==2&&e!==3)return!1;if(typeof r>"u")r=.5;else if(r===0||r===1)return r;const n=Jo(r,e)+Jo(1-r,e),i=n-1;return jv(i/n)},projectionratio:function(r,e){if(e!==2&&e!==3)return!1;if(typeof r>"u")r=.5;else if(r===0||r===1)return r;const n=Jo(1-r,e),i=Jo(r,e)+n;return n/i},lli8:function(r,e,n,i,s,a,o,l){const c=(r*i-e*n)*(s-o)-(r-n)*(s*l-a*o),u=(r*i-e*n)*(a-l)-(e-i)*(s*l-a*o),h=(r-n)*(a-l)-(e-i)*(s-o);return h==0?!1:{x:c/h,y:u/h}},lli4:function(r,e,n,i){const s=r.x,a=r.y,o=e.x,l=e.y,c=n.x,u=n.y,h=i.x,d=i.y;return gt.lli8(s,a,o,l,c,u,h,d)},lli:function(r,e){return gt.lli4(r,r.c,e,e.c)},makeline:function(r,e){return new ri(r.x,r.y,(r.x+e.x)/2,(r.y+e.y)/2,e.x,e.y)},findbbox:function(r){let e=zR,n=zR,i=$R,s=$R;return r.forEach(function(a){const o=a.bbox();e>o.x.min&&(e=o.x.min),n>o.y.min&&(n=o.y.min),i<o.x.max&&(i=o.x.max),s<o.y.max&&(s=o.y.max)}),{x:{min:e,mid:(e+i)/2,max:i,size:i-e},y:{min:n,mid:(n+s)/2,max:s,size:s-n}}},shapeintersections:function(r,e,n,i,s){if(!gt.bboxoverlap(e,i))return[];const a=[],o=[r.startcap,r.forward,r.back,r.endcap],l=[n.startcap,n.forward,n.back,n.endcap];return o.forEach(function(c){c.virtual||l.forEach(function(u){if(u.virtual)return;const h=c.intersects(u,s);h.length>0&&(h.c1=c,h.c2=u,h.s1=r,h.s2=n,a.push(h))})}),a},makeshape:function(r,e,n){const i=e.points.length,s=r.points.length,a=gt.makeline(e.points[i-1],r.points[0]),o=gt.makeline(r.points[s-1],e.points[0]),l={startcap:a,forward:r,back:e,endcap:o,bbox:gt.findbbox([a,r,e,o])};return l.intersections=function(c){return gt.shapeintersections(l,l.bbox,c,c.bbox,n)},l},getminmax:function(r,e,n){if(!n)return{min:0,max:0};let i=zR,s=$R,a,o;n.indexOf(0)===-1&&(n=[0].concat(n)),n.indexOf(1)===-1&&n.push(1);for(let l=0,c=n.length;l<c;l++)a=n[l],o=r.get(a),o[e]<i&&(i=o[e]),o[e]>s&&(s=o[e]);return{min:i,mid:(i+s)/2,max:s,size:s-i}},align:function(r,e){const n=e.p1.x,i=e.p1.y,s=-Uv(e.p2.y-i,e.p2.x-n),a=function(o){return{x:(o.x-n)*Bu(s)-(o.y-i)*hg(s),y:(o.x-n)*hg(s)+(o.y-i)*Bu(s)}};return r.map(a)},roots:function(r,e){e=e||{p1:{x:0,y:0},p2:{x:1,y:0}};const n=r.length-1,i=gt.align(r,e),s=function(A){return 0<=A&&A<=1};if(n===2){const A=i[0].y,P=i[1].y,R=i[2].y,O=A-2*P+R;if(O!==0){const D=-pd(P*P-A*R),F=-A+P,U=-(D+F)/O,B=-(-D+F)/O;return[U,B].filter(s)}else if(P!==R&&O===0)return[(2*P-R)/(2*P-2*R)].filter(s);return[]}const a=i[0].y,o=i[1].y,l=i[2].y,c=i[3].y;let u=-a+3*o-3*l+c,h=3*a-6*o+3*l,d=-3*a+3*o,f=a;if(gt.approximately(u,0)){if(gt.approximately(h,0))return gt.approximately(d,0)?[]:[-f/d].filter(s);const A=pd(d*d-4*h*f),P=2*h;return[(A-d)/P,(-d-A)/P].filter(s)}h/=u,d/=u,f/=u;const p=(3*d-h*h)/3,g=p/3,v=(2*h*h*h-9*h*d+27*f)/27,x=v/2,_=x*x+g*g*g;let E,S,T,M,C;if(_<0){const A=-p/3,P=A*A*A,R=pd(P),O=-v/(2*R),D=O<-1?-1:O>1?1:O,F=NUe(D),U=zv(R),B=2*U;return T=B*Bu(F/3)-h/3,M=B*Bu((F+jS)/3)-h/3,C=B*Bu((F+2*jS)/3)-h/3,[T,M,C].filter(s)}else{if(_===0)return E=x<0?zv(-x):-zv(x),T=2*E-h/3,M=-E-h/3,[T,M].filter(s);{const A=pd(_);return E=zv(-x+A),S=zv(x+A),[E-S-h/3].filter(s)}}},droots:function(r){if(r.length===3){const e=r[0],n=r[1],i=r[2],s=e-2*n+i;if(s!==0){const a=-pd(n*n-e*i),o=-e+n,l=-(a+o)/s,c=-(-a+o)/s;return[l,c]}else if(n!==i&&s===0)return[(2*n-i)/(2*(n-i))];return[]}if(r.length===2){const e=r[0],n=r[1];return e!==n?[e/(e-n)]:[]}return[]},curvature:function(r,e,n,i,s){let a,o,l,c,u=0,h=0;const d=gt.compute(r,e),f=gt.compute(r,n),p=d.x*d.x+d.y*d.y;if(i?(a=pd(Jo(d.y*f.z-f.y*d.z,2)+Jo(d.z*f.x-f.z*d.x,2)+Jo(d.x*f.y-f.x*d.y,2)),o=Jo(p+d.z*d.z,3/2)):(a=d.x*f.y-d.y*f.x,o=Jo(p,3/2)),a===0||o===0)return{k:0,r:0};if(u=a/o,h=o/a,!s){const g=gt.curvature(r-.001,e,n,i,!0).k,v=gt.curvature(r+.001,e,n,i,!0).k;c=(v-u+(u-g))/2,l=(jv(v-u)+jv(u-g))/2}return{k:u,r:h,dk:c,adk:l}},inflections:function(r){if(r.length<4)return[];const e=gt.align(r,{p1:r[0],p2:r.slice(-1)[0]}),n=e[2].x*e[1].y,i=e[3].x*e[1].y,s=e[1].x*e[2].y,a=e[3].x*e[2].y,o=18*(-3*n+2*i+3*s-a),l=18*(3*n-i-3*s),c=18*(s-n);if(gt.approximately(o,0)){if(!gt.approximately(l,0)){let f=-c/l;if(0<=f&&f<=1)return[f]}return[]}const u=2*o;if(gt.approximately(u,0))return[];const h=l*l-4*o*c;if(h<0)return[];const d=Math.sqrt(h);return[(d-l)/u,-(l+d)/u].filter(function(f){return 0<=f&&f<=1})},bboxoverlap:function(r,e){const n=["x","y"],i=n.length;for(let s=0,a,o,l,c;s<i;s++)if(a=n[s],o=r[a].mid,l=e[a].mid,c=(r[a].size+e[a].size)/2,jv(o-l)>=c)return!1;return!0},expandbox:function(r,e){e.x.min<r.x.min&&(r.x.min=e.x.min),e.y.min<r.y.min&&(r.y.min=e.y.min),e.z&&e.z.min<r.z.min&&(r.z.min=e.z.min),e.x.max>r.x.max&&(r.x.max=e.x.max),e.y.max>r.y.max&&(r.y.max=e.y.max),e.z&&e.z.max>r.z.max&&(r.z.max=e.z.max),r.x.mid=(r.x.min+r.x.max)/2,r.y.mid=(r.y.min+r.y.max)/2,r.z&&(r.z.mid=(r.z.min+r.z.max)/2),r.x.size=r.x.max-r.x.min,r.y.size=r.y.max-r.y.min,r.z&&(r.z.size=r.z.max-r.z.min)},pairiteration:function(r,e,n){const i=r.bbox(),s=e.bbox(),a=1e5,o=n||.5;if(i.x.size+i.y.size<o&&s.x.size+s.y.size<o)return[(a*(r._t1+r._t2)/2|0)/a+"/"+(a*(e._t1+e._t2)/2|0)/a];let l=r.split(.5),c=e.split(.5),u=[{left:l.left,right:c.left},{left:l.left,right:c.right},{left:l.right,right:c.right},{left:l.right,right:c.left}];u=u.filter(function(d){return gt.bboxoverlap(d.left.bbox(),d.right.bbox())});let h=[];return u.length===0||(u.forEach(function(d){h=h.concat(gt.pairiteration(d.left,d.right,o))}),h=h.filter(function(d,f){return h.indexOf(d)===f})),h},getccenter:function(r,e,n){const i=e.x-r.x,s=e.y-r.y,a=n.x-e.x,o=n.y-e.y,l=i*Bu(md)-s*hg(md),c=i*hg(md)+s*Bu(md),u=a*Bu(md)-o*hg(md),h=a*hg(md)+o*Bu(md),d=(r.x+e.x)/2,f=(r.y+e.y)/2,p=(e.x+n.x)/2,g=(e.y+n.y)/2,v=d+l,x=f+c,_=p+u,E=g+h,S=gt.lli8(d,f,v,x,p,g,_,E),T=gt.dist(S,r);let M=Uv(r.y-S.y,r.x-S.x),C=Uv(e.y-S.y,e.x-S.x),A=Uv(n.y-S.y,n.x-S.x),P;return M<A?((M>C||C>A)&&(M+=jS),M>A&&(P=A,A=M,M=P)):A<C&&C<M?(P=A,A=M,M=P):A+=jS,S.s=M,S.e=A,S.r=T,S},numberSort:function(r,e){return r-e}};class Ax{constructor(e){this.curves=[],this._3d=!1,e&&(this.curves=e,this._3d=this.curves[0]._3d)}valueOf(){return this.toString()}toString(){return"["+this.curves.map(function(e){return gt.pointsToString(e.points)}).join(", ")+"]"}addCurve(e){this.curves.push(e),this._3d=this._3d||e._3d}length(){return this.curves.map(function(e){return e.length()}).reduce(function(e,n){return e+n})}curve(e){return this.curves[e]}bbox(){const e=this.curves;for(var n=e[0].bbox(),i=1;i<e.length;i++)gt.expandbox(n,e[i].bbox());return n}offset(e){const n=[];return this.curves.forEach(function(i){n.push(...i.offset(e))}),new Ax(n)}}const{abs:$v,min:n9,max:r9,cos:OUe,sin:kUe,acos:IUe,sqrt:Gv}=Math,DUe=Math.PI;class ri{constructor(e){let n=e&&e.forEach?e:Array.from(arguments).slice(),i=!1;if(typeof n[0]=="object"){i=n.length;const p=[];n.forEach(function(g){["x","y","z"].forEach(function(v){typeof g[v]<"u"&&p.push(g[v])})}),n=p}let s=!1;const a=n.length;if(i){if(i>4){if(arguments.length!==1)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");s=!0}}else if(a!==6&&a!==8&&a!==9&&a!==12&&arguments.length!==1)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");const o=this._3d=!s&&(a===9||a===12)||e&&e[0]&&typeof e[0].z<"u",l=this.points=[];for(let p=0,g=o?3:2;p<a;p+=g){var c={x:n[p],y:n[p+1]};o&&(c.z=n[p+2]),l.push(c)}const u=this.order=l.length-1,h=this.dims=["x","y"];o&&h.push("z"),this.dimlen=h.length;const d=gt.align(l,{p1:l[0],p2:l[u]}),f=gt.dist(l[0],l[u]);this._linear=d.reduce((p,g)=>p+$v(g.y),0)<f/50,this._lut=[],this._t1=0,this._t2=1,this.update()}static quadraticFromPoints(e,n,i,s){if(typeof s>"u"&&(s=.5),s===0)return new ri(n,n,i);if(s===1)return new ri(e,n,n);const a=ri.getABC(2,e,n,i,s);return new ri(e,a.A,i)}static cubicFromPoints(e,n,i,s,a){typeof s>"u"&&(s=.5);const o=ri.getABC(3,e,n,i,s);typeof a>"u"&&(a=gt.dist(n,o.C));const l=a*(1-s)/s,c=gt.dist(e,i),u=(i.x-e.x)/c,h=(i.y-e.y)/c,d=a*u,f=a*h,p=l*u,g=l*h,v={x:n.x-d,y:n.y-f},x={x:n.x+p,y:n.y+g},_=o.A,E={x:_.x+(v.x-_.x)/(1-s),y:_.y+(v.y-_.y)/(1-s)},S={x:_.x+(x.x-_.x)/s,y:_.y+(x.y-_.y)/s},T={x:e.x+(E.x-e.x)/s,y:e.y+(E.y-e.y)/s},M={x:i.x+(S.x-i.x)/(1-s),y:i.y+(S.y-i.y)/(1-s)};return new ri(e,T,M,i)}static getUtils(){return gt}getUtils(){return ri.getUtils()}static get PolyBezier(){return Ax}valueOf(){return this.toString()}toString(){return gt.pointsToString(this.points)}toSVG(){if(this._3d)return!1;const e=this.points,n=e[0].x,i=e[0].y,s=["M",n,i,this.order===2?"Q":"C"];for(let a=1,o=e.length;a<o;a++)s.push(e[a].x),s.push(e[a].y);return s.join(" ")}setRatios(e){if(e.length!==this.points.length)throw new Error("incorrect number of ratio values");this.ratios=e,this._lut=[]}verify(){const e=this.coordDigest();e!==this._print&&(this._print=e,this.update())}coordDigest(){return this.points.map(function(e,n){return""+n+e.x+e.y+(e.z?e.z:0)}).join("")}update(){this._lut=[],this.dpoints=gt.derive(this.points,this._3d),this.computedirection()}computedirection(){const e=this.points,n=gt.angle(e[0],e[this.order],e[1]);this.clockwise=n>0}length(){return gt.length(this.derivative.bind(this))}static getABC(e=2,n,i,s,a=.5){const o=gt.projectionratio(a,e),l=1-o,c={x:o*n.x+l*s.x,y:o*n.y+l*s.y},u=gt.abcratio(a,e);return{A:{x:i.x+(i.x-c.x)/u,y:i.y+(i.y-c.y)/u},B:i,C:c,S:n,E:s}}getABC(e,n){n=n||this.get(e);let i=this.points[0],s=this.points[this.order];return ri.getABC(this.order,i,n,s,e)}getLUT(e){if(this.verify(),e=e||100,this._lut.length===e+1)return this._lut;this._lut=[],e++,this._lut=[];for(let n=0,i,s;n<e;n++)s=n/(e-1),i=this.compute(s),i.t=s,this._lut.push(i);return this._lut}on(e,n){n=n||5;const i=this.getLUT(),s=[];for(let a=0,o,l=0;a<i.length;a++)o=i[a],gt.dist(o,e)<n&&(s.push(o),l+=a/i.length);return s.length?t/=s.length:!1}project(e){const n=this.getLUT(),i=n.length-1,s=gt.closest(n,e),a=s.mpos,o=(a-1)/i,l=(a+1)/i,c=.1/i;let u=s.mdist,h=o,d=h,f;u+=1;for(let p;h<l+c;h+=c)f=this.compute(h),p=gt.dist(e,f),p<u&&(u=p,d=h);return d=d<0?0:d>1?1:d,f=this.compute(d),f.t=d,f.d=u,f}get(e){return this.compute(e)}point(e){return this.points[e]}compute(e){return this.ratios?gt.computeWithRatios(e,this.points,this.ratios,this._3d):gt.compute(e,this.points,this._3d,this.ratios)}raise(){const e=this.points,n=[e[0]],i=e.length;for(let s=1,a,o;s<i;s++)a=e[s],o=e[s-1],n[s]={x:(i-s)/i*a.x+s/i*o.x,y:(i-s)/i*a.y+s/i*o.y};return n[i]=e[i-1],new ri(n)}derivative(e){return gt.compute(e,this.dpoints[0],this._3d)}dderivative(e){return gt.compute(e,this.dpoints[1],this._3d)}align(){let e=this.points;return new ri(gt.align(e,{p1:e[0],p2:e[e.length-1]}))}curvature(e){return gt.curvature(e,this.dpoints[0],this.dpoints[1],this._3d)}inflections(){return gt.inflections(this.points)}normal(e){return this._3d?this.__normal3(e):this.__normal2(e)}__normal2(e){const n=this.derivative(e),i=Gv(n.x*n.x+n.y*n.y);return{t:e,x:-n.y/i,y:n.x/i}}__normal3(e){const n=this.derivative(e),i=this.derivative(e+.01),s=Gv(n.x*n.x+n.y*n.y+n.z*n.z),a=Gv(i.x*i.x+i.y*i.y+i.z*i.z);n.x/=s,n.y/=s,n.z/=s,i.x/=a,i.y/=a,i.z/=a;const o={x:i.y*n.z-i.z*n.y,y:i.z*n.x-i.x*n.z,z:i.x*n.y-i.y*n.x},l=Gv(o.x*o.x+o.y*o.y+o.z*o.z);o.x/=l,o.y/=l,o.z/=l;const c=[o.x*o.x,o.x*o.y-o.z,o.x*o.z+o.y,o.x*o.y+o.z,o.y*o.y,o.y*o.z-o.x,o.x*o.z-o.y,o.y*o.z+o.x,o.z*o.z];return{t:e,x:c[0]*n.x+c[1]*n.y+c[2]*n.z,y:c[3]*n.x+c[4]*n.y+c[5]*n.z,z:c[6]*n.x+c[7]*n.y+c[8]*n.z}}hull(e){let n=this.points,i=[],s=[],a=0;for(s[a++]=n[0],s[a++]=n[1],s[a++]=n[2],this.order===3&&(s[a++]=n[3]);n.length>1;){i=[];for(let o=0,l,c=n.length-1;o<c;o++)l=gt.lerp(e,n[o],n[o+1]),s[a++]=l,i.push(l);n=i}return s}split(e,n){if(e===0&&n)return this.split(n).left;if(n===1)return this.split(e).right;const i=this.hull(e),s={left:this.order===2?new ri([i[0],i[3],i[5]]):new ri([i[0],i[4],i[7],i[9]]),right:this.order===2?new ri([i[5],i[4],i[2]]):new ri([i[9],i[8],i[6],i[3]]),span:i};return s.left._t1=gt.map(0,0,1,this._t1,this._t2),s.left._t2=gt.map(e,0,1,this._t1,this._t2),s.right._t1=gt.map(e,0,1,this._t1,this._t2),s.right._t2=gt.map(1,0,1,this._t1,this._t2),n?(n=gt.map(n,e,1,0,1),s.right.split(n).left):s}extrema(){const e={};let n=[];return this.dims.forEach((function(i){let s=function(o){return o[i]},a=this.dpoints[0].map(s);e[i]=gt.droots(a),this.order===3&&(a=this.dpoints[1].map(s),e[i]=e[i].concat(gt.droots(a))),e[i]=e[i].filter(function(o){return o>=0&&o<=1}),n=n.concat(e[i].sort(gt.numberSort))}).bind(this)),e.values=n.sort(gt.numberSort).filter(function(i,s){return n.indexOf(i)===s}),e}bbox(){const e=this.extrema(),n={};return this.dims.forEach((function(i){n[i]=gt.getminmax(this,i,e[i])}).bind(this)),n}overlaps(e){const n=this.bbox(),i=e.bbox();return gt.bboxoverlap(n,i)}offset(e,n){if(typeof n<"u"){const i=this.get(e),s=this.normal(e),a={c:i,n:s,x:i.x+s.x*n,y:i.y+s.y*n};return this._3d&&(a.z=i.z+s.z*n),a}if(this._linear){const i=this.normal(0),s=this.points.map(function(a){const o={x:a.x+e*i.x,y:a.y+e*i.y};return a.z&&i.z&&(o.z=a.z+e*i.z),o});return[new ri(s)]}return this.reduce().map(function(i){return i._linear?i.offset(e)[0]:i.scale(e)})}simple(){if(this.order===3){const s=gt.angle(this.points[0],this.points[3],this.points[1]),a=gt.angle(this.points[0],this.points[3],this.points[2]);if(s>0&&a<0||s<0&&a>0)return!1}const e=this.normal(0),n=this.normal(1);let i=e.x*n.x+e.y*n.y;return this._3d&&(i+=e.z*n.z),$v(IUe(i))<DUe/3}reduce(){let e,n=0,i=0,s=.01,a,o=[],l=[],c=this.extrema().values;for(c.indexOf(0)===-1&&(c=[0].concat(c)),c.indexOf(1)===-1&&c.push(1),n=c[0],e=1;e<c.length;e++)i=c[e],a=this.split(n,i),a._t1=n,a._t2=i,o.push(a),n=i;return o.forEach(function(u){for(n=0,i=0;i<=1;)for(i=n+s;i<=1+s;i+=s)if(a=u.split(n,i),!a.simple()){if(i-=s,$v(n-i)<s)return[];a=u.split(n,i),a._t1=gt.map(n,0,1,u._t1,u._t2),a._t2=gt.map(i,0,1,u._t1,u._t2),l.push(a),n=i;break}n<1&&(a=u.split(n,1),a._t1=gt.map(n,0,1,u._t1,u._t2),a._t2=u._t2,l.push(a))}),l}translate(e,n,i){i=typeof i=="number"?i:n;const s=this.order;let a=this.points.map((o,l)=>(1-l/s)*n+l/s*i);return new ri(this.points.map((o,l)=>({x:o.x+e.x*a[l],y:o.y+e.y*a[l]})))}scale(e){const n=this.order;let i=!1;if(typeof e=="function"&&(i=e),i&&n===2)return this.raise().scale(i);const s=this.clockwise,a=this.points;if(this._linear)return this.translate(this.normal(0),i?i(0):e,i?i(1):e);const o=i?i(0):e,l=i?i(1):e,c=[this.offset(0,10),this.offset(1,10)],u=[],h=gt.lli4(c[0],c[0].c,c[1],c[1].c);if(!h)throw new Error("cannot scale this curve. Try reducing it first.");return[0,1].forEach(function(d){const f=u[d*n]=gt.copy(a[d*n]);f.x+=(d?l:o)*c[d].n.x,f.y+=(d?l:o)*c[d].n.y}),i?([0,1].forEach(function(d){if(!(n===2&&d)){var f=a[d+1],p={x:f.x-h.x,y:f.y-h.y},g=i?i((d+1)/n):e;i&&!s&&(g=-g);var v=Gv(p.x*p.x+p.y*p.y);p.x/=v,p.y/=v,u[d+1]={x:f.x+g*p.x,y:f.y+g*p.y}}}),new ri(u)):([0,1].forEach(d=>{if(n===2&&d)return;const f=u[d*n],p=this.derivative(d),g={x:f.x+p.x,y:f.y+p.y};u[d+1]=gt.lli4(f,g,h,a[d+1])}),new ri(u))}outline(e,n,i,s){if(n=n===void 0?e:n,this._linear){const M=this.normal(0),C=this.points[0],A=this.points[this.points.length-1];let P,R,O;i===void 0&&(i=e,s=n),P={x:C.x+M.x*e,y:C.y+M.y*e},O={x:A.x+M.x*i,y:A.y+M.y*i},R={x:(P.x+O.x)/2,y:(P.y+O.y)/2};const D=[P,R,O];P={x:C.x-M.x*n,y:C.y-M.y*n},O={x:A.x-M.x*s,y:A.y-M.y*s},R={x:(P.x+O.x)/2,y:(P.y+O.y)/2};const F=[O,R,P],U=gt.makeline(F[2],D[0]),B=gt.makeline(D[2],F[0]),W=[U,new ri(D),B,new ri(F)];return new Ax(W)}const a=this.reduce(),o=a.length,l=[];let c=[],u,h=0,d=this.length();const f=typeof i<"u"&&typeof s<"u";function p(M,C,A,P,R){return function(O){const D=P/A,F=(P+R)/A,U=C-M;return gt.map(O,0,1,M+D*U,M+F*U)}}a.forEach(function(M){const C=M.length();f?(l.push(M.scale(p(e,i,d,h,C))),c.push(M.scale(p(-n,-s,d,h,C)))):(l.push(M.scale(e)),c.push(M.scale(-n))),h+=C}),c=c.map(function(M){return u=M.points,u[3]?M.points=[u[3],u[2],u[1],u[0]]:M.points=[u[2],u[1],u[0]],M}).reverse();const g=l[0].points[0],v=l[o-1].points[l[o-1].points.length-1],x=c[o-1].points[c[o-1].points.length-1],_=c[0].points[0],E=gt.makeline(x,g),S=gt.makeline(v,_),T=[E].concat(l).concat([S]).concat(c);return new Ax(T)}outlineshapes(e,n,i){n=n||e;const s=this.outline(e,n).curves,a=[];for(let o=1,l=s.length;o<l/2;o++){const c=gt.makeshape(s[o],s[l-o],i);c.startcap.virtual=o>1,c.endcap.virtual=o<l/2-1,a.push(c)}return a}intersects(e,n){return e?e.p1&&e.p2?this.lineIntersects(e):(e instanceof ri&&(e=e.reduce()),this.curveintersects(this.reduce(),e,n)):this.selfintersects(n)}lineIntersects(e){const n=n9(e.p1.x,e.p2.x),i=n9(e.p1.y,e.p2.y),s=r9(e.p1.x,e.p2.x),a=r9(e.p1.y,e.p2.y);return gt.roots(this.points,e).filter(o=>{var l=this.get(o);return gt.between(l.x,n,s)&&gt.between(l.y,i,a)})}selfintersects(e){const n=this.reduce(),i=n.length-2,s=[];for(let a=0,o,l,c;a<i;a++)l=n.slice(a,a+1),c=n.slice(a+2),o=this.curveintersects(l,c,e),s.push(...o);return s}curveintersects(e,n,i){const s=[];e.forEach(function(o){n.forEach(function(l){o.overlaps(l)&&s.push({left:o,right:l})})});let a=[];return s.forEach(function(o){const l=gt.pairiteration(o.left,o.right,i);l.length>0&&(a=a.concat(l))}),a}arcs(e){return e=e||.5,this._iterate(e,[])}_error(e,n,i,s){const a=(s-i)/4,o=this.get(i+a),l=this.get(s-a),c=gt.dist(e,n),u=gt.dist(e,o),h=gt.dist(e,l);return $v(u-c)+$v(h-c)}_iterate(e,n){let i=0,s=1,a;do{a=0,s=1;let o=this.get(i),l,c,u,h,d=!1,f=!1,p,g=s,v=1;do if(f=d,h=u,g=(i+s)/2,l=this.get(g),c=this.get(s),u=gt.getccenter(o,l,c),u.interval={start:i,end:s},d=this._error(u,o,i,s)<=e,p=f&&!d,p||(v=s),d){if(s>=1){if(u.interval.end=v=1,h=u,s>1){let _={x:u.x+u.r*OUe(u.e),y:u.y+u.r*kUe(u.e)};u.e+=gt.angle({x:u.x,y:u.y},_,this.get(1))}break}s=s+(s-i)/2}else s=g;while(!p&&a++<100);if(a>=100)break;h=h||u,n.push(h),i=v}while(s<1);return n}}function uF(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,i=Array(e);n<e;n++)i[n]=r[n];return i}function LUe(r){if(Array.isArray(r))return r}function FUe(r){if(Array.isArray(r))return uF(r)}function BUe(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function jUe(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var i,s,a,o,l=[],c=!0,u=!1;try{if(a=(n=n.call(r)).next,e!==0)for(;!(c=(i=a.call(n)).done)&&(l.push(i.value),l.length!==e);c=!0);}catch(h){u=!0,s=h}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function UUe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zUe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $Ue(r,e){if(r==null)return{};var n,i,s=GUe(r,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);for(i=0;i<a.length;i++)n=a[i],e.includes(n)||{}.propertyIsEnumerable.call(r,n)&&(s[n]=r[n])}return s}function GUe(r,e){if(r==null)return{};var n={};for(var i in r)if({}.hasOwnProperty.call(r,i)){if(e.includes(i))continue;n[i]=r[i]}return n}function VUe(r,e){return LUe(r)||jUe(r,e)||Yie(r,e)||UUe()}function HUe(r){return FUe(r)||BUe(r)||Yie(r)||zUe()}function WUe(r,e){if(typeof r!="object"||!r)return r;var n=r[Symbol.toPrimitive];if(n!==void 0){var i=n.call(r,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(r)}function qUe(r){var e=WUe(r,"string");return typeof e=="symbol"?e:e+""}function Yie(r,e){if(r){if(typeof r=="string")return uF(r,e);var n={}.toString.call(r).slice(8,-1);return n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set"?Array.from(r):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?uF(r,e):void 0}}var XUe=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,s=(e instanceof Array?e.length?e:[void 0]:[e]).map(function(l){return{keyAccessor:l,isProp:!(l instanceof Function)}}),a=r.reduce(function(l,c){var u=l,h=c;return s.forEach(function(d,f){var p=d.keyAccessor,g=d.isProp,v;if(g){var x=h,_=x[p],E=$Ue(x,[p].map(qUe));v=_,h=E}else v=p(h,f);f+1<s.length?(u.hasOwnProperty(v)||(u[v]={}),u=u[v]):n?(u.hasOwnProperty(v)||(u[v]=[]),u[v].push(h)):u[v]=h}),l},{});n instanceof Function&&function l(c){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;u===s.length?Object.keys(c).forEach(function(h){return c[h]=n(c[h])}):Object.values(c).forEach(function(h){return l(h,u+1)})}(a);var o=a;return i&&(o=[],function l(c){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];u.length===s.length?o.push({keys:u,vals:c}):Object.entries(c).forEach(function(h){var d=VUe(h,2),f=d[0],p=d[1];return l(p,[].concat(HUe(u),[f]))})}(a),e instanceof Array&&e.length===0&&o.length===1&&(o[0].keys=[])),o};function KUe(r,e){e===void 0&&(e={});var n=e.insertAt;if(!(typeof document>"u")){var i=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css",n==="top"&&i.firstChild?i.insertBefore(s,i.firstChild):i.appendChild(s),s.styleSheet?s.styleSheet.cssText=r:s.appendChild(document.createTextNode(r))}}var YUe=`.force-graph-container canvas {
  display: block;
  user-select: none;
  outline: none;
  -webkit-tap-highlight-color: transparent;
}

.force-graph-container .clickable {
  cursor: pointer;
}

.force-graph-container .grabbable {
  cursor: move;
  cursor: grab;
  cursor: -moz-grab;
  cursor: -webkit-grab;
}

.force-graph-container .grabbable:active {
  cursor: grabbing;
  cursor: -moz-grabbing;
  cursor: -webkit-grabbing;
}
`;KUe(YUe);function hF(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,i=Array(e);n<e;n++)i[n]=r[n];return i}function ZUe(r){if(Array.isArray(r))return r}function QUe(r){if(Array.isArray(r))return hF(r)}function i9(r,e,n){if(Zie())return Reflect.construct.apply(null,arguments);var i=[null];i.push.apply(i,e);var s=new(r.bind.apply(r,i));return s}function Ib(r,e,n){return(e=ize(e))in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function Zie(){try{var r=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Zie=function(){return!!r})()}function JUe(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function eze(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var i,s,a,o,l=[],c=!0,u=!1;try{if(a=(n=n.call(r)).next,e!==0)for(;!(c=(i=a.call(n)).done)&&(l.push(i.value),l.length!==e);c=!0);}catch(h){u=!0,s=h}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function tze(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nze(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function s9(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable})),n.push.apply(n,i)}return n}function dg(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?s9(Object(n),!0).forEach(function(i){Ib(r,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):s9(Object(n)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(n,i))})}return r}function Cx(r,e){return ZUe(r)||eze(r,e)||Qie(r,e)||tze()}function ol(r){return QUe(r)||JUe(r)||Qie(r)||nze()}function rze(r,e){if(typeof r!="object"||!r)return r;var n=r[Symbol.toPrimitive];if(n!==void 0){var i=n.call(r,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function ize(r){var e=rze(r,"string");return typeof e=="symbol"?e:e+""}function dF(r){"@babel/helpers - typeof";return dF=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dF(r)}function Qie(r,e){if(r){if(typeof r=="string")return hF(r,e);var n={}.toString.call(r).slice(8,-1);return n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set"?Array.from(r):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?hF(r,e):void 0}}var sze=A_(zte);function a9(r,e,n){!e||typeof n!="string"||r.filter(function(i){return!i[n]}).forEach(function(i){i[n]=sze(e(i))})}function aze(r,e){var n=r.nodes,i=r.links,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=s.nodeFilter,o=a===void 0?function(){return!0}:a,l=s.onLoopError,c=l===void 0?function(p){throw"Invalid DAG structure! Found cycle in node path: ".concat(p.join(" -> "),".")}:l,u={};n.forEach(function(p){return u[e(p)]={data:p,out:[],depth:-1,skip:!o(p)}}),i.forEach(function(p){var g=p.source,v=p.target,x=T(g),_=T(v);if(!u.hasOwnProperty(x))throw"Missing source node with id: ".concat(x);if(!u.hasOwnProperty(_))throw"Missing target node with id: ".concat(_);var E=u[x],S=u[_];E.out.push(S);function T(M){return dF(M)==="object"?e(M):M}});var h=[];f(Object.values(u));var d=Object.assign.apply(Object,[{}].concat(ol(Object.entries(u).filter(function(p){var g=Cx(p,2),v=g[1];return!v.skip}).map(function(p){var g=Cx(p,2),v=g[0],x=g[1];return Ib({},v,x.depth)}))));return d;function f(p){for(var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],v=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,x=function(){var T=p[_];if(g.indexOf(T)!==-1){var M=[].concat(ol(g.slice(g.indexOf(T))),[T]).map(function(C){return e(C.data)});return h.some(function(C){return C.length===M.length&&C.every(function(A,P){return A===M[P]})})||(h.push(M),c(M)),1}v>T.depth&&(T.depth=v,f(T.out,[].concat(ol(g),[T]),v+(T.skip?0:1)))},_=0,E=p.length;_<E;_++)x()}}var oze=2,sa=function(e,n){return n.onNeedsRedraw&&n.onNeedsRedraw()},o9=function(e,n){if(!n.isShadow){var i=Zt(n.linkDirectionalParticles);n.graphData.links.forEach(function(s){var a=Math.round(Math.abs(i(s)));a?s.__photons=ol(Array(a)).map(function(){return{}}):delete s.__photons})}},gE=Hd({props:{graphData:{default:{nodes:[],links:[]},onChange:function(e,n){n.engineRunning=!1,o9(e,n)}},dagMode:{onChange:function(e,n){!e&&(n.graphData.nodes||[]).forEach(function(i){return i.fx=i.fy=void 0})}},dagLevelDistance:{},dagNodeFilter:{default:function(e){return!0}},onDagError:{triggerUpdate:!1},nodeRelSize:{default:4,triggerUpdate:!1,onChange:sa},nodeId:{default:"id"},nodeVal:{default:"val",triggerUpdate:!1,onChange:sa},nodeColor:{default:"color",triggerUpdate:!1,onChange:sa},nodeAutoColorBy:{},nodeCanvasObject:{triggerUpdate:!1,onChange:sa},nodeCanvasObjectMode:{default:function(){return"replace"},triggerUpdate:!1,onChange:sa},nodeVisibility:{default:!0,triggerUpdate:!1,onChange:sa},linkSource:{default:"source"},linkTarget:{default:"target"},linkVisibility:{default:!0,triggerUpdate:!1,onChange:sa},linkColor:{default:"color",triggerUpdate:!1,onChange:sa},linkAutoColorBy:{},linkLineDash:{triggerUpdate:!1,onChange:sa},linkWidth:{default:1,triggerUpdate:!1,onChange:sa},linkCurvature:{default:0,triggerUpdate:!1,onChange:sa},linkCanvasObject:{triggerUpdate:!1,onChange:sa},linkCanvasObjectMode:{default:function(){return"replace"},triggerUpdate:!1,onChange:sa},linkDirectionalArrowLength:{default:0,triggerUpdate:!1,onChange:sa},linkDirectionalArrowColor:{triggerUpdate:!1,onChange:sa},linkDirectionalArrowRelPos:{default:.5,triggerUpdate:!1,onChange:sa},linkDirectionalParticles:{default:0,triggerUpdate:!1,onChange:o9},linkDirectionalParticleSpeed:{default:.01,triggerUpdate:!1},linkDirectionalParticleWidth:{default:4,triggerUpdate:!1},linkDirectionalParticleColor:{triggerUpdate:!1},globalScale:{default:1,triggerUpdate:!1},d3AlphaMin:{default:0,triggerUpdate:!1},d3AlphaDecay:{default:.0228,triggerUpdate:!1,onChange:function(e,n){n.forceLayout.alphaDecay(e)}},d3AlphaTarget:{default:0,triggerUpdate:!1,onChange:function(e,n){n.forceLayout.alphaTarget(e)}},d3VelocityDecay:{default:.4,triggerUpdate:!1,onChange:function(e,n){n.forceLayout.velocityDecay(e)}},warmupTicks:{default:0,triggerUpdate:!1},cooldownTicks:{default:1/0,triggerUpdate:!1},cooldownTime:{default:15e3,triggerUpdate:!1},onUpdate:{default:function(){},triggerUpdate:!1},onFinishUpdate:{default:function(){},triggerUpdate:!1},onEngineTick:{default:function(){},triggerUpdate:!1},onEngineStop:{default:function(){},triggerUpdate:!1},onNeedsRedraw:{triggerUpdate:!1},isShadow:{default:!1,triggerUpdate:!1}},methods:{d3Force:function(e,n,i){return i===void 0?e.forceLayout.force(n):(e.forceLayout.force(n,i),this)},d3ReheatSimulation:function(e){return e.forceLayout.alpha(1),this.resetCountdown(),this},resetCountdown:function(e){return e.cntTicks=0,e.startTickTime=new Date,e.engineRunning=!0,this},isEngineRunning:function(e){return!!e.engineRunning},tickFrame:function(e){return!e.isShadow&&n(),s(),!e.isShadow&&a(),!e.isShadow&&o(),i(),this;function n(){e.engineRunning&&(++e.cntTicks>e.cooldownTicks||new Date-e.startTickTime>e.cooldownTime||e.d3AlphaMin>0&&e.forceLayout.alpha()<e.d3AlphaMin?(e.engineRunning=!1,e.onEngineStop()):(e.forceLayout.tick(),e.onEngineTick()))}function i(){var l=Zt(e.nodeVisibility),c=Zt(e.nodeVal),u=Zt(e.nodeColor),h=Zt(e.nodeCanvasObjectMode),d=e.ctx,f=e.isShadow/e.globalScale,p=e.graphData.nodes.filter(l);d.save(),p.forEach(function(g){var v=h(g);if(e.nodeCanvasObject&&(v==="before"||v==="replace")&&(e.nodeCanvasObject(g,d,e.globalScale),v==="replace")){d.restore();return}var x=Math.sqrt(Math.max(0,c(g)||1))*e.nodeRelSize+f;d.beginPath(),d.arc(g.x,g.y,x,0,2*Math.PI,!1),d.fillStyle=u(g)||"rgba(31, 120, 180, 0.92)",d.fill(),e.nodeCanvasObject&&v==="after"&&e.nodeCanvasObject(g,e.ctx,e.globalScale)}),d.restore()}function s(){var l=Zt(e.linkVisibility),c=Zt(e.linkColor),u=Zt(e.linkWidth),h=Zt(e.linkLineDash),d=Zt(e.linkCurvature),f=Zt(e.linkCanvasObjectMode),p=e.ctx,g=e.isShadow*2,v=e.graphData.links.filter(l);v.forEach(C);var x=[],_=[],E=v;if(e.linkCanvasObject){var S=[],T=[];v.forEach(function(A){return({before:x,after:_,replace:S}[f(A)]||T).push(A)}),E=[].concat(ol(x),_,T),x=x.concat(S)}p.save(),x.forEach(function(A){return e.linkCanvasObject(A,p,e.globalScale)}),p.restore();var M=XUe(E,[c,u,h]);p.save(),Object.entries(M).forEach(function(A){var P=Cx(A,2),R=P[0],O=P[1],D=!R||R==="undefined"?"rgba(0,0,0,0.15)":R;Object.entries(O).forEach(function(F){var U=Cx(F,2),B=U[0],W=U[1],j=(B||1)/e.globalScale+g;Object.entries(W).forEach(function($){var z=Cx($,2);z[0];var Z=z[1],se=h(Z[0]);p.beginPath(),Z.forEach(function(q){var ue=q.source,be=q.target;if(!(!ue||!be||!ue.hasOwnProperty("x")||!be.hasOwnProperty("x"))){p.moveTo(ue.x,ue.y);var ee=q.__controlPoints;ee?p[ee.length===2?"quadraticCurveTo":"bezierCurveTo"].apply(p,ol(ee).concat([be.x,be.y])):p.lineTo(be.x,be.y)}}),p.strokeStyle=D,p.lineWidth=j,p.setLineDash(se||[]),p.stroke()})})}),p.restore(),p.save(),_.forEach(function(A){return e.linkCanvasObject(A,p,e.globalScale)}),p.restore();function C(A){var P=d(A);if(!P){A.__controlPoints=null;return}var R=A.source,O=A.target;if(!(!R||!O||!R.hasOwnProperty("x")||!O.hasOwnProperty("x"))){var D=Math.sqrt(Math.pow(O.x-R.x,2)+Math.pow(O.y-R.y,2));if(D>0){var F=Math.atan2(O.y-R.y,O.x-R.x),U=D*P,B={x:(R.x+O.x)/2+U*Math.cos(F-Math.PI/2),y:(R.y+O.y)/2+U*Math.sin(F-Math.PI/2)};A.__controlPoints=[B.x,B.y]}else{var W=P*70;A.__controlPoints=[O.x,O.y-W,O.x+W,O.y]}}}}function a(){var l=1.6,c=.2,u=Zt(e.linkDirectionalArrowLength),h=Zt(e.linkDirectionalArrowRelPos),d=Zt(e.linkVisibility),f=Zt(e.linkDirectionalArrowColor||e.linkColor),p=Zt(e.nodeVal),g=e.ctx;g.save(),e.graphData.links.filter(d).forEach(function(v){var x=u(v);if(!(!x||x<0)){var _=v.source,E=v.target;if(!(!_||!E||!_.hasOwnProperty("x")||!E.hasOwnProperty("x"))){var S=Math.sqrt(Math.max(0,p(_)||1))*e.nodeRelSize,T=Math.sqrt(Math.max(0,p(E)||1))*e.nodeRelSize,M=Math.min(1,Math.max(0,h(v))),C=f(v)||"rgba(0,0,0,0.28)",A=x/l/2,P=v.__controlPoints&&i9(ri,[_.x,_.y].concat(ol(v.__controlPoints),[E.x,E.y])),R=P?function(j){return P.get(j)}:function(j){return{x:_.x+(E.x-_.x)*j||0,y:_.y+(E.y-_.y)*j||0}},O=P?P.length():Math.sqrt(Math.pow(E.x-_.x,2)+Math.pow(E.y-_.y,2)),D=S+x+(O-S-T-x)*M,F=R(D/O),U=R((D-x)/O),B=R((D-x*(1-c))/O),W=Math.atan2(F.y-U.y,F.x-U.x)-Math.PI/2;g.beginPath(),g.moveTo(F.x,F.y),g.lineTo(U.x+A*Math.cos(W),U.y+A*Math.sin(W)),g.lineTo(B.x,B.y),g.lineTo(U.x-A*Math.cos(W),U.y-A*Math.sin(W)),g.fillStyle=C,g.fill()}}}),g.restore()}function o(){var l=Zt(e.linkDirectionalParticles),c=Zt(e.linkDirectionalParticleSpeed),u=Zt(e.linkDirectionalParticleWidth),h=Zt(e.linkVisibility),d=Zt(e.linkDirectionalParticleColor||e.linkColor),f=e.ctx;f.save(),e.graphData.links.filter(h).forEach(function(p){var g=l(p);if(!(!p.hasOwnProperty("__photons")||!p.__photons.length)){var v=p.source,x=p.target;if(!(!v||!x||!v.hasOwnProperty("x")||!x.hasOwnProperty("x"))){var _=c(p),E=p.__photons||[],S=Math.max(0,u(p)/2)/Math.sqrt(e.globalScale),T=d(p)||"rgba(0,0,0,0.28)";f.fillStyle=T;var M=p.__controlPoints?i9(ri,[v.x,v.y].concat(ol(p.__controlPoints),[x.x,x.y])):null,C=0,A=!1;E.forEach(function(P){var R=!!P.__singleHop;if(P.hasOwnProperty("__progressRatio")||(P.__progressRatio=R?0:C/g),!R&&C++,P.__progressRatio+=_,P.__progressRatio>=1)if(!R)P.__progressRatio=P.__progressRatio%1;else{A=!0;return}var O=P.__progressRatio,D=M?M.get(O):{x:v.x+(x.x-v.x)*O||0,y:v.y+(x.y-v.y)*O||0};f.beginPath(),f.arc(D.x,D.y,S,0,2*Math.PI,!1),f.fill()}),A&&(p.__photons=p.__photons.filter(function(P){return!P.__singleHop||P.__progressRatio<=1}))}}}),f.restore()}},emitParticle:function(e,n){return n&&(!n.__photons&&(n.__photons=[]),n.__photons.push({__singleHop:!0})),this}},stateInit:function(){return{forceLayout:Bee().force("link",Dee()).force("charge",jee()).force("center",Cee()).force("dagRadial",null).stop(),engineRunning:!1}},init:function(e,n){n.ctx=e},update:function(e,n){e.engineRunning=!1,e.onUpdate(),e.nodeAutoColorBy!==null&&a9(e.graphData.nodes,Zt(e.nodeAutoColorBy),e.nodeColor),e.linkAutoColorBy!==null&&a9(e.graphData.links,Zt(e.linkAutoColorBy),e.linkColor),e.graphData.links.forEach(function(f){f.source=f[e.linkSource],f.target=f[e.linkTarget]}),e.forceLayout.stop().alpha(1).nodes(e.graphData.nodes);var i=e.forceLayout.force("link");i&&i.id(function(f){return f[e.nodeId]}).links(e.graphData.links);var s=e.dagMode&&aze(e.graphData,function(f){return f[e.nodeId]},{nodeFilter:e.dagNodeFilter,onLoopError:e.onDagError||void 0}),a=Math.max.apply(Math,ol(Object.values(s||[]))),o=e.dagLevelDistance||e.graphData.nodes.length/(a||1)*oze*(["radialin","radialout"].indexOf(e.dagMode)!==-1?.7:1);if(["lr","rl","td","bu"].includes(n.dagMode)){var l=["lr","rl"].includes(n.dagMode)?"fx":"fy";e.graphData.nodes.filter(e.dagNodeFilter).forEach(function(f){return delete f[l]})}if(["lr","rl","td","bu"].includes(e.dagMode)){var c=["rl","bu"].includes(e.dagMode),u=function(p){return(s[p[e.nodeId]]-a/2)*o*(c?-1:1)},h=["lr","rl"].includes(e.dagMode)?"fx":"fy";e.graphData.nodes.filter(e.dagNodeFilter).forEach(function(f){return f[h]=u(f)})}e.forceLayout.force("dagRadial",["radialin","radialout"].indexOf(e.dagMode)!==-1?Uee(function(f){var p=s[f[e.nodeId]]||-1;return(e.dagMode==="radialin"?a-p:p)*o}).strength(function(f){return e.dagNodeFilter(f)?1:0}):null);for(var d=0;d<e.warmupTicks&&!(e.d3AlphaMin>0&&e.forceLayout.alpha()<e.d3AlphaMin);d++)e.forceLayout.tick();this.resetCountdown(),e.onFinishUpdate()}});function Jie(r,e){var n=r instanceof Array?r:[r],i=new e;return i._destructor&&i._destructor(),{linkProp:function(a){return{default:i[a](),onChange:function(l,c){n.forEach(function(u){return c[u][a](l)})},triggerUpdate:!1}},linkMethod:function(a){return function(o){for(var l=arguments.length,c=new Array(l>1?l-1:0),u=1;u<l;u++)c[u-1]=arguments[u];var h=[];return n.forEach(function(d){var f=o[d],p=f[a].apply(f,c);p!==f&&h.push(p)}),h.length?h[0]:this}}}}var lze=800,cze=4,uze=5,ese=Jie("forceGraph",gE),hze=Jie(["forceGraph","shadowGraph"],gE),dze=Object.assign.apply(Object,ol(["nodeColor","nodeAutoColorBy","nodeCanvasObject","nodeCanvasObjectMode","linkColor","linkAutoColorBy","linkLineDash","linkWidth","linkCanvasObject","linkCanvasObjectMode","linkDirectionalArrowLength","linkDirectionalArrowColor","linkDirectionalArrowRelPos","linkDirectionalParticles","linkDirectionalParticleSpeed","linkDirectionalParticleWidth","linkDirectionalParticleColor","dagMode","dagLevelDistance","dagNodeFilter","onDagError","d3AlphaMin","d3AlphaDecay","d3VelocityDecay","warmupTicks","cooldownTicks","cooldownTime","onEngineTick","onEngineStop"].map(function(r){return Ib({},r,ese.linkProp(r))})).concat(ol(["nodeRelSize","nodeId","nodeVal","nodeVisibility","linkSource","linkTarget","linkVisibility","linkCurvature"].map(function(r){return Ib({},r,hze.linkProp(r))})))),fze=Object.assign.apply(Object,ol(["d3Force","d3ReheatSimulation","emitParticle"].map(function(r){return Ib({},r,ese.linkMethod(r))})));function GR(r){if(r.canvas){var e=r.canvas.width,n=r.canvas.height;e===300&&n===150&&(e=n=0);var i=window.devicePixelRatio;e/=i,n/=i,[r.canvas,r.shadowCanvas].forEach(function(a){a.style.width="".concat(r.width,"px"),a.style.height="".concat(r.height,"px"),a.width=r.width*i,a.height=r.height*i,!e&&!n&&a.getContext("2d").scale(i,i)});var s=Tc(r.canvas).k;r.zoom.translateBy(r.zoom.__baseElem,(r.width-e)/2/s,(r.height-n)/2/s),r.needsRedraw=!0}}function tse(r){var e=window.devicePixelRatio;r.setTransform(e,0,0,e,0,0)}function l9(r,e,n){r.save(),tse(r),r.clearRect(0,0,e,n),r.restore()}var pze=Hd({props:dg({width:{default:window.innerWidth,onChange:function(e,n){return GR(n)},triggerUpdate:!1},height:{default:window.innerHeight,onChange:function(e,n){return GR(n)},triggerUpdate:!1},graphData:{default:{nodes:[],links:[]},onChange:function(e,n){[e.nodes,e.links].every(function(s){return(s||[]).every(function(a){return!a.hasOwnProperty("__indexColor")})})&&n.colorTracker.reset(),[{type:"Node",objs:e.nodes},{type:"Link",objs:e.links}].forEach(i),n.forceGraph.graphData(e),n.shadowGraph.graphData(e);function i(s){var a=s.type,o=s.objs;o.filter(function(l){if(!l.hasOwnProperty("__indexColor"))return!0;var c=n.colorTracker.lookup(l.__indexColor);return!c||!c.hasOwnProperty("d")||c.d!==l}).forEach(function(l){l.__indexColor=n.colorTracker.register({type:a,d:l})})}},triggerUpdate:!1},backgroundColor:{onChange:function(e,n){n.canvas&&e&&(n.canvas.style.background=e)},triggerUpdate:!1},nodeLabel:{default:"name",triggerUpdate:!1},nodePointerAreaPaint:{onChange:function(e,n){n.shadowGraph.nodeCanvasObject(e?function(i,s,a){return e(i,i.__indexColor,s,a)}:null),n.flushShadowCanvas&&n.flushShadowCanvas()},triggerUpdate:!1},linkPointerAreaPaint:{onChange:function(e,n){n.shadowGraph.linkCanvasObject(e?function(i,s,a){return e(i,i.__indexColor,s,a)}:null),n.flushShadowCanvas&&n.flushShadowCanvas()},triggerUpdate:!1},linkLabel:{default:"name",triggerUpdate:!1},linkHoverPrecision:{default:4,triggerUpdate:!1},minZoom:{default:.01,onChange:function(e,n){n.zoom.scaleExtent([e,n.zoom.scaleExtent()[1]])},triggerUpdate:!1},maxZoom:{default:1e3,onChange:function(e,n){n.zoom.scaleExtent([n.zoom.scaleExtent()[0],e])},triggerUpdate:!1},enableNodeDrag:{default:!0,triggerUpdate:!1},enableZoomInteraction:{default:!0,triggerUpdate:!1},enablePanInteraction:{default:!0,triggerUpdate:!1},enableZoomPanInteraction:{default:!0,triggerUpdate:!1},enablePointerInteraction:{default:!0,onChange:function(e,n){n.hoverObj=null},triggerUpdate:!1},autoPauseRedraw:{default:!0,triggerUpdate:!1},onNodeDrag:{default:function(){},triggerUpdate:!1},onNodeDragEnd:{default:function(){},triggerUpdate:!1},onNodeClick:{triggerUpdate:!1},onNodeRightClick:{triggerUpdate:!1},onNodeHover:{triggerUpdate:!1},onLinkClick:{triggerUpdate:!1},onLinkRightClick:{triggerUpdate:!1},onLinkHover:{triggerUpdate:!1},onBackgroundClick:{triggerUpdate:!1},onBackgroundRightClick:{triggerUpdate:!1},onZoom:{triggerUpdate:!1},onZoomEnd:{triggerUpdate:!1},onRenderFramePre:{triggerUpdate:!1},onRenderFramePost:{triggerUpdate:!1}},dze),aliases:{stopAnimation:"pauseAnimation"},methods:dg({graph2ScreenCoords:function(e,n,i){var s=Tc(e.canvas);return{x:n*s.k+s.x,y:i*s.k+s.y}},screen2GraphCoords:function(e,n,i){var s=Tc(e.canvas);return{x:(n-s.x)/s.k,y:(i-s.y)/s.k}},centerAt:function(e,n,i,s){if(!e.canvas)return null;if(n!==void 0||i!==void 0){var a=Object.assign({},n!==void 0?{x:n}:{},i!==void 0?{y:i}:{});return s?e.tweenGroup.add(new uE(o()).to(a,s).easing(ch.Quadratic.Out).onUpdate(l).start()):l(a),this}return o();function o(){var c=Tc(e.canvas);return{x:(e.width/2-c.x)/c.k,y:(e.height/2-c.y)/c.k}}function l(c){var u=c.x,h=c.y;e.zoom.translateTo(e.zoom.__baseElem,u===void 0?o().x:u,h===void 0?o().y:h),e.needsRedraw=!0}},zoom:function(e,n,i){if(!e.canvas)return null;if(n!==void 0)return i?e.tweenGroup.add(new uE({k:s()}).to({k:n},i).easing(ch.Quadratic.Out).onUpdate(function(o){var l=o.k;return a(l)}).start()):a(n),this;return s();function s(){return Tc(e.canvas).k}function a(o){e.zoom.scaleTo(e.zoom.__baseElem,o),e.needsRedraw=!0}},zoomToFit:function(e){for(var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:10,s=arguments.length,a=new Array(s>3?s-3:0),o=3;o<s;o++)a[o-3]=arguments[o];var l=this.getGraphBbox.apply(this,a);if(l){var c={x:(l.x[0]+l.x[1])/2,y:(l.y[0]+l.y[1])/2},u=Math.max(1e-12,Math.min(1e12,(e.width-i*2)/(l.x[1]-l.x[0]),(e.height-i*2)/(l.y[1]-l.y[0])));this.centerAt(c.x,c.y,n),this.zoom(u,n)}return this},getGraphBbox:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){return!0},i=Zt(e.nodeVal),s=function(l){return Math.sqrt(Math.max(0,i(l)||1))*e.nodeRelSize},a=e.graphData.nodes.filter(n).map(function(o){return{x:o.x,y:o.y,r:s(o)}});return a.length?{x:[fb(a,function(o){return o.x-o.r}),db(a,function(o){return o.x+o.r})],y:[fb(a,function(o){return o.y-o.r}),db(a,function(o){return o.y+o.r})]}:null},pauseAnimation:function(e){return e.animationFrameRequestId&&(cancelAnimationFrame(e.animationFrameRequestId),e.animationFrameRequestId=null),this},resumeAnimation:function(e){return e.animationFrameRequestId||this._animationCycle(),this},_destructor:function(){this.pauseAnimation(),this.graphData({nodes:[],links:[]})}},fze),stateInit:function(){return{lastSetZoom:1,zoom:jje(),forceGraph:new gE,shadowGraph:new gE().cooldownTicks(0).nodeColor("__indexColor").linkColor("__indexColor").isShadow(!0),colorTracker:new CUe,tweenGroup:new KU}},init:function(e,n){var i=this;e.innerHTML="";var s=document.createElement("div");s.classList.add("force-graph-container"),s.style.position="relative",e.appendChild(s),n.canvas=document.createElement("canvas"),n.backgroundColor&&(n.canvas.style.background=n.backgroundColor),s.appendChild(n.canvas),n.shadowCanvas=document.createElement("canvas");var a=n.canvas.getContext("2d"),o=n.shadowCanvas.getContext("2d",{willReadFrequently:!0}),l={x:-1e12,y:-1e12},c=function(){var d=null,f=window.devicePixelRatio,p=l.x>0&&l.y>0?o.getImageData(l.x*f,l.y*f,1,1):null;return p&&(d=n.colorTracker.lookup(p.data)),d};al(n.canvas).call(EBe().subject(function(){if(!n.enableNodeDrag)return null;var h=c();return h&&h.type==="Node"?h.d:null}).on("start",function(h){var d=h.subject;d.__initialDragPos={x:d.x,y:d.y,fx:d.fx,fy:d.fy},h.active||(d.fx=d.x,d.fy=d.y),n.canvas.classList.add("grabbable")}).on("drag",function(h){var d=h.subject,f=d.__initialDragPos,p=h,g=Tc(n.canvas).k,v={x:f.x+(p.x-f.x)/g-d.x,y:f.y+(p.y-f.y)/g-d.y};["x","y"].forEach(function(x){return d["f".concat(x)]=d[x]=f[x]+(p[x]-f[x])/g}),!(!d.__dragged&&uze>=Math.sqrt(j1e(["x","y"].map(function(x){return Math.pow(h[x]-f[x],2)}))))&&(n.forceGraph.d3AlphaTarget(.3).resetCountdown(),n.isPointerDragging=!0,d.__dragged=!0,n.onNodeDrag(d,v))}).on("end",function(h){var d=h.subject,f=d.__initialDragPos,p={x:d.x-f.x,y:d.y-f.y};f.fx===void 0&&(d.fx=void 0),f.fy===void 0&&(d.fy=void 0),delete d.__initialDragPos,n.forceGraph.d3AlphaTarget()&&n.forceGraph.d3AlphaTarget(0).resetCountdown(),n.canvas.classList.remove("grabbable"),n.isPointerDragging=!1,d.__dragged&&(delete d.__dragged,n.onNodeDragEnd(d,p))})),n.zoom(n.zoom.__baseElem=al(n.canvas)),n.zoom.__baseElem.on("dblclick.zoom",null),n.zoom.filter(function(h){return!h.button&&n.enableZoomPanInteraction&&(h.type!=="wheel"||Zt(n.enableZoomInteraction)(h))&&(h.type==="wheel"||Zt(n.enablePanInteraction)(h))}).on("zoom",function(h){var d=h.transform;[a,o].forEach(function(f){tse(f),f.translate(d.x,d.y),f.scale(d.k,d.k)}),n.isPointerDragging=!0,n.onZoom&&n.onZoom(dg(dg({},d),i.centerAt())),n.needsRedraw=!0}).on("end",function(h){n.isPointerDragging=!1,n.onZoomEnd&&n.onZoomEnd(dg(dg({},h.transform),i.centerAt()))}),GR(n),n.forceGraph.onNeedsRedraw(function(){return n.needsRedraw=!0}).onFinishUpdate(function(){Tc(n.canvas).k===n.lastSetZoom&&n.graphData.nodes.length&&(n.zoom.scaleTo(n.zoom.__baseElem,n.lastSetZoom=cze/Math.cbrt(n.graphData.nodes.length)),n.needsRedraw=!0)}),n.tooltip=new Iie(s),["pointermove","pointerdown"].forEach(function(h){return s.addEventListener(h,function(d){h==="pointerdown"&&(n.isPointerPressed=!0,n.pointerDownEvent=d),!n.isPointerDragging&&d.type==="pointermove"&&n.onBackgroundClick&&(d.pressure>0||n.isPointerPressed)&&(d.pointerType!=="touch"||d.movementX===void 0||[d.movementX,d.movementY].some(function(g){return Math.abs(g)>1}))&&(n.isPointerDragging=!0);var f=p(s);l.x=d.pageX-f.left,l.y=d.pageY-f.top;function p(g){var v=g.getBoundingClientRect(),x=window.pageXOffset||document.documentElement.scrollLeft,_=window.pageYOffset||document.documentElement.scrollTop;return{top:v.top+_,left:v.left+x}}},{passive:!0})}),s.addEventListener("pointerup",function(h){if(n.isPointerPressed=!1,n.isPointerDragging){n.isPointerDragging=!1;return}var d=[h,n.pointerDownEvent];requestAnimationFrame(function(){if(h.button===0)if(n.hoverObj){var f=n["on".concat(n.hoverObj.type,"Click")];f&&f.apply(void 0,[n.hoverObj.d].concat(d))}else n.onBackgroundClick&&n.onBackgroundClick.apply(n,d);if(h.button===2)if(n.hoverObj){var p=n["on".concat(n.hoverObj.type,"RightClick")];p&&p.apply(void 0,[n.hoverObj.d].concat(d))}else n.onBackgroundRightClick&&n.onBackgroundRightClick.apply(n,d)})},{passive:!0}),s.addEventListener("contextmenu",function(h){return!n.onBackgroundRightClick&&!n.onNodeRightClick&&!n.onLinkRightClick?!0:(h.preventDefault(),!1)}),n.forceGraph(a),n.shadowGraph(o);var u=fUe(function(){l9(o,n.width,n.height),n.shadowGraph.linkWidth(function(d){return Zt(n.linkWidth)(d)+n.linkHoverPrecision});var h=Tc(n.canvas);n.shadowGraph.globalScale(h.k).tickFrame()},lze);n.flushShadowCanvas=u.flush,(this._animationCycle=function h(){var d=!n.autoPauseRedraw||!!n.needsRedraw||n.forceGraph.isEngineRunning()||n.graphData.links.some(function(S){return S.__photons&&S.__photons.length});if(n.needsRedraw=!1,n.enablePointerInteraction){var f=n.isPointerDragging?null:c();if(f!==n.hoverObj){var p=n.hoverObj,g=p?p.type:null,v=f?f.type:null;if(g&&g!==v){var x=n["on".concat(g,"Hover")];x&&x(null,p.d)}if(v){var _=n["on".concat(v,"Hover")];_&&_(f.d,g===v?p.d:null)}n.tooltip.content(f&&Zt(n["".concat(f.type.toLowerCase(),"Label")])(f.d)||null),n.canvas.classList[f&&n["on".concat(v,"Click")]||!f&&n.onBackgroundClick?"add":"remove"]("clickable"),n.hoverObj=f}d&&u()}if(d){l9(a,n.width,n.height);var E=Tc(n.canvas).k;n.onRenderFramePre&&n.onRenderFramePre(a,E),n.forceGraph.globalScale(E).tickFrame(),n.onRenderFramePost&&n.onRenderFramePost(a,E)}n.tweenGroup.update(),n.animationFrameRequestId=requestAnimationFrame(h)})()},update:function(e){}}),gA={width:ne.number,height:ne.number,graphData:ne.shape({nodes:ne.arrayOf(ne.object).isRequired,links:ne.arrayOf(ne.object).isRequired}),backgroundColor:ne.string,nodeRelSize:ne.number,nodeId:ne.string,nodeLabel:ne.oneOfType([ne.string,ne.func]),nodeVal:ne.oneOfType([ne.number,ne.string,ne.func]),nodeVisibility:ne.oneOfType([ne.bool,ne.string,ne.func]),nodeColor:ne.oneOfType([ne.string,ne.func]),nodeAutoColorBy:ne.oneOfType([ne.string,ne.func]),onNodeHover:ne.func,onNodeClick:ne.func,linkSource:ne.string,linkTarget:ne.string,linkLabel:ne.oneOfType([ne.string,ne.func]),linkVisibility:ne.oneOfType([ne.bool,ne.string,ne.func]),linkColor:ne.oneOfType([ne.string,ne.func]),linkAutoColorBy:ne.oneOfType([ne.string,ne.func]),linkWidth:ne.oneOfType([ne.number,ne.string,ne.func]),linkCurvature:ne.oneOfType([ne.number,ne.string,ne.func]),linkDirectionalArrowLength:ne.oneOfType([ne.number,ne.string,ne.func]),linkDirectionalArrowColor:ne.oneOfType([ne.string,ne.func]),linkDirectionalArrowRelPos:ne.oneOfType([ne.number,ne.string,ne.func]),linkDirectionalParticles:ne.oneOfType([ne.number,ne.string,ne.func]),linkDirectionalParticleSpeed:ne.oneOfType([ne.number,ne.string,ne.func]),linkDirectionalParticleWidth:ne.oneOfType([ne.number,ne.string,ne.func]),linkDirectionalParticleColor:ne.oneOfType([ne.string,ne.func]),onLinkHover:ne.func,onLinkClick:ne.func,dagMode:ne.oneOf(["td","bu","lr","rl","zin","zout","radialin","radialout"]),dagLevelDistance:ne.number,dagNodeFilter:ne.func,onDagError:ne.func,d3AlphaMin:ne.number,d3AlphaDecay:ne.number,d3VelocityDecay:ne.number,warmupTicks:ne.number,cooldownTicks:ne.number,cooldownTime:ne.number,onEngineTick:ne.func,onEngineStop:ne.func,getGraphBbox:ne.func},nse={zoomToFit:ne.func,onNodeRightClick:ne.func,onNodeDrag:ne.func,onNodeDragEnd:ne.func,onLinkRightClick:ne.func,linkHoverPrecision:ne.number,onBackgroundClick:ne.func,onBackgroundRightClick:ne.func,enablePointerInteraction:ne.bool,enableNodeDrag:ne.bool},sz={showNavInfo:ne.bool,nodeOpacity:ne.number,nodeResolution:ne.number,nodeThreeObject:ne.oneOfType([ne.object,ne.string,ne.func]),nodeThreeObjectExtend:ne.oneOfType([ne.bool,ne.string,ne.func]),linkOpacity:ne.number,linkResolution:ne.number,linkCurveRotation:ne.oneOfType([ne.number,ne.string,ne.func]),linkMaterial:ne.oneOfType([ne.object,ne.string,ne.func]),linkThreeObject:ne.oneOfType([ne.object,ne.string,ne.func]),linkThreeObjectExtend:ne.oneOfType([ne.bool,ne.string,ne.func]),linkPositionUpdate:ne.func,linkDirectionalArrowResolution:ne.number,linkDirectionalParticleResolution:ne.number,forceEngine:ne.oneOf(["d3","ngraph"]),ngraphPhysics:ne.object,numDimensions:ne.oneOf([1,2,3])},mze=Object.assign({},gA,nse,{linkLineDash:ne.oneOfType([ne.arrayOf(ne.number),ne.string,ne.func]),nodeCanvasObjectMode:ne.oneOfType([ne.string,ne.func]),nodeCanvasObject:ne.func,nodePointerAreaPaint:ne.func,linkCanvasObjectMode:ne.oneOfType([ne.string,ne.func]),linkCanvasObject:ne.func,linkPointerAreaPaint:ne.func,autoPauseRedraw:ne.bool,minZoom:ne.number,maxZoom:ne.number,enableZoomInteraction:ne.oneOfType([ne.bool,ne.func]),enablePanInteraction:ne.oneOfType([ne.bool,ne.func]),onZoom:ne.func,onZoomEnd:ne.func,onRenderFramePre:ne.func,onRenderFramePost:ne.func}),gze=Object.assign({},gA,nse,sz,{enableNavigationControls:ne.bool,controlType:ne.oneOf(["trackball","orbit","fly"]),rendererConfig:ne.object,extraRenderers:ne.arrayOf(ne.shape({render:ne.func.isRequired}))}),yze=Object.assign({},gA,sz,{nodeDesc:ne.oneOfType([ne.string,ne.func]),linkDesc:ne.oneOfType([ne.string,ne.func])}),vze=Object.assign({},gA,sz,{markerAttrs:ne.object,yOffset:ne.number,glScale:ne.number});const rse=fM(hAe,{methodNames:["getGraphBbox","emitParticle","d3Force","d3ReheatSimulation","refresh"]});rse.displayName="ForceGraphVR";rse.propTypes=yze;const ise=fM(bAe,{methodNames:["getGraphBbox","emitParticle","d3Force","d3ReheatSimulation","refresh"],initPropNames:["markerAttrs"]});ise.displayName="ForceGraphAR";ise.propTypes=vze;const sse=fM(xBe,{methodNames:["emitParticle","d3Force","d3ReheatSimulation","stopAnimation","pauseAnimation","resumeAnimation","cameraPosition","zoomToFit","getGraphBbox","screen2GraphCoords","graph2ScreenCoords","postProcessingComposer","lights","scene","camera","renderer","controls","refresh"],initPropNames:["controlType","rendererConfig","extraRenderers"]});sse.displayName="ForceGraph3D";sse.propTypes=gze;const az=fM(pze,{methodNames:["emitParticle","d3Force","d3ReheatSimulation","stopAnimation","pauseAnimation","resumeAnimation","centerAt","zoom","zoomToFit","getGraphBbox","screen2GraphCoords","graph2ScreenCoords"]});az.displayName="ForceGraph2D";az.propTypes=mze;const ase=({data:r=null})=>{const[e,n]=X.useState(null),[i,s]=X.useState(new Set),a=X.useRef(null),l=r||{nodes:[{id:"homepage",url:"/",label:"Homepage",pageRank:1,depth:0},{id:"about",url:"/about",label:"About Us",pageRank:.7,depth:1},{id:"services",url:"/services",label:"Services",pageRank:.8,depth:1},{id:"products",url:"/products",label:"Products",pageRank:.9,depth:1},{id:"blog",url:"/blog",label:"Blog",pageRank:.6,depth:1},{id:"contact",url:"/contact",label:"Contact",pageRank:.5,depth:1},{id:"product1",url:"/products/product1",label:"Product 1",pageRank:.4,depth:2},{id:"product2",url:"/products/product2",label:"Product 2",pageRank:.4,depth:2},{id:"product3",url:"/products/product3",label:"Product 3",pageRank:.3,depth:2},{id:"blog1",url:"/blog/post1",label:"Blog Post 1",pageRank:.3,depth:2},{id:"blog2",url:"/blog/post2",label:"Blog Post 2",pageRank:.3,depth:2},{id:"service1",url:"/services/service1",label:"Service 1",pageRank:.4,depth:2},{id:"service2",url:"/services/service2",label:"Service 2",pageRank:.4,depth:2}],links:[{source:"homepage",target:"about"},{source:"homepage",target:"services"},{source:"homepage",target:"products"},{source:"homepage",target:"blog"},{source:"homepage",target:"contact"},{source:"products",target:"product1"},{source:"products",target:"product2"},{source:"products",target:"product3"},{source:"blog",target:"blog1"},{source:"blog",target:"blog2"},{source:"services",target:"service1"},{source:"services",target:"service2"},{source:"product1",target:"product2"},{source:"product2",target:"product3"},{source:"product3",target:"product1"},{source:"blog1",target:"blog2"},{source:"about",target:"contact"},{source:"service1",target:"service2"},{source:"product1",target:"homepage"},{source:"blog1",target:"homepage"}]},c=X.useCallback(p=>{if(n(p),s(new Set),p){const g=new Set;l.links.forEach(v=>{(v.source.id===p.id||v.source===p.id||v.target.id===p.id||v.target===p.id)&&g.add(v)}),s(g)}},[l]),u=p=>{if(e===p)return"#ff5500";if(e)return Array.from(i).some(_=>_.source.id===p.id||_.source===p.id||_.target.id===p.id||_.target===p.id)?"#ffaa00":"#aaaaaa";const g=Math.floor(50+205*p.pageRank),v=Math.floor(100+155*(1-p.pageRank)),x=Math.floor(50+100*(1-p.pageRank));return`rgb(${g}, ${v}, ${x})`},h=p=>5+p.pageRank*10,d=p=>i.has(p)?"#ffaa00":"#cccccc",f=p=>i.has(p)?2:1;return b.jsxs("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:[b.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:b.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"Internal Linking Structure"})}),b.jsxs("div",{className:"p-6",children:[b.jsx("div",{className:"text-sm text-gray-500 mb-4",children:"This visualization shows the internal linking structure of your website. Larger nodes represent pages with higher importance. Hover over nodes to see connections."}),b.jsx("div",{className:"h-96 border border-gray-200 rounded-lg",children:b.jsx(az,{ref:a,graphData:l,nodeId:"id",nodeLabel:"label",nodeColor:u,nodeVal:h,linkColor:d,linkWidth:f,linkDirectionalArrowLength:3,linkDirectionalArrowRelPos:1,onNodeHover:c,cooldownTicks:100,nodeCanvasObjectMode:()=>"after",nodeCanvasObject:(p,g,v)=>{const x=p.label,_=12/v;g.font=`${_}px Sans-Serif`,g.textAlign="center",g.textBaseline="middle",g.fillStyle="black",(p===e||v>1.5)&&g.fillText(x,p.x,p.y+8)}})}),b.jsxs("div",{className:"mt-4 flex flex-wrap gap-4",children:[b.jsxs("div",{className:"flex items-center",children:[b.jsx("span",{className:"w-3 h-3 inline-block rounded-full bg-red-500 mr-2"}),b.jsx("span",{className:"text-sm text-gray-600",children:"High Importance"})]}),b.jsxs("div",{className:"flex items-center",children:[b.jsx("span",{className:"w-3 h-3 inline-block rounded-full bg-yellow-500 mr-2"}),b.jsx("span",{className:"text-sm text-gray-600",children:"Medium Importance"})]}),b.jsxs("div",{className:"flex items-center",children:[b.jsx("span",{className:"w-3 h-3 inline-block rounded-full bg-blue-500 mr-2"}),b.jsx("span",{className:"text-sm text-gray-600",children:"Low Importance"})]})]}),b.jsxs("div",{className:"mt-4",children:[b.jsx("button",{className:"px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700 mr-2",children:"Zoom to Fit"}),b.jsx("button",{className:"px-4 py-2 border border-gray-300 rounded hover:bg-gray-50",children:"Export Graph"})]})]})]})};var VR={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var c9;function xze(){return c9||(c9=1,function(r){(function(){var e={}.hasOwnProperty;function n(){for(var a="",o=0;o<arguments.length;o++){var l=arguments[o];l&&(a=s(a,i(l)))}return a}function i(a){if(typeof a=="string"||typeof a=="number")return a;if(typeof a!="object")return"";if(Array.isArray(a))return n.apply(null,a);if(a.toString!==Object.prototype.toString&&!a.toString.toString().includes("[native code]"))return a.toString();var o="";for(var l in a)e.call(a,l)&&a[l]&&(o=s(o,l));return o}function s(a,o){return o?a?a+" "+o:a+o:a}r.exports?(n.default=n,r.exports=n):window.classNames=n})()}(VR)),VR.exports}var bze=xze();const Qc=_r(bze);var _ze=["top","left","transform","className","children","innerRef"];function fF(){return fF=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])}return r},fF.apply(this,arguments)}function wze(r,e){if(r==null)return{};var n={},i=Object.keys(r),s,a;for(a=0;a<i.length;a++)s=i[a],!(e.indexOf(s)>=0)&&(n[s]=r[s]);return n}function zd(r){var e=r.top,n=e===void 0?0:e,i=r.left,s=i===void 0?0:i,a=r.transform,o=r.className,l=r.children,c=r.innerRef,u=wze(r,_ze);return ce.createElement("g",fF({ref:c,className:Qc("visx-group",o),transform:a||"translate("+s+", "+n+")"},u),l)}zd.propTypes={top:ne.number,left:ne.number,transform:ne.string,className:ne.string,children:ne.node,innerRef:ne.oneOfType([ne.string,ne.func,ne.object])};function Sze(r,e){e.domain&&("nice"in r||"quantiles"in r||"padding"in r,r.domain(e.domain))}function Tze(r,e){e.range&&("padding"in r,r.range(e.range))}function Eze(r,e){"align"in r&&"align"in e&&typeof e.align<"u"&&r.align(e.align)}function Mze(r,e){"base"in r&&"base"in e&&typeof e.base<"u"&&r.base(e.base)}function Aze(r,e){"clamp"in r&&"clamp"in e&&typeof e.clamp<"u"&&r.clamp(e.clamp)}function Cze(r,e){"constant"in r&&"constant"in e&&typeof e.constant<"u"&&r.constant(e.constant)}function Nze(r,e){"exponent"in r&&"exponent"in e&&typeof e.exponent<"u"&&r.exponent(e.exponent)}var u9={lab:kSe,hcl:ISe,"hcl-long":DSe,hsl:RSe,"hsl-long":OSe,cubehelix:LSe,"cubehelix-long":FSe,rgb:yb};function Pze(r){switch(r){case"lab":case"hcl":case"hcl-long":case"hsl":case"hsl-long":case"cubehelix":case"cubehelix-long":case"rgb":return u9[r]}var e=r.type,n=r.gamma,i=u9[e];return typeof n>"u"?i:i.gamma(n)}function Rze(r,e){if("interpolate"in e&&"interpolate"in r&&typeof e.interpolate<"u"){var n=Pze(e.interpolate);r.interpolate(n)}}var Oze=new Date(Date.UTC(2020,1,2,3,4,5)),kze="%Y-%m-%d %H:%M";function Ize(r){var e=r.tickFormat(1,kze)(Oze);return e==="2020-02-02 03:04"}var h9={day:u0,hour:BM,minute:LM,month:UM,second:Qu,week:R_,year:qc},d9={day:P_,hour:jM,minute:FM,month:zM,second:Qu,week:O_,year:Xc};function Dze(r,e){if("nice"in e&&typeof e.nice<"u"&&"nice"in r){var n=e.nice;if(typeof n=="boolean")n&&r.nice();else if(typeof n=="number")r.nice(n);else{var i=r,s=Ize(i);if(typeof n=="string")i.nice(s?d9[n]:h9[n]);else{var a=n.interval,o=n.step,l=(s?d9[a]:h9[a]).every(o);l!=null&&i.nice(l)}}}}function Lze(r,e){"padding"in r&&"padding"in e&&typeof e.padding<"u"&&r.padding(e.padding),"paddingInner"in r&&"paddingInner"in e&&typeof e.paddingInner<"u"&&r.paddingInner(e.paddingInner),"paddingOuter"in r&&"paddingOuter"in e&&typeof e.paddingOuter<"u"&&r.paddingOuter(e.paddingOuter)}function Fze(r,e){if(e.reverse){var n=r.range().slice().reverse();"padding"in r,r.range(n)}}function Bze(r,e){"round"in e&&typeof e.round<"u"&&(e.round&&"interpolate"in e&&typeof e.interpolate<"u"?console.warn("[visx/scale/applyRound] ignoring round: scale config contains round and interpolate. only applying interpolate. config:",e):"round"in r?r.round(e.round):"interpolate"in r&&e.round&&r.interpolate(IM))}function jze(r,e){"unknown"in r&&"unknown"in e&&typeof e.unknown<"u"&&r.unknown(e.unknown)}function Uze(r,e){if("zero"in e&&e.zero===!0){var n=r.domain(),i=n[0],s=n[1],a=s<i,o=a?[s,i]:[i,s],l=o[0],c=o[1],u=[Math.min(0,l),Math.max(0,c)];r.domain(a?u.reverse():u)}}var zze=["domain","nice","zero","interpolate","round","range","reverse","align","base","clamp","constant","exponent","padding","unknown"],$ze={domain:Sze,nice:Dze,zero:Uze,interpolate:Rze,round:Bze,align:Eze,base:Mze,clamp:Aze,constant:Cze,exponent:Nze,padding:Lze,range:Tze,reverse:Fze,unknown:jze};function Gze(){for(var r=arguments.length,e=new Array(r),n=0;n<r;n++)e[n]=arguments[n];var i=new Set(e),s=zze.filter(function(a){return i.has(a)});return function(o,l){return typeof l<"u"&&s.forEach(function(c){$ze[c](o,l)}),o}}var Vze=Gze("domain","range","reverse","clamp","interpolate","nice","round","zero");function HR(r){return Vze(xb(),r)}function Hze(r){if((typeof r=="function"||typeof r=="object"&&r)&&"valueOf"in r){var e=r.valueOf();if(typeof e=="number")return e}return r}function Wze(r,e){var n=r;return"ticks"in n?n.ticks(e):n.domain().filter(function(i,s,a){return e==null||a.length<=e||s%Math.round((a.length-1)/e)===0})}function qze(r){return r==null?void 0:r.toString()}var Xze=["className","top","left","data","binWidth","binHeight","x0","gap","xScale","yScale","colorScale","opacityScale","bins","count","children"];function pF(){return pF=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])}return r},pF.apply(this,arguments)}function Kze(r,e){if(r==null)return{};var n={},i=Object.keys(r),s,a;for(a=0;a<i.length;a++)s=i[a],!(e.indexOf(s)>=0)&&(n[s]=r[s]);return n}function ose(r){var e=r.className,n=r.top,i=r.left,s=r.data,a=s===void 0?[]:s,o=r.binWidth,l=o===void 0?6:o,c=r.binHeight,u=c===void 0?6:c,h=r.x0,d=h===void 0?0:h,f=r.gap,p=f===void 0?1:f,g=r.xScale,v=r.yScale,x=r.colorScale,_=x===void 0?function(){}:x,E=r.opacityScale,S=E===void 0?function(){return 1}:E,T=r.bins,M=T===void 0?function(U){return U==null?void 0:U.bins}:T,C=r.count,A=C===void 0?function(U){return U==null?void 0:U.count}:C,P=r.children,R=Kze(r,Xze),O=l-p,D=u-p,F=a.map(function(U,B){var W=g(B);return M(U).map(function(j,$){var z=A(j);return{bin:j,row:$,column:B,datum:U,width:O,height:D,gap:p,count:z,x:W+d,y:v($)+p,color:_(z),opacity:S(z)}})});return P?ce.createElement(ce.Fragment,null,P(F)):ce.createElement(zd,{className:"visx-heatmap-rects",top:n,left:i},F.map(function(U){return U.map(function(B){return ce.createElement("rect",pF({key:"heatmap-tile-rect-"+B.row+"-"+B.column,className:Qc("visx-heatmap-rect",e),width:B.width,height:B.height,x:B.x,y:B.y,fill:B.color,fillOpacity:B.opacity},R))})}))}ose.propTypes={data:ne.array,left:ne.number,top:ne.number,binWidth:ne.number,binHeight:ne.number,x0:ne.number,gap:ne.number,xScale:ne.func.isRequired,yScale:ne.func.isRequired,bins:ne.func,count:ne.func,className:ne.string,children:ne.func};var Yze=["from","to","fill","className","innerRef"];function mF(){return mF=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])}return r},mF.apply(this,arguments)}function Zze(r,e){if(r==null)return{};var n={},i=Object.keys(r),s,a;for(a=0;a<i.length;a++)s=i[a],!(e.indexOf(s)>=0)&&(n[s]=r[s]);return n}function lse(r){var e=r.from,n=e===void 0?{x:0,y:0}:e,i=r.to,s=i===void 0?{x:1,y:1}:i,a=r.fill,o=a===void 0?"transparent":a,l=r.className,c=r.innerRef,u=Zze(r,Yze),h=n.x===s.x||n.y===s.y;return ce.createElement("line",mF({ref:c,className:Qc("visx-line",l),x1:n.x,y1:n.y,x2:s.x,y2:s.y,fill:o,shapeRendering:h?"crispEdges":"auto"},u))}var WR,f9;function Qze(){if(f9)return WR;f9=1,WR=r;function r(i,s,a){i instanceof RegExp&&(i=e(i,a)),s instanceof RegExp&&(s=e(s,a));var o=n(i,s,a);return o&&{start:o[0],end:o[1],pre:a.slice(0,o[0]),body:a.slice(o[0]+i.length,o[1]),post:a.slice(o[1]+s.length)}}function e(i,s){var a=s.match(i);return a?a[0]:null}r.range=n;function n(i,s,a){var o,l,c,u,h,d=a.indexOf(i),f=a.indexOf(s,d+1),p=d;if(d>=0&&f>0){for(o=[],c=a.length;p>=0&&!h;)p==d?(o.push(p),d=a.indexOf(i,p+1)):o.length==1?h=[o.pop(),f]:(l=o.pop(),l<c&&(c=l,u=f),f=a.indexOf(s,p+1)),p=d<f&&d>=0?d:f;o.length&&(h=[c,u])}return h}return WR}var qR,p9;function Jze(){if(p9)return qR;p9=1,qR=r;function r(i,s,a){i instanceof RegExp&&(i=e(i,a)),s instanceof RegExp&&(s=e(s,a));var o=n(i,s,a);return o&&{start:o[0],end:o[1],pre:a.slice(0,o[0]),body:a.slice(o[0]+i.length,o[1]),post:a.slice(o[1]+s.length)}}function e(i,s){var a=s.match(i);return a?a[0]:null}r.range=n;function n(i,s,a){var o,l,c,u,h,d=a.indexOf(i),f=a.indexOf(s,d+1),p=d;if(d>=0&&f>0){if(i===s)return[d,f];for(o=[],c=a.length;p>=0&&!h;)p==d?(o.push(p),d=a.indexOf(i,p+1)):o.length==1?h=[o.pop(),f]:(l=o.pop(),l<c&&(c=l,u=f),f=a.indexOf(s,p+1)),p=d<f&&d>=0?d:f;o.length&&(h=[c,u])}return h}return qR}var XR,m9;function e4e(){if(m9)return XR;m9=1;var r=Jze();XR=e;function e(s,a,o){var l=s;return n(s,a).reduce(function(c,u){return c.replace(u.functionIdentifier+"("+u.matches.body+")",i(u.matches.body,u.functionIdentifier,o,l,a))},s)}function n(s,a){var o=[],l=typeof a=="string"?new RegExp("\\b("+a+")\\("):a;do{var c=l.exec(s);if(!c)return o;if(c[1]===void 0)throw new Error("Missing the first couple of parenthesis to get the function identifier in "+a);var u=c[1],h=c.index,d=r("(",")",s.substring(h));if(!d||d.start!==c[0].length-1)throw new SyntaxError(u+"(): missing closing ')' in the value '"+s+"'");o.push({matches:d,functionIdentifier:u}),s=d.post}while(l.test(s));return o}function i(s,a,o,l,c){return o(e(s,c,o),a,l)}return XR}var KR,g9;function t4e(){if(g9)return KR;g9=1;var r=function(e){this.value=e};return r.math={isDegree:!0,acos:function(e){return r.math.isDegree?180/Math.PI*Math.acos(e):Math.acos(e)},add:function(e,n){return e+n},asin:function(e){return r.math.isDegree?180/Math.PI*Math.asin(e):Math.asin(e)},atan:function(e){return r.math.isDegree?180/Math.PI*Math.atan(e):Math.atan(e)},acosh:function(e){return Math.log(e+Math.sqrt(e*e-1))},asinh:function(e){return Math.log(e+Math.sqrt(e*e+1))},atanh:function(e){return Math.log((1+e)/(1-e))},C:function(e,n){var i=1,s=e-n,a=n;a<s&&(a=s,s=n);for(var o=a+1;o<=e;o++)i*=o;return i/r.math.fact(s)},changeSign:function(e){return-e},cos:function(e){return r.math.isDegree&&(e=r.math.toRadian(e)),Math.cos(e)},cosh:function(e){return(Math.pow(Math.E,e)+Math.pow(Math.E,-1*e))/2},div:function(e,n){return e/n},fact:function(e){if(e%1!==0)return"NaN";for(var n=1,i=2;i<=e;i++)n*=i;return n},inverse:function(e){return 1/e},log:function(e){return Math.log(e)/Math.log(10)},mod:function(e,n){return e%n},mul:function(e,n){return e*n},P:function(e,n){for(var i=1,s=Math.floor(e)-Math.floor(n)+1;s<=Math.floor(e);s++)i*=s;return i},Pi:function(e,n,i){for(var s=1,a=e;a<=n;a++)s*=Number(i.postfixEval({n:a}));return s},pow10x:function(e){for(var n=1;e--;)n*=10;return n},sigma:function(e,n,i){for(var s=0,a=e;a<=n;a++)s+=Number(i.postfixEval({n:a}));return s},sin:function(e){return r.math.isDegree&&(e=r.math.toRadian(e)),Math.sin(e)},sinh:function(e){return(Math.pow(Math.E,e)-Math.pow(Math.E,-1*e))/2},sub:function(e,n){return e-n},tan:function(e){return r.math.isDegree&&(e=r.math.toRadian(e)),Math.tan(e)},tanh:function(e){return r.sinha(e)/r.cosha(e)},toRadian:function(e){return e*Math.PI/180},and:function(e,n){return e&n}},r.Exception=function(e){this.message=e},KR=r,KR}var YR,y9;function n4e(){if(y9)return YR;y9=1;var r=t4e();function e(E,S){for(var T=0;T<E.length;T++)E[T]+=S;return E}for(var n=[{token:"sin",show:"sin",type:0,value:r.math.sin},{token:"cos",show:"cos",type:0,value:r.math.cos},{token:"tan",show:"tan",type:0,value:r.math.tan},{token:"pi",show:"&pi;",type:3,value:"PI"},{token:"(",show:"(",type:4,value:"("},{token:")",show:")",type:5,value:")"},{token:"P",show:"P",type:10,value:r.math.P},{token:"C",show:"C",type:10,value:r.math.C},{token:" ",show:" ",type:14,value:" ".anchor},{token:"asin",show:"asin",type:0,value:r.math.asin},{token:"acos",show:"acos",type:0,value:r.math.acos},{token:"atan",show:"atan",type:0,value:r.math.atan},{token:"7",show:"7",type:1,value:"7"},{token:"8",show:"8",type:1,value:"8"},{token:"9",show:"9",type:1,value:"9"},{token:"int",show:"Int",type:0,value:Math.floor},{token:"cosh",show:"cosh",type:0,value:r.math.cosh},{token:"acosh",show:"acosh",type:0,value:r.math.acosh},{token:"ln",show:" ln",type:0,value:Math.log},{token:"^",show:"^",type:10,value:Math.pow},{token:"root",show:"root",type:0,value:Math.sqrt},{token:"4",show:"4",type:1,value:"4"},{token:"5",show:"5",type:1,value:"5"},{token:"6",show:"6",type:1,value:"6"},{token:"/",show:"&divide;",type:2,value:r.math.div},{token:"!",show:"!",type:7,value:r.math.fact},{token:"tanh",show:"tanh",type:0,value:r.math.tanh},{token:"atanh",show:"atanh",type:0,value:r.math.atanh},{token:"Mod",show:" Mod ",type:2,value:r.math.mod},{token:"1",show:"1",type:1,value:"1"},{token:"2",show:"2",type:1,value:"2"},{token:"3",show:"3",type:1,value:"3"},{token:"*",show:"&times;",type:2,value:r.math.mul},{token:"sinh",show:"sinh",type:0,value:r.math.sinh},{token:"asinh",show:"asinh",type:0,value:r.math.asinh},{token:"e",show:"e",type:3,value:"E"},{token:"log",show:" log",type:0,value:r.math.log},{token:"0",show:"0",type:1,value:"0"},{token:".",show:".",type:6,value:"."},{token:"+",show:"+",type:9,value:r.math.add},{token:"-",show:"-",type:9,value:r.math.sub},{token:",",show:",",type:11,value:","},{token:"Sigma",show:"&Sigma;",type:12,value:r.math.sigma},{token:"n",show:"n",type:13,value:"n"},{token:"Pi",show:"&Pi;",type:12,value:r.math.Pi},{token:"pow",show:"pow",type:8,value:Math.pow,numberOfArguments:2},{token:"&",show:"&",type:9,value:r.math.and}],i={0:11,1:0,2:3,3:0,4:0,5:0,6:0,7:11,8:11,9:1,10:10,11:0,12:11,13:0,14:-1,15:11},s=0;s<n.length;s++)n[s].precedence=i[n[s].type];var a={0:!0,1:!0,3:!0,4:!0,6:!0,8:!0,9:!0,12:!0,13:!0,14:!0,15:!0},o={0:!0,1:!0,2:!0,3:!0,4:!0,5:!0,6:!0,7:!0,8:!0,9:!0,10:!0,11:!0,12:!0,13:!0,15:!0},l={0:!0,3:!0,4:!0,8:!0,12:!0,13:!0,15:!0},c={},u={0:!0,1:!0,3:!0,4:!0,6:!0,8:!0,12:!0,13:!0,15:!0},h={1:!0},d=[[],["1","2","3","7","8","9","4","5","6","+","-","*","/","(",")","^","!","P","C","e","0",".",",","n"," ","&"],["pi","ln","Pi"],["sin","cos","tan","Del","int","Mod","log","pow"],["asin","acos","atan","cosh","root","tanh","sinh"],["acosh","atanh","asinh","Sigma"]];function f(E,S,T,M){for(var C=0;C<M;C++)if(E[T+C]!==S[C])return!1;return!0}r.tokenTypes={FUNCTION_WITH_ONE_ARG:0,NUMBER:1,BINARY_OPERATOR_HIGH_PRECENDENCE:2,CONSTANT:3,OPENING_PARENTHESIS:4,CLOSING_PARENTHESIS:5,DECIMAL:6,POSTFIX_FUNCTION_WITH_ONE_ARG:7,FUNCTION_WITH_N_ARGS:8,BINARY_OPERATOR_LOW_PRECENDENCE:9,BINARY_OPERATOR_PERMUTATION:10,COMMA:11,EVALUATED_FUNCTION:12,EVALUATED_FUNCTION_PARAMETER:13,SPACE:14},r.addToken=function(E){for(var S=0;S<E.length;S++){var T=E[S].token.length,M=-1;E[S].type===r.tokenTypes.FUNCTION_WITH_N_ARGS&&E[S].numberOfArguments===void 0&&(E[S].numberOfArguments=2),d[T]=d[T]||[];for(var C=0;C<d[T].length;C++)if(E[S].token===d[T][C]){M=p(d[T][C],n);break}M===-1?(n.push(E[S]),E[S].precedence=i[E[S].type],d.length<=E[S].token.length&&(d[E[S].token.length]=[]),d[E[S].token.length].push(E[S].token)):(n[M]=E[S],E[S].precedence=i[E[S].type])}};function p(E,S){for(var T=0;T<S.length;T++)if(S[T].token===E)return T;return-1}function g(E){for(var S=[],T=E.length,M,C,A,P=0;P<T;P++)if(!(P<T-1&&E[P]===" "&&E[P+1]===" ")){for(M="",C=E.length-P>d.length-2?d.length-1:E.length-P;C>0;C--)if(d[C]!==void 0)for(A=0;A<d[C].length;A++)f(E,d[C][A],P,C)&&(M=d[C][A],A=d[C].length,C=0);if(P+=M.length-1,M==="")throw new r.Exception("Can't understand after "+E.slice(P));S.push(n[p(M,n)])}return S}var v={value:r.math.changeSign,type:0,pre:21,show:"-"},x={value:")",show:")",type:5,pre:0},_={value:"(",type:4,pre:0,show:"("};return r.lex=function(E,S){var T=[_],M=[],C=E,A=a,P=0,R=c,O="",D;typeof S<"u"&&r.addToken(S);var F={},U=g(C);for(D=0;D<U.length;D++){var B=U[D];if(B.type===14){if(D>0&&D<U.length-1&&U[D+1].type===1&&(U[D-1].type===1||U[D-1].type===6))throw new r.Exception("Unexpected Space");continue}var W=B.token,j=B.type,$=B.value,z=B.precedence,Z=B.show,se=T[T.length-1],q;for(q=M.length;q--&&M[q]===0;)if([0,2,3,4,5,9,11,12,13].indexOf(j)!==-1){if(A[j]!==!0)throw new r.Exception(W+" is not allowed after "+O);T.push(x),A=o,R=u,M.pop()}if(A[j]!==!0)throw new r.Exception(W+" is not allowed after "+O);if(R[j]===!0&&(j=2,$=r.math.mul,Z="&times;",z=3,D=D-1),F={value:$,type:j,pre:z,show:Z,numberOfArguments:B.numberOfArguments},j===0)A=a,R=c,e(M,2),T.push(F),U[D+1].type!==4&&(T.push(_),M.push(2));else if(j===1)se.type===1?(se.value+=$,e(M,1)):T.push(F),A=o,R=l;else if(j===2)A=a,R=c,e(M,2),T.push(F);else if(j===3)T.push(F),A=o,R=u;else if(j===4)e(M,1),P++,A=a,R=c,T.push(F);else if(j===5){if(!P)throw new r.Exception("Closing parenthesis are more than opening one, wait What!!!");P--,A=o,R=u,T.push(F),e(M,1)}else if(j===6){if(se.hasDec)throw new r.Exception("Two decimals are not allowed in one number");se.type!==1&&(se={value:0,type:1,pre:0},T.push(se)),A=h,e(M,1),R=c,se.value+=$,se.hasDec=!0}else j===7&&(A=o,R=u,e(M,1),T.push(F));j===8?(A=a,R=c,e(M,B.numberOfArguments+2),T.push(F),U[D+1].type!==4&&(T.push(_),M.push(B.numberOfArguments+2))):j===9?(se.type===9?se.value===r.math.add?(se.value=$,se.show=Z,e(M,1)):se.value===r.math.sub&&Z==="-"&&(se.value=r.math.add,se.show="+",e(M,1)):se.type!==5&&se.type!==7&&se.type!==1&&se.type!==3&&se.type!==13?W==="-"&&(A=a,R=c,e(M,2).push(2),T.push(v),T.push(_)):(T.push(F),e(M,2)),A=a,R=c):j===10?(A=a,R=c,e(M,2),T.push(F)):j===11?(A=a,R=c,T.push(F)):j===12?(A=a,R=c,e(M,6),T.push(F),U[D+1].type!==4&&(T.push(_),M.push(6))):j===13&&(A=o,R=u,T.push(F)),e(M,-1),O=W}for(q=M.length;q--;)T.push(x);if(A[5]!==!0)throw new r.Exception("complete the expression");for(;P--;)T.push(x);return T.push(x),new r(T)},YR=r,YR}var ZR,v9;function r4e(){if(v9)return ZR;v9=1;var r=n4e();return r.prototype.toPostfix=function(){for(var e=[],n,i,s,a,o,l=[{value:"(",type:4,pre:0}],c=this.value,u=1;u<c.length;u++)if(c[u].type===1||c[u].type===3||c[u].type===13)c[u].type===1&&(c[u].value=Number(c[u].value)),e.push(c[u]);else if(c[u].type===4)l.push(c[u]);else if(c[u].type===5)for(;(i=l.pop()).type!==4;)e.push(i);else if(c[u].type===11){for(;(i=l.pop()).type!==4;)e.push(i);l.push(i)}else{n=c[u],a=n.pre,o=l[l.length-1],s=o.pre;var h=o.value=="Math.pow"&&n.value=="Math.pow";if(a>s)l.push(n);else{for(;s>=a&&!h||h&&a<s;)i=l.pop(),o=l[l.length-1],e.push(i),s=o.pre,h=n.value=="Math.pow"&&o.value=="Math.pow";l.push(n)}}return new r(e)},ZR=r,ZR}var QR,x9;function i4e(){if(x9)return QR;x9=1;var r=r4e();return r.prototype.postfixEval=function(e){e=e||{},e.PI=Math.PI,e.E=Math.E;for(var n=[],i,s,a,o=this.value,l=typeof e.n<"u",c=0;c<o.length;c++)if(o[c].type===1)n.push({value:o[c].value,type:1});else if(o[c].type===3)n.push({value:e[o[c].value],type:1});else if(o[c].type===0)typeof n[n.length-1].type>"u"?n[n.length-1].value.push(o[c]):n[n.length-1].value=o[c].value(n[n.length-1].value);else if(o[c].type===7)typeof n[n.length-1].type>"u"?n[n.length-1].value.push(o[c]):n[n.length-1].value=o[c].value(n[n.length-1].value);else if(o[c].type===8){for(var u=[],h=0;h<o[c].numberOfArguments;h++)u.push(n.pop().value);n.push({type:1,value:o[c].value.apply(o[c],u.reverse())})}else o[c].type===10?(i=n.pop(),s=n.pop(),typeof s.type>"u"?(s.value=s.concat(i),s.value.push(o[c]),n.push(s)):typeof i.type>"u"?(i.unshift(s),i.push(o[c]),n.push(i)):n.push({type:1,value:o[c].value(s.value,i.value)})):o[c].type===2||o[c].type===9?(i=n.pop(),s=n.pop(),typeof s.type>"u"?(s=s.concat(i),s.push(o[c]),n.push(s)):typeof i.type>"u"?(i.unshift(s),i.push(o[c]),n.push(i)):n.push({type:1,value:o[c].value(s.value,i.value)})):o[c].type===12?(i=n.pop(),typeof i.type<"u"&&(i=[i]),s=n.pop(),a=n.pop(),n.push({type:1,value:o[c].value(a.value,s.value,new r(i))})):o[c].type===13&&(l?n.push({value:e[o[c].value],type:3}):n.push([o[c]]));if(n.length>1)throw new r.Exception("Uncaught Syntax error");return n[0].value>1e15?"Infinity":parseFloat(n[0].value.toFixed(15))},r.eval=function(e,n,i){return typeof n>"u"?this.lex(e).toPostfix().postfixEval():typeof i>"u"?typeof n.length<"u"?this.lex(e,n).toPostfix().postfixEval():this.lex(e).toPostfix().postfixEval(n):this.lex(e,n).toPostfix().postfixEval(i)},QR=r,QR}var JR,b9;function s4e(){if(b9)return JR;b9=1;var r=i4e();return r.prototype.formulaEval=function(){for(var e,n,i,s=[],a=this.value,o=0;o<a.length;o++)a[o].type===1||a[o].type===3?s.push({value:a[o].type===3?a[o].show:a[o].value,type:1}):a[o].type===13?s.push({value:a[o].show,type:1}):a[o].type===0?s[s.length-1]={value:a[o].show+(a[o].show!="-"?"(":"")+s[s.length-1].value+(a[o].show!="-"?")":""),type:0}:a[o].type===7?s[s.length-1]={value:(s[s.length-1].type!=1?"(":"")+s[s.length-1].value+(s[s.length-1].type!=1?")":"")+a[o].show,type:7}:a[o].type===10?(e=s.pop(),n=s.pop(),a[o].show==="P"||a[o].show==="C"?s.push({value:"<sup>"+n.value+"</sup>"+a[o].show+"<sub>"+e.value+"</sub>",type:10}):s.push({value:(n.type!=1?"(":"")+n.value+(n.type!=1?")":"")+"<sup>"+e.value+"</sup>",type:1})):a[o].type===2||a[o].type===9?(e=s.pop(),n=s.pop(),s.push({value:(n.type!=1?"(":"")+n.value+(n.type!=1?")":"")+a[o].show+(e.type!=1?"(":"")+e.value+(e.type!=1?")":""),type:a[o].type})):a[o].type===12&&(e=s.pop(),n=s.pop(),i=s.pop(),s.push({value:a[o].show+"("+i.value+","+n.value+","+e.value+")",type:12}));return s[0].value},JR=r,JR}var eO,_9;function a4e(){if(_9)return eO;_9=1;var r=Qze(),e=e4e(),n=s4e(),i=100,s=/(\+|\-|\*|\\|[^a-z]|)(\s*)(\()/g,a;eO=o;function o(c,u){a=0,u=Math.pow(10,u===void 0?5:u),c=c.replace(/\n+/g," ");function h(f,p,g){if(a++>i)throw a=0,new Error("Call stack overflow for "+g);if(f==="")throw new Error(p+"(): '"+g+"' must contain a non-whitespace string");f=d(f,g);var v=l(f);if(v.length>1||f.indexOf("var(")>-1)return p+"("+f+")";var x=v[0]||"";x==="%"&&(f=f.replace(/\b[0-9\.]+%/g,function(S){return parseFloat(S.slice(0,-1))*.01}));var _=f.replace(new RegExp(x,"gi"),""),E;try{E=n.eval(_)}catch{return p+"("+f+")"}return x==="%"&&(E*=100),(p.length||x==="%")&&(E=Math.round(E*u)/u),E+=x,E}function d(f,p){f=f.replace(/((?:\-[a-z]+\-)?calc)/g,"");for(var g="",v=f,x;x=s.exec(v);){x[0].index>0&&(g+=v.substring(0,x[0].index));var _=r("(",")",v.substring([0].index));if(_.body==="")throw new Error("'"+f+"' must contain a non-whitespace string");var E=h(_.body,"",p);g+=_.pre+E,v=_.post}return g+v}return e(c,/((?:\-[a-z]+\-)?calc)\(/,h)}function l(c){for(var u=[],h=[],d=/[\.0-9]([%a-z]+)/gi,f=d.exec(c);f;)!f||!f[1]||(h.indexOf(f[1].toLowerCase())===-1&&(u.push(f[1]),h.push(f[1].toLowerCase())),f=d.exec(c));return u}return eO}var o4e=a4e();const tO=_r(o4e);var nO,w9;function l4e(){if(w9)return nO;w9=1;var r=typeof wd=="object"&&wd&&wd.Object===Object&&wd;return nO=r,nO}var rO,S9;function oz(){if(S9)return rO;S9=1;var r=l4e(),e=typeof self=="object"&&self&&self.Object===Object&&self,n=r||e||Function("return this")();return rO=n,rO}var iO,T9;function cse(){if(T9)return iO;T9=1;var r=oz(),e=r.Symbol;return iO=e,iO}var sO,E9;function c4e(){if(E9)return sO;E9=1;var r=cse(),e=Object.prototype,n=e.hasOwnProperty,i=e.toString,s=r?r.toStringTag:void 0;function a(o){var l=n.call(o,s),c=o[s];try{o[s]=void 0;var u=!0}catch{}var h=i.call(o);return u&&(l?o[s]=c:delete o[s]),h}return sO=a,sO}var aO,M9;function u4e(){if(M9)return aO;M9=1;var r=Object.prototype,e=r.toString;function n(i){return e.call(i)}return aO=n,aO}var oO,A9;function h4e(){if(A9)return oO;A9=1;var r=cse(),e=c4e(),n=u4e(),i="[object Null]",s="[object Undefined]",a=r?r.toStringTag:void 0;function o(l){return l==null?l===void 0?s:i:a&&a in Object(l)?e(l):n(l)}return oO=o,oO}var lO,C9;function use(){if(C9)return lO;C9=1;function r(e){var n=typeof e;return e!=null&&(n=="object"||n=="function")}return lO=r,lO}var cO,N9;function d4e(){if(N9)return cO;N9=1;var r=h4e(),e=use(),n="[object AsyncFunction]",i="[object Function]",s="[object GeneratorFunction]",a="[object Proxy]";function o(l){if(!e(l))return!1;var c=r(l);return c==i||c==s||c==n||c==a}return cO=o,cO}var uO,P9;function f4e(){if(P9)return uO;P9=1;var r=oz(),e=r["__core-js_shared__"];return uO=e,uO}var hO,R9;function p4e(){if(R9)return hO;R9=1;var r=f4e(),e=function(){var i=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||"");return i?"Symbol(src)_1."+i:""}();function n(i){return!!e&&e in i}return hO=n,hO}var dO,O9;function m4e(){if(O9)return dO;O9=1;var r=Function.prototype,e=r.toString;function n(i){if(i!=null){try{return e.call(i)}catch{}try{return i+""}catch{}}return""}return dO=n,dO}var fO,k9;function g4e(){if(k9)return fO;k9=1;var r=d4e(),e=p4e(),n=use(),i=m4e(),s=/[\\^$.*+?()[\]{}|]/g,a=/^\[object .+?Constructor\]$/,o=Function.prototype,l=Object.prototype,c=o.toString,u=l.hasOwnProperty,h=RegExp("^"+c.call(u).replace(s,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function d(f){if(!n(f)||e(f))return!1;var p=r(f)?h:a;return p.test(i(f))}return fO=d,fO}var pO,I9;function y4e(){if(I9)return pO;I9=1;function r(e,n){return e==null?void 0:e[n]}return pO=r,pO}var mO,D9;function hse(){if(D9)return mO;D9=1;var r=g4e(),e=y4e();function n(i,s){var a=e(i,s);return r(a)?a:void 0}return mO=n,mO}var gO,L9;function yA(){if(L9)return gO;L9=1;var r=hse(),e=r(Object,"create");return gO=e,gO}var yO,F9;function v4e(){if(F9)return yO;F9=1;var r=yA();function e(){this.__data__=r?r(null):{},this.size=0}return yO=e,yO}var vO,B9;function x4e(){if(B9)return vO;B9=1;function r(e){var n=this.has(e)&&delete this.__data__[e];return this.size-=n?1:0,n}return vO=r,vO}var xO,j9;function b4e(){if(j9)return xO;j9=1;var r=yA(),e="__lodash_hash_undefined__",n=Object.prototype,i=n.hasOwnProperty;function s(a){var o=this.__data__;if(r){var l=o[a];return l===e?void 0:l}return i.call(o,a)?o[a]:void 0}return xO=s,xO}var bO,U9;function _4e(){if(U9)return bO;U9=1;var r=yA(),e=Object.prototype,n=e.hasOwnProperty;function i(s){var a=this.__data__;return r?a[s]!==void 0:n.call(a,s)}return bO=i,bO}var _O,z9;function w4e(){if(z9)return _O;z9=1;var r=yA(),e="__lodash_hash_undefined__";function n(i,s){var a=this.__data__;return this.size+=this.has(i)?0:1,a[i]=r&&s===void 0?e:s,this}return _O=n,_O}var wO,$9;function S4e(){if($9)return wO;$9=1;var r=v4e(),e=x4e(),n=b4e(),i=_4e(),s=w4e();function a(o){var l=-1,c=o==null?0:o.length;for(this.clear();++l<c;){var u=o[l];this.set(u[0],u[1])}}return a.prototype.clear=r,a.prototype.delete=e,a.prototype.get=n,a.prototype.has=i,a.prototype.set=s,wO=a,wO}var SO,G9;function T4e(){if(G9)return SO;G9=1;function r(){this.__data__=[],this.size=0}return SO=r,SO}var TO,V9;function E4e(){if(V9)return TO;V9=1;function r(e,n){return e===n||e!==e&&n!==n}return TO=r,TO}var EO,H9;function vA(){if(H9)return EO;H9=1;var r=E4e();function e(n,i){for(var s=n.length;s--;)if(r(n[s][0],i))return s;return-1}return EO=e,EO}var MO,W9;function M4e(){if(W9)return MO;W9=1;var r=vA(),e=Array.prototype,n=e.splice;function i(s){var a=this.__data__,o=r(a,s);if(o<0)return!1;var l=a.length-1;return o==l?a.pop():n.call(a,o,1),--this.size,!0}return MO=i,MO}var AO,q9;function A4e(){if(q9)return AO;q9=1;var r=vA();function e(n){var i=this.__data__,s=r(i,n);return s<0?void 0:i[s][1]}return AO=e,AO}var CO,X9;function C4e(){if(X9)return CO;X9=1;var r=vA();function e(n){return r(this.__data__,n)>-1}return CO=e,CO}var NO,K9;function N4e(){if(K9)return NO;K9=1;var r=vA();function e(n,i){var s=this.__data__,a=r(s,n);return a<0?(++this.size,s.push([n,i])):s[a][1]=i,this}return NO=e,NO}var PO,Y9;function P4e(){if(Y9)return PO;Y9=1;var r=T4e(),e=M4e(),n=A4e(),i=C4e(),s=N4e();function a(o){var l=-1,c=o==null?0:o.length;for(this.clear();++l<c;){var u=o[l];this.set(u[0],u[1])}}return a.prototype.clear=r,a.prototype.delete=e,a.prototype.get=n,a.prototype.has=i,a.prototype.set=s,PO=a,PO}var RO,Z9;function R4e(){if(Z9)return RO;Z9=1;var r=hse(),e=oz(),n=r(e,"Map");return RO=n,RO}var OO,Q9;function O4e(){if(Q9)return OO;Q9=1;var r=S4e(),e=P4e(),n=R4e();function i(){this.size=0,this.__data__={hash:new r,map:new(n||e),string:new r}}return OO=i,OO}var kO,J9;function k4e(){if(J9)return kO;J9=1;function r(e){var n=typeof e;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?e!=="__proto__":e===null}return kO=r,kO}var IO,eq;function xA(){if(eq)return IO;eq=1;var r=k4e();function e(n,i){var s=n.__data__;return r(i)?s[typeof i=="string"?"string":"hash"]:s.map}return IO=e,IO}var DO,tq;function I4e(){if(tq)return DO;tq=1;var r=xA();function e(n){var i=r(this,n).delete(n);return this.size-=i?1:0,i}return DO=e,DO}var LO,nq;function D4e(){if(nq)return LO;nq=1;var r=xA();function e(n){return r(this,n).get(n)}return LO=e,LO}var FO,rq;function L4e(){if(rq)return FO;rq=1;var r=xA();function e(n){return r(this,n).has(n)}return FO=e,FO}var BO,iq;function F4e(){if(iq)return BO;iq=1;var r=xA();function e(n,i){var s=r(this,n),a=s.size;return s.set(n,i),this.size+=s.size==a?0:1,this}return BO=e,BO}var jO,sq;function B4e(){if(sq)return jO;sq=1;var r=O4e(),e=I4e(),n=D4e(),i=L4e(),s=F4e();function a(o){var l=-1,c=o==null?0:o.length;for(this.clear();++l<c;){var u=o[l];this.set(u[0],u[1])}}return a.prototype.clear=r,a.prototype.delete=e,a.prototype.get=n,a.prototype.has=i,a.prototype.set=s,jO=a,jO}var UO,aq;function j4e(){if(aq)return UO;aq=1;var r=B4e(),e="Expected a function";function n(i,s){if(typeof i!="function"||s!=null&&typeof s!="function")throw new TypeError(e);var a=function(){var o=arguments,l=s?s.apply(this,o):o[0],c=a.cache;if(c.has(l))return c.get(l);var u=i.apply(this,o);return a.cache=c.set(l,u)||c,u};return a.cache=new(n.Cache||r),a}return n.Cache=r,UO=n,UO}var U4e=j4e();const z4e=_r(U4e);var oq="__react_svg_text_measurement_id";function $4e(r,e){try{var n=document.getElementById(oq);if(!n){var i=document.createElementNS("http://www.w3.org/2000/svg","svg");i.setAttribute("aria-hidden","true"),i.style.width="0",i.style.height="0",i.style.position="absolute",i.style.top="-100%",i.style.left="-100%",n=document.createElementNS("http://www.w3.org/2000/svg","text"),n.setAttribute("id",oq),i.appendChild(n),document.body.appendChild(i)}return Object.assign(n.style,e),n.textContent=r,n.getComputedTextLength()}catch{return null}}const lq=z4e($4e,function(r,e){return r+"_"+JSON.stringify(e)});var G4e=["verticalAnchor","scaleToFit","angle","width","lineHeight","capHeight","children","style"];function V4e(r,e){if(r==null)return{};var n={},i=Object.keys(r),s,a;for(a=0;a<i.length;a++)s=i[a],!(e.indexOf(s)>=0)&&(n[s]=r[s]);return n}function zO(r){return typeof r=="number"}function cq(r){return typeof r=="number"&&Number.isFinite(r)||typeof r=="string"}function H4e(r){var e=r.verticalAnchor,n=e===void 0?"end":e,i=r.scaleToFit,s=i===void 0?!1:i,a=r.angle,o=r.width,l=r.lineHeight,c=l===void 0?"1em":l,u=r.capHeight,h=u===void 0?"0.71em":u,d=r.children,f=r.style,p=V4e(r,G4e),g=p.x,v=g===void 0?0:g,x=p.y,_=x===void 0?0:x,E=!cq(v)||!cq(_),S=X.useMemo(function(){var R=d==null?[]:d.toString().split(/(?:(?!\u00A0+)\s+)/);return{wordsWithWidth:R.map(function(O){return{word:O,wordWidth:lq(O,f)||0}}),spaceWidth:lq(" ",f)||0}},[d,f]),T=S.wordsWithWidth,M=S.spaceWidth,C=X.useMemo(function(){return E?[]:o||s?T.reduce(function(R,O){var D=O.word,F=O.wordWidth,U=R[R.length-1];if(U&&(o==null||s||(U.width||0)+F+M<o))U.words.push(D),U.width=U.width||0,U.width+=F+M;else{var B={words:[D],width:F};R.push(B)}return R},[]):[{words:d==null?[]:d.toString().split(/(?:(?!\u00A0+)\s+)/)}]},[E,o,s,d,T,M]),A=X.useMemo(function(){var R=E?"":tO(n==="start"?"calc("+h+")":n==="middle"?"calc("+(C.length-1)/2+" * -"+c+" + ("+h+" / 2))":"calc("+(C.length-1)+" * -"+c+")");return R},[E,n,h,C.length,c]),P=X.useMemo(function(){var R=[];if(E)return"";if(zO(v)&&zO(_)&&zO(o)&&s&&C.length>0){var O=C[0].width||1,D=s==="shrink-only"?Math.min(o/O,1):o/O,F=D,U=v-D*v,B=_-F*_;R.push("matrix("+D+", 0, 0, "+F+", "+U+", "+B+")")}return a&&R.push("rotate("+a+", "+v+", "+_+")"),R.length>0?R.join(" "):""},[E,v,_,o,s,C,a]);return{wordsByLines:C,startDy:A,transform:P}}var W4e=["dx","dy","textAnchor","innerRef","innerTextRef","verticalAnchor","angle","lineHeight","scaleToFit","capHeight","width"];function gF(){return gF=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])}return r},gF.apply(this,arguments)}function q4e(r,e){if(r==null)return{};var n={},i=Object.keys(r),s,a;for(a=0;a<i.length;a++)s=i[a],!(e.indexOf(s)>=0)&&(n[s]=r[s]);return n}var X4e={overflow:"visible"};function dse(r){var e=r.dx,n=e===void 0?0:e,i=r.dy,s=i===void 0?0:i,a=r.textAnchor,o=a===void 0?"start":a,l=r.innerRef,c=r.innerTextRef;r.verticalAnchor,r.angle;var u=r.lineHeight,h=u===void 0?"1em":u;r.scaleToFit,r.capHeight,r.width;var d=q4e(r,W4e),f=d.x,p=f===void 0?0:f,g=d.fontSize,v=H4e(r),x=v.wordsByLines,_=v.startDy,E=v.transform;return ce.createElement("svg",{ref:l,x:n,y:s,fontSize:g,style:X4e},x.length>0?ce.createElement("text",gF({ref:c,transform:E},d,{textAnchor:o}),x.map(function(S,T){return ce.createElement("tspan",{key:T,x:p,dy:T===0?_:h},S.words.join(" "))})):null)}var Ro={top:"top",left:"left",bottom:"bottom"};function K4e(r){var e=r.labelOffset,n=r.labelProps,i=r.orientation,s=r.range,a=r.tickLabelFontSize,o=r.tickLength,l=i===Ro.left||i===Ro.top?-1:1,c,u,h;if(i===Ro.top||i===Ro.bottom){var d=i===Ro.bottom&&typeof n.fontSize=="number"?n.fontSize:0;c=(Number(s[0])+Number(s[s.length-1]))/2,u=l*(o+e+a+d)}else c=l*((Number(s[0])+Number(s[s.length-1]))/2),u=-(o+e),h="rotate("+l*90+")";return{x:c,y:u,transform:h}}function Nx(){return Nx=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])}return r},Nx.apply(this,arguments)}function Y4e(r){var e=r.hideTicks,n=r.horizontal,i=r.orientation,s=r.tickClassName,a=r.tickComponent,o=r.tickLabelProps,l=r.tickStroke,c=l===void 0?"#222":l,u=r.tickTransform,h=r.ticks,d=r.strokeWidth,f=r.tickLineProps;return h.map(function(p){var g,v=p.value,x=p.index,_=p.from,E=p.to,S=p.formattedValue,T=(g=o[x])!=null?g:{},M=Math.max(10,typeof T.fontSize=="number"&&T.fontSize||0),C=E.y+(n&&i!==Ro.top?M:0);return ce.createElement(zd,{key:"visx-tick-"+v+"-"+x,className:Qc("visx-axis-tick",s),transform:u},!e&&ce.createElement(lse,Nx({from:_,to:E,stroke:c,strokeWidth:d,strokeLinecap:"square"},f)),a?a(Nx({},T,{x:E.x,y:C,formattedValue:S})):ce.createElement(dse,Nx({x:E.x,y:C},T),S))})}function Px(){return Px=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])}return r},Px.apply(this,arguments)}var uq={textAnchor:"middle",fontFamily:"Arial",fontSize:10,fill:"#222"};function Z4e(r){var e=r.axisFromPoint,n=r.axisLineClassName,i=r.axisToPoint,s=r.hideAxisLine,a=r.hideTicks,o=r.horizontal,l=r.label,c=l===void 0?"":l,u=r.labelClassName,h=r.labelOffset,d=h===void 0?14:h,f=r.labelProps,p=r.orientation,g=p===void 0?Ro.bottom:p,v=r.scale,x=r.stroke,_=x===void 0?"#222":x,E=r.strokeDasharray,S=r.strokeWidth,T=S===void 0?1:S,M=r.tickClassName,C=r.tickComponent,A=r.tickLineProps,P=r.tickLabelProps,R=r.tickLength,O=R===void 0?8:R,D=r.tickStroke,F=D===void 0?"#222":D,U=r.tickTransform,B=r.ticks,W=r.ticksComponent,j=W===void 0?Y4e:W,$=Px({},uq,f),z=Px({},uq,typeof P=="object"?P:null),Z=B.map(function(q){var ue=q.value,be=q.index;return typeof P=="function"?P(ue,be,B):z}),se=Math.max.apply(Math,[10].concat(Z.map(function(q){return typeof q.fontSize=="number"?q.fontSize:0})));return ce.createElement(ce.Fragment,null,j({hideTicks:a,horizontal:o,orientation:g,scale:v,tickClassName:M,tickComponent:C,tickLabelProps:Z,tickStroke:F,tickTransform:U,ticks:B,strokeWidth:T,tickLineProps:A}),!s&&ce.createElement(lse,{className:Qc("visx-axis-line",n),from:e,to:i,stroke:_,strokeWidth:T,strokeDasharray:E}),c&&ce.createElement(dse,Px({className:Qc("visx-axis-label",u)},K4e({labelOffset:d,labelProps:$,orientation:g,range:v.range(),tickLabelFontSize:se,tickLength:O}),$),c))}function Q4e(r,e){e===void 0&&(e="center");var n=r;if(e!=="start"&&"bandwidth"in n){var i=n.bandwidth();return e==="center"&&(i/=2),n.round()&&(i=Math.round(i)),function(s){var a=n(s);return typeof a=="number"?a+i:a}}return r}function J4e(r){var e=r;return"tickFormat"in e?e.tickFormat():qze}var e5e=function(){function r(n){var i=n.x,s=i===void 0?0:i,a=n.y,o=a===void 0?0:a;this.x=0,this.y=0,this.x=s,this.y=o}var e=r.prototype;return e.value=function(){return{x:this.x,y:this.y}},e.toArray=function(){return[this.x,this.y]},r}();function US(r,e){var n=r.x,i=r.y;return new e5e(e?{x:n,y:i}:{x:i,y:n})}function yF(){return yF=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])}return r},yF.apply(this,arguments)}var $O=0;function t5e(r){return r===void 0&&(r=$O),typeof r=="number"?{start:r,end:r}:yF({start:$O,end:$O},r)}var n5e=["children","axisClassName","hideAxisLine","hideTicks","hideZero","innerRef","left","numTicks","orientation","rangePadding","scale","tickFormat","tickLength","tickValues","top"];function vF(){return vF=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])}return r},vF.apply(this,arguments)}function r5e(r,e){if(r==null)return{};var n={},i=Object.keys(r),s,a;for(a=0;a<i.length;a++)s=i[a],!(e.indexOf(s)>=0)&&(n[s]=r[s]);return n}function fse(r){var e=r.children,n=e===void 0?Z4e:e,i=r.axisClassName,s=r.hideAxisLine,a=s===void 0?!1:s,o=r.hideTicks,l=o===void 0?!1:o,c=r.hideZero,u=c===void 0?!1:c,h=r.innerRef,d=r.left,f=d===void 0?0:d,p=r.numTicks,g=p===void 0?10:p,v=r.orientation,x=v===void 0?Ro.bottom:v,_=r.rangePadding,E=_===void 0?0:_,S=r.scale,T=r.tickFormat,M=r.tickLength,C=M===void 0?8:M,A=r.tickValues,P=r.top,R=P===void 0?0:P,O=r5e(r,n5e),D=T??J4e(S),F=x===Ro.left,U=x===Ro.top,B=U||x===Ro.bottom,W=Q4e(S),j=F||U?-1:1,$=S.range(),z=t5e(E),Z=US({x:Number($[0])+.5-z.start,y:0},B),se=US({x:Number($[$.length-1])+.5+z.end,y:0},B),q=(A??Wze(S,g)).filter(function(be){return!u||be!==0&&be!=="0"}).map(function(be,ee){return{value:be,index:ee}}),ue=q.map(function(be){var ee=be.value,le=be.index,oe=Hze(W(ee));return{value:ee,index:le,from:US({x:oe,y:0},B),to:US({x:oe,y:C*j},B),formattedValue:D(ee,le,q)}});return ce.createElement(zd,{className:Qc("visx-axis",i),innerRef:h,top:R,left:f},n(vF({},O,{axisFromPoint:Z,axisToPoint:se,hideAxisLine:a,hideTicks:l,hideZero:u,horizontal:B,numTicks:g,orientation:x,rangePadding:E,scale:S,tickFormat:D,tickLength:C,tickPosition:W,tickSign:j,ticks:ue})))}var i5e=["axisClassName","labelOffset","tickLength","tickLabelProps"];function yE(){return yE=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])}return r},yE.apply(this,arguments)}function s5e(r,e){if(r==null)return{};var n={},i=Object.keys(r),s,a;for(a=0;a<i.length;a++)s=i[a],!(e.indexOf(s)>=0)&&(n[s]=r[s]);return n}var a5e={dx:"-0.25em",dy:"0.25em",fill:"#222",fontFamily:"Arial",fontSize:10,textAnchor:"end"};function o5e(r){var e=r.axisClassName,n=r.labelOffset,i=n===void 0?36:n,s=r.tickLength,a=s===void 0?8:s,o=r.tickLabelProps,l=s5e(r,i5e),c=typeof o=="function"?o:yE({},a5e,o);return ce.createElement(fse,yE({axisClassName:Qc("visx-axis-left",e),labelOffset:i,orientation:Ro.left,tickLabelProps:c,tickLength:a},l))}var l5e=["axisClassName","labelOffset","tickLength","tickLabelProps"];function vE(){return vE=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])}return r},vE.apply(this,arguments)}function c5e(r,e){if(r==null)return{};var n={},i=Object.keys(r),s,a;for(a=0;a<i.length;a++)s=i[a],!(e.indexOf(s)>=0)&&(n[s]=r[s]);return n}var u5e={dy:"0.25em",fill:"#222",fontFamily:"Arial",fontSize:10,textAnchor:"middle"};function h5e(r){var e=r.axisClassName,n=r.labelOffset,i=n===void 0?8:n,s=r.tickLength,a=s===void 0?8:s,o=r.tickLabelProps,l=c5e(r,l5e),c=typeof o=="function"?o:vE({},u5e,o);return ce.createElement(fse,vE({axisClassName:Qc("visx-axis-bottom",e),labelOffset:i,orientation:Ro.bottom,tickLabelProps:c,tickLength:a},l))}var d5e=["flexDirection","alignItems","margin","display","children"];function xF(){return xF=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])}return r},xF.apply(this,arguments)}function f5e(r,e){if(r==null)return{};var n={},i=Object.keys(r),s,a;for(a=0;a<i.length;a++)s=i[a],!(e.indexOf(s)>=0)&&(n[s]=r[s]);return n}function pse(r){var e=r.flexDirection,n=e===void 0?"row":e,i=r.alignItems,s=i===void 0?"center":i,a=r.margin,o=a===void 0?"0":a,l=r.display,c=l===void 0?"flex":l,u=r.children,h=f5e(r,d5e);return ce.createElement("div",xF({className:"visx-legend-item",style:{display:c,alignItems:s,flexDirection:n,margin:o}},h),u)}pse.propTypes={alignItems:ne.string,margin:ne.oneOfType([ne.string,ne.number]),children:ne.node,display:ne.string};var p5e=["flex","label","margin","align","children"];function bF(){return bF=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])}return r},bF.apply(this,arguments)}function m5e(r,e){if(r==null)return{};var n={},i=Object.keys(r),s,a;for(a=0;a<i.length;a++)s=i[a],!(e.indexOf(s)>=0)&&(n[s]=r[s]);return n}function mse(r){var e=r.flex,n=e===void 0?"1":e,i=r.label,s=r.margin,a=s===void 0?"5px 0":s,o=r.align,l=o===void 0?"left":o,c=r.children,u=m5e(r,p5e);return ce.createElement("div",bF({className:"visx-legend-label",style:{justifyContent:l,display:"flex",flex:n,margin:a}},u),c||i)}mse.propTypes={align:ne.string,label:ne.node,flex:ne.oneOfType([ne.string,ne.number]),margin:ne.oneOfType([ne.string,ne.number]),children:ne.node};function _F(){return _F=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])}return r},_F.apply(this,arguments)}function lz(r){var e=r.fill,n=r.width,i=r.height,s=r.style;return ce.createElement("div",{style:_F({width:n,height:i,background:e},s)})}lz.propTypes={fill:ne.string,width:ne.oneOfType([ne.string,ne.number]),height:ne.oneOfType([ne.string,ne.number])};function gse(r){var e=r.fill,n=r.width,i=r.height,s=r.style,a=typeof n=="string"||typeof n>"u"?0:n,o=typeof i=="string"||typeof i>"u"?0:i,l=Math.max(a,o),c=l/2;return ce.createElement("svg",{width:l,height:l},ce.createElement(zd,{top:c,left:c},ce.createElement("circle",{r:c,fill:e,style:s})))}gse.propTypes={fill:ne.string,width:ne.oneOfType([ne.string,ne.number]),height:ne.oneOfType([ne.string,ne.number])};function yse(r){var e=r.fill,n=r.width,i=r.height,s=r.style,a=typeof i=="string"||typeof i>"u"?0:i,o=typeof(s==null?void 0:s.strokeWidth)=="number"?s==null?void 0:s.strokeWidth:2;return ce.createElement("svg",{width:n,height:i},ce.createElement(zd,{top:a/2-o/2},ce.createElement("line",{x1:0,x2:n,y1:0,y2:0,stroke:e,strokeWidth:o,style:s})))}yse.propTypes={fill:ne.string,width:ne.oneOfType([ne.string,ne.number]),height:ne.oneOfType([ne.string,ne.number])};function Rx(){return Rx=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])}return r},Rx.apply(this,arguments)}var GO=function(){};function g5e(r){var e=r.shape,n=e===void 0?"rect":e,i=r.fill,s=i===void 0?GO:i,a=r.size,o=a===void 0?GO:a,l=r.width,c=r.height,u=r.label,h=r.item,d=r.itemIndex,f=r.shapeStyle,p=f===void 0?GO:f,g={width:l,height:c,item:h,itemIndex:d,label:u,fill:s(Rx({},u)),size:o(Rx({},u)),style:p(Rx({},u))};return typeof n=="string"?n==="circle"?ce.createElement(gse,g):n==="line"?ce.createElement(yse,g):ce.createElement(lz,g):ce.isValidElement(n)?ce.cloneElement(n,g):n?ce.createElement(n,g):null}function xE(){return xE=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])}return r},xE.apply(this,arguments)}function vse(r){var e=r.shape,n=e===void 0?lz:e,i=r.width,s=r.height,a=r.margin,o=r.label,l=r.item,c=r.itemIndex,u=r.fill,h=r.size,d=r.shapeStyle;return ce.createElement("div",{className:"visx-legend-shape",style:{display:"flex",width:h?h(xE({},o)):i,height:h?h(xE({},o)):s,margin:a}},g5e({shape:n,item:l,itemIndex:c,label:o,width:i,height:s,fill:u,shapeStyle:d}))}vse.propTypes={itemIndex:ne.number.isRequired,margin:ne.oneOfType([ne.string,ne.number]),width:ne.oneOfType([ne.string,ne.number]),height:ne.oneOfType([ne.string,ne.number])};function xse(r){return r&&typeof r=="object"&&"value"in r&&typeof r.value<"u"?r.value:r}function hq(r){return String(xse(r))}function y5e(r){var e=r.scale,n=r.labelFormat;return function(i,s){return{datum:i,index:s,text:""+n(i,s),value:e(i)}}}var v5e=["className","style","scale","shape","domain","fill","size","labelFormat","labelTransform","shapeWidth","shapeHeight","shapeMargin","shapeStyle","labelAlign","labelFlex","labelMargin","itemMargin","direction","itemDirection","legendLabelProps","children"];function Ox(){return Ox=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])}return r},Ox.apply(this,arguments)}function x5e(r,e){if(r==null)return{};var n={},i=Object.keys(r),s,a;for(a=0;a<i.length;a++)s=i[a],!(e.indexOf(s)>=0)&&(n[s]=r[s]);return n}var b5e={display:"flex"};function bse(r){var e=r.className,n=r.style,i=n===void 0?b5e:n,s=r.scale,a=r.shape,o=r.domain,l=r.fill,c=l===void 0?hq:l,u=r.size,h=u===void 0?hq:u,d=r.labelFormat,f=d===void 0?xse:d,p=r.labelTransform,g=p===void 0?y5e:p,v=r.shapeWidth,x=v===void 0?15:v,_=r.shapeHeight,E=_===void 0?15:_,S=r.shapeMargin,T=S===void 0?"2px 4px 2px 0":S,M=r.shapeStyle,C=r.labelAlign,A=C===void 0?"left":C,P=r.labelFlex,R=P===void 0?"1":P,O=r.labelMargin,D=O===void 0?"0 4px":O,F=r.itemMargin,U=F===void 0?"0":F,B=r.direction,W=B===void 0?"column":B,j=r.itemDirection,$=j===void 0?"row":j,z=r.legendLabelProps,Z=r.children,se=x5e(r,v5e),q=o||("domain"in s?s.domain():[]),ue=g({scale:s,labelFormat:f}),be=q.map(ue);return Z?ce.createElement(ce.Fragment,null,Z(be)):ce.createElement("div",{className:Qc("visx-legend",e),style:Ox({},i,{flexDirection:W})},be.map(function(ee,le){return ce.createElement(pse,Ox({key:"legend-"+ee.text+"-"+le,margin:U,flexDirection:$},se),ce.createElement(vse,{shape:a,height:E,width:x,margin:T,item:q[le],itemIndex:le,label:ee,fill:c,size:h,shapeStyle:M}),ce.createElement(mse,Ox({label:ee.text,flex:R,margin:D,align:A},z)))}))}bse.propTypes={children:ne.func,className:ne.string,domain:ne.array,shapeWidth:ne.oneOfType([ne.string,ne.number]),shapeHeight:ne.oneOfType([ne.string,ne.number]),shapeMargin:ne.oneOfType([ne.string,ne.number]),labelAlign:ne.string,labelFlex:ne.oneOfType([ne.string,ne.number]),labelMargin:ne.oneOfType([ne.string,ne.number]),itemMargin:ne.oneOfType([ne.string,ne.number]),fill:ne.func,size:ne.func,shapeStyle:ne.func};function _5e(r){var e=r.steps,n=e===void 0?5:e,i=r.scale,s=i.domain(),a=s[0],o=s[s.length-1];if(typeof a=="number"&&typeof o=="number"){var l=(o-a)/(n-1);return new Array(n).fill(1).reduce(function(c,u,h){return c.push(a+h*l),c},[])}return[]}var w5e=["scale","domain","steps"];function wF(){return wF=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])}return r},wF.apply(this,arguments)}function S5e(r,e){if(r==null)return{};var n={},i=Object.keys(r),s,a;for(a=0;a<i.length;a++)s=i[a],!(e.indexOf(s)>=0)&&(n[s]=r[s]);return n}function _se(r){var e=r.scale,n=r.domain,i=r.steps,s=i===void 0?5:i,a=S5e(r,w5e),o=n||_5e({steps:s,scale:e});return ce.createElement(bse,wF({scale:e,domain:o},a))}_se.propTypes={steps:ne.number};const wse=({data:r=null})=>{const[e,n]=X.useState(null),[i,s]=X.useState(60),o=r||{bins:[{bin:0,label:"Homepage",counts:[{bin:0,count:100},{bin:1,count:35},{bin:2,count:28},{bin:3,count:12},{bin:4,count:15},{bin:5,count:8},{bin:6,count:10},{bin:7,count:5},{bin:8,count:15},{bin:9,count:20}]},{bin:1,label:"About",counts:[{bin:0,count:35},{bin:1,count:100},{bin:2,count:45},{bin:3,count:30},{bin:4,count:20},{bin:5,count:25},{bin:6,count:15},{bin:7,count:5},{bin:8,count:20},{bin:9,count:25}]},{bin:2,label:"Products",counts:[{bin:0,count:28},{bin:1,count:45},{bin:2,count:100},{bin:3,count:75},{bin:4,count:82},{bin:5,count:40},{bin:6,count:35},{bin:7,count:25},{bin:8,count:15},{bin:9,count:22}]},{bin:3,label:"Product-1",counts:[{bin:0,count:12},{bin:1,count:30},{bin:2,count:75},{bin:3,count:100},{bin:4,count:88},{bin:5,count:42},{bin:6,count:30},{bin:7,count:28},{bin:8,count:12},{bin:9,count:18}]},{bin:4,label:"Product-2",counts:[{bin:0,count:15},{bin:1,count:20},{bin:2,count:82},{bin:3,count:88},{bin:4,count:100},{bin:5,count:45},{bin:6,count:32},{bin:7,count:35},{bin:8,count:10},{bin:9,count:15}]},{bin:5,label:"Services",counts:[{bin:0,count:8},{bin:1,count:25},{bin:2,count:40},{bin:3,count:42},{bin:4,count:45},{bin:5,count:100},{bin:6,count:78},{bin:7,count:68},{bin:8,count:25},{bin:9,count:35}]},{bin:6,label:"Service-1",counts:[{bin:0,count:10},{bin:1,count:15},{bin:2,count:35},{bin:3,count:30},{bin:4,count:32},{bin:5,count:78},{bin:6,count:100},{bin:7,count:85},{bin:8,count:32},{bin:9,count:38}]},{bin:7,label:"Service-2",counts:[{bin:0,count:5},{bin:1,count:5},{bin:2,count:25},{bin:3,count:28},{bin:4,count:35},{bin:5,count:68},{bin:6,count:85},{bin:7,count:100},{bin:8,count:30},{bin:9,count:42}]},{bin:8,label:"Blog",counts:[{bin:0,count:15},{bin:1,count:20},{bin:2,count:15},{bin:3,count:12},{bin:4,count:10},{bin:5,count:25},{bin:6,count:32},{bin:7,count:30},{bin:8,count:100},{bin:9,count:88}]},{bin:9,label:"Contact",counts:[{bin:0,count:20},{bin:1,count:25},{bin:2,count:22},{bin:3,count:18},{bin:4,count:15},{bin:5,count:35},{bin:6,count:38},{bin:7,count:42},{bin:8,count:88},{bin:9,count:100}]}],urls:["/","/about","/products","/products/product-1","/products/product-2","/services","/services/service-1","/services/service-2","/blog","/contact"]},l=600,c=400,u={top:60,right:80,bottom:100,left:100},h=l-u.left-u.right,d=c-u.top-u.bottom,f=h/o.bins[0].counts.length,p=d/o.bins.length,g=HR({domain:[0,o.bins[0].counts.length],range:[0,h]}),v=HR({domain:[0,o.bins.length],range:[0,d]}),x=HR({domain:[0,100],range:["#ebf5ee","#ff0000"]}),_={...o,bins:o.bins.map(S=>({...S,counts:S.counts.map(T=>({...T,count:T.count<i?0:T.count}))}))},E=(S,T)=>{n({page1:o.bins[S.bin].label,page2:o.bins[T.bin].label,similarity:T.count,url1:o.urls[S.bin],url2:o.urls[T.bin]})};return b.jsxs("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:[b.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:b.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"Content Duplication Map"})}),b.jsxs("div",{className:"p-6",children:[b.jsx("div",{className:"text-sm text-gray-500 mb-4",children:"This heatmap shows content similarity between pages. Red cells indicate higher similarity which may suggest duplicate content issues."}),b.jsxs("div",{className:"mb-4",children:[b.jsxs("label",{htmlFor:"threshold",className:"block text-sm font-medium text-gray-700 mb-1",children:["Similarity Threshold: ",i,"%"]}),b.jsx("input",{type:"range",id:"threshold",name:"threshold",min:"0",max:"100",value:i,onChange:S=>s(parseInt(S.target.value)),className:"w-full"})]}),b.jsx("div",{className:"overflow-auto",children:b.jsxs("svg",{width:l,height:c,children:[b.jsxs(zd,{left:u.left,top:u.top,children:[b.jsx(ose,{data:_.bins,xScale:g,yScale:v,colorScale:x,binWidth:f,binHeight:p,gap:2,onClick:E}),b.jsx(h5e,{scale:g,top:d,tickFormat:S=>o.bins[S]?o.bins[S].label:"",numTicks:o.bins.length,tickLabelProps:()=>({angle:-45,textAnchor:"end",fontSize:10,fill:"#6b7280"})}),b.jsx(o5e,{scale:v,tickFormat:S=>o.bins[S]?o.bins[S].label:"",numTicks:o.bins.length,tickLabelProps:()=>({fontSize:10,textAnchor:"end",dx:"-0.25em",dy:"0.25em",fill:"#6b7280"})}),b.jsx("text",{x:-240/2,y:-60,transform:"rotate(-90)",fontSize:12,textAnchor:"middle",fill:"#4b5563",children:"Page"}),b.jsx("text",{x:h/2,y:d+60,fontSize:12,textAnchor:"middle",fill:"#4b5563",children:"Page"})]}),b.jsx(zd,{left:l-u.right+20,top:u.top,children:b.jsx(_se,{scale:x,steps:5,labelFormat:S=>`${Math.round(S)}%`,shape:"rect",itemHeight:15,itemWidth:25})})]})}),e&&b.jsxs("div",{className:"mt-4 p-4 border border-gray-200 rounded-lg bg-gray-50",children:[b.jsx("h3",{className:"font-medium text-gray-800 mb-2",children:"Duplicate Content Details"}),b.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[b.jsxs("div",{children:[b.jsx("p",{className:"text-sm text-gray-600",children:"Page 1:"}),b.jsx("p",{className:"font-medium",children:e.page1}),b.jsx("p",{className:"text-sm text-blue-600",children:e.url1})]}),b.jsxs("div",{children:[b.jsx("p",{className:"text-sm text-gray-600",children:"Page 2:"}),b.jsx("p",{className:"font-medium",children:e.page2}),b.jsx("p",{className:"text-sm text-blue-600",children:e.url2})]})]}),b.jsxs("div",{className:"mt-2",children:[b.jsx("p",{className:"text-sm text-gray-600",children:"Similarity:"}),b.jsxs("p",{className:"font-medium",children:[e.similarity,"%"]})]}),b.jsxs("div",{className:"mt-4 flex gap-2",children:[b.jsx("button",{className:"px-3 py-1 bg-indigo-600 text-white text-sm rounded hover:bg-indigo-700",children:"View Details"}),b.jsx("button",{className:"px-3 py-1 border border-gray-300 text-sm rounded hover:bg-gray-50",children:"Resolve Issue"})]})]})]})]})};function Sse(r){var e,n,i="";if(typeof r=="string"||typeof r=="number")i+=r;else if(typeof r=="object")if(Array.isArray(r)){var s=r.length;for(e=0;e<s;e++)r[e]&&(n=Sse(r[e]))&&(i&&(i+=" "),i+=n)}else for(n in r)r[n]&&(i&&(i+=" "),i+=n);return i}function mr(){for(var r,e,n=0,i="",s=arguments.length;n<s;n++)(r=arguments[n])&&(e=Sse(r))&&(i&&(i+=" "),i+=e);return i}var VO,dq;function ao(){if(dq)return VO;dq=1;var r=Array.isArray;return VO=r,VO}var HO,fq;function Tse(){if(fq)return HO;fq=1;var r=typeof wd=="object"&&wd&&wd.Object===Object&&wd;return HO=r,HO}var WO,pq;function iu(){if(pq)return WO;pq=1;var r=Tse(),e=typeof self=="object"&&self&&self.Object===Object&&self,n=r||e||Function("return this")();return WO=n,WO}var qO,mq;function G_(){if(mq)return qO;mq=1;var r=iu(),e=r.Symbol;return qO=e,qO}var XO,gq;function T5e(){if(gq)return XO;gq=1;var r=G_(),e=Object.prototype,n=e.hasOwnProperty,i=e.toString,s=r?r.toStringTag:void 0;function a(o){var l=n.call(o,s),c=o[s];try{o[s]=void 0;var u=!0}catch{}var h=i.call(o);return u&&(l?o[s]=c:delete o[s]),h}return XO=a,XO}var KO,yq;function E5e(){if(yq)return KO;yq=1;var r=Object.prototype,e=r.toString;function n(i){return e.call(i)}return KO=n,KO}var YO,vq;function Ch(){if(vq)return YO;vq=1;var r=G_(),e=T5e(),n=E5e(),i="[object Null]",s="[object Undefined]",a=r?r.toStringTag:void 0;function o(l){return l==null?l===void 0?s:i:a&&a in Object(l)?e(l):n(l)}return YO=o,YO}var ZO,xq;function Nh(){if(xq)return ZO;xq=1;function r(e){return e!=null&&typeof e=="object"}return ZO=r,ZO}var QO,bq;function p0(){if(bq)return QO;bq=1;var r=Ch(),e=Nh(),n="[object Symbol]";function i(s){return typeof s=="symbol"||e(s)&&r(s)==n}return QO=i,QO}var JO,_q;function cz(){if(_q)return JO;_q=1;var r=ao(),e=p0(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,i=/^\w*$/;function s(a,o){if(r(a))return!1;var l=typeof a;return l=="number"||l=="symbol"||l=="boolean"||a==null||e(a)?!0:i.test(a)||!n.test(a)||o!=null&&a in Object(o)}return JO=s,JO}var ek,wq;function tf(){if(wq)return ek;wq=1;function r(e){var n=typeof e;return e!=null&&(n=="object"||n=="function")}return ek=r,ek}var tk,Sq;function uz(){if(Sq)return tk;Sq=1;var r=Ch(),e=tf(),n="[object AsyncFunction]",i="[object Function]",s="[object GeneratorFunction]",a="[object Proxy]";function o(l){if(!e(l))return!1;var c=r(l);return c==i||c==s||c==n||c==a}return tk=o,tk}var nk,Tq;function M5e(){if(Tq)return nk;Tq=1;var r=iu(),e=r["__core-js_shared__"];return nk=e,nk}var rk,Eq;function A5e(){if(Eq)return rk;Eq=1;var r=M5e(),e=function(){var i=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||"");return i?"Symbol(src)_1."+i:""}();function n(i){return!!e&&e in i}return rk=n,rk}var ik,Mq;function Ese(){if(Mq)return ik;Mq=1;var r=Function.prototype,e=r.toString;function n(i){if(i!=null){try{return e.call(i)}catch{}try{return i+""}catch{}}return""}return ik=n,ik}var sk,Aq;function C5e(){if(Aq)return sk;Aq=1;var r=uz(),e=A5e(),n=tf(),i=Ese(),s=/[\\^$.*+?()[\]{}|]/g,a=/^\[object .+?Constructor\]$/,o=Function.prototype,l=Object.prototype,c=o.toString,u=l.hasOwnProperty,h=RegExp("^"+c.call(u).replace(s,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function d(f){if(!n(f)||e(f))return!1;var p=r(f)?h:a;return p.test(i(f))}return sk=d,sk}var ak,Cq;function N5e(){if(Cq)return ak;Cq=1;function r(e,n){return e==null?void 0:e[n]}return ak=r,ak}var ok,Nq;function Gp(){if(Nq)return ok;Nq=1;var r=C5e(),e=N5e();function n(i,s){var a=e(i,s);return r(a)?a:void 0}return ok=n,ok}var lk,Pq;function bA(){if(Pq)return lk;Pq=1;var r=Gp(),e=r(Object,"create");return lk=e,lk}var ck,Rq;function P5e(){if(Rq)return ck;Rq=1;var r=bA();function e(){this.__data__=r?r(null):{},this.size=0}return ck=e,ck}var uk,Oq;function R5e(){if(Oq)return uk;Oq=1;function r(e){var n=this.has(e)&&delete this.__data__[e];return this.size-=n?1:0,n}return uk=r,uk}var hk,kq;function O5e(){if(kq)return hk;kq=1;var r=bA(),e="__lodash_hash_undefined__",n=Object.prototype,i=n.hasOwnProperty;function s(a){var o=this.__data__;if(r){var l=o[a];return l===e?void 0:l}return i.call(o,a)?o[a]:void 0}return hk=s,hk}var dk,Iq;function k5e(){if(Iq)return dk;Iq=1;var r=bA(),e=Object.prototype,n=e.hasOwnProperty;function i(s){var a=this.__data__;return r?a[s]!==void 0:n.call(a,s)}return dk=i,dk}var fk,Dq;function I5e(){if(Dq)return fk;Dq=1;var r=bA(),e="__lodash_hash_undefined__";function n(i,s){var a=this.__data__;return this.size+=this.has(i)?0:1,a[i]=r&&s===void 0?e:s,this}return fk=n,fk}var pk,Lq;function D5e(){if(Lq)return pk;Lq=1;var r=P5e(),e=R5e(),n=O5e(),i=k5e(),s=I5e();function a(o){var l=-1,c=o==null?0:o.length;for(this.clear();++l<c;){var u=o[l];this.set(u[0],u[1])}}return a.prototype.clear=r,a.prototype.delete=e,a.prototype.get=n,a.prototype.has=i,a.prototype.set=s,pk=a,pk}var mk,Fq;function L5e(){if(Fq)return mk;Fq=1;function r(){this.__data__=[],this.size=0}return mk=r,mk}var gk,Bq;function hz(){if(Bq)return gk;Bq=1;function r(e,n){return e===n||e!==e&&n!==n}return gk=r,gk}var yk,jq;function _A(){if(jq)return yk;jq=1;var r=hz();function e(n,i){for(var s=n.length;s--;)if(r(n[s][0],i))return s;return-1}return yk=e,yk}var vk,Uq;function F5e(){if(Uq)return vk;Uq=1;var r=_A(),e=Array.prototype,n=e.splice;function i(s){var a=this.__data__,o=r(a,s);if(o<0)return!1;var l=a.length-1;return o==l?a.pop():n.call(a,o,1),--this.size,!0}return vk=i,vk}var xk,zq;function B5e(){if(zq)return xk;zq=1;var r=_A();function e(n){var i=this.__data__,s=r(i,n);return s<0?void 0:i[s][1]}return xk=e,xk}var bk,$q;function j5e(){if($q)return bk;$q=1;var r=_A();function e(n){return r(this.__data__,n)>-1}return bk=e,bk}var _k,Gq;function U5e(){if(Gq)return _k;Gq=1;var r=_A();function e(n,i){var s=this.__data__,a=r(s,n);return a<0?(++this.size,s.push([n,i])):s[a][1]=i,this}return _k=e,_k}var wk,Vq;function wA(){if(Vq)return wk;Vq=1;var r=L5e(),e=F5e(),n=B5e(),i=j5e(),s=U5e();function a(o){var l=-1,c=o==null?0:o.length;for(this.clear();++l<c;){var u=o[l];this.set(u[0],u[1])}}return a.prototype.clear=r,a.prototype.delete=e,a.prototype.get=n,a.prototype.has=i,a.prototype.set=s,wk=a,wk}var Sk,Hq;function dz(){if(Hq)return Sk;Hq=1;var r=Gp(),e=iu(),n=r(e,"Map");return Sk=n,Sk}var Tk,Wq;function z5e(){if(Wq)return Tk;Wq=1;var r=D5e(),e=wA(),n=dz();function i(){this.size=0,this.__data__={hash:new r,map:new(n||e),string:new r}}return Tk=i,Tk}var Ek,qq;function $5e(){if(qq)return Ek;qq=1;function r(e){var n=typeof e;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?e!=="__proto__":e===null}return Ek=r,Ek}var Mk,Xq;function SA(){if(Xq)return Mk;Xq=1;var r=$5e();function e(n,i){var s=n.__data__;return r(i)?s[typeof i=="string"?"string":"hash"]:s.map}return Mk=e,Mk}var Ak,Kq;function G5e(){if(Kq)return Ak;Kq=1;var r=SA();function e(n){var i=r(this,n).delete(n);return this.size-=i?1:0,i}return Ak=e,Ak}var Ck,Yq;function V5e(){if(Yq)return Ck;Yq=1;var r=SA();function e(n){return r(this,n).get(n)}return Ck=e,Ck}var Nk,Zq;function H5e(){if(Zq)return Nk;Zq=1;var r=SA();function e(n){return r(this,n).has(n)}return Nk=e,Nk}var Pk,Qq;function W5e(){if(Qq)return Pk;Qq=1;var r=SA();function e(n,i){var s=r(this,n),a=s.size;return s.set(n,i),this.size+=s.size==a?0:1,this}return Pk=e,Pk}var Rk,Jq;function fz(){if(Jq)return Rk;Jq=1;var r=z5e(),e=G5e(),n=V5e(),i=H5e(),s=W5e();function a(o){var l=-1,c=o==null?0:o.length;for(this.clear();++l<c;){var u=o[l];this.set(u[0],u[1])}}return a.prototype.clear=r,a.prototype.delete=e,a.prototype.get=n,a.prototype.has=i,a.prototype.set=s,Rk=a,Rk}var Ok,e7;function Mse(){if(e7)return Ok;e7=1;var r=fz(),e="Expected a function";function n(i,s){if(typeof i!="function"||s!=null&&typeof s!="function")throw new TypeError(e);var a=function(){var o=arguments,l=s?s.apply(this,o):o[0],c=a.cache;if(c.has(l))return c.get(l);var u=i.apply(this,o);return a.cache=c.set(l,u)||c,u};return a.cache=new(n.Cache||r),a}return n.Cache=r,Ok=n,Ok}var kk,t7;function q5e(){if(t7)return kk;t7=1;var r=Mse(),e=500;function n(i){var s=r(i,function(o){return a.size===e&&a.clear(),o}),a=s.cache;return s}return kk=n,kk}var Ik,n7;function X5e(){if(n7)return Ik;n7=1;var r=q5e(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,n=/\\(\\)?/g,i=r(function(s){var a=[];return s.charCodeAt(0)===46&&a.push(""),s.replace(e,function(o,l,c,u){a.push(c?u.replace(n,"$1"):l||o)}),a});return Ik=i,Ik}var Dk,r7;function pz(){if(r7)return Dk;r7=1;function r(e,n){for(var i=-1,s=e==null?0:e.length,a=Array(s);++i<s;)a[i]=n(e[i],i,e);return a}return Dk=r,Dk}var Lk,i7;function K5e(){if(i7)return Lk;i7=1;var r=G_(),e=pz(),n=ao(),i=p0(),s=r?r.prototype:void 0,a=s?s.toString:void 0;function o(l){if(typeof l=="string")return l;if(n(l))return e(l,o)+"";if(i(l))return a?a.call(l):"";var c=l+"";return c=="0"&&1/l==-1/0?"-0":c}return Lk=o,Lk}var Fk,s7;function Ase(){if(s7)return Fk;s7=1;var r=K5e();function e(n){return n==null?"":r(n)}return Fk=e,Fk}var Bk,a7;function Cse(){if(a7)return Bk;a7=1;var r=ao(),e=cz(),n=X5e(),i=Ase();function s(a,o){return r(a)?a:e(a,o)?[a]:n(i(a))}return Bk=s,Bk}var jk,o7;function TA(){if(o7)return jk;o7=1;var r=p0();function e(n){if(typeof n=="string"||r(n))return n;var i=n+"";return i=="0"&&1/n==-1/0?"-0":i}return jk=e,jk}var Uk,l7;function mz(){if(l7)return Uk;l7=1;var r=Cse(),e=TA();function n(i,s){s=r(s,i);for(var a=0,o=s.length;i!=null&&a<o;)i=i[e(s[a++])];return a&&a==o?i:void 0}return Uk=n,Uk}var zk,c7;function Nse(){if(c7)return zk;c7=1;var r=mz();function e(n,i,s){var a=n==null?void 0:r(n,i);return a===void 0?s:a}return zk=e,zk}var Y5e=Nse();const pl=_r(Y5e);var $k,u7;function Z5e(){if(u7)return $k;u7=1;function r(e){return e==null}return $k=r,$k}var Q5e=Z5e();const Gn=_r(Q5e);var Gk,h7;function J5e(){if(h7)return Gk;h7=1;var r=Ch(),e=ao(),n=Nh(),i="[object String]";function s(a){return typeof a=="string"||!e(a)&&n(a)&&r(a)==i}return Gk=s,Gk}var e$e=J5e();const V_=_r(e$e);var t$e=uz();const Wn=_r(t$e);var n$e=tf();const m0=_r(n$e);var Vk={exports:{}},kr={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var d7;function r$e(){if(d7)return kr;d7=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),o=Symbol.for("react.context"),l=Symbol.for("react.server_context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.suspense_list"),d=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),p=Symbol.for("react.offscreen"),g;g=Symbol.for("react.module.reference");function v(x){if(typeof x=="object"&&x!==null){var _=x.$$typeof;switch(_){case r:switch(x=x.type,x){case n:case s:case i:case u:case h:return x;default:switch(x=x&&x.$$typeof,x){case l:case o:case c:case f:case d:case a:return x;default:return _}}case e:return _}}}return kr.ContextConsumer=o,kr.ContextProvider=a,kr.Element=r,kr.ForwardRef=c,kr.Fragment=n,kr.Lazy=f,kr.Memo=d,kr.Portal=e,kr.Profiler=s,kr.StrictMode=i,kr.Suspense=u,kr.SuspenseList=h,kr.isAsyncMode=function(){return!1},kr.isConcurrentMode=function(){return!1},kr.isContextConsumer=function(x){return v(x)===o},kr.isContextProvider=function(x){return v(x)===a},kr.isElement=function(x){return typeof x=="object"&&x!==null&&x.$$typeof===r},kr.isForwardRef=function(x){return v(x)===c},kr.isFragment=function(x){return v(x)===n},kr.isLazy=function(x){return v(x)===f},kr.isMemo=function(x){return v(x)===d},kr.isPortal=function(x){return v(x)===e},kr.isProfiler=function(x){return v(x)===s},kr.isStrictMode=function(x){return v(x)===i},kr.isSuspense=function(x){return v(x)===u},kr.isSuspenseList=function(x){return v(x)===h},kr.isValidElementType=function(x){return typeof x=="string"||typeof x=="function"||x===n||x===s||x===i||x===u||x===h||x===p||typeof x=="object"&&x!==null&&(x.$$typeof===f||x.$$typeof===d||x.$$typeof===a||x.$$typeof===o||x.$$typeof===c||x.$$typeof===g||x.getModuleId!==void 0)},kr.typeOf=v,kr}var f7;function i$e(){return f7||(f7=1,Vk.exports=r$e()),Vk.exports}var s$e=i$e(),Hk,p7;function Pse(){if(p7)return Hk;p7=1;var r=Ch(),e=Nh(),n="[object Number]";function i(s){return typeof s=="number"||e(s)&&r(s)==n}return Hk=i,Hk}var Wk,m7;function a$e(){if(m7)return Wk;m7=1;var r=Pse();function e(n){return r(n)&&n!=+n}return Wk=e,Wk}var o$e=a$e();const g0=_r(o$e);var l$e=Pse();const c$e=_r(l$e);var rc=function(e){return e===0?0:e>0?1:-1},ap=function(e){return V_(e)&&e.indexOf("%")===e.length-1},bt=function(e){return c$e(e)&&!g0(e)},fs=function(e){return bt(e)||V_(e)},u$e=0,Vp=function(e){var n=++u$e;return"".concat(e||"").concat(n)},Rp=function(e,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!bt(e)&&!V_(e))return i;var a;if(ap(e)){var o=e.indexOf("%");a=n*parseFloat(e.slice(0,o))/100}else a=+e;return g0(a)&&(a=i),s&&a>n&&(a=n),a},_d=function(e){if(!e)return null;var n=Object.keys(e);return n&&n.length?e[n[0]]:null},h$e=function(e){if(!Array.isArray(e))return!1;for(var n=e.length,i={},s=0;s<n;s++)if(!i[e[s]])i[e[s]]=!0;else return!0;return!1},Ui=function(e,n){return bt(e)&&bt(n)?function(i){return e+i*(n-e)}:function(){return n}};function bE(r,e,n){return!r||!r.length?null:r.find(function(i){return i&&(typeof e=="function"?e(i):pl(i,e))===n})}var d$e=function(e){if(!e||!e.length)return null;for(var n=e.length,i=0,s=0,a=0,o=0,l=1/0,c=-1/0,u=0,h=0,d=0;d<n;d++)u=e[d].cx||0,h=e[d].cy||0,i+=u,s+=h,a+=u*h,o+=u*u,l=Math.min(l,u),c=Math.max(c,u);var f=n*o!==i*i?(n*a-i*s)/(n*o-i*i):0;return{xmin:l,xmax:c,a:f,b:(s-f*i)/n}};function Xg(r,e){for(var n in r)if({}.hasOwnProperty.call(r,n)&&(!{}.hasOwnProperty.call(e,n)||r[n]!==e[n]))return!1;for(var i in e)if({}.hasOwnProperty.call(e,i)&&!{}.hasOwnProperty.call(r,i))return!1;return!0}function SF(r){"@babel/helpers - typeof";return SF=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},SF(r)}var f$e=["viewBox","children"],p$e=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],g7=["points","pathLength"],qk={svg:f$e,polygon:g7,polyline:g7},gz=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],_E=function(e,n){if(!e||typeof e=="function"||typeof e=="boolean")return null;var i=e;if(X.isValidElement(e)&&(i=e.props),!m0(i))return null;var s={};return Object.keys(i).forEach(function(a){gz.includes(a)&&(s[a]=n||function(o){return i[a](i,o)})}),s},m$e=function(e,n,i){return function(s){return e(n,i,s),null}},Db=function(e,n,i){if(!m0(e)||SF(e)!=="object")return null;var s=null;return Object.keys(e).forEach(function(a){var o=e[a];gz.includes(a)&&typeof o=="function"&&(s||(s={}),s[a]=m$e(o,n,i))}),s},g$e=["children"],y$e=["children"];function y7(r,e){if(r==null)return{};var n=v$e(r,e),i,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);for(s=0;s<a.length;s++)i=a[s],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(r,i)&&(n[i]=r[i])}return n}function v$e(r,e){if(r==null)return{};var n={};for(var i in r)if(Object.prototype.hasOwnProperty.call(r,i)){if(e.indexOf(i)>=0)continue;n[i]=r[i]}return n}function TF(r){"@babel/helpers - typeof";return TF=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},TF(r)}var v7={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},uh=function(e){return typeof e=="string"?e:e?e.displayName||e.name||"Component":""},x7=null,Xk=null,yz=function r(e){if(e===x7&&Array.isArray(Xk))return Xk;var n=[];return X.Children.forEach(e,function(i){Gn(i)||(s$e.isFragment(i)?n=n.concat(r(i.props.children)):n.push(i))}),Xk=n,x7=e,n};function no(r,e){var n=[],i=[];return Array.isArray(e)?i=e.map(function(s){return uh(s)}):i=[uh(e)],yz(r).forEach(function(s){var a=pl(s,"type.displayName")||pl(s,"type.name");i.indexOf(a)!==-1&&n.push(s)}),n}function Co(r,e){var n=no(r,e);return n&&n[0]}var b7=function(e){if(!e||!e.props)return!1;var n=e.props,i=n.width,s=n.height;return!(!bt(i)||i<=0||!bt(s)||s<=0)},x$e=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],b$e=function(e){return e&&e.type&&V_(e.type)&&x$e.indexOf(e.type)>=0},Rse=function(e){return e&&TF(e)==="object"&&"clipDot"in e},_$e=function(e,n,i,s){var a,o=(a=qk==null?void 0:qk[s])!==null&&a!==void 0?a:[];return n.startsWith("data-")||!Wn(e)&&(s&&o.includes(n)||p$e.includes(n))||i&&gz.includes(n)},$n=function(e,n,i){if(!e||typeof e=="function"||typeof e=="boolean")return null;var s=e;if(X.isValidElement(e)&&(s=e.props),!m0(s))return null;var a={};return Object.keys(s).forEach(function(o){var l;_$e((l=s)===null||l===void 0?void 0:l[o],o,n,i)&&(a[o]=s[o])}),a},EF=function r(e,n){if(e===n)return!0;var i=X.Children.count(e);if(i!==X.Children.count(n))return!1;if(i===0)return!0;if(i===1)return _7(Array.isArray(e)?e[0]:e,Array.isArray(n)?n[0]:n);for(var s=0;s<i;s++){var a=e[s],o=n[s];if(Array.isArray(a)||Array.isArray(o)){if(!r(a,o))return!1}else if(!_7(a,o))return!1}return!0},_7=function(e,n){if(Gn(e)&&Gn(n))return!0;if(!Gn(e)&&!Gn(n)){var i=e.props||{},s=i.children,a=y7(i,g$e),o=n.props||{},l=o.children,c=y7(o,y$e);return s&&l?Xg(a,c)&&EF(s,l):!s&&!l?Xg(a,c):!1}return!1},w7=function(e,n){var i=[],s={};return yz(e).forEach(function(a,o){if(b$e(a))i.push(a);else if(a){var l=uh(a.type),c=n[l]||{},u=c.handler,h=c.once;if(u&&(!h||!s[l])){var d=u(a,l,o);i.push(d),s[l]=!0}}}),i},w$e=function(e){var n=e&&e.type;return n&&v7[n]?v7[n]:null},S$e=function(e,n){return yz(n).indexOf(e)},T$e=["children","width","height","viewBox","className","style","title","desc"];function MF(){return MF=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])}return r},MF.apply(this,arguments)}function E$e(r,e){if(r==null)return{};var n=M$e(r,e),i,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);for(s=0;s<a.length;s++)i=a[s],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(r,i)&&(n[i]=r[i])}return n}function M$e(r,e){if(r==null)return{};var n={};for(var i in r)if(Object.prototype.hasOwnProperty.call(r,i)){if(e.indexOf(i)>=0)continue;n[i]=r[i]}return n}function AF(r){var e=r.children,n=r.width,i=r.height,s=r.viewBox,a=r.className,o=r.style,l=r.title,c=r.desc,u=E$e(r,T$e),h=s||{width:n,height:i,x:0,y:0},d=mr("recharts-surface",a);return ce.createElement("svg",MF({},$n(u,!0,"svg"),{className:d,width:n,height:i,style:o,viewBox:"".concat(h.x," ").concat(h.y," ").concat(h.width," ").concat(h.height)}),ce.createElement("title",null,l),ce.createElement("desc",null,c),e)}var A$e=["children","className"];function CF(){return CF=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])}return r},CF.apply(this,arguments)}function C$e(r,e){if(r==null)return{};var n=N$e(r,e),i,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);for(s=0;s<a.length;s++)i=a[s],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(r,i)&&(n[i]=r[i])}return n}function N$e(r,e){if(r==null)return{};var n={};for(var i in r)if(Object.prototype.hasOwnProperty.call(r,i)){if(e.indexOf(i)>=0)continue;n[i]=r[i]}return n}var Pr=ce.forwardRef(function(r,e){var n=r.children,i=r.className,s=C$e(r,A$e),a=mr("recharts-layer",i);return ce.createElement("g",CF({className:a},$n(s,!0),{ref:e}),n)}),hh=function(e,n){for(var i=arguments.length,s=new Array(i>2?i-2:0),a=2;a<i;a++)s[a-2]=arguments[a]},Kk,S7;function P$e(){if(S7)return Kk;S7=1;function r(e,n,i){var s=-1,a=e.length;n<0&&(n=-n>a?0:a+n),i=i>a?a:i,i<0&&(i+=a),a=n>i?0:i-n>>>0,n>>>=0;for(var o=Array(a);++s<a;)o[s]=e[s+n];return o}return Kk=r,Kk}var Yk,T7;function R$e(){if(T7)return Yk;T7=1;var r=P$e();function e(n,i,s){var a=n.length;return s=s===void 0?a:s,!i&&s>=a?n:r(n,i,s)}return Yk=e,Yk}var Zk,E7;function Ose(){if(E7)return Zk;E7=1;var r="\\ud800-\\udfff",e="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",i="\\u20d0-\\u20ff",s=e+n+i,a="\\ufe0e\\ufe0f",o="\\u200d",l=RegExp("["+o+r+s+a+"]");function c(u){return l.test(u)}return Zk=c,Zk}var Qk,M7;function O$e(){if(M7)return Qk;M7=1;function r(e){return e.split("")}return Qk=r,Qk}var Jk,A7;function k$e(){if(A7)return Jk;A7=1;var r="\\ud800-\\udfff",e="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",i="\\u20d0-\\u20ff",s=e+n+i,a="\\ufe0e\\ufe0f",o="["+r+"]",l="["+s+"]",c="\\ud83c[\\udffb-\\udfff]",u="(?:"+l+"|"+c+")",h="[^"+r+"]",d="(?:\\ud83c[\\udde6-\\uddff]){2}",f="[\\ud800-\\udbff][\\udc00-\\udfff]",p="\\u200d",g=u+"?",v="["+a+"]?",x="(?:"+p+"(?:"+[h,d,f].join("|")+")"+v+g+")*",_=v+g+x,E="(?:"+[h+l+"?",l,d,f,o].join("|")+")",S=RegExp(c+"(?="+c+")|"+E+_,"g");function T(M){return M.match(S)||[]}return Jk=T,Jk}var eI,C7;function I$e(){if(C7)return eI;C7=1;var r=O$e(),e=Ose(),n=k$e();function i(s){return e(s)?n(s):r(s)}return eI=i,eI}var tI,N7;function D$e(){if(N7)return tI;N7=1;var r=R$e(),e=Ose(),n=I$e(),i=Ase();function s(a){return function(o){o=i(o);var l=e(o)?n(o):void 0,c=l?l[0]:o.charAt(0),u=l?r(l,1).join(""):o.slice(1);return c[a]()+u}}return tI=s,tI}var nI,P7;function L$e(){if(P7)return nI;P7=1;var r=D$e(),e=r("toUpperCase");return nI=e,nI}var F$e=L$e();const EA=_r(F$e);function Jr(r){return function(){return r}}const kse=Math.cos,wE=Math.sin,dc=Math.sqrt,SE=Math.PI,MA=2*SE,NF=Math.PI,PF=2*NF,Kf=1e-6,B$e=PF-Kf;function Ise(r){this._+=r[0];for(let e=1,n=r.length;e<n;++e)this._+=arguments[e]+r[e]}function j$e(r){let e=Math.floor(r);if(!(e>=0))throw new Error(`invalid digits: ${r}`);if(e>15)return Ise;const n=10**e;return function(i){this._+=i[0];for(let s=1,a=i.length;s<a;++s)this._+=Math.round(arguments[s]*n)/n+i[s]}}class U$e{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?Ise:j$e(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,i,s){this._append`Q${+e},${+n},${this._x1=+i},${this._y1=+s}`}bezierCurveTo(e,n,i,s,a,o){this._append`C${+e},${+n},${+i},${+s},${this._x1=+a},${this._y1=+o}`}arcTo(e,n,i,s,a){if(e=+e,n=+n,i=+i,s=+s,a=+a,a<0)throw new Error(`negative radius: ${a}`);let o=this._x1,l=this._y1,c=i-e,u=s-n,h=o-e,d=l-n,f=h*h+d*d;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(f>Kf)if(!(Math.abs(d*c-u*h)>Kf)||!a)this._append`L${this._x1=e},${this._y1=n}`;else{let p=i-o,g=s-l,v=c*c+u*u,x=p*p+g*g,_=Math.sqrt(v),E=Math.sqrt(f),S=a*Math.tan((NF-Math.acos((v+f-x)/(2*_*E)))/2),T=S/E,M=S/_;Math.abs(T-1)>Kf&&this._append`L${e+T*h},${n+T*d}`,this._append`A${a},${a},0,0,${+(d*p>h*g)},${this._x1=e+M*c},${this._y1=n+M*u}`}}arc(e,n,i,s,a,o){if(e=+e,n=+n,i=+i,o=!!o,i<0)throw new Error(`negative radius: ${i}`);let l=i*Math.cos(s),c=i*Math.sin(s),u=e+l,h=n+c,d=1^o,f=o?s-a:a-s;this._x1===null?this._append`M${u},${h}`:(Math.abs(this._x1-u)>Kf||Math.abs(this._y1-h)>Kf)&&this._append`L${u},${h}`,i&&(f<0&&(f=f%PF+PF),f>B$e?this._append`A${i},${i},0,1,${d},${e-l},${n-c}A${i},${i},0,1,${d},${this._x1=u},${this._y1=h}`:f>Kf&&this._append`A${i},${i},0,${+(f>=NF)},${d},${this._x1=e+i*Math.cos(a)},${this._y1=n+i*Math.sin(a)}`)}rect(e,n,i,s){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${i=+i}v${+s}h${-i}Z`}toString(){return this._}}function vz(r){let e=3;return r.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const i=Math.floor(n);if(!(i>=0))throw new RangeError(`invalid digits: ${n}`);e=i}return r},()=>new U$e(e)}function xz(r){return typeof r=="object"&&"length"in r?r:Array.from(r)}function Dse(r){this._context=r}Dse.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(r,e){switch(r=+r,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(r,e):this._context.moveTo(r,e);break;case 1:this._point=2;default:this._context.lineTo(r,e);break}}};function AA(r){return new Dse(r)}function Lse(r){return r[0]}function Fse(r){return r[1]}function Bse(r,e){var n=Jr(!0),i=null,s=AA,a=null,o=vz(l);r=typeof r=="function"?r:r===void 0?Lse:Jr(r),e=typeof e=="function"?e:e===void 0?Fse:Jr(e);function l(c){var u,h=(c=xz(c)).length,d,f=!1,p;for(i==null&&(a=s(p=o())),u=0;u<=h;++u)!(u<h&&n(d=c[u],u,c))===f&&((f=!f)?a.lineStart():a.lineEnd()),f&&a.point(+r(d,u,c),+e(d,u,c));if(p)return a=null,p+""||null}return l.x=function(c){return arguments.length?(r=typeof c=="function"?c:Jr(+c),l):r},l.y=function(c){return arguments.length?(e=typeof c=="function"?c:Jr(+c),l):e},l.defined=function(c){return arguments.length?(n=typeof c=="function"?c:Jr(!!c),l):n},l.curve=function(c){return arguments.length?(s=c,i!=null&&(a=s(i)),l):s},l.context=function(c){return arguments.length?(c==null?i=a=null:a=s(i=c),l):i},l}function zS(r,e,n){var i=null,s=Jr(!0),a=null,o=AA,l=null,c=vz(u);r=typeof r=="function"?r:r===void 0?Lse:Jr(+r),e=typeof e=="function"?e:Jr(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?Fse:Jr(+n);function u(d){var f,p,g,v=(d=xz(d)).length,x,_=!1,E,S=new Array(v),T=new Array(v);for(a==null&&(l=o(E=c())),f=0;f<=v;++f){if(!(f<v&&s(x=d[f],f,d))===_)if(_=!_)p=f,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),g=f-1;g>=p;--g)l.point(S[g],T[g]);l.lineEnd(),l.areaEnd()}_&&(S[f]=+r(x,f,d),T[f]=+e(x,f,d),l.point(i?+i(x,f,d):S[f],n?+n(x,f,d):T[f]))}if(E)return l=null,E+""||null}function h(){return Bse().defined(s).curve(o).context(a)}return u.x=function(d){return arguments.length?(r=typeof d=="function"?d:Jr(+d),i=null,u):r},u.x0=function(d){return arguments.length?(r=typeof d=="function"?d:Jr(+d),u):r},u.x1=function(d){return arguments.length?(i=d==null?null:typeof d=="function"?d:Jr(+d),u):i},u.y=function(d){return arguments.length?(e=typeof d=="function"?d:Jr(+d),n=null,u):e},u.y0=function(d){return arguments.length?(e=typeof d=="function"?d:Jr(+d),u):e},u.y1=function(d){return arguments.length?(n=d==null?null:typeof d=="function"?d:Jr(+d),u):n},u.lineX0=u.lineY0=function(){return h().x(r).y(e)},u.lineY1=function(){return h().x(r).y(n)},u.lineX1=function(){return h().x(i).y(e)},u.defined=function(d){return arguments.length?(s=typeof d=="function"?d:Jr(!!d),u):s},u.curve=function(d){return arguments.length?(o=d,a!=null&&(l=o(a)),u):o},u.context=function(d){return arguments.length?(d==null?a=l=null:l=o(a=d),u):a},u}class jse{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function z$e(r){return new jse(r,!0)}function $$e(r){return new jse(r,!1)}const bz={draw(r,e){const n=dc(e/SE);r.moveTo(n,0),r.arc(0,0,n,0,MA)}},G$e={draw(r,e){const n=dc(e/5)/2;r.moveTo(-3*n,-n),r.lineTo(-n,-n),r.lineTo(-n,-3*n),r.lineTo(n,-3*n),r.lineTo(n,-n),r.lineTo(3*n,-n),r.lineTo(3*n,n),r.lineTo(n,n),r.lineTo(n,3*n),r.lineTo(-n,3*n),r.lineTo(-n,n),r.lineTo(-3*n,n),r.closePath()}},Use=dc(1/3),V$e=Use*2,H$e={draw(r,e){const n=dc(e/V$e),i=n*Use;r.moveTo(0,-n),r.lineTo(i,0),r.lineTo(0,n),r.lineTo(-i,0),r.closePath()}},W$e={draw(r,e){const n=dc(e),i=-n/2;r.rect(i,i,n,n)}},q$e=.8908130915292852,zse=wE(SE/10)/wE(7*SE/10),X$e=wE(MA/10)*zse,K$e=-kse(MA/10)*zse,Y$e={draw(r,e){const n=dc(e*q$e),i=X$e*n,s=K$e*n;r.moveTo(0,-n),r.lineTo(i,s);for(let a=1;a<5;++a){const o=MA*a/5,l=kse(o),c=wE(o);r.lineTo(c*n,-l*n),r.lineTo(l*i-c*s,c*i+l*s)}r.closePath()}},rI=dc(3),Z$e={draw(r,e){const n=-dc(e/(rI*3));r.moveTo(0,n*2),r.lineTo(-rI*n,-n),r.lineTo(rI*n,-n),r.closePath()}},Zo=-.5,Qo=dc(3)/2,RF=1/dc(12),Q$e=(RF/2+1)*3,J$e={draw(r,e){const n=dc(e/Q$e),i=n/2,s=n*RF,a=i,o=n*RF+n,l=-a,c=o;r.moveTo(i,s),r.lineTo(a,o),r.lineTo(l,c),r.lineTo(Zo*i-Qo*s,Qo*i+Zo*s),r.lineTo(Zo*a-Qo*o,Qo*a+Zo*o),r.lineTo(Zo*l-Qo*c,Qo*l+Zo*c),r.lineTo(Zo*i+Qo*s,Zo*s-Qo*i),r.lineTo(Zo*a+Qo*o,Zo*o-Qo*a),r.lineTo(Zo*l+Qo*c,Zo*c-Qo*l),r.closePath()}};function e6e(r,e){let n=null,i=vz(s);r=typeof r=="function"?r:Jr(r||bz),e=typeof e=="function"?e:Jr(e===void 0?64:+e);function s(){let a;if(n||(n=a=i()),r.apply(this,arguments).draw(n,+e.apply(this,arguments)),a)return n=null,a+""||null}return s.type=function(a){return arguments.length?(r=typeof a=="function"?a:Jr(a),s):r},s.size=function(a){return arguments.length?(e=typeof a=="function"?a:Jr(+a),s):e},s.context=function(a){return arguments.length?(n=a??null,s):n},s}function TE(){}function EE(r,e,n){r._context.bezierCurveTo((2*r._x0+r._x1)/3,(2*r._y0+r._y1)/3,(r._x0+2*r._x1)/3,(r._y0+2*r._y1)/3,(r._x0+4*r._x1+e)/6,(r._y0+4*r._y1+n)/6)}function $se(r){this._context=r}$se.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:EE(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(r,e){switch(r=+r,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(r,e):this._context.moveTo(r,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:EE(this,r,e);break}this._x0=this._x1,this._x1=r,this._y0=this._y1,this._y1=e}};function t6e(r){return new $se(r)}function Gse(r){this._context=r}Gse.prototype={areaStart:TE,areaEnd:TE,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(r,e){switch(r=+r,e=+e,this._point){case 0:this._point=1,this._x2=r,this._y2=e;break;case 1:this._point=2,this._x3=r,this._y3=e;break;case 2:this._point=3,this._x4=r,this._y4=e,this._context.moveTo((this._x0+4*this._x1+r)/6,(this._y0+4*this._y1+e)/6);break;default:EE(this,r,e);break}this._x0=this._x1,this._x1=r,this._y0=this._y1,this._y1=e}};function n6e(r){return new Gse(r)}function Vse(r){this._context=r}Vse.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(r,e){switch(r=+r,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+r)/6,i=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,i):this._context.moveTo(n,i);break;case 3:this._point=4;default:EE(this,r,e);break}this._x0=this._x1,this._x1=r,this._y0=this._y1,this._y1=e}};function r6e(r){return new Vse(r)}function Hse(r){this._context=r}Hse.prototype={areaStart:TE,areaEnd:TE,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(r,e){r=+r,e=+e,this._point?this._context.lineTo(r,e):(this._point=1,this._context.moveTo(r,e))}};function i6e(r){return new Hse(r)}function R7(r){return r<0?-1:1}function O7(r,e,n){var i=r._x1-r._x0,s=e-r._x1,a=(r._y1-r._y0)/(i||s<0&&-0),o=(n-r._y1)/(s||i<0&&-0),l=(a*s+o*i)/(i+s);return(R7(a)+R7(o))*Math.min(Math.abs(a),Math.abs(o),.5*Math.abs(l))||0}function k7(r,e){var n=r._x1-r._x0;return n?(3*(r._y1-r._y0)/n-e)/2:e}function iI(r,e,n){var i=r._x0,s=r._y0,a=r._x1,o=r._y1,l=(a-i)/3;r._context.bezierCurveTo(i+l,s+l*e,a-l,o-l*n,a,o)}function ME(r){this._context=r}ME.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:iI(this,this._t0,k7(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(r,e){var n=NaN;if(r=+r,e=+e,!(r===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(r,e):this._context.moveTo(r,e);break;case 1:this._point=2;break;case 2:this._point=3,iI(this,k7(this,n=O7(this,r,e)),n);break;default:iI(this,this._t0,n=O7(this,r,e));break}this._x0=this._x1,this._x1=r,this._y0=this._y1,this._y1=e,this._t0=n}}};function Wse(r){this._context=new qse(r)}(Wse.prototype=Object.create(ME.prototype)).point=function(r,e){ME.prototype.point.call(this,e,r)};function qse(r){this._context=r}qse.prototype={moveTo:function(r,e){this._context.moveTo(e,r)},closePath:function(){this._context.closePath()},lineTo:function(r,e){this._context.lineTo(e,r)},bezierCurveTo:function(r,e,n,i,s,a){this._context.bezierCurveTo(e,r,i,n,a,s)}};function s6e(r){return new ME(r)}function a6e(r){return new Wse(r)}function Xse(r){this._context=r}Xse.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var r=this._x,e=this._y,n=r.length;if(n)if(this._line?this._context.lineTo(r[0],e[0]):this._context.moveTo(r[0],e[0]),n===2)this._context.lineTo(r[1],e[1]);else for(var i=I7(r),s=I7(e),a=0,o=1;o<n;++a,++o)this._context.bezierCurveTo(i[0][a],s[0][a],i[1][a],s[1][a],r[o],e[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(r,e){this._x.push(+r),this._y.push(+e)}};function I7(r){var e,n=r.length-1,i,s=new Array(n),a=new Array(n),o=new Array(n);for(s[0]=0,a[0]=2,o[0]=r[0]+2*r[1],e=1;e<n-1;++e)s[e]=1,a[e]=4,o[e]=4*r[e]+2*r[e+1];for(s[n-1]=2,a[n-1]=7,o[n-1]=8*r[n-1]+r[n],e=1;e<n;++e)i=s[e]/a[e-1],a[e]-=i,o[e]-=i*o[e-1];for(s[n-1]=o[n-1]/a[n-1],e=n-2;e>=0;--e)s[e]=(o[e]-s[e+1])/a[e];for(a[n-1]=(r[n]+s[n-1])/2,e=0;e<n-1;++e)a[e]=2*r[e+1]-s[e+1];return[s,a]}function o6e(r){return new Xse(r)}function CA(r,e){this._context=r,this._t=e}CA.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(r,e){switch(r=+r,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(r,e):this._context.moveTo(r,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(r,e);else{var n=this._x*(1-this._t)+r*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=r,this._y=e}};function l6e(r){return new CA(r,.5)}function c6e(r){return new CA(r,0)}function u6e(r){return new CA(r,1)}function Cy(r,e){if((o=r.length)>1)for(var n=1,i,s,a=r[e[0]],o,l=a.length;n<o;++n)for(s=a,a=r[e[n]],i=0;i<l;++i)a[i][1]+=a[i][0]=isNaN(s[i][1])?s[i][0]:s[i][1]}function OF(r){for(var e=r.length,n=new Array(e);--e>=0;)n[e]=e;return n}function h6e(r,e){return r[e]}function d6e(r){const e=[];return e.key=r,e}function f6e(){var r=Jr([]),e=OF,n=Cy,i=h6e;function s(a){var o=Array.from(r.apply(this,arguments),d6e),l,c=o.length,u=-1,h;for(const d of a)for(l=0,++u;l<c;++l)(o[l][u]=[0,+i(d,o[l].key,u,a)]).data=d;for(l=0,h=xz(e(o));l<c;++l)o[h[l]].index=l;return n(o,h),o}return s.keys=function(a){return arguments.length?(r=typeof a=="function"?a:Jr(Array.from(a)),s):r},s.value=function(a){return arguments.length?(i=typeof a=="function"?a:Jr(+a),s):i},s.order=function(a){return arguments.length?(e=a==null?OF:typeof a=="function"?a:Jr(Array.from(a)),s):e},s.offset=function(a){return arguments.length?(n=a??Cy,s):n},s}function p6e(r,e){if((i=r.length)>0){for(var n,i,s=0,a=r[0].length,o;s<a;++s){for(o=n=0;n<i;++n)o+=r[n][s][1]||0;if(o)for(n=0;n<i;++n)r[n][s][1]/=o}Cy(r,e)}}function m6e(r,e){if((s=r.length)>0){for(var n=0,i=r[e[0]],s,a=i.length;n<a;++n){for(var o=0,l=0;o<s;++o)l+=r[o][n][1]||0;i[n][1]+=i[n][0]=-l/2}Cy(r,e)}}function g6e(r,e){if(!(!((o=r.length)>0)||!((a=(s=r[e[0]]).length)>0))){for(var n=0,i=1,s,a,o;i<a;++i){for(var l=0,c=0,u=0;l<o;++l){for(var h=r[e[l]],d=h[i][1]||0,f=h[i-1][1]||0,p=(d-f)/2,g=0;g<l;++g){var v=r[e[g]],x=v[i][1]||0,_=v[i-1][1]||0;p+=x-_}c+=d,u+=p*d}s[i-1][1]+=s[i-1][0]=n,c&&(n-=u/c)}s[i-1][1]+=s[i-1][0]=n,Cy(r,e)}}function Lb(r){"@babel/helpers - typeof";return Lb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lb(r)}var y6e=["type","size","sizeType"];function kF(){return kF=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])}return r},kF.apply(this,arguments)}function D7(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable})),n.push.apply(n,i)}return n}function L7(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?D7(Object(n),!0).forEach(function(i){v6e(r,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):D7(Object(n)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(n,i))})}return r}function v6e(r,e,n){return e=x6e(e),e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function x6e(r){var e=b6e(r,"string");return Lb(e)=="symbol"?e:e+""}function b6e(r,e){if(Lb(r)!="object"||!r)return r;var n=r[Symbol.toPrimitive];if(n!==void 0){var i=n.call(r,e);if(Lb(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function _6e(r,e){if(r==null)return{};var n=w6e(r,e),i,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);for(s=0;s<a.length;s++)i=a[s],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(r,i)&&(n[i]=r[i])}return n}function w6e(r,e){if(r==null)return{};var n={};for(var i in r)if(Object.prototype.hasOwnProperty.call(r,i)){if(e.indexOf(i)>=0)continue;n[i]=r[i]}return n}var Kse={symbolCircle:bz,symbolCross:G$e,symbolDiamond:H$e,symbolSquare:W$e,symbolStar:Y$e,symbolTriangle:Z$e,symbolWye:J$e},S6e=Math.PI/180,T6e=function(e){var n="symbol".concat(EA(e));return Kse[n]||bz},E6e=function(e,n,i){if(n==="area")return e;switch(i){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var s=18*S6e;return 1.25*e*e*(Math.tan(s)-Math.tan(s*2)*Math.pow(Math.tan(s),2))}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},M6e=function(e,n){Kse["symbol".concat(EA(e))]=n},NA=function(e){var n=e.type,i=n===void 0?"circle":n,s=e.size,a=s===void 0?64:s,o=e.sizeType,l=o===void 0?"area":o,c=_6e(e,y6e),u=L7(L7({},c),{},{type:i,size:a,sizeType:l}),h=function(){var x=T6e(i),_=e6e().type(x).size(E6e(a,l,i));return _()},d=u.className,f=u.cx,p=u.cy,g=$n(u,!0);return f===+f&&p===+p&&a===+a?ce.createElement("path",kF({},g,{className:mr("recharts-symbols",d),transform:"translate(".concat(f,", ").concat(p,")"),d:h()})):null};NA.registerSymbol=M6e;function Ny(r){"@babel/helpers - typeof";return Ny=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ny(r)}function IF(){return IF=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])}return r},IF.apply(this,arguments)}function F7(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable})),n.push.apply(n,i)}return n}function A6e(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?F7(Object(n),!0).forEach(function(i){Fb(r,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):F7(Object(n)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(n,i))})}return r}function C6e(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function N6e(r,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(r,Zse(i.key),i)}}function P6e(r,e,n){return e&&N6e(r.prototype,e),Object.defineProperty(r,"prototype",{writable:!1}),r}function R6e(r,e,n){return e=AE(e),O6e(r,Yse()?Reflect.construct(e,n||[],AE(r).constructor):e.apply(r,n))}function O6e(r,e){if(e&&(Ny(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return k6e(r)}function k6e(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function Yse(){try{var r=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Yse=function(){return!!r})()}function AE(r){return AE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},AE(r)}function I6e(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),e&&DF(r,e)}function DF(r,e){return DF=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,s){return i.__proto__=s,i},DF(r,e)}function Fb(r,e,n){return e=Zse(e),e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function Zse(r){var e=D6e(r,"string");return Ny(e)=="symbol"?e:e+""}function D6e(r,e){if(Ny(r)!="object"||!r)return r;var n=r[Symbol.toPrimitive];if(n!==void 0){var i=n.call(r,e);if(Ny(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(r)}var zl=32,_z=function(r){function e(){return C6e(this,e),R6e(this,e,arguments)}return I6e(e,r),P6e(e,[{key:"renderIcon",value:function(i){var s=this.props.inactiveColor,a=zl/2,o=zl/6,l=zl/3,c=i.inactive?s:i.color;if(i.type==="plainline")return ce.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:i.payload.strokeDasharray,x1:0,y1:a,x2:zl,y2:a,className:"recharts-legend-icon"});if(i.type==="line")return ce.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(a,"h").concat(l,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*l,",").concat(a,`
            H`).concat(zl,"M").concat(2*l,",").concat(a,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(l,",").concat(a),className:"recharts-legend-icon"});if(i.type==="rect")return ce.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(zl/8,"h").concat(zl,"v").concat(zl*3/4,"h").concat(-32,"z"),className:"recharts-legend-icon"});if(ce.isValidElement(i.legendIcon)){var u=A6e({},i);return delete u.legendIcon,ce.cloneElement(i.legendIcon,u)}return ce.createElement(NA,{fill:c,cx:a,cy:a,size:zl,sizeType:"diameter",type:i.type})}},{key:"renderItems",value:function(){var i=this,s=this.props,a=s.payload,o=s.iconSize,l=s.layout,c=s.formatter,u=s.inactiveColor,h={x:0,y:0,width:zl,height:zl},d={display:l==="horizontal"?"inline-block":"block",marginRight:10},f={display:"inline-block",verticalAlign:"middle",marginRight:4};return a.map(function(p,g){var v=p.formatter||c,x=mr(Fb(Fb({"recharts-legend-item":!0},"legend-item-".concat(g),!0),"inactive",p.inactive));if(p.type==="none")return null;var _=Wn(p.value)?null:p.value;hh(!Wn(p.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var E=p.inactive?u:p.color;return ce.createElement("li",IF({className:x,style:d,key:"legend-item-".concat(g)},Db(i.props,p,g)),ce.createElement(AF,{width:o,height:o,viewBox:h,style:f},i.renderIcon(p)),ce.createElement("span",{className:"recharts-legend-item-text",style:{color:E}},v?v(_,p,g):_))})}},{key:"render",value:function(){var i=this.props,s=i.payload,a=i.layout,o=i.align;if(!s||!s.length)return null;var l={padding:0,margin:0,textAlign:a==="horizontal"?o:"left"};return ce.createElement("ul",{className:"recharts-default-legend",style:l},this.renderItems())}}])}(X.PureComponent);Fb(_z,"displayName","Legend");Fb(_z,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var sI,B7;function L6e(){if(B7)return sI;B7=1;var r=wA();function e(){this.__data__=new r,this.size=0}return sI=e,sI}var aI,j7;function F6e(){if(j7)return aI;j7=1;function r(e){var n=this.__data__,i=n.delete(e);return this.size=n.size,i}return aI=r,aI}var oI,U7;function B6e(){if(U7)return oI;U7=1;function r(e){return this.__data__.get(e)}return oI=r,oI}var lI,z7;function j6e(){if(z7)return lI;z7=1;function r(e){return this.__data__.has(e)}return lI=r,lI}var cI,$7;function U6e(){if($7)return cI;$7=1;var r=wA(),e=dz(),n=fz(),i=200;function s(a,o){var l=this.__data__;if(l instanceof r){var c=l.__data__;if(!e||c.length<i-1)return c.push([a,o]),this.size=++l.size,this;l=this.__data__=new n(c)}return l.set(a,o),this.size=l.size,this}return cI=s,cI}var uI,G7;function Qse(){if(G7)return uI;G7=1;var r=wA(),e=L6e(),n=F6e(),i=B6e(),s=j6e(),a=U6e();function o(l){var c=this.__data__=new r(l);this.size=c.size}return o.prototype.clear=e,o.prototype.delete=n,o.prototype.get=i,o.prototype.has=s,o.prototype.set=a,uI=o,uI}var hI,V7;function z6e(){if(V7)return hI;V7=1;var r="__lodash_hash_undefined__";function e(n){return this.__data__.set(n,r),this}return hI=e,hI}var dI,H7;function $6e(){if(H7)return dI;H7=1;function r(e){return this.__data__.has(e)}return dI=r,dI}var fI,W7;function Jse(){if(W7)return fI;W7=1;var r=fz(),e=z6e(),n=$6e();function i(s){var a=-1,o=s==null?0:s.length;for(this.__data__=new r;++a<o;)this.add(s[a])}return i.prototype.add=i.prototype.push=e,i.prototype.has=n,fI=i,fI}var pI,q7;function eae(){if(q7)return pI;q7=1;function r(e,n){for(var i=-1,s=e==null?0:e.length;++i<s;)if(n(e[i],i,e))return!0;return!1}return pI=r,pI}var mI,X7;function tae(){if(X7)return mI;X7=1;function r(e,n){return e.has(n)}return mI=r,mI}var gI,K7;function nae(){if(K7)return gI;K7=1;var r=Jse(),e=eae(),n=tae(),i=1,s=2;function a(o,l,c,u,h,d){var f=c&i,p=o.length,g=l.length;if(p!=g&&!(f&&g>p))return!1;var v=d.get(o),x=d.get(l);if(v&&x)return v==l&&x==o;var _=-1,E=!0,S=c&s?new r:void 0;for(d.set(o,l),d.set(l,o);++_<p;){var T=o[_],M=l[_];if(u)var C=f?u(M,T,_,l,o,d):u(T,M,_,o,l,d);if(C!==void 0){if(C)continue;E=!1;break}if(S){if(!e(l,function(A,P){if(!n(S,P)&&(T===A||h(T,A,c,u,d)))return S.push(P)})){E=!1;break}}else if(!(T===M||h(T,M,c,u,d))){E=!1;break}}return d.delete(o),d.delete(l),E}return gI=a,gI}var yI,Y7;function G6e(){if(Y7)return yI;Y7=1;var r=iu(),e=r.Uint8Array;return yI=e,yI}var vI,Z7;function V6e(){if(Z7)return vI;Z7=1;function r(e){var n=-1,i=Array(e.size);return e.forEach(function(s,a){i[++n]=[a,s]}),i}return vI=r,vI}var xI,Q7;function wz(){if(Q7)return xI;Q7=1;function r(e){var n=-1,i=Array(e.size);return e.forEach(function(s){i[++n]=s}),i}return xI=r,xI}var bI,J7;function H6e(){if(J7)return bI;J7=1;var r=G_(),e=G6e(),n=hz(),i=nae(),s=V6e(),a=wz(),o=1,l=2,c="[object Boolean]",u="[object Date]",h="[object Error]",d="[object Map]",f="[object Number]",p="[object RegExp]",g="[object Set]",v="[object String]",x="[object Symbol]",_="[object ArrayBuffer]",E="[object DataView]",S=r?r.prototype:void 0,T=S?S.valueOf:void 0;function M(C,A,P,R,O,D,F){switch(P){case E:if(C.byteLength!=A.byteLength||C.byteOffset!=A.byteOffset)return!1;C=C.buffer,A=A.buffer;case _:return!(C.byteLength!=A.byteLength||!D(new e(C),new e(A)));case c:case u:case f:return n(+C,+A);case h:return C.name==A.name&&C.message==A.message;case p:case v:return C==A+"";case d:var U=s;case g:var B=R&o;if(U||(U=a),C.size!=A.size&&!B)return!1;var W=F.get(C);if(W)return W==A;R|=l,F.set(C,A);var j=i(U(C),U(A),R,O,D,F);return F.delete(C),j;case x:if(T)return T.call(C)==T.call(A)}return!1}return bI=M,bI}var _I,eX;function rae(){if(eX)return _I;eX=1;function r(e,n){for(var i=-1,s=n.length,a=e.length;++i<s;)e[a+i]=n[i];return e}return _I=r,_I}var wI,tX;function W6e(){if(tX)return wI;tX=1;var r=rae(),e=ao();function n(i,s,a){var o=s(i);return e(i)?o:r(o,a(i))}return wI=n,wI}var SI,nX;function q6e(){if(nX)return SI;nX=1;function r(e,n){for(var i=-1,s=e==null?0:e.length,a=0,o=[];++i<s;){var l=e[i];n(l,i,e)&&(o[a++]=l)}return o}return SI=r,SI}var TI,rX;function X6e(){if(rX)return TI;rX=1;function r(){return[]}return TI=r,TI}var EI,iX;function K6e(){if(iX)return EI;iX=1;var r=q6e(),e=X6e(),n=Object.prototype,i=n.propertyIsEnumerable,s=Object.getOwnPropertySymbols,a=s?function(o){return o==null?[]:(o=Object(o),r(s(o),function(l){return i.call(o,l)}))}:e;return EI=a,EI}var MI,sX;function Y6e(){if(sX)return MI;sX=1;function r(e,n){for(var i=-1,s=Array(e);++i<e;)s[i]=n(i);return s}return MI=r,MI}var AI,aX;function Z6e(){if(aX)return AI;aX=1;var r=Ch(),e=Nh(),n="[object Arguments]";function i(s){return e(s)&&r(s)==n}return AI=i,AI}var CI,oX;function Sz(){if(oX)return CI;oX=1;var r=Z6e(),e=Nh(),n=Object.prototype,i=n.hasOwnProperty,s=n.propertyIsEnumerable,a=r(function(){return arguments}())?r:function(o){return e(o)&&i.call(o,"callee")&&!s.call(o,"callee")};return CI=a,CI}var ax={exports:{}},NI,lX;function Q6e(){if(lX)return NI;lX=1;function r(){return!1}return NI=r,NI}ax.exports;var cX;function iae(){return cX||(cX=1,function(r,e){var n=iu(),i=Q6e(),s=e&&!e.nodeType&&e,a=s&&!0&&r&&!r.nodeType&&r,o=a&&a.exports===s,l=o?n.Buffer:void 0,c=l?l.isBuffer:void 0,u=c||i;r.exports=u}(ax,ax.exports)),ax.exports}var PI,uX;function Tz(){if(uX)return PI;uX=1;var r=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function n(i,s){var a=typeof i;return s=s??r,!!s&&(a=="number"||a!="symbol"&&e.test(i))&&i>-1&&i%1==0&&i<s}return PI=n,PI}var RI,hX;function Ez(){if(hX)return RI;hX=1;var r=9007199254740991;function e(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=r}return RI=e,RI}var OI,dX;function J6e(){if(dX)return OI;dX=1;var r=Ch(),e=Ez(),n=Nh(),i="[object Arguments]",s="[object Array]",a="[object Boolean]",o="[object Date]",l="[object Error]",c="[object Function]",u="[object Map]",h="[object Number]",d="[object Object]",f="[object RegExp]",p="[object Set]",g="[object String]",v="[object WeakMap]",x="[object ArrayBuffer]",_="[object DataView]",E="[object Float32Array]",S="[object Float64Array]",T="[object Int8Array]",M="[object Int16Array]",C="[object Int32Array]",A="[object Uint8Array]",P="[object Uint8ClampedArray]",R="[object Uint16Array]",O="[object Uint32Array]",D={};D[E]=D[S]=D[T]=D[M]=D[C]=D[A]=D[P]=D[R]=D[O]=!0,D[i]=D[s]=D[x]=D[a]=D[_]=D[o]=D[l]=D[c]=D[u]=D[h]=D[d]=D[f]=D[p]=D[g]=D[v]=!1;function F(U){return n(U)&&e(U.length)&&!!D[r(U)]}return OI=F,OI}var kI,fX;function sae(){if(fX)return kI;fX=1;function r(e){return function(n){return e(n)}}return kI=r,kI}var ox={exports:{}};ox.exports;var pX;function eGe(){return pX||(pX=1,function(r,e){var n=Tse(),i=e&&!e.nodeType&&e,s=i&&!0&&r&&!r.nodeType&&r,a=s&&s.exports===i,o=a&&n.process,l=function(){try{var c=s&&s.require&&s.require("util").types;return c||o&&o.binding&&o.binding("util")}catch{}}();r.exports=l}(ox,ox.exports)),ox.exports}var II,mX;function aae(){if(mX)return II;mX=1;var r=J6e(),e=sae(),n=eGe(),i=n&&n.isTypedArray,s=i?e(i):r;return II=s,II}var DI,gX;function tGe(){if(gX)return DI;gX=1;var r=Y6e(),e=Sz(),n=ao(),i=iae(),s=Tz(),a=aae(),o=Object.prototype,l=o.hasOwnProperty;function c(u,h){var d=n(u),f=!d&&e(u),p=!d&&!f&&i(u),g=!d&&!f&&!p&&a(u),v=d||f||p||g,x=v?r(u.length,String):[],_=x.length;for(var E in u)(h||l.call(u,E))&&!(v&&(E=="length"||p&&(E=="offset"||E=="parent")||g&&(E=="buffer"||E=="byteLength"||E=="byteOffset")||s(E,_)))&&x.push(E);return x}return DI=c,DI}var LI,yX;function nGe(){if(yX)return LI;yX=1;var r=Object.prototype;function e(n){var i=n&&n.constructor,s=typeof i=="function"&&i.prototype||r;return n===s}return LI=e,LI}var FI,vX;function oae(){if(vX)return FI;vX=1;function r(e,n){return function(i){return e(n(i))}}return FI=r,FI}var BI,xX;function rGe(){if(xX)return BI;xX=1;var r=oae(),e=r(Object.keys,Object);return BI=e,BI}var jI,bX;function iGe(){if(bX)return jI;bX=1;var r=nGe(),e=rGe(),n=Object.prototype,i=n.hasOwnProperty;function s(a){if(!r(a))return e(a);var o=[];for(var l in Object(a))i.call(a,l)&&l!="constructor"&&o.push(l);return o}return jI=s,jI}var UI,_X;function H_(){if(_X)return UI;_X=1;var r=uz(),e=Ez();function n(i){return i!=null&&e(i.length)&&!r(i)}return UI=n,UI}var zI,wX;function PA(){if(wX)return zI;wX=1;var r=tGe(),e=iGe(),n=H_();function i(s){return n(s)?r(s):e(s)}return zI=i,zI}var $I,SX;function sGe(){if(SX)return $I;SX=1;var r=W6e(),e=K6e(),n=PA();function i(s){return r(s,n,e)}return $I=i,$I}var GI,TX;function aGe(){if(TX)return GI;TX=1;var r=sGe(),e=1,n=Object.prototype,i=n.hasOwnProperty;function s(a,o,l,c,u,h){var d=l&e,f=r(a),p=f.length,g=r(o),v=g.length;if(p!=v&&!d)return!1;for(var x=p;x--;){var _=f[x];if(!(d?_ in o:i.call(o,_)))return!1}var E=h.get(a),S=h.get(o);if(E&&S)return E==o&&S==a;var T=!0;h.set(a,o),h.set(o,a);for(var M=d;++x<p;){_=f[x];var C=a[_],A=o[_];if(c)var P=d?c(A,C,_,o,a,h):c(C,A,_,a,o,h);if(!(P===void 0?C===A||u(C,A,l,c,h):P)){T=!1;break}M||(M=_=="constructor")}if(T&&!M){var R=a.constructor,O=o.constructor;R!=O&&"constructor"in a&&"constructor"in o&&!(typeof R=="function"&&R instanceof R&&typeof O=="function"&&O instanceof O)&&(T=!1)}return h.delete(a),h.delete(o),T}return GI=s,GI}var VI,EX;function oGe(){if(EX)return VI;EX=1;var r=Gp(),e=iu(),n=r(e,"DataView");return VI=n,VI}var HI,MX;function lGe(){if(MX)return HI;MX=1;var r=Gp(),e=iu(),n=r(e,"Promise");return HI=n,HI}var WI,AX;function lae(){if(AX)return WI;AX=1;var r=Gp(),e=iu(),n=r(e,"Set");return WI=n,WI}var qI,CX;function cGe(){if(CX)return qI;CX=1;var r=Gp(),e=iu(),n=r(e,"WeakMap");return qI=n,qI}var XI,NX;function uGe(){if(NX)return XI;NX=1;var r=oGe(),e=dz(),n=lGe(),i=lae(),s=cGe(),a=Ch(),o=Ese(),l="[object Map]",c="[object Object]",u="[object Promise]",h="[object Set]",d="[object WeakMap]",f="[object DataView]",p=o(r),g=o(e),v=o(n),x=o(i),_=o(s),E=a;return(r&&E(new r(new ArrayBuffer(1)))!=f||e&&E(new e)!=l||n&&E(n.resolve())!=u||i&&E(new i)!=h||s&&E(new s)!=d)&&(E=function(S){var T=a(S),M=T==c?S.constructor:void 0,C=M?o(M):"";if(C)switch(C){case p:return f;case g:return l;case v:return u;case x:return h;case _:return d}return T}),XI=E,XI}var KI,PX;function hGe(){if(PX)return KI;PX=1;var r=Qse(),e=nae(),n=H6e(),i=aGe(),s=uGe(),a=ao(),o=iae(),l=aae(),c=1,u="[object Arguments]",h="[object Array]",d="[object Object]",f=Object.prototype,p=f.hasOwnProperty;function g(v,x,_,E,S,T){var M=a(v),C=a(x),A=M?h:s(v),P=C?h:s(x);A=A==u?d:A,P=P==u?d:P;var R=A==d,O=P==d,D=A==P;if(D&&o(v)){if(!o(x))return!1;M=!0,R=!1}if(D&&!R)return T||(T=new r),M||l(v)?e(v,x,_,E,S,T):n(v,x,A,_,E,S,T);if(!(_&c)){var F=R&&p.call(v,"__wrapped__"),U=O&&p.call(x,"__wrapped__");if(F||U){var B=F?v.value():v,W=U?x.value():x;return T||(T=new r),S(B,W,_,E,T)}}return D?(T||(T=new r),i(v,x,_,E,S,T)):!1}return KI=g,KI}var YI,RX;function Mz(){if(RX)return YI;RX=1;var r=hGe(),e=Nh();function n(i,s,a,o,l){return i===s?!0:i==null||s==null||!e(i)&&!e(s)?i!==i&&s!==s:r(i,s,a,o,n,l)}return YI=n,YI}var ZI,OX;function dGe(){if(OX)return ZI;OX=1;var r=Qse(),e=Mz(),n=1,i=2;function s(a,o,l,c){var u=l.length,h=u,d=!c;if(a==null)return!h;for(a=Object(a);u--;){var f=l[u];if(d&&f[2]?f[1]!==a[f[0]]:!(f[0]in a))return!1}for(;++u<h;){f=l[u];var p=f[0],g=a[p],v=f[1];if(d&&f[2]){if(g===void 0&&!(p in a))return!1}else{var x=new r;if(c)var _=c(g,v,p,a,o,x);if(!(_===void 0?e(v,g,n|i,c,x):_))return!1}}return!0}return ZI=s,ZI}var QI,kX;function cae(){if(kX)return QI;kX=1;var r=tf();function e(n){return n===n&&!r(n)}return QI=e,QI}var JI,IX;function fGe(){if(IX)return JI;IX=1;var r=cae(),e=PA();function n(i){for(var s=e(i),a=s.length;a--;){var o=s[a],l=i[o];s[a]=[o,l,r(l)]}return s}return JI=n,JI}var eD,DX;function uae(){if(DX)return eD;DX=1;function r(e,n){return function(i){return i==null?!1:i[e]===n&&(n!==void 0||e in Object(i))}}return eD=r,eD}var tD,LX;function pGe(){if(LX)return tD;LX=1;var r=dGe(),e=fGe(),n=uae();function i(s){var a=e(s);return a.length==1&&a[0][2]?n(a[0][0],a[0][1]):function(o){return o===s||r(o,s,a)}}return tD=i,tD}var nD,FX;function mGe(){if(FX)return nD;FX=1;function r(e,n){return e!=null&&n in Object(e)}return nD=r,nD}var rD,BX;function gGe(){if(BX)return rD;BX=1;var r=Cse(),e=Sz(),n=ao(),i=Tz(),s=Ez(),a=TA();function o(l,c,u){c=r(c,l);for(var h=-1,d=c.length,f=!1;++h<d;){var p=a(c[h]);if(!(f=l!=null&&u(l,p)))break;l=l[p]}return f||++h!=d?f:(d=l==null?0:l.length,!!d&&s(d)&&i(p,d)&&(n(l)||e(l)))}return rD=o,rD}var iD,jX;function yGe(){if(jX)return iD;jX=1;var r=mGe(),e=gGe();function n(i,s){return i!=null&&e(i,s,r)}return iD=n,iD}var sD,UX;function vGe(){if(UX)return sD;UX=1;var r=Mz(),e=Nse(),n=yGe(),i=cz(),s=cae(),a=uae(),o=TA(),l=1,c=2;function u(h,d){return i(h)&&s(d)?a(o(h),d):function(f){var p=e(f,h);return p===void 0&&p===d?n(f,h):r(d,p,l|c)}}return sD=u,sD}var aD,zX;function y0(){if(zX)return aD;zX=1;function r(e){return e}return aD=r,aD}var oD,$X;function xGe(){if($X)return oD;$X=1;function r(e){return function(n){return n==null?void 0:n[e]}}return oD=r,oD}var lD,GX;function bGe(){if(GX)return lD;GX=1;var r=mz();function e(n){return function(i){return r(i,n)}}return lD=e,lD}var cD,VX;function _Ge(){if(VX)return cD;VX=1;var r=xGe(),e=bGe(),n=cz(),i=TA();function s(a){return n(a)?r(i(a)):e(a)}return cD=s,cD}var uD,HX;function nf(){if(HX)return uD;HX=1;var r=pGe(),e=vGe(),n=y0(),i=ao(),s=_Ge();function a(o){return typeof o=="function"?o:o==null?n:typeof o=="object"?i(o)?e(o[0],o[1]):r(o):s(o)}return uD=a,uD}var hD,WX;function hae(){if(WX)return hD;WX=1;function r(e,n,i,s){for(var a=e.length,o=i+(s?1:-1);s?o--:++o<a;)if(n(e[o],o,e))return o;return-1}return hD=r,hD}var dD,qX;function wGe(){if(qX)return dD;qX=1;function r(e){return e!==e}return dD=r,dD}var fD,XX;function SGe(){if(XX)return fD;XX=1;function r(e,n,i){for(var s=i-1,a=e.length;++s<a;)if(e[s]===n)return s;return-1}return fD=r,fD}var pD,KX;function TGe(){if(KX)return pD;KX=1;var r=hae(),e=wGe(),n=SGe();function i(s,a,o){return a===a?n(s,a,o):r(s,e,o)}return pD=i,pD}var mD,YX;function EGe(){if(YX)return mD;YX=1;var r=TGe();function e(n,i){var s=n==null?0:n.length;return!!s&&r(n,i,0)>-1}return mD=e,mD}var gD,ZX;function MGe(){if(ZX)return gD;ZX=1;function r(e,n,i){for(var s=-1,a=e==null?0:e.length;++s<a;)if(i(n,e[s]))return!0;return!1}return gD=r,gD}var yD,QX;function AGe(){if(QX)return yD;QX=1;function r(){}return yD=r,yD}var vD,JX;function CGe(){if(JX)return vD;JX=1;var r=lae(),e=AGe(),n=wz(),i=1/0,s=r&&1/n(new r([,-0]))[1]==i?function(a){return new r(a)}:e;return vD=s,vD}var xD,eK;function NGe(){if(eK)return xD;eK=1;var r=Jse(),e=EGe(),n=MGe(),i=tae(),s=CGe(),a=wz(),o=200;function l(c,u,h){var d=-1,f=e,p=c.length,g=!0,v=[],x=v;if(h)g=!1,f=n;else if(p>=o){var _=u?null:s(c);if(_)return a(_);g=!1,f=i,x=new r}else x=u?[]:v;e:for(;++d<p;){var E=c[d],S=u?u(E):E;if(E=h||E!==0?E:0,g&&S===S){for(var T=x.length;T--;)if(x[T]===S)continue e;u&&x.push(S),v.push(E)}else f(x,S,h)||(x!==v&&x.push(S),v.push(E))}return v}return xD=l,xD}var bD,tK;function PGe(){if(tK)return bD;tK=1;var r=nf(),e=NGe();function n(i,s){return i&&i.length?e(i,r(s,2)):[]}return bD=n,bD}var RGe=PGe();const nK=_r(RGe);function dae(r,e,n){return e===!0?nK(r,n):Wn(e)?nK(r,e):r}function Py(r){"@babel/helpers - typeof";return Py=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Py(r)}var OGe=["ref"];function rK(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable})),n.push.apply(n,i)}return n}function ju(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?rK(Object(n),!0).forEach(function(i){RA(r,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):rK(Object(n)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(n,i))})}return r}function kGe(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function iK(r,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(r,pae(i.key),i)}}function IGe(r,e,n){return e&&iK(r.prototype,e),n&&iK(r,n),Object.defineProperty(r,"prototype",{writable:!1}),r}function DGe(r,e,n){return e=CE(e),LGe(r,fae()?Reflect.construct(e,n||[],CE(r).constructor):e.apply(r,n))}function LGe(r,e){if(e&&(Py(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return FGe(r)}function FGe(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function fae(){try{var r=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(fae=function(){return!!r})()}function CE(r){return CE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},CE(r)}function BGe(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),e&&LF(r,e)}function LF(r,e){return LF=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,s){return i.__proto__=s,i},LF(r,e)}function RA(r,e,n){return e=pae(e),e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function pae(r){var e=jGe(r,"string");return Py(e)=="symbol"?e:e+""}function jGe(r,e){if(Py(r)!="object"||!r)return r;var n=r[Symbol.toPrimitive];if(n!==void 0){var i=n.call(r,e);if(Py(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(r)}function UGe(r,e){if(r==null)return{};var n=zGe(r,e),i,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);for(s=0;s<a.length;s++)i=a[s],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(r,i)&&(n[i]=r[i])}return n}function zGe(r,e){if(r==null)return{};var n={};for(var i in r)if(Object.prototype.hasOwnProperty.call(r,i)){if(e.indexOf(i)>=0)continue;n[i]=r[i]}return n}function $Ge(r){return r.value}function GGe(r,e){if(ce.isValidElement(r))return ce.cloneElement(r,e);if(typeof r=="function")return ce.createElement(r,e);e.ref;var n=UGe(e,OGe);return ce.createElement(_z,n)}var sK=1,Oc=function(r){function e(){var n;kGe(this,e);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return n=DGe(this,e,[].concat(s)),RA(n,"lastBoundingBox",{width:-1,height:-1}),n}return BGe(e,r),IGe(e,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var i=this.wrapperNode.getBoundingClientRect();return i.height=this.wrapperNode.offsetHeight,i.width=this.wrapperNode.offsetWidth,i}return null}},{key:"updateBBox",value:function(){var i=this.props.onBBoxUpdate,s=this.getBBox();s?(Math.abs(s.width-this.lastBoundingBox.width)>sK||Math.abs(s.height-this.lastBoundingBox.height)>sK)&&(this.lastBoundingBox.width=s.width,this.lastBoundingBox.height=s.height,i&&i(s)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,i&&i(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?ju({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(i){var s=this.props,a=s.layout,o=s.align,l=s.verticalAlign,c=s.margin,u=s.chartWidth,h=s.chartHeight,d,f;if(!i||(i.left===void 0||i.left===null)&&(i.right===void 0||i.right===null))if(o==="center"&&a==="vertical"){var p=this.getBBoxSnapshot();d={left:((u||0)-p.width)/2}}else d=o==="right"?{right:c&&c.right||0}:{left:c&&c.left||0};if(!i||(i.top===void 0||i.top===null)&&(i.bottom===void 0||i.bottom===null))if(l==="middle"){var g=this.getBBoxSnapshot();f={top:((h||0)-g.height)/2}}else f=l==="bottom"?{bottom:c&&c.bottom||0}:{top:c&&c.top||0};return ju(ju({},d),f)}},{key:"render",value:function(){var i=this,s=this.props,a=s.content,o=s.width,l=s.height,c=s.wrapperStyle,u=s.payloadUniqBy,h=s.payload,d=ju(ju({position:"absolute",width:o||"auto",height:l||"auto"},this.getDefaultPosition(c)),c);return ce.createElement("div",{className:"recharts-legend-wrapper",style:d,ref:function(p){i.wrapperNode=p}},GGe(a,ju(ju({},this.props),{},{payload:dae(h,u,$Ge)})))}}],[{key:"getWithHeight",value:function(i,s){var a=ju(ju({},this.defaultProps),i.props),o=a.layout;return o==="vertical"&&bt(i.props.height)?{height:i.props.height}:o==="horizontal"?{width:i.props.width||s}:null}}])}(X.PureComponent);RA(Oc,"displayName","Legend");RA(Oc,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var _D,aK;function VGe(){if(aK)return _D;aK=1;var r=G_(),e=Sz(),n=ao(),i=r?r.isConcatSpreadable:void 0;function s(a){return n(a)||e(a)||!!(i&&a&&a[i])}return _D=s,_D}var wD,oK;function mae(){if(oK)return wD;oK=1;var r=rae(),e=VGe();function n(i,s,a,o,l){var c=-1,u=i.length;for(a||(a=e),l||(l=[]);++c<u;){var h=i[c];s>0&&a(h)?s>1?n(h,s-1,a,o,l):r(l,h):o||(l[l.length]=h)}return l}return wD=n,wD}var SD,lK;function HGe(){if(lK)return SD;lK=1;function r(e){return function(n,i,s){for(var a=-1,o=Object(n),l=s(n),c=l.length;c--;){var u=l[e?c:++a];if(i(o[u],u,o)===!1)break}return n}}return SD=r,SD}var TD,cK;function WGe(){if(cK)return TD;cK=1;var r=HGe(),e=r();return TD=e,TD}var ED,uK;function gae(){if(uK)return ED;uK=1;var r=WGe(),e=PA();function n(i,s){return i&&r(i,s,e)}return ED=n,ED}var MD,hK;function qGe(){if(hK)return MD;hK=1;var r=H_();function e(n,i){return function(s,a){if(s==null)return s;if(!r(s))return n(s,a);for(var o=s.length,l=i?o:-1,c=Object(s);(i?l--:++l<o)&&a(c[l],l,c)!==!1;);return s}}return MD=e,MD}var AD,dK;function Az(){if(dK)return AD;dK=1;var r=gae(),e=qGe(),n=e(r);return AD=n,AD}var CD,fK;function yae(){if(fK)return CD;fK=1;var r=Az(),e=H_();function n(i,s){var a=-1,o=e(i)?Array(i.length):[];return r(i,function(l,c,u){o[++a]=s(l,c,u)}),o}return CD=n,CD}var ND,pK;function XGe(){if(pK)return ND;pK=1;function r(e,n){var i=e.length;for(e.sort(n);i--;)e[i]=e[i].value;return e}return ND=r,ND}var PD,mK;function KGe(){if(mK)return PD;mK=1;var r=p0();function e(n,i){if(n!==i){var s=n!==void 0,a=n===null,o=n===n,l=r(n),c=i!==void 0,u=i===null,h=i===i,d=r(i);if(!u&&!d&&!l&&n>i||l&&c&&h&&!u&&!d||a&&c&&h||!s&&h||!o)return 1;if(!a&&!l&&!d&&n<i||d&&s&&o&&!a&&!l||u&&s&&o||!c&&o||!h)return-1}return 0}return PD=e,PD}var RD,gK;function YGe(){if(gK)return RD;gK=1;var r=KGe();function e(n,i,s){for(var a=-1,o=n.criteria,l=i.criteria,c=o.length,u=s.length;++a<c;){var h=r(o[a],l[a]);if(h){if(a>=u)return h;var d=s[a];return h*(d=="desc"?-1:1)}}return n.index-i.index}return RD=e,RD}var OD,yK;function ZGe(){if(yK)return OD;yK=1;var r=pz(),e=mz(),n=nf(),i=yae(),s=XGe(),a=sae(),o=YGe(),l=y0(),c=ao();function u(h,d,f){d.length?d=r(d,function(v){return c(v)?function(x){return e(x,v.length===1?v[0]:v)}:v}):d=[l];var p=-1;d=r(d,a(n));var g=i(h,function(v,x,_){var E=r(d,function(S){return S(v)});return{criteria:E,index:++p,value:v}});return s(g,function(v,x){return o(v,x,f)})}return OD=u,OD}var kD,vK;function QGe(){if(vK)return kD;vK=1;function r(e,n,i){switch(i.length){case 0:return e.call(n);case 1:return e.call(n,i[0]);case 2:return e.call(n,i[0],i[1]);case 3:return e.call(n,i[0],i[1],i[2])}return e.apply(n,i)}return kD=r,kD}var ID,xK;function JGe(){if(xK)return ID;xK=1;var r=QGe(),e=Math.max;function n(i,s,a){return s=e(s===void 0?i.length-1:s,0),function(){for(var o=arguments,l=-1,c=e(o.length-s,0),u=Array(c);++l<c;)u[l]=o[s+l];l=-1;for(var h=Array(s+1);++l<s;)h[l]=o[l];return h[s]=a(u),r(i,this,h)}}return ID=n,ID}var DD,bK;function eVe(){if(bK)return DD;bK=1;function r(e){return function(){return e}}return DD=r,DD}var LD,_K;function vae(){if(_K)return LD;_K=1;var r=Gp(),e=function(){try{var n=r(Object,"defineProperty");return n({},"",{}),n}catch{}}();return LD=e,LD}var FD,wK;function tVe(){if(wK)return FD;wK=1;var r=eVe(),e=vae(),n=y0(),i=e?function(s,a){return e(s,"toString",{configurable:!0,enumerable:!1,value:r(a),writable:!0})}:n;return FD=i,FD}var BD,SK;function nVe(){if(SK)return BD;SK=1;var r=800,e=16,n=Date.now;function i(s){var a=0,o=0;return function(){var l=n(),c=e-(l-o);if(o=l,c>0){if(++a>=r)return arguments[0]}else a=0;return s.apply(void 0,arguments)}}return BD=i,BD}var jD,TK;function rVe(){if(TK)return jD;TK=1;var r=tVe(),e=nVe(),n=e(r);return jD=n,jD}var UD,EK;function iVe(){if(EK)return UD;EK=1;var r=y0(),e=JGe(),n=rVe();function i(s,a){return n(e(s,a,r),s+"")}return UD=i,UD}var zD,MK;function OA(){if(MK)return zD;MK=1;var r=hz(),e=H_(),n=Tz(),i=tf();function s(a,o,l){if(!i(l))return!1;var c=typeof o;return(c=="number"?e(l)&&n(o,l.length):c=="string"&&o in l)?r(l[o],a):!1}return zD=s,zD}var $D,AK;function sVe(){if(AK)return $D;AK=1;var r=mae(),e=ZGe(),n=iVe(),i=OA(),s=n(function(a,o){if(a==null)return[];var l=o.length;return l>1&&i(a,o[0],o[1])?o=[]:l>2&&i(o[0],o[1],o[2])&&(o=[o[0]]),e(a,r(o,1),[])});return $D=s,$D}var aVe=sVe();const Cz=_r(aVe);function Bb(r){"@babel/helpers - typeof";return Bb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bb(r)}function FF(){return FF=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])}return r},FF.apply(this,arguments)}function oVe(r,e){return hVe(r)||uVe(r,e)||cVe(r,e)||lVe()}function lVe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cVe(r,e){if(r){if(typeof r=="string")return CK(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return CK(r,e)}}function CK(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=r[n];return i}function uVe(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var i,s,a,o,l=[],c=!0,u=!1;try{if(a=(n=n.call(r)).next,e!==0)for(;!(c=(i=a.call(n)).done)&&(l.push(i.value),l.length!==e);c=!0);}catch(h){u=!0,s=h}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function hVe(r){if(Array.isArray(r))return r}function NK(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable})),n.push.apply(n,i)}return n}function GD(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?NK(Object(n),!0).forEach(function(i){dVe(r,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):NK(Object(n)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(n,i))})}return r}function dVe(r,e,n){return e=fVe(e),e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function fVe(r){var e=pVe(r,"string");return Bb(e)=="symbol"?e:e+""}function pVe(r,e){if(Bb(r)!="object"||!r)return r;var n=r[Symbol.toPrimitive];if(n!==void 0){var i=n.call(r,e);if(Bb(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function mVe(r){return Array.isArray(r)&&fs(r[0])&&fs(r[1])?r.join(" ~ "):r}var gVe=function(e){var n=e.separator,i=n===void 0?" : ":n,s=e.contentStyle,a=s===void 0?{}:s,o=e.itemStyle,l=o===void 0?{}:o,c=e.labelStyle,u=c===void 0?{}:c,h=e.payload,d=e.formatter,f=e.itemSorter,p=e.wrapperClassName,g=e.labelClassName,v=e.label,x=e.labelFormatter,_=e.accessibilityLayer,E=_===void 0?!1:_,S=function(){if(h&&h.length){var F={padding:0,margin:0},U=(f?Cz(h,f):h).map(function(B,W){if(B.type==="none")return null;var j=GD({display:"block",paddingTop:4,paddingBottom:4,color:B.color||"#000"},l),$=B.formatter||d||mVe,z=B.value,Z=B.name,se=z,q=Z;if($&&se!=null&&q!=null){var ue=$(z,Z,B,W,h);if(Array.isArray(ue)){var be=oVe(ue,2);se=be[0],q=be[1]}else se=ue}return ce.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(W),style:j},fs(q)?ce.createElement("span",{className:"recharts-tooltip-item-name"},q):null,fs(q)?ce.createElement("span",{className:"recharts-tooltip-item-separator"},i):null,ce.createElement("span",{className:"recharts-tooltip-item-value"},se),ce.createElement("span",{className:"recharts-tooltip-item-unit"},B.unit||""))});return ce.createElement("ul",{className:"recharts-tooltip-item-list",style:F},U)}return null},T=GD({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},a),M=GD({margin:0},u),C=!Gn(v),A=C?v:"",P=mr("recharts-default-tooltip",p),R=mr("recharts-tooltip-label",g);C&&x&&h!==void 0&&h!==null&&(A=x(v,h));var O=E?{role:"status","aria-live":"assertive"}:{};return ce.createElement("div",FF({className:P,style:T},O),ce.createElement("p",{className:R,style:M},ce.isValidElement(A)?A:"".concat(A)),S())};function jb(r){"@babel/helpers - typeof";return jb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jb(r)}function $S(r,e,n){return e=yVe(e),e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function yVe(r){var e=vVe(r,"string");return jb(e)=="symbol"?e:e+""}function vVe(r,e){if(jb(r)!="object"||!r)return r;var n=r[Symbol.toPrimitive];if(n!==void 0){var i=n.call(r,e);if(jb(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}var Vv="recharts-tooltip-wrapper",xVe={visibility:"hidden"};function bVe(r){var e=r.coordinate,n=r.translateX,i=r.translateY;return mr(Vv,$S($S($S($S({},"".concat(Vv,"-right"),bt(n)&&e&&bt(e.x)&&n>=e.x),"".concat(Vv,"-left"),bt(n)&&e&&bt(e.x)&&n<e.x),"".concat(Vv,"-bottom"),bt(i)&&e&&bt(e.y)&&i>=e.y),"".concat(Vv,"-top"),bt(i)&&e&&bt(e.y)&&i<e.y))}function PK(r){var e=r.allowEscapeViewBox,n=r.coordinate,i=r.key,s=r.offsetTopLeft,a=r.position,o=r.reverseDirection,l=r.tooltipDimension,c=r.viewBox,u=r.viewBoxDimension;if(a&&bt(a[i]))return a[i];var h=n[i]-l-s,d=n[i]+s;if(e[i])return o[i]?h:d;if(o[i]){var f=h,p=c[i];return f<p?Math.max(d,c[i]):Math.max(h,c[i])}var g=d+l,v=c[i]+u;return g>v?Math.max(h,c[i]):Math.max(d,c[i])}function _Ve(r){var e=r.translateX,n=r.translateY,i=r.useTranslate3d;return{transform:i?"translate3d(".concat(e,"px, ").concat(n,"px, 0)"):"translate(".concat(e,"px, ").concat(n,"px)")}}function wVe(r){var e=r.allowEscapeViewBox,n=r.coordinate,i=r.offsetTopLeft,s=r.position,a=r.reverseDirection,o=r.tooltipBox,l=r.useTranslate3d,c=r.viewBox,u,h,d;return o.height>0&&o.width>0&&n?(h=PK({allowEscapeViewBox:e,coordinate:n,key:"x",offsetTopLeft:i,position:s,reverseDirection:a,tooltipDimension:o.width,viewBox:c,viewBoxDimension:c.width}),d=PK({allowEscapeViewBox:e,coordinate:n,key:"y",offsetTopLeft:i,position:s,reverseDirection:a,tooltipDimension:o.height,viewBox:c,viewBoxDimension:c.height}),u=_Ve({translateX:h,translateY:d,useTranslate3d:l})):u=xVe,{cssProperties:u,cssClasses:bVe({translateX:h,translateY:d,coordinate:n})}}function Ry(r){"@babel/helpers - typeof";return Ry=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ry(r)}function RK(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable})),n.push.apply(n,i)}return n}function OK(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?RK(Object(n),!0).forEach(function(i){jF(r,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):RK(Object(n)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(n,i))})}return r}function SVe(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function TVe(r,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(r,bae(i.key),i)}}function EVe(r,e,n){return e&&TVe(r.prototype,e),Object.defineProperty(r,"prototype",{writable:!1}),r}function MVe(r,e,n){return e=NE(e),AVe(r,xae()?Reflect.construct(e,n||[],NE(r).constructor):e.apply(r,n))}function AVe(r,e){if(e&&(Ry(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return CVe(r)}function CVe(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function xae(){try{var r=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(xae=function(){return!!r})()}function NE(r){return NE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},NE(r)}function NVe(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),e&&BF(r,e)}function BF(r,e){return BF=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,s){return i.__proto__=s,i},BF(r,e)}function jF(r,e,n){return e=bae(e),e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function bae(r){var e=PVe(r,"string");return Ry(e)=="symbol"?e:e+""}function PVe(r,e){if(Ry(r)!="object"||!r)return r;var n=r[Symbol.toPrimitive];if(n!==void 0){var i=n.call(r,e);if(Ry(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(r)}var kK=1,RVe=function(r){function e(){var n;SVe(this,e);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return n=MVe(this,e,[].concat(s)),jF(n,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),jF(n,"handleKeyDown",function(o){if(o.key==="Escape"){var l,c,u,h;n.setState({dismissed:!0,dismissedAtCoordinate:{x:(l=(c=n.props.coordinate)===null||c===void 0?void 0:c.x)!==null&&l!==void 0?l:0,y:(u=(h=n.props.coordinate)===null||h===void 0?void 0:h.y)!==null&&u!==void 0?u:0}})}}),n}return NVe(e,r),EVe(e,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var i=this.wrapperNode.getBoundingClientRect();(Math.abs(i.width-this.state.lastBoundingBox.width)>kK||Math.abs(i.height-this.state.lastBoundingBox.height)>kK)&&this.setState({lastBoundingBox:{width:i.width,height:i.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var i,s;this.props.active&&this.updateBBox(),this.state.dismissed&&(((i=this.props.coordinate)===null||i===void 0?void 0:i.x)!==this.state.dismissedAtCoordinate.x||((s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var i=this,s=this.props,a=s.active,o=s.allowEscapeViewBox,l=s.animationDuration,c=s.animationEasing,u=s.children,h=s.coordinate,d=s.hasPayload,f=s.isAnimationActive,p=s.offset,g=s.position,v=s.reverseDirection,x=s.useTranslate3d,_=s.viewBox,E=s.wrapperStyle,S=wVe({allowEscapeViewBox:o,coordinate:h,offsetTopLeft:p,position:g,reverseDirection:v,tooltipBox:this.state.lastBoundingBox,useTranslate3d:x,viewBox:_}),T=S.cssClasses,M=S.cssProperties,C=OK(OK({transition:f&&a?"transform ".concat(l,"ms ").concat(c):void 0},M),{},{pointerEvents:"none",visibility:!this.state.dismissed&&a&&d?"visible":"hidden",position:"absolute",top:0,left:0},E);return ce.createElement("div",{tabIndex:-1,className:T,style:C,ref:function(P){i.wrapperNode=P}},u)}}])}(X.PureComponent),OVe=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},rf={isSsr:OVe()};function Oy(r){"@babel/helpers - typeof";return Oy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Oy(r)}function IK(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable})),n.push.apply(n,i)}return n}function DK(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?IK(Object(n),!0).forEach(function(i){Nz(r,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):IK(Object(n)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(n,i))})}return r}function kVe(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function IVe(r,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(r,wae(i.key),i)}}function DVe(r,e,n){return e&&IVe(r.prototype,e),Object.defineProperty(r,"prototype",{writable:!1}),r}function LVe(r,e,n){return e=PE(e),FVe(r,_ae()?Reflect.construct(e,n||[],PE(r).constructor):e.apply(r,n))}function FVe(r,e){if(e&&(Oy(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return BVe(r)}function BVe(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function _ae(){try{var r=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_ae=function(){return!!r})()}function PE(r){return PE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},PE(r)}function jVe(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),e&&UF(r,e)}function UF(r,e){return UF=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,s){return i.__proto__=s,i},UF(r,e)}function Nz(r,e,n){return e=wae(e),e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function wae(r){var e=UVe(r,"string");return Oy(e)=="symbol"?e:e+""}function UVe(r,e){if(Oy(r)!="object"||!r)return r;var n=r[Symbol.toPrimitive];if(n!==void 0){var i=n.call(r,e);if(Oy(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(r)}function zVe(r){return r.dataKey}function $Ve(r,e){return ce.isValidElement(r)?ce.cloneElement(r,e):typeof r=="function"?ce.createElement(r,e):ce.createElement(gVe,e)}var No=function(r){function e(){return kVe(this,e),LVe(this,e,arguments)}return jVe(e,r),DVe(e,[{key:"render",value:function(){var i=this,s=this.props,a=s.active,o=s.allowEscapeViewBox,l=s.animationDuration,c=s.animationEasing,u=s.content,h=s.coordinate,d=s.filterNull,f=s.isAnimationActive,p=s.offset,g=s.payload,v=s.payloadUniqBy,x=s.position,_=s.reverseDirection,E=s.useTranslate3d,S=s.viewBox,T=s.wrapperStyle,M=g??[];d&&M.length&&(M=dae(g.filter(function(A){return A.value!=null&&(A.hide!==!0||i.props.includeHidden)}),v,zVe));var C=M.length>0;return ce.createElement(RVe,{allowEscapeViewBox:o,animationDuration:l,animationEasing:c,isAnimationActive:f,active:a,coordinate:h,hasPayload:C,offset:p,position:x,reverseDirection:_,useTranslate3d:E,viewBox:S,wrapperStyle:T},$Ve(u,DK(DK({},this.props),{},{payload:M})))}}])}(X.PureComponent);Nz(No,"displayName","Tooltip");Nz(No,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!rf.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var VD,LK;function GVe(){if(LK)return VD;LK=1;var r=iu(),e=function(){return r.Date.now()};return VD=e,VD}var HD,FK;function VVe(){if(FK)return HD;FK=1;var r=/\s/;function e(n){for(var i=n.length;i--&&r.test(n.charAt(i)););return i}return HD=e,HD}var WD,BK;function HVe(){if(BK)return WD;BK=1;var r=VVe(),e=/^\s+/;function n(i){return i&&i.slice(0,r(i)+1).replace(e,"")}return WD=n,WD}var qD,jK;function Sae(){if(jK)return qD;jK=1;var r=HVe(),e=tf(),n=p0(),i=NaN,s=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,o=/^0o[0-7]+$/i,l=parseInt;function c(u){if(typeof u=="number")return u;if(n(u))return i;if(e(u)){var h=typeof u.valueOf=="function"?u.valueOf():u;u=e(h)?h+"":h}if(typeof u!="string")return u===0?u:+u;u=r(u);var d=a.test(u);return d||o.test(u)?l(u.slice(2),d?2:8):s.test(u)?i:+u}return qD=c,qD}var XD,UK;function WVe(){if(UK)return XD;UK=1;var r=tf(),e=GVe(),n=Sae(),i="Expected a function",s=Math.max,a=Math.min;function o(l,c,u){var h,d,f,p,g,v,x=0,_=!1,E=!1,S=!0;if(typeof l!="function")throw new TypeError(i);c=n(c)||0,r(u)&&(_=!!u.leading,E="maxWait"in u,f=E?s(n(u.maxWait)||0,c):f,S="trailing"in u?!!u.trailing:S);function T(U){var B=h,W=d;return h=d=void 0,x=U,p=l.apply(W,B),p}function M(U){return x=U,g=setTimeout(P,c),_?T(U):p}function C(U){var B=U-v,W=U-x,j=c-B;return E?a(j,f-W):j}function A(U){var B=U-v,W=U-x;return v===void 0||B>=c||B<0||E&&W>=f}function P(){var U=e();if(A(U))return R(U);g=setTimeout(P,C(U))}function R(U){return g=void 0,S&&h?T(U):(h=d=void 0,p)}function O(){g!==void 0&&clearTimeout(g),x=0,h=v=d=g=void 0}function D(){return g===void 0?p:R(e())}function F(){var U=e(),B=A(U);if(h=arguments,d=this,v=U,B){if(g===void 0)return M(v);if(E)return clearTimeout(g),g=setTimeout(P,c),T(v)}return g===void 0&&(g=setTimeout(P,c)),p}return F.cancel=O,F.flush=D,F}return XD=o,XD}var KD,zK;function qVe(){if(zK)return KD;zK=1;var r=WVe(),e=tf(),n="Expected a function";function i(s,a,o){var l=!0,c=!0;if(typeof s!="function")throw new TypeError(n);return e(o)&&(l="leading"in o?!!o.leading:l,c="trailing"in o?!!o.trailing:c),r(s,a,{leading:l,maxWait:a,trailing:c})}return KD=i,KD}var XVe=qVe();const Tae=_r(XVe);function Ub(r){"@babel/helpers - typeof";return Ub=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ub(r)}function $K(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable})),n.push.apply(n,i)}return n}function GS(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?$K(Object(n),!0).forEach(function(i){KVe(r,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):$K(Object(n)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(n,i))})}return r}function KVe(r,e,n){return e=YVe(e),e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function YVe(r){var e=ZVe(r,"string");return Ub(e)=="symbol"?e:e+""}function ZVe(r,e){if(Ub(r)!="object"||!r)return r;var n=r[Symbol.toPrimitive];if(n!==void 0){var i=n.call(r,e);if(Ub(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function QVe(r,e){return n8e(r)||t8e(r,e)||e8e(r,e)||JVe()}function JVe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function e8e(r,e){if(r){if(typeof r=="string")return GK(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return GK(r,e)}}function GK(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=r[n];return i}function t8e(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var i,s,a,o,l=[],c=!0,u=!1;try{if(a=(n=n.call(r)).next,e!==0)for(;!(c=(i=a.call(n)).done)&&(l.push(i.value),l.length!==e);c=!0);}catch(h){u=!0,s=h}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function n8e(r){if(Array.isArray(r))return r}var r8e=X.forwardRef(function(r,e){var n=r.aspect,i=r.initialDimension,s=i===void 0?{width:-1,height:-1}:i,a=r.width,o=a===void 0?"100%":a,l=r.height,c=l===void 0?"100%":l,u=r.minWidth,h=u===void 0?0:u,d=r.minHeight,f=r.maxHeight,p=r.children,g=r.debounce,v=g===void 0?0:g,x=r.id,_=r.className,E=r.onResize,S=r.style,T=S===void 0?{}:S,M=X.useRef(null),C=X.useRef();C.current=E,X.useImperativeHandle(e,function(){return Object.defineProperty(M.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),M.current},configurable:!0})});var A=X.useState({containerWidth:s.width,containerHeight:s.height}),P=QVe(A,2),R=P[0],O=P[1],D=X.useCallback(function(U,B){O(function(W){var j=Math.round(U),$=Math.round(B);return W.containerWidth===j&&W.containerHeight===$?W:{containerWidth:j,containerHeight:$}})},[]);X.useEffect(function(){var U=function(Z){var se,q=Z[0].contentRect,ue=q.width,be=q.height;D(ue,be),(se=C.current)===null||se===void 0||se.call(C,ue,be)};v>0&&(U=Tae(U,v,{trailing:!0,leading:!1}));var B=new ResizeObserver(U),W=M.current.getBoundingClientRect(),j=W.width,$=W.height;return D(j,$),B.observe(M.current),function(){B.disconnect()}},[D,v]);var F=X.useMemo(function(){var U=R.containerWidth,B=R.containerHeight;if(U<0||B<0)return null;hh(ap(o)||ap(c),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,o,c),hh(!n||n>0,"The aspect(%s) must be greater than zero.",n);var W=ap(o)?U:o,j=ap(c)?B:c;n&&n>0&&(W?j=W/n:j&&(W=j*n),f&&j>f&&(j=f)),hh(W>0||j>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,W,j,o,c,h,d,n);var $=!Array.isArray(p)&&uh(p.type).endsWith("Chart");return ce.Children.map(p,function(z){return ce.isValidElement(z)?X.cloneElement(z,GS({width:W,height:j},$?{style:GS({height:"100%",width:"100%",maxHeight:j,maxWidth:W},z.props.style)}:{})):z})},[n,p,c,f,d,h,R,o]);return ce.createElement("div",{id:x?"".concat(x):void 0,className:mr("recharts-responsive-container",_),style:GS(GS({},T),{},{width:o,height:c,minWidth:h,minHeight:d,maxHeight:f}),ref:M},F)}),Pz=function(e){return null};Pz.displayName="Cell";function zb(r){"@babel/helpers - typeof";return zb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zb(r)}function VK(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable})),n.push.apply(n,i)}return n}function zF(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?VK(Object(n),!0).forEach(function(i){i8e(r,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):VK(Object(n)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(n,i))})}return r}function i8e(r,e,n){return e=s8e(e),e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function s8e(r){var e=a8e(r,"string");return zb(e)=="symbol"?e:e+""}function a8e(r,e){if(zb(r)!="object"||!r)return r;var n=r[Symbol.toPrimitive];if(n!==void 0){var i=n.call(r,e);if(zb(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}var fg={widthCache:{},cacheCount:0},o8e=2e3,l8e={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},HK="recharts_measurement_span";function c8e(r){var e=zF({},r);return Object.keys(e).forEach(function(n){e[n]||delete e[n]}),e}var kx=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||rf.isSsr)return{width:0,height:0};var i=c8e(n),s=JSON.stringify({text:e,copyStyle:i});if(fg.widthCache[s])return fg.widthCache[s];try{var a=document.getElementById(HK);a||(a=document.createElement("span"),a.setAttribute("id",HK),a.setAttribute("aria-hidden","true"),document.body.appendChild(a));var o=zF(zF({},l8e),i);Object.assign(a.style,o),a.textContent="".concat(e);var l=a.getBoundingClientRect(),c={width:l.width,height:l.height};return fg.widthCache[s]=c,++fg.cacheCount>o8e&&(fg.cacheCount=0,fg.widthCache={}),c}catch{return{width:0,height:0}}},u8e=function(e){return{top:e.top+window.scrollY-document.documentElement.clientTop,left:e.left+window.scrollX-document.documentElement.clientLeft}};function $b(r){"@babel/helpers - typeof";return $b=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$b(r)}function RE(r,e){return p8e(r)||f8e(r,e)||d8e(r,e)||h8e()}function h8e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function d8e(r,e){if(r){if(typeof r=="string")return WK(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return WK(r,e)}}function WK(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=r[n];return i}function f8e(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var i,s,a,o,l=[],c=!0,u=!1;try{if(a=(n=n.call(r)).next,e===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(i=a.call(n)).done)&&(l.push(i.value),l.length!==e);c=!0);}catch(h){u=!0,s=h}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function p8e(r){if(Array.isArray(r))return r}function m8e(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function qK(r,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(r,y8e(i.key),i)}}function g8e(r,e,n){return e&&qK(r.prototype,e),n&&qK(r,n),Object.defineProperty(r,"prototype",{writable:!1}),r}function y8e(r){var e=v8e(r,"string");return $b(e)=="symbol"?e:e+""}function v8e(r,e){if($b(r)!="object"||!r)return r;var n=r[Symbol.toPrimitive];if(n!==void 0){var i=n.call(r,e);if($b(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(r)}var XK=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,KK=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,x8e=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,b8e=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,Eae={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},_8e=Object.keys(Eae),Rg="NaN";function w8e(r,e){return r*Eae[e]}var VS=function(){function r(e,n){m8e(this,r),this.num=e,this.unit=n,this.num=e,this.unit=n,Number.isNaN(e)&&(this.unit=""),n!==""&&!x8e.test(n)&&(this.num=NaN,this.unit=""),_8e.includes(n)&&(this.num=w8e(e,n),this.unit="px")}return g8e(r,[{key:"add",value:function(n){return this.unit!==n.unit?new r(NaN,""):new r(this.num+n.num,this.unit)}},{key:"subtract",value:function(n){return this.unit!==n.unit?new r(NaN,""):new r(this.num-n.num,this.unit)}},{key:"multiply",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new r(NaN,""):new r(this.num*n.num,this.unit||n.unit)}},{key:"divide",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new r(NaN,""):new r(this.num/n.num,this.unit||n.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(n){var i,s=(i=b8e.exec(n))!==null&&i!==void 0?i:[],a=RE(s,3),o=a[1],l=a[2];return new r(parseFloat(o),l??"")}}])}();function Mae(r){if(r.includes(Rg))return Rg;for(var e=r;e.includes("*")||e.includes("/");){var n,i=(n=XK.exec(e))!==null&&n!==void 0?n:[],s=RE(i,4),a=s[1],o=s[2],l=s[3],c=VS.parse(a??""),u=VS.parse(l??""),h=o==="*"?c.multiply(u):c.divide(u);if(h.isNaN())return Rg;e=e.replace(XK,h.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var d,f=(d=KK.exec(e))!==null&&d!==void 0?d:[],p=RE(f,4),g=p[1],v=p[2],x=p[3],_=VS.parse(g??""),E=VS.parse(x??""),S=v==="+"?_.add(E):_.subtract(E);if(S.isNaN())return Rg;e=e.replace(KK,S.toString())}return e}var YK=/\(([^()]*)\)/;function S8e(r){for(var e=r;e.includes("(");){var n=YK.exec(e),i=RE(n,2),s=i[1];e=e.replace(YK,Mae(s))}return e}function T8e(r){var e=r.replace(/\s+/g,"");return e=S8e(e),e=Mae(e),e}function E8e(r){try{return T8e(r)}catch{return Rg}}function YD(r){var e=E8e(r.slice(5,-1));return e===Rg?"":e}var M8e=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],A8e=["dx","dy","angle","className","breakAll"];function $F(){return $F=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])}return r},$F.apply(this,arguments)}function ZK(r,e){if(r==null)return{};var n=C8e(r,e),i,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);for(s=0;s<a.length;s++)i=a[s],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(r,i)&&(n[i]=r[i])}return n}function C8e(r,e){if(r==null)return{};var n={};for(var i in r)if(Object.prototype.hasOwnProperty.call(r,i)){if(e.indexOf(i)>=0)continue;n[i]=r[i]}return n}function QK(r,e){return O8e(r)||R8e(r,e)||P8e(r,e)||N8e()}function N8e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function P8e(r,e){if(r){if(typeof r=="string")return JK(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return JK(r,e)}}function JK(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=r[n];return i}function R8e(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var i,s,a,o,l=[],c=!0,u=!1;try{if(a=(n=n.call(r)).next,e===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(i=a.call(n)).done)&&(l.push(i.value),l.length!==e);c=!0);}catch(h){u=!0,s=h}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function O8e(r){if(Array.isArray(r))return r}var Aae=/[ \f\n\r\t\v\u2028\u2029]+/,Cae=function(e){var n=e.children,i=e.breakAll,s=e.style;try{var a=[];Gn(n)||(i?a=n.toString().split(""):a=n.toString().split(Aae));var o=a.map(function(c){return{word:c,width:kx(c,s).width}}),l=i?0:kx(" ",s).width;return{wordsWithComputedWidth:o,spaceWidth:l}}catch{return null}},k8e=function(e,n,i,s,a){var o=e.maxLines,l=e.children,c=e.style,u=e.breakAll,h=bt(o),d=l,f=function(){var W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return W.reduce(function(j,$){var z=$.word,Z=$.width,se=j[j.length-1];if(se&&(s==null||a||se.width+Z+i<Number(s)))se.words.push(z),se.width+=Z+i;else{var q={words:[z],width:Z};j.push(q)}return j},[])},p=f(n),g=function(W){return W.reduce(function(j,$){return j.width>$.width?j:$})};if(!h)return p;for(var v="…",x=function(W){var j=d.slice(0,W),$=Cae({breakAll:u,style:c,children:j+v}).wordsWithComputedWidth,z=f($),Z=z.length>o||g(z).width>Number(s);return[Z,z]},_=0,E=d.length-1,S=0,T;_<=E&&S<=d.length-1;){var M=Math.floor((_+E)/2),C=M-1,A=x(C),P=QK(A,2),R=P[0],O=P[1],D=x(M),F=QK(D,1),U=F[0];if(!R&&!U&&(_=M+1),R&&U&&(E=M-1),!R&&U){T=O;break}S++}return T||p},eY=function(e){var n=Gn(e)?[]:e.toString().split(Aae);return[{words:n}]},I8e=function(e){var n=e.width,i=e.scaleToFit,s=e.children,a=e.style,o=e.breakAll,l=e.maxLines;if((n||i)&&!rf.isSsr){var c,u,h=Cae({breakAll:o,children:s,style:a});if(h){var d=h.wordsWithComputedWidth,f=h.spaceWidth;c=d,u=f}else return eY(s);return k8e({breakAll:o,children:s,maxLines:l,style:a},c,u,n,i)}return eY(s)},tY="#808080",OE=function(e){var n=e.x,i=n===void 0?0:n,s=e.y,a=s===void 0?0:s,o=e.lineHeight,l=o===void 0?"1em":o,c=e.capHeight,u=c===void 0?"0.71em":c,h=e.scaleToFit,d=h===void 0?!1:h,f=e.textAnchor,p=f===void 0?"start":f,g=e.verticalAnchor,v=g===void 0?"end":g,x=e.fill,_=x===void 0?tY:x,E=ZK(e,M8e),S=X.useMemo(function(){return I8e({breakAll:E.breakAll,children:E.children,maxLines:E.maxLines,scaleToFit:d,style:E.style,width:E.width})},[E.breakAll,E.children,E.maxLines,d,E.style,E.width]),T=E.dx,M=E.dy,C=E.angle,A=E.className,P=E.breakAll,R=ZK(E,A8e);if(!fs(i)||!fs(a))return null;var O=i+(bt(T)?T:0),D=a+(bt(M)?M:0),F;switch(v){case"start":F=YD("calc(".concat(u,")"));break;case"middle":F=YD("calc(".concat((S.length-1)/2," * -").concat(l," + (").concat(u," / 2))"));break;default:F=YD("calc(".concat(S.length-1," * -").concat(l,")"));break}var U=[];if(d){var B=S[0].width,W=E.width;U.push("scale(".concat((bt(W)?W/B:1)/B,")"))}return C&&U.push("rotate(".concat(C,", ").concat(O,", ").concat(D,")")),U.length&&(R.transform=U.join(" ")),ce.createElement("text",$F({},$n(R,!0),{x:O,y:D,className:mr("recharts-text",A),textAnchor:p,fill:_.includes("url")?tY:_}),S.map(function(j,$){var z=j.words.join(P?"":" ");return ce.createElement("tspan",{x:O,dy:$===0?F:l,key:"".concat(z,"-").concat($)},z)}))};const nY=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:pb,scaleDiverging:Bte,scaleDivergingLog:jte,scaleDivergingPow:dU,scaleDivergingSqrt:AEe,scaleDivergingSymlog:Ute,scaleIdentity:vte,scaleImplicit:g3,scaleLinear:xb,scaleLog:bte,scaleOrdinal:A_,scalePoint:xx,scalePow:lU,scaleQuantile:Ste,scaleQuantize:Tte,scaleRadial:wte,scaleSequential:Ite,scaleSequentialLog:Dte,scaleSequentialPow:hU,scaleSequentialQuantile:Fte,scaleSequentialSqrt:MEe,scaleSequentialSymlog:Lte,scaleSqrt:oTe,scaleSymlog:_te,scaleThreshold:Ete,scaleTime:TEe,scaleUtc:EEe,tickFormat:yte},Symbol.toStringTag,{value:"Module"}));var ZD,rY;function Nae(){if(rY)return ZD;rY=1;var r=p0();function e(n,i,s){for(var a=-1,o=n.length;++a<o;){var l=n[a],c=i(l);if(c!=null&&(u===void 0?c===c&&!r(c):s(c,u)))var u=c,h=l}return h}return ZD=e,ZD}var QD,iY;function D8e(){if(iY)return QD;iY=1;function r(e,n){return e>n}return QD=r,QD}var JD,sY;function L8e(){if(sY)return JD;sY=1;var r=Nae(),e=D8e(),n=y0();function i(s){return s&&s.length?r(s,n,e):void 0}return JD=i,JD}var F8e=L8e();const Td=_r(F8e);var eL,aY;function B8e(){if(aY)return eL;aY=1;function r(e,n){return e<n}return eL=r,eL}var tL,oY;function j8e(){if(oY)return tL;oY=1;var r=Nae(),e=B8e(),n=y0();function i(s){return s&&s.length?r(s,n,e):void 0}return tL=i,tL}var U8e=j8e();const kA=_r(U8e);var nL,lY;function z8e(){if(lY)return nL;lY=1;var r=pz(),e=nf(),n=yae(),i=ao();function s(a,o){var l=i(a)?r:n;return l(a,e(o,3))}return nL=s,nL}var rL,cY;function $8e(){if(cY)return rL;cY=1;var r=mae(),e=z8e();function n(i,s){return r(e(i,s),1)}return rL=n,rL}var G8e=$8e();const V8e=_r(G8e);var iL,uY;function H8e(){if(uY)return iL;uY=1;var r=Mz();function e(n,i){return r(n,i)}return iL=e,iL}var W8e=H8e();const Op=_r(W8e);var v0=1e9,q8e={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},Oz,gi=!0,xl="[DecimalError] ",gp=xl+"Invalid argument: ",Rz=xl+"Exponent out of range: ",x0=Math.floor,Yf=Math.pow,X8e=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Oo,As=1e7,ii=7,Pae=9007199254740991,kE=x0(Pae/ii),Xt={};Xt.absoluteValue=Xt.abs=function(){var r=new this.constructor(this);return r.s&&(r.s=1),r};Xt.comparedTo=Xt.cmp=function(r){var e,n,i,s,a=this;if(r=new a.constructor(r),a.s!==r.s)return a.s||-r.s;if(a.e!==r.e)return a.e>r.e^a.s<0?1:-1;for(i=a.d.length,s=r.d.length,e=0,n=i<s?i:s;e<n;++e)if(a.d[e]!==r.d[e])return a.d[e]>r.d[e]^a.s<0?1:-1;return i===s?0:i>s^a.s<0?1:-1};Xt.decimalPlaces=Xt.dp=function(){var r=this,e=r.d.length-1,n=(e-r.e)*ii;if(e=r.d[e],e)for(;e%10==0;e/=10)n--;return n<0?0:n};Xt.dividedBy=Xt.div=function(r){return dh(this,new this.constructor(r))};Xt.dividedToIntegerBy=Xt.idiv=function(r){var e=this,n=e.constructor;return Hr(dh(e,new n(r),0,1),n.precision)};Xt.equals=Xt.eq=function(r){return!this.cmp(r)};Xt.exponent=function(){return ts(this)};Xt.greaterThan=Xt.gt=function(r){return this.cmp(r)>0};Xt.greaterThanOrEqualTo=Xt.gte=function(r){return this.cmp(r)>=0};Xt.isInteger=Xt.isint=function(){return this.e>this.d.length-2};Xt.isNegative=Xt.isneg=function(){return this.s<0};Xt.isPositive=Xt.ispos=function(){return this.s>0};Xt.isZero=function(){return this.s===0};Xt.lessThan=Xt.lt=function(r){return this.cmp(r)<0};Xt.lessThanOrEqualTo=Xt.lte=function(r){return this.cmp(r)<1};Xt.logarithm=Xt.log=function(r){var e,n=this,i=n.constructor,s=i.precision,a=s+5;if(r===void 0)r=new i(10);else if(r=new i(r),r.s<1||r.eq(Oo))throw Error(xl+"NaN");if(n.s<1)throw Error(xl+(n.s?"NaN":"-Infinity"));return n.eq(Oo)?new i(0):(gi=!1,e=dh(Gb(n,a),Gb(r,a),a),gi=!0,Hr(e,s))};Xt.minus=Xt.sub=function(r){var e=this;return r=new e.constructor(r),e.s==r.s?kae(e,r):Rae(e,(r.s=-r.s,r))};Xt.modulo=Xt.mod=function(r){var e,n=this,i=n.constructor,s=i.precision;if(r=new i(r),!r.s)throw Error(xl+"NaN");return n.s?(gi=!1,e=dh(n,r,0,1).times(r),gi=!0,n.minus(e)):Hr(new i(n),s)};Xt.naturalExponential=Xt.exp=function(){return Oae(this)};Xt.naturalLogarithm=Xt.ln=function(){return Gb(this)};Xt.negated=Xt.neg=function(){var r=new this.constructor(this);return r.s=-r.s||0,r};Xt.plus=Xt.add=function(r){var e=this;return r=new e.constructor(r),e.s==r.s?Rae(e,r):kae(e,(r.s=-r.s,r))};Xt.precision=Xt.sd=function(r){var e,n,i,s=this;if(r!==void 0&&r!==!!r&&r!==1&&r!==0)throw Error(gp+r);if(e=ts(s)+1,i=s.d.length-1,n=i*ii+1,i=s.d[i],i){for(;i%10==0;i/=10)n--;for(i=s.d[0];i>=10;i/=10)n++}return r&&e>n?e:n};Xt.squareRoot=Xt.sqrt=function(){var r,e,n,i,s,a,o,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(xl+"NaN")}for(r=ts(l),gi=!1,s=Math.sqrt(+l),s==0||s==1/0?(e=kc(l.d),(e.length+r)%2==0&&(e+="0"),s=Math.sqrt(e),r=x0((r+1)/2)-(r<0||r%2),s==1/0?e="5e"+r:(e=s.toExponential(),e=e.slice(0,e.indexOf("e")+1)+r),i=new c(e)):i=new c(s.toString()),n=c.precision,s=o=n+3;;)if(a=i,i=a.plus(dh(l,a,o+2)).times(.5),kc(a.d).slice(0,o)===(e=kc(i.d)).slice(0,o)){if(e=e.slice(o-3,o+1),s==o&&e=="4999"){if(Hr(a,n+1,0),a.times(a).eq(l)){i=a;break}}else if(e!="9999")break;o+=4}return gi=!0,Hr(i,n)};Xt.times=Xt.mul=function(r){var e,n,i,s,a,o,l,c,u,h=this,d=h.constructor,f=h.d,p=(r=new d(r)).d;if(!h.s||!r.s)return new d(0);for(r.s*=h.s,n=h.e+r.e,c=f.length,u=p.length,c<u&&(a=f,f=p,p=a,o=c,c=u,u=o),a=[],o=c+u,i=o;i--;)a.push(0);for(i=u;--i>=0;){for(e=0,s=c+i;s>i;)l=a[s]+p[i]*f[s-i-1]+e,a[s--]=l%As|0,e=l/As|0;a[s]=(a[s]+e)%As|0}for(;!a[--o];)a.pop();return e?++n:a.shift(),r.d=a,r.e=n,gi?Hr(r,d.precision):r};Xt.toDecimalPlaces=Xt.todp=function(r,e){var n=this,i=n.constructor;return n=new i(n),r===void 0?n:(Jc(r,0,v0),e===void 0?e=i.rounding:Jc(e,0,8),Hr(n,r+ts(n)+1,e))};Xt.toExponential=function(r,e){var n,i=this,s=i.constructor;return r===void 0?n=kp(i,!0):(Jc(r,0,v0),e===void 0?e=s.rounding:Jc(e,0,8),i=Hr(new s(i),r+1,e),n=kp(i,!0,r+1)),n};Xt.toFixed=function(r,e){var n,i,s=this,a=s.constructor;return r===void 0?kp(s):(Jc(r,0,v0),e===void 0?e=a.rounding:Jc(e,0,8),i=Hr(new a(s),r+ts(s)+1,e),n=kp(i.abs(),!1,r+ts(i)+1),s.isneg()&&!s.isZero()?"-"+n:n)};Xt.toInteger=Xt.toint=function(){var r=this,e=r.constructor;return Hr(new e(r),ts(r)+1,e.rounding)};Xt.toNumber=function(){return+this};Xt.toPower=Xt.pow=function(r){var e,n,i,s,a,o,l=this,c=l.constructor,u=12,h=+(r=new c(r));if(!r.s)return new c(Oo);if(l=new c(l),!l.s){if(r.s<1)throw Error(xl+"Infinity");return l}if(l.eq(Oo))return l;if(i=c.precision,r.eq(Oo))return Hr(l,i);if(e=r.e,n=r.d.length-1,o=e>=n,a=l.s,o){if((n=h<0?-h:h)<=Pae){for(s=new c(Oo),e=Math.ceil(i/ii+4),gi=!1;n%2&&(s=s.times(l),dY(s.d,e)),n=x0(n/2),n!==0;)l=l.times(l),dY(l.d,e);return gi=!0,r.s<0?new c(Oo).div(s):Hr(s,i)}}else if(a<0)throw Error(xl+"NaN");return a=a<0&&r.d[Math.max(e,n)]&1?-1:1,l.s=1,gi=!1,s=r.times(Gb(l,i+u)),gi=!0,s=Oae(s),s.s=a,s};Xt.toPrecision=function(r,e){var n,i,s=this,a=s.constructor;return r===void 0?(n=ts(s),i=kp(s,n<=a.toExpNeg||n>=a.toExpPos)):(Jc(r,1,v0),e===void 0?e=a.rounding:Jc(e,0,8),s=Hr(new a(s),r,e),n=ts(s),i=kp(s,r<=n||n<=a.toExpNeg,r)),i};Xt.toSignificantDigits=Xt.tosd=function(r,e){var n=this,i=n.constructor;return r===void 0?(r=i.precision,e=i.rounding):(Jc(r,1,v0),e===void 0?e=i.rounding:Jc(e,0,8)),Hr(new i(n),r,e)};Xt.toString=Xt.valueOf=Xt.val=Xt.toJSON=Xt[Symbol.for("nodejs.util.inspect.custom")]=function(){var r=this,e=ts(r),n=r.constructor;return kp(r,e<=n.toExpNeg||e>=n.toExpPos)};function Rae(r,e){var n,i,s,a,o,l,c,u,h=r.constructor,d=h.precision;if(!r.s||!e.s)return e.s||(e=new h(r)),gi?Hr(e,d):e;if(c=r.d,u=e.d,o=r.e,s=e.e,c=c.slice(),a=o-s,a){for(a<0?(i=c,a=-a,l=u.length):(i=u,s=o,l=c.length),o=Math.ceil(d/ii),l=o>l?o+1:l+1,a>l&&(a=l,i.length=1),i.reverse();a--;)i.push(0);i.reverse()}for(l=c.length,a=u.length,l-a<0&&(a=l,i=u,u=c,c=i),n=0;a;)n=(c[--a]=c[a]+u[a]+n)/As|0,c[a]%=As;for(n&&(c.unshift(n),++s),l=c.length;c[--l]==0;)c.pop();return e.d=c,e.e=s,gi?Hr(e,d):e}function Jc(r,e,n){if(r!==~~r||r<e||r>n)throw Error(gp+r)}function kc(r){var e,n,i,s=r.length-1,a="",o=r[0];if(s>0){for(a+=o,e=1;e<s;e++)i=r[e]+"",n=ii-i.length,n&&(a+=vd(n)),a+=i;o=r[e],i=o+"",n=ii-i.length,n&&(a+=vd(n))}else if(o===0)return"0";for(;o%10===0;)o/=10;return a+o}var dh=function(){function r(i,s){var a,o=0,l=i.length;for(i=i.slice();l--;)a=i[l]*s+o,i[l]=a%As|0,o=a/As|0;return o&&i.unshift(o),i}function e(i,s,a,o){var l,c;if(a!=o)c=a>o?1:-1;else for(l=c=0;l<a;l++)if(i[l]!=s[l]){c=i[l]>s[l]?1:-1;break}return c}function n(i,s,a){for(var o=0;a--;)i[a]-=o,o=i[a]<s[a]?1:0,i[a]=o*As+i[a]-s[a];for(;!i[0]&&i.length>1;)i.shift()}return function(i,s,a,o){var l,c,u,h,d,f,p,g,v,x,_,E,S,T,M,C,A,P,R=i.constructor,O=i.s==s.s?1:-1,D=i.d,F=s.d;if(!i.s)return new R(i);if(!s.s)throw Error(xl+"Division by zero");for(c=i.e-s.e,A=F.length,M=D.length,p=new R(O),g=p.d=[],u=0;F[u]==(D[u]||0);)++u;if(F[u]>(D[u]||0)&&--c,a==null?E=a=R.precision:o?E=a+(ts(i)-ts(s))+1:E=a,E<0)return new R(0);if(E=E/ii+2|0,u=0,A==1)for(h=0,F=F[0],E++;(u<M||h)&&E--;u++)S=h*As+(D[u]||0),g[u]=S/F|0,h=S%F|0;else{for(h=As/(F[0]+1)|0,h>1&&(F=r(F,h),D=r(D,h),A=F.length,M=D.length),T=A,v=D.slice(0,A),x=v.length;x<A;)v[x++]=0;P=F.slice(),P.unshift(0),C=F[0],F[1]>=As/2&&++C;do h=0,l=e(F,v,A,x),l<0?(_=v[0],A!=x&&(_=_*As+(v[1]||0)),h=_/C|0,h>1?(h>=As&&(h=As-1),d=r(F,h),f=d.length,x=v.length,l=e(d,v,f,x),l==1&&(h--,n(d,A<f?P:F,f))):(h==0&&(l=h=1),d=F.slice()),f=d.length,f<x&&d.unshift(0),n(v,d,x),l==-1&&(x=v.length,l=e(F,v,A,x),l<1&&(h++,n(v,A<x?P:F,x))),x=v.length):l===0&&(h++,v=[0]),g[u++]=h,l&&v[0]?v[x++]=D[T]||0:(v=[D[T]],x=1);while((T++<M||v[0]!==void 0)&&E--)}return g[0]||g.shift(),p.e=c,Hr(p,o?a+ts(p)+1:a)}}();function Oae(r,e){var n,i,s,a,o,l,c=0,u=0,h=r.constructor,d=h.precision;if(ts(r)>16)throw Error(Rz+ts(r));if(!r.s)return new h(Oo);for(gi=!1,l=d,o=new h(.03125);r.abs().gte(.1);)r=r.times(o),u+=5;for(i=Math.log(Yf(2,u))/Math.LN10*2+5|0,l+=i,n=s=a=new h(Oo),h.precision=l;;){if(s=Hr(s.times(r),l),n=n.times(++c),o=a.plus(dh(s,n,l)),kc(o.d).slice(0,l)===kc(a.d).slice(0,l)){for(;u--;)a=Hr(a.times(a),l);return h.precision=d,e==null?(gi=!0,Hr(a,d)):a}a=o}}function ts(r){for(var e=r.e*ii,n=r.d[0];n>=10;n/=10)e++;return e}function sL(r,e,n){if(e>r.LN10.sd())throw gi=!0,n&&(r.precision=n),Error(xl+"LN10 precision limit exceeded");return Hr(new r(r.LN10),e)}function vd(r){for(var e="";r--;)e+="0";return e}function Gb(r,e){var n,i,s,a,o,l,c,u,h,d=1,f=10,p=r,g=p.d,v=p.constructor,x=v.precision;if(p.s<1)throw Error(xl+(p.s?"NaN":"-Infinity"));if(p.eq(Oo))return new v(0);if(e==null?(gi=!1,u=x):u=e,p.eq(10))return e==null&&(gi=!0),sL(v,u);if(u+=f,v.precision=u,n=kc(g),i=n.charAt(0),a=ts(p),Math.abs(a)<15e14){for(;i<7&&i!=1||i==1&&n.charAt(1)>3;)p=p.times(r),n=kc(p.d),i=n.charAt(0),d++;a=ts(p),i>1?(p=new v("0."+n),a++):p=new v(i+"."+n.slice(1))}else return c=sL(v,u+2,x).times(a+""),p=Gb(new v(i+"."+n.slice(1)),u-f).plus(c),v.precision=x,e==null?(gi=!0,Hr(p,x)):p;for(l=o=p=dh(p.minus(Oo),p.plus(Oo),u),h=Hr(p.times(p),u),s=3;;){if(o=Hr(o.times(h),u),c=l.plus(dh(o,new v(s),u)),kc(c.d).slice(0,u)===kc(l.d).slice(0,u))return l=l.times(2),a!==0&&(l=l.plus(sL(v,u+2,x).times(a+""))),l=dh(l,new v(d),u),v.precision=x,e==null?(gi=!0,Hr(l,x)):l;l=c,s+=2}}function hY(r,e){var n,i,s;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(i=e.search(/e/i))>0?(n<0&&(n=i),n+=+e.slice(i+1),e=e.substring(0,i)):n<0&&(n=e.length),i=0;e.charCodeAt(i)===48;)++i;for(s=e.length;e.charCodeAt(s-1)===48;)--s;if(e=e.slice(i,s),e){if(s-=i,n=n-i-1,r.e=x0(n/ii),r.d=[],i=(n+1)%ii,n<0&&(i+=ii),i<s){for(i&&r.d.push(+e.slice(0,i)),s-=ii;i<s;)r.d.push(+e.slice(i,i+=ii));e=e.slice(i),i=ii-e.length}else i-=s;for(;i--;)e+="0";if(r.d.push(+e),gi&&(r.e>kE||r.e<-kE))throw Error(Rz+n)}else r.s=0,r.e=0,r.d=[0];return r}function Hr(r,e,n){var i,s,a,o,l,c,u,h,d=r.d;for(o=1,a=d[0];a>=10;a/=10)o++;if(i=e-o,i<0)i+=ii,s=e,u=d[h=0];else{if(h=Math.ceil((i+1)/ii),a=d.length,h>=a)return r;for(u=a=d[h],o=1;a>=10;a/=10)o++;i%=ii,s=i-ii+o}if(n!==void 0&&(a=Yf(10,o-s-1),l=u/a%10|0,c=e<0||d[h+1]!==void 0||u%a,c=n<4?(l||c)&&(n==0||n==(r.s<0?3:2)):l>5||l==5&&(n==4||c||n==6&&(i>0?s>0?u/Yf(10,o-s):0:d[h-1])%10&1||n==(r.s<0?8:7))),e<1||!d[0])return c?(a=ts(r),d.length=1,e=e-a-1,d[0]=Yf(10,(ii-e%ii)%ii),r.e=x0(-e/ii)||0):(d.length=1,d[0]=r.e=r.s=0),r;if(i==0?(d.length=h,a=1,h--):(d.length=h+1,a=Yf(10,ii-i),d[h]=s>0?(u/Yf(10,o-s)%Yf(10,s)|0)*a:0),c)for(;;)if(h==0){(d[0]+=a)==As&&(d[0]=1,++r.e);break}else{if(d[h]+=a,d[h]!=As)break;d[h--]=0,a=1}for(i=d.length;d[--i]===0;)d.pop();if(gi&&(r.e>kE||r.e<-kE))throw Error(Rz+ts(r));return r}function kae(r,e){var n,i,s,a,o,l,c,u,h,d,f=r.constructor,p=f.precision;if(!r.s||!e.s)return e.s?e.s=-e.s:e=new f(r),gi?Hr(e,p):e;if(c=r.d,d=e.d,i=e.e,u=r.e,c=c.slice(),o=u-i,o){for(h=o<0,h?(n=c,o=-o,l=d.length):(n=d,i=u,l=c.length),s=Math.max(Math.ceil(p/ii),l)+2,o>s&&(o=s,n.length=1),n.reverse(),s=o;s--;)n.push(0);n.reverse()}else{for(s=c.length,l=d.length,h=s<l,h&&(l=s),s=0;s<l;s++)if(c[s]!=d[s]){h=c[s]<d[s];break}o=0}for(h&&(n=c,c=d,d=n,e.s=-e.s),l=c.length,s=d.length-l;s>0;--s)c[l++]=0;for(s=d.length;s>o;){if(c[--s]<d[s]){for(a=s;a&&c[--a]===0;)c[a]=As-1;--c[a],c[s]+=As}c[s]-=d[s]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--i;return c[0]?(e.d=c,e.e=i,gi?Hr(e,p):e):new f(0)}function kp(r,e,n){var i,s=ts(r),a=kc(r.d),o=a.length;return e?(n&&(i=n-o)>0?a=a.charAt(0)+"."+a.slice(1)+vd(i):o>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(s<0?"e":"e+")+s):s<0?(a="0."+vd(-s-1)+a,n&&(i=n-o)>0&&(a+=vd(i))):s>=o?(a+=vd(s+1-o),n&&(i=n-s-1)>0&&(a=a+"."+vd(i))):((i=s+1)<o&&(a=a.slice(0,i)+"."+a.slice(i)),n&&(i=n-o)>0&&(s+1===o&&(a+="."),a+=vd(i))),r.s<0?"-"+a:a}function dY(r,e){if(r.length>e)return r.length=e,!0}function Iae(r){var e,n,i;function s(a){var o=this;if(!(o instanceof s))return new s(a);if(o.constructor=s,a instanceof s){o.s=a.s,o.e=a.e,o.d=(a=a.d)?a.slice():a;return}if(typeof a=="number"){if(a*0!==0)throw Error(gp+a);if(a>0)o.s=1;else if(a<0)a=-a,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(a===~~a&&a<1e7){o.e=0,o.d=[a];return}return hY(o,a.toString())}else if(typeof a!="string")throw Error(gp+a);if(a.charCodeAt(0)===45?(a=a.slice(1),o.s=-1):o.s=1,X8e.test(a))hY(o,a);else throw Error(gp+a)}if(s.prototype=Xt,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.clone=Iae,s.config=s.set=K8e,r===void 0&&(r={}),r)for(i=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<i.length;)r.hasOwnProperty(n=i[e++])||(r[n]=this[n]);return s.config(r),s}function K8e(r){if(!r||typeof r!="object")throw Error(xl+"Object expected");var e,n,i,s=["precision",1,v0,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<s.length;e+=3)if((i=r[n=s[e]])!==void 0)if(x0(i)===i&&i>=s[e+1]&&i<=s[e+2])this[n]=i;else throw Error(gp+n+": "+i);if((i=r[n="LN10"])!==void 0)if(i==Math.LN10)this[n]=new this(i);else throw Error(gp+n+": "+i);return this}var Oz=Iae(q8e);Oo=new Oz(1);const Br=Oz;function Y8e(r){return eHe(r)||J8e(r)||Q8e(r)||Z8e()}function Z8e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Q8e(r,e){if(r){if(typeof r=="string")return GF(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return GF(r,e)}}function J8e(r){if(typeof Symbol<"u"&&Symbol.iterator in Object(r))return Array.from(r)}function eHe(r){if(Array.isArray(r))return GF(r)}function GF(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=r[n];return i}var tHe=function(e){return e},Dae={},Lae=function(e){return e===Dae},fY=function(e){return function n(){return arguments.length===0||arguments.length===1&&Lae(arguments.length<=0?void 0:arguments[0])?n:e.apply(void 0,arguments)}},nHe=function r(e,n){return e===1?n:fY(function(){for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];var o=s.filter(function(l){return l!==Dae}).length;return o>=e?n.apply(void 0,s):r(e-o,fY(function(){for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];var h=s.map(function(d){return Lae(d)?c.shift():d});return n.apply(void 0,Y8e(h).concat(c))}))})},IA=function(e){return nHe(e.length,e)},VF=function(e,n){for(var i=[],s=e;s<n;++s)i[s-e]=s;return i},rHe=IA(function(r,e){return Array.isArray(e)?e.map(r):Object.keys(e).map(function(n){return e[n]}).map(r)}),iHe=function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];if(!n.length)return tHe;var s=n.reverse(),a=s[0],o=s.slice(1);return function(){return o.reduce(function(l,c){return c(l)},a.apply(void 0,arguments))}},HF=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},Fae=function(e){var n=null,i=null;return function(){for(var s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];return n&&a.every(function(l,c){return l===n[c]})||(n=a,i=e.apply(void 0,a)),i}};function sHe(r){var e;return r===0?e=1:e=Math.floor(new Br(r).abs().log(10).toNumber())+1,e}function aHe(r,e,n){for(var i=new Br(r),s=0,a=[];i.lt(e)&&s<1e5;)a.push(i.toNumber()),i=i.add(n),s++;return a}var oHe=IA(function(r,e,n){var i=+r,s=+e;return i+n*(s-i)}),lHe=IA(function(r,e,n){var i=e-+r;return i=i||1/0,(n-r)/i}),cHe=IA(function(r,e,n){var i=e-+r;return i=i||1/0,Math.max(0,Math.min(1,(n-r)/i))});const DA={rangeStep:aHe,getDigitCount:sHe,interpolateNumber:oHe,uninterpolateNumber:lHe,uninterpolateTruncation:cHe};function WF(r){return dHe(r)||hHe(r)||Bae(r)||uHe()}function uHe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hHe(r){if(typeof Symbol<"u"&&Symbol.iterator in Object(r))return Array.from(r)}function dHe(r){if(Array.isArray(r))return qF(r)}function Vb(r,e){return mHe(r)||pHe(r,e)||Bae(r,e)||fHe()}function fHe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Bae(r,e){if(r){if(typeof r=="string")return qF(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return qF(r,e)}}function qF(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=r[n];return i}function pHe(r,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(r)))){var n=[],i=!0,s=!1,a=void 0;try{for(var o=r[Symbol.iterator](),l;!(i=(l=o.next()).done)&&(n.push(l.value),!(e&&n.length===e));i=!0);}catch(c){s=!0,a=c}finally{try{!i&&o.return!=null&&o.return()}finally{if(s)throw a}}return n}}function mHe(r){if(Array.isArray(r))return r}function jae(r){var e=Vb(r,2),n=e[0],i=e[1],s=n,a=i;return n>i&&(s=i,a=n),[s,a]}function Uae(r,e,n){if(r.lte(0))return new Br(0);var i=DA.getDigitCount(r.toNumber()),s=new Br(10).pow(i),a=r.div(s),o=i!==1?.05:.1,l=new Br(Math.ceil(a.div(o).toNumber())).add(n).mul(o),c=l.mul(s);return e?c:new Br(Math.ceil(c))}function gHe(r,e,n){var i=1,s=new Br(r);if(!s.isint()&&n){var a=Math.abs(r);a<1?(i=new Br(10).pow(DA.getDigitCount(r)-1),s=new Br(Math.floor(s.div(i).toNumber())).mul(i)):a>1&&(s=new Br(Math.floor(r)))}else r===0?s=new Br(Math.floor((e-1)/2)):n||(s=new Br(Math.floor(r)));var o=Math.floor((e-1)/2),l=iHe(rHe(function(c){return s.add(new Br(c-o).mul(i)).toNumber()}),VF);return l(0,e)}function zae(r,e,n,i){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((e-r)/(n-1)))return{step:new Br(0),tickMin:new Br(0),tickMax:new Br(0)};var a=Uae(new Br(e).sub(r).div(n-1),i,s),o;r<=0&&e>=0?o=new Br(0):(o=new Br(r).add(e).div(2),o=o.sub(new Br(o).mod(a)));var l=Math.ceil(o.sub(r).div(a).toNumber()),c=Math.ceil(new Br(e).sub(o).div(a).toNumber()),u=l+c+1;return u>n?zae(r,e,n,i,s+1):(u<n&&(c=e>0?c+(n-u):c,l=e>0?l:l+(n-u)),{step:a,tickMin:o.sub(new Br(l).mul(a)),tickMax:o.add(new Br(c).mul(a))})}function yHe(r){var e=Vb(r,2),n=e[0],i=e[1],s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(s,2),l=jae([n,i]),c=Vb(l,2),u=c[0],h=c[1];if(u===-1/0||h===1/0){var d=h===1/0?[u].concat(WF(VF(0,s-1).map(function(){return 1/0}))):[].concat(WF(VF(0,s-1).map(function(){return-1/0})),[h]);return n>i?HF(d):d}if(u===h)return gHe(u,s,a);var f=zae(u,h,o,a),p=f.step,g=f.tickMin,v=f.tickMax,x=DA.rangeStep(g,v.add(new Br(.1).mul(p)),p);return n>i?HF(x):x}function vHe(r,e){var n=Vb(r,2),i=n[0],s=n[1],a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=jae([i,s]),l=Vb(o,2),c=l[0],u=l[1];if(c===-1/0||u===1/0)return[i,s];if(c===u)return[c];var h=Math.max(e,2),d=Uae(new Br(u).sub(c).div(h-1),a,0),f=[].concat(WF(DA.rangeStep(new Br(c),new Br(u).sub(new Br(.99).mul(d)),d)),[u]);return i>s?HF(f):f}var xHe=Fae(yHe),bHe=Fae(vHe),_He="Invariant failed";function Ip(r,e){throw new Error(_He)}var wHe=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function ky(r){"@babel/helpers - typeof";return ky=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ky(r)}function IE(){return IE=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])}return r},IE.apply(this,arguments)}function SHe(r,e){return AHe(r)||MHe(r,e)||EHe(r,e)||THe()}function THe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function EHe(r,e){if(r){if(typeof r=="string")return pY(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return pY(r,e)}}function pY(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=r[n];return i}function MHe(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var i,s,a,o,l=[],c=!0,u=!1;try{if(a=(n=n.call(r)).next,e!==0)for(;!(c=(i=a.call(n)).done)&&(l.push(i.value),l.length!==e);c=!0);}catch(h){u=!0,s=h}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function AHe(r){if(Array.isArray(r))return r}function CHe(r,e){if(r==null)return{};var n=NHe(r,e),i,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);for(s=0;s<a.length;s++)i=a[s],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(r,i)&&(n[i]=r[i])}return n}function NHe(r,e){if(r==null)return{};var n={};for(var i in r)if(Object.prototype.hasOwnProperty.call(r,i)){if(e.indexOf(i)>=0)continue;n[i]=r[i]}return n}function PHe(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function RHe(r,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(r,Vae(i.key),i)}}function OHe(r,e,n){return e&&RHe(r.prototype,e),Object.defineProperty(r,"prototype",{writable:!1}),r}function kHe(r,e,n){return e=DE(e),IHe(r,$ae()?Reflect.construct(e,n||[],DE(r).constructor):e.apply(r,n))}function IHe(r,e){if(e&&(ky(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return DHe(r)}function DHe(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function $ae(){try{var r=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return($ae=function(){return!!r})()}function DE(r){return DE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},DE(r)}function LHe(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),e&&XF(r,e)}function XF(r,e){return XF=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,s){return i.__proto__=s,i},XF(r,e)}function Gae(r,e,n){return e=Vae(e),e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function Vae(r){var e=FHe(r,"string");return ky(e)=="symbol"?e:e+""}function FHe(r,e){if(ky(r)!="object"||!r)return r;var n=r[Symbol.toPrimitive];if(n!==void 0){var i=n.call(r,e);if(ky(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(r)}var b0=function(r){function e(){return PHe(this,e),kHe(this,e,arguments)}return LHe(e,r),OHe(e,[{key:"render",value:function(){var i=this.props,s=i.offset,a=i.layout,o=i.width,l=i.dataKey,c=i.data,u=i.dataPointFormatter,h=i.xAxis,d=i.yAxis,f=CHe(i,wHe),p=$n(f,!1);this.props.direction==="x"&&h.type!=="number"&&Ip();var g=c.map(function(v){var x=u(v,l),_=x.x,E=x.y,S=x.value,T=x.errorVal;if(!T)return null;var M=[],C,A;if(Array.isArray(T)){var P=SHe(T,2);C=P[0],A=P[1]}else C=A=T;if(a==="vertical"){var R=h.scale,O=E+s,D=O+o,F=O-o,U=R(S-C),B=R(S+A);M.push({x1:B,y1:D,x2:B,y2:F}),M.push({x1:U,y1:O,x2:B,y2:O}),M.push({x1:U,y1:D,x2:U,y2:F})}else if(a==="horizontal"){var W=d.scale,j=_+s,$=j-o,z=j+o,Z=W(S-C),se=W(S+A);M.push({x1:$,y1:se,x2:z,y2:se}),M.push({x1:j,y1:Z,x2:j,y2:se}),M.push({x1:$,y1:Z,x2:z,y2:Z})}return ce.createElement(Pr,IE({className:"recharts-errorBar",key:"bar-".concat(M.map(function(q){return"".concat(q.x1,"-").concat(q.x2,"-").concat(q.y1,"-").concat(q.y2)}))},p),M.map(function(q){return ce.createElement("line",IE({},q,{key:"line-".concat(q.x1,"-").concat(q.x2,"-").concat(q.y1,"-").concat(q.y2)}))}))});return ce.createElement(Pr,{className:"recharts-errorBars"},g)}}])}(ce.Component);Gae(b0,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});Gae(b0,"displayName","ErrorBar");function Hb(r){"@babel/helpers - typeof";return Hb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hb(r)}function mY(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable})),n.push.apply(n,i)}return n}function $f(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?mY(Object(n),!0).forEach(function(i){BHe(r,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):mY(Object(n)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(n,i))})}return r}function BHe(r,e,n){return e=jHe(e),e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function jHe(r){var e=UHe(r,"string");return Hb(e)=="symbol"?e:e+""}function UHe(r,e){if(Hb(r)!="object"||!r)return r;var n=r[Symbol.toPrimitive];if(n!==void 0){var i=n.call(r,e);if(Hb(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}var Hae=function(e){var n=e.children,i=e.formattedGraphicalItems,s=e.legendWidth,a=e.legendContent,o=Co(n,Oc);if(!o)return null;var l=Oc.defaultProps,c=l!==void 0?$f($f({},l),o.props):{},u;return o.props&&o.props.payload?u=o.props&&o.props.payload:a==="children"?u=(i||[]).reduce(function(h,d){var f=d.item,p=d.props,g=p.sectors||p.data||[];return h.concat(g.map(function(v){return{type:o.props.iconType||f.props.legendType,value:v.name,color:v.fill,payload:v}}))},[]):u=(i||[]).map(function(h){var d=h.item,f=d.type.defaultProps,p=f!==void 0?$f($f({},f),d.props):{},g=p.dataKey,v=p.name,x=p.legendType,_=p.hide;return{inactive:_,dataKey:g,type:c.iconType||x||"square",color:kz(d),value:v||g,payload:p}}),$f($f($f({},c),Oc.getWithHeight(o,s)),{},{payload:u,item:o})};function Wb(r){"@babel/helpers - typeof";return Wb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wb(r)}function gY(r){return VHe(r)||GHe(r)||$He(r)||zHe()}function zHe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $He(r,e){if(r){if(typeof r=="string")return KF(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return KF(r,e)}}function GHe(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function VHe(r){if(Array.isArray(r))return KF(r)}function KF(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=r[n];return i}function yY(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable})),n.push.apply(n,i)}return n}function Pi(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?yY(Object(n),!0).forEach(function(i){Kg(r,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):yY(Object(n)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(n,i))})}return r}function Kg(r,e,n){return e=HHe(e),e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function HHe(r){var e=WHe(r,"string");return Wb(e)=="symbol"?e:e+""}function WHe(r,e){if(Wb(r)!="object"||!r)return r;var n=r[Symbol.toPrimitive];if(n!==void 0){var i=n.call(r,e);if(Wb(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function ms(r,e,n){return Gn(r)||Gn(e)?n:fs(e)?pl(r,e,n):Wn(e)?e(r):n}function Ix(r,e,n,i){var s=V8e(r,function(l){return ms(l,e)});if(n==="number"){var a=s.filter(function(l){return bt(l)||parseFloat(l)});return a.length?[kA(a),Td(a)]:[1/0,-1/0]}var o=i?s.filter(function(l){return!Gn(l)}):s;return o.map(function(l){return fs(l)||l instanceof Date?l:""})}var qHe=function(e){var n,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],s=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,o=-1,l=(n=i==null?void 0:i.length)!==null&&n!==void 0?n:0;if(l<=1)return 0;if(a&&a.axisType==="angleAxis"&&Math.abs(Math.abs(a.range[1]-a.range[0])-360)<=1e-6)for(var c=a.range,u=0;u<l;u++){var h=u>0?s[u-1].coordinate:s[l-1].coordinate,d=s[u].coordinate,f=u>=l-1?s[0].coordinate:s[u+1].coordinate,p=void 0;if(rc(d-h)!==rc(f-d)){var g=[];if(rc(f-d)===rc(c[1]-c[0])){p=f;var v=d+c[1]-c[0];g[0]=Math.min(v,(v+h)/2),g[1]=Math.max(v,(v+h)/2)}else{p=h;var x=f+c[1]-c[0];g[0]=Math.min(d,(x+d)/2),g[1]=Math.max(d,(x+d)/2)}var _=[Math.min(d,(p+d)/2),Math.max(d,(p+d)/2)];if(e>_[0]&&e<=_[1]||e>=g[0]&&e<=g[1]){o=s[u].index;break}}else{var E=Math.min(h,f),S=Math.max(h,f);if(e>(E+d)/2&&e<=(S+d)/2){o=s[u].index;break}}}else for(var T=0;T<l;T++)if(T===0&&e<=(i[T].coordinate+i[T+1].coordinate)/2||T>0&&T<l-1&&e>(i[T].coordinate+i[T-1].coordinate)/2&&e<=(i[T].coordinate+i[T+1].coordinate)/2||T===l-1&&e>(i[T].coordinate+i[T-1].coordinate)/2){o=i[T].index;break}return o},kz=function(e){var n,i=e,s=i.type.displayName,a=(n=e.type)!==null&&n!==void 0&&n.defaultProps?Pi(Pi({},e.type.defaultProps),e.props):e.props,o=a.stroke,l=a.fill,c;switch(s){case"Line":c=o;break;case"Area":case"Radar":c=o&&o!=="none"?o:l;break;default:c=l;break}return c},XHe=function(e){var n=e.barSize,i=e.totalSize,s=e.stackGroups,a=s===void 0?{}:s;if(!a)return{};for(var o={},l=Object.keys(a),c=0,u=l.length;c<u;c++)for(var h=a[l[c]].stackGroups,d=Object.keys(h),f=0,p=d.length;f<p;f++){var g=h[d[f]],v=g.items,x=g.cateAxisId,_=v.filter(function(A){return uh(A.type).indexOf("Bar")>=0});if(_&&_.length){var E=_[0].type.defaultProps,S=E!==void 0?Pi(Pi({},E),_[0].props):_[0].props,T=S.barSize,M=S[x];o[M]||(o[M]=[]);var C=Gn(T)?n:T;o[M].push({item:_[0],stackList:_.slice(1),barSize:Gn(C)?void 0:Rp(C,i,0)})}}return o},KHe=function(e){var n=e.barGap,i=e.barCategoryGap,s=e.bandSize,a=e.sizeList,o=a===void 0?[]:a,l=e.maxBarSize,c=o.length;if(c<1)return null;var u=Rp(n,s,0,!0),h,d=[];if(o[0].barSize===+o[0].barSize){var f=!1,p=s/c,g=o.reduce(function(T,M){return T+M.barSize||0},0);g+=(c-1)*u,g>=s&&(g-=(c-1)*u,u=0),g>=s&&p>0&&(f=!0,p*=.9,g=c*p);var v=(s-g)/2>>0,x={offset:v-u,size:0};h=o.reduce(function(T,M){var C={item:M.item,position:{offset:x.offset+x.size+u,size:f?p:M.barSize}},A=[].concat(gY(T),[C]);return x=A[A.length-1].position,M.stackList&&M.stackList.length&&M.stackList.forEach(function(P){A.push({item:P,position:x})}),A},d)}else{var _=Rp(i,s,0,!0);s-2*_-(c-1)*u<=0&&(u=0);var E=(s-2*_-(c-1)*u)/c;E>1&&(E>>=0);var S=l===+l?Math.min(E,l):E;h=o.reduce(function(T,M,C){var A=[].concat(gY(T),[{item:M.item,position:{offset:_+(E+u)*C+(E-S)/2,size:S}}]);return M.stackList&&M.stackList.length&&M.stackList.forEach(function(P){A.push({item:P,position:A[A.length-1].position})}),A},d)}return h},YHe=function(e,n,i,s){var a=i.children,o=i.width,l=i.margin,c=o-(l.left||0)-(l.right||0),u=Hae({children:a,legendWidth:c});if(u){var h=s||{},d=h.width,f=h.height,p=u.align,g=u.verticalAlign,v=u.layout;if((v==="vertical"||v==="horizontal"&&g==="middle")&&p!=="center"&&bt(e[p]))return Pi(Pi({},e),{},Kg({},p,e[p]+(d||0)));if((v==="horizontal"||v==="vertical"&&p==="center")&&g!=="middle"&&bt(e[g]))return Pi(Pi({},e),{},Kg({},g,e[g]+(f||0)))}return e},ZHe=function(e,n,i){return Gn(n)?!0:e==="horizontal"?n==="yAxis":e==="vertical"||i==="x"?n==="xAxis":i==="y"?n==="yAxis":!0},Wae=function(e,n,i,s,a){var o=n.props.children,l=no(o,b0).filter(function(u){return ZHe(s,a,u.props.direction)});if(l&&l.length){var c=l.map(function(u){return u.props.dataKey});return e.reduce(function(u,h){var d=ms(h,i);if(Gn(d))return u;var f=Array.isArray(d)?[kA(d),Td(d)]:[d,d],p=c.reduce(function(g,v){var x=ms(h,v,0),_=f[0]-Math.abs(Array.isArray(x)?x[0]:x),E=f[1]+Math.abs(Array.isArray(x)?x[1]:x);return[Math.min(_,g[0]),Math.max(E,g[1])]},[1/0,-1/0]);return[Math.min(p[0],u[0]),Math.max(p[1],u[1])]},[1/0,-1/0])}return null},QHe=function(e,n,i,s,a){var o=n.map(function(l){return Wae(e,l,i,a,s)}).filter(function(l){return!Gn(l)});return o&&o.length?o.reduce(function(l,c){return[Math.min(l[0],c[0]),Math.max(l[1],c[1])]},[1/0,-1/0]):null},qae=function(e,n,i,s,a){var o=n.map(function(c){var u=c.props.dataKey;return i==="number"&&u&&Wae(e,c,u,s)||Ix(e,u,i,a)});if(i==="number")return o.reduce(function(c,u){return[Math.min(c[0],u[0]),Math.max(c[1],u[1])]},[1/0,-1/0]);var l={};return o.reduce(function(c,u){for(var h=0,d=u.length;h<d;h++)l[u[h]]||(l[u[h]]=!0,c.push(u[h]));return c},[])},Xae=function(e,n){return e==="horizontal"&&n==="xAxis"||e==="vertical"&&n==="yAxis"||e==="centric"&&n==="angleAxis"||e==="radial"&&n==="radiusAxis"},Kae=function(e,n,i,s){if(s)return e.map(function(c){return c.coordinate});var a,o,l=e.map(function(c){return c.coordinate===n&&(a=!0),c.coordinate===i&&(o=!0),c.coordinate});return a||l.push(n),o||l.push(i),l},th=function(e,n,i){if(!e)return null;var s=e.scale,a=e.duplicateDomain,o=e.type,l=e.range,c=e.realScaleType==="scaleBand"?s.bandwidth()/2:2,u=(n||i)&&o==="category"&&s.bandwidth?s.bandwidth()/c:0;if(u=e.axisType==="angleAxis"&&(l==null?void 0:l.length)>=2?rc(l[0]-l[1])*2*u:u,n&&(e.ticks||e.niceTicks)){var h=(e.ticks||e.niceTicks).map(function(d){var f=a?a.indexOf(d):d;return{coordinate:s(f)+u,value:d,offset:u}});return h.filter(function(d){return!g0(d.coordinate)})}return e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(d,f){return{coordinate:s(d)+u,value:d,index:f,offset:u}}):s.ticks&&!i?s.ticks(e.tickCount).map(function(d){return{coordinate:s(d)+u,value:d,offset:u}}):s.domain().map(function(d,f){return{coordinate:s(d)+u,value:a?a[d]:d,index:f,offset:u}})},aL=new WeakMap,HS=function(e,n){if(typeof n!="function")return e;aL.has(e)||aL.set(e,new WeakMap);var i=aL.get(e);if(i.has(n))return i.get(n);var s=function(){e.apply(void 0,arguments),n.apply(void 0,arguments)};return i.set(n,s),s},JHe=function(e,n,i){var s=e.scale,a=e.type,o=e.layout,l=e.axisType;if(s==="auto")return o==="radial"&&l==="radiusAxis"?{scale:pb(),realScaleType:"band"}:o==="radial"&&l==="angleAxis"?{scale:xb(),realScaleType:"linear"}:a==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!i)?{scale:xx(),realScaleType:"point"}:a==="category"?{scale:pb(),realScaleType:"band"}:{scale:xb(),realScaleType:"linear"};if(V_(s)){var c="scale".concat(EA(s));return{scale:(nY[c]||xx)(),realScaleType:nY[c]?c:"point"}}return Wn(s)?{scale:s}:{scale:xx(),realScaleType:"point"}},vY=1e-4,eWe=function(e){var n=e.domain();if(!(!n||n.length<=2)){var i=n.length,s=e.range(),a=Math.min(s[0],s[1])-vY,o=Math.max(s[0],s[1])+vY,l=e(n[0]),c=e(n[i-1]);(l<a||l>o||c<a||c>o)&&e.domain([n[0],n[i-1]])}},tWe=function(e,n){if(!e)return null;for(var i=0,s=e.length;i<s;i++)if(e[i].item===n)return e[i].position;return null},nWe=function(e,n){if(!n||n.length!==2||!bt(n[0])||!bt(n[1]))return e;var i=Math.min(n[0],n[1]),s=Math.max(n[0],n[1]),a=[e[0],e[1]];return(!bt(e[0])||e[0]<i)&&(a[0]=i),(!bt(e[1])||e[1]>s)&&(a[1]=s),a[0]>s&&(a[0]=s),a[1]<i&&(a[1]=i),a},rWe=function(e){var n=e.length;if(!(n<=0))for(var i=0,s=e[0].length;i<s;++i)for(var a=0,o=0,l=0;l<n;++l){var c=g0(e[l][i][1])?e[l][i][0]:e[l][i][1];c>=0?(e[l][i][0]=a,e[l][i][1]=a+c,a=e[l][i][1]):(e[l][i][0]=o,e[l][i][1]=o+c,o=e[l][i][1])}},iWe=function(e){var n=e.length;if(!(n<=0))for(var i=0,s=e[0].length;i<s;++i)for(var a=0,o=0;o<n;++o){var l=g0(e[o][i][1])?e[o][i][0]:e[o][i][1];l>=0?(e[o][i][0]=a,e[o][i][1]=a+l,a=e[o][i][1]):(e[o][i][0]=0,e[o][i][1]=0)}},sWe={sign:rWe,expand:p6e,none:Cy,silhouette:m6e,wiggle:g6e,positive:iWe},aWe=function(e,n,i){var s=n.map(function(l){return l.props.dataKey}),a=sWe[i],o=f6e().keys(s).value(function(l,c){return+ms(l,c,0)}).order(OF).offset(a);return o(e)},oWe=function(e,n,i,s,a,o){if(!e)return null;var l=o?n.reverse():n,c={},u=l.reduce(function(d,f){var p,g=(p=f.type)!==null&&p!==void 0&&p.defaultProps?Pi(Pi({},f.type.defaultProps),f.props):f.props,v=g.stackId,x=g.hide;if(x)return d;var _=g[i],E=d[_]||{hasStack:!1,stackGroups:{}};if(fs(v)){var S=E.stackGroups[v]||{numericAxisId:i,cateAxisId:s,items:[]};S.items.push(f),E.hasStack=!0,E.stackGroups[v]=S}else E.stackGroups[Vp("_stackId_")]={numericAxisId:i,cateAxisId:s,items:[f]};return Pi(Pi({},d),{},Kg({},_,E))},c),h={};return Object.keys(u).reduce(function(d,f){var p=u[f];if(p.hasStack){var g={};p.stackGroups=Object.keys(p.stackGroups).reduce(function(v,x){var _=p.stackGroups[x];return Pi(Pi({},v),{},Kg({},x,{numericAxisId:i,cateAxisId:s,items:_.items,stackedData:aWe(e,_.items,a)}))},g)}return Pi(Pi({},d),{},Kg({},f,p))},h)},lWe=function(e,n){var i=n.realScaleType,s=n.type,a=n.tickCount,o=n.originalDomain,l=n.allowDecimals,c=i||n.scale;if(c!=="auto"&&c!=="linear")return null;if(a&&s==="number"&&o&&(o[0]==="auto"||o[1]==="auto")){var u=e.domain();if(!u.length)return null;var h=xHe(u,a,l);return e.domain([kA(h),Td(h)]),{niceTicks:h}}if(a&&s==="number"){var d=e.domain(),f=bHe(d,a,l);return{niceTicks:f}}return null};function Iy(r){var e=r.axis,n=r.ticks,i=r.bandSize,s=r.entry,a=r.index,o=r.dataKey;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!Gn(s[e.dataKey])){var l=bE(n,"value",s[e.dataKey]);if(l)return l.coordinate+i/2}return n[a]?n[a].coordinate+i/2:null}var c=ms(s,Gn(o)?e.dataKey:o);return Gn(c)?null:e.scale(c)}var xY=function(e){var n=e.axis,i=e.ticks,s=e.offset,a=e.bandSize,o=e.entry,l=e.index;if(n.type==="category")return i[l]?i[l].coordinate+s:null;var c=ms(o,n.dataKey,n.domain[l]);return Gn(c)?null:n.scale(c)-a/2+s},cWe=function(e){var n=e.numericAxis,i=n.scale.domain();if(n.type==="number"){var s=Math.min(i[0],i[1]),a=Math.max(i[0],i[1]);return s<=0&&a>=0?0:a<0?a:s}return i[0]},uWe=function(e,n){var i,s=(i=e.type)!==null&&i!==void 0&&i.defaultProps?Pi(Pi({},e.type.defaultProps),e.props):e.props,a=s.stackId;if(fs(a)){var o=n[a];if(o){var l=o.items.indexOf(e);return l>=0?o.stackedData[l]:null}}return null},hWe=function(e){return e.reduce(function(n,i){return[kA(i.concat([n[0]]).filter(bt)),Td(i.concat([n[1]]).filter(bt))]},[1/0,-1/0])},Yae=function(e,n,i){return Object.keys(e).reduce(function(s,a){var o=e[a],l=o.stackedData,c=l.reduce(function(u,h){var d=hWe(h.slice(n,i+1));return[Math.min(u[0],d[0]),Math.max(u[1],d[1])]},[1/0,-1/0]);return[Math.min(c[0],s[0]),Math.max(c[1],s[1])]},[1/0,-1/0]).map(function(s){return s===1/0||s===-1/0?0:s})},bY=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,_Y=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,YF=function(e,n,i){if(Wn(e))return e(n,i);if(!Array.isArray(e))return n;var s=[];if(bt(e[0]))s[0]=i?e[0]:Math.min(e[0],n[0]);else if(bY.test(e[0])){var a=+bY.exec(e[0])[1];s[0]=n[0]-a}else Wn(e[0])?s[0]=e[0](n[0]):s[0]=n[0];if(bt(e[1]))s[1]=i?e[1]:Math.max(e[1],n[1]);else if(_Y.test(e[1])){var o=+_Y.exec(e[1])[1];s[1]=n[1]+o}else Wn(e[1])?s[1]=e[1](n[1]):s[1]=n[1];return s},LE=function(e,n,i){if(e&&e.scale&&e.scale.bandwidth){var s=e.scale.bandwidth();if(!i||s>0)return s}if(e&&n&&n.length>=2){for(var a=Cz(n,function(d){return d.coordinate}),o=1/0,l=1,c=a.length;l<c;l++){var u=a[l],h=a[l-1];o=Math.min((u.coordinate||0)-(h.coordinate||0),o)}return o===1/0?0:o}return i?void 0:0},wY=function(e,n,i){return!e||!e.length||Op(e,pl(i,"type.defaultProps.domain"))?n:e},Zae=function(e,n){var i=e.type.defaultProps?Pi(Pi({},e.type.defaultProps),e.props):e.props,s=i.dataKey,a=i.name,o=i.unit,l=i.formatter,c=i.tooltipType,u=i.chartType,h=i.hide;return Pi(Pi({},$n(e,!1)),{},{dataKey:s,unit:o,formatter:l,name:a||s,color:kz(e),value:ms(n,s),type:c,payload:n,chartType:u,hide:h})};function qb(r){"@babel/helpers - typeof";return qb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qb(r)}function SY(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable})),n.push.apply(n,i)}return n}function TY(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?SY(Object(n),!0).forEach(function(i){dWe(r,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):SY(Object(n)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(n,i))})}return r}function dWe(r,e,n){return e=fWe(e),e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function fWe(r){var e=pWe(r,"string");return qb(e)=="symbol"?e:e+""}function pWe(r,e){if(qb(r)!="object"||!r)return r;var n=r[Symbol.toPrimitive];if(n!==void 0){var i=n.call(r,e);if(qb(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}var FE=Math.PI/180,mWe=function(e){return e*180/Math.PI},Hs=function(e,n,i,s){return{x:e+Math.cos(-FE*s)*i,y:n+Math.sin(-FE*s)*i}},gWe=function(e,n){var i=e.x,s=e.y,a=n.x,o=n.y;return Math.sqrt(Math.pow(i-a,2)+Math.pow(s-o,2))},yWe=function(e,n){var i=e.x,s=e.y,a=n.cx,o=n.cy,l=gWe({x:i,y:s},{x:a,y:o});if(l<=0)return{radius:l};var c=(i-a)/l,u=Math.acos(c);return s>o&&(u=2*Math.PI-u),{radius:l,angle:mWe(u),angleInRadian:u}},vWe=function(e){var n=e.startAngle,i=e.endAngle,s=Math.floor(n/360),a=Math.floor(i/360),o=Math.min(s,a);return{startAngle:n-o*360,endAngle:i-o*360}},xWe=function(e,n){var i=n.startAngle,s=n.endAngle,a=Math.floor(i/360),o=Math.floor(s/360),l=Math.min(a,o);return e+l*360},EY=function(e,n){var i=e.x,s=e.y,a=yWe({x:i,y:s},n),o=a.radius,l=a.angle,c=n.innerRadius,u=n.outerRadius;if(o<c||o>u)return!1;if(o===0)return!0;var h=vWe(n),d=h.startAngle,f=h.endAngle,p=l,g;if(d<=f){for(;p>f;)p-=360;for(;p<d;)p+=360;g=p>=d&&p<=f}else{for(;p>d;)p-=360;for(;p<f;)p+=360;g=p>=f&&p<=d}return g?TY(TY({},n),{},{radius:o,angle:xWe(p,n)}):null};function Xb(r){"@babel/helpers - typeof";return Xb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xb(r)}var bWe=["offset"];function _We(r){return EWe(r)||TWe(r)||SWe(r)||wWe()}function wWe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function SWe(r,e){if(r){if(typeof r=="string")return ZF(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ZF(r,e)}}function TWe(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function EWe(r){if(Array.isArray(r))return ZF(r)}function ZF(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=r[n];return i}function MWe(r,e){if(r==null)return{};var n=AWe(r,e),i,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);for(s=0;s<a.length;s++)i=a[s],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(r,i)&&(n[i]=r[i])}return n}function AWe(r,e){if(r==null)return{};var n={};for(var i in r)if(Object.prototype.hasOwnProperty.call(r,i)){if(e.indexOf(i)>=0)continue;n[i]=r[i]}return n}function MY(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable})),n.push.apply(n,i)}return n}function us(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?MY(Object(n),!0).forEach(function(i){CWe(r,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):MY(Object(n)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(n,i))})}return r}function CWe(r,e,n){return e=NWe(e),e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function NWe(r){var e=PWe(r,"string");return Xb(e)=="symbol"?e:e+""}function PWe(r,e){if(Xb(r)!="object"||!r)return r;var n=r[Symbol.toPrimitive];if(n!==void 0){var i=n.call(r,e);if(Xb(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function Kb(){return Kb=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])}return r},Kb.apply(this,arguments)}var RWe=function(e){var n=e.value,i=e.formatter,s=Gn(e.children)?n:e.children;return Wn(i)?i(s):s},OWe=function(e,n){var i=rc(n-e),s=Math.min(Math.abs(n-e),360);return i*s},kWe=function(e,n,i){var s=e.position,a=e.viewBox,o=e.offset,l=e.className,c=a,u=c.cx,h=c.cy,d=c.innerRadius,f=c.outerRadius,p=c.startAngle,g=c.endAngle,v=c.clockWise,x=(d+f)/2,_=OWe(p,g),E=_>=0?1:-1,S,T;s==="insideStart"?(S=p+E*o,T=v):s==="insideEnd"?(S=g-E*o,T=!v):s==="end"&&(S=g+E*o,T=v),T=_<=0?T:!T;var M=Hs(u,h,x,S),C=Hs(u,h,x,S+(T?1:-1)*359),A="M".concat(M.x,",").concat(M.y,`
    A`).concat(x,",").concat(x,",0,1,").concat(T?0:1,`,
    `).concat(C.x,",").concat(C.y),P=Gn(e.id)?Vp("recharts-radial-line-"):e.id;return ce.createElement("text",Kb({},i,{dominantBaseline:"central",className:mr("recharts-radial-bar-label",l)}),ce.createElement("defs",null,ce.createElement("path",{id:P,d:A})),ce.createElement("textPath",{xlinkHref:"#".concat(P)},n))},IWe=function(e){var n=e.viewBox,i=e.offset,s=e.position,a=n,o=a.cx,l=a.cy,c=a.innerRadius,u=a.outerRadius,h=a.startAngle,d=a.endAngle,f=(h+d)/2;if(s==="outside"){var p=Hs(o,l,u+i,f),g=p.x,v=p.y;return{x:g,y:v,textAnchor:g>=o?"start":"end",verticalAnchor:"middle"}}if(s==="center")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"middle"};if(s==="centerTop")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"start"};if(s==="centerBottom")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"end"};var x=(c+u)/2,_=Hs(o,l,x,f),E=_.x,S=_.y;return{x:E,y:S,textAnchor:"middle",verticalAnchor:"middle"}},DWe=function(e){var n=e.viewBox,i=e.parentViewBox,s=e.offset,a=e.position,o=n,l=o.x,c=o.y,u=o.width,h=o.height,d=h>=0?1:-1,f=d*s,p=d>0?"end":"start",g=d>0?"start":"end",v=u>=0?1:-1,x=v*s,_=v>0?"end":"start",E=v>0?"start":"end";if(a==="top"){var S={x:l+u/2,y:c-d*s,textAnchor:"middle",verticalAnchor:p};return us(us({},S),i?{height:Math.max(c-i.y,0),width:u}:{})}if(a==="bottom"){var T={x:l+u/2,y:c+h+f,textAnchor:"middle",verticalAnchor:g};return us(us({},T),i?{height:Math.max(i.y+i.height-(c+h),0),width:u}:{})}if(a==="left"){var M={x:l-x,y:c+h/2,textAnchor:_,verticalAnchor:"middle"};return us(us({},M),i?{width:Math.max(M.x-i.x,0),height:h}:{})}if(a==="right"){var C={x:l+u+x,y:c+h/2,textAnchor:E,verticalAnchor:"middle"};return us(us({},C),i?{width:Math.max(i.x+i.width-C.x,0),height:h}:{})}var A=i?{width:u,height:h}:{};return a==="insideLeft"?us({x:l+x,y:c+h/2,textAnchor:E,verticalAnchor:"middle"},A):a==="insideRight"?us({x:l+u-x,y:c+h/2,textAnchor:_,verticalAnchor:"middle"},A):a==="insideTop"?us({x:l+u/2,y:c+f,textAnchor:"middle",verticalAnchor:g},A):a==="insideBottom"?us({x:l+u/2,y:c+h-f,textAnchor:"middle",verticalAnchor:p},A):a==="insideTopLeft"?us({x:l+x,y:c+f,textAnchor:E,verticalAnchor:g},A):a==="insideTopRight"?us({x:l+u-x,y:c+f,textAnchor:_,verticalAnchor:g},A):a==="insideBottomLeft"?us({x:l+x,y:c+h-f,textAnchor:E,verticalAnchor:p},A):a==="insideBottomRight"?us({x:l+u-x,y:c+h-f,textAnchor:_,verticalAnchor:p},A):m0(a)&&(bt(a.x)||ap(a.x))&&(bt(a.y)||ap(a.y))?us({x:l+Rp(a.x,u),y:c+Rp(a.y,h),textAnchor:"end",verticalAnchor:"end"},A):us({x:l+u/2,y:c+h/2,textAnchor:"middle",verticalAnchor:"middle"},A)},LWe=function(e){return"cx"in e&&bt(e.cx)};function la(r){var e=r.offset,n=e===void 0?5:e,i=MWe(r,bWe),s=us({offset:n},i),a=s.viewBox,o=s.position,l=s.value,c=s.children,u=s.content,h=s.className,d=h===void 0?"":h,f=s.textBreakAll;if(!a||Gn(l)&&Gn(c)&&!X.isValidElement(u)&&!Wn(u))return null;if(X.isValidElement(u))return X.cloneElement(u,s);var p;if(Wn(u)){if(p=X.createElement(u,s),X.isValidElement(p))return p}else p=RWe(s);var g=LWe(a),v=$n(s,!0);if(g&&(o==="insideStart"||o==="insideEnd"||o==="end"))return kWe(s,p,v);var x=g?IWe(s):DWe(s);return ce.createElement(OE,Kb({className:mr("recharts-label",d)},v,x,{breakAll:f}),p)}la.displayName="Label";var Qae=function(e){var n=e.cx,i=e.cy,s=e.angle,a=e.startAngle,o=e.endAngle,l=e.r,c=e.radius,u=e.innerRadius,h=e.outerRadius,d=e.x,f=e.y,p=e.top,g=e.left,v=e.width,x=e.height,_=e.clockWise,E=e.labelViewBox;if(E)return E;if(bt(v)&&bt(x)){if(bt(d)&&bt(f))return{x:d,y:f,width:v,height:x};if(bt(p)&&bt(g))return{x:p,y:g,width:v,height:x}}return bt(d)&&bt(f)?{x:d,y:f,width:0,height:0}:bt(n)&&bt(i)?{cx:n,cy:i,startAngle:a||s||0,endAngle:o||s||0,innerRadius:u||0,outerRadius:h||c||l||0,clockWise:_}:e.viewBox?e.viewBox:{}},FWe=function(e,n){return e?e===!0?ce.createElement(la,{key:"label-implicit",viewBox:n}):fs(e)?ce.createElement(la,{key:"label-implicit",viewBox:n,value:e}):X.isValidElement(e)?e.type===la?X.cloneElement(e,{key:"label-implicit",viewBox:n}):ce.createElement(la,{key:"label-implicit",content:e,viewBox:n}):Wn(e)?ce.createElement(la,{key:"label-implicit",content:e,viewBox:n}):m0(e)?ce.createElement(la,Kb({viewBox:n},e,{key:"label-implicit"})):null:null},BWe=function(e,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&i&&!e.label)return null;var s=e.children,a=Qae(e),o=no(s,la).map(function(c,u){return X.cloneElement(c,{viewBox:n||a,key:"label-".concat(u)})});if(!i)return o;var l=FWe(e.label,n||a);return[l].concat(_We(o))};la.parseViewBox=Qae;la.renderCallByParent=BWe;var oL,AY;function jWe(){if(AY)return oL;AY=1;function r(e){var n=e==null?0:e.length;return n?e[n-1]:void 0}return oL=r,oL}var UWe=jWe();const zWe=_r(UWe);function Yb(r){"@babel/helpers - typeof";return Yb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yb(r)}var $We=["valueAccessor"],GWe=["data","dataKey","clockWise","id","textBreakAll"];function VWe(r){return XWe(r)||qWe(r)||WWe(r)||HWe()}function HWe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function WWe(r,e){if(r){if(typeof r=="string")return QF(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return QF(r,e)}}function qWe(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function XWe(r){if(Array.isArray(r))return QF(r)}function QF(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=r[n];return i}function BE(){return BE=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])}return r},BE.apply(this,arguments)}function CY(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable})),n.push.apply(n,i)}return n}function NY(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?CY(Object(n),!0).forEach(function(i){KWe(r,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):CY(Object(n)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(n,i))})}return r}function KWe(r,e,n){return e=YWe(e),e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function YWe(r){var e=ZWe(r,"string");return Yb(e)=="symbol"?e:e+""}function ZWe(r,e){if(Yb(r)!="object"||!r)return r;var n=r[Symbol.toPrimitive];if(n!==void 0){var i=n.call(r,e);if(Yb(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function PY(r,e){if(r==null)return{};var n=QWe(r,e),i,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);for(s=0;s<a.length;s++)i=a[s],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(r,i)&&(n[i]=r[i])}return n}function QWe(r,e){if(r==null)return{};var n={};for(var i in r)if(Object.prototype.hasOwnProperty.call(r,i)){if(e.indexOf(i)>=0)continue;n[i]=r[i]}return n}var JWe=function(e){return Array.isArray(e.value)?zWe(e.value):e.value};function $c(r){var e=r.valueAccessor,n=e===void 0?JWe:e,i=PY(r,$We),s=i.data,a=i.dataKey,o=i.clockWise,l=i.id,c=i.textBreakAll,u=PY(i,GWe);return!s||!s.length?null:ce.createElement(Pr,{className:"recharts-label-list"},s.map(function(h,d){var f=Gn(a)?n(h,d):ms(h&&h.payload,a),p=Gn(l)?{}:{id:"".concat(l,"-").concat(d)};return ce.createElement(la,BE({},$n(h,!0),u,p,{parentViewBox:h.parentViewBox,value:f,textBreakAll:c,viewBox:la.parseViewBox(Gn(o)?h:NY(NY({},h),{},{clockWise:o})),key:"label-".concat(d),index:d}))}))}$c.displayName="LabelList";function e9e(r,e){return r?r===!0?ce.createElement($c,{key:"labelList-implicit",data:e}):ce.isValidElement(r)||Wn(r)?ce.createElement($c,{key:"labelList-implicit",data:e,content:r}):m0(r)?ce.createElement($c,BE({data:e},r,{key:"labelList-implicit"})):null:null}function t9e(r,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!r||!r.children&&n&&!r.label)return null;var i=r.children,s=no(i,$c).map(function(o,l){return X.cloneElement(o,{data:e,key:"labelList-".concat(l)})});if(!n)return s;var a=e9e(r.label,e);return[a].concat(VWe(s))}$c.renderCallByParent=t9e;function Zb(r){"@babel/helpers - typeof";return Zb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zb(r)}function JF(){return JF=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])}return r},JF.apply(this,arguments)}function RY(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable})),n.push.apply(n,i)}return n}function OY(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?RY(Object(n),!0).forEach(function(i){n9e(r,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):RY(Object(n)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(n,i))})}return r}function n9e(r,e,n){return e=r9e(e),e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function r9e(r){var e=i9e(r,"string");return Zb(e)=="symbol"?e:e+""}function i9e(r,e){if(Zb(r)!="object"||!r)return r;var n=r[Symbol.toPrimitive];if(n!==void 0){var i=n.call(r,e);if(Zb(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}var s9e=function(e,n){var i=rc(n-e),s=Math.min(Math.abs(n-e),359.999);return i*s},WS=function(e){var n=e.cx,i=e.cy,s=e.radius,a=e.angle,o=e.sign,l=e.isExternal,c=e.cornerRadius,u=e.cornerIsExternal,h=c*(l?1:-1)+s,d=Math.asin(c/h)/FE,f=u?a:a+o*d,p=Hs(n,i,h,f),g=Hs(n,i,s,f),v=u?a-o*d:a,x=Hs(n,i,h*Math.cos(d*FE),v);return{center:p,circleTangency:g,lineTangency:x,theta:d}},Jae=function(e){var n=e.cx,i=e.cy,s=e.innerRadius,a=e.outerRadius,o=e.startAngle,l=e.endAngle,c=s9e(o,l),u=o+c,h=Hs(n,i,a,o),d=Hs(n,i,a,u),f="M ".concat(h.x,",").concat(h.y,`
    A `).concat(a,",").concat(a,`,0,
    `).concat(+(Math.abs(c)>180),",").concat(+(o>u),`,
    `).concat(d.x,",").concat(d.y,`
  `);if(s>0){var p=Hs(n,i,s,o),g=Hs(n,i,s,u);f+="L ".concat(g.x,",").concat(g.y,`
            A `).concat(s,",").concat(s,`,0,
            `).concat(+(Math.abs(c)>180),",").concat(+(o<=u),`,
            `).concat(p.x,",").concat(p.y," Z")}else f+="L ".concat(n,",").concat(i," Z");return f},a9e=function(e){var n=e.cx,i=e.cy,s=e.innerRadius,a=e.outerRadius,o=e.cornerRadius,l=e.forceCornerRadius,c=e.cornerIsExternal,u=e.startAngle,h=e.endAngle,d=rc(h-u),f=WS({cx:n,cy:i,radius:a,angle:u,sign:d,cornerRadius:o,cornerIsExternal:c}),p=f.circleTangency,g=f.lineTangency,v=f.theta,x=WS({cx:n,cy:i,radius:a,angle:h,sign:-d,cornerRadius:o,cornerIsExternal:c}),_=x.circleTangency,E=x.lineTangency,S=x.theta,T=c?Math.abs(u-h):Math.abs(u-h)-v-S;if(T<0)return l?"M ".concat(g.x,",").concat(g.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):Jae({cx:n,cy:i,innerRadius:s,outerRadius:a,startAngle:u,endAngle:h});var M="M ".concat(g.x,",").concat(g.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat(p.x,",").concat(p.y,`
    A`).concat(a,",").concat(a,",0,").concat(+(T>180),",").concat(+(d<0),",").concat(_.x,",").concat(_.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat(E.x,",").concat(E.y,`
  `);if(s>0){var C=WS({cx:n,cy:i,radius:s,angle:u,sign:d,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),A=C.circleTangency,P=C.lineTangency,R=C.theta,O=WS({cx:n,cy:i,radius:s,angle:h,sign:-d,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),D=O.circleTangency,F=O.lineTangency,U=O.theta,B=c?Math.abs(u-h):Math.abs(u-h)-R-U;if(B<0&&o===0)return"".concat(M,"L").concat(n,",").concat(i,"Z");M+="L".concat(F.x,",").concat(F.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat(D.x,",").concat(D.y,`
      A`).concat(s,",").concat(s,",0,").concat(+(B>180),",").concat(+(d>0),",").concat(A.x,",").concat(A.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat(P.x,",").concat(P.y,"Z")}else M+="L".concat(n,",").concat(i,"Z");return M},o9e={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},eoe=function(e){var n=OY(OY({},o9e),e),i=n.cx,s=n.cy,a=n.innerRadius,o=n.outerRadius,l=n.cornerRadius,c=n.forceCornerRadius,u=n.cornerIsExternal,h=n.startAngle,d=n.endAngle,f=n.className;if(o<a||h===d)return null;var p=mr("recharts-sector",f),g=o-a,v=Rp(l,g,0,!0),x;return v>0&&Math.abs(h-d)<360?x=a9e({cx:i,cy:s,innerRadius:a,outerRadius:o,cornerRadius:Math.min(v,g/2),forceCornerRadius:c,cornerIsExternal:u,startAngle:h,endAngle:d}):x=Jae({cx:i,cy:s,innerRadius:a,outerRadius:o,startAngle:h,endAngle:d}),ce.createElement("path",JF({},$n(n,!0),{className:p,d:x,role:"img"}))};function Qb(r){"@babel/helpers - typeof";return Qb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qb(r)}function eB(){return eB=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])}return r},eB.apply(this,arguments)}function kY(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable})),n.push.apply(n,i)}return n}function IY(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?kY(Object(n),!0).forEach(function(i){l9e(r,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):kY(Object(n)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(n,i))})}return r}function l9e(r,e,n){return e=c9e(e),e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function c9e(r){var e=u9e(r,"string");return Qb(e)=="symbol"?e:e+""}function u9e(r,e){if(Qb(r)!="object"||!r)return r;var n=r[Symbol.toPrimitive];if(n!==void 0){var i=n.call(r,e);if(Qb(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}var DY={curveBasisClosed:n6e,curveBasisOpen:r6e,curveBasis:t6e,curveBumpX:z$e,curveBumpY:$$e,curveLinearClosed:i6e,curveLinear:AA,curveMonotoneX:s6e,curveMonotoneY:a6e,curveNatural:o6e,curveStep:l6e,curveStepAfter:u6e,curveStepBefore:c6e},qS=function(e){return e.x===+e.x&&e.y===+e.y},Hv=function(e){return e.x},Wv=function(e){return e.y},h9e=function(e,n){if(Wn(e))return e;var i="curve".concat(EA(e));return(i==="curveMonotone"||i==="curveBump")&&n?DY["".concat(i).concat(n==="vertical"?"Y":"X")]:DY[i]||AA},d9e=function(e){var n=e.type,i=n===void 0?"linear":n,s=e.points,a=s===void 0?[]:s,o=e.baseLine,l=e.layout,c=e.connectNulls,u=c===void 0?!1:c,h=h9e(i,l),d=u?a.filter(function(v){return qS(v)}):a,f;if(Array.isArray(o)){var p=u?o.filter(function(v){return qS(v)}):o,g=d.map(function(v,x){return IY(IY({},v),{},{base:p[x]})});return l==="vertical"?f=zS().y(Wv).x1(Hv).x0(function(v){return v.base.x}):f=zS().x(Hv).y1(Wv).y0(function(v){return v.base.y}),f.defined(qS).curve(h),f(g)}return l==="vertical"&&bt(o)?f=zS().y(Wv).x1(Hv).x0(o):bt(o)?f=zS().x(Hv).y1(Wv).y0(o):f=Bse().x(Hv).y(Wv),f.defined(qS).curve(h),f(d)},yp=function(e){var n=e.className,i=e.points,s=e.path,a=e.pathRef;if((!i||!i.length)&&!s)return null;var o=i&&i.length?d9e(e):s;return ce.createElement("path",eB({},$n(e,!1),_E(e),{className:mr("recharts-curve",n),d:o,ref:a}))},f9e=Object.getOwnPropertyNames,p9e=Object.getOwnPropertySymbols,m9e=Object.prototype.hasOwnProperty;function LY(r,e){return function(i,s,a){return r(i,s,a)&&e(i,s,a)}}function XS(r){return function(n,i,s){if(!n||!i||typeof n!="object"||typeof i!="object")return r(n,i,s);var a=s.cache,o=a.get(n),l=a.get(i);if(o&&l)return o===i&&l===n;a.set(n,i),a.set(i,n);var c=r(n,i,s);return a.delete(n),a.delete(i),c}}function FY(r){return f9e(r).concat(p9e(r))}var g9e=Object.hasOwn||function(r,e){return m9e.call(r,e)};function Hp(r,e){return r===e||!r&&!e&&r!==r&&e!==e}var y9e="__v",v9e="__o",x9e="_owner",BY=Object.getOwnPropertyDescriptor,jY=Object.keys;function b9e(r,e,n){var i=r.length;if(e.length!==i)return!1;for(;i-- >0;)if(!n.equals(r[i],e[i],i,i,r,e,n))return!1;return!0}function _9e(r,e){return Hp(r.getTime(),e.getTime())}function w9e(r,e){return r.name===e.name&&r.message===e.message&&r.cause===e.cause&&r.stack===e.stack}function S9e(r,e){return r===e}function UY(r,e,n){var i=r.size;if(i!==e.size)return!1;if(!i)return!0;for(var s=new Array(i),a=r.entries(),o,l,c=0;(o=a.next())&&!o.done;){for(var u=e.entries(),h=!1,d=0;(l=u.next())&&!l.done;){if(s[d]){d++;continue}var f=o.value,p=l.value;if(n.equals(f[0],p[0],c,d,r,e,n)&&n.equals(f[1],p[1],f[0],p[0],r,e,n)){h=s[d]=!0;break}d++}if(!h)return!1;c++}return!0}var T9e=Hp;function E9e(r,e,n){var i=jY(r),s=i.length;if(jY(e).length!==s)return!1;for(;s-- >0;)if(!toe(r,e,n,i[s]))return!1;return!0}function qv(r,e,n){var i=FY(r),s=i.length;if(FY(e).length!==s)return!1;for(var a,o,l;s-- >0;)if(a=i[s],!toe(r,e,n,a)||(o=BY(r,a),l=BY(e,a),(o||l)&&(!o||!l||o.configurable!==l.configurable||o.enumerable!==l.enumerable||o.writable!==l.writable)))return!1;return!0}function M9e(r,e){return Hp(r.valueOf(),e.valueOf())}function A9e(r,e){return r.source===e.source&&r.flags===e.flags}function zY(r,e,n){var i=r.size;if(i!==e.size)return!1;if(!i)return!0;for(var s=new Array(i),a=r.values(),o,l;(o=a.next())&&!o.done;){for(var c=e.values(),u=!1,h=0;(l=c.next())&&!l.done;){if(!s[h]&&n.equals(o.value,l.value,o.value,l.value,r,e,n)){u=s[h]=!0;break}h++}if(!u)return!1}return!0}function C9e(r,e){var n=r.length;if(e.length!==n)return!1;for(;n-- >0;)if(r[n]!==e[n])return!1;return!0}function N9e(r,e){return r.hostname===e.hostname&&r.pathname===e.pathname&&r.protocol===e.protocol&&r.port===e.port&&r.hash===e.hash&&r.username===e.username&&r.password===e.password}function toe(r,e,n,i){return(i===x9e||i===v9e||i===y9e)&&(r.$$typeof||e.$$typeof)?!0:g9e(e,i)&&n.equals(r[i],e[i],i,i,r,e,n)}var P9e="[object Arguments]",R9e="[object Boolean]",O9e="[object Date]",k9e="[object Error]",I9e="[object Map]",D9e="[object Number]",L9e="[object Object]",F9e="[object RegExp]",B9e="[object Set]",j9e="[object String]",U9e="[object URL]",z9e=Array.isArray,$Y=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,GY=Object.assign,$9e=Object.prototype.toString.call.bind(Object.prototype.toString);function G9e(r){var e=r.areArraysEqual,n=r.areDatesEqual,i=r.areErrorsEqual,s=r.areFunctionsEqual,a=r.areMapsEqual,o=r.areNumbersEqual,l=r.areObjectsEqual,c=r.arePrimitiveWrappersEqual,u=r.areRegExpsEqual,h=r.areSetsEqual,d=r.areTypedArraysEqual,f=r.areUrlsEqual;return function(g,v,x){if(g===v)return!0;if(g==null||v==null)return!1;var _=typeof g;if(_!==typeof v)return!1;if(_!=="object")return _==="number"?o(g,v,x):_==="function"?s(g,v,x):!1;var E=g.constructor;if(E!==v.constructor)return!1;if(E===Object)return l(g,v,x);if(z9e(g))return e(g,v,x);if($Y!=null&&$Y(g))return d(g,v,x);if(E===Date)return n(g,v,x);if(E===RegExp)return u(g,v,x);if(E===Map)return a(g,v,x);if(E===Set)return h(g,v,x);var S=$9e(g);return S===O9e?n(g,v,x):S===F9e?u(g,v,x):S===I9e?a(g,v,x):S===B9e?h(g,v,x):S===L9e?typeof g.then!="function"&&typeof v.then!="function"&&l(g,v,x):S===U9e?f(g,v,x):S===k9e?i(g,v,x):S===P9e?l(g,v,x):S===R9e||S===D9e||S===j9e?c(g,v,x):!1}}function V9e(r){var e=r.circular,n=r.createCustomConfig,i=r.strict,s={areArraysEqual:i?qv:b9e,areDatesEqual:_9e,areErrorsEqual:w9e,areFunctionsEqual:S9e,areMapsEqual:i?LY(UY,qv):UY,areNumbersEqual:T9e,areObjectsEqual:i?qv:E9e,arePrimitiveWrappersEqual:M9e,areRegExpsEqual:A9e,areSetsEqual:i?LY(zY,qv):zY,areTypedArraysEqual:i?qv:C9e,areUrlsEqual:N9e};if(n&&(s=GY({},s,n(s))),e){var a=XS(s.areArraysEqual),o=XS(s.areMapsEqual),l=XS(s.areObjectsEqual),c=XS(s.areSetsEqual);s=GY({},s,{areArraysEqual:a,areMapsEqual:o,areObjectsEqual:l,areSetsEqual:c})}return s}function H9e(r){return function(e,n,i,s,a,o,l){return r(e,n,l)}}function W9e(r){var e=r.circular,n=r.comparator,i=r.createState,s=r.equals,a=r.strict;if(i)return function(c,u){var h=i(),d=h.cache,f=d===void 0?e?new WeakMap:void 0:d,p=h.meta;return n(c,u,{cache:f,equals:s,meta:p,strict:a})};if(e)return function(c,u){return n(c,u,{cache:new WeakMap,equals:s,meta:void 0,strict:a})};var o={cache:void 0,equals:s,meta:void 0,strict:a};return function(c,u){return n(c,u,o)}}var q9e=sf();sf({strict:!0});sf({circular:!0});sf({circular:!0,strict:!0});sf({createInternalComparator:function(){return Hp}});sf({strict:!0,createInternalComparator:function(){return Hp}});sf({circular:!0,createInternalComparator:function(){return Hp}});sf({circular:!0,createInternalComparator:function(){return Hp},strict:!0});function sf(r){r===void 0&&(r={});var e=r.circular,n=e===void 0?!1:e,i=r.createInternalComparator,s=r.createState,a=r.strict,o=a===void 0?!1:a,l=V9e(r),c=G9e(l),u=i?i(c):H9e(c);return W9e({circular:n,comparator:c,createState:s,equals:u,strict:o})}function X9e(r){typeof requestAnimationFrame<"u"&&requestAnimationFrame(r)}function VY(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=-1,i=function s(a){n<0&&(n=a),a-n>e?(r(a),n=-1):X9e(s)};requestAnimationFrame(i)}function tB(r){"@babel/helpers - typeof";return tB=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tB(r)}function K9e(r){return J9e(r)||Q9e(r)||Z9e(r)||Y9e()}function Y9e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Z9e(r,e){if(r){if(typeof r=="string")return HY(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return HY(r,e)}}function HY(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=r[n];return i}function Q9e(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function J9e(r){if(Array.isArray(r))return r}function eqe(){var r={},e=function(){return null},n=!1,i=function s(a){if(!n){if(Array.isArray(a)){if(!a.length)return;var o=a,l=K9e(o),c=l[0],u=l.slice(1);if(typeof c=="number"){VY(s.bind(null,u),c);return}s(c),VY(s.bind(null,u));return}tB(a)==="object"&&(r=a,e(r)),typeof a=="function"&&a()}};return{stop:function(){n=!0},start:function(a){n=!1,i(a)},subscribe:function(a){return e=a,function(){e=function(){return null}}}}}function Jb(r){"@babel/helpers - typeof";return Jb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jb(r)}function WY(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable})),n.push.apply(n,i)}return n}function qY(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?WY(Object(n),!0).forEach(function(i){noe(r,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):WY(Object(n)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(n,i))})}return r}function noe(r,e,n){return e=tqe(e),e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function tqe(r){var e=nqe(r,"string");return Jb(e)==="symbol"?e:String(e)}function nqe(r,e){if(Jb(r)!=="object"||r===null)return r;var n=r[Symbol.toPrimitive];if(n!==void 0){var i=n.call(r,e);if(Jb(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}var rqe=function(e,n){return[Object.keys(e),Object.keys(n)].reduce(function(i,s){return i.filter(function(a){return s.includes(a)})})},iqe=function(e){return e},sqe=function(e){return e.replace(/([A-Z])/g,function(n){return"-".concat(n.toLowerCase())})},Dx=function(e,n){return Object.keys(n).reduce(function(i,s){return qY(qY({},i),{},noe({},s,e(s,n[s])))},{})},XY=function(e,n,i){return e.map(function(s){return"".concat(sqe(s)," ").concat(n,"ms ").concat(i)}).join(",")};function aqe(r,e){return cqe(r)||lqe(r,e)||roe(r,e)||oqe()}function oqe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lqe(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var i,s,a,o,l=[],c=!0,u=!1;try{if(a=(n=n.call(r)).next,e!==0)for(;!(c=(i=a.call(n)).done)&&(l.push(i.value),l.length!==e);c=!0);}catch(h){u=!0,s=h}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function cqe(r){if(Array.isArray(r))return r}function uqe(r){return fqe(r)||dqe(r)||roe(r)||hqe()}function hqe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function roe(r,e){if(r){if(typeof r=="string")return nB(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return nB(r,e)}}function dqe(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function fqe(r){if(Array.isArray(r))return nB(r)}function nB(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=r[n];return i}var jE=1e-4,ioe=function(e,n){return[0,3*e,3*n-6*e,3*e-3*n+1]},soe=function(e,n){return e.map(function(i,s){return i*Math.pow(n,s)}).reduce(function(i,s){return i+s})},KY=function(e,n){return function(i){var s=ioe(e,n);return soe(s,i)}},pqe=function(e,n){return function(i){var s=ioe(e,n),a=[].concat(uqe(s.map(function(o,l){return o*l}).slice(1)),[0]);return soe(a,i)}},YY=function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];var s=n[0],a=n[1],o=n[2],l=n[3];if(n.length===1)switch(n[0]){case"linear":s=0,a=0,o=1,l=1;break;case"ease":s=.25,a=.1,o=.25,l=1;break;case"ease-in":s=.42,a=0,o=1,l=1;break;case"ease-out":s=.42,a=0,o=.58,l=1;break;case"ease-in-out":s=0,a=0,o=.58,l=1;break;default:{var c=n[0].split("(");if(c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4){var u=c[1].split(")")[0].split(",").map(function(x){return parseFloat(x)}),h=aqe(u,4);s=h[0],a=h[1],o=h[2],l=h[3]}}}var d=KY(s,o),f=KY(a,l),p=pqe(s,o),g=function(_){return _>1?1:_<0?0:_},v=function(_){for(var E=_>1?1:_,S=E,T=0;T<8;++T){var M=d(S)-E,C=p(S);if(Math.abs(M-E)<jE||C<jE)return f(S);S=g(S-M/C)}return f(S)};return v.isStepper=!1,v},mqe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.stiff,i=n===void 0?100:n,s=e.damping,a=s===void 0?8:s,o=e.dt,l=o===void 0?17:o,c=function(h,d,f){var p=-(h-d)*i,g=f*a,v=f+(p-g)*l/1e3,x=f*l/1e3+h;return Math.abs(x-d)<jE&&Math.abs(v)<jE?[d,0]:[x,v]};return c.isStepper=!0,c.dt=l,c},gqe=function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];var s=n[0];if(typeof s=="string")switch(s){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return YY(s);case"spring":return mqe();default:if(s.split("(")[0]==="cubic-bezier")return YY(s)}return typeof s=="function"?s:null};function e_(r){"@babel/helpers - typeof";return e_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e_(r)}function ZY(r){return xqe(r)||vqe(r)||aoe(r)||yqe()}function yqe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vqe(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function xqe(r){if(Array.isArray(r))return iB(r)}function QY(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable})),n.push.apply(n,i)}return n}function $s(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?QY(Object(n),!0).forEach(function(i){rB(r,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):QY(Object(n)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(n,i))})}return r}function rB(r,e,n){return e=bqe(e),e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function bqe(r){var e=_qe(r,"string");return e_(e)==="symbol"?e:String(e)}function _qe(r,e){if(e_(r)!=="object"||r===null)return r;var n=r[Symbol.toPrimitive];if(n!==void 0){var i=n.call(r,e);if(e_(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function wqe(r,e){return Eqe(r)||Tqe(r,e)||aoe(r,e)||Sqe()}function Sqe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function aoe(r,e){if(r){if(typeof r=="string")return iB(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return iB(r,e)}}function iB(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=r[n];return i}function Tqe(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var i,s,a,o,l=[],c=!0,u=!1;try{if(a=(n=n.call(r)).next,e!==0)for(;!(c=(i=a.call(n)).done)&&(l.push(i.value),l.length!==e);c=!0);}catch(h){u=!0,s=h}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function Eqe(r){if(Array.isArray(r))return r}var UE=function(e,n,i){return e+(n-e)*i},sB=function(e){var n=e.from,i=e.to;return n!==i},Mqe=function r(e,n,i){var s=Dx(function(a,o){if(sB(o)){var l=e(o.from,o.to,o.velocity),c=wqe(l,2),u=c[0],h=c[1];return $s($s({},o),{},{from:u,velocity:h})}return o},n);return i<1?Dx(function(a,o){return sB(o)?$s($s({},o),{},{velocity:UE(o.velocity,s[a].velocity,i),from:UE(o.from,s[a].from,i)}):o},n):r(e,s,i-1)};const Aqe=function(r,e,n,i,s){var a=rqe(r,e),o=a.reduce(function(x,_){return $s($s({},x),{},rB({},_,[r[_],e[_]]))},{}),l=a.reduce(function(x,_){return $s($s({},x),{},rB({},_,{from:r[_],velocity:0,to:e[_]}))},{}),c=-1,u,h,d=function(){return null},f=function(){return Dx(function(_,E){return E.from},l)},p=function(){return!Object.values(l).filter(sB).length},g=function(_){u||(u=_);var E=_-u,S=E/n.dt;l=Mqe(n,l,S),s($s($s($s({},r),e),f())),u=_,p()||(c=requestAnimationFrame(d))},v=function(_){h||(h=_);var E=(_-h)/i,S=Dx(function(M,C){return UE.apply(void 0,ZY(C).concat([n(E)]))},o);if(s($s($s($s({},r),e),S)),E<1)c=requestAnimationFrame(d);else{var T=Dx(function(M,C){return UE.apply(void 0,ZY(C).concat([n(1)]))},o);s($s($s($s({},r),e),T))}};return d=n.isStepper?g:v,function(){return requestAnimationFrame(d),function(){cancelAnimationFrame(c)}}};function Dy(r){"@babel/helpers - typeof";return Dy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Dy(r)}var Cqe=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function Nqe(r,e){if(r==null)return{};var n=Pqe(r,e),i,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);for(s=0;s<a.length;s++)i=a[s],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(r,i)&&(n[i]=r[i])}return n}function Pqe(r,e){if(r==null)return{};var n={},i=Object.keys(r),s,a;for(a=0;a<i.length;a++)s=i[a],!(e.indexOf(s)>=0)&&(n[s]=r[s]);return n}function lL(r){return Iqe(r)||kqe(r)||Oqe(r)||Rqe()}function Rqe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Oqe(r,e){if(r){if(typeof r=="string")return aB(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return aB(r,e)}}function kqe(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function Iqe(r){if(Array.isArray(r))return aB(r)}function aB(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=r[n];return i}function JY(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable})),n.push.apply(n,i)}return n}function $l(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?JY(Object(n),!0).forEach(function(i){lx(r,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):JY(Object(n)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(n,i))})}return r}function lx(r,e,n){return e=ooe(e),e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function Dqe(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function Lqe(r,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(r,ooe(i.key),i)}}function Fqe(r,e,n){return e&&Lqe(r.prototype,e),Object.defineProperty(r,"prototype",{writable:!1}),r}function ooe(r){var e=Bqe(r,"string");return Dy(e)==="symbol"?e:String(e)}function Bqe(r,e){if(Dy(r)!=="object"||r===null)return r;var n=r[Symbol.toPrimitive];if(n!==void 0){var i=n.call(r,e);if(Dy(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function jqe(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),e&&oB(r,e)}function oB(r,e){return oB=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,s){return i.__proto__=s,i},oB(r,e)}function Uqe(r){var e=zqe();return function(){var i=zE(r),s;if(e){var a=zE(this).constructor;s=Reflect.construct(i,arguments,a)}else s=i.apply(this,arguments);return lB(this,s)}}function lB(r,e){if(e&&(Dy(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return cB(r)}function cB(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function zqe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function zE(r){return zE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},zE(r)}var lc=function(r){jqe(n,r);var e=Uqe(n);function n(i,s){var a;Dqe(this,n),a=e.call(this,i,s);var o=a.props,l=o.isActive,c=o.attributeName,u=o.from,h=o.to,d=o.steps,f=o.children,p=o.duration;if(a.handleStyleChange=a.handleStyleChange.bind(cB(a)),a.changeStyle=a.changeStyle.bind(cB(a)),!l||p<=0)return a.state={style:{}},typeof f=="function"&&(a.state={style:h}),lB(a);if(d&&d.length)a.state={style:d[0].style};else if(u){if(typeof f=="function")return a.state={style:u},lB(a);a.state={style:c?lx({},c,u):u}}else a.state={style:{}};return a}return Fqe(n,[{key:"componentDidMount",value:function(){var s=this.props,a=s.isActive,o=s.canBegin;this.mounted=!0,!(!a||!o)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(s){var a=this.props,o=a.isActive,l=a.canBegin,c=a.attributeName,u=a.shouldReAnimate,h=a.to,d=a.from,f=this.state.style;if(l){if(!o){var p={style:c?lx({},c,h):h};this.state&&f&&(c&&f[c]!==h||!c&&f!==h)&&this.setState(p);return}if(!(q9e(s.to,h)&&s.canBegin&&s.isActive)){var g=!s.canBegin||!s.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var v=g||u?d:s.to;if(this.state&&f){var x={style:c?lx({},c,v):v};(c&&f[c]!==v||!c&&f!==v)&&this.setState(x)}this.runAnimation($l($l({},this.props),{},{from:v,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var s=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),s&&s()}},{key:"handleStyleChange",value:function(s){this.changeStyle(s)}},{key:"changeStyle",value:function(s){this.mounted&&this.setState({style:s})}},{key:"runJSAnimation",value:function(s){var a=this,o=s.from,l=s.to,c=s.duration,u=s.easing,h=s.begin,d=s.onAnimationEnd,f=s.onAnimationStart,p=Aqe(o,l,gqe(u),c,this.changeStyle),g=function(){a.stopJSAnimation=p()};this.manager.start([f,h,g,c,d])}},{key:"runStepAnimation",value:function(s){var a=this,o=s.steps,l=s.begin,c=s.onAnimationStart,u=o[0],h=u.style,d=u.duration,f=d===void 0?0:d,p=function(v,x,_){if(_===0)return v;var E=x.duration,S=x.easing,T=S===void 0?"ease":S,M=x.style,C=x.properties,A=x.onAnimationEnd,P=_>0?o[_-1]:x,R=C||Object.keys(M);if(typeof T=="function"||T==="spring")return[].concat(lL(v),[a.runJSAnimation.bind(a,{from:P.style,to:M,duration:E,easing:T}),E]);var O=XY(R,E,T),D=$l($l($l({},P.style),M),{},{transition:O});return[].concat(lL(v),[D,E,A]).filter(iqe)};return this.manager.start([c].concat(lL(o.reduce(p,[h,Math.max(f,l)])),[s.onAnimationEnd]))}},{key:"runAnimation",value:function(s){this.manager||(this.manager=eqe());var a=s.begin,o=s.duration,l=s.attributeName,c=s.to,u=s.easing,h=s.onAnimationStart,d=s.onAnimationEnd,f=s.steps,p=s.children,g=this.manager;if(this.unSubscribe=g.subscribe(this.handleStyleChange),typeof u=="function"||typeof p=="function"||u==="spring"){this.runJSAnimation(s);return}if(f.length>1){this.runStepAnimation(s);return}var v=l?lx({},l,c):c,x=XY(Object.keys(v),o,u);g.start([h,a,$l($l({},v),{},{transition:x}),o,d])}},{key:"render",value:function(){var s=this.props,a=s.children;s.begin;var o=s.duration;s.attributeName,s.easing;var l=s.isActive;s.steps,s.from,s.to,s.canBegin,s.onAnimationEnd,s.shouldReAnimate,s.onAnimationReStart;var c=Nqe(s,Cqe),u=X.Children.count(a),h=this.state.style;if(typeof a=="function")return a(h);if(!l||u===0||o<=0)return a;var d=function(p){var g=p.props,v=g.style,x=v===void 0?{}:v,_=g.className,E=X.cloneElement(p,$l($l({},c),{},{style:$l($l({},x),h),className:_}));return E};return u===1?d(X.Children.only(a)):ce.createElement("div",null,X.Children.map(a,function(f){return d(f)}))}}]),n}(X.PureComponent);lc.displayName="Animate";lc.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};lc.propTypes={from:ne.oneOfType([ne.object,ne.string]),to:ne.oneOfType([ne.object,ne.string]),attributeName:ne.string,duration:ne.number,begin:ne.number,easing:ne.oneOfType([ne.string,ne.func]),steps:ne.arrayOf(ne.shape({duration:ne.number.isRequired,style:ne.object.isRequired,easing:ne.oneOfType([ne.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),ne.func]),properties:ne.arrayOf("string"),onAnimationEnd:ne.func})),children:ne.oneOfType([ne.node,ne.func]),isActive:ne.bool,canBegin:ne.bool,onAnimationEnd:ne.func,shouldReAnimate:ne.bool,onAnimationStart:ne.func,onAnimationReStart:ne.func};function t_(r){"@babel/helpers - typeof";return t_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t_(r)}function $E(){return $E=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])}return r},$E.apply(this,arguments)}function $qe(r,e){return Wqe(r)||Hqe(r,e)||Vqe(r,e)||Gqe()}function Gqe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Vqe(r,e){if(r){if(typeof r=="string")return eZ(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return eZ(r,e)}}function eZ(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=r[n];return i}function Hqe(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var i,s,a,o,l=[],c=!0,u=!1;try{if(a=(n=n.call(r)).next,e!==0)for(;!(c=(i=a.call(n)).done)&&(l.push(i.value),l.length!==e);c=!0);}catch(h){u=!0,s=h}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function Wqe(r){if(Array.isArray(r))return r}function tZ(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable})),n.push.apply(n,i)}return n}function nZ(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?tZ(Object(n),!0).forEach(function(i){qqe(r,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):tZ(Object(n)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(n,i))})}return r}function qqe(r,e,n){return e=Xqe(e),e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function Xqe(r){var e=Kqe(r,"string");return t_(e)=="symbol"?e:e+""}function Kqe(r,e){if(t_(r)!="object"||!r)return r;var n=r[Symbol.toPrimitive];if(n!==void 0){var i=n.call(r,e);if(t_(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}var rZ=function(e,n,i,s,a){var o=Math.min(Math.abs(i)/2,Math.abs(s)/2),l=s>=0?1:-1,c=i>=0?1:-1,u=s>=0&&i>=0||s<0&&i<0?1:0,h;if(o>0&&a instanceof Array){for(var d=[0,0,0,0],f=0,p=4;f<p;f++)d[f]=a[f]>o?o:a[f];h="M".concat(e,",").concat(n+l*d[0]),d[0]>0&&(h+="A ".concat(d[0],",").concat(d[0],",0,0,").concat(u,",").concat(e+c*d[0],",").concat(n)),h+="L ".concat(e+i-c*d[1],",").concat(n),d[1]>0&&(h+="A ".concat(d[1],",").concat(d[1],",0,0,").concat(u,`,
        `).concat(e+i,",").concat(n+l*d[1])),h+="L ".concat(e+i,",").concat(n+s-l*d[2]),d[2]>0&&(h+="A ".concat(d[2],",").concat(d[2],",0,0,").concat(u,`,
        `).concat(e+i-c*d[2],",").concat(n+s)),h+="L ".concat(e+c*d[3],",").concat(n+s),d[3]>0&&(h+="A ".concat(d[3],",").concat(d[3],",0,0,").concat(u,`,
        `).concat(e,",").concat(n+s-l*d[3])),h+="Z"}else if(o>0&&a===+a&&a>0){var g=Math.min(o,a);h="M ".concat(e,",").concat(n+l*g,`
            A `).concat(g,",").concat(g,",0,0,").concat(u,",").concat(e+c*g,",").concat(n,`
            L `).concat(e+i-c*g,",").concat(n,`
            A `).concat(g,",").concat(g,",0,0,").concat(u,",").concat(e+i,",").concat(n+l*g,`
            L `).concat(e+i,",").concat(n+s-l*g,`
            A `).concat(g,",").concat(g,",0,0,").concat(u,",").concat(e+i-c*g,",").concat(n+s,`
            L `).concat(e+c*g,",").concat(n+s,`
            A `).concat(g,",").concat(g,",0,0,").concat(u,",").concat(e,",").concat(n+s-l*g," Z")}else h="M ".concat(e,",").concat(n," h ").concat(i," v ").concat(s," h ").concat(-i," Z");return h},Yqe=function(e,n){if(!e||!n)return!1;var i=e.x,s=e.y,a=n.x,o=n.y,l=n.width,c=n.height;if(Math.abs(l)>0&&Math.abs(c)>0){var u=Math.min(a,a+l),h=Math.max(a,a+l),d=Math.min(o,o+c),f=Math.max(o,o+c);return i>=u&&i<=h&&s>=d&&s<=f}return!1},Zqe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Iz=function(e){var n=nZ(nZ({},Zqe),e),i=X.useRef(),s=X.useState(-1),a=$qe(s,2),o=a[0],l=a[1];X.useEffect(function(){if(i.current&&i.current.getTotalLength)try{var T=i.current.getTotalLength();T&&l(T)}catch{}},[]);var c=n.x,u=n.y,h=n.width,d=n.height,f=n.radius,p=n.className,g=n.animationEasing,v=n.animationDuration,x=n.animationBegin,_=n.isAnimationActive,E=n.isUpdateAnimationActive;if(c!==+c||u!==+u||h!==+h||d!==+d||h===0||d===0)return null;var S=mr("recharts-rectangle",p);return E?ce.createElement(lc,{canBegin:o>0,from:{width:h,height:d,x:c,y:u},to:{width:h,height:d,x:c,y:u},duration:v,animationEasing:g,isActive:E},function(T){var M=T.width,C=T.height,A=T.x,P=T.y;return ce.createElement(lc,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:x,duration:v,isActive:_,easing:g},ce.createElement("path",$E({},$n(n,!0),{className:S,d:rZ(A,P,M,C,f),ref:i})))}):ce.createElement("path",$E({},$n(n,!0),{className:S,d:rZ(c,u,h,d,f)}))};function uB(){return uB=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])}return r},uB.apply(this,arguments)}var LA=function(e){var n=e.cx,i=e.cy,s=e.r,a=e.className,o=mr("recharts-dot",a);return n===+n&&i===+i&&s===+s?ce.createElement("circle",uB({},$n(e,!1),_E(e),{className:o,cx:n,cy:i,r:s})):null};function n_(r){"@babel/helpers - typeof";return n_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n_(r)}var Qqe=["x","y","top","left","width","height","className"];function hB(){return hB=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])}return r},hB.apply(this,arguments)}function iZ(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable})),n.push.apply(n,i)}return n}function Jqe(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?iZ(Object(n),!0).forEach(function(i){e7e(r,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):iZ(Object(n)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(n,i))})}return r}function e7e(r,e,n){return e=t7e(e),e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function t7e(r){var e=n7e(r,"string");return n_(e)=="symbol"?e:e+""}function n7e(r,e){if(n_(r)!="object"||!r)return r;var n=r[Symbol.toPrimitive];if(n!==void 0){var i=n.call(r,e);if(n_(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function r7e(r,e){if(r==null)return{};var n=i7e(r,e),i,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);for(s=0;s<a.length;s++)i=a[s],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(r,i)&&(n[i]=r[i])}return n}function i7e(r,e){if(r==null)return{};var n={};for(var i in r)if(Object.prototype.hasOwnProperty.call(r,i)){if(e.indexOf(i)>=0)continue;n[i]=r[i]}return n}var s7e=function(e,n,i,s,a,o){return"M".concat(e,",").concat(a,"v").concat(s,"M").concat(o,",").concat(n,"h").concat(i)},a7e=function(e){var n=e.x,i=n===void 0?0:n,s=e.y,a=s===void 0?0:s,o=e.top,l=o===void 0?0:o,c=e.left,u=c===void 0?0:c,h=e.width,d=h===void 0?0:h,f=e.height,p=f===void 0?0:f,g=e.className,v=r7e(e,Qqe),x=Jqe({x:i,y:a,top:l,left:u,width:d,height:p},v);return!bt(i)||!bt(a)||!bt(d)||!bt(p)||!bt(l)||!bt(u)?null:ce.createElement("path",hB({},$n(x,!0),{className:mr("recharts-cross",g),d:s7e(i,a,d,p,l,u)}))},cL,sZ;function o7e(){if(sZ)return cL;sZ=1;var r=oae(),e=r(Object.getPrototypeOf,Object);return cL=e,cL}var uL,aZ;function l7e(){if(aZ)return uL;aZ=1;var r=Ch(),e=o7e(),n=Nh(),i="[object Object]",s=Function.prototype,a=Object.prototype,o=s.toString,l=a.hasOwnProperty,c=o.call(Object);function u(h){if(!n(h)||r(h)!=i)return!1;var d=e(h);if(d===null)return!0;var f=l.call(d,"constructor")&&d.constructor;return typeof f=="function"&&f instanceof f&&o.call(f)==c}return uL=u,uL}var c7e=l7e();const u7e=_r(c7e);var hL,oZ;function h7e(){if(oZ)return hL;oZ=1;var r=Ch(),e=Nh(),n="[object Boolean]";function i(s){return s===!0||s===!1||e(s)&&r(s)==n}return hL=i,hL}var d7e=h7e();const f7e=_r(d7e);function r_(r){"@babel/helpers - typeof";return r_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r_(r)}function GE(){return GE=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])}return r},GE.apply(this,arguments)}function p7e(r,e){return v7e(r)||y7e(r,e)||g7e(r,e)||m7e()}function m7e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function g7e(r,e){if(r){if(typeof r=="string")return lZ(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return lZ(r,e)}}function lZ(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=r[n];return i}function y7e(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var i,s,a,o,l=[],c=!0,u=!1;try{if(a=(n=n.call(r)).next,e!==0)for(;!(c=(i=a.call(n)).done)&&(l.push(i.value),l.length!==e);c=!0);}catch(h){u=!0,s=h}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function v7e(r){if(Array.isArray(r))return r}function cZ(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable})),n.push.apply(n,i)}return n}function uZ(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?cZ(Object(n),!0).forEach(function(i){x7e(r,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):cZ(Object(n)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(n,i))})}return r}function x7e(r,e,n){return e=b7e(e),e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function b7e(r){var e=_7e(r,"string");return r_(e)=="symbol"?e:e+""}function _7e(r,e){if(r_(r)!="object"||!r)return r;var n=r[Symbol.toPrimitive];if(n!==void 0){var i=n.call(r,e);if(r_(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}var hZ=function(e,n,i,s,a){var o=i-s,l;return l="M ".concat(e,",").concat(n),l+="L ".concat(e+i,",").concat(n),l+="L ".concat(e+i-o/2,",").concat(n+a),l+="L ".concat(e+i-o/2-s,",").concat(n+a),l+="L ".concat(e,",").concat(n," Z"),l},w7e={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},S7e=function(e){var n=uZ(uZ({},w7e),e),i=X.useRef(),s=X.useState(-1),a=p7e(s,2),o=a[0],l=a[1];X.useEffect(function(){if(i.current&&i.current.getTotalLength)try{var S=i.current.getTotalLength();S&&l(S)}catch{}},[]);var c=n.x,u=n.y,h=n.upperWidth,d=n.lowerWidth,f=n.height,p=n.className,g=n.animationEasing,v=n.animationDuration,x=n.animationBegin,_=n.isUpdateAnimationActive;if(c!==+c||u!==+u||h!==+h||d!==+d||f!==+f||h===0&&d===0||f===0)return null;var E=mr("recharts-trapezoid",p);return _?ce.createElement(lc,{canBegin:o>0,from:{upperWidth:0,lowerWidth:0,height:f,x:c,y:u},to:{upperWidth:h,lowerWidth:d,height:f,x:c,y:u},duration:v,animationEasing:g,isActive:_},function(S){var T=S.upperWidth,M=S.lowerWidth,C=S.height,A=S.x,P=S.y;return ce.createElement(lc,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:x,duration:v,easing:g},ce.createElement("path",GE({},$n(n,!0),{className:E,d:hZ(A,P,T,M,C),ref:i})))}):ce.createElement("g",null,ce.createElement("path",GE({},$n(n,!0),{className:E,d:hZ(c,u,h,d,f)})))},T7e=["option","shapeType","propTransformer","activeClassName","isActive"];function i_(r){"@babel/helpers - typeof";return i_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i_(r)}function E7e(r,e){if(r==null)return{};var n=M7e(r,e),i,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);for(s=0;s<a.length;s++)i=a[s],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(r,i)&&(n[i]=r[i])}return n}function M7e(r,e){if(r==null)return{};var n={};for(var i in r)if(Object.prototype.hasOwnProperty.call(r,i)){if(e.indexOf(i)>=0)continue;n[i]=r[i]}return n}function dZ(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable})),n.push.apply(n,i)}return n}function VE(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?dZ(Object(n),!0).forEach(function(i){A7e(r,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):dZ(Object(n)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(n,i))})}return r}function A7e(r,e,n){return e=C7e(e),e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function C7e(r){var e=N7e(r,"string");return i_(e)=="symbol"?e:e+""}function N7e(r,e){if(i_(r)!="object"||!r)return r;var n=r[Symbol.toPrimitive];if(n!==void 0){var i=n.call(r,e);if(i_(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function P7e(r,e){return VE(VE({},e),r)}function R7e(r,e){return r==="symbols"}function fZ(r){var e=r.shapeType,n=r.elementProps;switch(e){case"rectangle":return ce.createElement(Iz,n);case"trapezoid":return ce.createElement(S7e,n);case"sector":return ce.createElement(eoe,n);case"symbols":if(R7e(e))return ce.createElement(NA,n);break;default:return null}}function O7e(r){return X.isValidElement(r)?r.props:r}function dB(r){var e=r.option,n=r.shapeType,i=r.propTransformer,s=i===void 0?P7e:i,a=r.activeClassName,o=a===void 0?"recharts-active-shape":a,l=r.isActive,c=E7e(r,T7e),u;if(X.isValidElement(e))u=X.cloneElement(e,VE(VE({},c),O7e(e)));else if(Wn(e))u=e(c);else if(u7e(e)&&!f7e(e)){var h=s(e,c);u=ce.createElement(fZ,{shapeType:n,elementProps:h})}else{var d=c;u=ce.createElement(fZ,{shapeType:n,elementProps:d})}return l?ce.createElement(Pr,{className:o},u):u}function FA(r,e){return e!=null&&"trapezoids"in r.props}function BA(r,e){return e!=null&&"sectors"in r.props}function s_(r,e){return e!=null&&"points"in r.props}function k7e(r,e){var n,i,s=r.x===(e==null||(n=e.labelViewBox)===null||n===void 0?void 0:n.x)||r.x===e.x,a=r.y===(e==null||(i=e.labelViewBox)===null||i===void 0?void 0:i.y)||r.y===e.y;return s&&a}function I7e(r,e){var n=r.endAngle===e.endAngle,i=r.startAngle===e.startAngle;return n&&i}function D7e(r,e){var n=r.x===e.x,i=r.y===e.y,s=r.z===e.z;return n&&i&&s}function L7e(r,e){var n;return FA(r,e)?n=k7e:BA(r,e)?n=I7e:s_(r,e)&&(n=D7e),n}function F7e(r,e){var n;return FA(r,e)?n="trapezoids":BA(r,e)?n="sectors":s_(r,e)&&(n="points"),n}function B7e(r,e){if(FA(r,e)){var n;return(n=e.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}if(BA(r,e)){var i;return(i=e.tooltipPayload)===null||i===void 0||(i=i[0])===null||i===void 0||(i=i.payload)===null||i===void 0?void 0:i.payload}return s_(r,e)?e.payload:{}}function j7e(r){var e=r.activeTooltipItem,n=r.graphicalItem,i=r.itemData,s=F7e(n,e),a=B7e(n,e),o=i.filter(function(c,u){var h=Op(a,c),d=n.props[s].filter(function(g){var v=L7e(n,e);return v(g,e)}),f=n.props[s].indexOf(d[d.length-1]),p=u===f;return h&&p}),l=i.indexOf(o[o.length-1]);return l}var dL,pZ;function U7e(){if(pZ)return dL;pZ=1;var r=Math.ceil,e=Math.max;function n(i,s,a,o){for(var l=-1,c=e(r((s-i)/(a||1)),0),u=Array(c);c--;)u[o?c:++l]=i,i+=a;return u}return dL=n,dL}var fL,mZ;function loe(){if(mZ)return fL;mZ=1;var r=Sae(),e=1/0,n=17976931348623157e292;function i(s){if(!s)return s===0?s:0;if(s=r(s),s===e||s===-1/0){var a=s<0?-1:1;return a*n}return s===s?s:0}return fL=i,fL}var pL,gZ;function z7e(){if(gZ)return pL;gZ=1;var r=U7e(),e=OA(),n=loe();function i(s){return function(a,o,l){return l&&typeof l!="number"&&e(a,o,l)&&(o=l=void 0),a=n(a),o===void 0?(o=a,a=0):o=n(o),l=l===void 0?a<o?1:-1:n(l),r(a,o,l,s)}}return pL=i,pL}var mL,yZ;function $7e(){if(yZ)return mL;yZ=1;var r=z7e(),e=r();return mL=e,mL}var G7e=$7e();const HE=_r(G7e);function a_(r){"@babel/helpers - typeof";return a_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a_(r)}function vZ(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable})),n.push.apply(n,i)}return n}function xZ(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?vZ(Object(n),!0).forEach(function(i){coe(r,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):vZ(Object(n)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(n,i))})}return r}function coe(r,e,n){return e=V7e(e),e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function V7e(r){var e=H7e(r,"string");return a_(e)=="symbol"?e:e+""}function H7e(r,e){if(a_(r)!="object"||!r)return r;var n=r[Symbol.toPrimitive];if(n!==void 0){var i=n.call(r,e);if(a_(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}var W7e=["Webkit","Moz","O","ms"],q7e=function(e,n){var i=e.replace(/(\w)/,function(a){return a.toUpperCase()}),s=W7e.reduce(function(a,o){return xZ(xZ({},a),{},coe({},o+i,n))},{});return s[e]=n,s};function Ly(r){"@babel/helpers - typeof";return Ly=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ly(r)}function WE(){return WE=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])}return r},WE.apply(this,arguments)}function bZ(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable})),n.push.apply(n,i)}return n}function gL(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?bZ(Object(n),!0).forEach(function(i){Eo(r,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):bZ(Object(n)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(n,i))})}return r}function X7e(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function _Z(r,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(r,hoe(i.key),i)}}function K7e(r,e,n){return e&&_Z(r.prototype,e),n&&_Z(r,n),Object.defineProperty(r,"prototype",{writable:!1}),r}function Y7e(r,e,n){return e=qE(e),Z7e(r,uoe()?Reflect.construct(e,n||[],qE(r).constructor):e.apply(r,n))}function Z7e(r,e){if(e&&(Ly(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Q7e(r)}function Q7e(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function uoe(){try{var r=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(uoe=function(){return!!r})()}function qE(r){return qE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},qE(r)}function J7e(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),e&&fB(r,e)}function fB(r,e){return fB=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,s){return i.__proto__=s,i},fB(r,e)}function Eo(r,e,n){return e=hoe(e),e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function hoe(r){var e=eXe(r,"string");return Ly(e)=="symbol"?e:e+""}function eXe(r,e){if(Ly(r)!="object"||!r)return r;var n=r[Symbol.toPrimitive];if(n!==void 0){var i=n.call(r,e);if(Ly(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(r)}var tXe=function(e){var n=e.data,i=e.startIndex,s=e.endIndex,a=e.x,o=e.width,l=e.travellerWidth;if(!n||!n.length)return{};var c=n.length,u=xx().domain(HE(0,c)).range([a,a+o-l]),h=u.domain().map(function(d){return u(d)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:u(i),endX:u(s),scale:u,scaleValues:h}},wZ=function(e){return e.changedTouches&&!!e.changedTouches.length},Fy=function(r){function e(n){var i;return X7e(this,e),i=Y7e(this,e,[n]),Eo(i,"handleDrag",function(s){i.leaveTimer&&(clearTimeout(i.leaveTimer),i.leaveTimer=null),i.state.isTravellerMoving?i.handleTravellerMove(s):i.state.isSlideMoving&&i.handleSlideDrag(s)}),Eo(i,"handleTouchMove",function(s){s.changedTouches!=null&&s.changedTouches.length>0&&i.handleDrag(s.changedTouches[0])}),Eo(i,"handleDragEnd",function(){i.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var s=i.props,a=s.endIndex,o=s.onDragEnd,l=s.startIndex;o==null||o({endIndex:a,startIndex:l})}),i.detachDragEndListener()}),Eo(i,"handleLeaveWrapper",function(){(i.state.isTravellerMoving||i.state.isSlideMoving)&&(i.leaveTimer=window.setTimeout(i.handleDragEnd,i.props.leaveTimeOut))}),Eo(i,"handleEnterSlideOrTraveller",function(){i.setState({isTextActive:!0})}),Eo(i,"handleLeaveSlideOrTraveller",function(){i.setState({isTextActive:!1})}),Eo(i,"handleSlideDragStart",function(s){var a=wZ(s)?s.changedTouches[0]:s;i.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:a.pageX}),i.attachDragEndListener()}),i.travellerDragStartHandlers={startX:i.handleTravellerDragStart.bind(i,"startX"),endX:i.handleTravellerDragStart.bind(i,"endX")},i.state={},i}return J7e(e,r),K7e(e,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(i){var s=i.startX,a=i.endX,o=this.state.scaleValues,l=this.props,c=l.gap,u=l.data,h=u.length-1,d=Math.min(s,a),f=Math.max(s,a),p=e.getIndexInRange(o,d),g=e.getIndexInRange(o,f);return{startIndex:p-p%c,endIndex:g===h?h:g-g%c}}},{key:"getTextOfTick",value:function(i){var s=this.props,a=s.data,o=s.tickFormatter,l=s.dataKey,c=ms(a[i],l,i);return Wn(o)?o(c,i):c}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(i){var s=this.state,a=s.slideMoveStartX,o=s.startX,l=s.endX,c=this.props,u=c.x,h=c.width,d=c.travellerWidth,f=c.startIndex,p=c.endIndex,g=c.onChange,v=i.pageX-a;v>0?v=Math.min(v,u+h-d-l,u+h-d-o):v<0&&(v=Math.max(v,u-o,u-l));var x=this.getIndex({startX:o+v,endX:l+v});(x.startIndex!==f||x.endIndex!==p)&&g&&g(x),this.setState({startX:o+v,endX:l+v,slideMoveStartX:i.pageX})}},{key:"handleTravellerDragStart",value:function(i,s){var a=wZ(s)?s.changedTouches[0]:s;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:i,brushMoveStartX:a.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(i){var s=this.state,a=s.brushMoveStartX,o=s.movingTravellerId,l=s.endX,c=s.startX,u=this.state[o],h=this.props,d=h.x,f=h.width,p=h.travellerWidth,g=h.onChange,v=h.gap,x=h.data,_={startX:this.state.startX,endX:this.state.endX},E=i.pageX-a;E>0?E=Math.min(E,d+f-p-u):E<0&&(E=Math.max(E,d-u)),_[o]=u+E;var S=this.getIndex(_),T=S.startIndex,M=S.endIndex,C=function(){var P=x.length-1;return o==="startX"&&(l>c?T%v===0:M%v===0)||l<c&&M===P||o==="endX"&&(l>c?M%v===0:T%v===0)||l>c&&M===P};this.setState(Eo(Eo({},o,u+E),"brushMoveStartX",i.pageX),function(){g&&C()&&g(S)})}},{key:"handleTravellerMoveKeyboard",value:function(i,s){var a=this,o=this.state,l=o.scaleValues,c=o.startX,u=o.endX,h=this.state[s],d=l.indexOf(h);if(d!==-1){var f=d+i;if(!(f===-1||f>=l.length)){var p=l[f];s==="startX"&&p>=u||s==="endX"&&p<=c||this.setState(Eo({},s,p),function(){a.props.onChange(a.getIndex({startX:a.state.startX,endX:a.state.endX}))})}}}},{key:"renderBackground",value:function(){var i=this.props,s=i.x,a=i.y,o=i.width,l=i.height,c=i.fill,u=i.stroke;return ce.createElement("rect",{stroke:u,fill:c,x:s,y:a,width:o,height:l})}},{key:"renderPanorama",value:function(){var i=this.props,s=i.x,a=i.y,o=i.width,l=i.height,c=i.data,u=i.children,h=i.padding,d=X.Children.only(u);return d?ce.cloneElement(d,{x:s,y:a,width:o,height:l,margin:h,compact:!0,data:c}):null}},{key:"renderTravellerLayer",value:function(i,s){var a,o,l=this,c=this.props,u=c.y,h=c.travellerWidth,d=c.height,f=c.traveller,p=c.ariaLabel,g=c.data,v=c.startIndex,x=c.endIndex,_=Math.max(i,this.props.x),E=gL(gL({},$n(this.props,!1)),{},{x:_,y:u,width:h,height:d}),S=p||"Min value: ".concat((a=g[v])===null||a===void 0?void 0:a.name,", Max value: ").concat((o=g[x])===null||o===void 0?void 0:o.name);return ce.createElement(Pr,{tabIndex:0,role:"slider","aria-label":S,"aria-valuenow":i,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[s],onTouchStart:this.travellerDragStartHandlers[s],onKeyDown:function(M){["ArrowLeft","ArrowRight"].includes(M.key)&&(M.preventDefault(),M.stopPropagation(),l.handleTravellerMoveKeyboard(M.key==="ArrowRight"?1:-1,s))},onFocus:function(){l.setState({isTravellerFocused:!0})},onBlur:function(){l.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},e.renderTraveller(f,E))}},{key:"renderSlide",value:function(i,s){var a=this.props,o=a.y,l=a.height,c=a.stroke,u=a.travellerWidth,h=Math.min(i,s)+u,d=Math.max(Math.abs(s-i)-u,0);return ce.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:c,fillOpacity:.2,x:h,y:o,width:d,height:l})}},{key:"renderText",value:function(){var i=this.props,s=i.startIndex,a=i.endIndex,o=i.y,l=i.height,c=i.travellerWidth,u=i.stroke,h=this.state,d=h.startX,f=h.endX,p=5,g={pointerEvents:"none",fill:u};return ce.createElement(Pr,{className:"recharts-brush-texts"},ce.createElement(OE,WE({textAnchor:"end",verticalAnchor:"middle",x:Math.min(d,f)-p,y:o+l/2},g),this.getTextOfTick(s)),ce.createElement(OE,WE({textAnchor:"start",verticalAnchor:"middle",x:Math.max(d,f)+c+p,y:o+l/2},g),this.getTextOfTick(a)))}},{key:"render",value:function(){var i=this.props,s=i.data,a=i.className,o=i.children,l=i.x,c=i.y,u=i.width,h=i.height,d=i.alwaysShowText,f=this.state,p=f.startX,g=f.endX,v=f.isTextActive,x=f.isSlideMoving,_=f.isTravellerMoving,E=f.isTravellerFocused;if(!s||!s.length||!bt(l)||!bt(c)||!bt(u)||!bt(h)||u<=0||h<=0)return null;var S=mr("recharts-brush",a),T=ce.Children.count(o)===1,M=q7e("userSelect","none");return ce.createElement(Pr,{className:S,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:M},this.renderBackground(),T&&this.renderPanorama(),this.renderSlide(p,g),this.renderTravellerLayer(p,"startX"),this.renderTravellerLayer(g,"endX"),(v||x||_||E||d)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(i){var s=i.x,a=i.y,o=i.width,l=i.height,c=i.stroke,u=Math.floor(a+l/2)-1;return ce.createElement(ce.Fragment,null,ce.createElement("rect",{x:s,y:a,width:o,height:l,fill:c,stroke:"none"}),ce.createElement("line",{x1:s+1,y1:u,x2:s+o-1,y2:u,fill:"none",stroke:"#fff"}),ce.createElement("line",{x1:s+1,y1:u+2,x2:s+o-1,y2:u+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(i,s){var a;return ce.isValidElement(i)?a=ce.cloneElement(i,s):Wn(i)?a=i(s):a=e.renderDefaultTraveller(s),a}},{key:"getDerivedStateFromProps",value:function(i,s){var a=i.data,o=i.width,l=i.x,c=i.travellerWidth,u=i.updateId,h=i.startIndex,d=i.endIndex;if(a!==s.prevData||u!==s.prevUpdateId)return gL({prevData:a,prevTravellerWidth:c,prevUpdateId:u,prevX:l,prevWidth:o},a&&a.length?tXe({data:a,width:o,x:l,travellerWidth:c,startIndex:h,endIndex:d}):{scale:null,scaleValues:null});if(s.scale&&(o!==s.prevWidth||l!==s.prevX||c!==s.prevTravellerWidth)){s.scale.range([l,l+o-c]);var f=s.scale.domain().map(function(p){return s.scale(p)});return{prevData:a,prevTravellerWidth:c,prevUpdateId:u,prevX:l,prevWidth:o,startX:s.scale(i.startIndex),endX:s.scale(i.endIndex),scaleValues:f}}return null}},{key:"getIndexInRange",value:function(i,s){for(var a=i.length,o=0,l=a-1;l-o>1;){var c=Math.floor((o+l)/2);i[c]>s?l=c:o=c}return s>=i[l]?l:o}}])}(X.PureComponent);Eo(Fy,"displayName","Brush");Eo(Fy,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var yL,SZ;function nXe(){if(SZ)return yL;SZ=1;var r=Az();function e(n,i){var s;return r(n,function(a,o,l){return s=i(a,o,l),!s}),!!s}return yL=e,yL}var vL,TZ;function rXe(){if(TZ)return vL;TZ=1;var r=eae(),e=nf(),n=nXe(),i=ao(),s=OA();function a(o,l,c){var u=i(o)?r:n;return c&&s(o,l,c)&&(l=void 0),u(o,e(l,3))}return vL=a,vL}var iXe=rXe();const sXe=_r(iXe);var Gc=function(e,n){var i=e.alwaysShow,s=e.ifOverflow;return i&&(s="extendDomain"),s===n},xL,EZ;function aXe(){if(EZ)return xL;EZ=1;var r=vae();function e(n,i,s){i=="__proto__"&&r?r(n,i,{configurable:!0,enumerable:!0,value:s,writable:!0}):n[i]=s}return xL=e,xL}var bL,MZ;function oXe(){if(MZ)return bL;MZ=1;var r=aXe(),e=gae(),n=nf();function i(s,a){var o={};return a=n(a,3),e(s,function(l,c,u){r(o,c,a(l,c,u))}),o}return bL=i,bL}var lXe=oXe();const cXe=_r(lXe);var _L,AZ;function uXe(){if(AZ)return _L;AZ=1;function r(e,n){for(var i=-1,s=e==null?0:e.length;++i<s;)if(!n(e[i],i,e))return!1;return!0}return _L=r,_L}var wL,CZ;function hXe(){if(CZ)return wL;CZ=1;var r=Az();function e(n,i){var s=!0;return r(n,function(a,o,l){return s=!!i(a,o,l),s}),s}return wL=e,wL}var SL,NZ;function dXe(){if(NZ)return SL;NZ=1;var r=uXe(),e=hXe(),n=nf(),i=ao(),s=OA();function a(o,l,c){var u=i(o)?r:e;return c&&s(o,l,c)&&(l=void 0),u(o,n(l,3))}return SL=a,SL}var fXe=dXe();const doe=_r(fXe);var pXe=["x","y"];function o_(r){"@babel/helpers - typeof";return o_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o_(r)}function pB(){return pB=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])}return r},pB.apply(this,arguments)}function PZ(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable})),n.push.apply(n,i)}return n}function Xv(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?PZ(Object(n),!0).forEach(function(i){mXe(r,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):PZ(Object(n)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(n,i))})}return r}function mXe(r,e,n){return e=gXe(e),e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function gXe(r){var e=yXe(r,"string");return o_(e)=="symbol"?e:e+""}function yXe(r,e){if(o_(r)!="object"||!r)return r;var n=r[Symbol.toPrimitive];if(n!==void 0){var i=n.call(r,e);if(o_(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function vXe(r,e){if(r==null)return{};var n=xXe(r,e),i,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);for(s=0;s<a.length;s++)i=a[s],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(r,i)&&(n[i]=r[i])}return n}function xXe(r,e){if(r==null)return{};var n={};for(var i in r)if(Object.prototype.hasOwnProperty.call(r,i)){if(e.indexOf(i)>=0)continue;n[i]=r[i]}return n}function bXe(r,e){var n=r.x,i=r.y,s=vXe(r,pXe),a="".concat(n),o=parseInt(a,10),l="".concat(i),c=parseInt(l,10),u="".concat(e.height||s.height),h=parseInt(u,10),d="".concat(e.width||s.width),f=parseInt(d,10);return Xv(Xv(Xv(Xv(Xv({},e),s),o?{x:o}:{}),c?{y:c}:{}),{},{height:h,width:f,name:e.name,radius:e.radius})}function RZ(r){return ce.createElement(dB,pB({shapeType:"rectangle",propTransformer:bXe,activeClassName:"recharts-active-bar"},r))}var _Xe=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(i,s){if(typeof e=="number")return e;var a=typeof i=="number";return a?e(i,s):(a||Ip(),n)}},wXe=["value","background"],foe;function By(r){"@babel/helpers - typeof";return By=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},By(r)}function SXe(r,e){if(r==null)return{};var n=TXe(r,e),i,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);for(s=0;s<a.length;s++)i=a[s],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(r,i)&&(n[i]=r[i])}return n}function TXe(r,e){if(r==null)return{};var n={};for(var i in r)if(Object.prototype.hasOwnProperty.call(r,i)){if(e.indexOf(i)>=0)continue;n[i]=r[i]}return n}function XE(){return XE=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])}return r},XE.apply(this,arguments)}function OZ(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable})),n.push.apply(n,i)}return n}function Yi(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?OZ(Object(n),!0).forEach(function(i){Ed(r,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):OZ(Object(n)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(n,i))})}return r}function EXe(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function kZ(r,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(r,moe(i.key),i)}}function MXe(r,e,n){return e&&kZ(r.prototype,e),n&&kZ(r,n),Object.defineProperty(r,"prototype",{writable:!1}),r}function AXe(r,e,n){return e=KE(e),CXe(r,poe()?Reflect.construct(e,n||[],KE(r).constructor):e.apply(r,n))}function CXe(r,e){if(e&&(By(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return NXe(r)}function NXe(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function poe(){try{var r=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(poe=function(){return!!r})()}function KE(r){return KE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},KE(r)}function PXe(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),e&&mB(r,e)}function mB(r,e){return mB=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,s){return i.__proto__=s,i},mB(r,e)}function Ed(r,e,n){return e=moe(e),e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function moe(r){var e=RXe(r,"string");return By(e)=="symbol"?e:e+""}function RXe(r,e){if(By(r)!="object"||!r)return r;var n=r[Symbol.toPrimitive];if(n!==void 0){var i=n.call(r,e);if(By(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(r)}var bh=function(r){function e(){var n;EXe(this,e);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return n=AXe(this,e,[].concat(s)),Ed(n,"state",{isAnimationFinished:!1}),Ed(n,"id",Vp("recharts-bar-")),Ed(n,"handleAnimationEnd",function(){var o=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),o&&o()}),Ed(n,"handleAnimationStart",function(){var o=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),o&&o()}),n}return PXe(e,r),MXe(e,[{key:"renderRectanglesStatically",value:function(i){var s=this,a=this.props,o=a.shape,l=a.dataKey,c=a.activeIndex,u=a.activeBar,h=$n(this.props,!1);return i&&i.map(function(d,f){var p=f===c,g=p?u:o,v=Yi(Yi(Yi({},h),d),{},{isActive:p,option:g,index:f,dataKey:l,onAnimationStart:s.handleAnimationStart,onAnimationEnd:s.handleAnimationEnd});return ce.createElement(Pr,XE({className:"recharts-bar-rectangle"},Db(s.props,d,f),{key:"rectangle-".concat(d==null?void 0:d.x,"-").concat(d==null?void 0:d.y,"-").concat(d==null?void 0:d.value,"-").concat(f)}),ce.createElement(RZ,v))})}},{key:"renderRectanglesWithAnimation",value:function(){var i=this,s=this.props,a=s.data,o=s.layout,l=s.isAnimationActive,c=s.animationBegin,u=s.animationDuration,h=s.animationEasing,d=s.animationId,f=this.state.prevData;return ce.createElement(lc,{begin:c,duration:u,isActive:l,easing:h,from:{t:0},to:{t:1},key:"bar-".concat(d),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(p){var g=p.t,v=a.map(function(x,_){var E=f&&f[_];if(E){var S=Ui(E.x,x.x),T=Ui(E.y,x.y),M=Ui(E.width,x.width),C=Ui(E.height,x.height);return Yi(Yi({},x),{},{x:S(g),y:T(g),width:M(g),height:C(g)})}if(o==="horizontal"){var A=Ui(0,x.height),P=A(g);return Yi(Yi({},x),{},{y:x.y+x.height-P,height:P})}var R=Ui(0,x.width),O=R(g);return Yi(Yi({},x),{},{width:O})});return ce.createElement(Pr,null,i.renderRectanglesStatically(v))})}},{key:"renderRectangles",value:function(){var i=this.props,s=i.data,a=i.isAnimationActive,o=this.state.prevData;return a&&s&&s.length&&(!o||!Op(o,s))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(s)}},{key:"renderBackground",value:function(){var i=this,s=this.props,a=s.data,o=s.dataKey,l=s.activeIndex,c=$n(this.props.background,!1);return a.map(function(u,h){u.value;var d=u.background,f=SXe(u,wXe);if(!d)return null;var p=Yi(Yi(Yi(Yi(Yi({},f),{},{fill:"#eee"},d),c),Db(i.props,u,h)),{},{onAnimationStart:i.handleAnimationStart,onAnimationEnd:i.handleAnimationEnd,dataKey:o,index:h,className:"recharts-bar-background-rectangle"});return ce.createElement(RZ,XE({key:"background-bar-".concat(h),option:i.props.background,isActive:h===l},p))})}},{key:"renderErrorBar",value:function(i,s){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var a=this.props,o=a.data,l=a.xAxis,c=a.yAxis,u=a.layout,h=a.children,d=no(h,b0);if(!d)return null;var f=u==="vertical"?o[0].height/2:o[0].width/2,p=function(x,_){var E=Array.isArray(x.value)?x.value[1]:x.value;return{x:x.x,y:x.y,value:E,errorVal:ms(x,_)}},g={clipPath:i?"url(#clipPath-".concat(s,")"):null};return ce.createElement(Pr,g,d.map(function(v){return ce.cloneElement(v,{key:"error-bar-".concat(s,"-").concat(v.props.dataKey),data:o,xAxis:l,yAxis:c,layout:u,offset:f,dataPointFormatter:p})}))}},{key:"render",value:function(){var i=this.props,s=i.hide,a=i.data,o=i.className,l=i.xAxis,c=i.yAxis,u=i.left,h=i.top,d=i.width,f=i.height,p=i.isAnimationActive,g=i.background,v=i.id;if(s||!a||!a.length)return null;var x=this.state.isAnimationFinished,_=mr("recharts-bar",o),E=l&&l.allowDataOverflow,S=c&&c.allowDataOverflow,T=E||S,M=Gn(v)?this.id:v;return ce.createElement(Pr,{className:_},E||S?ce.createElement("defs",null,ce.createElement("clipPath",{id:"clipPath-".concat(M)},ce.createElement("rect",{x:E?u:u-d/2,y:S?h:h-f/2,width:E?d:d*2,height:S?f:f*2}))):null,ce.createElement(Pr,{className:"recharts-bar-rectangles",clipPath:T?"url(#clipPath-".concat(M,")"):null},g?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(T,M),(!p||x)&&$c.renderCallByParent(this.props,a))}}],[{key:"getDerivedStateFromProps",value:function(i,s){return i.animationId!==s.prevAnimationId?{prevAnimationId:i.animationId,curData:i.data,prevData:s.curData}:i.data!==s.curData?{curData:i.data}:null}}])}(X.PureComponent);foe=bh;Ed(bh,"displayName","Bar");Ed(bh,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!rf.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});Ed(bh,"getComposedData",function(r){var e=r.props,n=r.item,i=r.barPosition,s=r.bandSize,a=r.xAxis,o=r.yAxis,l=r.xAxisTicks,c=r.yAxisTicks,u=r.stackedData,h=r.dataStartIndex,d=r.displayedData,f=r.offset,p=tWe(i,n);if(!p)return null;var g=e.layout,v=n.type.defaultProps,x=v!==void 0?Yi(Yi({},v),n.props):n.props,_=x.dataKey,E=x.children,S=x.minPointSize,T=g==="horizontal"?o:a,M=u?T.scale.domain():null,C=cWe({numericAxis:T}),A=no(E,Pz),P=d.map(function(R,O){var D,F,U,B,W,j;u?D=nWe(u[h+O],M):(D=ms(R,_),Array.isArray(D)||(D=[C,D]));var $=_Xe(S,foe.defaultProps.minPointSize)(D[1],O);if(g==="horizontal"){var z,Z=[o.scale(D[0]),o.scale(D[1])],se=Z[0],q=Z[1];F=xY({axis:a,ticks:l,bandSize:s,offset:p.offset,entry:R,index:O}),U=(z=q??se)!==null&&z!==void 0?z:void 0,B=p.size;var ue=se-q;if(W=Number.isNaN(ue)?0:ue,j={x:F,y:o.y,width:B,height:o.height},Math.abs($)>0&&Math.abs(W)<Math.abs($)){var be=rc(W||$)*(Math.abs($)-Math.abs(W));U-=be,W+=be}}else{var ee=[a.scale(D[0]),a.scale(D[1])],le=ee[0],oe=ee[1];if(F=le,U=xY({axis:o,ticks:c,bandSize:s,offset:p.offset,entry:R,index:O}),B=oe-le,W=p.size,j={x:a.x,y:U,width:a.width,height:W},Math.abs($)>0&&Math.abs(B)<Math.abs($)){var fe=rc(B||$)*(Math.abs($)-Math.abs(B));B+=fe}}return Yi(Yi(Yi({},R),{},{x:F,y:U,width:B,height:W,value:u?D:D[1],payload:R,background:j},A&&A[O]&&A[O].props),{},{tooltipPayload:[Zae(n,R)],tooltipPosition:{x:F+B/2,y:U+W/2}})});return Yi({data:P,layout:g},f)});function l_(r){"@babel/helpers - typeof";return l_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l_(r)}function OXe(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function IZ(r,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(r,goe(i.key),i)}}function kXe(r,e,n){return e&&IZ(r.prototype,e),n&&IZ(r,n),Object.defineProperty(r,"prototype",{writable:!1}),r}function DZ(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable})),n.push.apply(n,i)}return n}function Kl(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?DZ(Object(n),!0).forEach(function(i){jA(r,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):DZ(Object(n)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(n,i))})}return r}function jA(r,e,n){return e=goe(e),e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function goe(r){var e=IXe(r,"string");return l_(e)=="symbol"?e:e+""}function IXe(r,e){if(l_(r)!="object"||!r)return r;var n=r[Symbol.toPrimitive];if(n!==void 0){var i=n.call(r,e);if(l_(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}var UA=function(e,n,i,s,a){var o=e.width,l=e.height,c=e.layout,u=e.children,h=Object.keys(n),d={left:i.left,leftMirror:i.left,right:o-i.right,rightMirror:o-i.right,top:i.top,topMirror:i.top,bottom:l-i.bottom,bottomMirror:l-i.bottom},f=!!Co(u,bh);return h.reduce(function(p,g){var v=n[g],x=v.orientation,_=v.domain,E=v.padding,S=E===void 0?{}:E,T=v.mirror,M=v.reversed,C="".concat(x).concat(T?"Mirror":""),A,P,R,O,D;if(v.type==="number"&&(v.padding==="gap"||v.padding==="no-gap")){var F=_[1]-_[0],U=1/0,B=v.categoricalDomain.sort();if(B.forEach(function(ee,le){le>0&&(U=Math.min((ee||0)-(B[le-1]||0),U))}),Number.isFinite(U)){var W=U/F,j=v.layout==="vertical"?i.height:i.width;if(v.padding==="gap"&&(A=W*j/2),v.padding==="no-gap"){var $=Rp(e.barCategoryGap,W*j),z=W*j/2;A=z-$-(z-$)/j*$}}}s==="xAxis"?P=[i.left+(S.left||0)+(A||0),i.left+i.width-(S.right||0)-(A||0)]:s==="yAxis"?P=c==="horizontal"?[i.top+i.height-(S.bottom||0),i.top+(S.top||0)]:[i.top+(S.top||0)+(A||0),i.top+i.height-(S.bottom||0)-(A||0)]:P=v.range,M&&(P=[P[1],P[0]]);var Z=JHe(v,a,f),se=Z.scale,q=Z.realScaleType;se.domain(_).range(P),eWe(se);var ue=lWe(se,Kl(Kl({},v),{},{realScaleType:q}));s==="xAxis"?(D=x==="top"&&!T||x==="bottom"&&T,R=i.left,O=d[C]-D*v.height):s==="yAxis"&&(D=x==="left"&&!T||x==="right"&&T,R=d[C]-D*v.width,O=i.top);var be=Kl(Kl(Kl({},v),ue),{},{realScaleType:q,x:R,y:O,scale:se,width:s==="xAxis"?i.width:v.width,height:s==="yAxis"?i.height:v.height});return be.bandSize=LE(be,ue),!v.hide&&s==="xAxis"?d[C]+=(D?-1:1)*be.height:v.hide||(d[C]+=(D?-1:1)*be.width),Kl(Kl({},p),{},jA({},g,be))},{})},yoe=function(e,n){var i=e.x,s=e.y,a=n.x,o=n.y;return{x:Math.min(i,a),y:Math.min(s,o),width:Math.abs(a-i),height:Math.abs(o-s)}},DXe=function(e){var n=e.x1,i=e.y1,s=e.x2,a=e.y2;return yoe({x:n,y:i},{x:s,y:a})},voe=function(){function r(e){OXe(this,r),this.scale=e}return kXe(r,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=i.bandAware,a=i.position;if(n!==void 0){if(a)switch(a){case"start":return this.scale(n);case"middle":{var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+o}case"end":{var l=this.bandwidth?this.bandwidth():0;return this.scale(n)+l}default:return this.scale(n)}if(s){var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+c}return this.scale(n)}}},{key:"isInRange",value:function(n){var i=this.range(),s=i[0],a=i[i.length-1];return s<=a?n>=s&&n<=a:n>=a&&n<=s}}],[{key:"create",value:function(n){return new r(n)}}])}();jA(voe,"EPS",1e-4);var Dz=function(e){var n=Object.keys(e).reduce(function(i,s){return Kl(Kl({},i),{},jA({},s,voe.create(e[s])))},{});return Kl(Kl({},n),{},{apply:function(s){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=a.bandAware,l=a.position;return cXe(s,function(c,u){return n[u].apply(c,{bandAware:o,position:l})})},isInRange:function(s){return doe(s,function(a,o){return n[o].isInRange(a)})}})};function LXe(r){return(r%180+180)%180}var FXe=function(e){var n=e.width,i=e.height,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=LXe(s),o=a*Math.PI/180,l=Math.atan(i/n),c=o>l&&o<Math.PI-l?i/Math.sin(o):n/Math.cos(o);return Math.abs(c)},TL,LZ;function BXe(){if(LZ)return TL;LZ=1;var r=nf(),e=H_(),n=PA();function i(s){return function(a,o,l){var c=Object(a);if(!e(a)){var u=r(o,3);a=n(a),o=function(d){return u(c[d],d,c)}}var h=s(a,o,l);return h>-1?c[u?a[h]:h]:void 0}}return TL=i,TL}var EL,FZ;function jXe(){if(FZ)return EL;FZ=1;var r=loe();function e(n){var i=r(n),s=i%1;return i===i?s?i-s:i:0}return EL=e,EL}var ML,BZ;function UXe(){if(BZ)return ML;BZ=1;var r=hae(),e=nf(),n=jXe(),i=Math.max;function s(a,o,l){var c=a==null?0:a.length;if(!c)return-1;var u=l==null?0:n(l);return u<0&&(u=i(c+u,0)),r(a,e(o,3),u)}return ML=s,ML}var AL,jZ;function zXe(){if(jZ)return AL;jZ=1;var r=BXe(),e=UXe(),n=r(e);return AL=n,AL}var $Xe=zXe();const GXe=_r($Xe);var VXe=Mse();const HXe=_r(VXe);var WXe=HXe(function(r){return{x:r.left,y:r.top,width:r.width,height:r.height}},function(r){return["l",r.left,"t",r.top,"w",r.width,"h",r.height].join("")}),Lz=X.createContext(void 0),Fz=X.createContext(void 0),xoe=X.createContext(void 0),boe=X.createContext({}),_oe=X.createContext(void 0),woe=X.createContext(0),Soe=X.createContext(0),UZ=function(e){var n=e.state,i=n.xAxisMap,s=n.yAxisMap,a=n.offset,o=e.clipPathId,l=e.children,c=e.width,u=e.height,h=WXe(a);return ce.createElement(Lz.Provider,{value:i},ce.createElement(Fz.Provider,{value:s},ce.createElement(boe.Provider,{value:a},ce.createElement(xoe.Provider,{value:h},ce.createElement(_oe.Provider,{value:o},ce.createElement(woe.Provider,{value:u},ce.createElement(Soe.Provider,{value:c},l)))))))},qXe=function(){return X.useContext(_oe)},Toe=function(e){var n=X.useContext(Lz);n==null&&Ip();var i=n[e];return i==null&&Ip(),i},XXe=function(){var e=X.useContext(Lz);return _d(e)},KXe=function(){var e=X.useContext(Fz),n=GXe(e,function(i){return doe(i.domain,Number.isFinite)});return n||_d(e)},Eoe=function(e){var n=X.useContext(Fz);n==null&&Ip();var i=n[e];return i==null&&Ip(),i},YXe=function(){var e=X.useContext(xoe);return e},ZXe=function(){return X.useContext(boe)},Bz=function(){return X.useContext(Soe)},jz=function(){return X.useContext(woe)};function jy(r){"@babel/helpers - typeof";return jy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jy(r)}function QXe(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function JXe(r,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(r,Aoe(i.key),i)}}function eKe(r,e,n){return e&&JXe(r.prototype,e),Object.defineProperty(r,"prototype",{writable:!1}),r}function tKe(r,e,n){return e=YE(e),nKe(r,Moe()?Reflect.construct(e,n||[],YE(r).constructor):e.apply(r,n))}function nKe(r,e){if(e&&(jy(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return rKe(r)}function rKe(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function Moe(){try{var r=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Moe=function(){return!!r})()}function YE(r){return YE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},YE(r)}function iKe(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),e&&gB(r,e)}function gB(r,e){return gB=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,s){return i.__proto__=s,i},gB(r,e)}function zZ(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable})),n.push.apply(n,i)}return n}function $Z(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?zZ(Object(n),!0).forEach(function(i){Uz(r,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):zZ(Object(n)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(n,i))})}return r}function Uz(r,e,n){return e=Aoe(e),e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function Aoe(r){var e=sKe(r,"string");return jy(e)=="symbol"?e:e+""}function sKe(r,e){if(jy(r)!="object"||!r)return r;var n=r[Symbol.toPrimitive];if(n!==void 0){var i=n.call(r,e);if(jy(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(r)}function aKe(r,e){return uKe(r)||cKe(r,e)||lKe(r,e)||oKe()}function oKe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lKe(r,e){if(r){if(typeof r=="string")return GZ(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return GZ(r,e)}}function GZ(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=r[n];return i}function cKe(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var i,s,a,o,l=[],c=!0,u=!1;try{if(a=(n=n.call(r)).next,e!==0)for(;!(c=(i=a.call(n)).done)&&(l.push(i.value),l.length!==e);c=!0);}catch(h){u=!0,s=h}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function uKe(r){if(Array.isArray(r))return r}function yB(){return yB=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])}return r},yB.apply(this,arguments)}var hKe=function(e,n){var i;return ce.isValidElement(e)?i=ce.cloneElement(e,n):Wn(e)?i=e(n):i=ce.createElement("line",yB({},n,{className:"recharts-reference-line-line"})),i},dKe=function(e,n,i,s,a,o,l,c,u){var h=a.x,d=a.y,f=a.width,p=a.height;if(i){var g=u.y,v=e.y.apply(g,{position:o});if(Gc(u,"discard")&&!e.y.isInRange(v))return null;var x=[{x:h+f,y:v},{x:h,y:v}];return c==="left"?x.reverse():x}if(n){var _=u.x,E=e.x.apply(_,{position:o});if(Gc(u,"discard")&&!e.x.isInRange(E))return null;var S=[{x:E,y:d+p},{x:E,y:d}];return l==="top"?S.reverse():S}if(s){var T=u.segment,M=T.map(function(C){return e.apply(C,{position:o})});return Gc(u,"discard")&&sXe(M,function(C){return!e.isInRange(C)})?null:M}return null};function fKe(r){var e=r.x,n=r.y,i=r.segment,s=r.xAxisId,a=r.yAxisId,o=r.shape,l=r.className,c=r.alwaysShow,u=qXe(),h=Toe(s),d=Eoe(a),f=YXe();if(!u||!f)return null;hh(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var p=Dz({x:h.scale,y:d.scale}),g=fs(e),v=fs(n),x=i&&i.length===2,_=dKe(p,g,v,x,f,r.position,h.orientation,d.orientation,r);if(!_)return null;var E=aKe(_,2),S=E[0],T=S.x,M=S.y,C=E[1],A=C.x,P=C.y,R=Gc(r,"hidden")?"url(#".concat(u,")"):void 0,O=$Z($Z({clipPath:R},$n(r,!0)),{},{x1:T,y1:M,x2:A,y2:P});return ce.createElement(Pr,{className:mr("recharts-reference-line",l)},hKe(o,O),la.renderCallByParent(r,DXe({x1:T,y1:M,x2:A,y2:P})))}var zz=function(r){function e(){return QXe(this,e),tKe(this,e,arguments)}return iKe(e,r),eKe(e,[{key:"render",value:function(){return ce.createElement(fKe,this.props)}}])}(ce.Component);Uz(zz,"displayName","ReferenceLine");Uz(zz,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function vB(){return vB=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])}return r},vB.apply(this,arguments)}function Uy(r){"@babel/helpers - typeof";return Uy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Uy(r)}function VZ(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable})),n.push.apply(n,i)}return n}function HZ(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?VZ(Object(n),!0).forEach(function(i){zA(r,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):VZ(Object(n)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(n,i))})}return r}function pKe(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function mKe(r,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(r,Noe(i.key),i)}}function gKe(r,e,n){return e&&mKe(r.prototype,e),Object.defineProperty(r,"prototype",{writable:!1}),r}function yKe(r,e,n){return e=ZE(e),vKe(r,Coe()?Reflect.construct(e,n||[],ZE(r).constructor):e.apply(r,n))}function vKe(r,e){if(e&&(Uy(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return xKe(r)}function xKe(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function Coe(){try{var r=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Coe=function(){return!!r})()}function ZE(r){return ZE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},ZE(r)}function bKe(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),e&&xB(r,e)}function xB(r,e){return xB=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,s){return i.__proto__=s,i},xB(r,e)}function zA(r,e,n){return e=Noe(e),e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function Noe(r){var e=_Ke(r,"string");return Uy(e)=="symbol"?e:e+""}function _Ke(r,e){if(Uy(r)!="object"||!r)return r;var n=r[Symbol.toPrimitive];if(n!==void 0){var i=n.call(r,e);if(Uy(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(r)}var wKe=function(e){var n=e.x,i=e.y,s=e.xAxis,a=e.yAxis,o=Dz({x:s.scale,y:a.scale}),l=o.apply({x:n,y:i},{bandAware:!0});return Gc(e,"discard")&&!o.isInRange(l)?null:l},$A=function(r){function e(){return pKe(this,e),yKe(this,e,arguments)}return bKe(e,r),gKe(e,[{key:"render",value:function(){var i=this.props,s=i.x,a=i.y,o=i.r,l=i.alwaysShow,c=i.clipPathId,u=fs(s),h=fs(a);if(hh(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!u||!h)return null;var d=wKe(this.props);if(!d)return null;var f=d.x,p=d.y,g=this.props,v=g.shape,x=g.className,_=Gc(this.props,"hidden")?"url(#".concat(c,")"):void 0,E=HZ(HZ({clipPath:_},$n(this.props,!0)),{},{cx:f,cy:p});return ce.createElement(Pr,{className:mr("recharts-reference-dot",x)},e.renderDot(v,E),la.renderCallByParent(this.props,{x:f-o,y:p-o,width:2*o,height:2*o}))}}])}(ce.Component);zA($A,"displayName","ReferenceDot");zA($A,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});zA($A,"renderDot",function(r,e){var n;return ce.isValidElement(r)?n=ce.cloneElement(r,e):Wn(r)?n=r(e):n=ce.createElement(LA,vB({},e,{cx:e.cx,cy:e.cy,className:"recharts-reference-dot-dot"})),n});function bB(){return bB=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])}return r},bB.apply(this,arguments)}function zy(r){"@babel/helpers - typeof";return zy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zy(r)}function WZ(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable})),n.push.apply(n,i)}return n}function qZ(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?WZ(Object(n),!0).forEach(function(i){GA(r,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):WZ(Object(n)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(n,i))})}return r}function SKe(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function TKe(r,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(r,Roe(i.key),i)}}function EKe(r,e,n){return e&&TKe(r.prototype,e),Object.defineProperty(r,"prototype",{writable:!1}),r}function MKe(r,e,n){return e=QE(e),AKe(r,Poe()?Reflect.construct(e,n||[],QE(r).constructor):e.apply(r,n))}function AKe(r,e){if(e&&(zy(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return CKe(r)}function CKe(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function Poe(){try{var r=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Poe=function(){return!!r})()}function QE(r){return QE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},QE(r)}function NKe(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),e&&_B(r,e)}function _B(r,e){return _B=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,s){return i.__proto__=s,i},_B(r,e)}function GA(r,e,n){return e=Roe(e),e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function Roe(r){var e=PKe(r,"string");return zy(e)=="symbol"?e:e+""}function PKe(r,e){if(zy(r)!="object"||!r)return r;var n=r[Symbol.toPrimitive];if(n!==void 0){var i=n.call(r,e);if(zy(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(r)}var RKe=function(e,n,i,s,a){var o=a.x1,l=a.x2,c=a.y1,u=a.y2,h=a.xAxis,d=a.yAxis;if(!h||!d)return null;var f=Dz({x:h.scale,y:d.scale}),p={x:e?f.x.apply(o,{position:"start"}):f.x.rangeMin,y:i?f.y.apply(c,{position:"start"}):f.y.rangeMin},g={x:n?f.x.apply(l,{position:"end"}):f.x.rangeMax,y:s?f.y.apply(u,{position:"end"}):f.y.rangeMax};return Gc(a,"discard")&&(!f.isInRange(p)||!f.isInRange(g))?null:yoe(p,g)},VA=function(r){function e(){return SKe(this,e),MKe(this,e,arguments)}return NKe(e,r),EKe(e,[{key:"render",value:function(){var i=this.props,s=i.x1,a=i.x2,o=i.y1,l=i.y2,c=i.className,u=i.alwaysShow,h=i.clipPathId;hh(u===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var d=fs(s),f=fs(a),p=fs(o),g=fs(l),v=this.props.shape;if(!d&&!f&&!p&&!g&&!v)return null;var x=RKe(d,f,p,g,this.props);if(!x&&!v)return null;var _=Gc(this.props,"hidden")?"url(#".concat(h,")"):void 0;return ce.createElement(Pr,{className:mr("recharts-reference-area",c)},e.renderRect(v,qZ(qZ({clipPath:_},$n(this.props,!0)),x)),la.renderCallByParent(this.props,x))}}])}(ce.Component);GA(VA,"displayName","ReferenceArea");GA(VA,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});GA(VA,"renderRect",function(r,e){var n;return ce.isValidElement(r)?n=ce.cloneElement(r,e):Wn(r)?n=r(e):n=ce.createElement(Iz,bB({},e,{className:"recharts-reference-area-rect"})),n});function Ooe(r,e,n){if(e<1)return[];if(e===1&&n===void 0)return r;for(var i=[],s=0;s<r.length;s+=e)i.push(r[s]);return i}function OKe(r,e,n){var i={width:r.width+e.width,height:r.height+e.height};return FXe(i,n)}function kKe(r,e,n){var i=n==="width",s=r.x,a=r.y,o=r.width,l=r.height;return e===1?{start:i?s:a,end:i?s+o:a+l}:{start:i?s+o:a+l,end:i?s:a}}function JE(r,e,n,i,s){if(r*e<r*i||r*e>r*s)return!1;var a=n();return r*(e-r*a/2-i)>=0&&r*(e+r*a/2-s)<=0}function IKe(r,e){return Ooe(r,e+1)}function DKe(r,e,n,i,s){for(var a=(i||[]).slice(),o=e.start,l=e.end,c=0,u=1,h=o,d=function(){var g=i==null?void 0:i[c];if(g===void 0)return{v:Ooe(i,u)};var v=c,x,_=function(){return x===void 0&&(x=n(g,v)),x},E=g.coordinate,S=c===0||JE(r,E,_,h,l);S||(c=0,h=o,u+=1),S&&(h=E+r*(_()/2+s),c+=u)},f;u<=a.length;)if(f=d(),f)return f.v;return[]}function c_(r){"@babel/helpers - typeof";return c_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c_(r)}function XZ(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable})),n.push.apply(n,i)}return n}function aa(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?XZ(Object(n),!0).forEach(function(i){LKe(r,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):XZ(Object(n)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(n,i))})}return r}function LKe(r,e,n){return e=FKe(e),e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function FKe(r){var e=BKe(r,"string");return c_(e)=="symbol"?e:e+""}function BKe(r,e){if(c_(r)!="object"||!r)return r;var n=r[Symbol.toPrimitive];if(n!==void 0){var i=n.call(r,e);if(c_(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function jKe(r,e,n,i,s){for(var a=(i||[]).slice(),o=a.length,l=e.start,c=e.end,u=function(f){var p=a[f],g,v=function(){return g===void 0&&(g=n(p,f)),g};if(f===o-1){var x=r*(p.coordinate+r*v()/2-c);a[f]=p=aa(aa({},p),{},{tickCoord:x>0?p.coordinate-x*r:p.coordinate})}else a[f]=p=aa(aa({},p),{},{tickCoord:p.coordinate});var _=JE(r,p.tickCoord,v,l,c);_&&(c=p.tickCoord-r*(v()/2+s),a[f]=aa(aa({},p),{},{isShow:!0}))},h=o-1;h>=0;h--)u(h);return a}function UKe(r,e,n,i,s,a){var o=(i||[]).slice(),l=o.length,c=e.start,u=e.end;if(a){var h=i[l-1],d=n(h,l-1),f=r*(h.coordinate+r*d/2-u);o[l-1]=h=aa(aa({},h),{},{tickCoord:f>0?h.coordinate-f*r:h.coordinate});var p=JE(r,h.tickCoord,function(){return d},c,u);p&&(u=h.tickCoord-r*(d/2+s),o[l-1]=aa(aa({},h),{},{isShow:!0}))}for(var g=a?l-1:l,v=function(E){var S=o[E],T,M=function(){return T===void 0&&(T=n(S,E)),T};if(E===0){var C=r*(S.coordinate-r*M()/2-c);o[E]=S=aa(aa({},S),{},{tickCoord:C<0?S.coordinate-C*r:S.coordinate})}else o[E]=S=aa(aa({},S),{},{tickCoord:S.coordinate});var A=JE(r,S.tickCoord,M,c,u);A&&(c=S.tickCoord+r*(M()/2+s),o[E]=aa(aa({},S),{},{isShow:!0}))},x=0;x<g;x++)v(x);return o}function $z(r,e,n){var i=r.tick,s=r.ticks,a=r.viewBox,o=r.minTickGap,l=r.orientation,c=r.interval,u=r.tickFormatter,h=r.unit,d=r.angle;if(!s||!s.length||!i)return[];if(bt(c)||rf.isSsr)return IKe(s,typeof c=="number"&&bt(c)?c:0);var f=[],p=l==="top"||l==="bottom"?"width":"height",g=h&&p==="width"?kx(h,{fontSize:e,letterSpacing:n}):{width:0,height:0},v=function(S,T){var M=Wn(u)?u(S.value,T):S.value;return p==="width"?OKe(kx(M,{fontSize:e,letterSpacing:n}),g,d):kx(M,{fontSize:e,letterSpacing:n})[p]},x=s.length>=2?rc(s[1].coordinate-s[0].coordinate):1,_=kKe(a,x,p);return c==="equidistantPreserveStart"?DKe(x,_,v,s,o):(c==="preserveStart"||c==="preserveStartEnd"?f=UKe(x,_,v,s,o,c==="preserveStartEnd"):f=jKe(x,_,v,s,o),f.filter(function(E){return E.isShow}))}var zKe=["viewBox"],$Ke=["viewBox"],GKe=["ticks"];function $y(r){"@babel/helpers - typeof";return $y=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$y(r)}function Og(){return Og=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])}return r},Og.apply(this,arguments)}function KZ(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable})),n.push.apply(n,i)}return n}function xa(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?KZ(Object(n),!0).forEach(function(i){Gz(r,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):KZ(Object(n)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(n,i))})}return r}function CL(r,e){if(r==null)return{};var n=VKe(r,e),i,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);for(s=0;s<a.length;s++)i=a[s],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(r,i)&&(n[i]=r[i])}return n}function VKe(r,e){if(r==null)return{};var n={};for(var i in r)if(Object.prototype.hasOwnProperty.call(r,i)){if(e.indexOf(i)>=0)continue;n[i]=r[i]}return n}function HKe(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function YZ(r,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(r,Ioe(i.key),i)}}function WKe(r,e,n){return e&&YZ(r.prototype,e),n&&YZ(r,n),Object.defineProperty(r,"prototype",{writable:!1}),r}function qKe(r,e,n){return e=eM(e),XKe(r,koe()?Reflect.construct(e,n||[],eM(r).constructor):e.apply(r,n))}function XKe(r,e){if(e&&($y(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return KKe(r)}function KKe(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function koe(){try{var r=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(koe=function(){return!!r})()}function eM(r){return eM=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},eM(r)}function YKe(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),e&&wB(r,e)}function wB(r,e){return wB=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,s){return i.__proto__=s,i},wB(r,e)}function Gz(r,e,n){return e=Ioe(e),e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function Ioe(r){var e=ZKe(r,"string");return $y(e)=="symbol"?e:e+""}function ZKe(r,e){if($y(r)!="object"||!r)return r;var n=r[Symbol.toPrimitive];if(n!==void 0){var i=n.call(r,e);if($y(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(r)}var _0=function(r){function e(n){var i;return HKe(this,e),i=qKe(this,e,[n]),i.state={fontSize:"",letterSpacing:""},i}return YKe(e,r),WKe(e,[{key:"shouldComponentUpdate",value:function(i,s){var a=i.viewBox,o=CL(i,zKe),l=this.props,c=l.viewBox,u=CL(l,$Ke);return!Xg(a,c)||!Xg(o,u)||!Xg(s,this.state)}},{key:"componentDidMount",value:function(){var i=this.layerReference;if(i){var s=i.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];s&&this.setState({fontSize:window.getComputedStyle(s).fontSize,letterSpacing:window.getComputedStyle(s).letterSpacing})}}},{key:"getTickLineCoord",value:function(i){var s=this.props,a=s.x,o=s.y,l=s.width,c=s.height,u=s.orientation,h=s.tickSize,d=s.mirror,f=s.tickMargin,p,g,v,x,_,E,S=d?-1:1,T=i.tickSize||h,M=bt(i.tickCoord)?i.tickCoord:i.coordinate;switch(u){case"top":p=g=i.coordinate,x=o+ +!d*c,v=x-S*T,E=v-S*f,_=M;break;case"left":v=x=i.coordinate,g=a+ +!d*l,p=g-S*T,_=p-S*f,E=M;break;case"right":v=x=i.coordinate,g=a+ +d*l,p=g+S*T,_=p+S*f,E=M;break;default:p=g=i.coordinate,x=o+ +d*c,v=x+S*T,E=v+S*f,_=M;break}return{line:{x1:p,y1:v,x2:g,y2:x},tick:{x:_,y:E}}}},{key:"getTickTextAnchor",value:function(){var i=this.props,s=i.orientation,a=i.mirror,o;switch(s){case"left":o=a?"start":"end";break;case"right":o=a?"end":"start";break;default:o="middle";break}return o}},{key:"getTickVerticalAnchor",value:function(){var i=this.props,s=i.orientation,a=i.mirror,o="end";switch(s){case"left":case"right":o="middle";break;case"top":o=a?"start":"end";break;default:o=a?"end":"start";break}return o}},{key:"renderAxisLine",value:function(){var i=this.props,s=i.x,a=i.y,o=i.width,l=i.height,c=i.orientation,u=i.mirror,h=i.axisLine,d=xa(xa(xa({},$n(this.props,!1)),$n(h,!1)),{},{fill:"none"});if(c==="top"||c==="bottom"){var f=+(c==="top"&&!u||c==="bottom"&&u);d=xa(xa({},d),{},{x1:s,y1:a+f*l,x2:s+o,y2:a+f*l})}else{var p=+(c==="left"&&!u||c==="right"&&u);d=xa(xa({},d),{},{x1:s+p*o,y1:a,x2:s+p*o,y2:a+l})}return ce.createElement("line",Og({},d,{className:mr("recharts-cartesian-axis-line",pl(h,"className"))}))}},{key:"renderTicks",value:function(i,s,a){var o=this,l=this.props,c=l.tickLine,u=l.stroke,h=l.tick,d=l.tickFormatter,f=l.unit,p=$z(xa(xa({},this.props),{},{ticks:i}),s,a),g=this.getTickTextAnchor(),v=this.getTickVerticalAnchor(),x=$n(this.props,!1),_=$n(h,!1),E=xa(xa({},x),{},{fill:"none"},$n(c,!1)),S=p.map(function(T,M){var C=o.getTickLineCoord(T),A=C.line,P=C.tick,R=xa(xa(xa(xa({textAnchor:g,verticalAnchor:v},x),{},{stroke:"none",fill:u},_),P),{},{index:M,payload:T,visibleTicksCount:p.length,tickFormatter:d});return ce.createElement(Pr,Og({className:"recharts-cartesian-axis-tick",key:"tick-".concat(T.value,"-").concat(T.coordinate,"-").concat(T.tickCoord)},Db(o.props,T,M)),c&&ce.createElement("line",Og({},E,A,{className:mr("recharts-cartesian-axis-tick-line",pl(c,"className"))})),h&&e.renderTickItem(h,R,"".concat(Wn(d)?d(T.value,M):T.value).concat(f||"")))});return ce.createElement("g",{className:"recharts-cartesian-axis-ticks"},S)}},{key:"render",value:function(){var i=this,s=this.props,a=s.axisLine,o=s.width,l=s.height,c=s.ticksGenerator,u=s.className,h=s.hide;if(h)return null;var d=this.props,f=d.ticks,p=CL(d,GKe),g=f;return Wn(c)&&(g=f&&f.length>0?c(this.props):c(p)),o<=0||l<=0||!g||!g.length?null:ce.createElement(Pr,{className:mr("recharts-cartesian-axis",u),ref:function(x){i.layerReference=x}},a&&this.renderAxisLine(),this.renderTicks(g,this.state.fontSize,this.state.letterSpacing),la.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(i,s,a){var o;return ce.isValidElement(i)?o=ce.cloneElement(i,s):Wn(i)?o=i(s):o=ce.createElement(OE,Og({},s,{className:"recharts-cartesian-axis-tick-value"}),a),o}}])}(X.Component);Gz(_0,"displayName","CartesianAxis");Gz(_0,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var QKe=["x1","y1","x2","y2","key"],JKe=["offset"];function Dp(r){"@babel/helpers - typeof";return Dp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Dp(r)}function ZZ(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable})),n.push.apply(n,i)}return n}function ca(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ZZ(Object(n),!0).forEach(function(i){eYe(r,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):ZZ(Object(n)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(n,i))})}return r}function eYe(r,e,n){return e=tYe(e),e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function tYe(r){var e=nYe(r,"string");return Dp(e)=="symbol"?e:e+""}function nYe(r,e){if(Dp(r)!="object"||!r)return r;var n=r[Symbol.toPrimitive];if(n!==void 0){var i=n.call(r,e);if(Dp(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function op(){return op=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])}return r},op.apply(this,arguments)}function QZ(r,e){if(r==null)return{};var n=rYe(r,e),i,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);for(s=0;s<a.length;s++)i=a[s],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(r,i)&&(n[i]=r[i])}return n}function rYe(r,e){if(r==null)return{};var n={};for(var i in r)if(Object.prototype.hasOwnProperty.call(r,i)){if(e.indexOf(i)>=0)continue;n[i]=r[i]}return n}var iYe=function(e){var n=e.fill;if(!n||n==="none")return null;var i=e.fillOpacity,s=e.x,a=e.y,o=e.width,l=e.height,c=e.ry;return ce.createElement("rect",{x:s,y:a,ry:c,width:o,height:l,stroke:"none",fill:n,fillOpacity:i,className:"recharts-cartesian-grid-bg"})};function Doe(r,e){var n;if(ce.isValidElement(r))n=ce.cloneElement(r,e);else if(Wn(r))n=r(e);else{var i=e.x1,s=e.y1,a=e.x2,o=e.y2,l=e.key,c=QZ(e,QKe),u=$n(c,!1);u.offset;var h=QZ(u,JKe);n=ce.createElement("line",op({},h,{x1:i,y1:s,x2:a,y2:o,fill:"none",key:l}))}return n}function sYe(r){var e=r.x,n=r.width,i=r.horizontal,s=i===void 0?!0:i,a=r.horizontalPoints;if(!s||!a||!a.length)return null;var o=a.map(function(l,c){var u=ca(ca({},r),{},{x1:e,y1:l,x2:e+n,y2:l,key:"line-".concat(c),index:c});return Doe(s,u)});return ce.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function aYe(r){var e=r.y,n=r.height,i=r.vertical,s=i===void 0?!0:i,a=r.verticalPoints;if(!s||!a||!a.length)return null;var o=a.map(function(l,c){var u=ca(ca({},r),{},{x1:l,y1:e,x2:l,y2:e+n,key:"line-".concat(c),index:c});return Doe(s,u)});return ce.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function oYe(r){var e=r.horizontalFill,n=r.fillOpacity,i=r.x,s=r.y,a=r.width,o=r.height,l=r.horizontalPoints,c=r.horizontal,u=c===void 0?!0:c;if(!u||!e||!e.length)return null;var h=l.map(function(f){return Math.round(f+s-s)}).sort(function(f,p){return f-p});s!==h[0]&&h.unshift(0);var d=h.map(function(f,p){var g=!h[p+1],v=g?s+o-f:h[p+1]-f;if(v<=0)return null;var x=p%e.length;return ce.createElement("rect",{key:"react-".concat(p),y:f,x:i,height:v,width:a,stroke:"none",fill:e[x],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return ce.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},d)}function lYe(r){var e=r.vertical,n=e===void 0?!0:e,i=r.verticalFill,s=r.fillOpacity,a=r.x,o=r.y,l=r.width,c=r.height,u=r.verticalPoints;if(!n||!i||!i.length)return null;var h=u.map(function(f){return Math.round(f+a-a)}).sort(function(f,p){return f-p});a!==h[0]&&h.unshift(0);var d=h.map(function(f,p){var g=!h[p+1],v=g?a+l-f:h[p+1]-f;if(v<=0)return null;var x=p%i.length;return ce.createElement("rect",{key:"react-".concat(p),x:f,y:o,width:v,height:c,stroke:"none",fill:i[x],fillOpacity:s,className:"recharts-cartesian-grid-bg"})});return ce.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},d)}var cYe=function(e,n){var i=e.xAxis,s=e.width,a=e.height,o=e.offset;return Kae($z(ca(ca(ca({},_0.defaultProps),i),{},{ticks:th(i,!0),viewBox:{x:0,y:0,width:s,height:a}})),o.left,o.left+o.width,n)},uYe=function(e,n){var i=e.yAxis,s=e.width,a=e.height,o=e.offset;return Kae($z(ca(ca(ca({},_0.defaultProps),i),{},{ticks:th(i,!0),viewBox:{x:0,y:0,width:s,height:a}})),o.top,o.top+o.height,n)},pg={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function cx(r){var e,n,i,s,a,o,l=Bz(),c=jz(),u=ZXe(),h=ca(ca({},r),{},{stroke:(e=r.stroke)!==null&&e!==void 0?e:pg.stroke,fill:(n=r.fill)!==null&&n!==void 0?n:pg.fill,horizontal:(i=r.horizontal)!==null&&i!==void 0?i:pg.horizontal,horizontalFill:(s=r.horizontalFill)!==null&&s!==void 0?s:pg.horizontalFill,vertical:(a=r.vertical)!==null&&a!==void 0?a:pg.vertical,verticalFill:(o=r.verticalFill)!==null&&o!==void 0?o:pg.verticalFill,x:bt(r.x)?r.x:u.left,y:bt(r.y)?r.y:u.top,width:bt(r.width)?r.width:u.width,height:bt(r.height)?r.height:u.height}),d=h.x,f=h.y,p=h.width,g=h.height,v=h.syncWithTicks,x=h.horizontalValues,_=h.verticalValues,E=XXe(),S=KXe();if(!bt(p)||p<=0||!bt(g)||g<=0||!bt(d)||d!==+d||!bt(f)||f!==+f)return null;var T=h.verticalCoordinatesGenerator||cYe,M=h.horizontalCoordinatesGenerator||uYe,C=h.horizontalPoints,A=h.verticalPoints;if((!C||!C.length)&&Wn(M)){var P=x&&x.length,R=M({yAxis:S?ca(ca({},S),{},{ticks:P?x:S.ticks}):void 0,width:l,height:c,offset:u},P?!0:v);hh(Array.isArray(R),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(Dp(R),"]")),Array.isArray(R)&&(C=R)}if((!A||!A.length)&&Wn(T)){var O=_&&_.length,D=T({xAxis:E?ca(ca({},E),{},{ticks:O?_:E.ticks}):void 0,width:l,height:c,offset:u},O?!0:v);hh(Array.isArray(D),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(Dp(D),"]")),Array.isArray(D)&&(A=D)}return ce.createElement("g",{className:"recharts-cartesian-grid"},ce.createElement(iYe,{fill:h.fill,fillOpacity:h.fillOpacity,x:h.x,y:h.y,width:h.width,height:h.height,ry:h.ry}),ce.createElement(sYe,op({},h,{offset:u,horizontalPoints:C,xAxis:E,yAxis:S})),ce.createElement(aYe,op({},h,{offset:u,verticalPoints:A,xAxis:E,yAxis:S})),ce.createElement(oYe,op({},h,{horizontalPoints:C})),ce.createElement(lYe,op({},h,{verticalPoints:A})))}cx.displayName="CartesianGrid";var hYe=["type","layout","connectNulls","ref"],dYe=["key"];function Gy(r){"@babel/helpers - typeof";return Gy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gy(r)}function JZ(r,e){if(r==null)return{};var n=fYe(r,e),i,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);for(s=0;s<a.length;s++)i=a[s],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(r,i)&&(n[i]=r[i])}return n}function fYe(r,e){if(r==null)return{};var n={};for(var i in r)if(Object.prototype.hasOwnProperty.call(r,i)){if(e.indexOf(i)>=0)continue;n[i]=r[i]}return n}function Lx(){return Lx=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])}return r},Lx.apply(this,arguments)}function eQ(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable})),n.push.apply(n,i)}return n}function To(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?eQ(Object(n),!0).forEach(function(i){Yl(r,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):eQ(Object(n)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(n,i))})}return r}function mg(r){return yYe(r)||gYe(r)||mYe(r)||pYe()}function pYe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mYe(r,e){if(r){if(typeof r=="string")return SB(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return SB(r,e)}}function gYe(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function yYe(r){if(Array.isArray(r))return SB(r)}function SB(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=r[n];return i}function vYe(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function tQ(r,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(r,Foe(i.key),i)}}function xYe(r,e,n){return e&&tQ(r.prototype,e),n&&tQ(r,n),Object.defineProperty(r,"prototype",{writable:!1}),r}function bYe(r,e,n){return e=tM(e),_Ye(r,Loe()?Reflect.construct(e,n||[],tM(r).constructor):e.apply(r,n))}function _Ye(r,e){if(e&&(Gy(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return wYe(r)}function wYe(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function Loe(){try{var r=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Loe=function(){return!!r})()}function tM(r){return tM=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},tM(r)}function SYe(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),e&&TB(r,e)}function TB(r,e){return TB=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,s){return i.__proto__=s,i},TB(r,e)}function Yl(r,e,n){return e=Foe(e),e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function Foe(r){var e=TYe(r,"string");return Gy(e)=="symbol"?e:e+""}function TYe(r,e){if(Gy(r)!="object"||!r)return r;var n=r[Symbol.toPrimitive];if(n!==void 0){var i=n.call(r,e);if(Gy(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(r)}var Lp=function(r){function e(){var n;vYe(this,e);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return n=bYe(this,e,[].concat(s)),Yl(n,"state",{isAnimationFinished:!0,totalLength:0}),Yl(n,"generateSimpleStrokeDasharray",function(o,l){return"".concat(l,"px ").concat(o-l,"px")}),Yl(n,"getStrokeDasharray",function(o,l,c){var u=c.reduce(function(_,E){return _+E});if(!u)return n.generateSimpleStrokeDasharray(l,o);for(var h=Math.floor(o/u),d=o%u,f=l-o,p=[],g=0,v=0;g<c.length;v+=c[g],++g)if(v+c[g]>d){p=[].concat(mg(c.slice(0,g)),[d-v]);break}var x=p.length%2===0?[0,f]:[f];return[].concat(mg(e.repeat(c,h)),mg(p),x).map(function(_){return"".concat(_,"px")}).join(", ")}),Yl(n,"id",Vp("recharts-line-")),Yl(n,"pathRef",function(o){n.mainCurve=o}),Yl(n,"handleAnimationEnd",function(){n.setState({isAnimationFinished:!0}),n.props.onAnimationEnd&&n.props.onAnimationEnd()}),Yl(n,"handleAnimationStart",function(){n.setState({isAnimationFinished:!1}),n.props.onAnimationStart&&n.props.onAnimationStart()}),n}return SYe(e,r),xYe(e,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var i=this.getTotalLength();this.setState({totalLength:i})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var i=this.getTotalLength();i!==this.state.totalLength&&this.setState({totalLength:i})}}},{key:"getTotalLength",value:function(){var i=this.mainCurve;try{return i&&i.getTotalLength&&i.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(i,s){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var a=this.props,o=a.points,l=a.xAxis,c=a.yAxis,u=a.layout,h=a.children,d=no(h,b0);if(!d)return null;var f=function(v,x){return{x:v.x,y:v.y,value:v.value,errorVal:ms(v.payload,x)}},p={clipPath:i?"url(#clipPath-".concat(s,")"):null};return ce.createElement(Pr,p,d.map(function(g){return ce.cloneElement(g,{key:"bar-".concat(g.props.dataKey),data:o,xAxis:l,yAxis:c,layout:u,dataPointFormatter:f})}))}},{key:"renderDots",value:function(i,s,a){var o=this.props.isAnimationActive;if(o&&!this.state.isAnimationFinished)return null;var l=this.props,c=l.dot,u=l.points,h=l.dataKey,d=$n(this.props,!1),f=$n(c,!0),p=u.map(function(v,x){var _=To(To(To({key:"dot-".concat(x),r:3},d),f),{},{index:x,cx:v.x,cy:v.y,value:v.value,dataKey:h,payload:v.payload,points:u});return e.renderDotItem(c,_)}),g={clipPath:i?"url(#clipPath-".concat(s?"":"dots-").concat(a,")"):null};return ce.createElement(Pr,Lx({className:"recharts-line-dots",key:"dots"},g),p)}},{key:"renderCurveStatically",value:function(i,s,a,o){var l=this.props,c=l.type,u=l.layout,h=l.connectNulls;l.ref;var d=JZ(l,hYe),f=To(To(To({},$n(d,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:s?"url(#clipPath-".concat(a,")"):null,points:i},o),{},{type:c,layout:u,connectNulls:h});return ce.createElement(yp,Lx({},f,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(i,s){var a=this,o=this.props,l=o.points,c=o.strokeDasharray,u=o.isAnimationActive,h=o.animationBegin,d=o.animationDuration,f=o.animationEasing,p=o.animationId,g=o.animateNewValues,v=o.width,x=o.height,_=this.state,E=_.prevPoints,S=_.totalLength;return ce.createElement(lc,{begin:h,duration:d,isActive:u,easing:f,from:{t:0},to:{t:1},key:"line-".concat(p),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(T){var M=T.t;if(E){var C=E.length/l.length,A=l.map(function(F,U){var B=Math.floor(U*C);if(E[B]){var W=E[B],j=Ui(W.x,F.x),$=Ui(W.y,F.y);return To(To({},F),{},{x:j(M),y:$(M)})}if(g){var z=Ui(v*2,F.x),Z=Ui(x/2,F.y);return To(To({},F),{},{x:z(M),y:Z(M)})}return To(To({},F),{},{x:F.x,y:F.y})});return a.renderCurveStatically(A,i,s)}var P=Ui(0,S),R=P(M),O;if(c){var D="".concat(c).split(/[,\s]+/gim).map(function(F){return parseFloat(F)});O=a.getStrokeDasharray(R,S,D)}else O=a.generateSimpleStrokeDasharray(S,R);return a.renderCurveStatically(l,i,s,{strokeDasharray:O})})}},{key:"renderCurve",value:function(i,s){var a=this.props,o=a.points,l=a.isAnimationActive,c=this.state,u=c.prevPoints,h=c.totalLength;return l&&o&&o.length&&(!u&&h>0||!Op(u,o))?this.renderCurveWithAnimation(i,s):this.renderCurveStatically(o,i,s)}},{key:"render",value:function(){var i,s=this.props,a=s.hide,o=s.dot,l=s.points,c=s.className,u=s.xAxis,h=s.yAxis,d=s.top,f=s.left,p=s.width,g=s.height,v=s.isAnimationActive,x=s.id;if(a||!l||!l.length)return null;var _=this.state.isAnimationFinished,E=l.length===1,S=mr("recharts-line",c),T=u&&u.allowDataOverflow,M=h&&h.allowDataOverflow,C=T||M,A=Gn(x)?this.id:x,P=(i=$n(o,!1))!==null&&i!==void 0?i:{r:3,strokeWidth:2},R=P.r,O=R===void 0?3:R,D=P.strokeWidth,F=D===void 0?2:D,U=Rse(o)?o:{},B=U.clipDot,W=B===void 0?!0:B,j=O*2+F;return ce.createElement(Pr,{className:S},T||M?ce.createElement("defs",null,ce.createElement("clipPath",{id:"clipPath-".concat(A)},ce.createElement("rect",{x:T?f:f-p/2,y:M?d:d-g/2,width:T?p:p*2,height:M?g:g*2})),!W&&ce.createElement("clipPath",{id:"clipPath-dots-".concat(A)},ce.createElement("rect",{x:f-j/2,y:d-j/2,width:p+j,height:g+j}))):null,!E&&this.renderCurve(C,A),this.renderErrorBar(C,A),(E||o)&&this.renderDots(C,W,A),(!v||_)&&$c.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(i,s){return i.animationId!==s.prevAnimationId?{prevAnimationId:i.animationId,curPoints:i.points,prevPoints:s.curPoints}:i.points!==s.curPoints?{curPoints:i.points}:null}},{key:"repeat",value:function(i,s){for(var a=i.length%2!==0?[].concat(mg(i),[0]):i,o=[],l=0;l<s;++l)o=[].concat(mg(o),mg(a));return o}},{key:"renderDotItem",value:function(i,s){var a;if(ce.isValidElement(i))a=ce.cloneElement(i,s);else if(Wn(i))a=i(s);else{var o=s.key,l=JZ(s,dYe),c=mr("recharts-line-dot",typeof i!="boolean"?i.className:"");a=ce.createElement(LA,Lx({key:o},l,{className:c}))}return a}}])}(X.PureComponent);Yl(Lp,"displayName","Line");Yl(Lp,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!rf.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});Yl(Lp,"getComposedData",function(r){var e=r.props,n=r.xAxis,i=r.yAxis,s=r.xAxisTicks,a=r.yAxisTicks,o=r.dataKey,l=r.bandSize,c=r.displayedData,u=r.offset,h=e.layout,d=c.map(function(f,p){var g=ms(f,o);return h==="horizontal"?{x:Iy({axis:n,ticks:s,bandSize:l,entry:f,index:p}),y:Gn(g)?null:i.scale(g),value:g,payload:f}:{x:Gn(g)?null:n.scale(g),y:Iy({axis:i,ticks:a,bandSize:l,entry:f,index:p}),value:g,payload:f}});return To({points:d,layout:h},u)});var EYe=["layout","type","stroke","connectNulls","isRange","ref"],MYe=["key"],Boe;function Vy(r){"@babel/helpers - typeof";return Vy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vy(r)}function joe(r,e){if(r==null)return{};var n=AYe(r,e),i,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);for(s=0;s<a.length;s++)i=a[s],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(r,i)&&(n[i]=r[i])}return n}function AYe(r,e){if(r==null)return{};var n={};for(var i in r)if(Object.prototype.hasOwnProperty.call(r,i)){if(e.indexOf(i)>=0)continue;n[i]=r[i]}return n}function lp(){return lp=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])}return r},lp.apply(this,arguments)}function nQ(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable})),n.push.apply(n,i)}return n}function gd(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?nQ(Object(n),!0).forEach(function(i){Ic(r,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):nQ(Object(n)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(n,i))})}return r}function CYe(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function rQ(r,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(r,zoe(i.key),i)}}function NYe(r,e,n){return e&&rQ(r.prototype,e),n&&rQ(r,n),Object.defineProperty(r,"prototype",{writable:!1}),r}function PYe(r,e,n){return e=nM(e),RYe(r,Uoe()?Reflect.construct(e,n||[],nM(r).constructor):e.apply(r,n))}function RYe(r,e){if(e&&(Vy(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return OYe(r)}function OYe(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function Uoe(){try{var r=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Uoe=function(){return!!r})()}function nM(r){return nM=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},nM(r)}function kYe(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),e&&EB(r,e)}function EB(r,e){return EB=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,s){return i.__proto__=s,i},EB(r,e)}function Ic(r,e,n){return e=zoe(e),e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function zoe(r){var e=IYe(r,"string");return Vy(e)=="symbol"?e:e+""}function IYe(r,e){if(Vy(r)!="object"||!r)return r;var n=r[Symbol.toPrimitive];if(n!==void 0){var i=n.call(r,e);if(Vy(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(r)}var Ph=function(r){function e(){var n;CYe(this,e);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return n=PYe(this,e,[].concat(s)),Ic(n,"state",{isAnimationFinished:!0}),Ic(n,"id",Vp("recharts-area-")),Ic(n,"handleAnimationEnd",function(){var o=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),Wn(o)&&o()}),Ic(n,"handleAnimationStart",function(){var o=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),Wn(o)&&o()}),n}return kYe(e,r),NYe(e,[{key:"renderDots",value:function(i,s,a){var o=this.props.isAnimationActive,l=this.state.isAnimationFinished;if(o&&!l)return null;var c=this.props,u=c.dot,h=c.points,d=c.dataKey,f=$n(this.props,!1),p=$n(u,!0),g=h.map(function(x,_){var E=gd(gd(gd({key:"dot-".concat(_),r:3},f),p),{},{index:_,cx:x.x,cy:x.y,dataKey:d,value:x.value,payload:x.payload,points:h});return e.renderDotItem(u,E)}),v={clipPath:i?"url(#clipPath-".concat(s?"":"dots-").concat(a,")"):null};return ce.createElement(Pr,lp({className:"recharts-area-dots"},v),g)}},{key:"renderHorizontalRect",value:function(i){var s=this.props,a=s.baseLine,o=s.points,l=s.strokeWidth,c=o[0].x,u=o[o.length-1].x,h=i*Math.abs(c-u),d=Td(o.map(function(f){return f.y||0}));return bt(a)&&typeof a=="number"?d=Math.max(a,d):a&&Array.isArray(a)&&a.length&&(d=Math.max(Td(a.map(function(f){return f.y||0})),d)),bt(d)?ce.createElement("rect",{x:c<u?c:c-h,y:0,width:h,height:Math.floor(d+(l?parseInt("".concat(l),10):1))}):null}},{key:"renderVerticalRect",value:function(i){var s=this.props,a=s.baseLine,o=s.points,l=s.strokeWidth,c=o[0].y,u=o[o.length-1].y,h=i*Math.abs(c-u),d=Td(o.map(function(f){return f.x||0}));return bt(a)&&typeof a=="number"?d=Math.max(a,d):a&&Array.isArray(a)&&a.length&&(d=Math.max(Td(a.map(function(f){return f.x||0})),d)),bt(d)?ce.createElement("rect",{x:0,y:c<u?c:c-h,width:d+(l?parseInt("".concat(l),10):1),height:Math.floor(h)}):null}},{key:"renderClipRect",value:function(i){var s=this.props.layout;return s==="vertical"?this.renderVerticalRect(i):this.renderHorizontalRect(i)}},{key:"renderAreaStatically",value:function(i,s,a,o){var l=this.props,c=l.layout,u=l.type,h=l.stroke,d=l.connectNulls,f=l.isRange;l.ref;var p=joe(l,EYe);return ce.createElement(Pr,{clipPath:a?"url(#clipPath-".concat(o,")"):null},ce.createElement(yp,lp({},$n(p,!0),{points:i,connectNulls:d,type:u,baseLine:s,layout:c,stroke:"none",className:"recharts-area-area"})),h!=="none"&&ce.createElement(yp,lp({},$n(this.props,!1),{className:"recharts-area-curve",layout:c,type:u,connectNulls:d,fill:"none",points:i})),h!=="none"&&f&&ce.createElement(yp,lp({},$n(this.props,!1),{className:"recharts-area-curve",layout:c,type:u,connectNulls:d,fill:"none",points:s})))}},{key:"renderAreaWithAnimation",value:function(i,s){var a=this,o=this.props,l=o.points,c=o.baseLine,u=o.isAnimationActive,h=o.animationBegin,d=o.animationDuration,f=o.animationEasing,p=o.animationId,g=this.state,v=g.prevPoints,x=g.prevBaseLine;return ce.createElement(lc,{begin:h,duration:d,isActive:u,easing:f,from:{t:0},to:{t:1},key:"area-".concat(p),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(_){var E=_.t;if(v){var S=v.length/l.length,T=l.map(function(P,R){var O=Math.floor(R*S);if(v[O]){var D=v[O],F=Ui(D.x,P.x),U=Ui(D.y,P.y);return gd(gd({},P),{},{x:F(E),y:U(E)})}return P}),M;if(bt(c)&&typeof c=="number"){var C=Ui(x,c);M=C(E)}else if(Gn(c)||g0(c)){var A=Ui(x,0);M=A(E)}else M=c.map(function(P,R){var O=Math.floor(R*S);if(x[O]){var D=x[O],F=Ui(D.x,P.x),U=Ui(D.y,P.y);return gd(gd({},P),{},{x:F(E),y:U(E)})}return P});return a.renderAreaStatically(T,M,i,s)}return ce.createElement(Pr,null,ce.createElement("defs",null,ce.createElement("clipPath",{id:"animationClipPath-".concat(s)},a.renderClipRect(E))),ce.createElement(Pr,{clipPath:"url(#animationClipPath-".concat(s,")")},a.renderAreaStatically(l,c,i,s)))})}},{key:"renderArea",value:function(i,s){var a=this.props,o=a.points,l=a.baseLine,c=a.isAnimationActive,u=this.state,h=u.prevPoints,d=u.prevBaseLine,f=u.totalLength;return c&&o&&o.length&&(!h&&f>0||!Op(h,o)||!Op(d,l))?this.renderAreaWithAnimation(i,s):this.renderAreaStatically(o,l,i,s)}},{key:"render",value:function(){var i,s=this.props,a=s.hide,o=s.dot,l=s.points,c=s.className,u=s.top,h=s.left,d=s.xAxis,f=s.yAxis,p=s.width,g=s.height,v=s.isAnimationActive,x=s.id;if(a||!l||!l.length)return null;var _=this.state.isAnimationFinished,E=l.length===1,S=mr("recharts-area",c),T=d&&d.allowDataOverflow,M=f&&f.allowDataOverflow,C=T||M,A=Gn(x)?this.id:x,P=(i=$n(o,!1))!==null&&i!==void 0?i:{r:3,strokeWidth:2},R=P.r,O=R===void 0?3:R,D=P.strokeWidth,F=D===void 0?2:D,U=Rse(o)?o:{},B=U.clipDot,W=B===void 0?!0:B,j=O*2+F;return ce.createElement(Pr,{className:S},T||M?ce.createElement("defs",null,ce.createElement("clipPath",{id:"clipPath-".concat(A)},ce.createElement("rect",{x:T?h:h-p/2,y:M?u:u-g/2,width:T?p:p*2,height:M?g:g*2})),!W&&ce.createElement("clipPath",{id:"clipPath-dots-".concat(A)},ce.createElement("rect",{x:h-j/2,y:u-j/2,width:p+j,height:g+j}))):null,E?null:this.renderArea(C,A),(o||E)&&this.renderDots(C,W,A),(!v||_)&&$c.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(i,s){return i.animationId!==s.prevAnimationId?{prevAnimationId:i.animationId,curPoints:i.points,curBaseLine:i.baseLine,prevPoints:s.curPoints,prevBaseLine:s.curBaseLine}:i.points!==s.curPoints||i.baseLine!==s.curBaseLine?{curPoints:i.points,curBaseLine:i.baseLine}:null}}])}(X.PureComponent);Boe=Ph;Ic(Ph,"displayName","Area");Ic(Ph,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!rf.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});Ic(Ph,"getBaseValue",function(r,e,n,i){var s=r.layout,a=r.baseValue,o=e.props.baseValue,l=o??a;if(bt(l)&&typeof l=="number")return l;var c=s==="horizontal"?i:n,u=c.scale.domain();if(c.type==="number"){var h=Math.max(u[0],u[1]),d=Math.min(u[0],u[1]);return l==="dataMin"?d:l==="dataMax"||h<0?h:Math.max(Math.min(u[0],u[1]),0)}return l==="dataMin"?u[0]:l==="dataMax"?u[1]:u[0]});Ic(Ph,"getComposedData",function(r){var e=r.props,n=r.item,i=r.xAxis,s=r.yAxis,a=r.xAxisTicks,o=r.yAxisTicks,l=r.bandSize,c=r.dataKey,u=r.stackedData,h=r.dataStartIndex,d=r.displayedData,f=r.offset,p=e.layout,g=u&&u.length,v=Boe.getBaseValue(e,n,i,s),x=p==="horizontal",_=!1,E=d.map(function(T,M){var C;g?C=u[h+M]:(C=ms(T,c),Array.isArray(C)?_=!0:C=[v,C]);var A=C[1]==null||g&&ms(T,c)==null;return x?{x:Iy({axis:i,ticks:a,bandSize:l,entry:T,index:M}),y:A?null:s.scale(C[1]),value:C,payload:T}:{x:A?null:i.scale(C[1]),y:Iy({axis:s,ticks:o,bandSize:l,entry:T,index:M}),value:C,payload:T}}),S;return g||_?S=E.map(function(T){var M=Array.isArray(T.value)?T.value[0]:null;return x?{x:T.x,y:M!=null&&T.y!=null?s.scale(M):null}:{x:M!=null?i.scale(M):null,y:T.y}}):S=x?s.scale(v):i.scale(v),gd({points:E,baseLine:S,layout:p,isRange:_},f)});Ic(Ph,"renderDotItem",function(r,e){var n;if(ce.isValidElement(r))n=ce.cloneElement(r,e);else if(Wn(r))n=r(e);else{var i=mr("recharts-area-dot",typeof r!="boolean"?r.className:""),s=e.key,a=joe(e,MYe);n=ce.createElement(LA,lp({},a,{key:s,className:i}))}return n});function Hy(r){"@babel/helpers - typeof";return Hy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hy(r)}function DYe(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function LYe(r,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(r,Voe(i.key),i)}}function FYe(r,e,n){return e&&LYe(r.prototype,e),Object.defineProperty(r,"prototype",{writable:!1}),r}function BYe(r,e,n){return e=rM(e),jYe(r,$oe()?Reflect.construct(e,n||[],rM(r).constructor):e.apply(r,n))}function jYe(r,e){if(e&&(Hy(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return UYe(r)}function UYe(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function $oe(){try{var r=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return($oe=function(){return!!r})()}function rM(r){return rM=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},rM(r)}function zYe(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),e&&MB(r,e)}function MB(r,e){return MB=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,s){return i.__proto__=s,i},MB(r,e)}function Goe(r,e,n){return e=Voe(e),e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function Voe(r){var e=$Ye(r,"string");return Hy(e)=="symbol"?e:e+""}function $Ye(r,e){if(Hy(r)!="object"||!r)return r;var n=r[Symbol.toPrimitive];if(n!==void 0){var i=n.call(r,e);if(Hy(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(r)}var HA=function(r){function e(){return DYe(this,e),BYe(this,e,arguments)}return zYe(e,r),FYe(e,[{key:"render",value:function(){return null}}])}(ce.Component);Goe(HA,"displayName","ZAxis");Goe(HA,"defaultProps",{zAxisId:0,range:[64,64],scale:"auto",type:"number"});var GYe=["option","isActive"];function Fx(){return Fx=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])}return r},Fx.apply(this,arguments)}function VYe(r,e){if(r==null)return{};var n=HYe(r,e),i,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);for(s=0;s<a.length;s++)i=a[s],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(r,i)&&(n[i]=r[i])}return n}function HYe(r,e){if(r==null)return{};var n={};for(var i in r)if(Object.prototype.hasOwnProperty.call(r,i)){if(e.indexOf(i)>=0)continue;n[i]=r[i]}return n}function WYe(r){var e=r.option,n=r.isActive,i=VYe(r,GYe);return typeof e=="string"?ce.createElement(dB,Fx({option:ce.createElement(NA,Fx({type:e},i)),isActive:n,shapeType:"symbols"},i)):ce.createElement(dB,Fx({option:e,isActive:n,shapeType:"symbols"},i))}function Wy(r){"@babel/helpers - typeof";return Wy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wy(r)}function Bx(){return Bx=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])}return r},Bx.apply(this,arguments)}function iQ(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable})),n.push.apply(n,i)}return n}function el(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?iQ(Object(n),!0).forEach(function(i){Md(r,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):iQ(Object(n)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(n,i))})}return r}function qYe(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function sQ(r,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(r,Woe(i.key),i)}}function XYe(r,e,n){return e&&sQ(r.prototype,e),n&&sQ(r,n),Object.defineProperty(r,"prototype",{writable:!1}),r}function KYe(r,e,n){return e=iM(e),YYe(r,Hoe()?Reflect.construct(e,n||[],iM(r).constructor):e.apply(r,n))}function YYe(r,e){if(e&&(Wy(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ZYe(r)}function ZYe(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function Hoe(){try{var r=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Hoe=function(){return!!r})()}function iM(r){return iM=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},iM(r)}function QYe(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),e&&AB(r,e)}function AB(r,e){return AB=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,s){return i.__proto__=s,i},AB(r,e)}function Md(r,e,n){return e=Woe(e),e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function Woe(r){var e=JYe(r,"string");return Wy(e)=="symbol"?e:e+""}function JYe(r,e){if(Wy(r)!="object"||!r)return r;var n=r[Symbol.toPrimitive];if(n!==void 0){var i=n.call(r,e);if(Wy(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(r)}var WA=function(r){function e(){var n;qYe(this,e);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return n=KYe(this,e,[].concat(s)),Md(n,"state",{isAnimationFinished:!1}),Md(n,"handleAnimationEnd",function(){n.setState({isAnimationFinished:!0})}),Md(n,"handleAnimationStart",function(){n.setState({isAnimationFinished:!1})}),Md(n,"id",Vp("recharts-scatter-")),n}return QYe(e,r),XYe(e,[{key:"renderSymbolsStatically",value:function(i){var s=this,a=this.props,o=a.shape,l=a.activeShape,c=a.activeIndex,u=$n(this.props,!1);return i.map(function(h,d){var f=c===d,p=f?l:o,g=el(el({},u),h);return ce.createElement(Pr,Bx({className:"recharts-scatter-symbol",key:"symbol-".concat(h==null?void 0:h.cx,"-").concat(h==null?void 0:h.cy,"-").concat(h==null?void 0:h.size,"-").concat(d)},Db(s.props,h,d),{role:"img"}),ce.createElement(WYe,Bx({option:p,isActive:f,key:"symbol-".concat(d)},g)))})}},{key:"renderSymbolsWithAnimation",value:function(){var i=this,s=this.props,a=s.points,o=s.isAnimationActive,l=s.animationBegin,c=s.animationDuration,u=s.animationEasing,h=s.animationId,d=this.state.prevPoints;return ce.createElement(lc,{begin:l,duration:c,isActive:o,easing:u,from:{t:0},to:{t:1},key:"pie-".concat(h),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(f){var p=f.t,g=a.map(function(v,x){var _=d&&d[x];if(_){var E=Ui(_.cx,v.cx),S=Ui(_.cy,v.cy),T=Ui(_.size,v.size);return el(el({},v),{},{cx:E(p),cy:S(p),size:T(p)})}var M=Ui(0,v.size);return el(el({},v),{},{size:M(p)})});return ce.createElement(Pr,null,i.renderSymbolsStatically(g))})}},{key:"renderSymbols",value:function(){var i=this.props,s=i.points,a=i.isAnimationActive,o=this.state.prevPoints;return a&&s&&s.length&&(!o||!Op(o,s))?this.renderSymbolsWithAnimation():this.renderSymbolsStatically(s)}},{key:"renderErrorBar",value:function(){var i=this.props.isAnimationActive;if(i&&!this.state.isAnimationFinished)return null;var s=this.props,a=s.points,o=s.xAxis,l=s.yAxis,c=s.children,u=no(c,b0);return u?u.map(function(h,d){var f=h.props,p=f.direction,g=f.dataKey;return ce.cloneElement(h,{key:"".concat(p,"-").concat(g,"-").concat(a[d]),data:a,xAxis:o,yAxis:l,layout:p==="x"?"vertical":"horizontal",dataPointFormatter:function(x,_){return{x:x.cx,y:x.cy,value:p==="x"?+x.node.x:+x.node.y,errorVal:ms(x,_)}}})}):null}},{key:"renderLine",value:function(){var i=this.props,s=i.points,a=i.line,o=i.lineType,l=i.lineJointType,c=$n(this.props,!1),u=$n(a,!1),h,d;if(o==="joint")h=s.map(function(S){return{x:S.cx,y:S.cy}});else if(o==="fitting"){var f=d$e(s),p=f.xmin,g=f.xmax,v=f.a,x=f.b,_=function(T){return v*T+x};h=[{x:p,y:_(p)},{x:g,y:_(g)}]}var E=el(el(el({},c),{},{fill:"none",stroke:c&&c.fill},u),{},{points:h});return ce.isValidElement(a)?d=ce.cloneElement(a,E):Wn(a)?d=a(E):d=ce.createElement(yp,Bx({},E,{type:l})),ce.createElement(Pr,{className:"recharts-scatter-line",key:"recharts-scatter-line"},d)}},{key:"render",value:function(){var i=this.props,s=i.hide,a=i.points,o=i.line,l=i.className,c=i.xAxis,u=i.yAxis,h=i.left,d=i.top,f=i.width,p=i.height,g=i.id,v=i.isAnimationActive;if(s||!a||!a.length)return null;var x=this.state.isAnimationFinished,_=mr("recharts-scatter",l),E=c&&c.allowDataOverflow,S=u&&u.allowDataOverflow,T=E||S,M=Gn(g)?this.id:g;return ce.createElement(Pr,{className:_,clipPath:T?"url(#clipPath-".concat(M,")"):null},E||S?ce.createElement("defs",null,ce.createElement("clipPath",{id:"clipPath-".concat(M)},ce.createElement("rect",{x:E?h:h-f/2,y:S?d:d-p/2,width:E?f:f*2,height:S?p:p*2}))):null,o&&this.renderLine(),this.renderErrorBar(),ce.createElement(Pr,{key:"recharts-scatter-symbols"},this.renderSymbols()),(!v||x)&&$c.renderCallByParent(this.props,a))}}],[{key:"getDerivedStateFromProps",value:function(i,s){return i.animationId!==s.prevAnimationId?{prevAnimationId:i.animationId,curPoints:i.points,prevPoints:s.curPoints}:i.points!==s.curPoints?{curPoints:i.points}:null}}])}(X.PureComponent);Md(WA,"displayName","Scatter");Md(WA,"defaultProps",{xAxisId:0,yAxisId:0,zAxisId:0,legendType:"circle",lineType:"joint",lineJointType:"linear",data:[],shape:"circle",hide:!1,isAnimationActive:!rf.isSsr,animationBegin:0,animationDuration:400,animationEasing:"linear"});Md(WA,"getComposedData",function(r){var e=r.xAxis,n=r.yAxis,i=r.zAxis,s=r.item,a=r.displayedData,o=r.xAxisTicks,l=r.yAxisTicks,c=r.offset,u=s.props.tooltipType,h=no(s.props.children,Pz),d=Gn(e.dataKey)?s.props.dataKey:e.dataKey,f=Gn(n.dataKey)?s.props.dataKey:n.dataKey,p=i&&i.dataKey,g=i?i.range:HA.defaultProps.range,v=g&&g[0],x=e.scale.bandwidth?e.scale.bandwidth():0,_=n.scale.bandwidth?n.scale.bandwidth():0,E=a.map(function(S,T){var M=ms(S,d),C=ms(S,f),A=!Gn(p)&&ms(S,p)||"-",P=[{name:Gn(e.dataKey)?s.props.name:e.name||e.dataKey,unit:e.unit||"",value:M,payload:S,dataKey:d,type:u},{name:Gn(n.dataKey)?s.props.name:n.name||n.dataKey,unit:n.unit||"",value:C,payload:S,dataKey:f,type:u}];A!=="-"&&P.push({name:i.name||i.dataKey,unit:i.unit||"",value:A,payload:S,dataKey:p,type:u});var R=Iy({axis:e,ticks:o,bandSize:x,entry:S,index:T,dataKey:d}),O=Iy({axis:n,ticks:l,bandSize:_,entry:S,index:T,dataKey:f}),D=A!=="-"?i.scale(A):v,F=Math.sqrt(Math.max(D,0)/Math.PI);return el(el({},S),{},{cx:R,cy:O,x:R-F,y:O-F,xAxis:e,yAxis:n,zAxis:i,width:2*F,height:2*F,size:D,node:{x:M,y:C,z:A},tooltipPayload:P,tooltipPosition:{x:R,y:O},payload:S},h&&h[T]&&h[T].props)});return el({points:E},c)});function qy(r){"@babel/helpers - typeof";return qy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qy(r)}function eZe(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function tZe(r,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(r,Koe(i.key),i)}}function nZe(r,e,n){return e&&tZe(r.prototype,e),Object.defineProperty(r,"prototype",{writable:!1}),r}function rZe(r,e,n){return e=sM(e),iZe(r,qoe()?Reflect.construct(e,n||[],sM(r).constructor):e.apply(r,n))}function iZe(r,e){if(e&&(qy(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return sZe(r)}function sZe(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function qoe(){try{var r=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(qoe=function(){return!!r})()}function sM(r){return sM=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},sM(r)}function aZe(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),e&&CB(r,e)}function CB(r,e){return CB=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,s){return i.__proto__=s,i},CB(r,e)}function Xoe(r,e,n){return e=Koe(e),e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function Koe(r){var e=oZe(r,"string");return qy(e)=="symbol"?e:e+""}function oZe(r,e){if(qy(r)!="object"||!r)return r;var n=r[Symbol.toPrimitive];if(n!==void 0){var i=n.call(r,e);if(qy(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(r)}function NB(){return NB=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])}return r},NB.apply(this,arguments)}function lZe(r){var e=r.xAxisId,n=Bz(),i=jz(),s=Toe(e);return s==null?null:ce.createElement(_0,NB({},s,{className:mr("recharts-".concat(s.axisType," ").concat(s.axisType),s.className),viewBox:{x:0,y:0,width:n,height:i},ticksGenerator:function(o){return th(o,!0)}}))}var Dc=function(r){function e(){return eZe(this,e),rZe(this,e,arguments)}return aZe(e,r),nZe(e,[{key:"render",value:function(){return ce.createElement(lZe,this.props)}}])}(ce.Component);Xoe(Dc,"displayName","XAxis");Xoe(Dc,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function Xy(r){"@babel/helpers - typeof";return Xy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xy(r)}function cZe(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function uZe(r,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(r,Qoe(i.key),i)}}function hZe(r,e,n){return e&&uZe(r.prototype,e),Object.defineProperty(r,"prototype",{writable:!1}),r}function dZe(r,e,n){return e=aM(e),fZe(r,Yoe()?Reflect.construct(e,n||[],aM(r).constructor):e.apply(r,n))}function fZe(r,e){if(e&&(Xy(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return pZe(r)}function pZe(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function Yoe(){try{var r=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Yoe=function(){return!!r})()}function aM(r){return aM=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},aM(r)}function mZe(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),e&&PB(r,e)}function PB(r,e){return PB=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,s){return i.__proto__=s,i},PB(r,e)}function Zoe(r,e,n){return e=Qoe(e),e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function Qoe(r){var e=gZe(r,"string");return Xy(e)=="symbol"?e:e+""}function gZe(r,e){if(Xy(r)!="object"||!r)return r;var n=r[Symbol.toPrimitive];if(n!==void 0){var i=n.call(r,e);if(Xy(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(r)}function RB(){return RB=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])}return r},RB.apply(this,arguments)}var yZe=function(e){var n=e.yAxisId,i=Bz(),s=jz(),a=Eoe(n);return a==null?null:ce.createElement(_0,RB({},a,{className:mr("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:i,height:s},ticksGenerator:function(l){return th(l,!0)}}))},Lc=function(r){function e(){return cZe(this,e),dZe(this,e,arguments)}return mZe(e,r),hZe(e,[{key:"render",value:function(){return ce.createElement(yZe,this.props)}}])}(ce.Component);Zoe(Lc,"displayName","YAxis");Zoe(Lc,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function aQ(r){return _Ze(r)||bZe(r)||xZe(r)||vZe()}function vZe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xZe(r,e){if(r){if(typeof r=="string")return OB(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return OB(r,e)}}function bZe(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function _Ze(r){if(Array.isArray(r))return OB(r)}function OB(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=r[n];return i}var kB=function(e,n,i,s,a){var o=no(e,zz),l=no(e,$A),c=[].concat(aQ(o),aQ(l)),u=no(e,VA),h="".concat(s,"Id"),d=s[0],f=n;if(c.length&&(f=c.reduce(function(v,x){if(x.props[h]===i&&Gc(x.props,"extendDomain")&&bt(x.props[d])){var _=x.props[d];return[Math.min(v[0],_),Math.max(v[1],_)]}return v},f)),u.length){var p="".concat(d,"1"),g="".concat(d,"2");f=u.reduce(function(v,x){if(x.props[h]===i&&Gc(x.props,"extendDomain")&&bt(x.props[p])&&bt(x.props[g])){var _=x.props[p],E=x.props[g];return[Math.min(v[0],_,E),Math.max(v[1],_,E)]}return v},f)}return a&&a.length&&(f=a.reduce(function(v,x){return bt(x)?[Math.min(v[0],x),Math.max(v[1],x)]:v},f)),f},NL={exports:{}},oQ;function wZe(){return oQ||(oQ=1,function(r){var e=Object.prototype.hasOwnProperty,n="~";function i(){}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(n=!1));function s(c,u,h){this.fn=c,this.context=u,this.once=h||!1}function a(c,u,h,d,f){if(typeof h!="function")throw new TypeError("The listener must be a function");var p=new s(h,d||c,f),g=n?n+u:u;return c._events[g]?c._events[g].fn?c._events[g]=[c._events[g],p]:c._events[g].push(p):(c._events[g]=p,c._eventsCount++),c}function o(c,u){--c._eventsCount===0?c._events=new i:delete c._events[u]}function l(){this._events=new i,this._eventsCount=0}l.prototype.eventNames=function(){var u=[],h,d;if(this._eventsCount===0)return u;for(d in h=this._events)e.call(h,d)&&u.push(n?d.slice(1):d);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(h)):u},l.prototype.listeners=function(u){var h=n?n+u:u,d=this._events[h];if(!d)return[];if(d.fn)return[d.fn];for(var f=0,p=d.length,g=new Array(p);f<p;f++)g[f]=d[f].fn;return g},l.prototype.listenerCount=function(u){var h=n?n+u:u,d=this._events[h];return d?d.fn?1:d.length:0},l.prototype.emit=function(u,h,d,f,p,g){var v=n?n+u:u;if(!this._events[v])return!1;var x=this._events[v],_=arguments.length,E,S;if(x.fn){switch(x.once&&this.removeListener(u,x.fn,void 0,!0),_){case 1:return x.fn.call(x.context),!0;case 2:return x.fn.call(x.context,h),!0;case 3:return x.fn.call(x.context,h,d),!0;case 4:return x.fn.call(x.context,h,d,f),!0;case 5:return x.fn.call(x.context,h,d,f,p),!0;case 6:return x.fn.call(x.context,h,d,f,p,g),!0}for(S=1,E=new Array(_-1);S<_;S++)E[S-1]=arguments[S];x.fn.apply(x.context,E)}else{var T=x.length,M;for(S=0;S<T;S++)switch(x[S].once&&this.removeListener(u,x[S].fn,void 0,!0),_){case 1:x[S].fn.call(x[S].context);break;case 2:x[S].fn.call(x[S].context,h);break;case 3:x[S].fn.call(x[S].context,h,d);break;case 4:x[S].fn.call(x[S].context,h,d,f);break;default:if(!E)for(M=1,E=new Array(_-1);M<_;M++)E[M-1]=arguments[M];x[S].fn.apply(x[S].context,E)}}return!0},l.prototype.on=function(u,h,d){return a(this,u,h,d,!1)},l.prototype.once=function(u,h,d){return a(this,u,h,d,!0)},l.prototype.removeListener=function(u,h,d,f){var p=n?n+u:u;if(!this._events[p])return this;if(!h)return o(this,p),this;var g=this._events[p];if(g.fn)g.fn===h&&(!f||g.once)&&(!d||g.context===d)&&o(this,p);else{for(var v=0,x=[],_=g.length;v<_;v++)(g[v].fn!==h||f&&!g[v].once||d&&g[v].context!==d)&&x.push(g[v]);x.length?this._events[p]=x.length===1?x[0]:x:o(this,p)}return this},l.prototype.removeAllListeners=function(u){var h;return u?(h=n?n+u:u,this._events[h]&&o(this,h)):(this._events=new i,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=n,l.EventEmitter=l,r.exports=l}(NL)),NL.exports}var SZe=wZe();const TZe=_r(SZe);var PL=new TZe,RL="recharts.syncMouseEvents";function u_(r){"@babel/helpers - typeof";return u_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u_(r)}function EZe(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function MZe(r,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(r,Joe(i.key),i)}}function AZe(r,e,n){return e&&MZe(r.prototype,e),Object.defineProperty(r,"prototype",{writable:!1}),r}function OL(r,e,n){return e=Joe(e),e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function Joe(r){var e=CZe(r,"string");return u_(e)=="symbol"?e:e+""}function CZe(r,e){if(u_(r)!="object"||!r)return r;var n=r[Symbol.toPrimitive];if(n!==void 0){var i=n.call(r,e);if(u_(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(r)}var NZe=function(){function r(){EZe(this,r),OL(this,"activeIndex",0),OL(this,"coordinateList",[]),OL(this,"layout","horizontal")}return AZe(r,[{key:"setDetails",value:function(n){var i,s=n.coordinateList,a=s===void 0?null:s,o=n.container,l=o===void 0?null:o,c=n.layout,u=c===void 0?null:c,h=n.offset,d=h===void 0?null:h,f=n.mouseHandlerCallback,p=f===void 0?null:f;this.coordinateList=(i=a??this.coordinateList)!==null&&i!==void 0?i:[],this.container=l??this.container,this.layout=u??this.layout,this.offset=d??this.offset,this.mouseHandlerCallback=p??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(n){if(this.coordinateList.length!==0)switch(n.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(n){this.activeIndex=n}},{key:"spoofMouse",value:function(){var n,i;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var s=this.container.getBoundingClientRect(),a=s.x,o=s.y,l=s.height,c=this.coordinateList[this.activeIndex].coordinate,u=((n=window)===null||n===void 0?void 0:n.scrollX)||0,h=((i=window)===null||i===void 0?void 0:i.scrollY)||0,d=a+c+u,f=o+this.offset.top+l/2+h;this.mouseHandlerCallback({pageX:d,pageY:f})}}}])}();function PZe(r,e,n){if(n==="number"&&e===!0&&Array.isArray(r)){var i=r==null?void 0:r[0],s=r==null?void 0:r[1];if(i&&s&&bt(i)&&bt(s))return!0}return!1}function RZe(r,e,n,i){var s=i/2;return{stroke:"none",fill:"#ccc",x:r==="horizontal"?e.x-s:n.left+.5,y:r==="horizontal"?n.top+.5:e.y-s,width:r==="horizontal"?i:n.width-1,height:r==="horizontal"?n.height-1:i}}function ele(r){var e=r.cx,n=r.cy,i=r.radius,s=r.startAngle,a=r.endAngle,o=Hs(e,n,i,s),l=Hs(e,n,i,a);return{points:[o,l],cx:e,cy:n,radius:i,startAngle:s,endAngle:a}}function OZe(r,e,n){var i,s,a,o;if(r==="horizontal")i=e.x,a=i,s=n.top,o=n.top+n.height;else if(r==="vertical")s=e.y,o=s,i=n.left,a=n.left+n.width;else if(e.cx!=null&&e.cy!=null)if(r==="centric"){var l=e.cx,c=e.cy,u=e.innerRadius,h=e.outerRadius,d=e.angle,f=Hs(l,c,u,d),p=Hs(l,c,h,d);i=f.x,s=f.y,a=p.x,o=p.y}else return ele(e);return[{x:i,y:s},{x:a,y:o}]}function h_(r){"@babel/helpers - typeof";return h_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h_(r)}function lQ(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable})),n.push.apply(n,i)}return n}function KS(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?lQ(Object(n),!0).forEach(function(i){kZe(r,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):lQ(Object(n)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(n,i))})}return r}function kZe(r,e,n){return e=IZe(e),e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function IZe(r){var e=DZe(r,"string");return h_(e)=="symbol"?e:e+""}function DZe(r,e){if(h_(r)!="object"||!r)return r;var n=r[Symbol.toPrimitive];if(n!==void 0){var i=n.call(r,e);if(h_(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function LZe(r){var e,n,i=r.element,s=r.tooltipEventType,a=r.isActive,o=r.activeCoordinate,l=r.activePayload,c=r.offset,u=r.activeTooltipIndex,h=r.tooltipAxisBandSize,d=r.layout,f=r.chartName,p=(e=i.props.cursor)!==null&&e!==void 0?e:(n=i.type.defaultProps)===null||n===void 0?void 0:n.cursor;if(!i||!p||!a||!o||f!=="ScatterChart"&&s!=="axis")return null;var g,v=yp;if(f==="ScatterChart")g=o,v=a7e;else if(f==="BarChart")g=RZe(d,o,c,h),v=Iz;else if(d==="radial"){var x=ele(o),_=x.cx,E=x.cy,S=x.radius,T=x.startAngle,M=x.endAngle;g={cx:_,cy:E,startAngle:T,endAngle:M,innerRadius:S,outerRadius:S},v=eoe}else g={points:OZe(d,o,c)},v=yp;var C=KS(KS(KS(KS({stroke:"#ccc",pointerEvents:"none"},c),g),$n(p,!1)),{},{payload:l,payloadIndex:u,className:mr("recharts-tooltip-cursor",p.className)});return X.isValidElement(p)?X.cloneElement(p,C):X.createElement(v,C)}var FZe=["item"],BZe=["children","className","width","height","style","compact","title","desc"];function Ky(r){"@babel/helpers - typeof";return Ky=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ky(r)}function kg(){return kg=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])}return r},kg.apply(this,arguments)}function cQ(r,e){return zZe(r)||UZe(r,e)||nle(r,e)||jZe()}function jZe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function UZe(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var i,s,a,o,l=[],c=!0,u=!1;try{if(a=(n=n.call(r)).next,e!==0)for(;!(c=(i=a.call(n)).done)&&(l.push(i.value),l.length!==e);c=!0);}catch(h){u=!0,s=h}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function zZe(r){if(Array.isArray(r))return r}function uQ(r,e){if(r==null)return{};var n=$Ze(r,e),i,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);for(s=0;s<a.length;s++)i=a[s],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(r,i)&&(n[i]=r[i])}return n}function $Ze(r,e){if(r==null)return{};var n={};for(var i in r)if(Object.prototype.hasOwnProperty.call(r,i)){if(e.indexOf(i)>=0)continue;n[i]=r[i]}return n}function GZe(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function VZe(r,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(r,rle(i.key),i)}}function HZe(r,e,n){return e&&VZe(r.prototype,e),Object.defineProperty(r,"prototype",{writable:!1}),r}function WZe(r,e,n){return e=oM(e),qZe(r,tle()?Reflect.construct(e,n||[],oM(r).constructor):e.apply(r,n))}function qZe(r,e){if(e&&(Ky(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return XZe(r)}function XZe(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function tle(){try{var r=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(tle=function(){return!!r})()}function oM(r){return oM=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},oM(r)}function KZe(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),e&&IB(r,e)}function IB(r,e){return IB=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,s){return i.__proto__=s,i},IB(r,e)}function Yy(r){return QZe(r)||ZZe(r)||nle(r)||YZe()}function YZe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nle(r,e){if(r){if(typeof r=="string")return DB(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return DB(r,e)}}function ZZe(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function QZe(r){if(Array.isArray(r))return DB(r)}function DB(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=r[n];return i}function hQ(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable})),n.push.apply(n,i)}return n}function qe(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?hQ(Object(n),!0).forEach(function(i){Cn(r,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):hQ(Object(n)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(n,i))})}return r}function Cn(r,e,n){return e=rle(e),e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function rle(r){var e=JZe(r,"string");return Ky(e)=="symbol"?e:e+""}function JZe(r,e){if(Ky(r)!="object"||!r)return r;var n=r[Symbol.toPrimitive];if(n!==void 0){var i=n.call(r,e);if(Ky(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}var eQe={xAxis:["bottom","top"],yAxis:["left","right"]},tQe={width:"100%",height:"100%"},ile={x:0,y:0};function YS(r){return r}var nQe=function(e,n){return n==="horizontal"?e.x:n==="vertical"?e.y:n==="centric"?e.angle:e.radius},rQe=function(e,n,i,s){var a=n.find(function(h){return h&&h.index===i});if(a){if(e==="horizontal")return{x:a.coordinate,y:s.y};if(e==="vertical")return{x:s.x,y:a.coordinate};if(e==="centric"){var o=a.coordinate,l=s.radius;return qe(qe(qe({},s),Hs(s.cx,s.cy,l,o)),{},{angle:o,radius:l})}var c=a.coordinate,u=s.angle;return qe(qe(qe({},s),Hs(s.cx,s.cy,c,u)),{},{angle:u,radius:c})}return ile},qA=function(e,n){var i=n.graphicalItems,s=n.dataStartIndex,a=n.dataEndIndex,o=(i??[]).reduce(function(l,c){var u=c.props.data;return u&&u.length?[].concat(Yy(l),Yy(u)):l},[]);return o.length>0?o:e&&e.length&&bt(s)&&bt(a)?e.slice(s,a+1):[]};function sle(r){return r==="number"?[0,"auto"]:void 0}var LB=function(e,n,i,s){var a=e.graphicalItems,o=e.tooltipAxis,l=qA(n,e);return i<0||!a||!a.length||i>=l.length?null:a.reduce(function(c,u){var h,d=(h=u.props.data)!==null&&h!==void 0?h:n;d&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=i&&(d=d.slice(e.dataStartIndex,e.dataEndIndex+1));var f;if(o.dataKey&&!o.allowDuplicatedCategory){var p=d===void 0?l:d;f=bE(p,o.dataKey,s)}else f=d&&d[i]||l[i];return f?[].concat(Yy(c),[Zae(u,f)]):c},[])},dQ=function(e,n,i,s){var a=s||{x:e.chartX,y:e.chartY},o=nQe(a,i),l=e.orderedTooltipTicks,c=e.tooltipAxis,u=e.tooltipTicks,h=qHe(o,l,u,c);if(h>=0&&u){var d=u[h]&&u[h].value,f=LB(e,n,h,d),p=rQe(i,l,h,a);return{activeTooltipIndex:h,activeLabel:d,activePayload:f,activeCoordinate:p}}return null},iQe=function(e,n){var i=n.axes,s=n.graphicalItems,a=n.axisType,o=n.axisIdKey,l=n.stackGroups,c=n.dataStartIndex,u=n.dataEndIndex,h=e.layout,d=e.children,f=e.stackOffset,p=Xae(h,a);return i.reduce(function(g,v){var x,_=v.type.defaultProps!==void 0?qe(qe({},v.type.defaultProps),v.props):v.props,E=_.type,S=_.dataKey,T=_.allowDataOverflow,M=_.allowDuplicatedCategory,C=_.scale,A=_.ticks,P=_.includeHidden,R=_[o];if(g[R])return g;var O=qA(e.data,{graphicalItems:s.filter(function(ue){var be,ee=o in ue.props?ue.props[o]:(be=ue.type.defaultProps)===null||be===void 0?void 0:be[o];return ee===R}),dataStartIndex:c,dataEndIndex:u}),D=O.length,F,U,B;PZe(_.domain,T,E)&&(F=YF(_.domain,null,T),p&&(E==="number"||C!=="auto")&&(B=Ix(O,S,"category")));var W=sle(E);if(!F||F.length===0){var j,$=(j=_.domain)!==null&&j!==void 0?j:W;if(S){if(F=Ix(O,S,E),E==="category"&&p){var z=h$e(F);M&&z?(U=F,F=HE(0,D)):M||(F=wY($,F,v).reduce(function(ue,be){return ue.indexOf(be)>=0?ue:[].concat(Yy(ue),[be])},[]))}else if(E==="category")M?F=F.filter(function(ue){return ue!==""&&!Gn(ue)}):F=wY($,F,v).reduce(function(ue,be){return ue.indexOf(be)>=0||be===""||Gn(be)?ue:[].concat(Yy(ue),[be])},[]);else if(E==="number"){var Z=QHe(O,s.filter(function(ue){var be,ee,le=o in ue.props?ue.props[o]:(be=ue.type.defaultProps)===null||be===void 0?void 0:be[o],oe="hide"in ue.props?ue.props.hide:(ee=ue.type.defaultProps)===null||ee===void 0?void 0:ee.hide;return le===R&&(P||!oe)}),S,a,h);Z&&(F=Z)}p&&(E==="number"||C!=="auto")&&(B=Ix(O,S,"category"))}else p?F=HE(0,D):l&&l[R]&&l[R].hasStack&&E==="number"?F=f==="expand"?[0,1]:Yae(l[R].stackGroups,c,u):F=qae(O,s.filter(function(ue){var be=o in ue.props?ue.props[o]:ue.type.defaultProps[o],ee="hide"in ue.props?ue.props.hide:ue.type.defaultProps.hide;return be===R&&(P||!ee)}),E,h,!0);if(E==="number")F=kB(d,F,R,a,A),$&&(F=YF($,F,T));else if(E==="category"&&$){var se=$,q=F.every(function(ue){return se.indexOf(ue)>=0});q&&(F=se)}}return qe(qe({},g),{},Cn({},R,qe(qe({},_),{},{axisType:a,domain:F,categoricalDomain:B,duplicateDomain:U,originalDomain:(x=_.domain)!==null&&x!==void 0?x:W,isCategorical:p,layout:h})))},{})},sQe=function(e,n){var i=n.graphicalItems,s=n.Axis,a=n.axisType,o=n.axisIdKey,l=n.stackGroups,c=n.dataStartIndex,u=n.dataEndIndex,h=e.layout,d=e.children,f=qA(e.data,{graphicalItems:i,dataStartIndex:c,dataEndIndex:u}),p=f.length,g=Xae(h,a),v=-1;return i.reduce(function(x,_){var E=_.type.defaultProps!==void 0?qe(qe({},_.type.defaultProps),_.props):_.props,S=E[o],T=sle("number");if(!x[S]){v++;var M;return g?M=HE(0,p):l&&l[S]&&l[S].hasStack?(M=Yae(l[S].stackGroups,c,u),M=kB(d,M,S,a)):(M=YF(T,qae(f,i.filter(function(C){var A,P,R=o in C.props?C.props[o]:(A=C.type.defaultProps)===null||A===void 0?void 0:A[o],O="hide"in C.props?C.props.hide:(P=C.type.defaultProps)===null||P===void 0?void 0:P.hide;return R===S&&!O}),"number",h),s.defaultProps.allowDataOverflow),M=kB(d,M,S,a)),qe(qe({},x),{},Cn({},S,qe(qe({axisType:a},s.defaultProps),{},{hide:!0,orientation:pl(eQe,"".concat(a,".").concat(v%2),null),domain:M,originalDomain:T,isCategorical:g,layout:h})))}return x},{})},aQe=function(e,n){var i=n.axisType,s=i===void 0?"xAxis":i,a=n.AxisComp,o=n.graphicalItems,l=n.stackGroups,c=n.dataStartIndex,u=n.dataEndIndex,h=e.children,d="".concat(s,"Id"),f=no(h,a),p={};return f&&f.length?p=iQe(e,{axes:f,graphicalItems:o,axisType:s,axisIdKey:d,stackGroups:l,dataStartIndex:c,dataEndIndex:u}):o&&o.length&&(p=sQe(e,{Axis:a,graphicalItems:o,axisType:s,axisIdKey:d,stackGroups:l,dataStartIndex:c,dataEndIndex:u})),p},oQe=function(e){var n=_d(e),i=th(n,!1,!0);return{tooltipTicks:i,orderedTooltipTicks:Cz(i,function(s){return s.coordinate}),tooltipAxis:n,tooltipAxisBandSize:LE(n,i)}},fQ=function(e){var n=e.children,i=e.defaultShowTooltip,s=Co(n,Fy),a=0,o=0;return e.data&&e.data.length!==0&&(o=e.data.length-1),s&&s.props&&(s.props.startIndex>=0&&(a=s.props.startIndex),s.props.endIndex>=0&&(o=s.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:a,dataEndIndex:o,activeTooltipIndex:-1,isTooltipActive:!!i}},lQe=function(e){return!e||!e.length?!1:e.some(function(n){var i=uh(n&&n.type);return i&&i.indexOf("Bar")>=0})},pQ=function(e){return e==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:e==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:e==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},cQe=function(e,n){var i=e.props,s=e.graphicalItems,a=e.xAxisMap,o=a===void 0?{}:a,l=e.yAxisMap,c=l===void 0?{}:l,u=i.width,h=i.height,d=i.children,f=i.margin||{},p=Co(d,Fy),g=Co(d,Oc),v=Object.keys(c).reduce(function(M,C){var A=c[C],P=A.orientation;return!A.mirror&&!A.hide?qe(qe({},M),{},Cn({},P,M[P]+A.width)):M},{left:f.left||0,right:f.right||0}),x=Object.keys(o).reduce(function(M,C){var A=o[C],P=A.orientation;return!A.mirror&&!A.hide?qe(qe({},M),{},Cn({},P,pl(M,"".concat(P))+A.height)):M},{top:f.top||0,bottom:f.bottom||0}),_=qe(qe({},x),v),E=_.bottom;p&&(_.bottom+=p.props.height||Fy.defaultProps.height),g&&n&&(_=YHe(_,s,i,n));var S=u-_.left-_.right,T=h-_.top-_.bottom;return qe(qe({brushBottom:E},_),{},{width:Math.max(S,0),height:Math.max(T,0)})},uQe=function(e,n){if(n==="xAxis")return e[n].width;if(n==="yAxis")return e[n].height},XA=function(e){var n=e.chartName,i=e.GraphicalChild,s=e.defaultTooltipEventType,a=s===void 0?"axis":s,o=e.validateTooltipEventTypes,l=o===void 0?["axis"]:o,c=e.axisComponents,u=e.legendContent,h=e.formatAxisMap,d=e.defaultProps,f=function(_,E){var S=E.graphicalItems,T=E.stackGroups,M=E.offset,C=E.updateId,A=E.dataStartIndex,P=E.dataEndIndex,R=_.barSize,O=_.layout,D=_.barGap,F=_.barCategoryGap,U=_.maxBarSize,B=pQ(O),W=B.numericAxisName,j=B.cateAxisName,$=lQe(S),z=[];return S.forEach(function(Z,se){var q=qA(_.data,{graphicalItems:[Z],dataStartIndex:A,dataEndIndex:P}),ue=Z.type.defaultProps!==void 0?qe(qe({},Z.type.defaultProps),Z.props):Z.props,be=ue.dataKey,ee=ue.maxBarSize,le=ue["".concat(W,"Id")],oe=ue["".concat(j,"Id")],fe={},Se=c.reduce(function(he,Q){var Re=E["".concat(Q.axisType,"Map")],Ze=ue["".concat(Q.axisType,"Id")];Re&&Re[Ze]||Q.axisType==="zAxis"||Ip();var Je=Re[Ze];return qe(qe({},he),{},Cn(Cn({},Q.axisType,Je),"".concat(Q.axisType,"Ticks"),th(Je)))},fe),we=Se[j],Le=Se["".concat(j,"Ticks")],et=T&&T[le]&&T[le].hasStack&&uWe(Z,T[le].stackGroups),Fe=uh(Z.type).indexOf("Bar")>=0,Tt=LE(we,Le),me=[],En=$&&XHe({barSize:R,stackGroups:T,totalSize:uQe(Se,j)});if(Fe){var Wt,Jt,zt=Gn(ee)?U:ee,Yn=(Wt=(Jt=LE(we,Le,!0))!==null&&Jt!==void 0?Jt:zt)!==null&&Wt!==void 0?Wt:0;me=KHe({barGap:D,barCategoryGap:F,bandSize:Yn!==Tt?Yn:Tt,sizeList:En[oe],maxBarSize:zt}),Yn!==Tt&&(me=me.map(function(he){return qe(qe({},he),{},{position:qe(qe({},he.position),{},{offset:he.position.offset-Yn/2})})}))}var Ft=Z&&Z.type&&Z.type.getComposedData;Ft&&z.push({props:qe(qe({},Ft(qe(qe({},Se),{},{displayedData:q,props:_,dataKey:be,item:Z,bandSize:Tt,barPosition:me,offset:M,stackedData:et,layout:O,dataStartIndex:A,dataEndIndex:P}))),{},Cn(Cn(Cn({key:Z.key||"item-".concat(se)},W,Se[W]),j,Se[j]),"animationId",C)),childIndex:S$e(Z,_.children),item:Z})}),z},p=function(_,E){var S=_.props,T=_.dataStartIndex,M=_.dataEndIndex,C=_.updateId;if(!b7({props:S}))return null;var A=S.children,P=S.layout,R=S.stackOffset,O=S.data,D=S.reverseStackOrder,F=pQ(P),U=F.numericAxisName,B=F.cateAxisName,W=no(A,i),j=oWe(O,W,"".concat(U,"Id"),"".concat(B,"Id"),R,D),$=c.reduce(function(ue,be){var ee="".concat(be.axisType,"Map");return qe(qe({},ue),{},Cn({},ee,aQe(S,qe(qe({},be),{},{graphicalItems:W,stackGroups:be.axisType===U&&j,dataStartIndex:T,dataEndIndex:M}))))},{}),z=cQe(qe(qe({},$),{},{props:S,graphicalItems:W}),E==null?void 0:E.legendBBox);Object.keys($).forEach(function(ue){$[ue]=h(S,$[ue],z,ue.replace("Map",""),n)});var Z=$["".concat(B,"Map")],se=oQe(Z),q=f(S,qe(qe({},$),{},{dataStartIndex:T,dataEndIndex:M,updateId:C,graphicalItems:W,stackGroups:j,offset:z}));return qe(qe({formattedGraphicalItems:q,graphicalItems:W,offset:z,stackGroups:j},se),$)},g=function(x){function _(E){var S,T,M;return GZe(this,_),M=WZe(this,_,[E]),Cn(M,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),Cn(M,"accessibilityManager",new NZe),Cn(M,"handleLegendBBoxUpdate",function(C){if(C){var A=M.state,P=A.dataStartIndex,R=A.dataEndIndex,O=A.updateId;M.setState(qe({legendBBox:C},p({props:M.props,dataStartIndex:P,dataEndIndex:R,updateId:O},qe(qe({},M.state),{},{legendBBox:C}))))}}),Cn(M,"handleReceiveSyncEvent",function(C,A,P){if(M.props.syncId===C){if(P===M.eventEmitterSymbol&&typeof M.props.syncMethod!="function")return;M.applySyncEvent(A)}}),Cn(M,"handleBrushChange",function(C){var A=C.startIndex,P=C.endIndex;if(A!==M.state.dataStartIndex||P!==M.state.dataEndIndex){var R=M.state.updateId;M.setState(function(){return qe({dataStartIndex:A,dataEndIndex:P},p({props:M.props,dataStartIndex:A,dataEndIndex:P,updateId:R},M.state))}),M.triggerSyncEvent({dataStartIndex:A,dataEndIndex:P})}}),Cn(M,"handleMouseEnter",function(C){var A=M.getMouseInfo(C);if(A){var P=qe(qe({},A),{},{isTooltipActive:!0});M.setState(P),M.triggerSyncEvent(P);var R=M.props.onMouseEnter;Wn(R)&&R(P,C)}}),Cn(M,"triggeredAfterMouseMove",function(C){var A=M.getMouseInfo(C),P=A?qe(qe({},A),{},{isTooltipActive:!0}):{isTooltipActive:!1};M.setState(P),M.triggerSyncEvent(P);var R=M.props.onMouseMove;Wn(R)&&R(P,C)}),Cn(M,"handleItemMouseEnter",function(C){M.setState(function(){return{isTooltipActive:!0,activeItem:C,activePayload:C.tooltipPayload,activeCoordinate:C.tooltipPosition||{x:C.cx,y:C.cy}}})}),Cn(M,"handleItemMouseLeave",function(){M.setState(function(){return{isTooltipActive:!1}})}),Cn(M,"handleMouseMove",function(C){C.persist(),M.throttleTriggeredAfterMouseMove(C)}),Cn(M,"handleMouseLeave",function(C){M.throttleTriggeredAfterMouseMove.cancel();var A={isTooltipActive:!1};M.setState(A),M.triggerSyncEvent(A);var P=M.props.onMouseLeave;Wn(P)&&P(A,C)}),Cn(M,"handleOuterEvent",function(C){var A=w$e(C),P=pl(M.props,"".concat(A));if(A&&Wn(P)){var R,O;/.*touch.*/i.test(A)?O=M.getMouseInfo(C.changedTouches[0]):O=M.getMouseInfo(C),P((R=O)!==null&&R!==void 0?R:{},C)}}),Cn(M,"handleClick",function(C){var A=M.getMouseInfo(C);if(A){var P=qe(qe({},A),{},{isTooltipActive:!0});M.setState(P),M.triggerSyncEvent(P);var R=M.props.onClick;Wn(R)&&R(P,C)}}),Cn(M,"handleMouseDown",function(C){var A=M.props.onMouseDown;if(Wn(A)){var P=M.getMouseInfo(C);A(P,C)}}),Cn(M,"handleMouseUp",function(C){var A=M.props.onMouseUp;if(Wn(A)){var P=M.getMouseInfo(C);A(P,C)}}),Cn(M,"handleTouchMove",function(C){C.changedTouches!=null&&C.changedTouches.length>0&&M.throttleTriggeredAfterMouseMove(C.changedTouches[0])}),Cn(M,"handleTouchStart",function(C){C.changedTouches!=null&&C.changedTouches.length>0&&M.handleMouseDown(C.changedTouches[0])}),Cn(M,"handleTouchEnd",function(C){C.changedTouches!=null&&C.changedTouches.length>0&&M.handleMouseUp(C.changedTouches[0])}),Cn(M,"handleDoubleClick",function(C){var A=M.props.onDoubleClick;if(Wn(A)){var P=M.getMouseInfo(C);A(P,C)}}),Cn(M,"handleContextMenu",function(C){var A=M.props.onContextMenu;if(Wn(A)){var P=M.getMouseInfo(C);A(P,C)}}),Cn(M,"triggerSyncEvent",function(C){M.props.syncId!==void 0&&PL.emit(RL,M.props.syncId,C,M.eventEmitterSymbol)}),Cn(M,"applySyncEvent",function(C){var A=M.props,P=A.layout,R=A.syncMethod,O=M.state.updateId,D=C.dataStartIndex,F=C.dataEndIndex;if(C.dataStartIndex!==void 0||C.dataEndIndex!==void 0)M.setState(qe({dataStartIndex:D,dataEndIndex:F},p({props:M.props,dataStartIndex:D,dataEndIndex:F,updateId:O},M.state)));else if(C.activeTooltipIndex!==void 0){var U=C.chartX,B=C.chartY,W=C.activeTooltipIndex,j=M.state,$=j.offset,z=j.tooltipTicks;if(!$)return;if(typeof R=="function")W=R(z,C);else if(R==="value"){W=-1;for(var Z=0;Z<z.length;Z++)if(z[Z].value===C.activeLabel){W=Z;break}}var se=qe(qe({},$),{},{x:$.left,y:$.top}),q=Math.min(U,se.x+se.width),ue=Math.min(B,se.y+se.height),be=z[W]&&z[W].value,ee=LB(M.state,M.props.data,W),le=z[W]?{x:P==="horizontal"?z[W].coordinate:q,y:P==="horizontal"?ue:z[W].coordinate}:ile;M.setState(qe(qe({},C),{},{activeLabel:be,activeCoordinate:le,activePayload:ee,activeTooltipIndex:W}))}else M.setState(C)}),Cn(M,"renderCursor",function(C){var A,P=M.state,R=P.isTooltipActive,O=P.activeCoordinate,D=P.activePayload,F=P.offset,U=P.activeTooltipIndex,B=P.tooltipAxisBandSize,W=M.getTooltipEventType(),j=(A=C.props.active)!==null&&A!==void 0?A:R,$=M.props.layout,z=C.key||"_recharts-cursor";return ce.createElement(LZe,{key:z,activeCoordinate:O,activePayload:D,activeTooltipIndex:U,chartName:n,element:C,isActive:j,layout:$,offset:F,tooltipAxisBandSize:B,tooltipEventType:W})}),Cn(M,"renderPolarAxis",function(C,A,P){var R=pl(C,"type.axisType"),O=pl(M.state,"".concat(R,"Map")),D=C.type.defaultProps,F=D!==void 0?qe(qe({},D),C.props):C.props,U=O&&O[F["".concat(R,"Id")]];return X.cloneElement(C,qe(qe({},U),{},{className:mr(R,U.className),key:C.key||"".concat(A,"-").concat(P),ticks:th(U,!0)}))}),Cn(M,"renderPolarGrid",function(C){var A=C.props,P=A.radialLines,R=A.polarAngles,O=A.polarRadius,D=M.state,F=D.radiusAxisMap,U=D.angleAxisMap,B=_d(F),W=_d(U),j=W.cx,$=W.cy,z=W.innerRadius,Z=W.outerRadius;return X.cloneElement(C,{polarAngles:Array.isArray(R)?R:th(W,!0).map(function(se){return se.coordinate}),polarRadius:Array.isArray(O)?O:th(B,!0).map(function(se){return se.coordinate}),cx:j,cy:$,innerRadius:z,outerRadius:Z,key:C.key||"polar-grid",radialLines:P})}),Cn(M,"renderLegend",function(){var C=M.state.formattedGraphicalItems,A=M.props,P=A.children,R=A.width,O=A.height,D=M.props.margin||{},F=R-(D.left||0)-(D.right||0),U=Hae({children:P,formattedGraphicalItems:C,legendWidth:F,legendContent:u});if(!U)return null;var B=U.item,W=uQ(U,FZe);return X.cloneElement(B,qe(qe({},W),{},{chartWidth:R,chartHeight:O,margin:D,onBBoxUpdate:M.handleLegendBBoxUpdate}))}),Cn(M,"renderTooltip",function(){var C,A=M.props,P=A.children,R=A.accessibilityLayer,O=Co(P,No);if(!O)return null;var D=M.state,F=D.isTooltipActive,U=D.activeCoordinate,B=D.activePayload,W=D.activeLabel,j=D.offset,$=(C=O.props.active)!==null&&C!==void 0?C:F;return X.cloneElement(O,{viewBox:qe(qe({},j),{},{x:j.left,y:j.top}),active:$,label:W,payload:$?B:[],coordinate:U,accessibilityLayer:R})}),Cn(M,"renderBrush",function(C){var A=M.props,P=A.margin,R=A.data,O=M.state,D=O.offset,F=O.dataStartIndex,U=O.dataEndIndex,B=O.updateId;return X.cloneElement(C,{key:C.key||"_recharts-brush",onChange:HS(M.handleBrushChange,C.props.onChange),data:R,x:bt(C.props.x)?C.props.x:D.left,y:bt(C.props.y)?C.props.y:D.top+D.height+D.brushBottom-(P.bottom||0),width:bt(C.props.width)?C.props.width:D.width,startIndex:F,endIndex:U,updateId:"brush-".concat(B)})}),Cn(M,"renderReferenceElement",function(C,A,P){if(!C)return null;var R=M,O=R.clipPathId,D=M.state,F=D.xAxisMap,U=D.yAxisMap,B=D.offset,W=C.type.defaultProps||{},j=C.props,$=j.xAxisId,z=$===void 0?W.xAxisId:$,Z=j.yAxisId,se=Z===void 0?W.yAxisId:Z;return X.cloneElement(C,{key:C.key||"".concat(A,"-").concat(P),xAxis:F[z],yAxis:U[se],viewBox:{x:B.left,y:B.top,width:B.width,height:B.height},clipPathId:O})}),Cn(M,"renderActivePoints",function(C){var A=C.item,P=C.activePoint,R=C.basePoint,O=C.childIndex,D=C.isRange,F=[],U=A.props.key,B=A.item.type.defaultProps!==void 0?qe(qe({},A.item.type.defaultProps),A.item.props):A.item.props,W=B.activeDot,j=B.dataKey,$=qe(qe({index:O,dataKey:j,cx:P.x,cy:P.y,r:4,fill:kz(A.item),strokeWidth:2,stroke:"#fff",payload:P.payload,value:P.value},$n(W,!1)),_E(W));return F.push(_.renderActiveDot(W,$,"".concat(U,"-activePoint-").concat(O))),R?F.push(_.renderActiveDot(W,qe(qe({},$),{},{cx:R.x,cy:R.y}),"".concat(U,"-basePoint-").concat(O))):D&&F.push(null),F}),Cn(M,"renderGraphicChild",function(C,A,P){var R=M.filterFormatItem(C,A,P);if(!R)return null;var O=M.getTooltipEventType(),D=M.state,F=D.isTooltipActive,U=D.tooltipAxis,B=D.activeTooltipIndex,W=D.activeLabel,j=M.props.children,$=Co(j,No),z=R.props,Z=z.points,se=z.isRange,q=z.baseLine,ue=R.item.type.defaultProps!==void 0?qe(qe({},R.item.type.defaultProps),R.item.props):R.item.props,be=ue.activeDot,ee=ue.hide,le=ue.activeBar,oe=ue.activeShape,fe=!!(!ee&&F&&$&&(be||le||oe)),Se={};O!=="axis"&&$&&$.props.trigger==="click"?Se={onClick:HS(M.handleItemMouseEnter,C.props.onClick)}:O!=="axis"&&(Se={onMouseLeave:HS(M.handleItemMouseLeave,C.props.onMouseLeave),onMouseEnter:HS(M.handleItemMouseEnter,C.props.onMouseEnter)});var we=X.cloneElement(C,qe(qe({},R.props),Se));function Le(Q){return typeof U.dataKey=="function"?U.dataKey(Q.payload):null}if(fe)if(B>=0){var et,Fe;if(U.dataKey&&!U.allowDuplicatedCategory){var Tt=typeof U.dataKey=="function"?Le:"payload.".concat(U.dataKey.toString());et=bE(Z,Tt,W),Fe=se&&q&&bE(q,Tt,W)}else et=Z==null?void 0:Z[B],Fe=se&&q&&q[B];if(oe||le){var me=C.props.activeIndex!==void 0?C.props.activeIndex:B;return[X.cloneElement(C,qe(qe(qe({},R.props),Se),{},{activeIndex:me})),null,null]}if(!Gn(et))return[we].concat(Yy(M.renderActivePoints({item:R,activePoint:et,basePoint:Fe,childIndex:B,isRange:se})))}else{var En,Wt=(En=M.getItemByXY(M.state.activeCoordinate))!==null&&En!==void 0?En:{graphicalItem:we},Jt=Wt.graphicalItem,zt=Jt.item,Yn=zt===void 0?C:zt,Ft=Jt.childIndex,he=qe(qe(qe({},R.props),Se),{},{activeIndex:Ft});return[X.cloneElement(Yn,he),null,null]}return se?[we,null,null]:[we,null]}),Cn(M,"renderCustomized",function(C,A,P){return X.cloneElement(C,qe(qe({key:"recharts-customized-".concat(P)},M.props),M.state))}),Cn(M,"renderMap",{CartesianGrid:{handler:YS,once:!0},ReferenceArea:{handler:M.renderReferenceElement},ReferenceLine:{handler:YS},ReferenceDot:{handler:M.renderReferenceElement},XAxis:{handler:YS},YAxis:{handler:YS},Brush:{handler:M.renderBrush,once:!0},Bar:{handler:M.renderGraphicChild},Line:{handler:M.renderGraphicChild},Area:{handler:M.renderGraphicChild},Radar:{handler:M.renderGraphicChild},RadialBar:{handler:M.renderGraphicChild},Scatter:{handler:M.renderGraphicChild},Pie:{handler:M.renderGraphicChild},Funnel:{handler:M.renderGraphicChild},Tooltip:{handler:M.renderCursor,once:!0},PolarGrid:{handler:M.renderPolarGrid,once:!0},PolarAngleAxis:{handler:M.renderPolarAxis},PolarRadiusAxis:{handler:M.renderPolarAxis},Customized:{handler:M.renderCustomized}}),M.clipPathId="".concat((S=E.id)!==null&&S!==void 0?S:Vp("recharts"),"-clip"),M.throttleTriggeredAfterMouseMove=Tae(M.triggeredAfterMouseMove,(T=E.throttleDelay)!==null&&T!==void 0?T:1e3/60),M.state={},M}return KZe(_,x),HZe(_,[{key:"componentDidMount",value:function(){var S,T;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(S=this.props.margin.left)!==null&&S!==void 0?S:0,top:(T=this.props.margin.top)!==null&&T!==void 0?T:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var S=this.props,T=S.children,M=S.data,C=S.height,A=S.layout,P=Co(T,No);if(P){var R=P.props.defaultIndex;if(!(typeof R!="number"||R<0||R>this.state.tooltipTicks.length-1)){var O=this.state.tooltipTicks[R]&&this.state.tooltipTicks[R].value,D=LB(this.state,M,R,O),F=this.state.tooltipTicks[R].coordinate,U=(this.state.offset.top+C)/2,B=A==="horizontal",W=B?{x:F,y:U}:{y:F,x:U},j=this.state.formattedGraphicalItems.find(function(z){var Z=z.item;return Z.type.name==="Scatter"});j&&(W=qe(qe({},W),j.props.points[R].tooltipPosition),D=j.props.points[R].tooltipPayload);var $={activeTooltipIndex:R,isTooltipActive:!0,activeLabel:O,activePayload:D,activeCoordinate:W};this.setState($),this.renderCursor(P),this.accessibilityManager.setIndex(R)}}}},{key:"getSnapshotBeforeUpdate",value:function(S,T){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==T.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==S.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==S.margin){var M,C;this.accessibilityManager.setDetails({offset:{left:(M=this.props.margin.left)!==null&&M!==void 0?M:0,top:(C=this.props.margin.top)!==null&&C!==void 0?C:0}})}return null}},{key:"componentDidUpdate",value:function(S){EF([Co(S.children,No)],[Co(this.props.children,No)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var S=Co(this.props.children,No);if(S&&typeof S.props.shared=="boolean"){var T=S.props.shared?"axis":"item";return l.indexOf(T)>=0?T:a}return a}},{key:"getMouseInfo",value:function(S){if(!this.container)return null;var T=this.container,M=T.getBoundingClientRect(),C=u8e(M),A={chartX:Math.round(S.pageX-C.left),chartY:Math.round(S.pageY-C.top)},P=M.width/T.offsetWidth||1,R=this.inRange(A.chartX,A.chartY,P);if(!R)return null;var O=this.state,D=O.xAxisMap,F=O.yAxisMap,U=this.getTooltipEventType(),B=dQ(this.state,this.props.data,this.props.layout,R);if(U!=="axis"&&D&&F){var W=_d(D).scale,j=_d(F).scale,$=W&&W.invert?W.invert(A.chartX):null,z=j&&j.invert?j.invert(A.chartY):null;return qe(qe({},A),{},{xValue:$,yValue:z},B)}return B?qe(qe({},A),B):null}},{key:"inRange",value:function(S,T){var M=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,C=this.props.layout,A=S/M,P=T/M;if(C==="horizontal"||C==="vertical"){var R=this.state.offset,O=A>=R.left&&A<=R.left+R.width&&P>=R.top&&P<=R.top+R.height;return O?{x:A,y:P}:null}var D=this.state,F=D.angleAxisMap,U=D.radiusAxisMap;if(F&&U){var B=_d(F);return EY({x:A,y:P},B)}return null}},{key:"parseEventsOfWrapper",value:function(){var S=this.props.children,T=this.getTooltipEventType(),M=Co(S,No),C={};M&&T==="axis"&&(M.props.trigger==="click"?C={onClick:this.handleClick}:C={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var A=_E(this.props,this.handleOuterEvent);return qe(qe({},A),C)}},{key:"addListener",value:function(){PL.on(RL,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){PL.removeListener(RL,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(S,T,M){for(var C=this.state.formattedGraphicalItems,A=0,P=C.length;A<P;A++){var R=C[A];if(R.item===S||R.props.key===S.key||T===uh(R.item.type)&&M===R.childIndex)return R}return null}},{key:"renderClipPath",value:function(){var S=this.clipPathId,T=this.state.offset,M=T.left,C=T.top,A=T.height,P=T.width;return ce.createElement("defs",null,ce.createElement("clipPath",{id:S},ce.createElement("rect",{x:M,y:C,height:A,width:P})))}},{key:"getXScales",value:function(){var S=this.state.xAxisMap;return S?Object.entries(S).reduce(function(T,M){var C=cQ(M,2),A=C[0],P=C[1];return qe(qe({},T),{},Cn({},A,P.scale))},{}):null}},{key:"getYScales",value:function(){var S=this.state.yAxisMap;return S?Object.entries(S).reduce(function(T,M){var C=cQ(M,2),A=C[0],P=C[1];return qe(qe({},T),{},Cn({},A,P.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(S){var T;return(T=this.state.xAxisMap)===null||T===void 0||(T=T[S])===null||T===void 0?void 0:T.scale}},{key:"getYScaleByAxisId",value:function(S){var T;return(T=this.state.yAxisMap)===null||T===void 0||(T=T[S])===null||T===void 0?void 0:T.scale}},{key:"getItemByXY",value:function(S){var T=this.state,M=T.formattedGraphicalItems,C=T.activeItem;if(M&&M.length)for(var A=0,P=M.length;A<P;A++){var R=M[A],O=R.props,D=R.item,F=D.type.defaultProps!==void 0?qe(qe({},D.type.defaultProps),D.props):D.props,U=uh(D.type);if(U==="Bar"){var B=(O.data||[]).find(function(z){return Yqe(S,z)});if(B)return{graphicalItem:R,payload:B}}else if(U==="RadialBar"){var W=(O.data||[]).find(function(z){return EY(S,z)});if(W)return{graphicalItem:R,payload:W}}else if(FA(R,C)||BA(R,C)||s_(R,C)){var j=j7e({graphicalItem:R,activeTooltipItem:C,itemData:F.data}),$=F.activeIndex===void 0?j:F.activeIndex;return{graphicalItem:qe(qe({},R),{},{childIndex:$}),payload:s_(R,C)?F.data[j]:R.props.data[j]}}}return null}},{key:"render",value:function(){var S=this;if(!b7(this))return null;var T=this.props,M=T.children,C=T.className,A=T.width,P=T.height,R=T.style,O=T.compact,D=T.title,F=T.desc,U=uQ(T,BZe),B=$n(U,!1);if(O)return ce.createElement(UZ,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},ce.createElement(AF,kg({},B,{width:A,height:P,title:D,desc:F}),this.renderClipPath(),w7(M,this.renderMap)));if(this.props.accessibilityLayer){var W,j;B.tabIndex=(W=this.props.tabIndex)!==null&&W!==void 0?W:0,B.role=(j=this.props.role)!==null&&j!==void 0?j:"application",B.onKeyDown=function(z){S.accessibilityManager.keyboardEvent(z)},B.onFocus=function(){S.accessibilityManager.focus()}}var $=this.parseEventsOfWrapper();return ce.createElement(UZ,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},ce.createElement("div",kg({className:mr("recharts-wrapper",C),style:qe({position:"relative",cursor:"default",width:A,height:P},R)},$,{ref:function(Z){S.container=Z}}),ce.createElement(AF,kg({},B,{width:A,height:P,title:D,desc:F,style:tQe}),this.renderClipPath(),w7(M,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(X.Component);Cn(g,"displayName",n),Cn(g,"defaultProps",qe({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},d)),Cn(g,"getDerivedStateFromProps",function(x,_){var E=x.dataKey,S=x.data,T=x.children,M=x.width,C=x.height,A=x.layout,P=x.stackOffset,R=x.margin,O=_.dataStartIndex,D=_.dataEndIndex;if(_.updateId===void 0){var F=fQ(x);return qe(qe(qe({},F),{},{updateId:0},p(qe(qe({props:x},F),{},{updateId:0}),_)),{},{prevDataKey:E,prevData:S,prevWidth:M,prevHeight:C,prevLayout:A,prevStackOffset:P,prevMargin:R,prevChildren:T})}if(E!==_.prevDataKey||S!==_.prevData||M!==_.prevWidth||C!==_.prevHeight||A!==_.prevLayout||P!==_.prevStackOffset||!Xg(R,_.prevMargin)){var U=fQ(x),B={chartX:_.chartX,chartY:_.chartY,isTooltipActive:_.isTooltipActive},W=qe(qe({},dQ(_,S,A)),{},{updateId:_.updateId+1}),j=qe(qe(qe({},U),B),W);return qe(qe(qe({},j),p(qe({props:x},j),_)),{},{prevDataKey:E,prevData:S,prevWidth:M,prevHeight:C,prevLayout:A,prevStackOffset:P,prevMargin:R,prevChildren:T})}if(!EF(T,_.prevChildren)){var $,z,Z,se,q=Co(T,Fy),ue=q&&($=(z=q.props)===null||z===void 0?void 0:z.startIndex)!==null&&$!==void 0?$:O,be=q&&(Z=(se=q.props)===null||se===void 0?void 0:se.endIndex)!==null&&Z!==void 0?Z:D,ee=ue!==O||be!==D,le=!Gn(S),oe=le&&!ee?_.updateId:_.updateId+1;return qe(qe({updateId:oe},p(qe(qe({props:x},_),{},{updateId:oe,dataStartIndex:ue,dataEndIndex:be}),_)),{},{prevChildren:T,dataStartIndex:ue,dataEndIndex:be})}return null}),Cn(g,"renderActiveDot",function(x,_,E){var S;return X.isValidElement(x)?S=X.cloneElement(x,_):Wn(x)?S=x(_):S=ce.createElement(LA,_),ce.createElement(Pr,{className:"recharts-active-dot",key:E},S)});var v=X.forwardRef(function(_,E){return ce.createElement(g,kg({},_,{ref:E}))});return v.displayName=g.displayName,v},hQe=XA({chartName:"LineChart",GraphicalChild:Lp,axisComponents:[{axisType:"xAxis",AxisComp:Dc},{axisType:"yAxis",AxisComp:Lc}],formatAxisMap:UA}),dQe=XA({chartName:"BarChart",GraphicalChild:bh,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:Dc},{axisType:"yAxis",AxisComp:Lc}],formatAxisMap:UA}),fQe=XA({chartName:"AreaChart",GraphicalChild:Ph,axisComponents:[{axisType:"xAxis",AxisComp:Dc},{axisType:"yAxis",AxisComp:Lc}],formatAxisMap:UA}),pQe=XA({chartName:"ComposedChart",GraphicalChild:[Lp,Ph,bh,WA],axisComponents:[{axisType:"xAxis",AxisComp:Dc},{axisType:"yAxis",AxisComp:Lc},{axisType:"zAxis",AxisComp:HA}],formatAxisMap:UA});const ale=({data:r=null})=>{const[e,n]=X.useState("30d"),[i,s]=X.useState("line"),[a,o]=X.useState("all"),c=r||(()=>{const _=new Date,E=["Meta Tags","Performance","Structure","Content","Links"];let S=[];for(let T=90;T>=0;T--){const M=new Date(_);M.setDate(M.getDate()-T);const C=Math.min(95,65+(90-T)*.3+(Math.random()*4-2)),A={date:M.toISOString().split("T")[0],totalScore:Math.round(C)};E.forEach(P=>{const R={"Meta Tags":1.2,Performance:.8,Structure:1,Content:.9,Links:1.1}[P],O=Math.min(100,60+(90-T)*.3*R+(Math.random()*5-2.5));A[P]=Math.round(O)}),S.push(A)}for(let T=60;T>=0;T--)S[90-T]["Meta Tags"]+=8,S[90-T]["Meta Tags"]=Math.min(S[90-T]["Meta Tags"],100),S[90-T].totalScore=Math.round((S[90-T]["Meta Tags"]+S[90-T].Performance+S[90-T].Structure+S[90-T].Content+S[90-T].Links)/5);for(let T=30;T>=0;T--)S[90-T].Performance+=12,S[90-T].Performance=Math.min(S[90-T].Performance,100),S[90-T].totalScore=Math.round((S[90-T]["Meta Tags"]+S[90-T].Performance+S[90-T].Structure+S[90-T].Content+S[90-T].Links)/5);return S})(),h=(()=>{if(e==="all")return c;const _=parseInt(e.replace("d",""));return c.slice(c.length-_-1)})(),f=a==="all"?["totalScore","Meta Tags","Performance","Structure","Content","Links"]:["totalScore",a],p=_=>({totalScore:"#4F46E5","Meta Tags":"#10B981",Performance:"#F59E0B",Structure:"#6366F1",Content:"#EC4899",Links:"#8B5CF6"})[_]||"#6B7280",g=()=>{switch(i){case"area":return b.jsxs(fQe,{data:h,children:[b.jsx(cx,{strokeDasharray:"3 3"}),b.jsx(Dc,{dataKey:"date"}),b.jsx(Lc,{domain:[0,100]}),b.jsx(No,{}),b.jsx(Oc,{}),f.map(_=>b.jsx(Ph,{type:"monotone",dataKey:_,fill:p(_),stroke:p(_),fillOpacity:.3},_))]});case"bar":return b.jsxs(dQe,{data:h,children:[b.jsx(cx,{strokeDasharray:"3 3"}),b.jsx(Dc,{dataKey:"date"}),b.jsx(Lc,{domain:[0,100]}),b.jsx(No,{}),b.jsx(Oc,{}),f.map(_=>b.jsx(bh,{dataKey:_,fill:p(_)},_))]});case"composed":return b.jsxs(pQe,{data:h,children:[b.jsx(cx,{strokeDasharray:"3 3"}),b.jsx(Dc,{dataKey:"date"}),b.jsx(Lc,{domain:[0,100]}),b.jsx(No,{}),b.jsx(Oc,{}),b.jsx(Lp,{type:"monotone",dataKey:"totalScore",stroke:"#4F46E5",strokeWidth:2}),f.filter(_=>_!=="totalScore").map(_=>b.jsx(bh,{dataKey:_,fill:p(_)},_))]});case"line":default:return b.jsxs(hQe,{data:h,children:[b.jsx(cx,{strokeDasharray:"3 3"}),b.jsx(Dc,{dataKey:"date"}),b.jsx(Lc,{domain:[0,100]}),b.jsx(No,{}),b.jsx(Oc,{}),f.map(_=>b.jsx(Lp,{type:"monotone",dataKey:_,stroke:p(_),strokeWidth:_==="totalScore"?2:1,dot:_==="totalScore"},_))]})}},x=(()=>{const _=h[0].totalScore,E=h[h.length-1].totalScore,S=E-_,T=((E-_)/_*100).toFixed(1),M={};return f.forEach(C=>{if(C!=="totalScore"){const A=h[0][C],R=h[h.length-1][C]-A;M[C]={points:R,percent:(R/A*100).toFixed(1)}}}),{overall:{points:S,percent:T},categories:M}})();return b.jsxs("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:[b.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:b.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"SEO Score Trends"})}),b.jsxs("div",{className:"p-6",children:[b.jsxs("div",{className:"flex flex-wrap gap-4 mb-6",children:[b.jsxs("div",{children:[b.jsx("label",{htmlFor:"dateRange",className:"block text-sm font-medium text-gray-700 mb-1",children:"Date Range"}),b.jsxs("select",{id:"dateRange",name:"dateRange",value:e,onChange:_=>n(_.target.value),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",children:[b.jsx("option",{value:"7d",children:"Last 7 days"}),b.jsx("option",{value:"14d",children:"Last 14 days"}),b.jsx("option",{value:"30d",children:"Last 30 days"}),b.jsx("option",{value:"60d",children:"Last 60 days"}),b.jsx("option",{value:"90d",children:"Last 90 days"}),b.jsx("option",{value:"all",children:"All time"})]})]}),b.jsxs("div",{children:[b.jsx("label",{htmlFor:"chartType",className:"block text-sm font-medium text-gray-700 mb-1",children:"Chart Type"}),b.jsxs("select",{id:"chartType",name:"chartType",value:i,onChange:_=>s(_.target.value),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",children:[b.jsx("option",{value:"line",children:"Line Chart"}),b.jsx("option",{value:"area",children:"Area Chart"}),b.jsx("option",{value:"bar",children:"Bar Chart"}),b.jsx("option",{value:"composed",children:"Composed Chart"})]})]}),b.jsxs("div",{children:[b.jsx("label",{htmlFor:"categoryFilter",className:"block text-sm font-medium text-gray-700 mb-1",children:"Categories"}),b.jsxs("select",{id:"categoryFilter",name:"categoryFilter",value:a,onChange:_=>o(_.target.value),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",children:[b.jsx("option",{value:"all",children:"All Categories"}),b.jsx("option",{value:"Meta Tags",children:"Meta Tags"}),b.jsx("option",{value:"Performance",children:"Performance"}),b.jsx("option",{value:"Structure",children:"Structure"}),b.jsx("option",{value:"Content",children:"Content"}),b.jsx("option",{value:"Links",children:"Links"})]})]})]}),b.jsx("div",{className:"h-80",children:b.jsx(r8e,{width:"100%",height:"100%",children:g()})}),b.jsxs("div",{className:"mt-6 bg-gray-50 p-4 rounded-lg",children:[b.jsx("h3",{className:"text-md font-medium text-gray-800 mb-2",children:"Improvement Summary"}),b.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[b.jsxs("div",{className:"border border-gray-200 rounded p-3 bg-white",children:[b.jsx("p",{className:"text-sm text-gray-600",children:"Overall Improvement"}),b.jsxs("p",{className:"text-2xl font-bold text-indigo-600",children:["+",x.overall.points," points"]}),b.jsxs("p",{className:"text-sm text-gray-600",children:["+",x.overall.percent,"% from baseline"]})]}),b.jsxs("div",{className:"border border-gray-200 rounded p-3 bg-white",children:[b.jsx("p",{className:"text-sm text-gray-600",children:"Top Improvement"}),Object.entries(x.categories).sort((_,E)=>E[1].points-_[1].points).slice(0,1).map(([_,E])=>b.jsxs("div",{children:[b.jsx("p",{className:"text-lg font-semibold",children:_}),b.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["+",E.points," points"]}),b.jsxs("p",{className:"text-sm text-gray-600",children:["+",E.percent,"% improvement"]})]},_))]})]})]})]})]})};var kL={exports:{}},ux={exports:{}},mQe=ux.exports,mQ;function gQe(){return mQ||(mQ=1,function(r,e){(function(n,i){i(e,lM())})(mQe,function(n,i){function s(I,G,Y,te,ye,de,ve){try{var ze=I[de](ve),je=ze.value}catch(We){return void Y(We)}ze.done?G(je):Promise.resolve(je).then(te,ye)}function a(I){return function(){var G=this,Y=arguments;return new Promise(function(te,ye){var de=I.apply(G,Y);function ve(je){s(de,te,ye,ve,ze,"next",je)}function ze(je){s(de,te,ye,ve,ze,"throw",je)}ve(void 0)})}}function o(){return(o=Object.assign||function(I){for(var G=1;G<arguments.length;G++){var Y=arguments[G];for(var te in Y)Object.prototype.hasOwnProperty.call(Y,te)&&(I[te]=Y[te])}return I}).apply(this,arguments)}function l(I,G){if(I==null)return{};var Y,te,ye={},de=Object.keys(I);for(te=0;te<de.length;te++)Y=de[te],G.indexOf(Y)>=0||(ye[Y]=I[Y]);return ye}function c(I){var G=function(Y,te){if(typeof Y!="object"||Y===null)return Y;var ye=Y[Symbol.toPrimitive];if(ye!==void 0){var de=ye.call(Y,te);if(typeof de!="object")return de;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(Y)}(I,"string");return typeof G=="symbol"?G:String(G)}i=i&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i;var u={init:"init"},h=function(I){var G=I.value;return G===void 0?"":G},d=function(){return i.createElement(i.Fragment,null," ")},f={Cell:h,width:150,minWidth:0,maxWidth:Number.MAX_SAFE_INTEGER};function p(){for(var I=arguments.length,G=new Array(I),Y=0;Y<I;Y++)G[Y]=arguments[Y];return G.reduce(function(te,ye){var de=ye.style,ve=ye.className;return te=o({},te,{},l(ye,["style","className"])),de&&(te.style=te.style?o({},te.style||{},{},de||{}):de),ve&&(te.className=te.className?te.className+" "+ve:ve),te.className===""&&delete te.className,te},{})}var g=function(I,G){return G===void 0&&(G={}),function(Y){return Y===void 0&&(Y={}),[].concat(I,[Y]).reduce(function(te,ye){return function de(ve,ze,je){return typeof ze=="function"?de({},ze(ve,je)):Array.isArray(ze)?p.apply(void 0,[ve].concat(ze)):p(ve,ze)}(te,ye,o({},G,{userProps:Y}))},{})}},v=function(I,G,Y,te){return Y===void 0&&(Y={}),I.reduce(function(ye,de){return de(ye,Y)},G)},x=function(I,G,Y){return Y===void 0&&(Y={}),I.forEach(function(te){te(G,Y)})};function _(I,G,Y,te){I.findIndex(function(ye){return ye.pluginName===Y}),G.forEach(function(ye){I.findIndex(function(de){return de.pluginName===ye})})}function E(I,G){return typeof I=="function"?I(G):I}function S(I){var G=i.useRef();return G.current=I,i.useCallback(function(){return G.current},[])}var T=typeof document<"u"?i.useLayoutEffect:i.useEffect;function M(I,G){var Y=i.useRef(!1);T(function(){Y.current&&I(),Y.current=!0},G)}function C(I,G,Y){return Y===void 0&&(Y={}),function(te,ye){ye===void 0&&(ye={});var de=typeof te=="string"?G[te]:te;if(de===void 0)throw console.info(G),new Error("Renderer Error ☝️");return A(de,o({},I,{column:G},Y,{},ye))}}function A(I,G){return function(te){return typeof te=="function"&&(ye=Object.getPrototypeOf(te)).prototype&&ye.prototype.isReactComponent;var ye}(Y=I)||typeof Y=="function"||function(te){return typeof te=="object"&&typeof te.$$typeof=="symbol"&&["react.memo","react.forward_ref"].includes(te.$$typeof.description)}(Y)?i.createElement(I,G):I;var Y}function P(I,G,Y){return Y===void 0&&(Y=0),I.map(function(te){return O(te=o({},te,{parent:G,depth:Y})),te.columns&&(te.columns=P(te.columns,te,Y+1)),te})}function R(I){return j(I,"columns")}function O(I){var G=I.id,Y=I.accessor,te=I.Header;if(typeof Y=="string"){G=G||Y;var ye=Y.split(".");Y=function(de){return function(ve,ze,je){if(!ze)return ve;var We,ft=typeof ze=="function"?ze:JSON.stringify(ze),ot=U.get(ft)||function(){var pt=function(Qe){return function ht(St,Rt){if(Rt===void 0&&(Rt=[]),Array.isArray(St))for(var en=0;en<St.length;en+=1)ht(St[en],Rt);else Rt.push(St);return Rt}(Qe).map(function(ht){return String(ht).replace(".","_")}).join(".").replace(ue,".").replace(be,"").split(".")}(ze);return U.set(ft,pt),pt}();try{We=ot.reduce(function(pt,Qe){return pt[Qe]},ve)}catch{}return We!==void 0?We:je}(de,ye)}}if(!G&&typeof te=="string"&&te&&(G=te),!G&&I.columns)throw console.error(I),new Error('A column ID (or unique "Header" value) is required!');if(!G)throw console.error(I),new Error("A column ID (or string accessor) is required!");return Object.assign(I,{id:G,accessor:Y}),I}function D(I,G){if(!G)throw new Error;return Object.assign(I,o({Header:d,Footer:d},f,{},G,{},I)),Object.assign(I,{originalWidth:I.width}),I}function F(I,G,Y){Y===void 0&&(Y=function(){return{}});for(var te=[],ye=I,de=0,ve=function(){return de++},ze=function(){var je={headers:[]},We=[],ft=ye.some(function(ot){return ot.parent});ye.forEach(function(ot){var pt,Qe=[].concat(We).reverse()[0];ft&&(ot.parent?pt=o({},ot.parent,{originalId:ot.parent.id,id:ot.parent.id+"_"+ve(),headers:[ot]},Y(ot)):pt=D(o({originalId:ot.id+"_placeholder",id:ot.id+"_placeholder_"+ve(),placeholderOf:ot,headers:[ot]},Y(ot)),G),Qe&&Qe.originalId===pt.originalId?Qe.headers.push(ot):We.push(pt)),je.headers.push(ot)}),te.push(je),ye=We};ye.length;)ze();return te.reverse()}var U=new Map;function B(){for(var I=arguments.length,G=new Array(I),Y=0;Y<I;Y++)G[Y]=arguments[Y];for(var te=0;te<G.length;te+=1)if(G[te]!==void 0)return G[te]}function W(I){if(typeof I=="function")return I}function j(I,G){var Y=[];return function te(ye){ye.forEach(function(de){de[G]?te(de[G]):Y.push(de)})}(I),Y}function $(I,G){var Y=G.manualExpandedKey,te=G.expanded,ye=G.expandSubRows,de=ye===void 0||ye,ve=[];return I.forEach(function(ze){return function je(We,ft){ft===void 0&&(ft=!0),We.isExpanded=We.original&&We.original[Y]||te[We.id],We.canExpand=We.subRows&&!!We.subRows.length,ft&&ve.push(We),We.subRows&&We.subRows.length&&We.isExpanded&&We.subRows.forEach(function(ot){return je(ot,de)})}(ze)}),ve}function z(I,G,Y){return W(I)||G[I]||Y[I]||Y.text}function Z(I,G,Y){return I?I(G,Y):G===void 0}function se(){throw new Error("React-Table: You have not called prepareRow(row) one or more rows you are attempting to render.")}var q=null,ue=/\[/g,be=/\]/g,ee=function(I){return o({role:"table"},I)},le=function(I){return o({role:"rowgroup"},I)},oe=function(I,G){var Y=G.column;return o({key:"header_"+Y.id,colSpan:Y.totalVisibleHeaderCount,role:"columnheader"},I)},fe=function(I,G){var Y=G.column;return o({key:"footer_"+Y.id,colSpan:Y.totalVisibleHeaderCount},I)},Se=function(I,G){return o({key:"headerGroup_"+G.index,role:"row"},I)},we=function(I,G){return o({key:"footerGroup_"+G.index},I)},Le=function(I,G){return o({key:"row_"+G.row.id,role:"row"},I)},et=function(I,G){var Y=G.cell;return o({key:"cell_"+Y.row.id+"_"+Y.column.id,role:"cell"},I)};function Fe(){return{useOptions:[],stateReducers:[],useControlledState:[],columns:[],columnsDeps:[],allColumns:[],allColumnsDeps:[],accessValue:[],materializedColumns:[],materializedColumnsDeps:[],useInstanceAfterData:[],visibleColumns:[],visibleColumnsDeps:[],headerGroups:[],headerGroupsDeps:[],useInstanceBeforeDimensions:[],useInstance:[],prepareRow:[],getTableProps:[ee],getTableBodyProps:[le],getHeaderGroupProps:[Se],getFooterGroupProps:[we],getHeaderProps:[oe],getFooterProps:[fe],getRowProps:[Le],getCellProps:[et],useFinalInstance:[]}}u.resetHiddenColumns="resetHiddenColumns",u.toggleHideColumn="toggleHideColumn",u.setHiddenColumns="setHiddenColumns",u.toggleHideAllColumns="toggleHideAllColumns";var Tt=function(I){I.getToggleHiddenProps=[me],I.getToggleHideAllColumnsProps=[En],I.stateReducers.push(Wt),I.useInstanceBeforeDimensions.push(Jt),I.headerGroupsDeps.push(function(G,Y){var te=Y.instance;return[].concat(G,[te.state.hiddenColumns])}),I.useInstance.push(zt)};Tt.pluginName="useColumnVisibility";var me=function(I,G){var Y=G.column;return[I,{onChange:function(te){Y.toggleHidden(!te.target.checked)},style:{cursor:"pointer"},checked:Y.isVisible,title:"Toggle Column Visible"}]},En=function(I,G){var Y=G.instance;return[I,{onChange:function(te){Y.toggleHideAllColumns(!te.target.checked)},style:{cursor:"pointer"},checked:!Y.allColumnsHidden&&!Y.state.hiddenColumns.length,title:"Toggle All Columns Hidden",indeterminate:!Y.allColumnsHidden&&Y.state.hiddenColumns.length}]};function Wt(I,G,Y,te){if(G.type===u.init)return o({hiddenColumns:[]},I);if(G.type===u.resetHiddenColumns)return o({},I,{hiddenColumns:te.initialState.hiddenColumns||[]});if(G.type===u.toggleHideColumn){var ye=(G.value!==void 0?G.value:!I.hiddenColumns.includes(G.columnId))?[].concat(I.hiddenColumns,[G.columnId]):I.hiddenColumns.filter(function(de){return de!==G.columnId});return o({},I,{hiddenColumns:ye})}return G.type===u.setHiddenColumns?o({},I,{hiddenColumns:E(G.value,I.hiddenColumns)}):G.type===u.toggleHideAllColumns?o({},I,{hiddenColumns:(G.value!==void 0?G.value:!I.hiddenColumns.length)?te.allColumns.map(function(de){return de.id}):[]}):void 0}function Jt(I){var G=I.headers,Y=I.state.hiddenColumns;i.useRef(!1).current;var te=0;G.forEach(function(ye){return te+=function de(ve,ze){ve.isVisible=ze&&!Y.includes(ve.id);var je=0;return ve.headers&&ve.headers.length?ve.headers.forEach(function(We){return je+=de(We,ve.isVisible)}):je=ve.isVisible?1:0,ve.totalVisibleHeaderCount=je,je}(ye,!0)})}function zt(I){var G=I.columns,Y=I.flatHeaders,te=I.dispatch,ye=I.allColumns,de=I.getHooks,ve=I.state.hiddenColumns,ze=I.autoResetHiddenColumns,je=ze===void 0||ze,We=S(I),ft=ye.length===ve.length,ot=i.useCallback(function(Rt,en){return te({type:u.toggleHideColumn,columnId:Rt,value:en})},[te]),pt=i.useCallback(function(Rt){return te({type:u.setHiddenColumns,value:Rt})},[te]),Qe=i.useCallback(function(Rt){return te({type:u.toggleHideAllColumns,value:Rt})},[te]),ht=g(de().getToggleHideAllColumnsProps,{instance:We()});Y.forEach(function(Rt){Rt.toggleHidden=function(en){te({type:u.toggleHideColumn,columnId:Rt.id,value:en})},Rt.getToggleHiddenProps=g(de().getToggleHiddenProps,{instance:We(),column:Rt})});var St=S(je);M(function(){St()&&te({type:u.resetHiddenColumns})},[te,G]),Object.assign(I,{allColumnsHidden:ft,toggleHideColumn:ot,setHiddenColumns:pt,toggleHideAllColumns:Qe,getToggleHideAllColumnsProps:ht})}var Yn={},Ft={},he=function(I,G,Y){return I},Q=function(I,G){return I.subRows||[]},Re=function(I,G,Y){return""+(Y?[Y.id,G].join("."):G)},Ze=function(I){return I};function Je(I){var G=I.initialState,Y=G===void 0?Yn:G,te=I.defaultColumn,ye=te===void 0?Ft:te,de=I.getSubRows,ve=de===void 0?Q:de,ze=I.getRowId,je=ze===void 0?Re:ze,We=I.stateReducer,ft=We===void 0?he:We,ot=I.useControlledState,pt=ot===void 0?Ze:ot;return o({},l(I,["initialState","defaultColumn","getSubRows","getRowId","stateReducer","useControlledState"]),{initialState:Y,defaultColumn:ye,getSubRows:ve,getRowId:je,stateReducer:ft,useControlledState:pt})}function Ke(I,G){G===void 0&&(G=0);var Y=0,te=0,ye=0,de=0;return I.forEach(function(ve){var ze=ve.headers;if(ve.totalLeft=G,ze&&ze.length){var je=Ke(ze,G),We=je[0],ft=je[1],ot=je[2],pt=je[3];ve.totalMinWidth=We,ve.totalWidth=ft,ve.totalMaxWidth=ot,ve.totalFlexWidth=pt}else ve.totalMinWidth=ve.minWidth,ve.totalWidth=Math.min(Math.max(ve.minWidth,ve.width),ve.maxWidth),ve.totalMaxWidth=ve.maxWidth,ve.totalFlexWidth=ve.canResize?ve.totalWidth:0;ve.isVisible&&(G+=ve.totalWidth,Y+=ve.totalMinWidth,te+=ve.totalWidth,ye+=ve.totalMaxWidth,de+=ve.totalFlexWidth)}),[Y,te,ye,de]}function Kt(I){var G=I.data,Y=I.rows,te=I.flatRows,ye=I.rowsById,de=I.column,ve=I.getRowId,ze=I.getSubRows,je=I.accessValueHooks,We=I.getInstance;G.forEach(function(ft,ot){return function pt(Qe,ht,St,Rt,en){St===void 0&&(St=0);var Ln=Qe,tn=ve(Qe,ht,Rt),vt=ye[tn];if(vt)vt.subRows&&vt.originalSubRows.forEach(function(Vt,Tn){return pt(Vt,Tn,St+1,vt)});else if((vt={id:tn,original:Ln,index:ht,depth:St,cells:[{}]}).cells.map=se,vt.cells.filter=se,vt.cells.forEach=se,vt.cells[0].getCellProps=se,vt.values={},en.push(vt),te.push(vt),ye[tn]=vt,vt.originalSubRows=ze(Qe,ht),vt.originalSubRows){var Sn=[];vt.originalSubRows.forEach(function(Vt,Tn){return pt(Vt,Tn,St+1,vt,Sn)}),vt.subRows=Sn}de.accessor&&(vt.values[de.id]=de.accessor(Qe,ht,vt,en,G)),vt.values[de.id]=v(je,vt.values[de.id],{row:vt,column:de,instance:We()})}(ft,ot,0,void 0,Y)})}u.resetExpanded="resetExpanded",u.toggleRowExpanded="toggleRowExpanded",u.toggleAllRowsExpanded="toggleAllRowsExpanded";var Et=function(I){I.getToggleAllRowsExpandedProps=[Dt],I.getToggleRowExpandedProps=[Vn],I.stateReducers.push(at),I.useInstance.push($t),I.prepareRow.push(fn)};Et.pluginName="useExpanded";var Dt=function(I,G){var Y=G.instance;return[I,{onClick:function(te){Y.toggleAllRowsExpanded()},style:{cursor:"pointer"},title:"Toggle All Rows Expanded"}]},Vn=function(I,G){var Y=G.row;return[I,{onClick:function(){Y.toggleRowExpanded()},style:{cursor:"pointer"},title:"Toggle Row Expanded"}]};function at(I,G,Y,te){if(G.type===u.init)return o({expanded:{}},I);if(G.type===u.resetExpanded)return o({},I,{expanded:te.initialState.expanded||{}});if(G.type===u.toggleAllRowsExpanded){var ye=G.value,de=te.rowsById,ve=Object.keys(de).length===Object.keys(I.expanded).length;if(ye!==void 0?ye:!ve){var ze={};return Object.keys(de).forEach(function(ht){ze[ht]=!0}),o({},I,{expanded:ze})}return o({},I,{expanded:{}})}if(G.type===u.toggleRowExpanded){var je,We=G.id,ft=G.value,ot=I.expanded[We],pt=ft!==void 0?ft:!ot;if(!ot&&pt)return o({},I,{expanded:o({},I.expanded,(je={},je[We]=!0,je))});if(ot&&!pt){var Qe=I.expanded;return Qe[We],o({},I,{expanded:l(Qe,[We].map(c))})}return I}}function $t(I){var G=I.data,Y=I.rows,te=I.rowsById,ye=I.manualExpandedKey,de=ye===void 0?"expanded":ye,ve=I.paginateExpandedRows,ze=ve===void 0||ve,je=I.expandSubRows,We=je===void 0||je,ft=I.autoResetExpanded,ot=ft===void 0||ft,pt=I.getHooks,Qe=I.plugins,ht=I.state.expanded,St=I.dispatch;_(Qe,["useSortBy","useGroupBy","usePivotColumns","useGlobalFilter"],"useExpanded");var Rt=S(ot),en=!!(Object.keys(te).length&&Object.keys(ht).length);en&&Object.keys(te).some(function(Jn){return!ht[Jn]})&&(en=!1),M(function(){Rt()&&St({type:u.resetExpanded})},[St,G]);var Ln=i.useCallback(function(Jn,yn){St({type:u.toggleRowExpanded,id:Jn,value:yn})},[St]),tn=i.useCallback(function(Jn){return St({type:u.toggleAllRowsExpanded,value:Jn})},[St]),vt=i.useMemo(function(){return ze?$(Y,{manualExpandedKey:de,expanded:ht,expandSubRows:We}):Y},[ze,Y,de,ht,We]),Sn=i.useMemo(function(){return function(Jn){var yn=0;return Object.keys(Jn).forEach(function(bn){var dr=bn.split(".");yn=Math.max(yn,dr.length)}),yn}(ht)},[ht]),Vt=S(I),Tn=g(pt().getToggleAllRowsExpandedProps,{instance:Vt()});Object.assign(I,{preExpandedRows:Y,expandedRows:vt,rows:vt,expandedDepth:Sn,isAllRowsExpanded:en,toggleRowExpanded:Ln,toggleAllRowsExpanded:tn,getToggleAllRowsExpandedProps:Tn})}function fn(I,G){var Y=G.instance.getHooks,te=G.instance;I.toggleRowExpanded=function(ye){return te.toggleRowExpanded(I.id,ye)},I.getToggleRowExpandedProps=g(Y().getToggleRowExpandedProps,{instance:te,row:I})}var vn=function(I,G,Y){return I=I.filter(function(te){return G.some(function(ye){var de=te.values[ye];return String(de).toLowerCase().includes(String(Y).toLowerCase())})})};vn.autoRemove=function(I){return!I};var Bt=function(I,G,Y){return I.filter(function(te){return G.some(function(ye){var de=te.values[ye];return de===void 0||String(de).toLowerCase()===String(Y).toLowerCase()})})};Bt.autoRemove=function(I){return!I};var Hn=function(I,G,Y){return I.filter(function(te){return G.some(function(ye){var de=te.values[ye];return de===void 0||String(de)===String(Y)})})};Hn.autoRemove=function(I){return!I};var Nn=function(I,G,Y){return I.filter(function(te){return G.some(function(ye){return te.values[ye].includes(Y)})})};Nn.autoRemove=function(I){return!I||!I.length};var hr=function(I,G,Y){return I.filter(function(te){return G.some(function(ye){var de=te.values[ye];return de&&de.length&&Y.every(function(ve){return de.includes(ve)})})})};hr.autoRemove=function(I){return!I||!I.length};var Me=function(I,G,Y){return I.filter(function(te){return G.some(function(ye){var de=te.values[ye];return de&&de.length&&Y.some(function(ve){return de.includes(ve)})})})};Me.autoRemove=function(I){return!I||!I.length};var Mt=function(I,G,Y){return I.filter(function(te){return G.some(function(ye){var de=te.values[ye];return Y.includes(de)})})};Mt.autoRemove=function(I){return!I||!I.length};var Ue=function(I,G,Y){return I.filter(function(te){return G.some(function(ye){return te.values[ye]===Y})})};Ue.autoRemove=function(I){return I===void 0};var Ye=function(I,G,Y){return I.filter(function(te){return G.some(function(ye){return te.values[ye]==Y})})};Ye.autoRemove=function(I){return I==null};var Pt=function(I,G,Y){var te=Y||[],ye=te[0],de=te[1];if((ye=typeof ye=="number"?ye:-1/0)>(de=typeof de=="number"?de:1/0)){var ve=ye;ye=de,de=ve}return I.filter(function(ze){return G.some(function(je){var We=ze.values[je];return We>=ye&&We<=de})})};Pt.autoRemove=function(I){return!I||typeof I[0]!="number"&&typeof I[1]!="number"};var wt=Object.freeze({__proto__:null,text:vn,exactText:Bt,exactTextCase:Hn,includes:Nn,includesAll:hr,includesSome:Me,includesValue:Mt,exact:Ue,equals:Ye,between:Pt});u.resetFilters="resetFilters",u.setFilter="setFilter",u.setAllFilters="setAllFilters";var Pn=function(I){I.stateReducers.push(Rr),I.useInstance.push(vi)};function Rr(I,G,Y,te){if(G.type===u.init)return o({filters:[]},I);if(G.type===u.resetFilters)return o({},I,{filters:te.initialState.filters||[]});if(G.type===u.setFilter){var ye=G.columnId,de=G.filterValue,ve=te.allColumns,ze=te.filterTypes,je=ve.find(function(St){return St.id===ye});if(!je)throw new Error("React-Table: Could not find a column with id: "+ye);var We=z(je.filter,ze||{},wt),ft=I.filters.find(function(St){return St.id===ye}),ot=E(de,ft&&ft.value);return Z(We.autoRemove,ot,je)?o({},I,{filters:I.filters.filter(function(St){return St.id!==ye})}):o({},I,ft?{filters:I.filters.map(function(St){return St.id===ye?{id:ye,value:ot}:St})}:{filters:[].concat(I.filters,[{id:ye,value:ot}])})}if(G.type===u.setAllFilters){var pt=G.filters,Qe=te.allColumns,ht=te.filterTypes;return o({},I,{filters:E(pt,I.filters).filter(function(St){var Rt=Qe.find(function(en){return en.id===St.id});return!Z(z(Rt.filter,ht||{},wt).autoRemove,St.value,Rt)})})}}function vi(I){var G=I.data,Y=I.rows,te=I.flatRows,ye=I.rowsById,de=I.allColumns,ve=I.filterTypes,ze=I.manualFilters,je=I.defaultCanFilter,We=je!==void 0&&je,ft=I.disableFilters,ot=I.state.filters,pt=I.dispatch,Qe=I.autoResetFilters,ht=Qe===void 0||Qe,St=i.useCallback(function(Vt,Tn){pt({type:u.setFilter,columnId:Vt,filterValue:Tn})},[pt]),Rt=i.useCallback(function(Vt){pt({type:u.setAllFilters,filters:Vt})},[pt]);de.forEach(function(Vt){var Tn=Vt.id,Jn=Vt.accessor,yn=Vt.defaultCanFilter,bn=Vt.disableFilters;Vt.canFilter=Jn?B(bn!==!0&&void 0,ft!==!0&&void 0,!0):B(yn,We,!1),Vt.setFilter=function(Mn){return St(Vt.id,Mn)};var dr=ot.find(function(Mn){return Mn.id===Tn});Vt.filterValue=dr&&dr.value});var en=i.useMemo(function(){if(ze||!ot.length)return[Y,te,ye];var Vt=[],Tn={};return[function Jn(yn,bn){bn===void 0&&(bn=0);var dr=yn;return(dr=ot.reduce(function(Mn,fr){var lr=fr.id,Or=fr.value,nn=de.find(function(hi){return hi.id===lr});if(!nn)return Mn;bn===0&&(nn.preFilteredRows=Mn);var sr=z(nn.filter,ve||{},wt);return sr?(nn.filteredRows=sr(Mn,[lr],Or),nn.filteredRows):(console.warn("Could not find a valid 'column.filter' for column with the ID: "+nn.id+"."),Mn)},yn)).forEach(function(Mn){Vt.push(Mn),Tn[Mn.id]=Mn,Mn.subRows&&(Mn.subRows=Mn.subRows&&Mn.subRows.length>0?Jn(Mn.subRows,bn+1):Mn.subRows)}),dr}(Y),Vt,Tn]},[ze,ot,Y,te,ye,de,ve]),Ln=en[0],tn=en[1],vt=en[2];i.useMemo(function(){de.filter(function(Vt){return!ot.find(function(Tn){return Tn.id===Vt.id})}).forEach(function(Vt){Vt.preFilteredRows=Ln,Vt.filteredRows=Ln})},[Ln,ot,de]);var Sn=S(ht);M(function(){Sn()&&pt({type:u.resetFilters})},[pt,ze?null:G]),Object.assign(I,{preFilteredRows:Y,preFilteredFlatRows:te,preFilteredRowsById:ye,filteredRows:Ln,filteredFlatRows:tn,filteredRowsById:vt,rows:Ln,flatRows:tn,rowsById:vt,setFilter:St,setAllFilters:Rt})}Pn.pluginName="useFilters",u.resetGlobalFilter="resetGlobalFilter",u.setGlobalFilter="setGlobalFilter";var Rn=function(I){I.stateReducers.push(ss),I.useInstance.push(as)};function ss(I,G,Y,te){if(G.type===u.resetGlobalFilter)return o({},I,{globalFilter:te.initialState.globalFilter||void 0});if(G.type===u.setGlobalFilter){var ye=G.filterValue,de=te.userFilterTypes,ve=z(te.globalFilter,de||{},wt),ze=E(ye,I.globalFilter);return Z(ve.autoRemove,ze)?(I.globalFilter,l(I,["globalFilter"])):o({},I,{globalFilter:ze})}}function as(I){var G=I.data,Y=I.rows,te=I.flatRows,ye=I.rowsById,de=I.allColumns,ve=I.filterTypes,ze=I.globalFilter,je=I.manualGlobalFilter,We=I.state.globalFilter,ft=I.dispatch,ot=I.autoResetGlobalFilter,pt=ot===void 0||ot,Qe=I.disableGlobalFilter,ht=i.useCallback(function(vt){ft({type:u.setGlobalFilter,filterValue:vt})},[ft]),St=i.useMemo(function(){if(je||We===void 0)return[Y,te,ye];var vt=[],Sn={},Vt=z(ze,ve||{},wt);if(!Vt)return console.warn("Could not find a valid 'globalFilter' option."),Y;de.forEach(function(Jn){var yn=Jn.disableGlobalFilter;Jn.canFilter=B(yn!==!0&&void 0,Qe!==!0&&void 0,!0)});var Tn=de.filter(function(Jn){return Jn.canFilter===!0});return[function Jn(yn){return(yn=Vt(yn,Tn.map(function(bn){return bn.id}),We)).forEach(function(bn){vt.push(bn),Sn[bn.id]=bn,bn.subRows=bn.subRows&&bn.subRows.length?Jn(bn.subRows):bn.subRows}),yn}(Y),vt,Sn]},[je,We,ze,ve,de,Y,te,ye,Qe]),Rt=St[0],en=St[1],Ln=St[2],tn=S(pt);M(function(){tn()&&ft({type:u.resetGlobalFilter})},[ft,je?null:G]),Object.assign(I,{preGlobalFilteredRows:Y,preGlobalFilteredFlatRows:te,preGlobalFilteredRowsById:ye,globalFilteredRows:Rt,globalFilteredFlatRows:en,globalFilteredRowsById:Ln,rows:Rt,flatRows:en,rowsById:Ln,setGlobalFilter:ht,disableGlobalFilter:Qe})}function _l(I,G){return G.reduce(function(Y,te){return Y+(typeof te=="number"?te:0)},0)}Rn.pluginName="useGlobalFilter";var oo=Object.freeze({__proto__:null,sum:_l,min:function(I){var G=I[0]||0;return I.forEach(function(Y){typeof Y=="number"&&(G=Math.min(G,Y))}),G},max:function(I){var G=I[0]||0;return I.forEach(function(Y){typeof Y=="number"&&(G=Math.max(G,Y))}),G},minMax:function(I){var G=I[0]||0,Y=I[0]||0;return I.forEach(function(te){typeof te=="number"&&(G=Math.min(G,te),Y=Math.max(Y,te))}),G+".."+Y},average:function(I){return _l(0,I)/I.length},median:function(I){if(!I.length)return null;var G=Math.floor(I.length/2),Y=[].concat(I).sort(function(te,ye){return te-ye});return I.length%2!=0?Y[G]:(Y[G-1]+Y[G])/2},unique:function(I){return Array.from(new Set(I).values())},uniqueCount:function(I){return new Set(I).size},count:function(I){return I.length}}),lo=[],co={};u.resetGroupBy="resetGroupBy",u.setGroupBy="setGroupBy",u.toggleGroupBy="toggleGroupBy";var Bo=function(I){I.getGroupByToggleProps=[jo],I.stateReducers.push(Uo),I.visibleColumnsDeps.push(function(G,Y){var te=Y.instance;return[].concat(G,[te.state.groupBy])}),I.visibleColumns.push(su),I.useInstance.push(Rh),I.prepareRow.push(Ia)};Bo.pluginName="useGroupBy";var jo=function(I,G){var Y=G.header;return[I,{onClick:Y.canGroupBy?function(te){te.persist(),Y.toggleGroupBy()}:void 0,style:{cursor:Y.canGroupBy?"pointer":void 0},title:"Toggle GroupBy"}]};function Uo(I,G,Y,te){if(G.type===u.init)return o({groupBy:[]},I);if(G.type===u.resetGroupBy)return o({},I,{groupBy:te.initialState.groupBy||[]});if(G.type===u.setGroupBy)return o({},I,{groupBy:G.value});if(G.type===u.toggleGroupBy){var ye=G.columnId,de=G.value,ve=de!==void 0?de:!I.groupBy.includes(ye);return o({},I,ve?{groupBy:[].concat(I.groupBy,[ye])}:{groupBy:I.groupBy.filter(function(ze){return ze!==ye})})}}function su(I,G){var Y=G.instance.state.groupBy,te=Y.map(function(de){return I.find(function(ve){return ve.id===de})}).filter(Boolean),ye=I.filter(function(de){return!Y.includes(de.id)});return(I=[].concat(te,ye)).forEach(function(de){de.isGrouped=Y.includes(de.id),de.groupedIndex=Y.indexOf(de.id)}),I}var fc={};function Rh(I){var G=I.data,Y=I.rows,te=I.flatRows,ye=I.rowsById,de=I.allColumns,ve=I.flatHeaders,ze=I.groupByFn,je=ze===void 0?au:ze,We=I.manualGroupBy,ft=I.aggregations,ot=ft===void 0?fc:ft,pt=I.plugins,Qe=I.state.groupBy,ht=I.dispatch,St=I.autoResetGroupBy,Rt=St===void 0||St,en=I.disableGroupBy,Ln=I.defaultCanGroupBy,tn=I.getHooks;_(pt,["useColumnOrder","useFilters"],"useGroupBy");var vt=S(I);de.forEach(function(nn){var sr=nn.accessor,hi=nn.defaultGroupBy,Fs=nn.disableGroupBy;nn.canGroupBy=sr?B(nn.canGroupBy,Fs!==!0&&void 0,en!==!0&&void 0,!0):B(nn.canGroupBy,hi,Ln,!1),nn.canGroupBy&&(nn.toggleGroupBy=function(){return I.toggleGroupBy(nn.id)}),nn.Aggregated=nn.Aggregated||nn.Cell});var Sn=i.useCallback(function(nn,sr){ht({type:u.toggleGroupBy,columnId:nn,value:sr})},[ht]),Vt=i.useCallback(function(nn){ht({type:u.setGroupBy,value:nn})},[ht]);ve.forEach(function(nn){nn.getGroupByToggleProps=g(tn().getGroupByToggleProps,{instance:vt(),header:nn})});var Tn=i.useMemo(function(){if(We||!Qe.length)return[Y,te,ye,lo,co,te,ye];var nn=Qe.filter(function(Wi){return de.find(function(mc){return mc.id===Wi})}),sr=[],hi={},Fs=[],pn={},Kr=[],Mi={},Bs=function Wi(mc,wl,W_){if(wl===void 0&&(wl=0),wl===nn.length)return mc.map(function(Xp){return o({},Xp,{depth:wl})});var of=nn[wl],lf=je(mc,of);return Object.entries(lf).map(function(Xp,q_){var T0=Xp[0],cf=Xp[1],uf=of+":"+T0,E0=Wi(cf,wl+1,uf=W_?W_+">"+uf:uf),uu=wl?j(cf,"leafRows"):cf,KA=function(La,Kp,X_){var gc={};return de.forEach(function(Yr){if(nn.includes(Yr.id))gc[Yr.id]=Kp[0]?Kp[0].values[Yr.id]:null;else{var K_=typeof Yr.aggregate=="function"?Yr.aggregate:ot[Yr.aggregate]||oo[Yr.aggregate];if(K_){var Yp=Kp.map(function(hf){return hf.values[Yr.id]}),ZA=La.map(function(hf){var df=hf.values[Yr.id];if(!X_&&Yr.aggregateValue){var Zp=typeof Yr.aggregateValue=="function"?Yr.aggregateValue:ot[Yr.aggregateValue]||oo[Yr.aggregateValue];if(!Zp)throw console.info({column:Yr}),new Error("React Table: Invalid column.aggregateValue option for column listed above");df=Zp(df,hf,Yr)}return df});gc[Yr.id]=K_(ZA,Yp)}else{if(Yr.aggregate)throw console.info({column:Yr}),new Error("React Table: Invalid column.aggregate option for column listed above");gc[Yr.id]=null}}}),gc}(uu,cf,wl),YA={id:uf,isGrouped:!0,groupByID:of,groupByVal:T0,values:KA,subRows:E0,leafRows:uu,depth:wl,index:q_};return E0.forEach(function(La){sr.push(La),hi[La.id]=La,La.isGrouped?(Fs.push(La),pn[La.id]=La):(Kr.push(La),Mi[La.id]=La)}),YA})}(Y);return Bs.forEach(function(Wi){sr.push(Wi),hi[Wi.id]=Wi,Wi.isGrouped?(Fs.push(Wi),pn[Wi.id]=Wi):(Kr.push(Wi),Mi[Wi.id]=Wi)}),[Bs,sr,hi,Fs,pn,Kr,Mi]},[We,Qe,Y,te,ye,de,ot,je]),Jn=Tn[0],yn=Tn[1],bn=Tn[2],dr=Tn[3],Mn=Tn[4],fr=Tn[5],lr=Tn[6],Or=S(Rt);M(function(){Or()&&ht({type:u.resetGroupBy})},[ht,We?null:G]),Object.assign(I,{preGroupedRows:Y,preGroupedFlatRow:te,preGroupedRowsById:ye,groupedRows:Jn,groupedFlatRows:yn,groupedRowsById:bn,onlyGroupedFlatRows:dr,onlyGroupedRowsById:Mn,nonGroupedFlatRows:fr,nonGroupedRowsById:lr,rows:Jn,flatRows:yn,rowsById:bn,toggleGroupBy:Sn,setGroupBy:Vt})}function Ia(I){I.allCells.forEach(function(G){var Y;G.isGrouped=G.column.isGrouped&&G.column.id===I.groupByID,G.isPlaceholder=!G.isGrouped&&G.column.isGrouped,G.isAggregated=!G.isGrouped&&!G.isPlaceholder&&((Y=I.subRows)==null?void 0:Y.length)})}function au(I,G){return I.reduce(function(Y,te,ye){var de=""+te.values[G];return Y[de]=Array.isArray(Y[de])?Y[de]:[],Y[de].push(te),Y},{})}var ou=/([0-9]+)/gm;function lu(I,G){return I===G?0:I>G?1:-1}function zo(I,G,Y){return[I.values[Y],G.values[Y]]}function cu(I){return typeof I=="number"?isNaN(I)||I===1/0||I===-1/0?"":String(I):typeof I=="string"?I:""}var Oh=Object.freeze({__proto__:null,alphanumeric:function(I,G,Y){var te=zo(I,G,Y),ye=te[0],de=te[1];for(ye=cu(ye),de=cu(de),ye=ye.split(ou).filter(Boolean),de=de.split(ou).filter(Boolean);ye.length&&de.length;){var ve=ye.shift(),ze=de.shift(),je=parseInt(ve,10),We=parseInt(ze,10),ft=[je,We].sort();if(isNaN(ft[0])){if(ve>ze)return 1;if(ze>ve)return-1}else{if(isNaN(ft[1]))return isNaN(je)?-1:1;if(je>We)return 1;if(We>je)return-1}}return ye.length-de.length},datetime:function(I,G,Y){var te=zo(I,G,Y),ye=te[0],de=te[1];return lu(ye=ye.getTime(),de=de.getTime())},basic:function(I,G,Y){var te=zo(I,G,Y);return lu(te[0],te[1])},string:function(I,G,Y){var te=zo(I,G,Y),ye=te[0],de=te[1];for(ye=ye.split("").filter(Boolean),de=de.split("").filter(Boolean);ye.length&&de.length;){var ve=ye.shift(),ze=de.shift(),je=ve.toLowerCase(),We=ze.toLowerCase();if(je>We)return 1;if(We>je)return-1;if(ve>ze)return 1;if(ze>ve)return-1}return ye.length-de.length},number:function(I,G,Y){var te=zo(I,G,Y),ye=te[0],de=te[1],ve=/[^0-9.]/gi;return lu(ye=Number(String(ye).replace(ve,"")),de=Number(String(de).replace(ve,"")))}});u.resetSortBy="resetSortBy",u.setSortBy="setSortBy",u.toggleSortBy="toggleSortBy",u.clearSortBy="clearSortBy",f.sortType="alphanumeric",f.sortDescFirst=!1;var re=function(I){I.getSortByToggleProps=[Ee],I.stateReducers.push(Ie),I.useInstance.push(Ne)};re.pluginName="useSortBy";var Ee=function(I,G){var Y=G.instance,te=G.column,ye=Y.isMultiSortEvent,de=ye===void 0?function(ve){return ve.shiftKey}:ye;return[I,{onClick:te.canSort?function(ve){ve.persist(),te.toggleSortBy(void 0,!Y.disableMultiSort&&de(ve))}:void 0,style:{cursor:te.canSort?"pointer":void 0},title:te.canSort?"Toggle SortBy":void 0}]};function Ie(I,G,Y,te){if(G.type===u.init)return o({sortBy:[]},I);if(G.type===u.resetSortBy)return o({},I,{sortBy:te.initialState.sortBy||[]});if(G.type===u.clearSortBy)return o({},I,{sortBy:I.sortBy.filter(function(vt){return vt.id!==G.columnId})});if(G.type===u.setSortBy)return o({},I,{sortBy:G.sortBy});if(G.type===u.toggleSortBy){var ye,de=G.columnId,ve=G.desc,ze=G.multi,je=te.allColumns,We=te.disableMultiSort,ft=te.disableSortRemove,ot=te.disableMultiRemove,pt=te.maxMultiSortColCount,Qe=pt===void 0?Number.MAX_SAFE_INTEGER:pt,ht=I.sortBy,St=je.find(function(vt){return vt.id===de}).sortDescFirst,Rt=ht.find(function(vt){return vt.id===de}),en=ht.findIndex(function(vt){return vt.id===de}),Ln=ve!=null,tn=[];return(ye=!We&&ze?Rt?"toggle":"add":en!==ht.length-1||ht.length!==1?"replace":Rt?"toggle":"replace")!="toggle"||ft||Ln||ze&&ot||!(Rt&&Rt.desc&&!St||!Rt.desc&&St)||(ye="remove"),ye==="replace"?tn=[{id:de,desc:Ln?ve:St}]:ye==="add"?(tn=[].concat(ht,[{id:de,desc:Ln?ve:St}])).splice(0,tn.length-Qe):ye==="toggle"?tn=ht.map(function(vt){return vt.id===de?o({},vt,{desc:Ln?ve:!Rt.desc}):vt}):ye==="remove"&&(tn=ht.filter(function(vt){return vt.id!==de})),o({},I,{sortBy:tn})}}function Ne(I){var G=I.data,Y=I.rows,te=I.flatRows,ye=I.allColumns,de=I.orderByFn,ve=de===void 0?Ae:de,ze=I.sortTypes,je=I.manualSortBy,We=I.defaultCanSort,ft=I.disableSortBy,ot=I.flatHeaders,pt=I.state.sortBy,Qe=I.dispatch,ht=I.plugins,St=I.getHooks,Rt=I.autoResetSortBy,en=Rt===void 0||Rt;_(ht,["useFilters","useGlobalFilter","useGroupBy","usePivotColumns"],"useSortBy");var Ln=i.useCallback(function(yn){Qe({type:u.setSortBy,sortBy:yn})},[Qe]),tn=i.useCallback(function(yn,bn,dr){Qe({type:u.toggleSortBy,columnId:yn,desc:bn,multi:dr})},[Qe]),vt=S(I);ot.forEach(function(yn){var bn=yn.accessor,dr=yn.canSort,Mn=yn.disableSortBy,fr=yn.id,lr=bn?B(Mn!==!0&&void 0,ft!==!0&&void 0,!0):B(We,dr,!1);yn.canSort=lr,yn.canSort&&(yn.toggleSortBy=function(nn,sr){return tn(yn.id,nn,sr)},yn.clearSortBy=function(){Qe({type:u.clearSortBy,columnId:yn.id})}),yn.getSortByToggleProps=g(St().getSortByToggleProps,{instance:vt(),column:yn});var Or=pt.find(function(nn){return nn.id===fr});yn.isSorted=!!Or,yn.sortedIndex=pt.findIndex(function(nn){return nn.id===fr}),yn.isSortedDesc=yn.isSorted?Or.desc:void 0});var Sn=i.useMemo(function(){if(je||!pt.length)return[Y,te];var yn=[],bn=pt.filter(function(dr){return ye.find(function(Mn){return Mn.id===dr.id})});return[function dr(Mn){var fr=ve(Mn,bn.map(function(lr){var Or=ye.find(function(hi){return hi.id===lr.id});if(!Or)throw new Error("React-Table: Could not find a column with id: "+lr.id+" while sorting");var nn=Or.sortType,sr=W(nn)||(ze||{})[nn]||Oh[nn];if(!sr)throw new Error("React-Table: Could not find a valid sortType of '"+nn+"' for column '"+lr.id+"'.");return function(hi,Fs){return sr(hi,Fs,lr.id,lr.desc)}}),bn.map(function(lr){var Or=ye.find(function(nn){return nn.id===lr.id});return Or&&Or.sortInverted?lr.desc:!lr.desc}));return fr.forEach(function(lr){yn.push(lr),lr.subRows&&lr.subRows.length!==0&&(lr.subRows=dr(lr.subRows))}),fr}(Y),yn]},[je,pt,Y,te,ye,ve,ze]),Vt=Sn[0],Tn=Sn[1],Jn=S(en);M(function(){Jn()&&Qe({type:u.resetSortBy})},[je?null:G]),Object.assign(I,{preSortedRows:Y,preSortedFlatRows:te,sortedRows:Vt,sortedFlatRows:Tn,rows:Vt,flatRows:Tn,setSortBy:Ln,toggleSortBy:tn})}function Ae(I,G,Y){return[].concat(I).sort(function(te,ye){for(var de=0;de<G.length;de+=1){var ve=G[de],ze=Y[de]===!1||Y[de]==="desc",je=ve(te,ye);if(je!==0)return ze?-je:je}return Y[0]?te.index-ye.index:ye.index-te.index})}u.resetPage="resetPage",u.gotoPage="gotoPage",u.setPageSize="setPageSize";var st=function(I){I.stateReducers.push(At),I.useInstance.push(kt)};function At(I,G,Y,te){if(G.type===u.init)return o({pageSize:10,pageIndex:0},I);if(G.type===u.resetPage)return o({},I,{pageIndex:te.initialState.pageIndex||0});if(G.type===u.gotoPage){var ye=te.pageCount,de=te.page,ve=E(G.pageIndex,I.pageIndex),ze=!1;return ve>I.pageIndex?ze=ye===-1?de.length>=I.pageSize:ve<ye:ve<I.pageIndex&&(ze=ve>-1),ze?o({},I,{pageIndex:ve}):I}if(G.type===u.setPageSize){var je=G.pageSize,We=I.pageSize*I.pageIndex;return o({},I,{pageIndex:Math.floor(We/je),pageSize:je})}}function kt(I){var G=I.rows,Y=I.autoResetPage,te=Y===void 0||Y,ye=I.manualExpandedKey,de=ye===void 0?"expanded":ye,ve=I.plugins,ze=I.pageCount,je=I.paginateExpandedRows,We=je===void 0||je,ft=I.expandSubRows,ot=ft===void 0||ft,pt=I.state,Qe=pt.pageSize,ht=pt.pageIndex,St=pt.expanded,Rt=pt.globalFilter,en=pt.filters,Ln=pt.groupBy,tn=pt.sortBy,vt=I.dispatch,Sn=I.data,Vt=I.manualPagination;_(ve,["useGlobalFilter","useFilters","useGroupBy","useSortBy","useExpanded"],"usePagination");var Tn=S(te);M(function(){Tn()&&vt({type:u.resetPage})},[vt,Vt?null:Sn,Rt,en,Ln,tn]);var Jn=Vt?ze:Math.ceil(G.length/Qe),yn=i.useMemo(function(){return Jn>0?[].concat(new Array(Jn)).fill(null).map(function(sr,hi){return hi}):[]},[Jn]),bn=i.useMemo(function(){var sr;if(Vt)sr=G;else{var hi=Qe*ht,Fs=hi+Qe;sr=G.slice(hi,Fs)}return We?sr:$(sr,{manualExpandedKey:de,expanded:St,expandSubRows:ot})},[ot,St,de,Vt,ht,Qe,We,G]),dr=ht>0,Mn=Jn===-1?bn.length>=Qe:ht<Jn-1,fr=i.useCallback(function(sr){vt({type:u.gotoPage,pageIndex:sr})},[vt]),lr=i.useCallback(function(){return fr(function(sr){return sr-1})},[fr]),Or=i.useCallback(function(){return fr(function(sr){return sr+1})},[fr]),nn=i.useCallback(function(sr){vt({type:u.setPageSize,pageSize:sr})},[vt]);Object.assign(I,{pageOptions:yn,pageCount:Jn,page:bn,canPreviousPage:dr,canNextPage:Mn,gotoPage:fr,previousPage:lr,nextPage:Or,setPageSize:nn})}st.pluginName="usePagination",u.resetPivot="resetPivot",u.togglePivot="togglePivot";var jt=function(I){I.getPivotToggleProps=[hn],I.stateReducers.push(Gt),I.useInstanceAfterData.push(Un),I.allColumns.push(Dn),I.accessValue.push(Ur),I.materializedColumns.push(Lr),I.materializedColumnsDeps.push(rr),I.visibleColumns.push(an),I.visibleColumnsDeps.push(qr),I.useInstance.push(Zn),I.prepareRow.push(Ii)};jt.pluginName="usePivotColumns";var xn=[],hn=function(I,G){var Y=G.header;return[I,{onClick:Y.canPivot?function(te){te.persist(),Y.togglePivot()}:void 0,style:{cursor:Y.canPivot?"pointer":void 0},title:"Toggle Pivot"}]};function Gt(I,G,Y,te){if(G.type===u.init)return o({pivotColumns:xn},I);if(G.type===u.resetPivot)return o({},I,{pivotColumns:te.initialState.pivotColumns||xn});if(G.type===u.togglePivot){var ye=G.columnId,de=G.value,ve=de!==void 0?de:!I.pivotColumns.includes(ye);return o({},I,ve?{pivotColumns:[].concat(I.pivotColumns,[ye])}:{pivotColumns:I.pivotColumns.filter(function(ze){return ze!==ye})})}}function Un(I){I.allColumns.forEach(function(G){G.isPivotSource=I.state.pivotColumns.includes(G.id)})}function Dn(I,G){var Y=G.instance;return I.forEach(function(te){te.isPivotSource=Y.state.pivotColumns.includes(te.id),te.uniqueValues=new Set}),I}function Ur(I,G){var Y=G.column;return Y.uniqueValues&&I!==void 0&&Y.uniqueValues.add(I),I}function Lr(I,G){var Y=G.instance,te=Y.allColumns,ye=Y.state;if(!ye.pivotColumns.length||!ye.groupBy||!ye.groupBy.length)return I;var de=ye.pivotColumns.map(function(je){return te.find(function(We){return We.id===je})}).filter(Boolean),ve=te.filter(function(je){return!je.isPivotSource&&!ye.groupBy.includes(je.id)&&!ye.pivotColumns.includes(je.id)}),ze=R(function je(We,ft,ot){We===void 0&&(We=0),ot===void 0&&(ot=[]);var pt=de[We];return pt?Array.from(pt.uniqueValues).sort().map(function(Qe){var ht=o({},pt,{Header:pt.PivotHeader||typeof pt.header=="string"?pt.Header+": "+Qe:Qe,isPivotGroup:!0,parent:ft,depth:We,id:ft?ft.id+"."+pt.id+"."+Qe:pt.id+"."+Qe,pivotValue:Qe});return ht.columns=je(We+1,ht,[].concat(ot,[function(St){return St.values[pt.id]===Qe}])),ht}):ve.map(function(Qe){return o({},Qe,{canPivot:!1,isPivoted:!0,parent:ft,depth:We,id:""+(ft?ft.id+"."+Qe.id:Qe.id),accessor:function(ht,St,Rt){if(ot.every(function(en){return en(Rt)}))return Rt.values[Qe.id]}})})}());return[].concat(I,ze)}function rr(I,G){var Y=G.instance.state,te=Y.pivotColumns,ye=Y.groupBy;return[].concat(I,[te,ye])}function an(I,G){var Y=G.instance.state;return I=I.filter(function(te){return!te.isPivotSource}),Y.pivotColumns.length&&Y.groupBy&&Y.groupBy.length&&(I=I.filter(function(te){return te.isGrouped||te.isPivoted})),I}function qr(I,G){var Y=G.instance;return[].concat(I,[Y.state.pivotColumns,Y.state.groupBy])}function Zn(I){var G=I.columns,Y=I.allColumns,te=I.flatHeaders,ye=I.getHooks,de=I.plugins,ve=I.dispatch,ze=I.autoResetPivot,je=ze===void 0||ze,We=I.manaulPivot,ft=I.disablePivot,ot=I.defaultCanPivot;_(de,["useGroupBy"],"usePivotColumns");var pt=S(I);Y.forEach(function(ht){var St=ht.accessor,Rt=ht.defaultPivot,en=ht.disablePivot;ht.canPivot=St?B(ht.canPivot,en!==!0&&void 0,ft!==!0&&void 0,!0):B(ht.canPivot,Rt,ot,!1),ht.canPivot&&(ht.togglePivot=function(){return I.togglePivot(ht.id)}),ht.Aggregated=ht.Aggregated||ht.Cell}),te.forEach(function(ht){ht.getPivotToggleProps=g(ye().getPivotToggleProps,{instance:pt(),header:ht})});var Qe=S(je);M(function(){Qe()&&ve({type:u.resetPivot})},[ve,We?null:G]),Object.assign(I,{togglePivot:function(ht,St){ve({type:u.togglePivot,columnId:ht,value:St})}})}function Ii(I){I.allCells.forEach(function(G){G.isPivoted=G.column.isPivoted})}u.resetSelectedRows="resetSelectedRows",u.toggleAllRowsSelected="toggleAllRowsSelected",u.toggleRowSelected="toggleRowSelected",u.toggleAllPageRowsSelected="toggleAllPageRowsSelected";var Mr=function(I){I.getToggleRowSelectedProps=[Di],I.getToggleAllRowsSelectedProps=[uo],I.getToggleAllPageRowsSelectedProps=[wr],I.stateReducers.push(Li),I.useInstance.push(ci),I.prepareRow.push(ui)};Mr.pluginName="useRowSelect";var Di=function(I,G){var Y=G.instance,te=G.row,ye=Y.manualRowSelectedKey,de=ye===void 0?"isSelected":ye;return[I,{onChange:function(ve){te.toggleRowSelected(ve.target.checked)},style:{cursor:"pointer"},checked:!(!te.original||!te.original[de])||te.isSelected,title:"Toggle Row Selected",indeterminate:te.isSomeSelected}]},uo=function(I,G){var Y=G.instance;return[I,{onChange:function(te){Y.toggleAllRowsSelected(te.target.checked)},style:{cursor:"pointer"},checked:Y.isAllRowsSelected,title:"Toggle All Rows Selected",indeterminate:!!(!Y.isAllRowsSelected&&Object.keys(Y.state.selectedRowIds).length)}]},wr=function(I,G){var Y=G.instance;return[I,{onChange:function(te){Y.toggleAllPageRowsSelected(te.target.checked)},style:{cursor:"pointer"},checked:Y.isAllPageRowsSelected,title:"Toggle All Current Page Rows Selected",indeterminate:!!(!Y.isAllPageRowsSelected&&Y.page.some(function(te){var ye=te.id;return Y.state.selectedRowIds[ye]}))}]};function Li(I,G,Y,te){if(G.type===u.init)return o({selectedRowIds:{}},I);if(G.type===u.resetSelectedRows)return o({},I,{selectedRowIds:te.initialState.selectedRowIds||{}});if(G.type===u.toggleAllRowsSelected){var ye=G.value,de=te.isAllRowsSelected,ve=te.rowsById,ze=te.nonGroupedRowsById,je=ze===void 0?ve:ze,We=ye!==void 0?ye:!de,ft=Object.assign({},I.selectedRowIds);return We?Object.keys(je).forEach(function(fr){ft[fr]=!0}):Object.keys(je).forEach(function(fr){delete ft[fr]}),o({},I,{selectedRowIds:ft})}if(G.type===u.toggleRowSelected){var ot=G.id,pt=G.value,Qe=te.rowsById,ht=te.selectSubRows,St=ht===void 0||ht,Rt=te.getSubRows,en=I.selectedRowIds[ot],Ln=pt!==void 0?pt:!en;if(en===Ln)return I;var tn=o({},I.selectedRowIds);return function fr(lr){var Or=Qe[lr];if(Or&&(Or.isGrouped||(Ln?tn[lr]=!0:delete tn[lr]),St&&Rt(Or)))return Rt(Or).forEach(function(nn){return fr(nn.id)})}(ot),o({},I,{selectedRowIds:tn})}if(G.type===u.toggleAllPageRowsSelected){var vt=G.value,Sn=te.page,Vt=te.rowsById,Tn=te.selectSubRows,Jn=Tn===void 0||Tn,yn=te.isAllPageRowsSelected,bn=te.getSubRows,dr=vt!==void 0?vt:!yn,Mn=o({},I.selectedRowIds);return Sn.forEach(function(fr){return function lr(Or){var nn=Vt[Or];if(nn.isGrouped||(dr?Mn[Or]=!0:delete Mn[Or]),Jn&&bn(nn))return bn(nn).forEach(function(sr){return lr(sr.id)})}(fr.id)}),o({},I,{selectedRowIds:Mn})}return I}function ci(I){var G=I.data,Y=I.rows,te=I.getHooks,ye=I.plugins,de=I.rowsById,ve=I.nonGroupedRowsById,ze=ve===void 0?de:ve,je=I.autoResetSelectedRows,We=je===void 0||je,ft=I.state.selectedRowIds,ot=I.selectSubRows,pt=ot===void 0||ot,Qe=I.dispatch,ht=I.page,St=I.getSubRows;_(ye,["useFilters","useGroupBy","useSortBy","useExpanded","usePagination"],"useRowSelect");var Rt=i.useMemo(function(){var bn=[];return Y.forEach(function(dr){var Mn=pt?function fr(lr,Or,nn){if(Or[lr.id])return!0;var sr=nn(lr);if(sr&&sr.length){var hi=!0,Fs=!1;return sr.forEach(function(pn){Fs&&!hi||(fr(pn,Or,nn)?Fs=!0:hi=!1)}),!!hi||!!Fs&&null}return!1}(dr,ft,St):!!ft[dr.id];dr.isSelected=!!Mn,dr.isSomeSelected=Mn===null,Mn&&bn.push(dr)}),bn},[Y,pt,ft,St]),en=!!(Object.keys(ze).length&&Object.keys(ft).length),Ln=en;en&&Object.keys(ze).some(function(bn){return!ft[bn]})&&(en=!1),en||ht&&ht.length&&ht.some(function(bn){var dr=bn.id;return!ft[dr]})&&(Ln=!1);var tn=S(We);M(function(){tn()&&Qe({type:u.resetSelectedRows})},[Qe,G]);var vt=i.useCallback(function(bn){return Qe({type:u.toggleAllRowsSelected,value:bn})},[Qe]),Sn=i.useCallback(function(bn){return Qe({type:u.toggleAllPageRowsSelected,value:bn})},[Qe]),Vt=i.useCallback(function(bn,dr){return Qe({type:u.toggleRowSelected,id:bn,value:dr})},[Qe]),Tn=S(I),Jn=g(te().getToggleAllRowsSelectedProps,{instance:Tn()}),yn=g(te().getToggleAllPageRowsSelectedProps,{instance:Tn()});Object.assign(I,{selectedFlatRows:Rt,isAllRowsSelected:en,isAllPageRowsSelected:Ln,toggleRowSelected:Vt,toggleAllRowsSelected:vt,getToggleAllRowsSelectedProps:Jn,getToggleAllPageRowsSelectedProps:yn,toggleAllPageRowsSelected:Sn})}function ui(I,G){var Y=G.instance;I.toggleRowSelected=function(te){return Y.toggleRowSelected(I.id,te)},I.getToggleRowSelectedProps=g(Y.getHooks().getToggleRowSelectedProps,{instance:Y,row:I})}var Xr=function(I){return{}},ir=function(I){return{}};u.setRowState="setRowState",u.setCellState="setCellState",u.resetRowState="resetRowState";var ma=function(I){I.stateReducers.push(gn),I.useInstance.push(pc),I.prepareRow.push(H)};function gn(I,G,Y,te){var ye=te.initialRowStateAccessor,de=ye===void 0?Xr:ye,ve=te.initialCellStateAccessor,ze=ve===void 0?ir:ve,je=te.rowsById;if(G.type===u.init)return o({rowState:{}},I);if(G.type===u.resetRowState)return o({},I,{rowState:te.initialState.rowState||{}});if(G.type===u.setRowState){var We,ft=G.rowId,ot=G.value,pt=I.rowState[ft]!==void 0?I.rowState[ft]:de(je[ft]);return o({},I,{rowState:o({},I.rowState,(We={},We[ft]=E(ot,pt),We))})}if(G.type===u.setCellState){var Qe,ht,St,Rt,en,Ln=G.rowId,tn=G.columnId,vt=G.value,Sn=I.rowState[Ln]!==void 0?I.rowState[Ln]:de(je[Ln]),Vt=(Sn==null||(Qe=Sn.cellState)==null?void 0:Qe[tn])!==void 0?Sn.cellState[tn]:ze((ht=je[Ln])==null||(St=ht.cells)==null?void 0:St.find(function(Tn){return Tn.column.id===tn}));return o({},I,{rowState:o({},I.rowState,(en={},en[Ln]=o({},Sn,{cellState:o({},Sn.cellState||{},(Rt={},Rt[tn]=E(vt,Vt),Rt))}),en))})}}function pc(I){var G=I.autoResetRowState,Y=G===void 0||G,te=I.data,ye=I.dispatch,de=i.useCallback(function(je,We){return ye({type:u.setRowState,rowId:je,value:We})},[ye]),ve=i.useCallback(function(je,We,ft){return ye({type:u.setCellState,rowId:je,columnId:We,value:ft})},[ye]),ze=S(Y);M(function(){ze()&&ye({type:u.resetRowState})},[te]),Object.assign(I,{setRowState:de,setCellState:ve})}function H(I,G){var Y=G.instance,te=Y.initialRowStateAccessor,ye=te===void 0?Xr:te,de=Y.initialCellStateAccessor,ve=de===void 0?ir:de,ze=Y.state.rowState;I&&(I.state=ze[I.id]!==void 0?ze[I.id]:ye(I),I.setState=function(je){return Y.setRowState(I.id,je)},I.cells.forEach(function(je){I.state.cellState||(I.state.cellState={}),je.state=I.state.cellState[je.column.id]!==void 0?I.state.cellState[je.column.id]:ve(je),je.setState=function(We){return Y.setCellState(I.id,je.column.id,We)}}))}ma.pluginName="useRowState",u.resetColumnOrder="resetColumnOrder",u.setColumnOrder="setColumnOrder";var V=function(I){I.stateReducers.push(ie),I.visibleColumnsDeps.push(function(G,Y){var te=Y.instance;return[].concat(G,[te.state.columnOrder])}),I.visibleColumns.push(J),I.useInstance.push(ae)};function ie(I,G,Y,te){return G.type===u.init?o({columnOrder:[]},I):G.type===u.resetColumnOrder?o({},I,{columnOrder:te.initialState.columnOrder||[]}):G.type===u.setColumnOrder?o({},I,{columnOrder:E(G.columnOrder,I.columnOrder)}):void 0}function J(I,G){var Y=G.instance.state.columnOrder;if(!Y||!Y.length)return I;for(var te=[].concat(Y),ye=[].concat(I),de=[],ve=function(){var ze=te.shift(),je=ye.findIndex(function(We){return We.id===ze});je>-1&&de.push(ye.splice(je,1)[0])};ye.length&&te.length;)ve();return[].concat(de,ye)}function ae(I){var G=I.dispatch;I.setColumnOrder=i.useCallback(function(Y){return G({type:u.setColumnOrder,columnOrder:Y})},[G])}V.pluginName="useColumnOrder",f.canResize=!0,u.columnStartResizing="columnStartResizing",u.columnResizing="columnResizing",u.columnDoneResizing="columnDoneResizing",u.resetResize="resetResize";var De=function(I){I.getResizerProps=[Ge],I.getHeaderProps.push({style:{position:"relative"}}),I.stateReducers.push(Nt),I.useInstance.push(Ct),I.useInstanceBeforeDimensions.push(yt)},Ge=function(I,G){var Y=G.instance,te=G.header,ye=Y.dispatch,de=function(ve,ze){var je=!1;if(ve.type==="touchstart"){if(ve.touches&&ve.touches.length>1)return;je=!0}var We,ft,ot=function(tn){var vt=[];return function Sn(Vt){Vt.columns&&Vt.columns.length&&Vt.columns.map(Sn),vt.push(Vt)}(tn),vt}(ze).map(function(tn){return[tn.id,tn.totalWidth]}),pt=je?Math.round(ve.touches[0].clientX):ve.clientX,Qe=function(){window.cancelAnimationFrame(We),We=null,ye({type:u.columnDoneResizing})},ht=function(){window.cancelAnimationFrame(We),We=null,ye({type:u.columnResizing,clientX:ft})},St=function(tn){ft=tn,We||(We=window.requestAnimationFrame(ht))},Rt={mouse:{moveEvent:"mousemove",moveHandler:function(tn){return St(tn.clientX)},upEvent:"mouseup",upHandler:function(tn){document.removeEventListener("mousemove",Rt.mouse.moveHandler),document.removeEventListener("mouseup",Rt.mouse.upHandler),Qe()}},touch:{moveEvent:"touchmove",moveHandler:function(tn){return tn.cancelable&&(tn.preventDefault(),tn.stopPropagation()),St(tn.touches[0].clientX),!1},upEvent:"touchend",upHandler:function(tn){document.removeEventListener(Rt.touch.moveEvent,Rt.touch.moveHandler),document.removeEventListener(Rt.touch.upEvent,Rt.touch.moveHandler),Qe()}}},en=je?Rt.touch:Rt.mouse,Ln=!!function(){if(typeof q=="boolean")return q;var tn=!1;try{var vt={get passive(){return tn=!0,!1}};window.addEventListener("test",null,vt),window.removeEventListener("test",null,vt)}catch{tn=!1}return q=tn}()&&{passive:!1};document.addEventListener(en.moveEvent,en.moveHandler,Ln),document.addEventListener(en.upEvent,en.upHandler,Ln),ye({type:u.columnStartResizing,columnId:ze.id,columnWidth:ze.totalWidth,headerIdWidths:ot,clientX:pt})};return[I,{onMouseDown:function(ve){return ve.persist()||de(ve,te)},onTouchStart:function(ve){return ve.persist()||de(ve,te)},style:{cursor:"col-resize"},draggable:!1,role:"separator"}]};function Nt(I,G){if(G.type===u.init)return o({columnResizing:{columnWidths:{}}},I);if(G.type===u.resetResize)return o({},I,{columnResizing:{columnWidths:{}}});if(G.type===u.columnStartResizing){var Y=G.clientX,te=G.columnId,ye=G.columnWidth,de=G.headerIdWidths;return o({},I,{columnResizing:o({},I.columnResizing,{startX:Y,headerIdWidths:de,columnWidth:ye,isResizingColumn:te})})}if(G.type===u.columnResizing){var ve=G.clientX,ze=I.columnResizing,je=ze.startX,We=ze.columnWidth,ft=ze.headerIdWidths,ot=(ve-je)/We,pt={};return(ft===void 0?[]:ft).forEach(function(Qe){var ht=Qe[0],St=Qe[1];pt[ht]=Math.max(St+St*ot,0)}),o({},I,{columnResizing:o({},I.columnResizing,{columnWidths:o({},I.columnResizing.columnWidths,{},pt)})})}return G.type===u.columnDoneResizing?o({},I,{columnResizing:o({},I.columnResizing,{startX:null,isResizingColumn:null})}):void 0}De.pluginName="useResizeColumns";var yt=function(I){var G=I.flatHeaders,Y=I.disableResizing,te=I.getHooks,ye=I.state.columnResizing,de=S(I);G.forEach(function(ve){var ze=B(ve.disableResizing!==!0&&void 0,Y!==!0&&void 0,!0);ve.canResize=ze,ve.width=ye.columnWidths[ve.id]||ve.originalWidth||ve.width,ve.isResizing=ye.isResizingColumn===ve.id,ze&&(ve.getResizerProps=g(te().getResizerProps,{instance:de(),header:ve}))})};function Ct(I){var G=I.plugins,Y=I.dispatch,te=I.autoResetResize,ye=te===void 0||te,de=I.columns;_(G,["useAbsoluteLayout"],"useResizeColumns");var ve=S(ye);M(function(){ve()&&Y({type:u.resetResize})},[de]);var ze=i.useCallback(function(){return Y({type:u.resetResize})},[Y]);Object.assign(I,{resetResizing:ze})}var Lt={position:"absolute",top:0},tt=function(I){I.getTableBodyProps.push(Ht),I.getRowProps.push(Ht),I.getHeaderGroupProps.push(Ht),I.getFooterGroupProps.push(Ht),I.getHeaderProps.push(function(G,Y){var te=Y.column;return[G,{style:o({},Lt,{left:te.totalLeft+"px",width:te.totalWidth+"px"})}]}),I.getCellProps.push(function(G,Y){var te=Y.cell;return[G,{style:o({},Lt,{left:te.column.totalLeft+"px",width:te.column.totalWidth+"px"})}]}),I.getFooterProps.push(function(G,Y){var te=Y.column;return[G,{style:o({},Lt,{left:te.totalLeft+"px",width:te.totalWidth+"px"})}]})};tt.pluginName="useAbsoluteLayout";var Ht=function(I,G){return[I,{style:{position:"relative",width:G.instance.totalColumnsWidth+"px"}}]},It={display:"inline-block",boxSizing:"border-box"},un=function(I,G){return[I,{style:{display:"flex",width:G.instance.totalColumnsWidth+"px"}}]},sn=function(I){I.getRowProps.push(un),I.getHeaderGroupProps.push(un),I.getFooterGroupProps.push(un),I.getHeaderProps.push(function(G,Y){var te=Y.column;return[G,{style:o({},It,{width:te.totalWidth+"px"})}]}),I.getCellProps.push(function(G,Y){var te=Y.cell;return[G,{style:o({},It,{width:te.column.totalWidth+"px"})}]}),I.getFooterProps.push(function(G,Y){var te=Y.column;return[G,{style:o({},It,{width:te.totalWidth+"px"})}]})};function Ar(I){I.getTableProps.push(gr),I.getRowProps.push(or),I.getHeaderGroupProps.push(or),I.getFooterGroupProps.push(or),I.getHeaderProps.push(Qn),I.getCellProps.push(Ls),I.getFooterProps.push(xi)}sn.pluginName="useBlockLayout",Ar.pluginName="useFlexLayout";var gr=function(I,G){return[I,{style:{minWidth:G.instance.totalColumnsMinWidth+"px"}}]},or=function(I,G){return[I,{style:{display:"flex",flex:"1 0 auto",minWidth:G.instance.totalColumnsMinWidth+"px"}}]},Qn=function(I,G){var Y=G.column;return[I,{style:{boxSizing:"border-box",flex:Y.totalFlexWidth?Y.totalFlexWidth+" 0 auto":void 0,minWidth:Y.totalMinWidth+"px",width:Y.totalWidth+"px"}}]},Ls=function(I,G){var Y=G.cell;return[I,{style:{boxSizing:"border-box",flex:Y.column.totalFlexWidth+" 0 auto",minWidth:Y.column.totalMinWidth+"px",width:Y.column.totalWidth+"px"}}]},xi=function(I,G){var Y=G.column;return[I,{style:{boxSizing:"border-box",flex:Y.totalFlexWidth?Y.totalFlexWidth+" 0 auto":void 0,minWidth:Y.totalMinWidth+"px",width:Y.totalWidth+"px"}}]};function Da(I){I.stateReducers.push(qp),I.getTableProps.push(w0),I.getHeaderProps.push(Wp),I.getRowProps.push(S0)}u.columnStartResizing="columnStartResizing",u.columnResizing="columnResizing",u.columnDoneResizing="columnDoneResizing",u.resetResize="resetResize",Da.pluginName="useGridLayout";var w0=function(I,G){var Y=G.instance;return[I,{style:{display:"grid",gridTemplateColumns:Y.visibleColumns.map(function(te){var ye;return Y.state.gridLayout.columnWidths[te.id]?Y.state.gridLayout.columnWidths[te.id]+"px":(ye=Y.state.columnResizing)!=null&&ye.isResizingColumn?Y.state.gridLayout.startWidths[te.id]+"px":typeof te.width=="number"?te.width+"px":te.width}).join(" ")}}]},Wp=function(I,G){var Y=G.column;return[I,{id:"header-cell-"+Y.id,style:{position:"sticky",gridColumn:"span "+Y.totalVisibleHeaderCount}}]},S0=function(I,G){var Y=G.row;return Y.isExpanded?[I,{style:{gridColumn:"1 / "+(Y.cells.length+1)}}]:[I,{}]};function qp(I,G,Y,te){if(G.type===u.init)return o({gridLayout:{columnWidths:{}}},I);if(G.type===u.resetResize)return o({},I,{gridLayout:{columnWidths:{}}});if(G.type===u.columnStartResizing){var ye=G.columnId,de=G.headerIdWidths,ve=af(ye);if(ve!==void 0){var ze=te.visibleColumns.reduce(function(vt,Sn){var Vt;return o({},vt,((Vt={})[Sn.id]=af(Sn.id),Vt))},{}),je=te.visibleColumns.reduce(function(vt,Sn){var Vt;return o({},vt,((Vt={})[Sn.id]=Sn.minWidth,Vt))},{}),We=te.visibleColumns.reduce(function(vt,Sn){var Vt;return o({},vt,((Vt={})[Sn.id]=Sn.maxWidth,Vt))},{}),ft=de.map(function(vt){var Sn=vt[0];return[Sn,af(Sn)]});return o({},I,{gridLayout:o({},I.gridLayout,{startWidths:ze,minWidths:je,maxWidths:We,headerIdGridWidths:ft,columnWidth:ve})})}return I}if(G.type===u.columnResizing){var ot=G.clientX,pt=I.columnResizing.startX,Qe=I.gridLayout,ht=Qe.columnWidth,St=Qe.minWidths,Rt=Qe.maxWidths,en=Qe.headerIdGridWidths,Ln=(ot-pt)/ht,tn={};return(en===void 0?[]:en).forEach(function(vt){var Sn=vt[0],Vt=vt[1];tn[Sn]=Math.min(Math.max(St[Sn],Vt+Vt*Ln),Rt[Sn])}),o({},I,{gridLayout:o({},I.gridLayout,{columnWidths:o({},I.gridLayout.columnWidths,{},tn)})})}return G.type===u.columnDoneResizing?o({},I,{gridLayout:o({},I.gridLayout,{startWidths:{},minWidths:{},maxWidths:{}})}):void 0}function af(I){var G,Y=(G=document.getElementById("header-cell-"+I))==null?void 0:G.offsetWidth;if(Y!==void 0)return Y}n._UNSTABLE_usePivotColumns=jt,n.actions=u,n.defaultColumn=f,n.defaultGroupByFn=au,n.defaultOrderByFn=Ae,n.defaultRenderer=h,n.emptyRenderer=d,n.ensurePluginOrder=_,n.flexRender=A,n.functionalUpdate=E,n.loopHooks=x,n.makePropGetter=g,n.makeRenderer=C,n.reduceHooks=v,n.safeUseLayoutEffect=T,n.useAbsoluteLayout=tt,n.useAsyncDebounce=function(I,G){G===void 0&&(G=0);var Y=i.useRef({}),te=S(I),ye=S(G);return i.useCallback(function(){var de=a(regeneratorRuntime.mark(function ve(){var ze,je,We,ft=arguments;return regeneratorRuntime.wrap(function(ot){for(;;)switch(ot.prev=ot.next){case 0:for(ze=ft.length,je=new Array(ze),We=0;We<ze;We++)je[We]=ft[We];return Y.current.promise||(Y.current.promise=new Promise(function(pt,Qe){Y.current.resolve=pt,Y.current.reject=Qe})),Y.current.timeout&&clearTimeout(Y.current.timeout),Y.current.timeout=setTimeout(a(regeneratorRuntime.mark(function pt(){return regeneratorRuntime.wrap(function(Qe){for(;;)switch(Qe.prev=Qe.next){case 0:return delete Y.current.timeout,Qe.prev=1,Qe.t0=Y.current,Qe.next=5,te().apply(void 0,je);case 5:Qe.t1=Qe.sent,Qe.t0.resolve.call(Qe.t0,Qe.t1),Qe.next=12;break;case 9:Qe.prev=9,Qe.t2=Qe.catch(1),Y.current.reject(Qe.t2);case 12:return Qe.prev=12,delete Y.current.promise,Qe.finish(12);case 15:case"end":return Qe.stop()}},pt,null,[[1,9,12,15]])})),ye()),ot.abrupt("return",Y.current.promise);case 5:case"end":return ot.stop()}},ve)}));return function(){return de.apply(this,arguments)}}(),[te,ye])},n.useBlockLayout=sn,n.useColumnOrder=V,n.useExpanded=Et,n.useFilters=Pn,n.useFlexLayout=Ar,n.useGetLatest=S,n.useGlobalFilter=Rn,n.useGridLayout=Da,n.useGroupBy=Bo,n.useMountedLayoutEffect=M,n.usePagination=st,n.useResizeColumns=De,n.useRowSelect=Mr,n.useRowState=ma,n.useSortBy=re,n.useTable=function(I){for(var G=arguments.length,Y=new Array(G>1?G-1:0),te=1;te<G;te++)Y[te-1]=arguments[te];I=Je(I),Y=[Tt].concat(Y);var ye=i.useRef({}),de=S(ye.current);Object.assign(de(),o({},I,{plugins:Y,hooks:Fe()})),Y.filter(Boolean).forEach(function(pn){pn(de().hooks)});var ve=S(de().hooks);de().getHooks=ve,delete de().hooks,Object.assign(de(),v(ve().useOptions,Je(I)));var ze=de(),je=ze.data,We=ze.columns,ft=ze.initialState,ot=ze.defaultColumn,pt=ze.getSubRows,Qe=ze.getRowId,ht=ze.stateReducer,St=ze.useControlledState,Rt=S(ht),en=i.useCallback(function(pn,Kr){if(!Kr.type)throw console.info({action:Kr}),new Error("Unknown Action 👆");return[].concat(ve().stateReducers,Array.isArray(Rt())?Rt():[Rt()]).reduce(function(Mi,Bs){return Bs(Mi,Kr,pn,de())||Mi},pn)},[ve,Rt,de]),Ln=i.useReducer(en,void 0,function(){return en(ft,{type:u.init})}),tn=Ln[0],vt=Ln[1],Sn=v([].concat(ve().useControlledState,[St]),tn,{instance:de()});Object.assign(de(),{state:Sn,dispatch:vt});var Vt=i.useMemo(function(){return P(v(ve().columns,We,{instance:de()}))},[ve,de,We].concat(v(ve().columnsDeps,[],{instance:de()})));de().columns=Vt;var Tn=i.useMemo(function(){return v(ve().allColumns,R(Vt),{instance:de()}).map(O)},[Vt,ve,de].concat(v(ve().allColumnsDeps,[],{instance:de()})));de().allColumns=Tn;var Jn=i.useMemo(function(){for(var pn=[],Kr=[],Mi={},Bs=[].concat(Tn);Bs.length;){var Wi=Bs.shift();Kt({data:je,rows:pn,flatRows:Kr,rowsById:Mi,column:Wi,getRowId:Qe,getSubRows:pt,accessValueHooks:ve().accessValue,getInstance:de})}return[pn,Kr,Mi]},[Tn,je,Qe,pt,ve,de]),yn=Jn[0],bn=Jn[1],dr=Jn[2];Object.assign(de(),{rows:yn,initialRows:[].concat(yn),flatRows:bn,rowsById:dr}),x(ve().useInstanceAfterData,de());var Mn=i.useMemo(function(){return v(ve().visibleColumns,Tn,{instance:de()}).map(function(pn){return D(pn,ot)})},[ve,Tn,de,ot].concat(v(ve().visibleColumnsDeps,[],{instance:de()})));Tn=i.useMemo(function(){var pn=[].concat(Mn);return Tn.forEach(function(Kr){pn.find(function(Mi){return Mi.id===Kr.id})||pn.push(Kr)}),pn},[Tn,Mn]),de().allColumns=Tn;var fr=i.useMemo(function(){return v(ve().headerGroups,F(Mn,ot),de())},[ve,Mn,ot,de].concat(v(ve().headerGroupsDeps,[],{instance:de()})));de().headerGroups=fr;var lr=i.useMemo(function(){return fr.length?fr[0].headers:[]},[fr]);de().headers=lr,de().flatHeaders=fr.reduce(function(pn,Kr){return[].concat(pn,Kr.headers)},[]),x(ve().useInstanceBeforeDimensions,de());var Or=Mn.filter(function(pn){return pn.isVisible}).map(function(pn){return pn.id}).sort().join("_");Mn=i.useMemo(function(){return Mn.filter(function(pn){return pn.isVisible})},[Mn,Or]),de().visibleColumns=Mn;var nn=Ke(lr),sr=nn[0],hi=nn[1],Fs=nn[2];return de().totalColumnsMinWidth=sr,de().totalColumnsWidth=hi,de().totalColumnsMaxWidth=Fs,x(ve().useInstance,de()),[].concat(de().flatHeaders,de().allColumns).forEach(function(pn){pn.render=C(de(),pn),pn.getHeaderProps=g(ve().getHeaderProps,{instance:de(),column:pn}),pn.getFooterProps=g(ve().getFooterProps,{instance:de(),column:pn})}),de().headerGroups=i.useMemo(function(){return fr.filter(function(pn,Kr){return pn.headers=pn.headers.filter(function(Mi){return Mi.headers?function Bs(Wi){return Wi.filter(function(mc){return mc.headers?Bs(mc.headers):mc.isVisible}).length}(Mi.headers):Mi.isVisible}),!!pn.headers.length&&(pn.getHeaderGroupProps=g(ve().getHeaderGroupProps,{instance:de(),headerGroup:pn,index:Kr}),pn.getFooterGroupProps=g(ve().getFooterGroupProps,{instance:de(),headerGroup:pn,index:Kr}),!0)})},[fr,de,ve]),de().footerGroups=[].concat(de().headerGroups).reverse(),de().prepareRow=i.useCallback(function(pn){pn.getRowProps=g(ve().getRowProps,{instance:de(),row:pn}),pn.allCells=Tn.map(function(Kr){var Mi=pn.values[Kr.id],Bs={column:Kr,row:pn,value:Mi};return Bs.getCellProps=g(ve().getCellProps,{instance:de(),cell:Bs}),Bs.render=C(de(),Kr,{row:pn,cell:Bs,value:Mi}),Bs}),pn.cells=Mn.map(function(Kr){return pn.allCells.find(function(Mi){return Mi.column.id===Kr.id})}),x(ve().prepareRow,pn,{instance:de()})},[ve,de,Tn,Mn]),de().getTableProps=g(ve().getTableProps,{instance:de()}),de().getTableBodyProps=g(ve().getTableBodyProps,{instance:de()}),x(ve().useFinalInstance,de()),de()},Object.defineProperty(n,"__esModule",{value:!0})})}(ux,ux.exports)),ux.exports}var gQ;function yQe(){return gQ||(gQ=1,kL.exports=gQe()),kL.exports}var Kv=yQe();const vQe=({data:r=null})=>{const[e,n]=X.useState([]),[i,s]=X.useState(null),a=[{id:1,title:"Add meta descriptions to product pages",category:"Meta Tags",impact:"high",effort:"low",status:"pending",description:"Add unique and descriptive meta descriptions to all product pages to improve click-through rates from search results.",affectedPages:[{url:"/products/product-1",title:"Product 1"},{url:"/products/product-2",title:"Product 2"},{url:"/products/product-3",title:"Product 3"}],implementationNotes:"Each meta description should be unique, between 120-158 characters, and include the main keyword for the page."},{id:2,title:"Optimize image sizes on the homepage",category:"Performance",impact:"high",effort:"medium",status:"in-progress",description:"Compress and resize large images on the homepage to improve page load speed and Core Web Vitals scores.",affectedPages:[{url:"/",title:"Homepage"}],implementationNotes:"Use WebP format where possible and ensure images are appropriately sized for their display dimensions."},{id:3,title:"Fix broken internal links",category:"Links",impact:"medium",effort:"low",status:"completed",description:"Fix 5 broken internal links that are preventing proper site crawling and navigation.",affectedPages:[{url:"/blog/post-1",title:"Blog Post 1"},{url:"/services",title:"Services Page"}],implementationNotes:"Update href attributes to point to the correct URLs or remove the links if the target pages no longer exist."},{id:4,title:"Implement schema markup for products",category:"Structure",impact:"medium",effort:"medium",status:"pending",description:"Add product schema markup to all product pages to enhance search result appearance and potentially improve click-through rates.",affectedPages:[{url:"/products",title:"Products Category"},{url:"/products/product-1",title:"Product 1"},{url:"/products/product-2",title:"Product 2"}],implementationNotes:"Implement JSON-LD product schema including price, availability, ratings, and product images."},{id:5,title:"Improve content quality on service pages",category:"Content",impact:"high",effort:"high",status:"pending",description:"Enhance the content on service pages to be more comprehensive and better target relevant keywords.",affectedPages:[{url:"/services/service-1",title:"Service 1"},{url:"/services/service-2",title:"Service 2"}],implementationNotes:"Expand content to at least 800 words per page, include relevant keywords naturally, and add compelling calls to action."},{id:6,title:"Optimize heading structure",category:"Structure",impact:"medium",effort:"low",status:"pending",description:"Correct the heading structure on multiple pages to follow proper H1-H6 hierarchy for better SEO and accessibility.",affectedPages:[{url:"/about",title:"About Us"},{url:"/blog",title:"Blog"},{url:"/contact",title:"Contact"}],implementationNotes:"Ensure each page has exactly one H1 and that heading levels are not skipped (e.g., H1 to H3 without H2)."},{id:7,title:"Add alt text to images",category:"Accessibility",impact:"medium",effort:"low",status:"in-progress",description:"Add descriptive alt text to images across the site to improve accessibility and image SEO.",affectedPages:[{url:"/",title:"Homepage"},{url:"/products",title:"Products"},{url:"/about",title:"About Us"}],implementationNotes:"Alt text should be descriptive but concise, and should convey the purpose of the image rather than just describing it."},{id:8,title:"Improve mobile responsiveness",category:"Performance",impact:"high",effort:"high",status:"pending",description:"Fix mobile display issues on product pages to improve user experience and mobile SEO rankings.",affectedPages:[{url:"/products/product-1",title:"Product 1"},{url:"/products/product-2",title:"Product 2"}],implementationNotes:"Ensure text is readable without zooming, tap targets are appropriately sized, and content doesn't overflow the viewport."},{id:9,title:"Fix duplicate title tags",category:"Meta Tags",impact:"medium",effort:"low",status:"pending",description:"Create unique title tags for pages currently using duplicate titles.",affectedPages:[{url:"/blog/post-1",title:"Blog Post 1"},{url:"/blog/post-2",title:"Blog Post 2"}],implementationNotes:"Each title should be unique, 50-60 characters in length, and include the primary keyword for the page."},{id:10,title:"Implement lazy loading for images",category:"Performance",impact:"medium",effort:"medium",status:"completed",description:"Implement lazy loading for images below the fold to improve initial page load times.",affectedPages:[{url:"/",title:"Homepage"},{url:"/products",title:"Products"},{url:"/blog",title:"Blog"}],implementationNotes:'Use the loading="lazy" attribute for images or implement a JavaScript lazy loading solution if broader browser support is needed.'}];X.useEffect(()=>{n(r||a)},[r]);const o=ce.useMemo(()=>[{Header:"Title",accessor:"title"},{Header:"Category",accessor:"category",Filter:ZS,filter:"includes"},{Header:"Impact",accessor:"impact",Filter:ZS,filter:"includes",Cell:({value:D})=>{let F="";switch(D){case"high":F="bg-red-100 text-red-800";break;case"medium":F="bg-yellow-100 text-yellow-800";break;case"low":F="bg-green-100 text-green-800";break;default:F="bg-gray-100 text-gray-800"}return b.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${F}`,children:D})}},{Header:"Effort",accessor:"effort",Filter:ZS,filter:"includes",Cell:({value:D})=>{let F="";switch(D){case"high":F="bg-red-100 text-red-800";break;case"medium":F="bg-yellow-100 text-yellow-800";break;case"low":F="bg-green-100 text-green-800";break;default:F="bg-gray-100 text-gray-800"}return b.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${F}`,children:D})}},{Header:"Status",accessor:"status",Filter:ZS,filter:"includes",Cell:({value:D})=>{let F="";switch(D){case"completed":F="bg-green-100 text-green-800";break;case"in-progress":F="bg-blue-100 text-blue-800";break;case"pending":F="bg-gray-100 text-gray-800";break;default:F="bg-gray-100 text-gray-800"}return b.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${F}`,children:D})}},{Header:"Actions",Cell:({row:D})=>b.jsxs("div",{className:"flex space-x-2",children:[b.jsx("button",{onClick:()=>s(D.original),className:"text-xs px-2 py-1 bg-indigo-600 text-white rounded hover:bg-indigo-700",children:"View"}),b.jsx("button",{onClick:()=>l(D.original.id),className:"text-xs px-2 py-1 bg-gray-200 text-gray-700 rounded hover:bg-gray-300",children:D.original.status==="pending"?"Start":D.original.status==="in-progress"?"Complete":"Reopen"})]})}],[]),l=D=>{n(F=>F.map(U=>{if(U.id===D){let B;switch(U.status){case"pending":B="in-progress";break;case"in-progress":B="completed";break;case"completed":B="pending";break;default:B=U.status}return{...U,status:B}}return U}))},c=D=>{alert(`Implementation for recommendation ${D} would be triggered here.`),l(D),s(null)},{getTableProps:u,getTableBodyProps:h,headerGroups:d,page:f,prepareRow:p,state:g,setGlobalFilter:v,canPreviousPage:x,canNextPage:_,pageOptions:E,pageCount:S,gotoPage:T,nextPage:M,previousPage:C,setPageSize:A}=Kv.useTable({columns:o,data:e,initialState:{pageIndex:0,pageSize:5}},Kv.useFilters,Kv.useGlobalFilter,Kv.useSortBy,Kv.usePagination),{globalFilter:P,pageIndex:R,pageSize:O}=g;return b.jsxs("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:[b.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:b.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"SEO Recommendations"})}),b.jsxs("div",{className:"p-6",children:[b.jsxs("div",{className:"mb-4 flex flex-wrap justify-between items-center gap-4",children:[b.jsx("div",{className:"flex-grow",children:b.jsx("input",{type:"text",value:P||"",onChange:D=>v(D.target.value),placeholder:"Search recommendations...",className:"px-4 py-2 border border-gray-300 rounded-md w-full"})}),b.jsxs("div",{className:"flex gap-2",children:[b.jsx("select",{value:O,onChange:D=>A(Number(D.target.value)),className:"px-3 py-2 border border-gray-300 rounded-md text-sm",children:[5,10,20,50].map(D=>b.jsxs("option",{value:D,children:["Show ",D]},D))}),b.jsx("button",{className:"px-4 py-2 bg-indigo-600 text-white rounded-md text-sm hover:bg-indigo-700",children:"Bulk Actions"})]})]}),b.jsx("div",{className:"overflow-x-auto",children:b.jsxs("table",{...u(),className:"min-w-full divide-y divide-gray-200",children:[b.jsx("thead",{className:"bg-gray-50",children:d.map(D=>b.jsx("tr",{...D.getHeaderGroupProps(),children:D.headers.map(F=>b.jsxs("th",{...F.getHeaderProps(F.getSortByToggleProps()),className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:[F.render("Header"),b.jsx("span",{children:F.isSorted?F.isSortedDesc?" 🔽":" 🔼":""}),b.jsx("div",{children:F.canFilter?F.render("Filter"):null})]}))}))}),b.jsx("tbody",{...h(),className:"bg-white divide-y divide-gray-200",children:f.map(D=>(p(D),b.jsx("tr",{...D.getRowProps(),className:"hover:bg-gray-50",children:D.cells.map(F=>b.jsx("td",{...F.getCellProps(),className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:F.render("Cell")}))})))})]})}),b.jsxs("div",{className:"py-3 flex items-center justify-between",children:[b.jsxs("div",{className:"flex-1 flex justify-between sm:hidden",children:[b.jsx("button",{onClick:()=>C(),disabled:!x,className:`px-4 py-2 border border-gray-300 text-sm rounded-md ${x?"hover:bg-gray-50":"opacity-50 cursor-not-allowed"}`,children:"Previous"}),b.jsx("button",{onClick:()=>M(),disabled:!_,className:`px-4 py-2 border border-gray-300 text-sm rounded-md ${_?"hover:bg-gray-50":"opacity-50 cursor-not-allowed"}`,children:"Next"})]}),b.jsxs("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[b.jsx("div",{children:b.jsxs("p",{className:"text-sm text-gray-700",children:["Showing ",b.jsx("span",{className:"font-medium",children:R*O+1})," to ",b.jsx("span",{className:"font-medium",children:Math.min((R+1)*O,e.length)})," of ",b.jsx("span",{className:"font-medium",children:e.length})," results"]})}),b.jsx("div",{children:b.jsxs("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination",children:[b.jsx("button",{onClick:()=>T(0),disabled:!x,className:`px-2 py-2 rounded-l-md border border-gray-300 text-sm font-medium ${x?"hover:bg-gray-50":"opacity-50 cursor-not-allowed"}`,children:"«"}),b.jsx("button",{onClick:()=>C(),disabled:!x,className:`px-3 py-2 border border-gray-300 text-sm font-medium ${x?"hover:bg-gray-50":"opacity-50 cursor-not-allowed"}`,children:"‹"}),Array.from(Array(S).keys()).map(D=>b.jsx("button",{onClick:()=>T(D),className:`px-4 py-2 border border-gray-300 text-sm font-medium ${D===R?"bg-indigo-100 text-indigo-700":"hover:bg-gray-50"}`,children:D+1},D)),b.jsx("button",{onClick:()=>M(),disabled:!_,className:`px-3 py-2 border border-gray-300 text-sm font-medium ${_?"hover:bg-gray-50":"opacity-50 cursor-not-allowed"}`,children:"›"}),b.jsx("button",{onClick:()=>T(S-1),disabled:!_,className:`px-2 py-2 rounded-r-md border border-gray-300 text-sm font-medium ${_?"hover:bg-gray-50":"opacity-50 cursor-not-allowed"}`,children:"»"})]})})]})]})]}),i&&b.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:b.jsx("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-auto",children:b.jsxs("div",{className:"p-6",children:[b.jsxs("div",{className:"flex justify-between items-start mb-4",children:[b.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:i.title}),b.jsx("button",{onClick:()=>s(null),className:"text-gray-400 hover:text-gray-500",children:b.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),b.jsxs("div",{className:"mb-4 flex flex-wrap gap-2",children:[b.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:i.category}),b.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${i.impact==="high"?"bg-red-100 text-red-800":i.impact==="medium"?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:["Impact: ",i.impact]}),b.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${i.effort==="high"?"bg-red-100 text-red-800":i.effort==="medium"?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:["Effort: ",i.effort]}),b.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${i.status==="completed"?"bg-green-100 text-green-800":i.status==="in-progress"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:["Status: ",i.status]})]}),b.jsxs("div",{className:"mb-4",children:[b.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-1",children:"Description"}),b.jsx("p",{className:"text-sm text-gray-600",children:i.description})]}),b.jsxs("div",{className:"mb-4",children:[b.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-1",children:"Affected Pages"}),b.jsx("div",{className:"border border-gray-200 rounded-md overflow-hidden",children:b.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[b.jsx("thead",{className:"bg-gray-50",children:b.jsxs("tr",{children:[b.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"URL"}),b.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Title"})]})}),b.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i.affectedPages.map((D,F)=>b.jsxs("tr",{children:[b.jsx("td",{className:"px-4 py-2 text-sm text-blue-600 whitespace-nowrap",children:D.url}),b.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:D.title})]},F))})]})})]}),b.jsxs("div",{className:"mb-6",children:[b.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-1",children:"Implementation Notes"}),b.jsx("p",{className:"text-sm text-gray-600",children:i.implementationNotes})]}),b.jsxs("div",{className:"flex justify-end gap-3",children:[b.jsx("button",{onClick:()=>s(null),className:"px-4 py-2 border border-gray-300 rounded-md text-sm hover:bg-gray-50",children:"Cancel"}),i.status!=="completed"&&b.jsx("button",{onClick:()=>c(i.id),className:"px-4 py-2 bg-indigo-600 text-white rounded-md text-sm hover:bg-indigo-700",children:i.status==="pending"?"Implement":"Complete"})]})]})})})]})};function ZS({column:{filterValue:r,setFilter:e,preFilteredRows:n,id:i}}){const s=ce.useMemo(()=>{const a=new Set;return n.forEach(o=>{a.add(o.values[i])}),[...a.values()]},[i,n]);return b.jsxs("select",{value:r,onChange:a=>{e(a.target.value||void 0)},className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 text-xs",children:[b.jsx("option",{value:"",children:"All"}),s.map((a,o)=>b.jsx("option",{value:a,children:a},o))]})}const ole=({siteId:r,contentUrl:e})=>{const[n,i]=X.useState(!1),[s,a]=X.useState(null),[o,l]=X.useState(null),[c,u]=X.useState("suggestions"),[h,d]=X.useState("all"),f={url:e||"https://example.com/sample-page",timestamp:new Date().toISOString(),scores:{keyword:78,readability:65,structure:82,overall:75},suggestions:[{id:"keyword-missing_h1-1",category:"keyword",type:"keyword_title",importance:"high",title:"Include target keyword in page title",description:"Your primary keyword is missing from the page title, which is crucial for SEO.",implementation:"Add your primary keyword to the beginning of your page title while keeping it natural and compelling.",color:"#e53e3e",icon:"tag"},{id:"readability-long_sentences-1",category:"readability",type:"long_sentences",importance:"medium",title:"Shorten or break up long sentences",description:"25% of your sentences exceed 25 words, which can reduce readability.",implementation:"Break long sentences into shorter ones for better clarity and readability.",color:"#ed8936",icon:"book-open"},{id:"structure-missing_alt_text-1",category:"structure",type:"missing_alt_text",importance:"high",title:"Add alt text to images",description:"Your images are missing alt text, which is essential for accessibility and SEO.",implementation:"Add descriptive alt text to all images that clearly describes their content and purpose.",color:"#e53e3e",icon:"layout"},{id:"enhancement-introduction-1",category:"enhancement",type:"introduction",title:"Add a compelling introduction",importance:"medium",description:"Your content lacks a clear introduction, which is essential for engaging readers and establishing the topic.",implementation:"Add a 2-3 sentence introduction that hooks readers, states the main topic, and includes your primary keyword.",color:"#ed8936",icon:"award"},{id:"keyword-density-1",category:"keyword",type:"keyword_density",importance:"medium",title:"Increase keyword density",description:"Your keyword density is below the recommended minimum of 0.5%.",implementation:"Naturally incorporate your primary keyword a few more times in your content.",color:"#ed8936",icon:"tag"},{id:"structure-add_lists-1",category:"structure",type:"add_lists",importance:"low",title:"Add lists to structure content",description:"Your content has no lists, which can help break up text and improve scannability.",implementation:"Convert appropriate paragraphs to bullet or numbered lists, especially for steps, features, or benefits.",color:"#48bb78",icon:"layout"}]};X.useEffect(()=>{(async()=>{i(!0),a(null);try{setTimeout(()=>{l(f),i(!1)},1e3)}catch{a("Failed to fetch optimization data"),i(!1)}})()},[r,e]);const p=(o==null?void 0:o.suggestions.filter(x=>h==="all"||x.category===h))||[],g=()=>{i(!0),a(null),setTimeout(()=>{l(f),i(!1)},1e3)},v=x=>{alert(`Implementation requested for suggestion: ${x}`)};return n?b.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[b.jsx("div",{className:"flex justify-between items-center mb-6",children:b.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"Content Optimization"})}),b.jsxs("div",{className:"flex items-center justify-center h-40",children:[b.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-indigo-600"}),b.jsx("span",{className:"ml-3 text-gray-600",children:"Analyzing content..."})]})]}):s?b.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[b.jsxs("div",{className:"flex justify-between items-center mb-6",children:[b.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"Content Optimization"}),b.jsx("button",{onClick:g,className:"px-3 py-1 bg-indigo-600 text-white rounded hover:bg-indigo-700 text-sm",children:"Retry"})]}),b.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4 text-red-600",children:s})]}):o?b.jsxs("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:[b.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex justify-between items-center",children:[b.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"Content Optimization"}),b.jsxs("button",{onClick:g,className:"px-3 py-1 border border-gray-300 rounded hover:bg-gray-50 text-sm flex items-center",children:[b.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Refresh"]})]}),b.jsx("div",{className:"px-6 py-4 bg-gray-50 border-b border-gray-200",children:b.jsxs("div",{className:"flex flex-wrap gap-4",children:[b.jsxs("div",{className:"flex flex-col",children:[b.jsx("span",{className:"text-xs text-gray-500 mb-1",children:"Overall Score"}),b.jsxs("div",{className:"flex items-baseline",children:[b.jsx("span",{className:"text-2xl font-bold text-indigo-600",children:o.scores.overall}),b.jsx("span",{className:"text-xs text-gray-500 ml-1",children:"/100"})]})]}),b.jsxs("div",{className:"flex flex-col",children:[b.jsx("span",{className:"text-xs text-gray-500 mb-1",children:"Keywords"}),b.jsxs("div",{className:"flex items-baseline",children:[b.jsx("span",{className:"text-2xl font-bold text-green-600",children:o.scores.keyword}),b.jsx("span",{className:"text-xs text-gray-500 ml-1",children:"/100"})]})]}),b.jsxs("div",{className:"flex flex-col",children:[b.jsx("span",{className:"text-xs text-gray-500 mb-1",children:"Readability"}),b.jsxs("div",{className:"flex items-baseline",children:[b.jsx("span",{className:"text-2xl font-bold text-yellow-600",children:o.scores.readability}),b.jsx("span",{className:"text-xs text-gray-500 ml-1",children:"/100"})]})]}),b.jsxs("div",{className:"flex flex-col",children:[b.jsx("span",{className:"text-xs text-gray-500 mb-1",children:"Structure"}),b.jsxs("div",{className:"flex items-baseline",children:[b.jsx("span",{className:"text-2xl font-bold text-blue-600",children:o.scores.structure}),b.jsx("span",{className:"text-xs text-gray-500 ml-1",children:"/100"})]})]})]})}),b.jsxs("div",{className:"p-6",children:[b.jsxs("div",{className:"flex border-b border-gray-200 mb-4",children:[b.jsx("button",{className:`px-4 py-2 text-sm font-medium ${c==="suggestions"?"text-indigo-600 border-b-2 border-indigo-600":"text-gray-500 hover:text-gray-700"}`,onClick:()=>u("suggestions"),children:"Suggestions"}),b.jsx("button",{className:`px-4 py-2 text-sm font-medium ${c==="insights"?"text-indigo-600 border-b-2 border-indigo-600":"text-gray-500 hover:text-gray-700"}`,onClick:()=>u("insights"),children:"Insights"})]}),c==="suggestions"&&b.jsxs(b.Fragment,{children:[b.jsxs("div",{className:"flex mb-4 space-x-2",children:[b.jsx("button",{className:`px-3 py-1 text-xs rounded-full ${h==="all"?"bg-gray-200 text-gray-800":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,onClick:()=>d("all"),children:"All"}),b.jsx("button",{className:`px-3 py-1 text-xs rounded-full ${h==="keyword"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,onClick:()=>d("keyword"),children:"Keywords"}),b.jsx("button",{className:`px-3 py-1 text-xs rounded-full ${h==="readability"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,onClick:()=>d("readability"),children:"Readability"}),b.jsx("button",{className:`px-3 py-1 text-xs rounded-full ${h==="structure"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,onClick:()=>d("structure"),children:"Structure"}),b.jsx("button",{className:`px-3 py-1 text-xs rounded-full ${h==="enhancement"?"bg-purple-100 text-purple-800":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,onClick:()=>d("enhancement"),children:"Enhancements"})]}),b.jsx("div",{className:"space-y-4",children:p.length===0?b.jsx("div",{className:"text-center py-8 text-gray-500",children:"No suggestions found for the selected category."}):p.map(x=>b.jsx("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-sm transition-shadow",children:b.jsxs("div",{className:"flex justify-between",children:[b.jsxs("div",{className:"flex items-start",children:[b.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center mr-3 mt-1",style:{backgroundColor:`${x.color}20`,color:x.color},children:b.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 20l4-16m2 16l4-16M6 9h14M4 15h14"})})}),b.jsxs("div",{className:"flex-1",children:[b.jsxs("div",{className:"flex items-center mb-1",children:[b.jsx("h3",{className:"font-medium text-gray-900",children:x.title}),b.jsx("span",{className:`ml-2 px-2 py-0.5 text-xs rounded-full ${x.importance==="high"?"bg-red-100 text-red-800":x.importance==="medium"?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:x.importance})]}),b.jsx("p",{className:"text-sm text-gray-600 mb-2",children:x.description}),b.jsx("div",{className:"mt-2 bg-gray-50 p-2 rounded border border-gray-100",children:b.jsxs("p",{className:"text-sm text-gray-700",children:[b.jsx("span",{className:"font-medium",children:"Implementation: "}),x.implementation]})})]})]}),b.jsx("div",{className:"ml-4",children:b.jsx("button",{onClick:()=>v(x.id),className:"px-3 py-1 bg-indigo-600 text-white text-sm rounded hover:bg-indigo-700",children:"Implement"})})]})},x.id))})]}),c==="insights"&&b.jsxs("div",{className:"space-y-6",children:[b.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[b.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Content Overview"}),b.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["Your content has an overall SEO score of ",b.jsx("span",{className:"font-medium",children:o.scores.overall})," out of 100. The strongest area is ",b.jsx("span",{className:"font-medium",children:"structure"})," at ",o.scores.structure," points, while ",b.jsx("span",{className:"font-medium",children:"readability"})," at ",o.scores.readability," points has the most room for improvement."]}),b.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[b.jsxs("div",{className:"bg-gray-50 p-3 rounded",children:[b.jsx("h4",{className:"text-sm font-medium text-gray-800 mb-1",children:"Strengths"}),b.jsxs("ul",{className:"text-sm text-gray-600 space-y-1 pl-5 list-disc",children:[b.jsx("li",{children:"Good structural organization"}),b.jsx("li",{children:"Appropriate keyword usage"}),b.jsx("li",{children:"Proper heading hierarchy"})]})]}),b.jsxs("div",{className:"bg-gray-50 p-3 rounded",children:[b.jsx("h4",{className:"text-sm font-medium text-gray-800 mb-1",children:"Improvement Areas"}),b.jsxs("ul",{className:"text-sm text-gray-600 space-y-1 pl-5 list-disc",children:[b.jsx("li",{children:"Sentence length variety"}),b.jsx("li",{children:"Image alt text implementation"}),b.jsx("li",{children:"Content introduction"})]})]})]})]}),b.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[b.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Implementation Impact"}),b.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["Implementing all recommendations could increase your overall SEO score by approximately",b.jsx("span",{className:"font-medium text-green-600",children:" 15-20 points"}),"."]}),b.jsx("div",{className:"h-4 bg-gray-200 rounded-full overflow-hidden",children:b.jsx("div",{className:"h-full bg-indigo-600 rounded-full",style:{width:`${o.scores.overall}%`}})}),b.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[b.jsxs("span",{children:["Current: ",o.scores.overall]}),b.jsxs("span",{children:["Potential: ",Math.min(100,o.scores.overall+18)]})]})]}),b.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[b.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Recommendation Priority"}),b.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"For the most effective improvements, implement recommendations in this order:"}),b.jsxs("ol",{className:"text-sm text-gray-600 space-y-2 pl-5 list-decimal",children:[b.jsxs("li",{children:[b.jsx("span",{className:"font-medium",children:"High importance recommendations"})," (red tag) - Address these first for biggest impact"]}),b.jsxs("li",{children:[b.jsx("span",{className:"font-medium",children:"Keyword optimizations"})," - Essential for search visibility"]}),b.jsxs("li",{children:[b.jsx("span",{className:"font-medium",children:"Structure improvements"})," - Critical for user experience and indexing"]}),b.jsxs("li",{children:[b.jsx("span",{className:"font-medium",children:"Readability enhancements"})," - Important for engagement"]})]})]})]})]})]}):null},xQe=()=>{const{siteId:r}=RQ(),[e,n]=X.useState(null),[i,s]=X.useState(!0);if(X.useEffect(()=>{setTimeout(()=>{n({id:parseInt(r),url:"https://example.com",lastScan:"2025-03-30",score:87,issues:[{id:1,type:"Meta Tags",severity:"high",description:"Missing meta description on 3 pages"},{id:2,type:"Performance",severity:"medium",description:"Slow loading time on product pages"},{id:3,type:"Structure",severity:"low",description:"Suboptimal header hierarchy"}],history:[{id:1,date:"2025-03-30",action:"Automated Scan",impact:"+2 points"},{id:2,date:"2025-03-25",action:"Meta Tags Updated",impact:"+5 points"}]}),s(!1)},500)},[r]),i)return b.jsx("div",{className:"flex justify-center items-center h-64",children:"Loading site details..."});const[a,o]=X.useState("overview"),l=[{id:"overview",label:"Overview"},{id:"analytics",label:"Analytics"},{id:"content",label:"Content Optimization"},{id:"recommendations",label:"Recommendations"}];return b.jsxs("div",{className:"container mx-auto px-4 py-6",children:[b.jsx(Zhe,{site:e}),b.jsx("div",{className:"border-b border-gray-200 mb-6",children:b.jsx("nav",{className:"-mb-px flex space-x-8",children:l.map(c=>b.jsx("button",{onClick:()=>o(c.id),className:`${a===c.id?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm`,children:c.label},c.id))})}),a==="overview"&&b.jsxs(b.Fragment,{children:[b.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8",children:[b.jsx("div",{className:"lg:col-span-2",children:b.jsx(Qhe,{issues:e.issues})}),b.jsx("div",{children:b.jsx(Jhe,{score:e.score})})]}),b.jsxs("div",{className:"bg-white shadow rounded-lg p-6 mb-8",children:[b.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Action History"}),b.jsx(ede,{history:e.history})]})]}),a==="analytics"&&b.jsxs(b.Fragment,{children:[b.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[b.jsx("div",{children:b.jsx(ale,{})}),b.jsx("div",{children:b.jsx(ase,{})})]}),b.jsx("div",{className:"mb-8",children:b.jsx(wse,{})})]}),a==="content"&&b.jsx("div",{className:"mb-8",children:b.jsx(ole,{siteId:e.id,contentUrl:e.url})}),a==="recommendations"&&b.jsx("div",{className:"mb-8",children:b.jsx(vQe,{})})]})},lle=({filters:r=[],onFilterChange:e,presets:n=[],showPresets:i=!0,showSearch:s=!0})=>{const[a,o]=X.useState({}),[l,c]=X.useState(""),[u,h]=X.useState(!1),[d,f]=X.useState(n),[p,g]=X.useState("");X.useEffect(()=>{const A={};r.forEach(P=>{A[P.id]=P.defaultValue||(P.type==="checkbox"?[]:"")}),o(A)},[r]),X.useEffect(()=>{e&&e({filters:a,search:l})},[a,l,e]);const v=(A,P)=>{o(R=>({...R,[A]:P}))},x=(A,P,R)=>{o(O=>{const D=O[A]||[];return R?{...O,[A]:[...D,P]}:{...O,[A]:D.filter(F=>F!==P)}})},_=A=>{c(A.target.value)},E=()=>{const A={};r.forEach(P=>{A[P.id]=P.type==="checkbox"?[]:""}),o(A),c("")},S=()=>{if(!p.trim())return;const A={id:`preset-${Date.now()}`,name:p,filters:{...a},search:l};f(P=>[...P,A]),g("")},T=A=>{o(A.filters),c(A.search)},M=A=>{f(P=>P.filter(R=>R.id!==A))},C=A=>{switch(A.type){case"select":return b.jsxs("select",{id:A.id,value:a[A.id]||"",onChange:P=>v(A.id,P.target.value),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",children:[b.jsxs("option",{value:"",children:["All ",A.label]}),A.options.map(P=>b.jsx("option",{value:P.value,children:P.label},P.value))]});case"checkbox":return b.jsx("div",{className:"space-y-2",children:A.options.map(P=>b.jsxs("div",{className:"flex items-center",children:[b.jsx("input",{type:"checkbox",id:`${A.id}-${P.value}`,checked:(a[A.id]||[]).includes(P.value),onChange:R=>x(A.id,P.value,R.target.checked),className:"h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"}),b.jsx("label",{htmlFor:`${A.id}-${P.value}`,className:"ml-2 text-sm text-gray-700",children:P.label})]},P.value))});case"radio":return b.jsxs("div",{className:"space-y-2",children:[b.jsxs("div",{className:"flex items-center",children:[b.jsx("input",{type:"radio",id:`${A.id}-all`,name:A.id,value:"",checked:a[A.id]==="",onChange:P=>v(A.id,P.target.value),className:"h-4 w-4 border-gray-300 text-indigo-600 focus:ring-indigo-500"}),b.jsx("label",{htmlFor:`${A.id}-all`,className:"ml-2 text-sm text-gray-700",children:"All"})]}),A.options.map(P=>b.jsxs("div",{className:"flex items-center",children:[b.jsx("input",{type:"radio",id:`${A.id}-${P.value}`,name:A.id,value:P.value,checked:a[A.id]===P.value,onChange:R=>v(A.id,R.target.value),className:"h-4 w-4 border-gray-300 text-indigo-600 focus:ring-indigo-500"}),b.jsx("label",{htmlFor:`${A.id}-${P.value}`,className:"ml-2 text-sm text-gray-700",children:P.label})]},P.value))]});case"range":return b.jsxs("div",{children:[b.jsxs("div",{className:"flex items-center space-x-2",children:[b.jsx("input",{type:"number",min:A.min,max:A.max,value:(a[A.id]||[])[0]||A.min,onChange:P=>{const R=[parseInt(P.target.value),(a[A.id]||[])[1]||A.max];v(A.id,R)},className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"}),b.jsx("span",{children:"to"}),b.jsx("input",{type:"number",min:A.min,max:A.max,value:(a[A.id]||[])[1]||A.max,onChange:P=>{const R=[(a[A.id]||[])[0]||A.min,parseInt(P.target.value)];v(A.id,R)},className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"})]}),b.jsx("input",{type:"range",min:A.min,max:A.max,value:(a[A.id]||[])[0]||A.min,onChange:P=>{const R=[parseInt(P.target.value),(a[A.id]||[])[1]||A.max];v(A.id,R)},className:"w-full mt-2"}),b.jsx("input",{type:"range",min:A.min,max:A.max,value:(a[A.id]||[])[1]||A.max,onChange:P=>{const R=[(a[A.id]||[])[0]||A.min,parseInt(P.target.value)];v(A.id,R)},className:"w-full"})]});case"date":return b.jsx("input",{type:"date",id:A.id,value:a[A.id]||"",onChange:P=>v(A.id,P.target.value),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"});default:return b.jsx("input",{type:"text",id:A.id,value:a[A.id]||"",onChange:P=>v(A.id,P.target.value),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",placeholder:A.placeholder||`Filter by ${A.label}`})}};return b.jsxs("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:[b.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex justify-between items-center",children:[b.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"Advanced Filters"}),b.jsx("button",{onClick:()=>h(!u),className:"text-gray-400 hover:text-gray-500",children:b.jsx("svg",{className:`h-5 w-5 transform ${u?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})})]}),u&&b.jsxs("div",{className:"p-6",children:[s&&b.jsxs("div",{className:"mb-6",children:[b.jsx("label",{htmlFor:"search",className:"block text-sm font-medium text-gray-700 mb-1",children:"Search"}),b.jsxs("div",{className:"relative rounded-md shadow-sm",children:[b.jsx("input",{type:"text",id:"search",value:l,onChange:_,className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 pr-10 sm:text-sm",placeholder:"Search"}),b.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3",children:b.jsx("svg",{className:"h-5 w-5 text-gray-400",viewBox:"0 0 20 20",fill:"currentColor",children:b.jsx("path",{fillRule:"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z",clipRule:"evenodd"})})})]})]}),b.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-6",children:r.map(A=>b.jsxs("div",{children:[b.jsx("label",{htmlFor:A.id,className:"block text-sm font-medium text-gray-700 mb-1",children:A.label}),C(A)]},A.id))}),b.jsxs("div",{className:"flex justify-between items-center mb-6",children:[b.jsx("button",{onClick:E,className:"px-4 py-2 border border-gray-300 rounded-md text-sm text-gray-700 hover:bg-gray-50",children:"Clear Filters"}),b.jsx("button",{className:"px-4 py-2 bg-indigo-600 text-white rounded-md text-sm hover:bg-indigo-700",children:"Apply Filters"})]}),i&&b.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[b.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-3",children:"Filter Presets"}),b.jsxs("div",{className:"flex mb-4 gap-2",children:[b.jsx("input",{type:"text",value:p,onChange:A=>g(A.target.value),placeholder:"Preset name",className:"block flex-grow rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"}),b.jsx("button",{onClick:S,disabled:!p.trim(),className:`px-4 py-2 rounded-md text-sm text-white ${p.trim()?"bg-green-600 hover:bg-green-700":"bg-gray-400 cursor-not-allowed"}`,children:"Save Current Filters"})]}),d.length>0?b.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:d.map(A=>b.jsxs("div",{className:"border border-gray-200 rounded-md p-3 flex justify-between items-center",children:[b.jsx("span",{className:"text-sm font-medium text-gray-700",children:A.name}),b.jsxs("div",{className:"flex space-x-2",children:[b.jsx("button",{onClick:()=>T(A),className:"px-3 py-1 bg-indigo-600 text-white text-xs rounded hover:bg-indigo-700",children:"Apply"}),b.jsx("button",{onClick:()=>M(A.id),className:"px-3 py-1 bg-red-600 text-white text-xs rounded hover:bg-red-700",children:"Delete"})]})]},A.id))}):b.jsx("p",{className:"text-sm text-gray-500",children:"No saved presets. Save the current filter configuration to create one."})]})]}),b.jsx("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200",children:b.jsxs("div",{className:"flex flex-wrap gap-2",children:[Object.entries(a).map(([A,P])=>{var O;if(!P||Array.isArray(P)&&P.length===0)return null;const R=r.find(D=>D.id===A);return R?b.jsxs("div",{className:"inline-flex items-center rounded-full bg-indigo-100 px-3 py-1 text-xs font-medium text-indigo-800",children:[b.jsxs("span",{children:[R.label,": "]}),b.jsx("span",{className:"ml-1 font-semibold",children:R.type==="select"||R.type==="radio"?((O=R.options.find(D=>D.value===P))==null?void 0:O.label)||P:R.type==="checkbox"?P.map(D=>{var F;return((F=R.options.find(U=>U.value===D))==null?void 0:F.label)||D}).join(", "):R.type==="range"?`${P[0]} - ${P[1]}`:P}),b.jsx("button",{onClick:()=>v(A,R.type==="checkbox"?[]:""),className:"ml-1.5 inline-flex h-4 w-4 flex-shrink-0 items-center justify-center rounded-full text-indigo-400 hover:bg-indigo-200 hover:text-indigo-500 focus:bg-indigo-500 focus:text-white focus:outline-none",children:b.jsx("svg",{className:"h-2 w-2",stroke:"currentColor",fill:"none",viewBox:"0 0 8 8",children:b.jsx("path",{strokeLinecap:"round",strokeWidth:"1.5",d:"M1 1l6 6m0-6L1 7"})})})]},A):null}),l&&b.jsxs("div",{className:"inline-flex items-center rounded-full bg-indigo-100 px-3 py-1 text-xs font-medium text-indigo-800",children:[b.jsx("span",{children:"Search: "}),b.jsx("span",{className:"ml-1 font-semibold",children:l}),b.jsx("button",{onClick:()=>c(""),className:"ml-1.5 inline-flex h-4 w-4 flex-shrink-0 items-center justify-center rounded-full text-indigo-400 hover:bg-indigo-200 hover:text-indigo-500 focus:bg-indigo-500 focus:text-white focus:outline-none",children:b.jsx("svg",{className:"h-2 w-2",stroke:"currentColor",fill:"none",viewBox:"0 0 8 8",children:b.jsx("path",{strokeLinecap:"round",strokeWidth:"1.5",d:"M1 1l6 6m0-6L1 7"})})})]}),Object.values(a).every(A=>!A||Array.isArray(A)&&A.length===0)&&!l&&b.jsx("span",{className:"text-sm text-gray-500",children:"No active filters"})]})})]})},bQe=()=>{const[r,e]=X.useState({}),n=[{id:"dateRange",label:"Date Range",type:"select",options:[{value:"7d",label:"Last 7 Days"},{value:"30d",label:"Last 30 Days"},{value:"90d",label:"Last 90 Days"},{value:"custom",label:"Custom Range"}],defaultValue:"30d"},{id:"category",label:"Category",type:"checkbox",options:[{value:"meta",label:"Meta Tags"},{value:"performance",label:"Performance"},{value:"structure",label:"Structure"},{value:"content",label:"Content"},{value:"links",label:"Links"}]},{id:"impact",label:"Impact",type:"radio",options:[{value:"high",label:"High"},{value:"medium",label:"Medium"},{value:"low",label:"Low"}]},{id:"status",label:"Status",type:"select",options:[{value:"improved",label:"Improved"},{value:"declined",label:"Declined"},{value:"unchanged",label:"Unchanged"}]},{id:"score",label:"SEO Score",type:"range",min:0,max:100}],i=[{id:"preset-1",name:"Critical Issues",filters:{impact:"high",status:"declined"},search:""},{id:"preset-2",name:"Recent Improvements",filters:{dateRange:"7d",status:"improved"},search:""}],s=a=>{e(a),console.log("Filters changed:",a)};return b.jsx(_h,{children:b.jsxs("div",{className:"container mx-auto px-4 py-6",children:[b.jsxs("div",{className:"mb-6",children:[b.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"SEO Analytics"}),b.jsx("p",{className:"text-gray-600 mt-1",children:"Comprehensive visualization of your website's SEO performance and opportunities."})]}),b.jsx("div",{className:"mb-6",children:b.jsx(lle,{filters:n,onFilterChange:s,presets:i})}),b.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[b.jsx("div",{children:b.jsx(ale,{})}),b.jsx("div",{children:b.jsx(ase,{})})]}),b.jsx("div",{className:"mb-6",children:b.jsx(wse,{})}),b.jsxs("div",{className:"p-6 bg-white shadow rounded-lg",children:[b.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Analytics Insights"}),b.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[b.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 bg-green-50",children:[b.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-1",children:"Top Improvement"}),b.jsx("p",{className:"text-2xl font-bold text-green-600",children:"+12 points"}),b.jsx("p",{className:"text-sm text-gray-600",children:"Performance optimization"})]}),b.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 bg-red-50",children:[b.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-1",children:"Top Concern"}),b.jsx("p",{className:"text-2xl font-bold text-red-600",children:"-5 points"}),b.jsx("p",{className:"text-sm text-gray-600",children:"Content duplication"})]}),b.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 bg-blue-50",children:[b.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-1",children:"Overall Trend"}),b.jsx("p",{className:"text-2xl font-bold text-blue-600",children:"+15%"}),b.jsx("p",{className:"text-sm text-gray-600",children:"Last 30 days improvement"})]})]}),b.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[b.jsx("h3",{className:"text-md font-medium text-gray-800 mb-2",children:"Key Insights"}),b.jsxs("ul",{className:"space-y-2 text-sm text-gray-600",children:[b.jsxs("li",{className:"flex items-start",children:[b.jsx("svg",{className:"h-5 w-5 text-green-500 mr-2 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),b.jsx("span",{children:"Internal linking improvements have increased crawler efficiency by 30%"})]}),b.jsxs("li",{className:"flex items-start",children:[b.jsx("svg",{className:"h-5 w-5 text-green-500 mr-2 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),b.jsx("span",{children:"Meta tag optimization has improved click-through rates by 15%"})]}),b.jsxs("li",{className:"flex items-start",children:[b.jsx("svg",{className:"h-5 w-5 text-yellow-500 mr-2 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),b.jsx("span",{children:"Content duplication between product pages may be limiting ranking potential"})]}),b.jsxs("li",{className:"flex items-start",children:[b.jsx("svg",{className:"h-5 w-5 text-red-500 mr-2 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),b.jsx("span",{children:"Mobile performance scores need urgent attention, affecting 40% of traffic"})]})]})]})]})]})})},_Qe=()=>{const[r,e]=X.useState(null),[n,i]=X.useState(""),[s,a]=X.useState([]),[o,l]=X.useState([]),[c,u]=X.useState(!0),h=[{id:"contentType",label:"Content Type",type:"select",options:[{value:"all",label:"All Content"},{value:"blog",label:"Blog Posts"},{value:"product",label:"Product Pages"},{value:"service",label:"Service Pages"},{value:"landing",label:"Landing Pages"}]},{id:"contentScore",label:"Content Score",type:"range",min:0,max:100},{id:"lastUpdated",label:"Last Updated",type:"select",options:[{value:"all",label:"Any Time"},{value:"7d",label:"Last 7 Days"},{value:"30d",label:"Last 30 Days"},{value:"90d",label:"Last 90 Days"}]},{id:"optimizationStatus",label:"Optimization Status",type:"select",options:[{value:"all",label:"All Statuses"},{value:"notOptimized",label:"Not Optimized"},{value:"inProgress",label:"Optimization In Progress"},{value:"optimized",label:"Fully Optimized"}]}];X.useEffect(()=>{(async()=>{const x=[{id:1,name:"Example.com",url:"https://example.com"},{id:2,name:"Demo Site",url:"https://demo-site.com"}];a(x),e(x[0].id),u(!1)})()},[]),X.useEffect(()=>{r&&(async()=>{u(!0);const x=[{id:1,url:"https://example.com",title:"Homepage",type:"landing"},{id:2,url:"https://example.com/about",title:"About Us",type:"landing"},{id:3,url:"https://example.com/products",title:"Products",type:"landing"},{id:4,url:"https://example.com/blog/post-1",title:"Blog Post 1",type:"blog"},{id:5,url:"https://example.com/blog/post-2",title:"Blog Post 2",type:"blog"},{id:6,url:"https://example.com/products/product-1",title:"Product 1",type:"product"},{id:7,url:"https://example.com/products/product-2",title:"Product 2",type:"product"},{id:8,url:"https://example.com/services",title:"Services",type:"service"}];l(x),i(x[0].url),u(!1)})()},[r]);const d=v=>{e(parseInt(v.target.value))},f=v=>{i(v.target.value)},p=v=>{console.log("Filters changed:",v)},g=()=>{alert("Batch optimization would be triggered here")};return b.jsx(_h,{children:b.jsxs("div",{className:"container mx-auto px-4 py-6",children:[b.jsxs("div",{className:"mb-6",children:[b.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Content Optimization"}),b.jsx("p",{className:"text-gray-600 mt-1",children:"Analyze and optimize your website content for better engagement and SEO performance."})]}),b.jsx("div",{className:"mb-6",children:b.jsx(lle,{filters:h,onFilterChange:p,showPresets:!0})}),b.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 mb-6",children:[b.jsx("div",{className:"lg:col-span-1",children:b.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[b.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Content Selection"}),b.jsxs("div",{className:"mb-4",children:[b.jsx("label",{htmlFor:"siteSelect",className:"block text-sm font-medium text-gray-700 mb-1",children:"Select Website"}),b.jsx("select",{id:"siteSelect",className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",value:r||"",onChange:d,disabled:c,children:s.map(v=>b.jsx("option",{value:v.id,children:v.name},v.id))})]}),b.jsxs("div",{className:"mb-4",children:[b.jsx("label",{htmlFor:"urlSelect",className:"block text-sm font-medium text-gray-700 mb-1",children:"Select Page to Optimize"}),b.jsx("select",{id:"urlSelect",className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",value:n,onChange:f,disabled:c||!r,children:o.map(v=>b.jsxs("option",{value:v.url,children:[v.title," (",v.url.split("/").pop()||"homepage",")"]},v.id))})]}),b.jsx("div",{className:"mt-6",children:b.jsx("button",{onClick:g,className:"w-full px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700",children:"Batch Optimize Selected"})}),b.jsxs("div",{className:"mt-4",children:[b.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Content Optimization Summary"}),b.jsxs("div",{className:"bg-gray-50 p-3 rounded",children:[b.jsxs("div",{className:"flex justify-between mb-1",children:[b.jsx("span",{className:"text-xs text-gray-500",children:"Total Pages:"}),b.jsx("span",{className:"text-xs font-medium",children:o.length})]}),b.jsxs("div",{className:"flex justify-between mb-1",children:[b.jsx("span",{className:"text-xs text-gray-500",children:"Optimized:"}),b.jsx("span",{className:"text-xs font-medium",children:"2 (25%)"})]}),b.jsxs("div",{className:"flex justify-between mb-1",children:[b.jsx("span",{className:"text-xs text-gray-500",children:"In Progress:"}),b.jsx("span",{className:"text-xs font-medium",children:"1 (12.5%)"})]}),b.jsxs("div",{className:"flex justify-between",children:[b.jsx("span",{className:"text-xs text-gray-500",children:"Not Optimized:"}),b.jsx("span",{className:"text-xs font-medium",children:"5 (62.5%)"})]})]})]})]})}),b.jsx("div",{className:"lg:col-span-3",children:c?b.jsxs("div",{className:"bg-white shadow rounded-lg p-6 flex items-center justify-center h-64",children:[b.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-indigo-600"}),b.jsx("span",{className:"ml-3 text-gray-600",children:"Loading content data..."})]}):b.jsx(ole,{siteId:r,contentUrl:n})})]}),b.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[b.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Recently Optimized Content"}),b.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[b.jsx("thead",{className:"bg-gray-50",children:b.jsxs("tr",{children:[b.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Page"}),b.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),b.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Score"}),b.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Improvement"}),b.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),b.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),b.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[b.jsxs("tr",{children:[b.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[b.jsx("div",{className:"text-sm font-medium text-blue-600",children:"Blog Post 1"}),b.jsx("div",{className:"text-xs text-gray-500",children:"/blog/post-1"})]}),b.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:b.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-blue-100 text-blue-800",children:"Blog"})}),b.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:b.jsxs("div",{className:"text-sm text-gray-900",children:[b.jsx("span",{className:"font-medium text-green-600",children:"87"}),b.jsx("span",{className:"text-gray-500 text-xs",children:" / 100"})]})}),b.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:b.jsx("div",{className:"text-sm font-medium text-green-600",children:"+23 points"})}),b.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:"April 1, 2025"}),b.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:b.jsx("a",{href:"#",className:"text-indigo-600 hover:text-indigo-900",children:"View"})})]}),b.jsxs("tr",{children:[b.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[b.jsx("div",{className:"text-sm font-medium text-blue-600",children:"Product 2"}),b.jsx("div",{className:"text-xs text-gray-500",children:"/products/product-2"})]}),b.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:b.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",children:"Product"})}),b.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:b.jsxs("div",{className:"text-sm text-gray-900",children:[b.jsx("span",{className:"font-medium text-green-600",children:"92"}),b.jsx("span",{className:"text-gray-500 text-xs",children:" / 100"})]})}),b.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:b.jsx("div",{className:"text-sm font-medium text-green-600",children:"+18 points"})}),b.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:"March 30, 2025"}),b.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:b.jsx("a",{href:"#",className:"text-indigo-600 hover:text-indigo-900",children:"View"})})]})]})]})]})]})})},wQe=({onSave:r,onCancel:e})=>{const n=Phe(),i=The(),{currentUser:s,token:a}=hM(),[o,l]=X.useState(!1),[c,u]=X.useState(null),[h,d]=X.useState(!1),f=async g=>{if(g.preventDefault(),!(!n||!i)){l(!0),u(null);try{const{error:v,paymentMethod:x}=await n.createPaymentMethod({type:"card",card:i.getElement(m$),billing_details:{email:s.email,name:s.name}});if(v){u(v.message),l(!1);return}const _=await fetch("/api/payments/payment-methods",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`},body:JSON.stringify({userId:s._id,paymentMethodId:x.id})});if(!_.ok){const E=await _.json();throw new Error(E.message||"Failed to save payment method")}d(!0),l(!1),r&&r(x)}catch(v){u(v.message||"An error occurred while saving your payment method."),l(!1)}}},p={style:{base:{color:"#32325d",fontFamily:'"Helvetica Neue", Helvetica, sans-serif',fontSmoothing:"antialiased",fontSize:"16px","::placeholder":{color:"#aab7c4"}},invalid:{color:"#fa755a",iconColor:"#fa755a"}}};return b.jsxs("form",{onSubmit:f,className:"max-w-md space-y-6",children:[b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Card Details"}),b.jsx("div",{className:"mt-1 p-3 border border-gray-300 rounded-md shadow-sm",children:b.jsx(m$,{options:p})})]}),c&&b.jsx("div",{className:"text-red-500 text-sm",children:c}),b.jsxs("div",{className:"flex gap-4",children:[b.jsx("button",{type:"submit",disabled:o||!n||h,className:"flex-1 py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:bg-gray-400",children:o?"Processing...":h?"Saved!":"Save Payment Method"}),e&&b.jsx("button",{type:"button",onClick:e,disabled:o||h,className:"flex-1 py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:bg-gray-100",children:"Cancel"})]})]})},SQe=()=>{const{currentUser:r}=hM(),{subscription:e,prices:n,cancelSubscription:i,loading:s}=Ohe(),[a,o]=X.useState(!1),[l,c]=X.useState("");if(s)return b.jsx("div",{className:"p-8 bg-white shadow rounded-lg",children:b.jsx("div",{className:"flex justify-center items-center h-24",children:b.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"})})});if(!e)return b.jsx("div",{className:"p-8 bg-white shadow rounded-lg",children:b.jsxs("div",{className:"text-center",children:[b.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"No Active Subscription"}),b.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"You don't have an active subscription. Check out our pricing plans to get started."}),b.jsx("a",{href:"/pricing",className:"mt-4 inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"View Plans"})]})});const u=async()=>{try{await i(e.id),c("Your subscription has been scheduled for cancellation at the end of the current billing period."),o(!1)}catch(f){console.error("Error cancelling subscription:",f),c("Failed to cancel subscription. Please try again or contact support.")}},h=f=>new Date(f).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),d=()=>e&&e.plan&&n[e.plan]?n[e.plan].features:[];return b.jsxs("div",{className:"p-8 bg-white shadow rounded-lg",children:[b.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Current Subscription"}),l&&b.jsx("div",{className:"mt-4 p-4 bg-green-50 border border-green-200 rounded-md text-green-700",children:l}),b.jsxs("div",{className:"mt-6 grid grid-cols-1 gap-6 sm:grid-cols-2",children:[b.jsx("div",{children:b.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg border border-gray-200",children:[b.jsxs("h4",{className:"font-medium text-gray-900 capitalize",children:[e.plan," Plan"]}),b.jsxs("div",{className:"mt-4 space-y-4",children:[b.jsxs("div",{children:[b.jsx("p",{className:"text-sm text-gray-500",children:"Status"}),b.jsxs("p",{className:"font-medium text-gray-900 capitalize",children:[e.status,e.cancelAtPeriodEnd&&" (Cancels at period end)"]})]}),b.jsxs("div",{children:[b.jsx("p",{className:"text-sm text-gray-500",children:"Current Period Ends"}),b.jsx("p",{className:"font-medium text-gray-900",children:h(e.currentPeriodEnd)})]}),!e.cancelAtPeriodEnd&&b.jsx("div",{className:"pt-4",children:a?b.jsxs("div",{className:"space-y-4",children:[b.jsx("p",{className:"text-sm text-red-600",children:"Are you sure you want to cancel? Your subscription will remain active until the end of the current billing period."}),b.jsxs("div",{className:"flex space-x-4",children:[b.jsx("button",{onClick:u,className:"px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:"Yes, Cancel Subscription"}),b.jsx("button",{onClick:()=>o(!1),className:"px-4 py-2 border border-gray-300 text-sm font-medium rounded-md shadow-sm text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"No, Keep Subscription"})]})]}):b.jsx("button",{onClick:()=>o(!0),className:"px-4 py-2 border border-gray-300 text-sm font-medium rounded-md shadow-sm text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Cancel Subscription"})})]})]})}),b.jsx("div",{children:b.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg border border-gray-200",children:[b.jsx("h4",{className:"font-medium text-gray-900",children:"Plan Features"}),b.jsx("ul",{className:"mt-4 space-y-2",children:d().map((f,p)=>b.jsxs("li",{className:"flex items-start",children:[b.jsx("svg",{className:"flex-shrink-0 h-5 w-5 text-green-500 mt-0.5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:b.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),b.jsx("span",{className:"ml-2 text-sm text-gray-700",children:f})]},p))}),b.jsx("div",{className:"mt-6",children:b.jsx("a",{href:"/pricing",className:"text-sm font-medium text-indigo-600 hover:text-indigo-500",children:"Compare plans"})})]})})]})]})},TQe=HQ(void 0),EQe=()=>{const{currentUser:r}=hM(),[e,n]=X.useState(!1),i=()=>{n(!1)};return b.jsxs("div",{className:"max-w-5xl mx-auto py-6 px-4 sm:px-6 lg:px-8",children:[b.jsxs("div",{className:"mb-8",children:[b.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Payment Settings"}),b.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Manage your subscription and payment methods"})]}),b.jsxs("div",{className:"space-y-8",children:[b.jsxs("div",{children:[b.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Subscription"}),b.jsx(SQe,{})]}),b.jsxs("div",{children:[b.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Payment Methods"}),e?b.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[b.jsx("h3",{className:"text-md font-medium text-gray-900 mb-4",children:"Add New Payment Method"}),b.jsx(GB,{stripe:TQe,children:b.jsx(wQe,{onSave:i,onCancel:()=>n(!1)})})]}):b.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[b.jsx("p",{className:"text-gray-700 mb-4",children:"Add a payment method to manage your subscription or make one-time payments."}),b.jsx("button",{onClick:()=>n(!0),className:"px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Add Payment Method"})]})]}),b.jsxs("div",{children:[b.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Billing History"}),b.jsx("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:b.jsx("div",{className:"p-6 border-b border-gray-200",children:b.jsx("p",{className:"text-gray-700",children:"Your billing history and invoices will appear here once you have an active subscription."})})})]})]})]})};function MQe({title:r,titleId:e,...n},i){return X.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":e},n),r?X.createElement("title",{id:e},r):null,X.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"}))}const Vz=X.forwardRef(MQe);function AQe({title:r,titleId:e,...n},i){return X.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":e},n),r?X.createElement("title",{id:e},r):null,X.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"}))}const CQe=X.forwardRef(AQe);function NQe({title:r,titleId:e,...n},i){return X.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":e},n),r?X.createElement("title",{id:e},r):null,X.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.857 17.082a23.848 23.848 0 0 0 5.454-1.31A8.967 8.967 0 0 1 18 9.75V9A6 6 0 0 0 6 9v.75a8.967 8.967 0 0 1-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 0 1-5.714 0m5.714 0a3 3 0 1 1-5.714 0"}))}const PQe=X.forwardRef(NQe);function RQe({title:r,titleId:e,...n},i){return X.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":e},n),r?X.createElement("title",{id:e},r):null,X.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75ZM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625ZM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125Z"}))}const OQe=X.forwardRef(RQe);function kQe({title:r,titleId:e,...n},i){return X.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":e},n),r?X.createElement("title",{id:e},r):null,X.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const IQe=X.forwardRef(kQe);function DQe({title:r,titleId:e,...n},i){return X.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":e},n),r?X.createElement("title",{id:e},r):null,X.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 12a7.5 7.5 0 0 0 15 0m-15 0a7.5 7.5 0 1 1 15 0m-15 0H3m16.5 0H21m-1.5 0H12m-8.457 3.077 1.41-.513m14.095-5.13 1.41-.513M5.106 17.785l1.15-.964m11.49-9.642 1.149-.964M7.501 19.795l.75-1.3m7.5-12.99.75-1.3m-6.063 16.658.26-1.477m2.605-14.772.26-1.477m0 17.726-.26-1.477M10.698 4.614l-.26-1.477M16.5 19.794l-.75-1.299M7.5 4.205 12 12m6.894 5.785-1.149-.964M6.256 7.178l-1.15-.964m15.352 8.864-1.41-.513M4.954 9.435l-1.41-.514M12.002 12l-3.75 6.495"}))}const cle=X.forwardRef(DQe);function LQe({title:r,titleId:e,...n},i){return X.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":e},n),r?X.createElement("title",{id:e},r):null,X.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v12m-3-2.818.879.659c1.171.879 3.07.879 4.242 0 1.172-.879 1.172-2.303 0-3.182C13.536 12.219 12.768 12 12 12c-.725 0-1.45-.22-2.003-.659-1.106-.879-1.106-2.303 0-3.182s2.9-.879 4.006 0l.415.33M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const ule=X.forwardRef(LQe);function FQe({title:r,titleId:e,...n},i){return X.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":e},n),r?X.createElement("title",{id:e},r):null,X.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25M9 16.5v.75m3-3v3M15 12v5.25m-4.5-15H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))}const BQe=X.forwardRef(FQe);function jQe({title:r,titleId:e,...n},i){return X.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":e},n),r?X.createElement("title",{id:e},r):null,X.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.125 2.25h-4.5c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125v-9M10.125 2.25h.375a9 9 0 0 1 9 9v.375M10.125 2.25A3.375 3.375 0 0 1 13.5 5.625v1.5c0 .621.504 1.125 1.125 1.125h1.5a3.375 3.375 0 0 1 3.375 3.375M9 15l2.25 2.25L15 12"}))}const UQe=X.forwardRef(jQe);function zQe({title:r,titleId:e,...n},i){return X.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":e},n),r?X.createElement("title",{id:e},r):null,X.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"}))}const $Qe=X.forwardRef(zQe);function GQe({title:r,titleId:e,...n},i){return X.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":e},n),r?X.createElement("title",{id:e},r):null,X.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))}const gg=X.forwardRef(GQe);function VQe({title:r,titleId:e,...n},i){return X.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":e},n),r?X.createElement("title",{id:e},r):null,X.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3c2.755 0 5.455.232 8.083.678.533.09.917.556.917 1.096v1.044a2.25 2.25 0 0 1-.659 1.591l-5.432 5.432a2.25 2.25 0 0 0-.659 1.591v2.927a2.25 2.25 0 0 1-1.244 2.013L9.75 21v-6.568a2.25 2.25 0 0 0-.659-1.591L3.659 7.409A2.25 2.25 0 0 1 3 5.818V4.774c0-.54.384-1.006.917-1.096A48.32 48.32 0 0 1 12 3Z"}))}const HQe=X.forwardRef(VQe);function WQe({title:r,titleId:e,...n},i){return X.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":e},n),r?X.createElement("title",{id:e},r):null,X.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 21a9.004 9.004 0 0 0 8.716-6.747M12 21a9.004 9.004 0 0 1-8.716-6.747M12 21c2.485 0 4.5-4.03 4.5-9S14.485 3 12 3m0 18c-2.485 0-4.5-4.03-4.5-9S9.515 3 12 3m0 0a8.997 8.997 0 0 1 7.843 4.582M12 3a8.997 8.997 0 0 0-7.843 4.582m15.686 0A11.953 11.953 0 0 1 12 10.5c-2.998 0-5.74-1.1-7.843-2.918m15.686 0A8.959 8.959 0 0 1 21 12c0 .778-.099 1.533-.284 2.253m0 0A17.919 17.919 0 0 1 12 16.5c-3.162 0-6.133-.815-8.716-2.247m0 0A9.015 9.015 0 0 1 3 12c0-1.605.42-3.113 1.157-4.418"}))}const qQe=X.forwardRef(WQe);function XQe({title:r,titleId:e,...n},i){return X.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":e},n),r?X.createElement("title",{id:e},r):null,X.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"}))}const hle=X.forwardRef(XQe);function KQe({title:r,titleId:e,...n},i){return X.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":e},n),r?X.createElement("title",{id:e},r):null,X.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125"}))}const dle=X.forwardRef(KQe);function YQe({title:r,titleId:e,...n},i){return X.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":e},n),r?X.createElement("title",{id:e},r):null,X.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 15.75 5.159-5.159a2.25 2.25 0 0 1 3.182 0l5.159 5.159m-1.5-1.5 1.409-1.409a2.25 2.25 0 0 1 3.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 0 0 1.5-1.5V6a1.5 1.5 0 0 0-1.5-1.5H3.75A1.5 1.5 0 0 0 2.25 6v12a1.5 1.5 0 0 0 1.5 1.5Zm10.5-11.25h.008v.008h-.008V8.25Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"}))}const yQ=X.forwardRef(YQe);function ZQe({title:r,titleId:e,...n},i){return X.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":e},n),r?X.createElement("title",{id:e},r):null,X.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))}const fle=X.forwardRef(ZQe);function QQe({title:r,titleId:e,...n},i){return X.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":e},n),r?X.createElement("title",{id:e},r):null,X.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.098 19.902a3.75 3.75 0 0 0 5.304 0l6.401-6.402M6.75 21A3.75 3.75 0 0 1 3 17.25V4.125C3 3.504 3.504 3 4.125 3h5.25c.621 0 1.125.504 1.125 1.125v4.072M6.75 21a3.75 3.75 0 0 0 3.75-3.75V8.197M6.75 21h13.125c.621 0 1.125-.504 1.125-1.125v-5.25c0-.621-.504-1.125-1.125-1.125h-4.072M10.5 8.197l2.88-2.88c.438-.439 1.15-.439 1.59 0l3.712 3.713c.44.44.44 1.152 0 1.59l-2.879 2.88M6.75 17.25h.008v.008H6.75v-.008Z"}))}const JQe=X.forwardRef(QQe);function eJe({title:r,titleId:e,...n},i){return X.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":e},n),r?X.createElement("title",{id:e},r):null,X.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.568 3H5.25A2.25 2.25 0 0 0 3 5.25v4.318c0 .597.237 1.17.659 1.591l9.581 9.581c.699.699 1.78.872 2.607.33a18.095 18.095 0 0 0 5.223-5.223c.542-.827.369-1.908-.33-2.607L11.16 3.66A2.25 2.25 0 0 0 9.568 3Z"}),X.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 6h.008v.008H6V6Z"}))}const tJe=X.forwardRef(eJe);function nJe({title:r,titleId:e,...n},i){return X.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":e},n),r?X.createElement("title",{id:e},r):null,X.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))}const FB=X.forwardRef(nJe);function rJe({title:r,titleId:e,...n},i){return X.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":e},n),r?X.createElement("title",{id:e},r):null,X.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 18.72a9.094 9.094 0 0 0 3.741-.479 3 3 0 0 0-4.682-2.72m.94 3.198.001.031c0 .225-.012.447-.037.666A11.944 11.944 0 0 1 12 21c-2.17 0-4.207-.576-5.963-1.584A6.062 6.062 0 0 1 6 18.719m12 0a5.971 5.971 0 0 0-.941-3.197m0 0A5.995 5.995 0 0 0 12 12.75a5.995 5.995 0 0 0-5.058 2.772m0 0a3 3 0 0 0-4.681 2.72 8.986 8.986 0 0 0 3.74.477m.94-3.197a5.971 5.971 0 0 0-.94 3.197M15 6.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm6 3a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Zm-13.5 0a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Z"}))}const ple=X.forwardRef(rJe);function iJe({title:r,titleId:e,...n},i){return X.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":e},n),r?X.createElement("title",{id:e},r):null,X.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 7.5v3m0 0v3m0-3h3m-3 0h-3m-2.25-4.125a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0ZM3 19.235v-.11a6.375 6.375 0 0 1 12.75 0v.109A12.318 12.318 0 0 1 9.374 21c-2.331 0-4.512-.645-6.374-1.766Z"}))}const mle=X.forwardRef(iJe);function sJe({title:r,titleId:e,...n},i){return X.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":e},n),r?X.createElement("title",{id:e},r):null,X.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))}const vQ=X.forwardRef(sJe),gle=()=>{const[r,e]=X.useState([]),[n,i]=X.useState(!0),[s,a]=X.useState(""),[o,l]=X.useState({status:"all",sortBy:"name"}),[c,u]=X.useState(!1);X.useEffect(()=>{setTimeout(()=>{e([{id:1,name:"TechCorp",website:"techcorp.com",status:"active",seoScore:87,issues:12,lastScan:"2025-04-07",plan:"Enterprise"},{id:2,name:"FashionBrand",website:"fashionbrand.com",status:"active",seoScore:72,issues:28,lastScan:"2025-04-06",plan:"Professional"},{id:3,name:"RestaurantChain",website:"restaurantchain.com",status:"active",seoScore:91,issues:5,lastScan:"2025-04-07",plan:"Enterprise"},{id:4,name:"LocalBusiness",website:"localbusiness.com",status:"inactive",seoScore:65,issues:32,lastScan:"2025-03-25",plan:"Basic"},{id:5,name:"E-commerce Store",website:"ecommercestore.com",status:"active",seoScore:79,issues:17,lastScan:"2025-04-05",plan:"Professional"}]),i(!1)},1e3)},[]);const h=r.filter(d=>{const f=d.name.toLowerCase().includes(s.toLowerCase())||d.website.toLowerCase().includes(s.toLowerCase()),p=o.status==="all"||d.status===o.status;return f&&p}).sort((d,f)=>o.sortBy==="name"?d.name.localeCompare(f.name):o.sortBy==="score"?f.seoScore-d.seoScore:o.sortBy==="issues"?d.issues-f.issues:0);return n?b.jsx("div",{className:"flex items-center justify-center h-64",children:b.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-blue-500"})}):b.jsxs("div",{className:"bg-white rounded-lg shadow",children:[b.jsxs("div",{className:"px-4 py-5 sm:px-6 flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-4 sm:space-y-0",children:[b.jsx("h2",{className:"text-lg leading-6 font-medium text-gray-900",children:"Client Management"}),b.jsxs("div",{className:"flex space-x-3",children:[b.jsxs("div",{className:"relative rounded-md shadow-sm",children:[b.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:b.jsx(hle,{className:"h-5 w-5 text-gray-400","aria-hidden":"true"})}),b.jsx("input",{type:"text",className:"focus:ring-blue-500 focus:border-blue-500 block w-full pl-10 sm:text-sm border-gray-300 rounded-md",placeholder:"Search clients...",value:s,onChange:d=>a(d.target.value)})]}),b.jsxs("button",{type:"button",className:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",onClick:()=>u(!c),children:[b.jsx(HQe,{className:"h-4 w-4 mr-2","aria-hidden":"true"}),"Filter"]}),b.jsxs(yr,{to:"/agency/clients/new",className:"inline-flex items-center px-3 py-2 border border-transparent shadow-sm text-sm leading-4 font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[b.jsx(fle,{className:"h-4 w-4 mr-2","aria-hidden":"true"}),"Add Client"]})]})]}),c&&b.jsxs("div",{className:"px-4 py-3 bg-gray-50 sm:px-6 flex flex-wrap gap-4",children:[b.jsxs("div",{children:[b.jsx("label",{htmlFor:"status",className:"block text-sm font-medium text-gray-700",children:"Status"}),b.jsxs("select",{id:"status",name:"status",className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md",value:o.status,onChange:d=>l({...o,status:d.target.value}),children:[b.jsx("option",{value:"all",children:"All"}),b.jsx("option",{value:"active",children:"Active"}),b.jsx("option",{value:"inactive",children:"Inactive"})]})]}),b.jsxs("div",{children:[b.jsx("label",{htmlFor:"sortBy",className:"block text-sm font-medium text-gray-700",children:"Sort By"}),b.jsxs("select",{id:"sortBy",name:"sortBy",className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md",value:o.sortBy,onChange:d=>l({...o,sortBy:d.target.value}),children:[b.jsx("option",{value:"name",children:"Name"}),b.jsx("option",{value:"score",children:"SEO Score"}),b.jsx("option",{value:"issues",children:"Issues (Low to High)"})]})]})]}),b.jsx("div",{className:"overflow-x-auto",children:b.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[b.jsx("thead",{className:"bg-gray-50",children:b.jsxs("tr",{children:[b.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Client"}),b.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),b.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"SEO Score"}),b.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Issues"}),b.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Last Scan"}),b.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Plan"}),b.jsx("th",{scope:"col",className:"relative px-6 py-3",children:b.jsx("span",{className:"sr-only",children:"Actions"})})]})}),b.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:h.map(d=>b.jsxs("tr",{className:"hover:bg-gray-50",children:[b.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:b.jsx("div",{className:"flex items-center",children:b.jsxs("div",{children:[b.jsx("div",{className:"text-sm font-medium text-gray-900",children:d.name}),b.jsx("div",{className:"text-sm text-gray-500",children:d.website})]})})}),b.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:b.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full 
                    ${d.status==="active"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:d.status})}),b.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:b.jsxs("div",{className:"relative pt-1",children:[b.jsx("div",{className:"flex items-center justify-between",children:b.jsx("div",{children:b.jsx("span",{className:"text-xs font-semibold inline-block text-blue-600",children:d.seoScore})})}),b.jsx("div",{className:"overflow-hidden h-2 mb-1 text-xs flex rounded bg-blue-200",children:b.jsx("div",{style:{width:`${d.seoScore}%`},className:"shadow-none flex flex-col text-center whitespace-nowrap text-white justify-center bg-blue-500"})})]})}),b.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:d.issues}),b.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:d.lastScan}),b.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:d.plan}),b.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:b.jsx(yr,{to:`/agency/clients/${d.id}`,className:"text-blue-600 hover:text-blue-900",children:"Manage"})})]},d.id))})]})}),h.length===0&&b.jsx("div",{className:"text-center py-12",children:b.jsx("p",{className:"text-gray-500",children:"No clients found matching your criteria."})}),b.jsxs("div",{className:"bg-gray-50 px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6",children:[b.jsxs("div",{className:"flex-1 flex justify-between sm:hidden",children:[b.jsx("button",{className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",children:"Previous"}),b.jsx("button",{className:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",children:"Next"})]}),b.jsxs("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[b.jsx("div",{children:b.jsxs("p",{className:"text-sm text-gray-700",children:["Showing ",b.jsx("span",{className:"font-medium",children:"1"})," to ",b.jsx("span",{className:"font-medium",children:h.length})," of ",b.jsx("span",{className:"font-medium",children:h.length})," clients"]})}),b.jsx("div",{children:b.jsxs("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination",children:[b.jsx("button",{className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50",children:"Previous"}),b.jsx("button",{className:"bg-white border-gray-300 text-gray-500 hover:bg-gray-50 relative inline-flex items-center px-4 py-2 border text-sm font-medium",children:"1"}),b.jsx("button",{className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50",children:"Next"})]})})]})]})]})};var IL,xQ;function aJe(){return xQ||(xQ=1,IL=new Proxy({},{get:(e,n)=>{if(n==="__esModule")return{};throw new Error(`You're trying to import \`@heroicons/react/solid/${n}\` from Heroicons v1 but have installed Heroicons v2. Install \`@heroicons/react@v1\` to resolve this error.`)}})),IL}var bQ=aJe();const oJe=({performance:r})=>{const e=i=>i>0?{icon:b.jsx(bQ.ArrowSmUpIcon,{className:"h-5 w-5 text-green-500","aria-hidden":"true"}),textColor:"text-green-600"}:i<0?{icon:b.jsx(bQ.ArrowSmDownIcon,{className:"h-5 w-5 text-red-500","aria-hidden":"true"}),textColor:"text-red-600"}:{icon:null,textColor:"text-gray-500"},n=[{name:"Overall SEO Score",value:r.overallScore,change:2.5,unit:"",description:"Average SEO score across all clients"},{name:"Client Satisfaction",value:r.clientSatisfaction,change:1.2,unit:"%",description:"Based on client feedback and surveys"},{name:"Revenue Growth",value:r.revenueGrowth,change:4.3,unit:"%",description:"Month-over-month client revenue growth"},{name:"Issue Resolution",value:r.issueResolution,change:-.8,unit:"%",description:"Percentage of issues successfully resolved"}];return b.jsx("div",{className:"bg-white rounded-lg shadow",children:b.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[b.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900 mb-4",children:"Agency Performance"}),b.jsx("dl",{className:"grid grid-cols-1 gap-4",children:n.map(i=>{const s=e(i.change);return b.jsxs("div",{className:"bg-gray-50 px-4 py-5 sm:p-6 rounded-md",children:[b.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:i.name}),b.jsxs("dd",{className:"mt-1",children:[b.jsxs("div",{className:"flex items-baseline",children:[b.jsxs("p",{className:"text-2xl font-semibold text-gray-900",children:[i.value,i.unit]}),b.jsxs("p",{className:`ml-2 flex items-baseline text-sm font-semibold ${s.textColor}`,children:[s.icon,b.jsxs("span",{className:"sr-only",children:[i.change>0?"Increased":i.change<0?"Decreased":"No change"," by"]}),Math.abs(i.change),"%"]})]}),b.jsx("p",{className:"mt-0.5 text-xs text-gray-500",children:i.description})]})]},i.name)})})]})})},lJe=()=>{const r=[{name:"Add Client",description:"Add a new client to your agency",icon:mle,to:"/agency/clients/new",color:"bg-blue-500 hover:bg-blue-600"},{name:"Bulk Report",description:"Generate reports for multiple clients",icon:BQe,to:"/agency/reports/bulk",color:"bg-purple-500 hover:bg-purple-600"},{name:"White Label",description:"Customize branding and appearance",icon:tJe,to:"/agency/settings/white-label",color:"bg-green-500 hover:bg-green-600"},{name:"Agency Settings",description:"Manage your agency settings",icon:cle,to:"/agency/settings",color:"bg-gray-500 hover:bg-gray-600"},{name:"User Permissions",description:"Configure user roles and access",icon:AdjustmentsIcon,to:"/agency/settings/permissions",color:"bg-yellow-500 hover:bg-yellow-600"},{name:"Billing",description:"Manage billing and subscriptions",icon:ule,to:"/agency/billing",color:"bg-red-500 hover:bg-red-600"}];return b.jsx("div",{className:"bg-white rounded-lg shadow",children:b.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[b.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900 mb-4",children:"Quick Actions"}),b.jsx("div",{className:"grid grid-cols-2 gap-4",children:r.map(e=>b.jsxs(yr,{to:e.to,className:`${e.color} text-white rounded-lg p-4 transition duration-150 ease-in-out flex flex-col items-center justify-center text-center h-24 shadow-sm hover:shadow-md`,children:[b.jsx(e.icon,{className:"h-6 w-6 mb-2","aria-hidden":"true"}),b.jsx("span",{className:"text-sm font-medium",children:e.name})]},e.name))})]})})},cJe=({agencyName:r,totalClients:e,activeProjects:n})=>b.jsx("div",{className:"bg-white rounded-lg shadow",children:b.jsx("div",{className:"px-4 py-5 sm:p-6",children:b.jsxs("div",{className:"md:flex md:items-center md:justify-between",children:[b.jsxs("div",{className:"flex-1 min-w-0",children:[b.jsx("h2",{className:"text-2xl font-bold leading-7 text-gray-900 sm:text-3xl sm:truncate",children:r}),b.jsxs("div",{className:"mt-1 flex flex-col sm:flex-row sm:flex-wrap sm:mt-0 sm:space-x-6",children:[b.jsxs("div",{className:"mt-2 flex items-center text-sm text-gray-500",children:[b.jsx(ple,{className:"flex-shrink-0 mr-1.5 h-5 w-5 text-gray-400","aria-hidden":"true"}),e," Total Clients"]}),b.jsxs("div",{className:"mt-2 flex items-center text-sm text-gray-500",children:[b.jsx(OQe,{className:"flex-shrink-0 mr-1.5 h-5 w-5 text-gray-400","aria-hidden":"true"}),n," Active Projects"]}),b.jsxs("div",{className:"mt-2 flex items-center text-sm text-gray-500",children:[b.jsx(IQe,{className:"flex-shrink-0 mr-1.5 h-5 w-5 text-gray-400","aria-hidden":"true"}),"Last updated: ",new Date().toLocaleDateString()]})]})]}),b.jsxs("div",{className:"mt-5 flex lg:mt-0 lg:ml-4",children:[b.jsx("span",{className:"hidden sm:block",children:b.jsx("button",{type:"button",className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Export Data"})}),b.jsx("span",{className:"hidden sm:block ml-3",children:b.jsx("button",{type:"button",className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Run Bulk Analysis"})})]})]})})}),uJe=()=>{const[r,e]=X.useState({name:"",totalClients:0,activeProjects:0,recentIssues:[],performance:{overallScore:0,clientSatisfaction:0,revenueGrowth:0,issueResolution:0}}),[n,i]=X.useState(!0);return X.useEffect(()=>{setTimeout(()=>{e({name:"Acme Digital Marketing",totalClients:23,activeProjects:17,recentIssues:[{id:1,client:"TechCorp",description:"Mobile performance issues",severity:"high",date:"2025-04-07"},{id:2,client:"FashionBrand",description:"Duplicate content",severity:"medium",date:"2025-04-06"},{id:3,client:"RestaurantChain",description:"Broken links",severity:"low",date:"2025-04-05"}],performance:{overallScore:87,clientSatisfaction:92,revenueGrowth:23,issueResolution:89}}),i(!1)},1e3)},[]),n?b.jsx("div",{className:"flex items-center justify-center h-screen",children:b.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):b.jsxs("div",{className:"p-6",children:[b.jsx(cJe,{agencyName:r.name,totalClients:r.totalClients,activeProjects:r.activeProjects}),b.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mt-8",children:[b.jsx("div",{className:"lg:col-span-2",children:b.jsx(gle,{})}),b.jsxs("div",{className:"space-y-6",children:[b.jsx(oJe,{performance:r.performance}),b.jsx(lJe,{})]})]}),b.jsxs("div",{className:"mt-8",children:[b.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Recent Issues Across Clients"}),b.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:b.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[b.jsx("thead",{className:"bg-gray-50",children:b.jsxs("tr",{children:[b.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Client"}),b.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Issue"}),b.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Severity"}),b.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),b.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Action"})]})}),b.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.recentIssues.map(s=>b.jsxs("tr",{children:[b.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:b.jsx("div",{className:"text-sm font-medium text-gray-900",children:s.client})}),b.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:b.jsx("div",{className:"text-sm text-gray-900",children:s.description})}),b.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:b.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full 
                      ${s.severity==="high"?"bg-red-100 text-red-800":s.severity==="medium"?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:s.severity})}),b.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:s.date}),b.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:b.jsx(yr,{to:`/agency/clients/${s.client.toLowerCase()}/issues/${s.id}`,className:"text-blue-600 hover:text-blue-900",children:"View"})})]},s.id))})]})})]})]})},DL=()=>b.jsx(_h,{pageTitle:"Agency Dashboard",moduleName:"agency",children:b.jsx(uJe,{})}),hJe=()=>{const{clientId:r}=RQ(),[e,n]=X.useState(null),[i,s]=X.useState(!0),[a,o]=X.useState("overview");if(X.useEffect(()=>{setTimeout(()=>{n({id:r,name:"TechCorp",website:"techcorp.com",status:"active",seoScore:87,issues:[{id:1,type:"Mobile",description:"Poor mobile performance",severity:"high",status:"open"},{id:2,type:"Links",description:"Broken internal links",severity:"medium",status:"open"},{id:3,type:"Content",description:"Thin content on product pages",severity:"medium",status:"open"},{id:4,type:"Meta",description:"Duplicate meta descriptions",severity:"low",status:"fixed"}],performance:{desktop:92,mobile:76,pagespeed:84},analytics:{organicTraffic:12500,conversion:3.2,bounceRate:42.5,averagePosition:8.3},contact:{name:"John Smith",email:"john@techcorp.com",phone:"(555) 123-4567"},lastScan:"2025-04-07T15:30:00Z",plan:"Enterprise",notes:"Client is focused on improving mobile experience. Previous agency failed to deliver results."}),s(!1)},1e3)},[r]),i)return b.jsx("div",{className:"flex items-center justify-center h-screen",children:b.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})});const l=()=>{switch(a){case"overview":return b.jsxs("div",{className:"mt-6 grid grid-cols-1 gap-6 lg:grid-cols-2",children:[b.jsx("div",{className:"bg-white rounded-lg shadow",children:b.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[b.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900 mb-4",children:"Performance Metrics"}),b.jsxs("dl",{className:"grid grid-cols-1 gap-x-4 gap-y-6 sm:grid-cols-2",children:[b.jsxs("div",{children:[b.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Desktop Score"}),b.jsx("dd",{className:"mt-1 text-3xl font-semibold text-gray-900",children:e.performance.desktop})]}),b.jsxs("div",{children:[b.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Mobile Score"}),b.jsx("dd",{className:"mt-1 text-3xl font-semibold text-gray-900",children:e.performance.mobile})]}),b.jsxs("div",{children:[b.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"PageSpeed"}),b.jsx("dd",{className:"mt-1 text-3xl font-semibold text-gray-900",children:e.performance.pagespeed})]}),b.jsxs("div",{children:[b.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Overall SEO Score"}),b.jsx("dd",{className:"mt-1 text-3xl font-semibold text-gray-900",children:e.seoScore})]})]})]})}),b.jsx("div",{className:"bg-white rounded-lg shadow",children:b.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[b.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900 mb-4",children:"Analytics"}),b.jsxs("dl",{className:"grid grid-cols-1 gap-x-4 gap-y-6 sm:grid-cols-2",children:[b.jsxs("div",{children:[b.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Organic Traffic"}),b.jsx("dd",{className:"mt-1 text-3xl font-semibold text-gray-900",children:e.analytics.organicTraffic.toLocaleString()})]}),b.jsxs("div",{children:[b.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Conversion Rate"}),b.jsxs("dd",{className:"mt-1 text-3xl font-semibold text-gray-900",children:[e.analytics.conversion,"%"]})]}),b.jsxs("div",{children:[b.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Bounce Rate"}),b.jsxs("dd",{className:"mt-1 text-3xl font-semibold text-gray-900",children:[e.analytics.bounceRate,"%"]})]}),b.jsxs("div",{children:[b.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Average Position"}),b.jsx("dd",{className:"mt-1 text-3xl font-semibold text-gray-900",children:e.analytics.averagePosition})]})]})]})}),b.jsx("div",{className:"bg-white rounded-lg shadow lg:col-span-2",children:b.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[b.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900 mb-4",children:"Issues"}),b.jsx("div",{className:"overflow-x-auto",children:b.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[b.jsx("thead",{className:"bg-gray-50",children:b.jsxs("tr",{children:[b.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),b.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),b.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Severity"}),b.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),b.jsx("th",{scope:"col",className:"relative px-6 py-3",children:b.jsx("span",{className:"sr-only",children:"Actions"})})]})}),b.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.issues.map(c=>b.jsxs("tr",{children:[b.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:c.type}),b.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:c.description}),b.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:b.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full 
                              ${c.severity==="high"?"bg-red-100 text-red-800":c.severity==="medium"?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:c.severity})}),b.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:b.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full 
                              ${c.status==="open"?"bg-red-100 text-red-800":"bg-green-100 text-green-800"}`,children:c.status})}),b.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:b.jsx(yr,{to:`/agency/clients/${e.id}/issues/${c.id}`,className:"text-blue-600 hover:text-blue-900",children:"View"})})]},c.id))})]})})]})}),b.jsx("div",{className:"bg-white rounded-lg shadow lg:col-span-2",children:b.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[b.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900 mb-4",children:"Client Information"}),b.jsxs("div",{className:"grid grid-cols-1 gap-y-6 gap-x-4 sm:grid-cols-6",children:[b.jsxs("div",{className:"sm:col-span-3",children:[b.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Contact Name"}),b.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:e.contact.name})]}),b.jsxs("div",{className:"sm:col-span-3",children:[b.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Email"}),b.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:e.contact.email})]}),b.jsxs("div",{className:"sm:col-span-3",children:[b.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Phone"}),b.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:e.contact.phone})]}),b.jsxs("div",{className:"sm:col-span-3",children:[b.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Plan"}),b.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:e.plan})]}),b.jsxs("div",{className:"sm:col-span-6",children:[b.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Notes"}),b.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:e.notes})]})]})]})})]});case"reports":return b.jsx("div",{className:"mt-6 bg-white rounded-lg shadow",children:b.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[b.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900 mb-4",children:"Reports"}),b.jsx("p",{className:"text-gray-500",children:"Generate and view reports for this client."}),b.jsxs("div",{className:"mt-5 grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3",children:[b.jsxs("button",{type:"button",className:"inline-flex items-center justify-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[b.jsx(gg,{className:"h-5 w-5 mr-2","aria-hidden":"true"}),"SEO Performance Report"]}),b.jsxs("button",{type:"button",className:"inline-flex items-center justify-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[b.jsx(gg,{className:"h-5 w-5 mr-2","aria-hidden":"true"}),"Technical Audit Report"]}),b.jsxs("button",{type:"button",className:"inline-flex items-center justify-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[b.jsx(gg,{className:"h-5 w-5 mr-2","aria-hidden":"true"}),"Content Analysis Report"]}),b.jsxs("button",{type:"button",className:"inline-flex items-center justify-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[b.jsx(gg,{className:"h-5 w-5 mr-2","aria-hidden":"true"}),"Mobile Optimization Report"]}),b.jsxs("button",{type:"button",className:"inline-flex items-center justify-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[b.jsx(gg,{className:"h-5 w-5 mr-2","aria-hidden":"true"}),"Competitive Analysis Report"]}),b.jsxs("button",{type:"button",className:"inline-flex items-center justify-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[b.jsx(gg,{className:"h-5 w-5 mr-2","aria-hidden":"true"}),"Custom Report"]})]})]})});case"settings":return b.jsx("div",{className:"mt-6 bg-white rounded-lg shadow",children:b.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[b.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900 mb-4",children:"Client Settings"}),b.jsxs("form",{className:"space-y-6",children:[b.jsxs("div",{className:"grid grid-cols-1 gap-y-6 gap-x-4 sm:grid-cols-6",children:[b.jsxs("div",{className:"sm:col-span-3",children:[b.jsx("label",{htmlFor:"clientName",className:"block text-sm font-medium text-gray-700",children:"Client Name"}),b.jsx("div",{className:"mt-1",children:b.jsx("input",{type:"text",name:"clientName",id:"clientName",className:"shadow-sm focus:ring-blue-500 focus:border-blue-500 block w-full sm:text-sm border-gray-300 rounded-md",defaultValue:e.name})})]}),b.jsxs("div",{className:"sm:col-span-3",children:[b.jsx("label",{htmlFor:"website",className:"block text-sm font-medium text-gray-700",children:"Website"}),b.jsx("div",{className:"mt-1",children:b.jsx("input",{type:"text",name:"website",id:"website",className:"shadow-sm focus:ring-blue-500 focus:border-blue-500 block w-full sm:text-sm border-gray-300 rounded-md",defaultValue:e.website})})]}),b.jsxs("div",{className:"sm:col-span-3",children:[b.jsx("label",{htmlFor:"contactName",className:"block text-sm font-medium text-gray-700",children:"Contact Name"}),b.jsx("div",{className:"mt-1",children:b.jsx("input",{type:"text",name:"contactName",id:"contactName",className:"shadow-sm focus:ring-blue-500 focus:border-blue-500 block w-full sm:text-sm border-gray-300 rounded-md",defaultValue:e.contact.name})})]}),b.jsxs("div",{className:"sm:col-span-3",children:[b.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email"}),b.jsx("div",{className:"mt-1",children:b.jsx("input",{type:"email",name:"email",id:"email",className:"shadow-sm focus:ring-blue-500 focus:border-blue-500 block w-full sm:text-sm border-gray-300 rounded-md",defaultValue:e.contact.email})})]}),b.jsxs("div",{className:"sm:col-span-3",children:[b.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700",children:"Phone"}),b.jsx("div",{className:"mt-1",children:b.jsx("input",{type:"text",name:"phone",id:"phone",className:"shadow-sm focus:ring-blue-500 focus:border-blue-500 block w-full sm:text-sm border-gray-300 rounded-md",defaultValue:e.contact.phone})})]}),b.jsxs("div",{className:"sm:col-span-3",children:[b.jsx("label",{htmlFor:"plan",className:"block text-sm font-medium text-gray-700",children:"Plan"}),b.jsx("div",{className:"mt-1",children:b.jsxs("select",{id:"plan",name:"plan",className:"shadow-sm focus:ring-blue-500 focus:border-blue-500 block w-full sm:text-sm border-gray-300 rounded-md",defaultValue:e.plan,children:[b.jsx("option",{children:"Basic"}),b.jsx("option",{children:"Professional"}),b.jsx("option",{children:"Enterprise"})]})})]}),b.jsxs("div",{className:"sm:col-span-6",children:[b.jsx("label",{htmlFor:"notes",className:"block text-sm font-medium text-gray-700",children:"Notes"}),b.jsx("div",{className:"mt-1",children:b.jsx("textarea",{id:"notes",name:"notes",rows:3,className:"shadow-sm focus:ring-blue-500 focus:border-blue-500 block w-full sm:text-sm border-gray-300 rounded-md",defaultValue:e.notes})})]})]}),b.jsxs("div",{className:"flex justify-end space-x-3",children:[b.jsx("button",{type:"button",className:"inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Cancel"}),b.jsx("button",{type:"submit",className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Save Changes"})]})]})]})});default:return null}};return b.jsxs("div",{className:"p-6",children:[b.jsxs("div",{className:"flex items-center",children:[b.jsx(yr,{to:"/agency/dashboard",className:"text-blue-600 hover:text-blue-900",children:b.jsx(Vz,{className:"h-5 w-5","aria-hidden":"true"})}),b.jsx("h1",{className:"ml-2 text-2xl font-bold text-gray-900",children:e.name}),b.jsx("span",{className:"ml-2 px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:e.status}),b.jsx("span",{className:"ml-2 text-sm text-gray-500",children:e.website})]}),b.jsxs("div",{className:"mt-4 flex flex-wrap items-center justify-between",children:[b.jsxs("div",{className:"flex space-x-2",children:[b.jsxs("button",{type:"button",className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[b.jsx(CQe,{className:"h-4 w-4 mr-2","aria-hidden":"true"}),"Run Scan"]}),b.jsxs("button",{type:"button",className:"inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[b.jsx(dle,{className:"h-4 w-4 mr-2","aria-hidden":"true"}),"Edit Client"]}),b.jsxs("button",{type:"button",className:"inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-red-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:[b.jsx(FB,{className:"h-4 w-4 mr-2","aria-hidden":"true"}),"Delete"]})]}),b.jsxs("div",{className:"mt-4 sm:mt-0 text-sm text-gray-500",children:["Last scan: ",new Date(e.lastScan).toLocaleString()]})]}),b.jsx("div",{className:"mt-6 border-b border-gray-200",children:b.jsxs("nav",{className:"flex -mb-px space-x-8",children:[b.jsx("button",{className:`${a==="overview"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm`,onClick:()=>o("overview"),children:"Overview"}),b.jsx("button",{className:`${a==="reports"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm`,onClick:()=>o("reports"),children:"Reports"}),b.jsx("button",{className:`${a==="settings"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm`,onClick:()=>o("settings"),children:"Settings"})]})}),l()]})},dJe=()=>b.jsx(_h,{pageTitle:"Client Details",moduleName:"agency",children:b.jsx(hJe,{})}),fJe=()=>b.jsx(_h,{pageTitle:"Client Management",moduleName:"agency",children:b.jsx(gle,{})}),pJe=()=>{const r=[{name:"White Label",description:"Customize the look and feel of your client dashboard",icon:JQe,to:"/agency/settings/white-label",iconBg:"bg-green-500"},{name:"User Permissions",description:"Manage user access and roles",icon:ple,to:"/agency/settings/permissions",iconBg:"bg-yellow-500"},{name:"Custom Domain",description:"Set up your own domain for client access",icon:qQe,to:"/agency/settings/domain",iconBg:"bg-blue-500"},{name:"Billing & Subscription",description:"Manage your billing and subscription settings",icon:ule,to:"/agency/settings/billing",iconBg:"bg-purple-500"},{name:"Notifications",description:"Configure email and system notifications",icon:PQe,to:"/agency/settings/notifications",iconBg:"bg-red-500"},{name:"Report Templates",description:"Customize client report templates",icon:$Qe,to:"/agency/settings/reports",iconBg:"bg-indigo-500"},{name:"Agency Profile",description:"Update your agency information",icon:cle,to:"/agency/settings/profile",iconBg:"bg-gray-500"}];return b.jsx(_h,{pageTitle:"Agency Settings",moduleName:"agency",children:b.jsx("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8",children:b.jsxs("div",{className:"mt-6",children:[b.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Settings & Configuration"}),b.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Configure your agency settings, white labeling, user permissions, and more."}),b.jsx("div",{className:"mt-6 grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-3",children:r.map(e=>b.jsx(yr,{to:e.to,className:"bg-white overflow-hidden shadow rounded-lg hover:shadow-md transition-shadow duration-300",children:b.jsx("div",{className:"px-4 py-5 sm:p-6",children:b.jsxs("div",{className:"flex items-center",children:[b.jsx("div",{className:`flex-shrink-0 ${e.iconBg} rounded-md p-3`,children:b.jsx(e.icon,{className:"h-6 w-6 text-white","aria-hidden":"true"})}),b.jsxs("div",{className:"ml-5",children:[b.jsx("h3",{className:"text-lg font-medium text-gray-900",children:e.name}),b.jsx("p",{className:"mt-1 text-sm text-gray-500",children:e.description})]})]})})},e.name))})]})})})},mJe=()=>{const[r,e]=X.useState({customLogo:null,logoPreviewUrl:null,primaryColor:"#3B82F6",accentColor:"#10B981",customDomain:"",enableCustomDomain:!1,customEmail:"",enableCustomEmail:!1,customFavicon:null,faviconPreviewUrl:null,clientPortalName:"SEO Dashboard",emailFooter:"Powered by Your Agency",hideSeoBrandingInReports:!0}),[n,i]=X.useState("light"),s=l=>{const c=l.target.files[0];if(c){const u=new FileReader;u.onloadend=()=>{e({...r,customLogo:c,logoPreviewUrl:u.result})},u.readAsDataURL(c)}},a=l=>{const c=l.target.files[0];if(c){const u=new FileReader;u.onloadend=()=>{e({...r,customFavicon:c,faviconPreviewUrl:u.result})},u.readAsDataURL(c)}},o=l=>{const{name:c,value:u,type:h,checked:d}=l.target;e({...r,[c]:h==="checkbox"?d:u})};return b.jsxs("div",{className:"p-6",children:[b.jsxs("div",{className:"flex items-center mb-6",children:[b.jsx(yr,{to:"/agency/settings",className:"text-blue-600 hover:text-blue-900 mr-4",children:b.jsx(Vz,{className:"h-5 w-5","aria-hidden":"true"})}),b.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"White Label Settings"})]}),b.jsx("div",{className:"bg-white shadow rounded-lg",children:b.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[b.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900 mb-8",children:"Customize the appearance of your SEO.engineering instance for clients"}),b.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[b.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[b.jsxs("div",{children:[b.jsx("h4",{className:"text-md font-medium text-gray-900 mb-4",children:"Branding"}),b.jsxs("div",{className:"space-y-6",children:[b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Logo"}),b.jsxs("div",{className:"mt-1 flex items-center",children:[b.jsx("div",{className:"flex-shrink-0 h-16 w-16 border border-gray-200 rounded-md overflow-hidden",children:r.logoPreviewUrl?b.jsx("img",{src:r.logoPreviewUrl,alt:"Logo preview",className:"h-full w-full object-contain"}):b.jsx("div",{className:"flex items-center justify-center h-full w-full bg-gray-100",children:b.jsx(yQ,{className:"h-8 w-8 text-gray-400","aria-hidden":"true"})})}),b.jsxs("div",{className:"ml-4",children:[b.jsxs("div",{className:"relative rounded-md shadow-sm",children:[b.jsx("input",{type:"file",name:"logo",id:"logo",className:"sr-only",onChange:s}),b.jsx("label",{htmlFor:"logo",className:"cursor-pointer inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Upload Logo"})]}),b.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Recommended size: 200x50px. PNG or SVG with transparent background."})]})]})]}),b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Favicon"}),b.jsxs("div",{className:"mt-1 flex items-center",children:[b.jsx("div",{className:"flex-shrink-0 h-8 w-8 border border-gray-200 rounded-md overflow-hidden",children:r.faviconPreviewUrl?b.jsx("img",{src:r.faviconPreviewUrl,alt:"Favicon preview",className:"h-full w-full object-contain"}):b.jsx("div",{className:"flex items-center justify-center h-full w-full bg-gray-100",children:b.jsx(yQ,{className:"h-4 w-4 text-gray-400","aria-hidden":"true"})})}),b.jsxs("div",{className:"ml-4",children:[b.jsxs("div",{className:"relative rounded-md shadow-sm",children:[b.jsx("input",{type:"file",name:"favicon",id:"favicon",className:"sr-only",onChange:a}),b.jsx("label",{htmlFor:"favicon",className:"cursor-pointer inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Upload Favicon"})]}),b.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Square image, at least 32x32px. Will be displayed in browser tabs."})]})]})]}),b.jsxs("div",{className:"grid grid-cols-1 gap-y-6 gap-x-4 sm:grid-cols-6",children:[b.jsxs("div",{className:"sm:col-span-3",children:[b.jsx("label",{htmlFor:"primaryColor",className:"block text-sm font-medium text-gray-700",children:"Primary Color"}),b.jsxs("div",{className:"mt-1 flex items-center",children:[b.jsx("input",{type:"color",name:"primaryColor",id:"primaryColor",value:r.primaryColor,onChange:o,className:"h-8 w-8 border border-gray-300 rounded-md"}),b.jsx("input",{type:"text",name:"primaryColor",value:r.primaryColor,onChange:o,className:"ml-2 shadow-sm focus:ring-blue-500 focus:border-blue-500 block w-full sm:text-sm border-gray-300 rounded-md"})]}),b.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Used for buttons, links, and primary actions."})]}),b.jsxs("div",{className:"sm:col-span-3",children:[b.jsx("label",{htmlFor:"accentColor",className:"block text-sm font-medium text-gray-700",children:"Accent Color"}),b.jsxs("div",{className:"mt-1 flex items-center",children:[b.jsx("input",{type:"color",name:"accentColor",id:"accentColor",value:r.accentColor,onChange:o,className:"h-8 w-8 border border-gray-300 rounded-md"}),b.jsx("input",{type:"text",name:"accentColor",value:r.accentColor,onChange:o,className:"ml-2 shadow-sm focus:ring-blue-500 focus:border-blue-500 block w-full sm:text-sm border-gray-300 rounded-md"})]}),b.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Used for secondary elements and highlights."})]}),b.jsxs("div",{className:"sm:col-span-6",children:[b.jsx("label",{htmlFor:"clientPortalName",className:"block text-sm font-medium text-gray-700",children:"Client Portal Name"}),b.jsx("div",{className:"mt-1",children:b.jsx("input",{type:"text",name:"clientPortalName",id:"clientPortalName",value:r.clientPortalName,onChange:o,className:"shadow-sm focus:ring-blue-500 focus:border-blue-500 block w-full sm:text-sm border-gray-300 rounded-md"})}),b.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"This is what clients will see in the title bar and welcome messages."})]})]})]})]}),b.jsxs("div",{children:[b.jsx("h4",{className:"text-md font-medium text-gray-900 mb-4",children:"Domain & Email"}),b.jsx("div",{className:"space-y-6",children:b.jsxs("div",{className:"grid grid-cols-1 gap-y-6 gap-x-4 sm:grid-cols-6",children:[b.jsx("div",{className:"sm:col-span-6",children:b.jsxs("div",{className:"flex items-start",children:[b.jsx("div",{className:"flex items-center h-5",children:b.jsx("input",{id:"enableCustomDomain",name:"enableCustomDomain",type:"checkbox",checked:r.enableCustomDomain,onChange:o,className:"focus:ring-blue-500 h-4 w-4 text-blue-600 border-gray-300 rounded"})}),b.jsxs("div",{className:"ml-3 text-sm",children:[b.jsx("label",{htmlFor:"enableCustomDomain",className:"font-medium text-gray-700",children:"Enable Custom Domain"}),b.jsx("p",{className:"text-gray-500",children:"Requires Enterprise plan or higher."})]})]})}),r.enableCustomDomain&&b.jsxs("div",{className:"sm:col-span-6",children:[b.jsx("label",{htmlFor:"customDomain",className:"block text-sm font-medium text-gray-700",children:"Custom Domain"}),b.jsx("div",{className:"mt-1",children:b.jsx("input",{type:"text",name:"customDomain",id:"customDomain",placeholder:"dashboard.youragency.com",value:r.customDomain,onChange:o,className:"shadow-sm focus:ring-blue-500 focus:border-blue-500 block w-full sm:text-sm border-gray-300 rounded-md"})}),b.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"You'll need to set up a CNAME record pointing to our servers."})]}),b.jsx("div",{className:"sm:col-span-6",children:b.jsxs("div",{className:"flex items-start",children:[b.jsx("div",{className:"flex items-center h-5",children:b.jsx("input",{id:"enableCustomEmail",name:"enableCustomEmail",type:"checkbox",checked:r.enableCustomEmail,onChange:o,className:"focus:ring-blue-500 h-4 w-4 text-blue-600 border-gray-300 rounded"})}),b.jsxs("div",{className:"ml-3 text-sm",children:[b.jsx("label",{htmlFor:"enableCustomEmail",className:"font-medium text-gray-700",children:"Enable Custom Email Sending"}),b.jsx("p",{className:"text-gray-500",children:"Send reports and notifications from your own domain."})]})]})}),r.enableCustomEmail&&b.jsxs("div",{className:"sm:col-span-6",children:[b.jsx("label",{htmlFor:"customEmail",className:"block text-sm font-medium text-gray-700",children:"From Email Address"}),b.jsx("div",{className:"mt-1",children:b.jsx("input",{type:"email",name:"customEmail",id:"customEmail",placeholder:"reports@youragency.com",value:r.customEmail,onChange:o,className:"shadow-sm focus:ring-blue-500 focus:border-blue-500 block w-full sm:text-sm border-gray-300 rounded-md"})}),b.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Additional verification steps will be required for email sending."})]}),b.jsxs("div",{className:"sm:col-span-6",children:[b.jsx("label",{htmlFor:"emailFooter",className:"block text-sm font-medium text-gray-700",children:"Email Footer Text"}),b.jsx("div",{className:"mt-1",children:b.jsx("input",{type:"text",name:"emailFooter",id:"emailFooter",value:r.emailFooter,onChange:o,className:"shadow-sm focus:ring-blue-500 focus:border-blue-500 block w-full sm:text-sm border-gray-300 rounded-md"})}),b.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"This text will appear in the footer of all emails sent to clients."})]})]})})]}),b.jsxs("div",{children:[b.jsx("h4",{className:"text-md font-medium text-gray-900 mb-4",children:"Reports & Documents"}),b.jsx("div",{className:"space-y-4",children:b.jsxs("div",{className:"flex items-start",children:[b.jsx("div",{className:"flex items-center h-5",children:b.jsx("input",{id:"hideSeoBrandingInReports",name:"hideSeoBrandingInReports",type:"checkbox",checked:r.hideSeoBrandingInReports,onChange:o,className:"focus:ring-blue-500 h-4 w-4 text-blue-600 border-gray-300 rounded"})}),b.jsxs("div",{className:"ml-3 text-sm",children:[b.jsx("label",{htmlFor:"hideSeoBrandingInReports",className:"font-medium text-gray-700",children:"Hide SEO.engineering Branding in Reports"}),b.jsx("p",{className:"text-gray-500",children:"Remove all mentions of SEO.engineering from client-facing reports."})]})]})})]})]}),b.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[b.jsx("h4",{className:"text-md font-medium text-gray-900 mb-4",children:"Preview"}),b.jsx("div",{className:"mb-4",children:b.jsxs("div",{className:"flex space-x-2",children:[b.jsx("button",{type:"button",onClick:()=>i("light"),className:`px-3 py-1 text-sm rounded-md ${n==="light"?"bg-gray-200 text-gray-800":"bg-transparent text-gray-600"}`,children:"Light Mode"}),b.jsx("button",{type:"button",onClick:()=>i("dark"),className:`px-3 py-1 text-sm rounded-md ${n==="dark"?"bg-gray-700 text-white":"bg-transparent text-gray-600"}`,children:"Dark Mode"})]})}),b.jsxs("div",{className:`rounded-lg overflow-hidden border ${n==="light"?"border-gray-200 bg-white":"border-gray-700 bg-gray-800"}`,children:[b.jsxs("div",{className:`px-4 py-3 flex items-center border-b ${n==="light"?"border-gray-200":"border-gray-700"}`,style:{backgroundColor:r.primaryColor,color:"#ffffff"},children:[b.jsx("div",{className:"h-8 w-24 bg-white bg-opacity-20 rounded flex items-center justify-center overflow-hidden",children:r.logoPreviewUrl?b.jsx("img",{src:r.logoPreviewUrl,alt:"Logo preview",className:"h-6 object-contain"}):b.jsx("span",{className:"text-xs font-medium",children:"LOGO"})}),b.jsxs("div",{className:"ml-auto flex items-center space-x-2",children:[b.jsx("div",{className:"h-6 w-6 rounded-full bg-white bg-opacity-20"}),b.jsx("div",{className:"h-4 w-20 rounded bg-white bg-opacity-20"})]})]}),b.jsxs("div",{className:"p-4",children:[b.jsxs("div",{className:`mb-4 p-3 rounded-lg ${n==="light"?"bg-gray-100":"bg-gray-700"}`,children:[b.jsx("div",{className:"h-5 w-36 rounded bg-current opacity-30 mb-2"}),b.jsxs("div",{className:"flex space-x-2",children:[b.jsx("div",{className:"h-10 w-24 rounded flex items-center justify-center text-white text-xs",style:{backgroundColor:r.primaryColor},children:"Primary"}),b.jsx("div",{className:"h-10 w-24 rounded flex items-center justify-center text-white text-xs",style:{backgroundColor:r.accentColor},children:"Accent"})]})]}),b.jsx("div",{className:`h-4 w-48 rounded ${n==="light"?"bg-gray-200":"bg-gray-700"} mb-2`}),b.jsx("div",{className:`h-4 w-64 rounded ${n==="light"?"bg-gray-200":"bg-gray-700"} mb-2`}),b.jsx("div",{className:`h-4 w-56 rounded ${n==="light"?"bg-gray-200":"bg-gray-700"} mb-4`}),b.jsx("div",{className:"h-20 rounded flex items-center justify-center text-xs",style:{backgroundColor:`${r.primaryColor}20`,color:r.primaryColor},children:r.clientPortalName})]})]})]})]}),b.jsxs("div",{className:"mt-8 flex justify-end",children:[b.jsx("button",{type:"button",className:"mr-3 inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Cancel"}),b.jsxs("button",{type:"button",className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[b.jsx(UQe,{className:"h-4 w-4 mr-2","aria-hidden":"true"}),"Save Settings"]})]})]})})]})},gJe=()=>b.jsx(_h,{pageTitle:"White Label Settings",moduleName:"agency",children:b.jsx(mJe,{})}),yJe=()=>{const[r,e]=X.useState([]),[n,i]=X.useState([]),[s,a]=X.useState(!0),[o,l]=X.useState(""),[c,u]=X.useState(!1),[h,d]=X.useState(!1),[f,p]=X.useState({firstName:"",lastName:"",email:"",role:"",clients:[]}),[g,v]=X.useState({name:"",description:"",permissions:{dashboard:{view:!0,edit:!1},reports:{view:!0,edit:!1,create:!1},settings:{view:!1,edit:!1},clients:{view:!0,edit:!1,create:!1,delete:!1},users:{view:!1,edit:!1,create:!1,delete:!1},billing:{view:!1,edit:!1}}}),[x,_]=X.useState([]);X.useEffect(()=>{setTimeout(()=>{e([{id:1,firstName:"Jane",lastName:"Smith",email:"jane@agency.com",role:"Admin",active:!0,lastLogin:"2025-04-07T14:25:00Z",clients:["All Clients"]},{id:2,firstName:"John",lastName:"Doe",email:"john@agency.com",role:"Manager",active:!0,lastLogin:"2025-04-06T09:12:00Z",clients:["TechCorp","FashionBrand","RestaurantChain"]},{id:3,firstName:"Alice",lastName:"Cooper",email:"alice@agency.com",role:"SEO Specialist",active:!0,lastLogin:"2025-04-07T11:45:00Z",clients:["TechCorp","E-commerce Store"]},{id:4,firstName:"Bob",lastName:"Johnson",email:"bob@agency.com",role:"Report Viewer",active:!1,lastLogin:"2025-03-15T16:30:00Z",clients:["LocalBusiness"]},{id:5,firstName:"Sarah",lastName:"Williams",email:"sarah@techcorp.com",role:"Client",active:!0,lastLogin:"2025-04-05T10:20:00Z",clients:["TechCorp"]}]),i([{id:1,name:"Admin",description:"Full access to all features and clients",userCount:1,systemDefined:!0},{id:2,name:"Manager",description:"Can manage assigned clients but cannot change billing or system settings",userCount:1,systemDefined:!0},{id:3,name:"SEO Specialist",description:"Can view and edit SEO settings for assigned clients",userCount:1,systemDefined:!1},{id:4,name:"Report Viewer",description:"Can only view reports for assigned clients",userCount:1,systemDefined:!1},{id:5,name:"Client",description:"Client access with limited view of their own site",userCount:1,systemDefined:!0}]),_([{id:1,name:"TechCorp"},{id:2,name:"FashionBrand"},{id:3,name:"RestaurantChain"},{id:4,name:"LocalBusiness"},{id:5,name:"E-commerce Store"}]),a(!1)},1e3)},[]);const E=r.filter(O=>`${O.firstName} ${O.lastName}`.toLowerCase().includes(o.toLowerCase())||O.email.toLowerCase().includes(o.toLowerCase())||O.role.toLowerCase().includes(o.toLowerCase())),S=O=>{const{name:D,value:F}=O.target;p({...f,[D]:F})},T=O=>{const{name:D,value:F}=O.target;v({...g,[D]:F})},M=(O,D,F)=>{v({...g,permissions:{...g.permissions,[O]:{...g.permissions[O],[D]:F}}})},C=O=>{const D=x.find(F=>F.id===O);D&&!f.clients.includes(D.name)&&p({...f,clients:[...f.clients,D.name]})},A=O=>{p({...f,clients:f.clients.filter(D=>D!==O)})},P=()=>{u(!1),p({firstName:"",lastName:"",email:"",role:"",clients:[]})},R=()=>{d(!1),v({name:"",description:"",permissions:{dashboard:{view:!0,edit:!1},reports:{view:!0,edit:!1,create:!1},settings:{view:!1,edit:!1},clients:{view:!0,edit:!1,create:!1,delete:!1},users:{view:!1,edit:!1,create:!1,delete:!1},billing:{view:!1,edit:!1}}})};return s?b.jsx("div",{className:"flex items-center justify-center h-screen",children:b.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):b.jsxs("div",{className:"p-6",children:[b.jsxs("div",{className:"flex items-center mb-6",children:[b.jsx(yr,{to:"/agency/settings",className:"text-blue-600 hover:text-blue-900 mr-4",children:b.jsx(Vz,{className:"h-5 w-5","aria-hidden":"true"})}),b.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"User Permissions"})]}),b.jsxs("div",{className:"mt-6 grid grid-cols-1 gap-y-6 lg:grid-cols-2 lg:gap-x-6 lg:gap-y-0",children:[b.jsx("div",{className:"bg-white shadow rounded-lg",children:b.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[b.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6",children:[b.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:"Users & Team Members"}),b.jsx("div",{className:"mt-3 sm:mt-0",children:b.jsxs("button",{type:"button",onClick:()=>u(!0),className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[b.jsx(mle,{className:"h-4 w-4 mr-2","aria-hidden":"true"}),"Add User"]})})]}),b.jsx("div",{className:"mb-4",children:b.jsxs("div",{className:"relative rounded-md shadow-sm",children:[b.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:b.jsx(hle,{className:"h-5 w-5 text-gray-400","aria-hidden":"true"})}),b.jsx("input",{type:"text",className:"focus:ring-blue-500 focus:border-blue-500 block w-full pl-10 sm:text-sm border-gray-300 rounded-md",placeholder:"Search users...",value:o,onChange:O=>l(O.target.value)})]})}),b.jsx("div",{className:"overflow-x-auto",children:b.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[b.jsx("thead",{className:"bg-gray-50",children:b.jsxs("tr",{children:[b.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),b.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),b.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),b.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Last Login"}),b.jsx("th",{scope:"col",className:"relative px-6 py-3",children:b.jsx("span",{className:"sr-only",children:"Actions"})})]})}),b.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:E.map(O=>b.jsxs("tr",{className:"hover:bg-gray-50",children:[b.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:b.jsxs("div",{className:"flex items-center",children:[b.jsx("div",{className:"flex-shrink-0 h-10 w-10 rounded-full bg-gray-200 flex items-center justify-center",children:b.jsxs("span",{className:"font-medium text-gray-500",children:[O.firstName[0],O.lastName[0]]})}),b.jsxs("div",{className:"ml-4",children:[b.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[O.firstName," ",O.lastName]}),b.jsx("div",{className:"text-sm text-gray-500",children:O.email})]})]})}),b.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[b.jsx("div",{className:"text-sm text-gray-900",children:O.role}),b.jsx("div",{className:"text-xs text-gray-500",children:O.clients.join(", ")})]}),b.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:b.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full 
                          ${O.active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:O.active?"Active":"Inactive"})}),b.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(O.lastLogin).toLocaleString()}),b.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[b.jsxs("button",{type:"button",className:"text-blue-600 hover:text-blue-900 mr-3",children:[b.jsx(dle,{className:"h-4 w-4","aria-hidden":"true"}),b.jsx("span",{className:"sr-only",children:"Edit"})]}),b.jsxs("button",{type:"button",className:"text-red-600 hover:text-red-900",children:[b.jsx(FB,{className:"h-4 w-4","aria-hidden":"true"}),b.jsx("span",{className:"sr-only",children:"Delete"})]})]})]},O.id))})]})}),E.length===0&&b.jsx("div",{className:"text-center py-6",children:b.jsx("p",{className:"text-gray-500",children:"No users found matching your search criteria."})})]})}),b.jsx("div",{className:"bg-white shadow rounded-lg",children:b.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[b.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6",children:[b.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:"Roles & Permissions"}),b.jsx("div",{className:"mt-3 sm:mt-0",children:b.jsxs("button",{type:"button",onClick:()=>d(!0),className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[b.jsx(fle,{className:"h-4 w-4 mr-2","aria-hidden":"true"}),"Add Role"]})})]}),b.jsx("div",{className:"overflow-x-auto",children:b.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[b.jsx("thead",{className:"bg-gray-50",children:b.jsxs("tr",{children:[b.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),b.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),b.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Users"}),b.jsx("th",{scope:"col",className:"relative px-6 py-3",children:b.jsx("span",{className:"sr-only",children:"Actions"})})]})}),b.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map(O=>b.jsxs("tr",{className:"hover:bg-gray-50",children:[b.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:b.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[O.name,O.systemDefined&&b.jsx("span",{className:"ml-2 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:"System"})]})}),b.jsx("td",{className:"px-6 py-4 whitespace-normal",children:b.jsx("div",{className:"text-sm text-gray-900 max-w-xs",children:O.description})}),b.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:O.userCount}),b.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:O.systemDefined?b.jsx("button",{type:"button",className:"text-blue-600 hover:text-blue-900",children:"View"}):b.jsxs(b.Fragment,{children:[b.jsxs("button",{type:"button",className:"text-blue-600 hover:text-blue-900 mr-3",children:[b.jsx(PencilAltIcon,{className:"h-4 w-4","aria-hidden":"true"}),b.jsx("span",{className:"sr-only",children:"Edit"})]}),b.jsxs("button",{type:"button",className:"text-red-600 hover:text-red-900",children:[b.jsx(FB,{className:"h-4 w-4","aria-hidden":"true"}),b.jsx("span",{className:"sr-only",children:"Delete"})]})]})})]},O.id))})]})})]})})]}),c&&b.jsx("div",{className:"fixed z-10 inset-0 overflow-y-auto",children:b.jsxs("div",{className:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[b.jsx("div",{className:"fixed inset-0 transition-opacity","aria-hidden":"true",children:b.jsx("div",{className:"absolute inset-0 bg-gray-500 opacity-75"})}),b.jsx("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:"​"}),b.jsxs("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",children:[b.jsxs("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:[b.jsxs("div",{className:"flex justify-between items-center mb-4",children:[b.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:"Add User"}),b.jsx("button",{type:"button",className:"text-gray-400 hover:text-gray-500",onClick:()=>u(!1),children:b.jsx(vQ,{className:"h-6 w-6","aria-hidden":"true"})})]}),b.jsx("div",{className:"mt-2",children:b.jsxs("form",{className:"space-y-4",children:[b.jsxs("div",{className:"grid grid-cols-1 gap-y-4 gap-x-4 sm:grid-cols-2",children:[b.jsxs("div",{children:[b.jsx("label",{htmlFor:"firstName",className:"block text-sm font-medium text-gray-700",children:"First Name"}),b.jsx("input",{type:"text",name:"firstName",id:"firstName",value:f.firstName,onChange:S,className:"mt-1 focus:ring-blue-500 focus:border-blue-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"})]}),b.jsxs("div",{children:[b.jsx("label",{htmlFor:"lastName",className:"block text-sm font-medium text-gray-700",children:"Last Name"}),b.jsx("input",{type:"text",name:"lastName",id:"lastName",value:f.lastName,onChange:S,className:"mt-1 focus:ring-blue-500 focus:border-blue-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"})]})]}),b.jsxs("div",{children:[b.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email"}),b.jsx("input",{type:"email",name:"email",id:"email",value:f.email,onChange:S,className:"mt-1 focus:ring-blue-500 focus:border-blue-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"})]}),b.jsxs("div",{children:[b.jsx("label",{htmlFor:"role",className:"block text-sm font-medium text-gray-700",children:"Role"}),b.jsxs("select",{id:"role",name:"role",value:f.role,onChange:S,className:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",children:[b.jsx("option",{value:"",children:"Select a role"}),n.map(O=>b.jsx("option",{value:O.name,children:O.name},O.id))]})]}),b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Assign Clients"}),b.jsx("div",{className:"mt-1",children:b.jsxs("select",{className:"block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",onChange:O=>C(parseInt(O.target.value)),defaultValue:"",children:[b.jsx("option",{value:"",disabled:!0,children:"Select clients to assign"}),b.jsx("option",{value:"all",children:"All Clients"}),x.map(O=>b.jsx("option",{value:O.id,children:O.name},O.id))]})}),b.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:f.clients.map(O=>b.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[O,b.jsxs("button",{type:"button",className:"ml-1.5 inline-flex h-4 w-4 flex-shrink-0 items-center justify-center rounded-full text-blue-400 hover:bg-blue-200 hover:text-blue-500 focus:bg-blue-500 focus:text-white focus:outline-none",onClick:()=>A(O),children:[b.jsxs("span",{className:"sr-only",children:["Remove ",O]}),b.jsx(vQ,{className:"h-3 w-3","aria-hidden":"true"})]})]},O))})]})]})})]}),b.jsxs("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse",children:[b.jsx("button",{type:"button",className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:ml-3 sm:w-auto sm:text-sm",onClick:P,children:"Add User"}),b.jsx("button",{type:"button",className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm",onClick:()=>u(!1),children:"Cancel"})]})]})]})}),h&&b.jsx("div",{className:"fixed z-10 inset-0 overflow-y-auto",children:b.jsxs("div",{className:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[b.jsx("div",{className:"fixed inset-0 transition-opacity","aria-hidden":"true",children:b.jsx("div",{className:"absolute inset-0 bg-gray-500 opacity-75"})}),b.jsx("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:"​"}),b.jsxs("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",children:[b.jsxs("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:[b.jsxs("div",{className:"flex justify-between items-center mb-4",children:[b.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:"Add Role"}),b.jsx("button",{type:"button",className:"text-gray-400 hover:text-gray-500",onClick:()=>d(!1),children:b.jsx(XIcon,{className:"h-6 w-6","aria-hidden":"true"})})]}),b.jsx("div",{className:"mt-2",children:b.jsxs("form",{className:"space-y-6",children:[b.jsxs("div",{children:[b.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Role Name"}),b.jsx("input",{type:"text",name:"name",id:"name",value:g.name,onChange:T,className:"mt-1 focus:ring-blue-500 focus:border-blue-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"})]}),b.jsxs("div",{children:[b.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700",children:"Description"}),b.jsx("textarea",{id:"description",name:"description",rows:2,value:g.description,onChange:T,className:"mt-1 focus:ring-blue-500 focus:border-blue-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"})]}),b.jsxs("div",{children:[b.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Permissions"}),b.jsxs("div",{className:"space-y-4",children:[b.jsxs("div",{children:[b.jsx("h5",{className:"text-sm font-medium text-gray-700 mb-1",children:"Dashboard"}),b.jsxs("div",{className:"flex space-x-4",children:[b.jsxs("div",{className:"flex items-center",children:[b.jsx("input",{id:"dashboard-view",name:"dashboard-view",type:"checkbox",checked:g.permissions.dashboard.view,onChange:O=>M("dashboard","view",O.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),b.jsx("label",{htmlFor:"dashboard-view",className:"ml-2 block text-xs font-normal text-gray-700",children:"View"})]}),b.jsxs("div",{className:"flex items-center",children:[b.jsx("input",{id:"dashboard-edit",name:"dashboard-edit",type:"checkbox",checked:g.permissions.dashboard.edit,onChange:O=>M("dashboard","edit",O.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),b.jsx("label",{htmlFor:"dashboard-edit",className:"ml-2 block text-xs font-normal text-gray-700",children:"Edit"})]})]})]}),b.jsxs("div",{children:[b.jsx("h5",{className:"text-sm font-medium text-gray-700 mb-1",children:"Reports"}),b.jsxs("div",{className:"flex space-x-4",children:[b.jsxs("div",{className:"flex items-center",children:[b.jsx("input",{id:"reports-view",name:"reports-view",type:"checkbox",checked:g.permissions.reports.view,onChange:O=>M("reports","view",O.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),b.jsx("label",{htmlFor:"reports-view",className:"ml-2 block text-xs font-normal text-gray-700",children:"View"})]}),b.jsxs("div",{className:"flex items-center",children:[b.jsx("input",{id:"reports-edit",name:"reports-edit",type:"checkbox",checked:g.permissions.reports.edit,onChange:O=>M("reports","edit",O.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),b.jsx("label",{htmlFor:"reports-edit",className:"ml-2 block text-xs font-normal text-gray-700",children:"Edit"})]}),b.jsxs("div",{className:"flex items-center",children:[b.jsx("input",{id:"reports-create",name:"reports-create",type:"checkbox",checked:g.permissions.reports.create,onChange:O=>M("reports","create",O.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),b.jsx("label",{htmlFor:"reports-create",className:"ml-2 block text-xs font-normal text-gray-700",children:"Create"})]})]})]}),b.jsxs("div",{children:[b.jsx("h5",{className:"text-sm font-medium text-gray-700 mb-1",children:"Settings"}),b.jsxs("div",{className:"flex space-x-4",children:[b.jsxs("div",{className:"flex items-center",children:[b.jsx("input",{id:"settings-view",name:"settings-view",type:"checkbox",checked:g.permissions.settings.view,onChange:O=>M("settings","view",O.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),b.jsx("label",{htmlFor:"settings-view",className:"ml-2 block text-xs font-normal text-gray-700",children:"View"})]}),b.jsxs("div",{className:"flex items-center",children:[b.jsx("input",{id:"settings-edit",name:"settings-edit",type:"checkbox",checked:g.permissions.settings.edit,onChange:O=>M("settings","edit",O.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),b.jsx("label",{htmlFor:"settings-edit",className:"ml-2 block text-xs font-normal text-gray-700",children:"Edit"})]})]})]}),b.jsxs("div",{children:[b.jsx("h5",{className:"text-sm font-medium text-gray-700 mb-1",children:"Clients"}),b.jsxs("div",{className:"flex flex-wrap gap-x-4 gap-y-2",children:[b.jsxs("div",{className:"flex items-center",children:[b.jsx("input",{id:"clients-view",name:"clients-view",type:"checkbox",checked:g.permissions.clients.view,onChange:O=>M("clients","view",O.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),b.jsx("label",{htmlFor:"clients-view",className:"ml-2 block text-xs font-normal text-gray-700",children:"View"})]}),b.jsxs("div",{className:"flex items-center",children:[b.jsx("input",{id:"clients-edit",name:"clients-edit",type:"checkbox",checked:g.permissions.clients.edit,onChange:O=>M("clients","edit",O.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),b.jsx("label",{htmlFor:"clients-edit",className:"ml-2 block text-xs font-normal text-gray-700",children:"Edit"})]}),b.jsxs("div",{className:"flex items-center",children:[b.jsx("input",{id:"clients-create",name:"clients-create",type:"checkbox",checked:g.permissions.clients.create,onChange:O=>M("clients","create",O.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),b.jsx("label",{htmlFor:"clients-create",className:"ml-2 block text-xs font-normal text-gray-700",children:"Create"})]}),b.jsxs("div",{className:"flex items-center",children:[b.jsx("input",{id:"clients-delete",name:"clients-delete",type:"checkbox",checked:g.permissions.clients.delete,onChange:O=>M("clients","delete",O.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),b.jsx("label",{htmlFor:"clients-delete",className:"ml-2 block text-xs font-normal text-gray-700",children:"Delete"})]})]})]}),b.jsxs("div",{children:[b.jsx("h5",{className:"text-sm font-medium text-gray-700 mb-1",children:"Users"}),b.jsxs("div",{className:"flex flex-wrap gap-x-4 gap-y-2",children:[b.jsxs("div",{className:"flex items-center",children:[b.jsx("input",{id:"users-view",name:"users-view",type:"checkbox",checked:g.permissions.users.view,onChange:O=>M("users","view",O.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),b.jsx("label",{htmlFor:"users-view",className:"ml-2 block text-xs font-normal text-gray-700",children:"View"})]}),b.jsxs("div",{className:"flex items-center",children:[b.jsx("input",{id:"users-edit",name:"users-edit",type:"checkbox",checked:g.permissions.users.edit,onChange:O=>M("users","edit",O.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),b.jsx("label",{htmlFor:"users-edit",className:"ml-2 block text-xs font-normal text-gray-700",children:"Edit"})]}),b.jsxs("div",{className:"flex items-center",children:[b.jsx("input",{id:"users-create",name:"users-create",type:"checkbox",checked:g.permissions.users.create,onChange:O=>M("users","create",O.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),b.jsx("label",{htmlFor:"users-create",className:"ml-2 block text-xs font-normal text-gray-700",children:"Create"})]}),b.jsxs("div",{className:"flex items-center",children:[b.jsx("input",{id:"users-delete",name:"users-delete",type:"checkbox",checked:g.permissions.users.delete,onChange:O=>M("users","delete",O.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),b.jsx("label",{htmlFor:"users-delete",className:"ml-2 block text-xs font-normal text-gray-700",children:"Delete"})]})]})]}),b.jsxs("div",{children:[b.jsx("h5",{className:"text-sm font-medium text-gray-700 mb-1",children:"Billing"}),b.jsxs("div",{className:"flex space-x-4",children:[b.jsxs("div",{className:"flex items-center",children:[b.jsx("input",{id:"billing-view",name:"billing-view",type:"checkbox",checked:g.permissions.billing.view,onChange:O=>M("billing","view",O.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),b.jsx("label",{htmlFor:"billing-view",className:"ml-2 block text-xs font-normal text-gray-700",children:"View"})]}),b.jsxs("div",{className:"flex items-center",children:[b.jsx("input",{id:"billing-edit",name:"billing-edit",type:"checkbox",checked:g.permissions.billing.edit,onChange:O=>M("billing","edit",O.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),b.jsx("label",{htmlFor:"billing-edit",className:"ml-2 block text-xs font-normal text-gray-700",children:"Edit"})]})]})]})]})]})]})})]}),b.jsxs("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse",children:[b.jsx("button",{type:"button",className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:ml-3 sm:w-auto sm:text-sm",onClick:R,children:"Add Role"}),b.jsx("button",{type:"button",className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm",onClick:()=>d(!1),children:"Cancel"})]})]})]})})]})},vJe=()=>b.jsx(_h,{pageTitle:"User Permissions",moduleName:"agency",children:b.jsx(yJe,{})});function xJe(){return b.jsx(zhe,{children:b.jsxs(yue,{children:[b.jsxs(zr,{path:"/",element:b.jsx(Vhe,{}),children:[b.jsx(zr,{index:!0,element:b.jsx(Fhe,{})}),b.jsx(zr,{path:"pricing",element:b.jsx(Bhe,{})}),b.jsx(zr,{path:"*",element:b.jsx(jhe,{})})]}),b.jsxs(zr,{path:"/dashboard",element:b.jsx(Hhe,{}),children:[b.jsx(zr,{index:!0,element:b.jsx(Yhe,{})}),b.jsx(zr,{path:"sites/:siteId",element:b.jsx(xQe,{})}),b.jsx(zr,{path:"analytics",element:b.jsx(bQe,{})}),b.jsx(zr,{path:"content-optimization",element:b.jsx(_Qe,{})}),b.jsx(zr,{path:"sites",element:b.jsx("div",{children:"Sites List Page (Coming Soon)"})}),b.jsx(zr,{path:"reports",element:b.jsx("div",{children:"Reports Page (Coming Soon)"})}),b.jsx(zr,{path:"settings",element:b.jsx(EQe,{})})]}),b.jsxs(zr,{path:"/agency",element:b.jsx(DL,{}),children:[b.jsx(zr,{index:!0,element:b.jsx(DL,{})}),b.jsx(zr,{path:"dashboard",element:b.jsx(DL,{})}),b.jsx(zr,{path:"clients",element:b.jsx(fJe,{})}),b.jsx(zr,{path:"clients/:clientId",element:b.jsx(dJe,{})}),b.jsx(zr,{path:"settings",element:b.jsx(pJe,{})}),b.jsx(zr,{path:"settings/white-label",element:b.jsx(gJe,{})}),b.jsx(zr,{path:"settings/permissions",element:b.jsx(vJe,{})}),b.jsx(zr,{path:"settings/domain",element:b.jsx("div",{children:"Custom Domain Settings (Coming Soon)"})}),b.jsx(zr,{path:"settings/billing",element:b.jsx("div",{children:"Billing Settings (Coming Soon)"})}),b.jsx(zr,{path:"settings/notifications",element:b.jsx("div",{children:"Notification Settings (Coming Soon)"})}),b.jsx(zr,{path:"settings/reports",element:b.jsx("div",{children:"Report Templates (Coming Soon)"})}),b.jsx(zr,{path:"settings/profile",element:b.jsx("div",{children:"Agency Profile (Coming Soon)"})}),b.jsx(zr,{path:"reports/bulk",element:b.jsx("div",{children:"Bulk Reporting (Coming Soon)"})})]})]})})}Ece.createRoot(document.getElementById("root")).render(b.jsx(ce.StrictMode,{children:b.jsx(Uue,{children:b.jsx(Yue,{children:b.jsx(khe,{children:b.jsx(xJe,{})})})})}));
//# sourceMappingURL=index-Dk8wcSpz.js.map
